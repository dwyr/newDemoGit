webpackJsonp([5],{

/***/ 1475:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *关键链路 -- 列表
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _DeliveryStore = __webpack_require__(718);

var _DeliveryStore2 = _interopRequireDefault(_DeliveryStore);

var _antd = __webpack_require__(17);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _TaskDetail = __webpack_require__(2013);

var _TaskDetail2 = _interopRequireDefault(_TaskDetail);

var _DailyEdit = __webpack_require__(2006);

var _DailyEdit2 = _interopRequireDefault(_DailyEdit);

var _Daily = __webpack_require__(2005);

var _Daily2 = _interopRequireDefault(_Daily);

var _BuildTeam = __webpack_require__(1960);

var _BuildTeam2 = _interopRequireDefault(_BuildTeam);

var _HandOver = __webpack_require__(2024);

var _HandOver2 = _interopRequireDefault(_HandOver);

var _Stakeholder = __webpack_require__(2012);

var _Stakeholder2 = _interopRequireDefault(_Stakeholder);

var _ConfirmSupplier = __webpack_require__(2068);

var _ConfirmSupplier2 = _interopRequireDefault(_ConfirmSupplier);

var _ConstructionSchedule = __webpack_require__(1990);

var _ConstructionSchedule2 = _interopRequireDefault(_ConstructionSchedule);

var _ConstructionContent = __webpack_require__(1983);

var _ConstructionContent2 = _interopRequireDefault(_ConstructionContent);

var _MakePlot = __webpack_require__(2041);

var _MakePlot2 = _interopRequireDefault(_MakePlot);

var _FiveCards = __webpack_require__(2015);

var _FiveCards2 = _interopRequireDefault(_FiveCards);

var _ConfirmEnter = __webpack_require__(1979);

var _ConfirmEnter2 = _interopRequireDefault(_ConfirmEnter);

var _NamePlate = __webpack_require__(2047);

var _NamePlate2 = _interopRequireDefault(_NamePlate);

var _Signboard = __webpack_require__(2065);

var _Signboard2 = _interopRequireDefault(_Signboard);

var _reactCustomScrollbars = __webpack_require__(336);

var _events = __webpack_require__(33);

var _events2 = _interopRequireDefault(_events);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var KeyLink = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(KeyLink, _React$Component);

	function KeyLink(props) {
		_classCallCheck(this, KeyLink);

		var _this = _possibleConstructorReturn(this, (KeyLink.__proto__ || Object.getPrototypeOf(KeyLink)).call(this, props));

		_this.keyInit = function () {
			_this.getProjectDetail().then(function (res) {
				// 初始化第一个数据
				var projectDetail = _this.store.projectDetail;

				var obj = mobx.toJS(projectDetail).stages[0].tasks[0];
				_this.showTaskDetailModal(obj, 1, 1);
			});
		};

		_this.showTaskDetailModal = function (item, stageOrder, taskOrder) {
			var _mobx$toJS = mobx.toJS(item),
			    id = _mobx$toJS.id,
			    taskType = _mobx$toJS.taskType;

			if (taskType == "stakeholder") {
				// 干系人
				_this.store.getTaskById({ 'id': id }).then(function (res) {
					if (res) {
						_this.store.taskDetail = res;
						_this.setState({
							visibleDetail: true,
							isDaily: item.taskType === 'daily' ? true : false,
							isBuildTeam: item.taskType === 'buildTeam' ? true : false,
							isHandOver: item.taskType === 'handover' ? true : false,
							stageOrder: stageOrder,
							taskOrder: taskOrder,
							taskType: taskType,
							taskId: id
						}, function () {
							_this.getTable();
						});
						//this.getCurrentStageTasks(item.id);
					}
				});
			} else if (taskType == "daily" || taskType == "buildTeam" || taskType == "handover") {
				_this.store.getTaskById({ 'id': id }).then(function (res) {
					if (res) {
						_this.store.taskDetail = res;
						_this.setState({
							visibleDetail: true,
							isDaily: item.taskType === 'daily' ? true : false,
							isBuildTeam: item.taskType === 'buildTeam' ? true : false,
							isHandOver: item.taskType === 'handover' ? true : false,
							stageOrder: stageOrder,
							taskOrder: taskOrder,
							taskType: taskType,
							taskId: id
						}, function () {
							// 更新任务列表
							_events2.default.emit("getBuildTeamOneItemList", {});
						});
						//this.getCurrentStageTasks(item.id);
					}
				});
				_this.store.getDocumentList({ 'taskId': item.id }).then(function (res) {
					if (res) {
						_this.store.documentList = res;
					}
				});
				_this.goViewDaily();
			} else {
				// 其他类型
				_this.store.getTaskById({ 'id': id }).then(function (res) {
					if (res) {
						_this.store.taskDetail = res;
						_this.setState({
							visibleDetail: true,
							stageOrder: stageOrder,
							taskOrder: taskOrder,
							taskType: taskType,
							taskId: id
						});
						//this.getCurrentStageTasks(item.id);
					}
				});
			}
		};

		_this.getCurrentStageTasks = function (taskId) {
			var _this$store = _this.store,
			    projectDetail = _this$store.projectDetail,
			    taskDetail = _this$store.taskDetail;

			var _mobx$toJS2 = mobx.toJS(taskDetail),
			    stageId = _mobx$toJS2.stageId;

			var _mobx$toJS3 = mobx.toJS(projectDetail),
			    stages = _mobx$toJS3.stages;

			var currentStage = stages.filter(function (item) {
				return item.id === stageId;
			});
			if (currentStage.length > 0 && currentStage[0].tasks !== undefined) {
				_this.setState({ currentStageTasks: currentStage[0].tasks });
			}
		};

		_this.closeTaskDetailModal = function () {
			_this.setState({ visibleDetail: false });
			_this.goViewDaily();
		};

		_this.handleCloseModal = function () {
			_this.setState({ visibleDetail: false });
		};

		_this.getProjectDetail = function () {
			/*let search = this.props.location.search;
   let currentId = "";
   const projectId = url.parse(search, true).query.projectId;
   const subProjectId = url.parse(search, true).query.subProjectId;
   if(subProjectId!==undefined){
   	currentId = subProjectId
   }else{
   	currentId = projectId
   }
   this.store.projectId = projectId;*/
			return new Promise(function (resolve) {
				_this.store.getProjectDetail({ 'id': _this.store.projectId }).then(function (res) {
					_this.store.projectDetail = res;
					resolve(res);
				});
			});
		};

		_this.getTaskIdByType = function (projectDetail, type) {
			var taskId = null;
			var stages = projectDetail.stages;

			if (stages !== undefined && Array.isArray(stages) && stages.length > 0) {
				taskId = stages[0]['tasks'].filter(function (item) {
					return item.taskType === type;
				})[0]['id'];
			}
			return taskId;
		};

		_this.updateTask = function (id) {
			if (id === null) return;
			_this.store.getTaskById({ 'id': id }).then(function (res) {
				if (res) {
					_this.store.taskDetail = res;
				}
			});
		};

		_this.doneTask = function (e, task) {
			var currentTask = mobx.toJS(task);
			var parmas = { "task": Object.assign(currentTask, { 'state': 10 }) };
			_this.store.updateTask(parmas).then(function (res) {
				_this.getProjectDetail();
			});
			e.stopPropagation();
		};

		_this.nextTask = function (taskDetail) {
			var _this$state = _this.state,
			    currentStageTasks = _this$state.currentStageTasks,
			    stageOrder = _this$state.stageOrder;

			var taskIndex = currentStageTasks.findIndex(function (item) {
				return item.id === taskDetail.id;
			});
			if (taskIndex !== -1 && taskIndex + 1 < currentStageTasks.length) {

				_this.showTaskDetailModal(currentStageTasks[taskIndex + 1], stageOrder, taskIndex + 2);
			}
		};

		_this.prveTask = function (taskDetail) {
			var _this$state2 = _this.state,
			    currentStageTasks = _this$state2.currentStageTasks,
			    stageOrder = _this$state2.stageOrder;

			var taskIndex = currentStageTasks.findIndex(function (item) {
				return item.id === taskDetail.id;
			});
			if (taskIndex !== -1 && taskIndex - 1 >= 0) {
				_this.showTaskDetailModal(currentStageTasks[taskIndex - 1], stageOrder, taskIndex);
			}
		};

		_this.goViewDaily = function () {
			_this.store.dailyPageState = 0;
		};

		_this.getTable = function () {
			var taskId = _this.state.taskId;

			_this.store.getStakeholderList({ 'taskId': taskId }).then(function (res) {
				if (res) {
					if (Array.isArray(res) && res.length > 0) {
						// 初始化默认值，列表第一项
						var param = res[0];
						var dataArray = res.map(function (item) {
							return Object.assign(item, { selected: false });
						});
						var dindex = dataArray.findIndex(function (item) {
							return item.id == param.id;
						});
						dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
						_this.store.stakeholderList = Object.assign([], dataArray);
						_this.store.stakeObj = Object.assign({}, param);
						_this.store.stakeState = false;
					} else {
						_this.store.stakeholderList = Object.assign([]);
						_this.store.stakeObj = Object.assign({});
						_this.store.stakeState = false;
					}
				}
			});
			_this.getProjectDetail();
		};

		_this.goToLink = function (url) {
			var _window$location = window.location,
			    protocol = _window$location.protocol,
			    host = _window$location.host;

			var origin = protocol + "//" + host + "/" + "repair" + "/#" + url + "?taskId=" + _this.state.taskId;
			window.open(origin, "_blank");
			//this.props.history.push(url+"?taskId="+this.state.taskId)
		};

		_this.toggleCollapsed = function () {
			_this.setState({
				collapsed: !_this.state.collapsed
			});
		};

		_this.emailSet = function () {
			_this.store.dailyEmail = true;
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			visibleDetail: false,
			isDaily: false,
			isBuildTeam: false,
			isHandOver: false,
			stageOrder: 0,
			taskOrder: 0,
			currentStageTasks: [],
			taskType: "", // 任务类型
			taskId: "", // 任务id
			taskDone: ["daily", "buildTeam", "handover", "stakeholder", "confirmSupplier", "constructionSchedule", "makePlot", "brand", "constructionContent", "confirmEnter", "nameplate", "signboard"], // 记录已经开发的功能
			taskDoing: [], // 记录正在开发的功能
			collapsed: false,
			projectId: null
		};
		return _this;
	}

	_createClass(KeyLink, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.updateTask(this.getTaskIdByType(projectDetail, "buildTeam")); // 切换不同项目时需要更新当前项目默认的buildTeam
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this2 = this;

			var search = this.props.location.search;
			var projectId = _url2.default.parse(search, true).query.projectId;
			this.store.projectId = projectId;

			this.keyInit();
			this.emitter = _events2.default.addListener('getKeyInit', function (res) {
				_this2.keyInit();
			});
			this.stateEmitter = _events2.default.addListener('getProjectState', function (res) {
				_this2.getProjectDetail();
			});
		}

		// 重查干系人


		// 邮件设置

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    stageOrder = _state.stageOrder,
			    taskOrder = _state.taskOrder,
			    currentStageTasks = _state.currentStageTasks,
			    isDaily = _state.isDaily,
			    isBuildTeam = _state.isBuildTeam,
			    isHandOver = _state.isHandOver,
			    taskType = _state.taskType,
			    taskDone = _state.taskDone,
			    taskDoing = _state.taskDoing,
			    collapsed = _state.collapsed,
			    taskId = _state.taskId;
			var _store = this.store,
			    projectDetail = _store.projectDetail,
			    taskDetail = _store.taskDetail,
			    dailyPageState = _store.dailyPageState,
			    dailyEmail = _store.dailyEmail;

			var stages = mobx.toJS(projectDetail).stages !== undefined ? mobx.toJS(projectDetail).stages : [];
			var menu = _react2.default.createElement(
				_antd.Menu,
				{ style: { position: 'absolute', right: '0' } },
				currentStageTasks.map(function (item, index) {
					return _react2.default.createElement(
						_antd.Menu.Item,
						{ key: 'taskname' + index },
						_react2.default.createElement(
							'a',
							{ onClick: function onClick() {
									_this3.showTaskDetailModal(item, stageOrder, index + 1);
								}, href: function href() {
									javascript: void 0;
								} },
							stageOrder + '.' + (index + 1) + ' ' + item.name,
							index + 1 === taskOrder ? _react2.default.createElement(
								'div',
								{ className: 'current_task' },
								'\u5F53\u524D'
							) : ''
						)
					);
				})
			);
			var content = _react2.default.createElement(
				'div',
				{ style: { maxWidth: "527px" } },
				_react2.default.createElement(
					'p',
					{ style: { fontWeight: '600', marginBottom: "5px" } },
					'\u672C\u9636\u6BB5\u76EE\u6807\uFF1A'
				),
				_react2.default.createElement(
					'p',
					null,
					'1\u3001\u9879\u76EE\u7ECF\u7406\u4E0E\u5546\u52A1\u7ECF\u7406\u4E00\u8D77\uFF0C\u5206\u6790\u9879\u76EE\u80CC\u666F\uFF0C\u4E86\u89E3\u5BA2\u6237\u7EC4\u7EC7\u67B6\u6784\uFF1B'
				),
				_react2.default.createElement(
					'p',
					null,
					'2\u3001\u4ECE\u5BA2\u6237\u7EC4\u7EC7\u67B6\u6784\u4E2D\u9009\u51FA\u672C\u6B21\u9879\u76EE\u7684\u5168\u90E8\u5E72\u7CFB\u4EBA\uFF0C\u5206\u77E9\u9635\u5206\u6790\u5E72\u7CFB\u4EBA\u5BF9\u9879\u76EE\u7684\u5F71\u54CD\uFF0C\u7406\u6E05\u5173\u952E\u5BF9\u7B56\uFF1B'
				),
				_react2.default.createElement(
					'p',
					null,
					'3\u3001\u786E\u5B9A\u5E72\u7CFB\u4EBA\u7684\u5BF9\u63A5\u4EBA\u548C\u6C9F\u901A\u65B9\u5F0F\uFF0C\u4E0E\u5E72\u7CFB\u4EBA\u4FDD\u6301\u8054\u7CFB\u3002'
				)
			);
			var contentSupplier = _react2.default.createElement(
				'div',
				{ style: { maxWidth: "527px" } },
				_react2.default.createElement(
					'p',
					{ style: { fontWeight: '600', marginBottom: "5px" } },
					'\u672C\u9636\u6BB5\u76EE\u6807\uFF1A'
				),
				_react2.default.createElement(
					'p',
					null,
					'1\u3001\u6839\u636E\u9879\u76EE\u4EA4\u4ED8\u6807\u51C6\u9009\u62E9\u5408\u9002\u4F9B\u5E94\u5546\uFF0C\u4F18\u5148\u9009\u62E9\u4E0E\u667A\u5EFA\u7F8E\u4F4F\u6709\u6218\u7565\u5408\u4F5C\u5173\u7CFB\u7684\u4F9B\u5E94\u5546\uFF1B'
				),
				_react2.default.createElement(
					'p',
					null,
					'2\u3001\u4E3B\u52A8\u8054\u7CFB\u4F9B\u5E94\u5546\uFF0C\u91CD\u8981\u9879\u76EE\u53EF\u4EE5\u8BF7\u6C42\u9AD8\u5C42\u51FA\u9762\u534F\u52A9\uFF0C\u5B8C\u6210\u4F9B\u5E94\u5546\u6D3D\u8C08\uFF0C\u4E89\u53D6\u91CD\u8981\u4F9B\u5E94\u5546\u7684\u5408\u4F5C\uFF1B'
				),
				_react2.default.createElement(
					'p',
					null,
					'3\u3001\u4E0E\u786E\u5B9A\u5408\u4F5C\u7684\u4F9B\u5E94\u5546\u5546\u8BA8\u6C9F\u901A\u673A\u5236\uFF0C\u5171\u8BC6\u9879\u76EE\u76EE\u6807\uFF0C\u7B7E\u8BA2\u5408\u540C\u3002'
				)
			);
			var detailHeader = _react2.default.createElement(
				_antd.Row,
				{ style: { padding: "15px 20px 15px 30px" } },
				_react2.default.createElement(
					_antd.Col,
					{ span: 24, className: 'leftLabelHeader', style: { paddingBottom: "15px", borderBottom: "1px dashed #e6e6e6" } },
					dailyPageState !== 0 ? _react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							{ style: { cursor: "pointer" }, onClick: this.goViewDaily },
							stageOrder + '.' + taskOrder + ' ',
							mobx.toJS(taskDetail).name
						),
						_react2.default.createElement(
							'span',
							{ className: 'daily_head_editing_label' },
							' > '
						),
						_react2.default.createElement(
							'span',
							{ className: 'daily_head_editing_label' },
							dailyPageState === 1 ? "新建日报" : "编辑日报"
						)
					) : _react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							null,
							stageOrder + '.' + taskOrder + ' ',
							mobx.toJS(taskDetail).name
						),
						taskType == "stakeholder" ? _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								_antd.Popover,
								{ content: content, placement: 'rightTop' },
								_react2.default.createElement(_antd.Icon, { type: 'question-circle', style: { marginLeft: "8px", fontSize: '16px', color: '#4AA9F8' }, theme: 'filled' })
							)
						) : null,
						taskType == "confirmSupplier" ? _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								_antd.Popover,
								{ content: contentSupplier, placement: 'rightTop' },
								_react2.default.createElement(_antd.Icon, { type: 'question-circle', style: { marginLeft: "8px", fontSize: '16px', color: '#4AA9F8' }, theme: 'filled' })
							)
						) : null,
						dailyEmail == true ? null : _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(_antd.Divider, { type: 'vertical', style: { transform: "skewX(-30deg)" } }),
							_react2.default.createElement(
								'span',
								{
									onClick: function onClick() {
										_this3.goToLink('/delivery/document');
									},
									style: { cursor: "pointer", fontSize: '14px', color: '#7F7F7F', fontWeight: 400 } },
								'\u573A\u666F\u7167\u7247'
							)
						),
						taskType == "daily" ? _react2.default.createElement(
							'span',
							null,
							dailyEmail == true ? _react2.default.createElement(
								'span',
								{ style: { margin: "0 8px" } },
								'>'
							) : _react2.default.createElement(_antd.Divider, { type: 'vertical', style: { transform: "skewX(-30deg)" } }),
							_react2.default.createElement(
								'span',
								{
									onClick: dailyEmail == true ? null : this.emailSet,
									style: { cursor: "pointer", fontSize: '14px', color: '#7F7F7F', fontWeight: 400 } },
								'\u90AE\u4EF6\u8BBE\u7F6E'
							)
						) : null
					)
				)
			);
			var obj = { 0: "./images/ready.png", 1: "./images/plan.svg", 2: "./images/execute.svg", 3: "./images/control.svg", 4: "./images/end.svg" }; // 图标

			return _react2.default.createElement(
				'div',
				{ className: 'w clearfix', style: { paddingLeft: !collapsed ? '245px' : '73px' } },
				_react2.default.createElement(
					'div',
					{ className: 'keylink-left', style: { width: !collapsed ? '245px' : '73px' } },
					collapsed ? _react2.default.createElement(_antd.Icon, {
						onClick: this.toggleCollapsed,
						style: {
							cursor: "pointer",
							position: "absolute",
							left: "50%",
							transform: "translateX(-50%)",
							top: "20px"
						},
						type: 'menu-unfold'
					}) : _react2.default.createElement(_antd.Icon, {
						onClick: this.toggleCollapsed,
						style: {
							cursor: "pointer",
							position: "absolute",
							right: "10px",
							top: "10px"
						},
						type: 'menu-fold'
					}),
					collapsed ? _react2.default.createElement(
						'div',
						{ className: 'pt30' },
						stages.map(function (item, index) {
							// 选中图标
							var isFlag = item.tasks !== undefined && item.tasks.some(function (v) {
								return v.id == taskId;
							});
							return _react2.default.createElement(
								'div',
								{ className: 'left-content mb20', key: index },
								_react2.default.createElement(
									_antd.Popover,
									{
										placement: 'rightTop',
										content: item.tasks !== undefined ? item.tasks.map(function (task, tIndex) {
											return _react2.default.createElement(
												'div',
												{ onClick: function onClick() {
														_this3.showTaskDetailModal(task, index + 1, tIndex + 1);
													},
													key: 'task-' + tIndex,
													style: { width: "200px" },
													className: "task_item2" },
												_react2.default.createElement(
													'div',
													{ className: 'pr' },
													_react2.default.createElement(
														'div',
														{ className: taskId == task.id ? "task_title3" : "task_title2"
														},
														index + 1 + '.' + (tIndex + 1) + ' ' + task.name
													),
													taskDone.includes(task.taskType) ? _react2.default.createElement(
														'div',
														{ className: 'task_status1' },
														task.isActive === 0 ? _react2.default.createElement(
															'span',
															{ style: { color: 'rgba(184, 116, 26, 0.392156862745098)', float: 'right', marginRight: '15px' } },
															'\u672A\u542F\u7528'
														) : task.state === 10 ? _react2.default.createElement(
															'span',
															{ style: { color: '#17BC9B', float: 'right', marginRight: '15px' } },
															'\u5DF2\u5B8C\u6210'
														) : task.state === 0 ? _react2.default.createElement(
															'span',
															{ style: { color: '#AAAAAA', float: 'right', marginRight: '15px' } },
															'\u5F85\u542F\u52A8'
														) : task.state === 1 ? _react2.default.createElement(
															'span',
															{ style: { color: '#EFB336', float: 'right', marginRight: '15px' } },
															'\u8FDB\u884C\u4E2D'
														) : ''
													) : _react2.default.createElement(
														'div',
														{ className: 'task_status1' },
														_react2.default.createElement(
															'span',
															{ style: { color: 'rgba(184, 116, 26, 0.392156862745098)', float: 'right', marginRight: '15px' } },
															'\u672A\u542F\u7528'
														)
													)
												)
											);
										}) : "",
										trigger: 'hover' },
									_react2.default.createElement(
										'div',
										{ className: 'tc mb10' },
										_react2.default.createElement('img', {
											style: index === 0 || index === 3 ? { verticalAlign: "middle" } : { verticalAlign: "middle" },
											height: index === 0 ? '17px' : index === 1 ? '22px' : index === 2 ? '22px' : index === 3 ? '15px' : '22px',
											width: index === 3 ? '24px' : '22px',
											src: isFlag ? item.iconUrl : obj[index] }),
										_react2.default.createElement(
											'p',
											{ className: isFlag ? "mt10 task_title1 task_title3 f12" : "mt10 task_title1 f12" },
											item.name && item.name.substring(0, 2)
										)
									)
								)
							);
						})
					) : _react2.default.createElement(
						_reactCustomScrollbars.Scrollbars,
						{
							style: {
								height: "100%"
							},
							autoHide: true },
						stages.map(function (item, index) {
							return _react2.default.createElement(
								'div',
								{ className: 'left-content', key: index },
								_react2.default.createElement(
									'div',
									{ className: 'left-content-header' },
									_react2.default.createElement('img', {
										style: index === 0 || index === 3 ? { verticalAlign: "middle" } : { verticalAlign: "middle" },
										height: index === 0 ? '17px' : index === 1 ? '22px' : index === 2 ? '22px' : index === 3 ? '15px' : '22px',
										width: index === 3 ? '24px' : '22px',
										src: item.iconUrl }),
									_react2.default.createElement(
										'span',
										{ className: 'ml15 task_title1' },
										item.name
									)
								),
								_react2.default.createElement(
									_antd.Timeline,
									null,
									item.tasks !== undefined ? item.tasks.map(function (task, tIndex) {
										return _react2.default.createElement(
											_antd.Timeline.Item,
											{
												color: taskId == task.id ? "blue" : "gray" },
											_react2.default.createElement(
												'div',
												{ onClick: function onClick() {
														_this3.showTaskDetailModal(task, index + 1, tIndex + 1);
													},
													key: 'task-' + tIndex,
													className: "task_item1" },
												_react2.default.createElement(
													'div',
													{ className: 'pr' },
													_react2.default.createElement(
														'div',
														{ className: taskId == task.id ? "task_title3" : "task_title2"
														},
														index + 1 + '.' + (tIndex + 1) + ' ' + task.name
													),
													taskDone.includes(task.taskType) ? _react2.default.createElement(
														'div',
														{ className: 'task_status1' },
														task.isActive === 0 ? _react2.default.createElement(
															'span',
															{ style: { color: 'rgba(184, 116, 26, 0.392156862745098)', float: 'right', marginRight: '15px' } },
															'\u672A\u542F\u7528'
														) : task.state === 10 ? _react2.default.createElement(
															'span',
															{ style: { color: '#17BC9B', float: 'right', marginRight: '15px' } },
															'\u5DF2\u5B8C\u6210'
														) : task.state === 0 ? _react2.default.createElement(
															'span',
															{ style: { color: '#AAAAAA', float: 'right', marginRight: '15px' } },
															'\u5F85\u542F\u52A8'
														) : task.state === 1 ? _react2.default.createElement(
															'span',
															{ style: { color: '#EFB336', float: 'right', marginRight: '15px' } },
															'\u8FDB\u884C\u4E2D'
														) : ''
													) : _react2.default.createElement(
														'div',
														{ className: 'task_status1' },
														_react2.default.createElement(
															'span',
															{ style: { color: 'rgba(184, 116, 26, 0.392156862745098)', float: 'right', marginRight: '15px' } },
															'\u672A\u542F\u7528'
														)
													)
												)
											)
										);
									}) : ""
								)
							);
						})
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'keylink-right' },
					detailHeader,
					taskType == "confirmSupplier" ? _react2.default.createElement(_ConfirmSupplier2.default, null) : null,
					taskType == "stakeholder" ? _react2.default.createElement(_Stakeholder2.default, { getTable: this.getTable }) : null,
					taskType == "buildTeam" ? _react2.default.createElement(_BuildTeam2.default, null) : null,
					taskType == "handover" ? _react2.default.createElement(_HandOver2.default, null) : null,
					taskType == "daily" ? dailyPageState == 0 ? _react2.default.createElement(_Daily2.default, null) : _react2.default.createElement(_DailyEdit2.default, null) : null,
					taskType == "constructionSchedule" ? _react2.default.createElement(_ConstructionSchedule2.default, null) : null,
					taskType == "constructionContent" ? _react2.default.createElement(_ConstructionContent2.default, { closeModal: this.handleCloseModal }) : null,
					taskType == "makePlot" ? _react2.default.createElement(_MakePlot2.default, null) : null,
					taskType == "brand" ? _react2.default.createElement(_FiveCards2.default, null) : null,
					taskType == "confirmEnter" ? _react2.default.createElement(_ConfirmEnter2.default, null) : null,
					taskType == "nameplate" ? _react2.default.createElement(_NamePlate2.default, null) : null,
					taskType == "signboard" ? _react2.default.createElement(_Signboard2.default, null) : null,
					taskType == "default" ? _react2.default.createElement(_TaskDetail2.default, null) : null
				)
			);
		}
	}]);

	return KeyLink;
}(_react2.default.Component)) || _class) || _class);
exports.default = KeyLink;

/***/ }),

/***/ 1517:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 大文件上传组件
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _mobxReact = __webpack_require__(22);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file).then(function (data) {
			resolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了
		}).catch(function (error) {
			reject(error);
		});
	});
};

var MyUpload = (_dec = (0, _mobxReact.inject)('appStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MyUpload, _React$Component);

	function MyUpload(props) {
		var _this2 = this;

		_classCallCheck(this, MyUpload);

		var _this = _possibleConstructorReturn(this, (MyUpload.__proto__ || Object.getPrototypeOf(MyUpload)).call(this, props));

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.handleChange = function (info) {
			var status = info.file.status;

			// 记录新上传的
			var fileList = [].concat(_toConsumableArray(info.fileList));
			var oldFileList = JSON.parse(JSON.stringify(fileList)).filter(function (file) {
				return file.status && file.status === 'done';
			}); // 之前保存过的
			var newFileList = JSON.parse(JSON.stringify(fileList));
			newFileList = newFileList.filter(function (file) {
				if (file.status && file.status === 'done') {
					return false;
				}
				return true;
			});
			newFileList = newFileList.map(function (file) {
				if (file.originFileObj) {
					var url = _this.state.host + uploadPath('path', file);
					return Object.assign({}, {
						uid: file.uid,
						name: file.name,
						status: "done",
						url: url,
						fileId: null,
						fileName: file.name,
						filePath: url,
						id: ""
					});
				}
				return file;
			});
			if (status == undefined) {
				// 处理附件
				/*let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))
    let _this = this;
    _this.setState({
    	loading: true
    });
    setTimeout(function(){
    	_this.props.saveAttachment(array);
    	_this.setState({
    		loading: false
    	});
    }, 3000);*/
			} else if (status === "removed") {
				// 删除
				/*let id = info.file.id;
    if (id !== "" || id !== null) { // 删除已有的
    	// this.props.delNode(id);
    }*/
				var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), _toConsumableArray(newFileList))));
				_this.props.saveAttachment(array);
			}
		};

		_this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				url: url,
				fileId: null,
				fileName: file.name,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		};

		_this.beforeUpload = function (file) {
			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				//console.log(accept, file.type, type, 'accept')
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}
			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}
			_this.setState({
				loading: true
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = true; // 记录一次
				}
			});
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {
					_antd.message.error("文件上传失败");
					_this.setState({
						loading: false
					}, function () {
						if (_this.props.journalType) {
							_this.store.journal = false; // 记录一次
						}
					});
					return false;
				});
			};
			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										// 去掉url的问号
										if (filePath.indexOf("?") != -1) {
											filePath = filePath.split("?")[0];
										}
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.cancel = function () {
			_this.setState({
				loading: false
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = false; // 清楚记录
				}
			});
		};

		_this.store = _this.props.appStore;
		_this.state = {
			fileList: _this.props.fileList,
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0
		};
		return _this;
	}

	_createClass(MyUpload, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			if (this.props.journalType) {
				this.store.journal = false; // 记录一次
			}
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}

			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this3.state.token));
					_this3.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						})
					});
				}
			});
		}

		// 只用做删除操作


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept,
			    length = _props.length;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				onChange: this.handleChange,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "picture-card",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				showUploadList: {
					showDownloadIcon: true
				}
			};
			var uploadButton = _react2.default.createElement(
				'div',
				{ className: 'pr' },
				_react2.default.createElement(_antd.Icon, { type: loading ? "loading" : "plus" }),
				loading ? _react2.default.createElement(
					'div',
					{ className: 'ant-upload-text' },
					'\u4E0A\u4F20\u4E2D'
				) : null,
				loading ? _react2.default.createElement(_antd.Icon, { type: 'stop',
					title: '\u53D6\u6D88\u4E0A\u4F20',
					style: {
						position: 'absolute',
						top: '-39px',
						right: '-22px',
						fontSize: '15px',
						color: '#1890ff'
					}, onClick: this.cancel }) : null
			);

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);

			return _react2.default.createElement(
				'div',
				{ className: 'affairs_upload' },
				_react2.default.createElement(
					_antd.Upload,
					_extends({}, props, { fileList: fileList }),
					disabled || length >= "1" ? null : uploadButton
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage, alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this4.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUpload;
}(_react2.default.Component)) || _class) || _class);
exports.default = MyUpload;

/***/ }),

/***/ 1522:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


if (true) {
    module.exports = __webpack_require__(1530);
} else {
    module.exports = require('./zmage.development.js');
}

/***/ }),

/***/ 1523:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(40);

/***/ }),

/***/ 1527:
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/** `Object#toString` result references. */
var funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]';

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */
function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;
  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }
  return result;
}

/** Used for built-in method references. */
var arrayProto = Array.prototype,
    funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to detect overreaching core-js shims. */
var coreJsData = root['__core-js_shared__'];

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/** Built-in value references. */
var splice = arrayProto.splice;

/* Built-in method references that are verified to be native. */
var Map = getNative(root, 'Map'),
    nativeCreate = getNative(Object, 'create');

/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Hash(entries) {
  var index = -1,
      length = entries ? entries.length : 0;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */
function hashClear() {
  this.__data__ = nativeCreate ? nativeCreate(null) : {};
}

/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function hashDelete(key) {
  return this.has(key) && delete this.__data__[key];
}

/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty.call(data, key) ? data[key] : undefined;
}

/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);
}

/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */
function hashSet(key, value) {
  var data = this.__data__;
  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;
  return this;
}

// Add methods to `Hash`.
Hash.prototype.clear = hashClear;
Hash.prototype['delete'] = hashDelete;
Hash.prototype.get = hashGet;
Hash.prototype.has = hashHas;
Hash.prototype.set = hashSet;

/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function ListCache(entries) {
  var index = -1,
      length = entries ? entries.length : 0;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */
function listCacheClear() {
  this.__data__ = [];
}

/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function listCacheDelete(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  return true;
}

/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function listCacheGet(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  return index < 0 ? undefined : data[index][1];
}

/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function listCacheHas(key) {
  return assocIndexOf(this.__data__, key) > -1;
}

/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */
function listCacheSet(key, value) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}

// Add methods to `ListCache`.
ListCache.prototype.clear = listCacheClear;
ListCache.prototype['delete'] = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;

/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function MapCache(entries) {
  var index = -1,
      length = entries ? entries.length : 0;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */
function mapCacheClear() {
  this.__data__ = {
    'hash': new Hash,
    'map': new (Map || ListCache),
    'string': new Hash
  };
}

/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function mapCacheDelete(key) {
  return getMapData(this, key)['delete'](key);
}

/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function mapCacheGet(key) {
  return getMapData(this, key).get(key);
}

/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function mapCacheHas(key) {
  return getMapData(this, key).has(key);
}

/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */
function mapCacheSet(key, value) {
  getMapData(this, key).set(key, value);
  return this;
}

// Add methods to `MapCache`.
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype['delete'] = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;

/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }
  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}

/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable(key)
    ? data[typeof key == 'string' ? 'string' : 'hash']
    : data.map;
}

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}

/**
 * Checks if `value` is suitable for use as unique object key.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
 */
function isKeyable(value) {
  var type = typeof value;
  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
    ? (value !== '__proto__')
    : (value === null);
}

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to process.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

/**
 * Creates a function that memoizes the result of `func`. If `resolver` is
 * provided, it determines the cache key for storing the result based on the
 * arguments provided to the memoized function. By default, the first argument
 * provided to the memoized function is used as the map cache key. The `func`
 * is invoked with the `this` binding of the memoized function.
 *
 * **Note:** The cache is exposed as the `cache` property on the memoized
 * function. Its creation may be customized by replacing the `_.memoize.Cache`
 * constructor with one whose instances implement the
 * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
 * method interface of `delete`, `get`, `has`, and `set`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to have its output memoized.
 * @param {Function} [resolver] The function to resolve the cache key.
 * @returns {Function} Returns the new memoized function.
 * @example
 *
 * var object = { 'a': 1, 'b': 2 };
 * var other = { 'c': 3, 'd': 4 };
 *
 * var values = _.memoize(_.values);
 * values(object);
 * // => [1, 2]
 *
 * values(other);
 * // => [3, 4]
 *
 * object.a = 2;
 * values(object);
 * // => [1, 2]
 *
 * // Modify the result cache.
 * values.cache.set(object, ['a', 'b']);
 * values(object);
 * // => ['a', 'b']
 *
 * // Replace `_.memoize.Cache`.
 * _.memoize.Cache = WeakMap;
 */
function memoize(func, resolver) {
  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function() {
    var args = arguments,
        key = resolver ? resolver.apply(this, args) : args[0],
        cache = memoized.cache;

    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result);
    return result;
  };
  memoized.cache = new (memoize.Cache || MapCache);
  return memoized;
}

// Assign cache to `_.memoize`.
memoize.Cache = MapCache;

/**
 * Performs a
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * comparison between two values to determine if they are equivalent.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.eq(object, object);
 * // => true
 *
 * _.eq(object, other);
 * // => false
 *
 * _.eq('a', 'a');
 * // => true
 *
 * _.eq('a', Object('a'));
 * // => false
 *
 * _.eq(NaN, NaN);
 * // => true
 */
function eq(value, other) {
  return value === other || (value !== value && other !== other);
}

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 8-9 which returns 'object' for typed array and other constructors.
  var tag = isObject(value) ? objectToString.call(value) : '';
  return tag == funcTag || tag == genTag;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

module.exports = memoize;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(81)))

/***/ }),

/***/ 1528:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(20);

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InfiniteScroll = function (_Component) {
  _inherits(InfiniteScroll, _Component);

  function InfiniteScroll(props) {
    _classCallCheck(this, InfiniteScroll);

    var _this = _possibleConstructorReturn(this, (InfiniteScroll.__proto__ || Object.getPrototypeOf(InfiniteScroll)).call(this, props));

    _this.scrollListener = _this.scrollListener.bind(_this);
    _this.eventListenerOptions = _this.eventListenerOptions.bind(_this);
    _this.mousewheelListener = _this.mousewheelListener.bind(_this);
    return _this;
  }

  _createClass(InfiniteScroll, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.pageLoaded = this.props.pageStart;
      this.options = this.eventListenerOptions();
      this.attachScrollListener();
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate() {
      if (this.props.isReverse && this.loadMore) {
        var parentElement = this.getParentElement(this.scrollComponent);
        parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;
        this.loadMore = false;
      }
      this.attachScrollListener();
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      this.detachScrollListener();
      this.detachMousewheelListener();
    }
  }, {
    key: 'isPassiveSupported',
    value: function isPassiveSupported() {
      var passive = false;

      var testOptions = {
        get passive() {
          passive = true;
        }
      };

      try {
        document.addEventListener('test', null, testOptions);
        document.removeEventListener('test', null, testOptions);
      } catch (e) {
        // ignore
      }
      return passive;
    }
  }, {
    key: 'eventListenerOptions',
    value: function eventListenerOptions() {
      var options = this.props.useCapture;

      if (this.isPassiveSupported()) {
        options = {
          useCapture: this.props.useCapture,
          passive: true
        };
      }
      return options;
    }

    // Set a defaut loader for all your `InfiniteScroll` components

  }, {
    key: 'setDefaultLoader',
    value: function setDefaultLoader(loader) {
      this.defaultLoader = loader;
    }
  }, {
    key: 'detachMousewheelListener',
    value: function detachMousewheelListener() {
      var scrollEl = window;
      if (this.props.useWindow === false) {
        scrollEl = this.scrollComponent.parentNode;
      }

      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);
    }
  }, {
    key: 'detachScrollListener',
    value: function detachScrollListener() {
      var scrollEl = window;
      if (this.props.useWindow === false) {
        scrollEl = this.getParentElement(this.scrollComponent);
      }

      scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);
      scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);
    }
  }, {
    key: 'getParentElement',
    value: function getParentElement(el) {
      var scrollParent = this.props.getScrollParent && this.props.getScrollParent();
      if (scrollParent != null) {
        return scrollParent;
      }
      return el && el.parentNode;
    }
  }, {
    key: 'filterProps',
    value: function filterProps(props) {
      return props;
    }
  }, {
    key: 'attachScrollListener',
    value: function attachScrollListener() {
      var parentElement = this.getParentElement(this.scrollComponent);

      if (!this.props.hasMore || !parentElement) {
        return;
      }

      var scrollEl = window;
      if (this.props.useWindow === false) {
        scrollEl = parentElement;
      }

      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);
      scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);
      scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);

      if (this.props.initialLoad) {
        this.scrollListener();
      }
    }
  }, {
    key: 'mousewheelListener',
    value: function mousewheelListener(e) {
      // Prevents Chrome hangups
      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257
      if (e.deltaY === 1 && !this.isPassiveSupported()) {
        e.preventDefault();
      }
    }
  }, {
    key: 'scrollListener',
    value: function scrollListener() {
      var el = this.scrollComponent;
      var scrollEl = window;
      var parentNode = this.getParentElement(el);

      var offset = void 0;
      if (this.props.useWindow) {
        var doc = document.documentElement || document.body.parentNode || document.body;
        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;
        if (this.props.isReverse) {
          offset = scrollTop;
        } else {
          offset = this.calculateOffset(el, scrollTop);
        }
      } else if (this.props.isReverse) {
        offset = parentNode.scrollTop;
      } else {
        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;
      }

      // Here we make sure the element is visible as well as checking the offset
      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {
        this.detachScrollListener();
        this.beforeScrollHeight = parentNode.scrollHeight;
        this.beforeScrollTop = parentNode.scrollTop;
        // Call loadMore after detachScrollListener to allow for non-async loadMore functions
        if (typeof this.props.loadMore === 'function') {
          this.props.loadMore(this.pageLoaded += 1);
          this.loadMore = true;
        }
      }
    }
  }, {
    key: 'calculateOffset',
    value: function calculateOffset(el, scrollTop) {
      if (!el) {
        return 0;
      }

      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);
    }
  }, {
    key: 'calculateTopPosition',
    value: function calculateTopPosition(el) {
      if (!el) {
        return 0;
      }
      return el.offsetTop + this.calculateTopPosition(el.offsetParent);
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var renderProps = this.filterProps(this.props);

      var children = renderProps.children,
          element = renderProps.element,
          hasMore = renderProps.hasMore,
          initialLoad = renderProps.initialLoad,
          isReverse = renderProps.isReverse,
          loader = renderProps.loader,
          loadMore = renderProps.loadMore,
          pageStart = renderProps.pageStart,
          ref = renderProps.ref,
          threshold = renderProps.threshold,
          useCapture = renderProps.useCapture,
          useWindow = renderProps.useWindow,
          getScrollParent = renderProps.getScrollParent,
          props = _objectWithoutProperties(renderProps, ['children', 'element', 'hasMore', 'initialLoad', 'isReverse', 'loader', 'loadMore', 'pageStart', 'ref', 'threshold', 'useCapture', 'useWindow', 'getScrollParent']);

      props.ref = function (node) {
        _this2.scrollComponent = node;
        if (ref) {
          ref(node);
        }
      };

      var childrenArray = [children];
      if (hasMore) {
        if (loader) {
          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);
        } else if (this.defaultLoader) {
          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);
        }
      }
      return _react2.default.createElement(element, props, childrenArray);
    }
  }]);

  return InfiniteScroll;
}(_react.Component);

InfiniteScroll.propTypes = {
  children: _propTypes2.default.node.isRequired,
  element: _propTypes2.default.node,
  hasMore: _propTypes2.default.bool,
  initialLoad: _propTypes2.default.bool,
  isReverse: _propTypes2.default.bool,
  loader: _propTypes2.default.node,
  loadMore: _propTypes2.default.func.isRequired,
  pageStart: _propTypes2.default.number,
  ref: _propTypes2.default.func,
  getScrollParent: _propTypes2.default.func,
  threshold: _propTypes2.default.number,
  useCapture: _propTypes2.default.bool,
  useWindow: _propTypes2.default.bool
};
InfiniteScroll.defaultProps = {
  element: 'div',
  hasMore: false,
  initialLoad: true,
  pageStart: 0,
  ref: null,
  threshold: 250,
  useWindow: true,
  isReverse: false,
  useCapture: false,
  loader: null,
  getScrollParent: null
};
exports.default = InfiniteScroll;
module.exports = exports['default'];


/***/ }),

/***/ 1529:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(1528)


/***/ }),

/***/ 1530:
/***/ (function(module, exports, __webpack_require__) {

module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e){t.exports=__webpack_require__(0)},function(t,e){t.exports=__webpack_require__(20)},function(t,e,n){var o=n(14);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(i).concat([r]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),c=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),s=null,l=0,u=[],f=n(13);function p(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(g(o.parts[a],e))}else{var c=[];for(a=0;a<o.parts.length;a++)c.push(g(o.parts[a],e));i[o.id]={id:o.id,refs:1,parts:c}}}}function m(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],a=e.base?i[0]+e.base:i[0],c={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(c):n.push(o[a]={id:a,parts:[c]})}return n}function b(t,e){var n=c(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=c(t.insertAt.before,n);n.insertBefore(e,r)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function d(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var o=function(){0;return n.nc}();o&&(t.attrs.nonce=o)}return h(e,t.attrs),b(t,e),e}function h(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,o,r,i;if(e.transform&&t.css){if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var a=l++;n=s||(s=d(e)),o=v.bind(null,n,a,!1),r=v.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",h(e,t.attrs),b(t,e),e}(e),o=function(t,e,n){var o=n.css,r=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||i)&&(o=f(o));r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),c=t.href;t.href=URL.createObjectURL(a),c&&URL.revokeObjectURL(c)}.bind(null,n,e),r=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){y(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=m(t,e);return p(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var a=n[r];(c=i[a.id]).refs--,o.push(c)}t&&p(m(t,e),e);for(r=0;r<o.length;r++){var c;if(0===(c=o[r]).refs){for(var s=0;s<c.parts.length;s++)c.parts[s]();delete i[c.id]}}}};var w,_=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function v(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e,n){var o=n(16);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e){t.exports=__webpack_require__(80)},function(t,e){t.exports=__webpack_require__(29)},function(t,e){t.exports=__webpack_require__(1527)},function(t,e,n){var o=n(15);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){var o=n(12);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){var o=n(17);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){(e=t.exports=n(3)(!1)).push([t.i,".wrapperLayer__3hggD {\n  position: fixed;\n  margin: 0;\n  padding: 0;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 999;\n}\n",""]),e.locals={wrapperLayer:"wrapperLayer__3hggD"}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,n){(e=t.exports=n(3)(!1)).push([t.i,"/* 与 anim.js 同步 */\n.baseButton__1l-8C {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.baseButton__1l-8C > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL {\n  box-sizing: border-box;\n  position: absolute;\n  top: 0.6rem;\n  right: 0.6rem;\n  opacity: 0;\n  display: flex;\n  z-index: 1000;\n  border-radius: 5rem;\n  -webkit-transform: translateX(100%);\n          transform: translateX(100%);\n  transition: opacity 350ms, -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms;\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms, -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL.show__3wuNU {\n  opacity: 0.8;\n  -webkit-transform: translateX(0);\n          transform: translateX(0);\n}\n.controls__3sQmL .pinButton__3L7CE {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .pinButton__3L7CE > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .pinButton__3L7CE:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .pinButton__3L7CE:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .pinButton__3L7CE:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .pinButton__3L7CE:last-of-type {\n  margin-right: 0.4rem;\n}\n.controls__3sQmL .rotate__3dU4j {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .rotate__3dU4j > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .rotate__3dU4j:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .rotate__3dU4j:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .rotate__3dU4j:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .rotate__3dU4j:last-of-type {\n  margin-right: 0.4rem;\n}\n.controls__3sQmL .rotate__3dU4j svg {\n  width: 1.75rem;\n  transition: -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .rotateLeft__jf-FB {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .rotateLeft__jf-FB > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .rotateLeft__jf-FB:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .rotateLeft__jf-FB:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .rotateLeft__jf-FB:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .rotateLeft__jf-FB:last-of-type {\n  margin-right: 0.4rem;\n}\n.controls__3sQmL .rotateLeft__jf-FB svg {\n  width: 1.75rem;\n  transition: -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .rotateLeft__jf-FB:hover svg {\n  -webkit-transform: rotate(-30deg);\n          transform: rotate(-30deg);\n}\n.controls__3sQmL .rotateRight__2DM1Q {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .rotateRight__2DM1Q > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .rotateRight__2DM1Q:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .rotateRight__2DM1Q:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .rotateRight__2DM1Q:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .rotateRight__2DM1Q:last-of-type {\n  margin-right: 0.4rem;\n}\n.controls__3sQmL .rotateRight__2DM1Q svg {\n  width: 1.75rem;\n  transition: -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .rotateRight__2DM1Q:hover svg {\n  -webkit-transform: rotate(30deg);\n          transform: rotate(30deg);\n}\n.controls__3sQmL .download__JLwN1 {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .download__JLwN1 > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .download__JLwN1:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .download__JLwN1:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .download__JLwN1:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .download__JLwN1:last-of-type {\n  margin-right: 0.4rem;\n}\n.controls__3sQmL .download__JLwN1 svg {\n  margin-top: -0.06rem;\n  width: 1.75rem;\n}\n.controls__3sQmL .zoom__HH1gO {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .zoom__HH1gO > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .zoom__HH1gO:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .zoom__HH1gO:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .zoom__HH1gO:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .zoom__HH1gO:last-of-type {\n  margin-right: 0.4rem;\n}\n.controls__3sQmL .close__1Yy0b {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  margin: 0.4em 0;\n  width: 2rem;\n  height: 2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.controls__3sQmL .close__1Yy0b > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.controls__3sQmL .close__1Yy0b:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.controls__3sQmL .close__1Yy0b:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n.controls__3sQmL .close__1Yy0b:first-of-type {\n  margin-left: 0.4rem;\n}\n.controls__3sQmL .close__1Yy0b:last-of-type {\n  margin-right: 0.4rem;\n}\n.sideButton__3kbDa {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  opacity: 0;\n  position: absolute;\n  top: 50%;\n  padding: 0.4rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.sideButton__3kbDa > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.sideButton__3kbDa:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: translateX(0) translateY(-50%) !important;\n          transform: translateX(0) translateY(-50%) !important;\n}\n.sideButton__3kbDa:active {\n  opacity: 1 !important;\n}\n.sideButton__3kbDa.show__3wuNU {\n  opacity: 0.8;\n}\n.flipLeft__2HlVL {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  opacity: 0;\n  position: absolute;\n  top: 50%;\n  padding: 0.4rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  left: 0;\n  padding-left: 0.6rem;\n  border-radius: 0 0.5em 0.5em 0;\n  -webkit-transform: translateX(-100%) translateY(-50%);\n          transform: translateX(-100%) translateY(-50%);\n}\n.flipLeft__2HlVL > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.flipLeft__2HlVL:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: translateX(0) translateY(-50%) !important;\n          transform: translateX(0) translateY(-50%) !important;\n}\n.flipLeft__2HlVL:active {\n  opacity: 1 !important;\n}\n.flipLeft__2HlVL.show__3wuNU {\n  opacity: 0.8;\n}\n.flipLeft__2HlVL:active {\n  -webkit-transform: translate(-0.2em) translateY(-50%) !important;\n          transform: translate(-0.2em) translateY(-50%) !important;\n}\n.flipLeft__2HlVL.show__3wuNU {\n  opacity: 0.8;\n  -webkit-transform: translate(-0.2em) translateY(-50%);\n          transform: translate(-0.2em) translateY(-50%);\n}\n.flipRight__3GreD {\n  z-index: 1000;\n  box-sizing: border-box;\n  cursor: pointer;\n  opacity: 0;\n  position: absolute;\n  top: 50%;\n  padding: 0.4rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 175ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 175ms cubic-bezier(0.6, 0, 0.1, 1);\n  right: 0;\n  padding-right: 0.6rem;\n  border-radius: 0.5rem 0 0 0.5rem;\n  -webkit-transform: translateX(100%) translateY(-50%);\n          transform: translateX(100%) translateY(-50%);\n}\n.flipRight__3GreD > svg {\n  display: block;\n  width: 2rem;\n  height: 2rem;\n}\n.flipRight__3GreD:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: translateX(0) translateY(-50%) !important;\n          transform: translateX(0) translateY(-50%) !important;\n}\n.flipRight__3GreD:active {\n  opacity: 1 !important;\n}\n.flipRight__3GreD.show__3wuNU {\n  opacity: 0.8;\n}\n.flipRight__3GreD:active {\n  -webkit-transform: translate(0.2em) translateY(-50%) !important;\n          transform: translate(0.2em) translateY(-50%) !important;\n}\n.flipRight__3GreD.show__3wuNU {\n  opacity: 0.8;\n  -webkit-transform: translate(0.2em) translateY(-50%);\n          transform: translate(0.2em) translateY(-50%);\n}\n.pages__3_44_ {\n  box-sizing: border-box;\n  display: flex;\n  position: absolute;\n  left: 50%;\n  bottom: 0.6rem;\n  z-index: 110;\n  opacity: 0;\n  border-radius: 2rem;\n  -webkit-transform: translate(-50%, 100px);\n          transform: translate(-50%, 100px);\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.pages__3_44_.show__3wuNU {\n  opacity: 0.8;\n  -webkit-transform: translate(-50%, 0);\n          transform: translate(-50%, 0);\n}\n.pages__3_44_ .dot__gnENp {\n  cursor: pointer;\n  margin: 0.45rem 0.25rem;\n  display: block;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 1.2rem;\n  background: black;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.pages__3_44_ .dot__gnENp:first-of-type {\n  margin-left: 0.6rem;\n}\n.pages__3_44_ .dot__gnENp:last-of-type {\n  margin-right: 0.6rem;\n}\n.pages__3_44_ .blackDot__1Nm3_ {\n  cursor: pointer;\n  margin: 0.45rem 0.25rem;\n  display: block;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 1.2rem;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  cursor: initial;\n  width: 1rem;\n  background: black;\n}\n.pages__3_44_ .blackDot__1Nm3_:first-of-type {\n  margin-left: 0.6rem;\n}\n.pages__3_44_ .blackDot__1Nm3_:last-of-type {\n  margin-right: 0.6rem;\n}\n.pages__3_44_ .whiteDot__3MHk8 {\n  cursor: pointer;\n  margin: 0.45rem 0.25rem;\n  display: block;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 1.2rem;\n  background: black;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), width 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  background: #999;\n}\n.pages__3_44_ .whiteDot__3MHk8:first-of-type {\n  margin-left: 0.6rem;\n}\n.pages__3_44_ .whiteDot__3MHk8:last-of-type {\n  margin-right: 0.6rem;\n}\n.pages__3_44_ .whiteDot__3MHk8:hover {\n  opacity: 0.8 !important;\n  -webkit-transform: scale(1.1) !important;\n          transform: scale(1.1) !important;\n}\n.pages__3_44_ .whiteDot__3MHk8:active {\n  opacity: 1 !important;\n  -webkit-transform: scale(1) !important;\n          transform: scale(1) !important;\n}\n",""]),e.locals={baseButton:"baseButton__1l-8C",controls:"controls__3sQmL",show:"show__3wuNU",pinButton:"pinButton__3L7CE",rotate:"rotate__3dU4j",rotateLeft:"rotateLeft__jf-FB",rotateRight:"rotateRight__2DM1Q",download:"download__JLwN1",zoom:"zoom__HH1gO",close:"close__1Yy0b",sideButton:"sideButton__3kbDa",flipLeft:"flipLeft__2HlVL",flipRight:"flipRight__3GreD",pages:"pages__3_44_",dot:"dot__gnENp",blackDot:"blackDot__1Nm3_",whiteDot:"whiteDot__3MHk8"}},function(t,e,n){(e=t.exports=n(3)(!1)).push([t.i,"/* 与 anim.js 同步 */\n.imageLayer__33OvN {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  transition: opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-clip-path 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), clip-path 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), opacity 350ms cubic-bezier(0.6, 0, 0.1, 1), clip-path 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-clip-path 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  will-change: transform, top, opacity, clip-path;\n}\n.imageLayer__33OvN.zooming__8A3Sl {\n  transition-timing-function: cubic-bezier(0, 0.1, 0.1, 1);\n  -ms-transition-duration: 0ms;\n}\n.imageLayer__33OvN.invalidate__GRvMe {\n  opacity: 0 !important;\n  pointer-events: none;\n}\n",""]),e.locals={imageLayer:"imageLayer__33OvN",zooming:"zooming__8A3Sl",invalidate:"invalidate__GRvMe"}},function(t,e,n){(e=t.exports=n(3)(!1)).push([t.i,"/* 与 anim.js 同步 */\n.loadingContainer__nzXM4 {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  opacity: 0;\n  transition: opacity cubic-bezier(0.6, 0, 0.1, 1) 175ms;\n}\n.loadingContainer__nzXM4.show__1BtTD {\n  opacity: 1;\n}\n.loadingContainer__nzXM4 .reload__2nJBf {\n  border: 2px solid;\n  border-radius: 5px;\n  font-size: 1rem;\n  padding: 0.5rem;\n  cursor: pointer;\n  outline: none;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.loadingContainer__nzXM4 .reload__2nJBf:hover {\n  opacity: 0.8;\n}\n.loadingContainer__nzXM4 .reload__2nJBf:hover svg {\n  -webkit-transform: rotate(30deg);\n          transform: rotate(30deg);\n}\n.loadingContainer__nzXM4 .reload__2nJBf:active {\n  opacity: 1;\n}\n.loadingContainer__nzXM4 .reload__2nJBf svg {\n  display: block;\n  transition: -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n  transition: transform 350ms cubic-bezier(0.6, 0, 0.1, 1), -webkit-transform 350ms cubic-bezier(0.6, 0, 0.1, 1);\n}\n.loadingContainer__nzXM4 .loading__2iAZJ {\n  width: 24px;\n  height: 24px;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-animation: spin__1tumn 1s linear infinite;\n          animation: spin__1tumn 1s linear infinite;\n}\n@-webkit-keyframes fadeIn__1iF9b {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes fadeIn__1iF9b {\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@-webkit-keyframes fadeOut__11bTR {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes fadeOut__11bTR {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@-webkit-keyframes spin__1tumn {\n  0% {\n    -webkit-transform: translate(-50%, -50%) rotate(0deg);\n            transform: translate(-50%, -50%) rotate(0deg);\n  }\n  100% {\n    -webkit-transform: translate(-50%, -50%) rotate(360deg);\n            transform: translate(-50%, -50%) rotate(360deg);\n  }\n}\n@keyframes spin__1tumn {\n  0% {\n    -webkit-transform: translate(-50%, -50%) rotate(0deg);\n            transform: translate(-50%, -50%) rotate(0deg);\n  }\n  100% {\n    -webkit-transform: translate(-50%, -50%) rotate(360deg);\n            transform: translate(-50%, -50%) rotate(360deg);\n  }\n}\n",""]),e.locals={loadingContainer:"loadingContainer__nzXM4",show:"show__1BtTD",reload:"reload__2nJBf",loading:"loading__2iAZJ",spin:"spin__1tumn",fadeIn:"fadeIn__1iF9b",fadeOut:"fadeOut__11bTR"}},function(t,e,n){(e=t.exports=n(3)(!1)).push([t.i,"/* 与 anim.js 同步 */\n.backgroundLayer__3kiCJ {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  cursor: zoom-out;\n  background-color: #ffffff;\n  transition: opacity 0.2s;\n  will-change: opacity;\n  -webkit-tap-highlight-color: transparent;\n}\n",""]),e.locals={backgroundLayer:"backgroundLayer__3kiCJ"}},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n.n(o),i=n(6),a=n.n(i),c=n(10),s=n.n(c),l=n(1),u=n.n(l),f=function(t){if(window){if(!window.hasOwnProperty("__ZMAGE_INITIALIZED___")){var e=(n=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)));window.__ZMAGE_INITIALIZED___=!0,window.__ZMAGE_ENV_IS_DESKTOP___=!e,window.__ZMAGE_ENV_IS_MOBILE___=e}return window[t]}var n},p={get isDesktop(){return f("__ZMAGE_ENV_IS_DESKTOP___")||!0},get isMobile(){return f("__ZMAGE_ENV_IS_MOBILE___")||!1}};function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){b(t,e,n[e])})}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={src:u.a.oneOfType([u.a.string,u.a.func]),alt:u.a.string,txt:u.a.string,set:u.a.oneOfType([u.a.arrayOf(u.a.shape({src:u.a.string,alt:u.a.string,text:u.a.string})),u.a.shape({src:u.a.string,alt:u.a.string,text:u.a.string})]),defaultPage:u.a.number,preset:u.a.oneOf(["auto","desktop","mobile"]),controller:u.a.oneOfType([u.a.bool,u.a.shape({pagination:u.a.bool,rotate:u.a.bool,zoom:u.a.bool,close:u.a.bool,flip:u.a.bool})]),hotKey:u.a.oneOfType([u.a.bool,u.a.shape({close:u.a.bool,zoom:u.a.bool,flip:u.a.bool})]),animate:u.a.shape({browsing:u.a.bool,flip:u.a.oneOf(["fade","crossFade","swipe","zoom"])}),backdrop:u.a.string,zIndex:u.a.number,radius:u.a.number,edge:u.a.number,loop:u.a.bool,onBrowsing:u.a.func,onZooming:u.a.func,onSwitching:u.a.func,onRotating:u.a.func,browsing:u.a.bool},d={desktop:{controller:{pagination:!0,rotate:!0,zoom:!0,download:!1,close:!0,flip:!0},hotKey:{close:!0,zoom:!0,flip:!0},animate:{browsing:!0,flip:"fade"}},mobile:{controller:{pagination:!0,rotate:!1,zoom:!1,download:!1,close:!0,flip:!1},hotKey:{close:!1,zoom:!1,flip:!1},animate:{browsing:!0,flip:"fade"}}},h={src:"",alt:"",txt:"",set:[],defaultPage:0,preset:"auto",controller:{},hotKey:{},animate:{},backdrop:"#FFFFFF",zIndex:1e3,radius:0,edge:0,loop:!0,onBrowsing:function(){},onZooming:function(){},onSwitching:function(){},onRotating:function(){}},g="__ZMAGE_DEF_PROP__",w=function(t){if(window){if(window.hasOwnProperty(g)||(window[g]={}),!window[g].hasOwnProperty(t))switch(t){case"desktop":window[g][t]=m({},h,d.desktop);break;case"mobile":window[g][t]=m({},h,d.mobile);break;case"auto":window[g][t]=m({},h,p.isDesktop&&d.desktop,p.isMobile&&d.mobile);break;default:window[g][t]=m({},h,d.desktop)}return window[g][t]}return{}};function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function O(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=O(this,z(e).call(this,t))).target=t.target||document.body,n.container=document.createElement("figure"),n.container.id=t.id,n.container.className=t.className,n.container.style.zIndex=t.zIndex,n.target.appendChild(n.container),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"componentWillUnmount",value:function(){this.target.removeChild(this.container)}},{key:"render",value:function(){var t=this.props.children;return a.a.createPortal(t,this.container)}}])&&v(n.prototype,o),i&&v(n,i),e}();S.defaultProps={zIndex:h.zIndex},S.propTypes={id:u.a.string,className:u.a.string,zIndex:y.zIndex};var j=n(2),x=n.n(j);function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function L(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,C(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M14.71 15.88L10.83 12l3.88-3.88c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .38-.39.39-1.03 0-1.42z"}))}}])&&P(n.prototype,o),i&&P(n,i),e}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,N(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M9.29 15.88L13.17 12 9.29 8.12c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0l4.59 4.59c.39.39.39 1.02 0 1.41L10.7 17.3c-.39.39-1.02.39-1.41 0-.38-.39-.39-1.03 0-1.42z"}))}}])&&M(n.prototype,o),i&&M(n,i),e}();function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function U(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,F(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}))}}])&&H(n.prototype,o),i&&H(n,i),e}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var W=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,J(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M19 13v5c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-5c0-.55-.45-1-1-1s-1 .45-1 1v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6c0-.55-.45-1-1-1s-1 .45-1 1zm-6-.33l1.88-1.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-3.59 3.59c-.39.39-1.02.39-1.41 0L7.7 12.2c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L11 12.67V4c0-.55.45-1 1-1s1 .45 1 1v8.67z"}))}}])&&X(n.prototype,o),i&&X(n,i),e}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tt(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ot=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tt(this,et(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 200 200",preserveAspectRatio:"xMinYMin meet"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"spinner-1552570621916",x1:"0%",y1:"0%",x2:"65%",y2:"0%"},r.a.createElement("stop",{offset:"0%",className:"Spinner-blue-3_W"}),r.a.createElement("stop",{offset:"100%",stopOpacity:"0"}))),r.a.createElement("circle",{cx:"100",cy:"100",r:"90",fill:"transparent",stroke:"url(#spinner-1552570621916)",strokeWidth:"20"}))}}])&&$(n.prototype,o),i&&$(n,i),e}();function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function at(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),at(this,ct(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M12 6v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V4c-4.42 0-8 3.58-8 8 0 1.04.2 2.04.57 2.95.27.67 1.13.85 1.64.34.27-.27.38-.68.23-1.04C6.15 13.56 6 12.79 6 12c0-3.31 2.69-6 6-6zm5.79 2.71c-.27.27-.38.69-.23 1.04.28.7.44 1.46.44 2.25 0 3.31-2.69 6-6 6v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.35V20c4.42 0 8-3.58 8-8 0-1.04-.2-2.04-.57-2.95-.27-.67-1.13-.85-1.64-.34z"}))}}])&&it(n.prototype,o),i&&it(n,i),e}();function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function pt(t,e){return!e||"object"!==ut(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pt(this,mt(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M6.56 7.98C6.1 7.52 5.31 7.6 5 8.17c-.28.51-.5 1.03-.67 1.58-.19.63.31 1.25.96 1.25h.01c.43 0 .82-.28.94-.7.12-.4.28-.79.48-1.17.22-.37.15-.84-.16-1.15zM5.31 13h-.02c-.65 0-1.15.62-.96 1.25.16.54.38 1.07.66 1.58.31.57 1.11.66 1.57.2.3-.31.38-.77.17-1.15-.2-.37-.36-.76-.48-1.16-.12-.44-.51-.72-.94-.72zm2.85 6.02c.51.28 1.04.5 1.59.66.62.18 1.24-.32 1.24-.96v-.03c0-.43-.28-.82-.7-.94-.4-.12-.78-.28-1.15-.48-.38-.21-.86-.14-1.16.17l-.03.03c-.45.45-.36 1.24.21 1.55zM13 4.07v-.66c0-.89-1.08-1.34-1.71-.71L9.17 4.83c-.4.4-.4 1.04 0 1.43l2.13 2.08c.63.62 1.7.17 1.7-.72V6.09c2.84.48 5 2.94 5 5.91 0 2.73-1.82 5.02-4.32 5.75-.41.12-.68.51-.68.94v.02c0 .65.61 1.14 1.23.96C17.57 18.71 20 15.64 20 12c0-4.08-3.05-7.44-7-7.93z"}))}}])&&ft(n.prototype,o),i&&ft(n,i),e}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gt(t,e){return!e||"object"!==dt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gt(this,wt(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M14.83 4.83L12.7 2.7c-.62-.62-1.7-.18-1.7.71v.66C7.06 4.56 4 7.92 4 12c0 3.64 2.43 6.71 5.77 7.68.62.18 1.23-.32 1.23-.96v-.03c0-.43-.27-.82-.68-.94C7.82 17.03 6 14.73 6 12c0-2.97 2.16-5.43 5-5.91v1.53c0 .89 1.07 1.33 1.7.71l2.13-2.08c.4-.38.4-1.02 0-1.42zm4.84 4.93c-.16-.55-.38-1.08-.66-1.59-.31-.57-1.1-.66-1.56-.2l-.01.01c-.31.31-.38.78-.17 1.16.2.37.36.76.48 1.16.12.42.51.7.94.7h.02c.65 0 1.15-.62.96-1.24zM13 18.68v.02c0 .65.62 1.14 1.24.96.55-.16 1.08-.38 1.59-.66.57-.31.66-1.1.2-1.56l-.02-.02c-.31-.31-.78-.38-1.16-.17-.37.21-.76.37-1.16.49-.41.12-.69.51-.69.94zm4.44-2.65c.46.46 1.25.37 1.56-.2.28-.51.5-1.04.67-1.59.18-.62-.31-1.24-.96-1.24h-.02c-.44 0-.82.28-.94.7-.12.4-.28.79-.48 1.17-.21.38-.13.86.17 1.16z"}))}}])&&ht(n.prototype,o),i&&ht(n,i),e}();function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function kt(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kt(this,St(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.a.createElement("path",{d:"M6 14c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1H7v-2c0-.55-.45-1-1-1zm0-4c.55 0 1-.45 1-1V7h2c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1zm11 7h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1s-1 .45-1 1v2zM14 6c0 .55.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1z"}))}}])&&zt(n.prototype,o),i&&zt(n,i),e}(),Et=Object(o.createContext)(),Pt=n(8),Lt=n.n(Pt);function Ct(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){It(t,e,n[e])})}return t}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e+2*n,r=t+2*n>Bt()?Bt()/(t+2*n):1,i=o>Dt()?Dt()/(e+2*n):1;return Math.min(r,i)+.002},Mt=function(){return document.body.scrollWidth},Bt=function(){return document.documentElement.clientWidth},Nt=function(){return window.innerHeight},Dt=function(){return document.documentElement.clientHeight},Qt={html:{},body:{}},At=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"show";return e?"".concat(t," ").concat(n):t},Ht=function(t,e){var n;return n=setInterval(function(){t&&!t.complete||(clearInterval(n),e&&e())},500)},Ut=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(e).reduce(function(t,n){return e[n]?t.concat("".concat(n,"=").concat(e[n])):t},[]).join("&");return n?"".concat(t).concat(t.includes("?")?"&":"?").concat(n):t},Ft=Lt()(function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ref,n=void 0===e?100:e;return t?t.includes("%")?n*Number(t.substring(0,t.length-1))/100:Number(t.substring(0,t.length-2)):t}),Zt=Lt()(function(t){var e=["Webkit","Moz","Ms","O"];return Object.keys(t).reduce(function(n,o){var r=e.reduce(function(e,n){return Rt({},e,It({},"".concat(n).concat((r=o).charAt(0).toUpperCase()+r.slice(1)),t[o]));var r},{});return Rt({},n,r)},t)}),Yt=function(t){return(0^t)===t},Vt=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{loop:!0};return 0===e?0:0===n?t:t<0||t>e-1?void console.warn("Current index overflow !"):o.loop?Math.abs(e+n+t)%e:t+n<0||t+n>e-1?void 0:t+n},Xt=Lt()(function(t){return[].concat(Ct(Ct(Array(t).keys()).map(function(t){return-t-1}).reverse()),Ct(Array(t+1).keys()))});function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(t){function e(){var t,n,o,r,i,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return o=this,r=(t=Kt(e)).call.apply(t,[this].concat(l)),n=!r||"object"!==Gt(r)&&"function"!=typeof r?Wt(o):r,i=Wt(n),c=function(t){var e=n.props,o=e.show,r=e.zoom;return At(t,!r&&o,x.a.show)},(a="withShow")in i?Object.defineProperty(i,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[a]=c,n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(e,r.a.PureComponent),n=e,(i=[{key:"render",value:function(){var t=this,e=this.context,n=e.set,i=(e.preset,e.presetIsMobile),a=(e.presetIsDesktop,e.controller),c=e.backdrop,s=e.loop,l=e.zoom,u=e.page,f=e.outBrowsing,p=e.toPage,m=e.toPrevPage,b=e.toNextPage,y=e.toggleZoom,d=e.toggleRotate;return r.a.createElement(o.Fragment,null,r.a.createElement("div",{id:"zmageControl",className:this.withShow(x.a.controls),style:{backgroundColor:c}},a.rotate&&r.a.createElement("div",{id:"zmageControlRotateLeft",className:this.withShow(x.a.rotateLeft),onClick:d("left")},r.a.createElement(yt,null)),a.rotate&&r.a.createElement("div",{id:"zmageControlRotateRight",className:this.withShow(x.a.rotateRight),onClick:d("right")},r.a.createElement(vt,null)),a.download&&r.a.createElement("div",{id:"zmageControlDownload",className:this.withShow(x.a.download),onClick:function(){return e=t.context.set[t.context.page].src,(o=document.createElement("a")).href=e,o.download=n||e.split("/")[e.split("/").length-1],document.body.appendChild(o),o.click(),void document.body.removeChild(o);var e,n,o}},r.a.createElement(W,null)),a.zoom&&r.a.createElement("div",{id:"zmageControlZoom",className:this.withShow(x.a.zoom),onClick:i?function(){return window.open(n[u].src)}:y},r.a.createElement(xt,null)),a.close&&r.a.createElement("div",{id:"zmageControlClose",className:this.withShow(x.a.close),onClick:l?y:f},r.a.createElement(Y,null))),Array.isArray(n)&&n.length>1&&a.flip&&r.a.createElement(o.Fragment,null,(s||0!==u)&&r.a.createElement("div",{id:"zmageControlFlipLeft",className:this.withShow(x.a.flipLeft),style:{backgroundColor:c},onClick:m},r.a.createElement(I,null)),(s||u!==n.length-1)&&r.a.createElement("div",{id:"zmageControlFlipRight",className:this.withShow(x.a.flipRight),style:{backgroundColor:c},onClick:b},r.a.createElement(Q,null))),Array.isArray(n)&&n.length>1&&a.pagination&&r.a.createElement("div",{id:"zmageControlPagination",className:this.withShow(x.a.pages),style:{backgroundColor:c}},n.map(function(t,e){return e===u?r.a.createElement("span",{key:e,id:"zmageControlPaginationActive",className:x.a.blackDot}):r.a.createElement("span",{key:e,className:x.a.whiteDot,onClick:function(){return p(e)}})})))}}])&&Jt(n.prototype,i),a&&Jt(n,a),e}();$t.contextType=Et;var te=n(7),ee=n.n(te),ne=n(9),oe=n.n(ne),re=n(5),ie=n.n(re);function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function se(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),se(this,le(e).apply(this,arguments))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(e,r.a.PureComponent),n=e,(i=[{key:"render",value:function(){var t,e,n,i=this.props,a=i.show,c=i.load,s=i.invalidate,l=i.onReload,u=i.backdrop,f=ee()(ie.a.loadingContainer,(t={},e=ie.a.show,n=a,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t));return r.a.createElement(o.Fragment,null,(c||s)&&r.a.createElement("div",{id:"zmageLoading",className:f},c&&r.a.createElement("div",{className:ie.a.loading},r.a.createElement(ot,null)),s&&r.a.createElement("button",{className:ie.a.reload,onClick:l,style:{background:u}},r.a.createElement(lt,null))))}}])&&ce(n.prototype,i),a&&ce(n,a),e}();fe.contextType=Et;var pe=function(t,e,n){var o=t.show,r=e.zoom;return o?r?ye(t,e,n):be(t,e,n):me(t,e)},me=function(t,e){var n=e.coverRef,o=e.rotate,r=e.pageIsCover;if(n.current){var i=n.current.naturalWidth,a=n.current.getBoundingClientRect(),c=a.top,s=a.left,l=a.width,u=a.height,f=window.getComputedStyle(n.current),p=f.opacity,m=f.borderRadius;return r?{_type:"cover",x:-Mt()/2+s+l/2,y:-Nt()/2+c+u/2,opacity:Number(p)||1,scale:i?l/i:1,rotate:o-o%360,radius:Ft(m,{ref:l})}:{_type:"cover",x:0,y:-Nt(),opacity:0,scale:i?l/i:1,rotate:o-o%360,radius:Ft(m,{ref:l})}}return{_type:"cover",x:0,y:0,opacity:0,scale:0,rotate:0,radius:0}},be=function(t,e,n){var o=e.radius,r=e.edge,i=e.rotate,a=n.current,c=a.naturalWidth,s=a.naturalHeight;return{_type:"browsing",x:0,y:0,opacity:1,scale:Tt(c,s,r),rotate:i,radius:o}},ye=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.clientX,i=void 0===r?Mt()/2:r,a=o.clientY,c=void 0===a?Nt()/2:a,s=e.radius,l=e.edge,u=e.rotate,f=n.current,p=f.naturalWidth,m=f.naturalHeight,b=l||50,y=Mt(),d=Nt();return{_type:"zooming",x:p>y?(p-y)/2+b-(p-y+2*b)*(i/y):0,y:m>d?(m-d)/2+b-(m-d+2*b)*(c/d):0,opacity:1,scale:1,rotate:u,radius:s}};function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(){return(he=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){ze(t,e,n[e])})}return t}function we(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ke=function(t){function e(t,n){var o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,a=_e(e).call(this,t),o=!a||"object"!==de(a)&&"function"!=typeof a?ve(i):a,ze(ve(o),"updateZoomEventListenerWithState",function(){var t=o.context,e=t.show,n=t.zoom;e&&n&&!o.listeningMouseMove?(window.addEventListener("mousemove",o.handleMouseMove),o.listeningMouseMove=!0):(window.removeEventListener("mousemove",o.handleMouseMove),o.listeningMouseMove=!1)}),ze(ve(o),"updateCurrentImageStyle",function(){var t=pe(o.props,o.context,o.imageRef);o.setStyle(t)}),ze(ve(o),"handleResize",function(){o.updateCurrentImageStyle()}),ze(ve(o),"handleScroll",function(){if(o.imageRef.current){var t=o.context.show;o.imageRef.current.style.top="calc(50% + ".concat(t?0:o.initialPageOffset-window.pageYOffset,"px)")}}),ze(ve(o),"handleClick",function(){var t=o.context,e=t.zoom,n=t.toggleZoom;e&&n()}),ze(ve(o),"handleMouseMove",function(t){var e=ye(o.props,o.context,o.imageRef,t);o.setStyle(e)}),ze(ve(o),"handleImageLoadStart",function(){o.setState({isFetching:!0,invalidate:!1},o.handleDetectImageLoadComplete)}),ze(ve(o),"handleDetectImageLoadComplete",function(){clearInterval(o.imageLoadingTimer),o.imageLoadingTimer=Ht(o.imageRef.current,o.handleImageLoadEnd)}),ze(ve(o),"handleImageLoadEnd",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).invalidate;clearInterval(o.imageLoadingTimer),o.setState({isFetching:!1,invalidate:void 0===t?o.state.invalidate:t})}),ze(ve(o),"handleImageLoad",function(){o.updateCurrentImageStyle()}),ze(ve(o),"handleImageError",function(){o.handleImageLoadEnd({invalidate:!0})}),ze(ve(o),"handleImageAbort",function(){o.handleImageLoadEnd({invalidate:!0})}),ze(ve(o),"handleImageReload",function(){var t=o.context.page;o.handleSetTimestamp(t)}),ze(ve(o),"handleSetTimestamp",function(t){var e=o.context.set,n=o.state.timestamp;o.setState({timestamp:ge({},n,ze({},e[t].src,(new Date).getTime()))})}),ze(ve(o),"handleGetTimestamp",function(t){var e=o.context.set;return o.state.timestamp[e[t].src]}),ze(ve(o),"setStyle",function(t){o.setState({currentStyle:t})}),ze(ve(o),"getStyle",function(t){var e,n,r,i,a=o.context,c=a.animate,s=a.set,l=a.zoom,u=a.page,f=o.state,p=f.invalidate,m=f.currentStyle,b=0,y=0,d="fade"===c.flip,h="crossFade"===c.flip;h&&(b=30),"swipe"===c.flip&&(b=Mt()*t);var g="zoom"===c.flip;g&&(y=.08);var w=Math.abs(t);return w>0?(e="translate3d(-50%, -50%, 0) translate3d(".concat(m.x+b,"px, ").concat(m.y,"px, 0px) scale3d(").concat(m.scale+y,", ").concat(m.scale+y,", 1) rotate3d(0, 0, 1, 0deg)"),n=10*w,r=d||h||g?0:1,i="none"):(e="translate3d(-50%, -50%, 0) translate3d(".concat(m.x,"px, ").concat(m.y,"px, 0px) scale3d(").concat(m.scale,", ").concat(m.scale,", 1) rotate3d(0, 0, 1, ").concat(m.rotate,"deg)"),r=m.opacity,n=10),ge({},Zt({transform:e}),{cursor:l?"zoom-out":"initial",zIndex:n,opacity:p?0:r,pointerEvents:i},s[u].style)}),ze(ve(o),"buildImageSeries",function(t){return Xt(t).map(function(t){return o.buildImage(t)})}),ze(ve(o),"buildImage",function(t){var e=o.context,n=e.loop,i=e.set,a=e.show,c=e.zoom,s=e.page,l=e.pageWithStep,u=o.state.invalidate,f=Math.abs(t)>0,p=l+t,m=Vt(s,i.length,t,{loop:n});if(Yt(m)){var b,y=o.getStyle(t),d=ee()(oe.a.imageLayer,i[m].className,(ze(b={},oe.a.zooming,c),ze(b,oe.a.invalidate,u),b)),h={key:"".concat(p,"-").concat(i[m].src),style:y,className:d,src:Ut(i[m].src,{t:o.handleGetTimestamp(s)}),alt:i[m].alt},g={id:"zmageImage",ref:o.imageRef,onLoad:o.handleImageLoad,onError:o.handleImageError,onAbort:o.handleImageAbort,onClick:o.handleClick};return f?a&&i.length>1&&!c&&r.a.createElement("img",h):r.a.createElement("img",he({},h,g))}}),o.imageRef=r.a.createRef(),o.initialPageOffset=window.pageYOffset,o.listeningMouseMove=!1,o.imageLoadingTimer=null,o.state={isFetching:!0,invalidate:!1,currentStyle:me(t,n),timestamp:{}},o}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(e,r.a.PureComponent),n=e,(i=[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(t){var e=t.show,n=t.zoom,o=t.rotate,r=t.page,i=this.props,a=i.show,c=i.zoom,s=i.rotate,l=i.page,u=this.props.presetIsMobile;e===a&&n===c&&o===s||(e?(this.updateCurrentImageStyle(),u&&(document.documentElement.style.overflow=Qt.html.overflow,document.body.style.overflow=Qt.body.overflow,document.body.style.position=Qt.body.position)):(this.updateCurrentImageStyle(),this.handleDetectImageLoadComplete(),u&&(Qt.html.overflow=document.documentElement.style.overflow,Qt.body.overflow=document.body.style.overflow,Qt.body.position=document.body.style.position,document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.position="relative")),this.updateZoomEventListenerWithState()),r!==l&&this.handleImageLoadStart()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("mousemove",this.handleMouseMove),clearInterval(this.imageLoadingTimer)}},{key:"render",value:function(){var t=this.context,e=(t.set,t.show),n=(t.zoom,t.page,t.pageIsCover),i=(t.pageWithStep,this.state),a=i.isFetching,c=i.invalidate;return r.a.createElement(o.Fragment,null,r.a.createElement(fe,{show:e&&(!n||c),load:a,invalidate:c,onReload:this.handleImageReload}),this.buildImageSeries(2))}}])&&we(n.prototype,i),a&&we(n,a),e}();ke.contextType=Et;var Se=n(11),je=n.n(Se);function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pe(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Re=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pe(this,Le(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(e,r.a.Component),n=e,(o=[{key:"render",value:function(){var t=this.props,e=t.show,n=t.zoom,o=this.context,i=o.backdrop,a=o.outBrowsing,c=o.toggleZoom;return r.a.createElement("div",{id:"zmageBackground",className:je.a.backgroundLayer,onClick:n?c:a,style:{opacity:e?1:0,background:i||"",transitionDelay:e?".3s":"0s"}})}}])&&Ee(n.prototype,o),i&&Ee(n,i),e}();Re.contextType=Et;var Ie=350,Te=function(t,e,n){return 0===n||t&&t.current&&t.current.getAttribute("src")===e[n].src},Me=function(t,e,n){var o=function(t,e){return Yt(t)&&t<e.length-1?t:e.length-1}(e,n);return{page:o,pageIsCover:Te(t,n,o)}},Be=function(t){t.current&&t&&t.current&&(t.current.style.visibility="visible")},Ne=function(t){t.current&&t&&t.current&&(t.current.style.visibility="hidden")};function De(t){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Ze(t,e,n[e])})}return t}function Ae(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ye=function(t){function e(t){var n,o,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=He(e).call(this,t),n=!r||"object"!==De(r)&&"function"!=typeof r?Ue(o):r,Ze(Ue(n),"init",function(){var t=n.props,e=t.isBrowsingControlled,o=t.coverRef,r=t.set,i=t.onBrowsing,a=n.state,c=a.show,s=a.page,l=a.pageIsCover;c||(window.addEventListener("keydown",n.handleKeyDown),window.addEventListener("scroll",n.handleScroll),window.requestAnimationFrame(function(){n.setState({show:!0,zoom:!1,rotate:0},function(){l&&Ne(o,r,s),!e&&"function"==typeof i&&i(!0)})}))}),Ze(Ue(n),"unInit",function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force,e=n.props,o=e.isBrowsingControlled,r=e.coverRef,i=e.set,a=e.onBrowsing,c=n.state,s=c.show,l=c.page,u=c.pageIsCover;(s||t)&&(window.removeEventListener("keydown",n.handleKeyDown),window.removeEventListener("scroll",n.handleScroll),!u&&Be(r,i,l),n.setState({show:!1,zoom:!1,rotate:0},function(){return setTimeout(function(){n.setState({mount:!1},function(){u&&Be(r,i,l),!o&&"function"==typeof a&&a(!1)})},Ie)}))}),Ze(Ue(n),"handleKeyDown",function(t){console.log("handleKeyDown");var e=n.props,o=e.preset,r=e.set,i=e.hotKey,a=e.loop,c=e.outBrowsing,s=n.state,l=s.zoom,u=s.page,f=Qe({},w(o).hotKey,i);switch(t.keyCode){case 27:t.preventDefault(),f.close&&(l?n.handleToggleZoom():c());break;case 32:t.preventDefault(),f.zoom&&n.handleToggleZoom();break;case 37:t.preventDefault(),(a||0!==u)&&!l&&f.flip&&n.handleToPrevPage();break;case 39:t.preventDefault(),(a||u!==r.length-1)&&!l&&f.flip&&n.handleToNextPage();break;default:return}}),Ze(Ue(n),"handleScroll",function(){n.state.show&&n.props.outBrowsing()}),Ze(Ue(n),"handleToPage",function(t){var e=n.props,o=e.coverRef,r=e.set,i=e.onSwitching;n.setState({page:t,pageIsCover:Te(o,r,t)},function(){"function"==typeof i&&i(n.state.page)})}),Ze(Ue(n),"handleSwitchPages",function(t){var e=n.props,o=e.coverRef,r=e.onSwitching,i=e.loop;return function(){var e=n.props.set,a=n.state,c=a.page,s=a.pageWithStep,l=Vt(c,e.length,t,{loop:i});n.setState({page:l,pageIsCover:Te(o,e,l),pageWithStep:s+t,zoom:!1,rotate:0},function(){"function"==typeof r&&r(l)})}}),Ze(Ue(n),"handleToPrevPage",n.handleSwitchPages(-1)),Ze(Ue(n),"handleToNextPage",n.handleSwitchPages(1)),Ze(Ue(n),"handleToggleZoom",function(){var t=n.props.onZooming;n.setState({zoom:!n.state.zoom},function(){"function"==typeof t&&t(n.state.zoom)})}),Ze(Ue(n),"handleToggleRotate",function(t){var e=n.props.onRotating;switch(t){case"left":return function(){return n.setState({rotate:n.state.rotate-90},function(){"function"==typeof e&&e(n.state.rotate)})};case"right":return function(){return n.setState({rotate:n.state.rotate+90},function(){"function"==typeof e&&e(n.state.rotate)})};default:return function(){return n.setState({rotate:0},function(){"function"==typeof e&&e(0)})}}});var i=Me(t.coverRef,t.defaultPage,t.set),a=i.page,c=i.pageIsCover;return n.state={mount:!1,show:!1,zoom:!1,rotate:0,page:a,pageIsCover:c,pageWithStep:a},n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(e,r.a.PureComponent),n=e,i=[{key:"getDerivedStateFromProps",value:function(t,e){return t.browsing?Qe({mount:!0},e.show?{}:Me(t.coverRef,t.defaultPage,t.set)):null}}],(o=[{key:"componentDidMount",value:function(){this.props.browsing&&this.init()}},{key:"componentDidUpdate",value:function(t){t.browsing!==this.props.browsing&&(this.props.browsing?this.init():this.unInit())}},{key:"componentWillUnmount",value:function(){this.unInit({force:!0})}},{key:"render",value:function(){var t=this.props,e=t.coverRef,n=t.outBrowsing,o=t.set,i=t.preset,a=t.controller,c=t.hotKey,l=t.animate,u=t.zIndex,f=t.backdrop,p=t.radius,m=t.edge,b=t.loop,y=this.state,d=y.mount,h=y.show,g=y.zoom,_=y.rotate,v=y.page,O=y.pageIsCover,z=y.pageWithStep,k=w(i),j={show:h,zoom:g,rotate:_,page:v,pageIsCover:O,pageWithStep:z},x=Qe({coverRef:e,outBrowsing:n,set:o,preset:i,presetIsMobile:"mobile"===i,presetIsDesktop:"desktop"===i,controller:Qe({},k.controller,a),hotKey:Qe({},k.hotKey,c),animate:Qe({},k.animate,l),backdrop:f,radius:p,edge:m,loop:b},j,{toPage:this.handleToPage,toPrevPage:this.handleToPrevPage,toNextPage:this.handleToNextPage,toggleZoom:this.handleToggleZoom,toggleRotate:this.handleToggleRotate});return r.a.createElement(Et.Provider,{value:x},d&&r.a.createElement(S,{id:"zmage",zIndex:u,className:s.a.wrapperLayer},r.a.createElement(Re,j),r.a.createElement($t,j),r.a.createElement(ke,j)))}}])&&Ae(n.prototype,o),i&&Ae(n,i),e}();Ye.contextType=Et,Ye.defaultProps={isBrowsingControlled:!1,browsing:!1,coverRef:r.a.createRef(),outBrowsing:function(){},defaultPage:0,set:[]};var Ve=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.set,n=t.src,o=t.alt,r=t.txt;return Array.isArray(e)&&e.length>0?e:[{src:n,alt:o,txt:r}]};function Xe(){return(Xe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ke(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tn={REF:r.a.createRef(),CONTAINER:null,PORTAL:null},en=function(t){function e(t){var n,o,r,i,a,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=We(e).call(this,t),n=!r||"object"!==Ge(r)&&"function"!=typeof r?qe(o):r,i=qe(n),c=function(){var t=n.props.destroyer;n.setState({browsing:!1}),setTimeout(t,Ie)},(a="outBrowsing")in i?Object.defineProperty(i,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[a]=c,n.state={browsing:!0},n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(e,r.a.PureComponent),n=e,(o=[{key:"render",value:function(){var t=this.props,e=(t.className,t.style,t.onClick,t.src),n=t.alt,o=t.txt,i=t.set,a=t.defaultPage,c=t.preset,s=t.controller,l=t.hotKey,u=t.animate,f=t.zIndex,p=t.backdrop,m=t.radius,b=t.edge,y=t.loop,d=t.onBrowsing,h=t.onZooming,g=t.onSwitching,w=t.onRotating,_=(t.browsing,Je(t,["className","style","onClick","src","alt","txt","set","defaultPage","preset","controller","hotKey","animate","zIndex","backdrop","radius","edge","loop","onBrowsing","onZooming","onSwitching","onRotating","browsing"]),this.state.browsing);return r.a.createElement(Ye,{browsing:_,outBrowsing:this.outBrowsing,defaultPage:a,set:Ve({set:i,src:e,alt:n,txt:o}),preset:c,controller:s,hotKey:l,animate:u,zIndex:f,backdrop:p,radius:m,edge:b,loop:y,onBrowsing:d,onZooming:h,onSwitching:g,onRotating:w})}}])&&Ke(n.prototype,o),i&&Ke(n,i),e}();en.propTypes=y,en.defaultProps=h;var nn=function(t){return tn.PORTAL=document.createElement("div"),tn.PORTAL.id="zmagePortal",tn.CONTAINER=document.body,tn.CONTAINER.appendChild(tn.PORTAL),a.a.render(r.a.createElement(en,Xe({ref:tn.REF,destroyer:function(){return tn.CONTAINER.removeChild(tn.PORTAL)}},t)),tn.PORTAL),tn.REF.current.outBrowsing};function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(){return(rn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function an(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){pn(t,e,n[e])})}return t}function cn(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mn=function(t){function e(t){var n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,i=ln(e).call(this,t),n=!i||"object"!==on(i)&&"function"!=typeof i?un(o):i,pn(un(n),"inBrowsing",function(){n.isBrowsingControlled?n.props.onBrowsing(!0):n.setState({browsing:!0})}),pn(un(n),"outBrowsing",function(){n.isBrowsingControlled?n.props.onBrowsing(!1):n.setState({browsing:!1})}),n.coverRef=r.a.createRef(),n.isBrowsingControlled=n.props.hasOwnProperty("browsing"),n.state={browsing:!1},n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,r.a.PureComponent),n=e,(i=[{key:"render",value:function(){var t=this,e=this.props,n=e.className,i=e.style,a=e.onClick,c=e.src,s=e.alt,l=e.txt,u=e.set,f=e.defaultPage,p=e.preset,m=e.controller,b=e.hotKey,y=e.animate,d=e.zIndex,h=e.backdrop,g=e.radius,w=e.edge,_=e.loop,v=e.onBrowsing,O=e.onZooming,z=e.onSwitching,k=e.onRotating,S=e.browsing,j=cn(e,["className","style","onClick","src","alt","txt","set","defaultPage","preset","controller","hotKey","animate","zIndex","backdrop","radius","edge","loop","onBrowsing","onZooming","onSwitching","onRotating","browsing"]),x=this.state.browsing;return r.a.createElement(o.Fragment,null,r.a.createElement("img",rn({ref:this.coverRef,className:n,style:an({cursor:"zoom-in"},i),src:c,alt:s,title:s,onClick:function(e){t.inBrowsing(),"function"==typeof a&&a(e)}},j)),r.a.createElement(Ye,{isBrowsingControlled:this.isBrowsingControlled,browsing:this.isBrowsingControlled?S:x,coverRef:this.coverRef,outBrowsing:this.outBrowsing,defaultPage:f,set:Ve({set:u,src:c,alt:s,txt:l}),preset:p,controller:m,hotKey:b,animate:y,zIndex:d,backdrop:h,radius:g,edge:w,loop:_,onBrowsing:v,onZooming:O,onSwitching:z,onRotating:k}))}}])&&sn(n.prototype,i),a&&sn(n,a),e}();mn.browsing=nn,mn.propTypes=y,mn.defaultProps=h,n.d(e,"default",function(){return mn})}]);

/***/ }),

/***/ 1545:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd2 = (_dec = (0, _mobxReact.inject)('UserStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd2, _React$Component);

	function PersonAdd2(props) {
		_classCallCheck(this, PersonAdd2);

		var _this = _possibleConstructorReturn(this, (PersonAdd2.__proto__ || Object.getPrototypeOf(PersonAdd2)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var users = dataArray.filter(function (res) {
				return res.selected == true;
			}).map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: "",
				data: Object.assign([], _this.state.defaultData)
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: _this.props.data, // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [] // 筛选数据
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd2, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.stringify(nextProps.data) != JSON.stringify(this.props.data)) {
				this.setState({
					oldSelect: nextProps.data
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var params = "";
			// 未选的全部用户
			this.props.UserStore.getRole(params).then(function (res) {
				_this3.setState({
					defaultData: res.body.map(function (item) {
						return Object.assign(item, { selected: false });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text;
			var disabled = this.props.disabled;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					_react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: '\u6DFB\u52A0\u8D1F\u8D23\u4EBA',
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								data && data.filter(function (res) {
									return res.selected == true;
								}).length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								data.filter(function (res) {
									return res.selected == true;
								}).length > 0 && data.filter(function (res) {
									return res.selected == true;
								}).map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd2;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd2;

/***/ }),

/***/ 1546:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _MyUploadNew = __webpack_require__(2026);

var _MyUploadNew2 = _interopRequireDefault(_MyUploadNew);

var _download = __webpack_require__(68);

var _api = __webpack_require__(30);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var TextArea = _antd.Input.TextArea;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {
			editing: true, //false,
			userIds: []
		}, _this.toggleEdit = function () {
			var editing = !_this.state.editing;
			_this.setState({ editing: editing }, function () {
				if (editing) {
					_this.input.focus();
				}
			});
		}, _this.save = function (e) {
			var _this$props = _this.props,
			    record = _this$props.record,
			    handleSave = _this$props.handleSave;

			_this.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this.saveDate = function (date, dateString) {
			var _this$props2 = _this.props,
			    record = _this$props2.record,
			    handleSave = _this$props2.handleSave;

			_this.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('beginTime')) {
					values["beginTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this.saveDate2 = function (date, dateString) {
			var _this$props3 = _this.props,
			    record = _this$props3.record,
			    handleSave = _this$props3.handleSave;

			_this.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('endTime')) {
					values["endTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["beginTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this.handleRemoveItem = function (id) {
			var handleDelete = _this.props.handleDelete;

			handleDelete(id);
		}, _this.onBlur = function () {
			//this.toggleEdit();
		}, _this.convertHttp2Https = function (url) {
			var fileUrl = url;
			if (fileUrl.indexOf("http://") !== -1) {
				fileUrl = 'https://' + fileUrl.split('http://')[1];
			}
			fileUrl = decodeURIComponent(fileUrl.split('?')[0]);
			return fileUrl;
		}, _this.handleAttment = function (arr, record) {
			var es = arr.map(function (item, index) {
				return Object.assign({}, {
					"mainId": record.id,
					"orders": index,
					"name": item.name,
					"fileSize": item.fileSize,
					"createTime": (0, _moment2.default)(item.createTime).valueOf(),
					"fileUrl": _this.convertHttp2Https(item.fileUrl),
					"fileType": item.fileType,
					"category": 0
				});
			});

			_this.props.handleAttmentsAdd({ es: es, mainId: record.id });
		}, _this.renderCell = function (form) {
			_this.form = form;
			var _this$props4 = _this.props,
			    children = _this$props4.children,
			    dataIndex = _this$props4.dataIndex,
			    record = _this$props4.record,
			    title = _this$props4.title,
			    handleDelete = _this$props4.handleDelete,
			    ossData = _this$props4.ossData;
			var editing = _this.state.editing;

			if (dataIndex == 'name') {
				return editing && record['canDel'] === 1 ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100%)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this.save,
							onBlur: _this.save
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						style: {
							float: 'right',
							width: 'calc(100%)',
							minHeight: '31px'
						}
					},
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "2px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif",
								display: record['isMust'] == 1 ? "inline" : "none"
							} },
						'*'
					),
					children
				);
			} else if (dataIndex == 'caozuo') {
				return _react2.default.createElement(
					'div',
					{ style: { display: 'flex', alignItems: 'center' } },
					record['key'] >= 2 ? record["canDel"] == 1 ? _react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								_this.handleRemoveItem('' + record.id);
							} },
						_react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' })
					) : null : null,
					_react2.default.createElement(_MyUploadNew2.default, {
						saveAttachment: function saveAttachment(arr) {
							_this.handleAttment(arr, record);
						},
						disabled: false,
						multiple: true,
						listType: 'text',
						ossData: mobx.toJS(ossData),
						fileList: [],
						journalType: 'journal'
					})
				);
			} else if (dataIndex == 'templates') {
				return _react2.default.createElement(
					'div',
					{ style: { display: 'flex', alignItems: 'center' } },
					_react2.default.createElement('img', { style: { width: '33px', heigth: '33px', cursor: 'pointer' }, src: './images/delivery/u2608.png' }),
					_react2.default.createElement(
						_antd.Button,
						{ type: 'link' },
						'\u6A21\u677F\u4E0B\u8F7D'
					)
				);
			} else if (dataIndex == 'cases') {
				return _react2.default.createElement(
					'div',
					{ style: { display: 'flex', alignItems: 'center' } },
					_react2.default.createElement('img', { style: { width: '33px', heigth: '33px', cursor: 'pointer' }, src: './images/delivery/u2608.png' }),
					_react2.default.createElement(
						_antd.Button,
						{ type: 'link' },
						'\u6848\u4F8B\u4E0B\u8F7D'
					)
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this.input = node;
						},
						onPressEnter: _this.save,
						onBlur: _this.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			}
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}
	//日期格式保存


	// 附件


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableUpload = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableUpload, _React$Component2);

	function EditableTableUpload(props) {
		var _this3 = this;

		_classCallCheck(this, EditableTableUpload);

		var _this2 = _possibleConstructorReturn(this, (EditableTableUpload.__proto__ || Object.getPrototypeOf(EditableTableUpload)).call(this, props));

		_this2.handleDelete = function (id) {
			var taskDetail = _this2.store.taskDetail;

			_this2.store.delEnclosureMain({ "id": id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this2.props.saveData();
				} else {
					_antd.message.error("删除失败");
				}
			});
		};

		_this2.handleAdd = function () {
			var _this2$state = _this2.state,
			    dataSource = _this2$state.dataSource,
			    primaryData = _this2$state.primaryData,
			    count = _this2$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this2.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				// this.props.saveData(this.state.dataSource);
			});
			_this2.props.saveItem(newData);
		};

		_this2.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this2.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			console.log('newdata==>', newData);
			_this2.setState({ dataSource: newData }, function () {
				// 更新保存数据
				// this.props.saveData(this.state.dataSource);
			});
			_this2.props.saveItem(mobx.toJS(newData)[index]);
		};

		_this2.handleAttmentsAdd = function (params) {

			_this2.store.saveEnclosureItemList(params).then(function (res) {
				_this2.props.saveData();
			});
		};

		_this2.formatTC = function () {};

		_this2.showText = function (text, numSub) {
			if (text == null) {
				return "";
			}
			if (text.length > numSub) {
				return text.substring(0, numSub - 1) + "...";
			}
			return text;
		};

		_this2.trans = function (file) {
			var src = void 0;
			if (/\.(doc|docx)$/.test(file)) {
				src = './images/delivery/share_word.png';
			} else if (/\.(xls|xlsx)$/.test(file)) {
				src = './images/delivery/share_excel.png';
			} else if (/\.(pdf)$/.test(file)) {
				src = './images/delivery/share_pdf.png';
			} else if (/\.(zip|rar)$/.test(file)) {
				src = './images/delivery/share_zip.png';
			} else if (/\.(ppt|pptx)$/.test(file)) {
				src = './images/delivery/share_ppt.png';
			} else if (/\.(mp4|rmvb|avi|ts)$/.test(file)) {
				src = './images/delivery/share_vodie.png';
			} else if (/\.(exe)$/.test(file)) {
				src = './images/delivery/exe_default.jpg';
			} else if (/\.(bmp|jpg|png|gif|jpeg|webp)$/.test(file)) {
				src = './images/delivery/share_png.png';
			} else {
				src = './images/delivery/share_other.png';
			}
			return src;
		};

		_this2.downloadUrl = function (item) {
			var fileUrl = item.fileUrl,
			    name = item.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(fileUrl, name); // 直接下载pdf
			} else {
				_this2.downloadImage(fileUrl, name);
			}
		};

		_this2.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this2.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this2.showModal = function () {
			var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item) {
				var isImage;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								isImage = /\.(doc|docx)$/.test(item.fileUrl) || /\.(xls|xlsx)$/.test(item.fileUrl) || /\.(pdf)$/.test(item.fileUrl) || /\.(zip|rar)$/.test(item.fileUrl) || /\.(ppt|pptx)$/.test(item.fileUrl);

								if (isImage) {
									// when true, it's document
									_this2.getDocumentUrl(decodeURIComponent(item.fileUrl)).then(function (res) {
										_this2.setState({
											modalVisible: true,
											modalTitle: item.name,
											fileUrl: res,
											currentItem: item,
											isImageOrDoc: 'doc'
										});
									});
								} else {
									// when false, it's image
									_this2.setState({ isImageOrDoc: 'image', fileUrl: item.fileUrl, modalVisible: true, modalTitle: item.name, currentItem: item });
								}

							case 2:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this3);
			}));

			return function (_x) {
				return _ref3.apply(this, arguments);
			};
		}();

		_this2.handleCancel = function (e) {
			_this2.setState({
				modalVisible: false,
				fileUrl: ''
			});
		};

		_this2.delItem = function (id) {
			_this2.store.delEnclosureItem({ id: id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this2.props.saveData();
				} else {
					_antd.message.error("删除失败");
				}
			});
		};

		_this2.handleRenameOk = function () {
			var _this2$state2 = _this2.state,
			    fileName = _this2$state2.fileName,
			    renameFile = _this2$state2.renameFile,
			    eMainId = _this2$state2.eMainId;

			var newFile = Object.assign(renameFile, { "name": fileName });
			_this2.store.saveEnclosureItem({ e: newFile, mainId: eMainId }).then(function (res) {
				if (res) {
					_antd.message.success("重命名成功");
					_this2.props.saveData();
					_this2.setState({ renameModalVisible: false });
				} else {
					_antd.message.error("重命名失败");
				}
			});
		};

		_this2.handleRenameCancel = function () {
			_this2.setState({
				renameModalVisible: false,
				fileName: '',
				eMainId: null
			});
		};

		_this2.handleRenameChange = function (e) {
			_this2.setState({ fileName: e.target.value });
		};

		_this2.showRenameModal = function (item, mainId) {
			_this2.setState({ renameModalVisible: true, renameFile: item, fileName: item.name, eMainId: mainId });
		};

		_this2.store = _this2.props.store;
		_this2.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"name": "",
				"nameList": "",
				"ownerList": "",
				"fileSizeList": "",
				"createTimeList": "",
				"templates": [],
				"cases": []
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			modalVisible: false,
			renameModalVisible: false,
			modalTitle: '',
			fileUrl: "",
			fileName: "",
			eMainId: null,
			renameFile: null,
			currentItem: null,
			isImageOrDoc: 'doc'
		};
		return _this2;
	}

	_createClass(EditableTableUpload, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"name": "",
						"nameList": "",
						"ownerList": "",
						"fileSizeList": "",
						"createTimeList": "",
						"templates": [],
						"cases": []
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"name": "",
					"nameList": "",
					"ownerList": "",
					"fileSizeList": "",
					"createTimeList": "",
					"templates": [],
					"cases": []
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		//附件新增


		// 手动下载


		// 直接下载

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    modalVisible = _state.modalVisible,
			    modalTitle = _state.modalTitle,
			    currentItem = _state.currentItem,
			    isImageOrDoc = _state.isImageOrDoc,
			    fileUrl = _state.fileUrl,
			    renameModalVisible = _state.renameModalVisible,
			    fileName = _state.fileName,
			    renameFile = _state.renameFile;
			var disabled = this.props.disabled;

			var modalHeader = _react2.default.createElement(
				_antd.Row,
				null,
				_react2.default.createElement(
					_antd.Col,
					{ span: 12, className: 'leftLabelHeader' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							null,
							modalTitle
						)
					)
				),
				_react2.default.createElement(
					_antd.Col,
					{ span: 12, className: 'rightLabelHeader' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							_antd.Button,
							{ type: 'default', icon: 'download', onClick: function onClick(e) {
									_this4.downloadUrl(currentItem, e);
								} },
							'\u4E0B\u8F7D'
						)
					)
				)
			);
			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '序号', dataIndex: 'keyIndex', align: 'center', width: "5%"
			}, {
				title: '附件项目', dataIndex: 'name', align: 'left', editable: !disabled && !isChaijie
			}, {
				title: '附件名称', dataIndex: 'nameList', align: 'left',
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'left' },
								className: 'pr' },
							_react2.default.createElement(
								'div',
								{ style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									null,
									_react2.default.createElement('img', { style: { verticalAlign: 'middle', cursor: 'pointer', padding: 0 }, width: '25', height: '25 ', src: _this4.trans(item.name), alt: '' }),
									_react2.default.createElement(
										_antd.Button,
										{ style: { padding: '5px' }, onClick: function onClick() {
												_this4.showModal(item);
											}, title: item.name, type: 'link' },
										disabled ? _this4.showText(item.name, 55) : _this4.showText(item.name, 20)
									)
								),
								_react2.default.createElement(
									'div',
									null,
									disabled ? _react2.default.createElement(
										_antd.Button,
										{ onClick: function onClick() {
												_this4.downloadUrl(item);
											}, type: 'link' },
										'\u4E0B\u8F7D'
									) : _react2.default.createElement('img', { onClick: function onClick() {
											_this4.downloadUrl(item);
										}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/download.png', title: '\u4E0B\u8F7D', alt: '\u4E0B\u8F7D' }),
									disabled ? "" : _react2.default.createElement(
										'span',
										null,
										_react2.default.createElement(
											_antd.Popconfirm,
											{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
													_this4.delItem(item.id);
												} },
											_react2.default.createElement('img', { style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/delete.png', title: '\u5220\u9664', alt: '\u5220\u9664' })
										),
										_react2.default.createElement('img', { onClick: function onClick() {
												_this4.showRenameModal(item, record['id']);
											}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/rename.png', title: '\u91CD\u547D\u540D', alt: '\u91CD\u547D\u540D' })
									)
								)
							)
						);
					}) : _react2.default.createElement('span', null);
				}
			}, {
				title: '大小',
				dataIndex: 'fileSizeList',
				width: '5%',
				align: "center",
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'center' },
								className: 'pr' },
							(0, _utils.converSize)(item.fileSize)
						);
					}) : _react2.default.createElement('span', null);
				}
			}, {
				title: '上传人',
				dataIndex: 'ownerNameList',
				width: '5%',
				align: "center",
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'center' },
								className: 'pr' },
							item.ownerName
						);
					}) : _react2.default.createElement('span', null);
				}
			}, {
				title: '上传时间',
				dataIndex: 'createTimeList',
				width: '150px',
				align: "center",
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'center' },
								className: 'pr' },
							(0, _moment2.default)(item.createTime).format("YYYY-MM-DD")
						);
					}) : _react2.default.createElement('span', null);
				}
			}];
			if (!disabled) {
				columnEle = [{
					title: '操作', dataIndex: 'caozuo', align: 'center', width: '5%', editable: !disabled,
					render: function render(text, record) {
						//rendcell 实现操作业务
						return _react2.default.createElement(
							'div',
							null,
							_react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' }),
							_react2.default.createElement(
								_antd.Button,
								{ type: 'link' },
								'\u4E0A\u4F20'
							)
						);
					}
				}].concat(columnEle).concat([{
					title: '模板',
					dataIndex: 'templates',
					align: "center",
					width: '10%',
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								className: 'pr' },
							record['canDel'] === 0 ? record["templates"].length > 0 ? record["templates"].map(function (item, index) {
								return _react2.default.createElement(
									'div',
									{ style: { display: "flex" } },
									_react2.default.createElement('img', { onClick: function onClick() {
											_this4.showModal(item);
										}, title: item.name, style: { "width": "33px", "height": "33px", padding: '0' }, src: './images/delivery/u2608.png' }),
									' ',
									_react2.default.createElement(
										_antd.Button,
										{ style: { padding: '0' }, onClick: function onClick() {
												_this4.downloadUrl(item);
											}, title: item.name, type: 'link' },
										_this4.showText(item.name, 10)
									)
								);
							}) : _react2.default.createElement(
								'div',
								{ style: { display: "flex" } },
								_react2.default.createElement('img', { style: { "width": "33px", "height": "33px" }, src: './images/delivery/u2607.png' }),
								' ',
								_react2.default.createElement(
									_antd.Button,
									{ style: { color: "rgb(127,127,127)", padding: '0' }, type: 'link' },
									'\u6682\u65E0\u6A21\u677F'
								)
							) : _react2.default.createElement('span', null)
						);
					}
				}, {
					title: '案例',
					dataIndex: 'cases',
					align: "center",
					width: '10%',
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								className: 'pr' },
							record['canDel'] === 0 ? record["cases"].length > 0 ? record["cases"].map(function (item, index) {
								return _react2.default.createElement(
									'div',
									{ style: { display: "flex" } },
									_react2.default.createElement('img', { onClick: function onClick() {
											_this4.showModal(item);
										}, style: { "width": "33px", "height": "33px", padding: '0' }, title: item.name, src: './images/delivery/u2608.png' }),
									' ',
									_react2.default.createElement(
										_antd.Button,
										{ style: { padding: '0' }, onClick: function onClick() {
												_this4.downloadUrl(item);
											}, title: item.name, type: 'link' },
										_this4.showText(item.name, 8)
									)
								);
							}) : _react2.default.createElement(
								'div',
								{ style: { display: "flex" } },
								_react2.default.createElement('img', { style: { "width": "33px", "height": "33px", padding: '0' }, src: './images/delivery/u2607.png' }),
								' ',
								_react2.default.createElement(
									_antd.Button,
									{ style: { color: "rgb(127,127,127)", padding: '0' }, type: 'link' },
									'\u6682\u65E0\u6848\u4F8B'
								)
							) : _react2.default.createElement('span', null)
						);
					}
				}]);
			}
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete,
							ossData: _this4.store.ossData,
							handleAttmentsAdd: _this4.handleAttmentsAdd
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px' },
					type: 'plus-circle' }),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: modalHeader,
						visible: modalVisible,
						onCancel: this.handleCancel,
						footer: null,
						style: { top: 70, height: 'calc(100vh - 150px)', minWidth: '1000px' },
						bodyStyle: { padding: 0 },
						width: 'calc(100% - 400px)'
					},
					_react2.default.createElement(
						'div',
						{ style: isImageOrDoc === 'doc' ? { height: 'calc(100vh - 200px)' } : { height: 'calc(100vh - 200px)', textAlign: 'center', backgroundColor: '#000', paddingTop: '40px' } },
						isImageOrDoc === 'doc' ? _react2.default.createElement('iframe', {
							src: fileUrl,
							width: '100%', height: '100%', frameBorder: '1', style: { minHeight: '600px' } }) : _react2.default.createElement('img', { src: fileUrl, height: '600px', style: { minHeight: '600px' }, alt: '' })
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: "文件重命名",
						visible: renameModalVisible,
						onOk: this.handleRenameOk,
						onCancel: this.handleRenameCancel,
						style: { top: 70, height: '300px', minWidth: '600px' },
						bodyStyle: { padding: 0 }
					},
					_react2.default.createElement(
						'div',
						{ style: { display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100px' } },
						_react2.default.createElement(_antd.Input, {
							style: {
								width: '500px'

							},
							value: fileName,
							onChange: this.handleRenameChange
						})
					)
				)
			);
		}
	}]);

	return EditableTableUpload;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableUpload;

/***/ }),

/***/ 1549:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.coordinateToTimeRatio = coordinateToTimeRatio;
exports.calculateXPositionForTime = calculateXPositionForTime;
exports.calculateTimeForXPosition = calculateTimeForXPosition;
exports.iterateTimes = iterateTimes;
exports.getMinUnit = getMinUnit;
exports.getNextUnit = getNextUnit;
exports.calculateInteractionNewTimes = calculateInteractionNewTimes;
exports.calculateDimensions = calculateDimensions;
exports.getGroupOrders = getGroupOrders;
exports.getGroupedItems = getGroupedItems;
exports.getVisibleItems = getVisibleItems;
exports.collision = collision;
exports.groupStack = groupStack;
exports.groupNoStack = groupNoStack;
exports.stackAll = stackAll;
exports.stackGroup = stackGroup;
exports.stackTimelineItems = stackTimelineItems;
exports.getCanvasWidth = getCanvasWidth;
exports.getItemDimensions = getItemDimensions;
exports.getItemWithInteractions = getItemWithInteractions;
exports.getCanvasBoundariesFromVisibleTime = getCanvasBoundariesFromVisibleTime;
exports.calculateScrollCanvas = calculateScrollCanvas;
exports.minCellWidth = void 0;

var _moment = _interopRequireDefault(__webpack_require__(35));

var _generic = __webpack_require__(1583);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

/**
 * Calculate the ms / pixel ratio of the timeline state
 * @param {number} canvasTimeStart
 * @param {number} canvasTimeEnd
 * @param {number} canvasWidth
 * @returns {number}
 */
function coordinateToTimeRatio(canvasTimeStart, canvasTimeEnd, canvasWidth) {
  return (canvasTimeEnd - canvasTimeStart) / canvasWidth;
}
/**
 * For a given time, calculate the pixel position given timeline state
 * (timeline width in px, canvas time range)
 * @param {number} canvasTimeStart
 * @param {number} canvasTimeEnd
 * @param {number} canvasWidth
 * @param {number} time
 * @returns {number}
 */


function calculateXPositionForTime(canvasTimeStart, canvasTimeEnd, canvasWidth, time) {
  var widthToZoomRatio = canvasWidth / (canvasTimeEnd - canvasTimeStart);
  var timeOffset = time - canvasTimeStart;
  return timeOffset * widthToZoomRatio;
}
/**
 * For a given x position (leftOffset) in pixels, calculate time based on
 * timeline state (timeline width in px, canvas time range)
 * @param {number} canvasTimeStart
 * @param {number} canvasTimeEnd
 * @param {number} canvasWidth
 * @param {number} leftOffset
 * @returns {number}
 */


function calculateTimeForXPosition(canvasTimeStart, canvasTimeEnd, canvasWidth, leftOffset) {
  var timeToPxRatio = (canvasTimeEnd - canvasTimeStart) / canvasWidth;
  var timeFromCanvasTimeStart = timeToPxRatio * leftOffset;
  return timeFromCanvasTimeStart + canvasTimeStart;
}

function iterateTimes(start, end, unit, timeSteps, callback) {
  var time = (0, _moment["default"])(start).startOf(unit);

  if (timeSteps[unit] && timeSteps[unit] > 1) {
    var value = time.get(unit);
    time.set(unit, value - value % timeSteps[unit]);
  }

  while (time.valueOf() < end) {
    var nextTime = (0, _moment["default"])(time).add(timeSteps[unit] || 1, "".concat(unit, "s"));
    callback(time, nextTime);
    time = nextTime;
  }
} // this function is VERY HOT as its used in Timeline.js render function
// TODO: check if there are performance implications here
// when "weeks" feature is implemented, this function will be modified heavily

/** determine the current rendered time unit based on timeline time span
 *
 * zoom: (in milliseconds) difference between time start and time end of timeline canvas
 * width: (in pixels) pixel width of timeline canvas
 * timeSteps: map of timeDividers with number to indicate step of each divider
 */
// the smallest cell we want to render is 17px
// this can be manipulated to make the breakpoints change more/less
// i.e. on zoom how often do we switch to the next unit of time
// i think this is the distance between cell lines


var minCellWidth = 17;
exports.minCellWidth = minCellWidth;

function getMinUnit(zoom, width, timeSteps) {
  // for supporting weeks, its important to remember that each of these
  // units has a natural progression to the other. i.e. a year is 12 months
  // a month is 24 days, a day is 24 hours.
  // with weeks this isnt the case so weeks needs to be handled specially
  var timeDividers = {
    second: 1000,
    minute: 60,
    hour: 60,
    day: 24,
    month: 30,
    year: 12
  };
  var minUnit = 'year'; // this timespan is in ms initially

  var nextTimeSpanInUnitContext = zoom;
  Object.keys(timeDividers).some(function (unit) {
    // converts previous time span to current unit
    // (e.g. milliseconds to seconds, seconds to minutes, etc)
    nextTimeSpanInUnitContext = nextTimeSpanInUnitContext / timeDividers[unit]; // timeSteps is "
    // With what step to display different units. E.g. 15 for minute means only minutes 0, 15, 30 and 45 will be shown."
    // how many cells would be rendered given this time span, for this unit?
    // e.g. for time span of 60 minutes, and time step of 1, we would render 60 cells

    var cellsToBeRenderedForCurrentUnit = nextTimeSpanInUnitContext / timeSteps[unit]; // what is happening here? why 3 if time steps are greater than 1??

    var cellWidthToUse = timeSteps[unit] && timeSteps[unit] > 1 ? 3 * minCellWidth : minCellWidth; // for the minWidth of a cell, how many cells would be rendered given
    // the current pixel width
    // i.e. f

    var minimumCellsToRenderUnit = width / cellWidthToUse;

    if (cellsToBeRenderedForCurrentUnit < minimumCellsToRenderUnit) {
      // for the current zoom, the number of cells we'd need to render all parts of this unit
      // is less than the minimum number of cells needed at minimum cell width
      minUnit = unit;
      return true;
    }
  });
  return minUnit;
}

function getNextUnit(unit) {
  var nextUnits = {
    second: 'minute',
    minute: 'hour',
    hour: 'day',
    day: 'month',
    month: 'year',
    year: 'year'
  };

  if (!nextUnits[unit]) {
    throw new Error("unit ".concat(unit, " in not acceptable"));
  }

  return nextUnits[unit];
}
/**
 * get the new start and new end time of item that is being
 * dragged or resized
 * @param {*} itemTimeStart original item time in milliseconds
 * @param {*} itemTimeEnd original item time in milliseconds
 * @param {*} dragTime new start time if item is dragged in milliseconds
 * @param {*} isDragging is item being dragged
 * @param {*} isResizing is item being resized
 * @param {`right` or `left`} resizingEdge resize edge
 * @param {*} resizeTime new resize time in milliseconds
 */


function calculateInteractionNewTimes(_ref) {
  var itemTimeStart = _ref.itemTimeStart,
      itemTimeEnd = _ref.itemTimeEnd,
      dragTime = _ref.dragTime,
      isDragging = _ref.isDragging,
      isResizing = _ref.isResizing,
      resizingEdge = _ref.resizingEdge,
      resizeTime = _ref.resizeTime;
  var originalItemRange = itemTimeEnd - itemTimeStart;
  var itemStart = isResizing && resizingEdge === 'left' ? resizeTime : itemTimeStart;
  var itemEnd = isResizing && resizingEdge === 'right' ? resizeTime : itemTimeEnd;
  return [isDragging ? dragTime : itemStart, isDragging ? dragTime + originalItemRange : itemEnd];
}

function calculateDimensions(_ref2) {
  var itemTimeStart = _ref2.itemTimeStart,
      itemTimeEnd = _ref2.itemTimeEnd,
      canvasTimeStart = _ref2.canvasTimeStart,
      canvasTimeEnd = _ref2.canvasTimeEnd,
      canvasWidth = _ref2.canvasWidth;
  var itemTimeRange = itemTimeEnd - itemTimeStart; // restrict startTime and endTime to be bounded by canvasTimeStart and canvasTimeEnd

  var effectiveStartTime = Math.max(itemTimeStart, canvasTimeStart);
  var effectiveEndTime = Math.min(itemTimeEnd, canvasTimeEnd);
  var left = calculateXPositionForTime(canvasTimeStart, canvasTimeEnd, canvasWidth, effectiveStartTime);
  var right = calculateXPositionForTime(canvasTimeStart, canvasTimeEnd, canvasWidth, effectiveEndTime);
  var itemWidth = right - left;
  var dimensions = {
    left: left,
    width: Math.max(itemWidth, 3),
    collisionLeft: itemTimeStart,
    collisionWidth: itemTimeRange
  };
  return dimensions;
}
/**
 * Get the order of groups based on their keys
 * @param {*} groups array of groups
 * @param {*} keys the keys object
 * @returns Ordered hash of objects with their array index and group
 */


function getGroupOrders(groups, keys) {
  var groupIdKey = keys.groupIdKey;
  var groupOrders = {};

  for (var i = 0; i < groups.length; i++) {
    groupOrders[(0, _generic._get)(groups[i], groupIdKey)] = {
      index: i,
      group: groups[i]
    };
  }

  return groupOrders;
}
/**
 * Adds items relevant to each group to the result of getGroupOrders
 * @param {*} items list of all items
 * @param {*} groupOrders the result of getGroupOrders
 */


function getGroupedItems(items, groupOrders) {
  var groupedItems = {};
  var keys = Object.keys(groupOrders); // Initialize with result object for each group

  for (var i = 0; i < keys.length; i++) {
    var groupOrder = groupOrders[keys[i]];
    groupedItems[i] = {
      index: groupOrder.index,
      group: groupOrder.group,
      items: []
    };
  } // Populate groups


  for (var _i = 0; _i < items.length; _i++) {
    if (items[_i].dimensions.order !== undefined) {
      var groupItem = groupedItems[items[_i].dimensions.order.index];

      if (groupItem) {
        groupItem.items.push(items[_i]);
      }
    }
  }

  return groupedItems;
}

function getVisibleItems(items, canvasTimeStart, canvasTimeEnd, keys) {
  var itemTimeStartKey = keys.itemTimeStartKey,
      itemTimeEndKey = keys.itemTimeEndKey;
  return items.filter(function (item) {
    return (0, _generic._get)(item, itemTimeStartKey) <= canvasTimeEnd && (0, _generic._get)(item, itemTimeEndKey) >= canvasTimeStart;
  });
}

var EPSILON = 0.001;

function collision(a, b, lineHeight) {
  var collisionPadding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : EPSILON;
  // 2d collisions detection - https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection
  var verticalMargin = 0;
  return a.collisionLeft + collisionPadding < b.collisionLeft + b.collisionWidth && a.collisionLeft + a.collisionWidth - collisionPadding > b.collisionLeft && a.top - verticalMargin + collisionPadding < b.top + b.height && a.top + a.height + verticalMargin - collisionPadding > b.top;
}
/**
 * Calculate the position of a given item for a group that
 * is being stacked
 */


function groupStack(lineHeight, item, group, groupHeight, groupTop, itemIndex) {
  // calculate non-overlapping positions
  var curHeight = groupHeight;
  var verticalMargin = (lineHeight - item.dimensions.height) / 2;

  if (item.dimensions.stack && item.dimensions.top === null) {
    item.dimensions.top = groupTop + verticalMargin;
    curHeight = Math.max(curHeight, lineHeight);

    do {
      var collidingItem = null; //Items are placed from i=0 onwards, only check items with index < i

      for (var j = itemIndex - 1, jj = 0; j >= jj; j--) {
        var other = group[j];

        if (other.dimensions.top !== null && other.dimensions.stack && collision(item.dimensions, other.dimensions, lineHeight)) {
          collidingItem = other;
          break;
        } else {// console.log('dont test', other.top !== null, other !== item, other.stack);
        }
      }

      if (collidingItem != null) {
        // There is a collision. Reposition the items above the colliding element
        item.dimensions.top = collidingItem.dimensions.top + lineHeight;
        curHeight = Math.max(curHeight, item.dimensions.top + item.dimensions.height + verticalMargin - groupTop);
      }
    } while (collidingItem);
  }

  return {
    groupHeight: curHeight,
    verticalMargin: verticalMargin,
    itemTop: item.dimensions.top
  };
} // Calculate the position of this item for a group that is not being stacked


function groupNoStack(lineHeight, item, groupHeight, groupTop) {
  var verticalMargin = (lineHeight - item.dimensions.height) / 2;

  if (item.dimensions.top === null) {
    item.dimensions.top = groupTop + verticalMargin;
    groupHeight = Math.max(groupHeight, lineHeight);
  }

  return {
    groupHeight: groupHeight,
    verticalMargin: 0,
    itemTop: item.dimensions.top
  };
}

function sum() {
  var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  return arr.reduce(function (acc, i) {
    return acc + i;
  }, 0);
}
/**
 * Stack all groups
 * @param {*} items items to be stacked
 * @param {*} groupOrders the groupOrders object
 * @param {*} lineHeight
 * @param {*} stackItems should items be stacked?
 */


function stackAll(itemsDimensions, groupOrders, lineHeight, stackItems) {
  var groupHeights = [];
  var groupTops = [];
  var groupedItems = getGroupedItems(itemsDimensions, groupOrders);

  for (var index in groupedItems) {
    var groupItems = groupedItems[index];
    var _itemsDimensions = groupItems.items,
        group = groupItems.group;
    var groupTop = sum(groupHeights); // Is group being stacked?

    var isGroupStacked = group.stackItems !== undefined ? group.stackItems : stackItems;

    var _stackGroup = stackGroup(_itemsDimensions, isGroupStacked, lineHeight, groupTop),
        groupHeight = _stackGroup.groupHeight,
        verticalMargin = _stackGroup.verticalMargin; // If group height is overridden, push new height
    // Do this late as item position still needs to be calculated


    groupTops.push(groupTop);

    if (group.height) {
      groupHeights.push(group.height);
    } else {
      groupHeights.push(Math.max(groupHeight, lineHeight));
    }
  }

  return {
    height: sum(groupHeights),
    groupHeights: groupHeights,
    groupTops: groupTops
  };
}
/**
 * 
 * @param {*} itemsDimensions 
 * @param {*} isGroupStacked 
 * @param {*} lineHeight 
 * @param {*} groupTop 
 */


function stackGroup(itemsDimensions, isGroupStacked, lineHeight, groupTop) {
  var groupHeight = 0;
  var verticalMargin = 0; // Find positions for each item in group

  for (var itemIndex = 0; itemIndex < itemsDimensions.length; itemIndex++) {
    var r = {};

    if (isGroupStacked) {
      r = groupStack(lineHeight, itemsDimensions[itemIndex], itemsDimensions, groupHeight, groupTop, itemIndex);
    } else {
      r = groupNoStack(lineHeight, itemsDimensions[itemIndex], groupHeight, groupTop);
    }

    groupHeight = r.groupHeight;
    verticalMargin = r.verticalMargin;
  }

  return {
    groupHeight: groupHeight,
    verticalMargin: verticalMargin
  };
}
/**
 * Stack the items that will be visible
 * within the canvas area
 * @param {item[]} items
 * @param {group[]} groups
 * @param {number} canvasWidth
 * @param {number} canvasTimeStart
 * @param {number} canvasTimeEnd
 * @param {*} keys
 * @param {number} lineHeight
 * @param {number} itemHeightRatio
 * @param {boolean} stackItems
 * @param {*} draggingItem
 * @param {*} resizingItem
 * @param {number} dragTime
 * @param {left or right} resizingEdge
 * @param {number} resizeTime
 * @param {number} newGroupOrder
 */


function stackTimelineItems(items, groups, canvasWidth, canvasTimeStart, canvasTimeEnd, keys, lineHeight, itemHeightRatio, stackItems, draggingItem, resizingItem, dragTime, resizingEdge, resizeTime, newGroupOrder) {
  var visibleItems = getVisibleItems(items, canvasTimeStart, canvasTimeEnd, keys);
  var visibleItemsWithInteraction = visibleItems.map(function (item) {
    return getItemWithInteractions({
      item: item,
      keys: keys,
      draggingItem: draggingItem,
      resizingItem: resizingItem,
      dragTime: dragTime,
      resizingEdge: resizingEdge,
      resizeTime: resizeTime,
      groups: groups,
      newGroupOrder: newGroupOrder
    });
  }); // if there are no groups return an empty array of dimensions

  if (groups.length === 0) {
    return {
      dimensionItems: [],
      height: 0,
      groupHeights: [],
      groupTops: []
    };
  } // Get the order of groups based on their id key


  var groupOrders = getGroupOrders(groups, keys);
  var dimensionItems = visibleItemsWithInteraction.map(function (item) {
    return getItemDimensions({
      item: item,
      keys: keys,
      canvasTimeStart: canvasTimeStart,
      canvasTimeEnd: canvasTimeEnd,
      canvasWidth: canvasWidth,
      groupOrders: groupOrders,
      lineHeight: lineHeight,
      itemHeightRatio: itemHeightRatio
    });
  }).filter(function (item) {
    return !!item;
  }); // Get a new array of groupOrders holding the stacked items

  var _stackAll = stackAll(dimensionItems, groupOrders, lineHeight, stackItems),
      height = _stackAll.height,
      groupHeights = _stackAll.groupHeights,
      groupTops = _stackAll.groupTops;

  return {
    dimensionItems: dimensionItems,
    height: height,
    groupHeights: groupHeights,
    groupTops: groupTops
  };
}
/**
 * get canvas width from visible width
 * @param {*} width
 * @param {*} buffer
 */


function getCanvasWidth(width) {
  var buffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;
  return width * buffer;
}
/**
 * get item's position, dimensions and collisions
 * @param {*} item
 * @param {*} keys
 * @param {*} canvasTimeStart
 * @param {*} canvasTimeEnd
 * @param {*} canvasWidth
 * @param {*} groupOrders
 * @param {*} lineHeight
 * @param {*} itemHeightRatio
 */


function getItemDimensions(_ref3) {
  var item = _ref3.item,
      keys = _ref3.keys,
      canvasTimeStart = _ref3.canvasTimeStart,
      canvasTimeEnd = _ref3.canvasTimeEnd,
      canvasWidth = _ref3.canvasWidth,
      groupOrders = _ref3.groupOrders,
      lineHeight = _ref3.lineHeight,
      itemHeightRatio = _ref3.itemHeightRatio;
  var itemId = (0, _generic._get)(item, keys.itemIdKey);
  var dimension = calculateDimensions({
    itemTimeStart: (0, _generic._get)(item, keys.itemTimeStartKey),
    itemTimeEnd: (0, _generic._get)(item, keys.itemTimeEndKey),
    canvasTimeStart: canvasTimeStart,
    canvasTimeEnd: canvasTimeEnd,
    canvasWidth: canvasWidth
  });

  if (dimension) {
    dimension.top = null;
    dimension.order = groupOrders[(0, _generic._get)(item, keys.itemGroupKey)];
    dimension.stack = !item.isOverlay;
    dimension.height = lineHeight * itemHeightRatio;
    return {
      id: itemId,
      dimensions: dimension
    };
  }
}
/**
 * get new item with changed  `itemTimeStart` , `itemTimeEnd` and `itemGroupKey` according to user interaction
 * user interaction is dragging an item and resize left and right
 * @param {*} item
 * @param {*} keys
 * @param {*} draggingItem
 * @param {*} resizingItem
 * @param {*} dragTime
 * @param {*} resizingEdge
 * @param {*} resizeTime
 * @param {*} groups
 * @param {*} newGroupOrder
 */


function getItemWithInteractions(_ref4) {
  var _objectSpread2;

  var item = _ref4.item,
      keys = _ref4.keys,
      draggingItem = _ref4.draggingItem,
      resizingItem = _ref4.resizingItem,
      dragTime = _ref4.dragTime,
      resizingEdge = _ref4.resizingEdge,
      resizeTime = _ref4.resizeTime,
      groups = _ref4.groups,
      newGroupOrder = _ref4.newGroupOrder;
  if (!resizingItem && !draggingItem) return item;
  var itemId = (0, _generic._get)(item, keys.itemIdKey);
  var isDragging = itemId === draggingItem;
  var isResizing = itemId === resizingItem;

  var _calculateInteraction = calculateInteractionNewTimes({
    itemTimeStart: (0, _generic._get)(item, keys.itemTimeStartKey),
    itemTimeEnd: (0, _generic._get)(item, keys.itemTimeEndKey),
    isDragging: isDragging,
    isResizing: isResizing,
    dragTime: dragTime,
    resizingEdge: resizingEdge,
    resizeTime: resizeTime
  }),
      _calculateInteraction2 = _slicedToArray(_calculateInteraction, 2),
      itemTimeStart = _calculateInteraction2[0],
      itemTimeEnd = _calculateInteraction2[1];

  var newItem = _objectSpread({}, item, (_objectSpread2 = {}, _defineProperty(_objectSpread2, keys.itemTimeStartKey, itemTimeStart), _defineProperty(_objectSpread2, keys.itemTimeEndKey, itemTimeEnd), _defineProperty(_objectSpread2, keys.itemGroupKey, isDragging ? (0, _generic._get)(groups[newGroupOrder], keys.groupIdKey) : (0, _generic._get)(item, keys.itemGroupKey)), _objectSpread2));

  return newItem;
}
/**
 * get canvas start and end time from visible start and end time
 * @param {number} visibleTimeStart
 * @param {number} visibleTimeEnd
 */


function getCanvasBoundariesFromVisibleTime(visibleTimeStart, visibleTimeEnd) {
  var zoom = visibleTimeEnd - visibleTimeStart;
  var canvasTimeStart = visibleTimeStart - (visibleTimeEnd - visibleTimeStart);
  var canvasTimeEnd = canvasTimeStart + zoom * 3;
  return [canvasTimeStart, canvasTimeEnd];
}
/**
 * Get the the canvas area for a given visible time
 * Will shift the start/end of the canvas if the visible time
 * does not fit within the existing
 * @param {number} visibleTimeStart
 * @param {number} visibleTimeEnd
 * @param {boolean} forceUpdateDimensions
 * @param {*} items
 * @param {*} groups
 * @param {*} props
 * @param {*} state
 */


function calculateScrollCanvas(visibleTimeStart, visibleTimeEnd, forceUpdateDimensions, items, groups, props, state) {
  var oldCanvasTimeStart = state.canvasTimeStart;
  var oldZoom = state.visibleTimeEnd - state.visibleTimeStart;
  var newZoom = visibleTimeEnd - visibleTimeStart;
  var newState = {
    visibleTimeStart: visibleTimeStart,
    visibleTimeEnd: visibleTimeEnd // Check if the current canvas covers the new times

  };
  var canKeepCanvas = newZoom === oldZoom && visibleTimeStart >= oldCanvasTimeStart + oldZoom * 0.5 && visibleTimeStart <= oldCanvasTimeStart + oldZoom * 1.5 && visibleTimeEnd >= oldCanvasTimeStart + oldZoom * 1.5 && visibleTimeEnd <= oldCanvasTimeStart + oldZoom * 2.5;

  if (!canKeepCanvas || forceUpdateDimensions) {
    var _getCanvasBoundariesF = getCanvasBoundariesFromVisibleTime(visibleTimeStart, visibleTimeEnd),
        _getCanvasBoundariesF2 = _slicedToArray(_getCanvasBoundariesF, 2),
        canvasTimeStart = _getCanvasBoundariesF2[0],
        canvasTimeEnd = _getCanvasBoundariesF2[1];

    newState.canvasTimeStart = canvasTimeStart;
    newState.canvasTimeEnd = canvasTimeEnd;

    var mergedState = _objectSpread({}, state, {}, newState);

    var canvasWidth = getCanvasWidth(mergedState.width); // The canvas cannot be kept, so calculate the new items position

    Object.assign(newState, stackTimelineItems(items, groups, canvasWidth, mergedState.canvasTimeStart, mergedState.canvasTimeEnd, props.keys, props.lineHeight, props.itemHeightRatio, props.stackItems, mergedState.draggingItem, mergedState.resizingItem, mergedState.dragTime, mergedState.resizingEdge, mergedState.resizeTime, mergedState.newGroupOrder));
  }

  return newState;
}

/***/ }),

/***/ 1562:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *流程管理--列表
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _reactRouterDom = __webpack_require__(32);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SendMailModal = (_dec = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(SendMailModal, _React$Component);

	function SendMailModal(props) {
		_classCallCheck(this, SendMailModal);

		var _this = _possibleConstructorReturn(this, (SendMailModal.__proto__ || Object.getPrototypeOf(SendMailModal)).call(this, props));

		_this.state = {};

		_this.closeModal = function () {
			_this.props.closeModal();
		};

		_this.afterSend = function () {
			_this.props.afterSend();
		};

		_this.sendBuildBusinessEmail = function () {
			_this.props.form.validateFields(function (err, fieldsValue) {
				if (err) {
					return;
				}
				var mailuri = fieldsValue.mailuri;

				var params = [mailuri];
				_this.props.sendBuildBusinessEmail(params);
			});
		};

		_this.sendBuildBusinessEmail2 = function () {
			var businessCard = _this.store.businessCard;

			_this.props.form.validateFields(function (err, fieldsValue) {
				if (err) {
					return;
				}
				var mailuri = fieldsValue.mailuri;


				_this.store.sendBuildBusinessEmail({ 'bc': businessCard, 'emails': [mailuri] }).then(function (res) {
					if (res) {
						_this.afterSend();
					}
				});
			});
		};

		_this.sendBuildBusinessEmail3 = function () {
			var ratingplate = _this.store.ratingplate;

			_this.props.form.validateFields(function (err, fieldsValue) {
				if (err) {
					return;
				}
				var mailuri = fieldsValue.mailuri;

				_this.store.sendNameplateEmail({ 'n': ratingplate, 'emails': [mailuri] }).then(function (res) {
					if (res) {
						_this.afterSend();
					}
				});
			});
		};

		_this.trans = function (type) {
			switch (type) {
				case "businesscard":
					return _this.sendBuildBusinessEmail2;
					break;
				case "ratingplate":
					return _this.sendBuildBusinessEmail3;
					break;
				case "fivecards":
					return _this.sendBuildBusinessEmail;
					break;
				default:
					return null;
					break;
			}
		};

		_this.store = _this.props.store;

		return _this;
	}

	_createClass(SendMailModal, [{
		key: 'componentDidMount',
		value: function componentDidMount() {}

		// 发送邮件

	}, {
		key: 'render',
		value: function render() {
			var _props = this.props,
			    visible = _props.visible,
			    type = _props.type;


			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					sm: { span: 24 }
				},
				wrapperCol: {
					xs: { span: 24 },
					sm: { span: 24 }
				}
			};
			var getFieldDecorator = this.props.form.getFieldDecorator;

			return _react2.default.createElement(
				_antd.Modal,
				{
					visible: visible,
					title: '',
					onCancel: this.closeModal,
					footer: null,
					width: 940,
					bodyStyle: { textAlign: 'center', height: '600px', verticalAlign: 'middle' }
				},
				_react2.default.createElement(
					'div',
					{ style: { marginTop: '50px' } },
					_react2.default.createElement('img', {
						width: '257px',
						height: '192px',
						src: './images/u294.gif' })
				),
				_react2.default.createElement(
					'div',
					{ style: { fontSize: '16px' } },
					_react2.default.createElement(
						_antd.Form,
						formItemLayout,
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '', className: 'edit_form_bold' },
							getFieldDecorator('mailuri', {
								rules: [{
									required: true,
									type: 'email',
									message: '该项是必填并且符合邮箱命名规则'
								}]
							})(_react2.default.createElement(
								'div',
								{ style: { marginTop: '35px', fontSize: '16px', textAlign: 'center' } },
								_react2.default.createElement(
									'span',
									{ style: { color: '#000', fontSize: '14px', fontWeight: '400' } },
									'\u90AE\u7BB1\u5730\u5740:'
								),
								_react2.default.createElement(_antd.Input, { maxLength: 50,
									style: { width: '360px', marginLeft: '5px' },
									placeholder: '\u8BF7\u8F93\u5165(\u4E0D\u8D85\u8FC750\u5B57)'
								}),
								_react2.default.createElement(
									_antd.Button,
									{
										type: 'primary',
										onClick: this.trans(type),
										style: { marginLeft: '5px' }
									},
									'\u53D1\u9001'
								)
							))
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ style: { textAlign: 'left', paddingLeft: '30%' } },
					_react2.default.createElement(
						'p',
						{ style: { marginTop: '5px' } },
						'\u6E29\u99A8\u63D0\u9192\uFF1A\u53D1\u9001\u65F6\u90AE\u4EF6\u5C06\u9ED8\u8BA4\u6284\u9001\u7533\u8BF7\u4EBA\u4E00\u5C01\u3002'
					),
					_react2.default.createElement(
						'p',
						{ style: { marginTop: '15px' } },
						'\u5E38\u7528\u5730\u5740\uFF1A'
					),
					_react2.default.createElement(
						_antd.Row,
						null,
						_react2.default.createElement(
							_antd.Col,
							{ span: 12 },
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u5730\u5740\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'\u5E7F\u8054\u8FBE\u4E8C\u671F133\u7F8E\u7ACB\u7279\u6587\u5370\u5BA4 '
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u7535\u8BDD\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'15234018584'
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u90AE\u7BB1\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'615053062@qq.com'
								)
							)
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12 },
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u5730\u5740\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'\u6C5F\u9634\u5E02\u65B0\u57CE\u4E1C\u4E5D\u6708\u5E7F\u544A\u56FE\u6587'
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u7535\u8BDD\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'15961679730'
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u90AE\u7BB1\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'27697090@qq.com'
								)
							)
						)
					)
				)
			);
		}
	}]);

	return SendMailModal;
}(_react2.default.Component)) || _class) || _class) || _class);


var WrappedSendMailModalForm = _antd.Form.create({})(SendMailModal);
exports.default = WrappedSendMailModalForm;

/***/ }),

/***/ 1564:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*
                                                                                                                                                                                                                                                                  * 大文件上传组件 antd upload 支持拖拽排序
                                                                                                                                                                                                                                                                  * dangwei
                                                                                                                                                                                                                                                                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _mobxReact = __webpack_require__(22);

var _reactSortableHoc = __webpack_require__(705);

var _UploadList = __webpack_require__(707);

var _UploadList2 = _interopRequireDefault(_UploadList);

__webpack_require__(728);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ifcancel = false;
var abortCheckpoint = void 0;

var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT,
		timeout: 5 * 60 * 1000
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file, option) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file, option).then(function (data) {
			resolve(data);
		}).catch(function (error) {
			reject(error);
		});
	});
};

var itemStyle = {
	width: 104,
	height: 104,
	margin: 4,
	cursor: 'grab',
	zIndex: '1000'
};
var SortableItem = (0, _reactSortableHoc.SortableElement)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: itemStyle, className: 'affairs_upload' },
		_react2.default.createElement(_UploadList2.default
		// locale={{previewFile: '预览', removeFile: '删除', downloadFile: "下载"}}
		, { locale: { previewFile: '预览', removeFile: '删除' },
			listType: params.props.listType,
			onPreview: params.onPreview,
			onDownload: params.onDownload,
			onRemove: params.onRemove,
			items: [params.item],
			showDownloadIcon: false,
			showPreviewIcon: false

		})
	);
});
var listStyle = {
	display: 'flex',
	flexWrap: 'wrap',
	maxWidth: '100%'
};
var SortableList = (0, _reactSortableHoc.SortableContainer)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: listStyle },
		params.items.map(function (item, index) {
			return _react2.default.createElement(SortableItem, {
				key: '' + item.uid,
				index: index,
				item: item,
				props: params.props,
				onPreview: params.props.onPreview,
				onDownload: params.props.onDownload,
				onRemove: params.props.onRemove
			});
		}),
		_react2.default.createElement(
			_antd.Upload,
			_extends({}, params.props, {
				className: 'affairs_upload_normal',
				showUploadList: false
			}),
			params.uploadButton
		),
		params.cancelButton
	);
});

var MyUpload4Affairs = (_dec = (0, _mobxReact.inject)('appStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MyUpload4Affairs, _React$Component);

	function MyUpload4Affairs(props) {
		var _this2 = this;

		_classCallCheck(this, MyUpload4Affairs);

		var _this = _possibleConstructorReturn(this, (MyUpload4Affairs.__proto__ || Object.getPrototypeOf(MyUpload4Affairs)).call(this, props));

		_this.init = function () {
			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this.state.token));
					_this.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						}),
						expiration: str.expiration
					});
				}
			});
		};

		_this.cancelUploadFileToAliyun = function (params) {
			(0, _api.requestPost)('cancelUploadFileToAliyun', _config2.default.journal.cancelUploadFileToAliyun, _journal2.default.journal.cancelUploadFileToAliyun, { uploadId: params.uploadId, key: params.name }).then(function (res) {
				if (res == true) {
					_antd.message.success("取消上传成功");
				}
			});
		};

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				url: url,
				fileId: null,
				fileName: file.name,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		};

		_this.beforeUpload = function (file) {

			// 上传凭证失效，重查
			var expiration = _this.state.expiration;

			var expire = new Date(expiration).getTime();
			if (expiration != "" && expire < Date.now()) {
				_this.init();
			}

			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}

			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}

			_this.setState({
				loading: true
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = true; // 记录一次
				}
			});

			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file, {
					parallel: 4,
					partSize: 1024 * 1024,
					progress: function progress(p, cpt, res) {
						abortCheckpoint = cpt;
						//console.log(p, cpt, res, '进度');
					}
				}).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {

					if (error.name === 'abort') {
						// handle abort

					} else {
						//message.error("文件上传失败");
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});
						return false;
					}
				});
			};

			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.cancel = function () {
			ifcancel = true;
			var _abortCheckpoint = abortCheckpoint,
			    uploadId = _abortCheckpoint.uploadId,
			    name = _abortCheckpoint.name;

			client(_this).cancel();
			if (abortCheckpoint && uploadId != undefined) {
				_this.cancelUploadFileToAliyun({ name: name, uploadId: uploadId });
			}
			_this.setState({
				loading: false
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = false; // 清楚记录
				}
			});
		};

		_this.onSortEnd = function (_ref2) {
			var oldIndex = _ref2.oldIndex,
			    newIndex = _ref2.newIndex;
			var fileList = _this.state.fileList;

			_this.props.saveAttachment((0, _reactSortableHoc.arrayMove)(fileList, oldIndex, newIndex));
		};

		_this.onRemove = function (file) {
			var fileList = _this.state.fileList;

			var newFileList = fileList.filter(function (item) {
				return item.uid !== file.uid;
			});
			_this.props.saveAttachment(newFileList);
		};

		_this.store = _this.props.appStore;
		_this.state = {
			fileList: _this.props.fileList,
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0,
			expiration: "" // 过期时间
		};
		return _this;
	}

	_createClass(MyUpload4Affairs, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (this.props.journalType) {
				this.store.journal = false; // 记录一次
			}
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
						}
						return file;
					})
				});
			}

			// 访问后端，获取请求上传凭证
			this.init();
		}

		// 取消阿里云上传


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "picture-card",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				onRemove: this.onRemove

			};
			var uploadButton = _react2.default.createElement(
				'div',
				{ className: 'pr' },
				_react2.default.createElement(_antd.Icon, { type: loading ? "loading" : "plus" }),
				loading ? _react2.default.createElement(
					'div',
					{ className: 'ant-upload-text' },
					'\u4E0A\u4F20\u4E2D'
				) : null
			);
			var cancelButton = loading ? _react2.default.createElement(_antd.Icon, { type: 'stop',
				title: '\u53D6\u6D88\u4E0A\u4F20',
				style: {
					fontSize: '15px',
					color: '#1890ff'
				},
				onClick: this.cancel }) : null;
			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(SortableList, {
					distance: 1,
					items: fileList,
					onSortEnd: this.onSortEnd,
					axis: 'xy',
					helperClass: 'SortableHelper',
					props: props,
					uploadButton: disabled ? "" : uploadButton,
					cancelButton: cancelButton
				}),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage,
						alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this3.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUpload4Affairs;
}(_react2.default.Component)) || _class) || _class);
exports.default = MyUpload4Affairs;

/***/ }),

/***/ 1575:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var defvalues = {
  header: {
    top: {
      style: {
        backgroundColor: '#333333',
        fontSize: 10,
        color: 'white',
        textAlign: 'center'
      }
    },
    middle: {
      style: {
        backgroundColor: 'chocolate'
      },
      selectedStyle: {
        backgroundColor: '#b13525',
        fontWeight: 'bold'
      }
    },
    bottom: {
      style: {
        background: 'grey',
        color: 'white',
        fontSize: 9
      },
      selectedStyle: {
        backgroundColor: '#b13525',
        fontWeight: 'bold'
      }
    }
  },
  taskList: {
    title: {
      label: 'Projects',
      style: {
        backgroundColor: '#333333',
        borderBottom: 'solid 1px silver',
        color: 'white',
        textAlign: 'center'
      }
    },
    task: {
      style: {
        backgroundColor: '#fbf9f9'
      }
    },
    verticalSeparator: {
      style: {
        backgroundColor: '#333333'
      },
      grip: {
        style: {
          backgroundColor: '#cfcfcd'
        }
      }
    }
  },
  dataViewPort: {
    rows: {
      style: {
        backgroundColor: '#fbf9f9',
        borderBottom: 'solid 0.5px #cfcfcd'
      }
    },
    task: {
      showLabel: false,

      style: {
        position: 'absolute',
        borderRadius: 14,
        color: 'white',
        textAlign: 'center',
        backgroundColor: 'grey'
      },
      selectedStyle: {
        position: 'absolute',
        borderRadius: 14,
        border: 'solid 1px #ff00fa',
        color: 'white',
        textAlign: 'center',
        backgroundColor: 'grey'
      }
    }
  },
  links: {
    color: 'black',
    selectedColor: '#ff00fa'
  }
};

var Config = function () {
  function Config() {
    var _this = this;

    _classCallCheck(this, Config);

    this.load = function (values) {
      _this.data = {};
      if (values) _this.populate(values, defvalues, _this.data);else _this.data = defvalues;
    };

    this.data = defvalues;
  }

  _createClass(Config, [{
    key: 'populate',
    value: function populate(values, defvalues, final) {
      if (!this.isObject(defvalues)) return;
      for (var key in defvalues) {
        if (!values[key]) {
          //if not exits
          final[key] = defvalues[key];
        } else {
          //if it does
          final[key] = values[key];
          this.populate(values[key], defvalues[key], final[key]);
        }
      }
    }
  }, {
    key: 'isObject',
    value: function isObject(value) {
      if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') return false;
      return true;
    }
  }, {
    key: 'values',
    get: function get() {
      return this.data;
    }
  }]);

  return Config;
}();

var config = new Config();
exports.default = config;

/***/ }),

/***/ 1583:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports._get = _get;
exports._length = _length;
exports.arraysEqual = arraysEqual;
exports.deepObjectCompare = deepObjectCompare;
exports.keyBy = keyBy;
exports.noop = noop;

var _lodash = _interopRequireDefault(__webpack_require__(752));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

// so we could use both immutable.js objects and regular objects
function _get(object, key) {
  return typeof object.get === 'function' ? object.get(key) : object[key];
}

function _length(object) {
  return typeof object.count === 'function' ? object.count() : object.length;
}

function arraysEqual(array1, array2) {
  return _length(array1) === _length(array2) && array1.every(function (element, index) {
    return element === _get(array2, index);
  });
}

function deepObjectCompare(obj1, obj2) {
  return (0, _lodash["default"])(obj1, obj2);
}

function keyBy(value, key) {
  var obj = {};
  value.forEach(function (element) {
    obj[element[key]] = element;
  });
  return obj;
}

function noop() {}

/***/ }),

/***/ 1585:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var MIL_IN_HOUR = 1000 * 3600;

var DateHelper = function () {
  function DateHelper() {
    var _this = this;

    _classCallCheck(this, DateHelper);

    this.dayToPosition = function (day, now, dayWidth) {
      return day * dayWidth + now;
    };

    this.daysInYear = function (year) {
      return _this.isLeapYear(year) ? 366 : 365;
    };
  }

  _createClass(DateHelper, [{
    key: "dateToPixel",
    value: function dateToPixel(input, nowposition, daywidth) {
      var nowDate = this.getToday(); //
      var inputTime = new Date(input);

      //Day light saving patch
      var lightSavingDiff = (inputTime.getTimezoneOffset() - nowDate.getTimezoneOffset()) * 60 * 1000;
      var timeDiff = inputTime.getTime() - nowDate.getTime() - lightSavingDiff;
      var pixelWeight = daywidth / 24; //Value in pixels of one hour
      return timeDiff / MIL_IN_HOUR * pixelWeight + nowposition;
    }
  }, {
    key: "pixelToDate",
    value: function pixelToDate(position, nowposition, daywidth) {
      var hoursInPixel = 24 / daywidth;
      var pixelsFromNow = position - nowposition;
      var today = this.getToday();
      var milisecondsFromNow = today.getTime() + pixelsFromNow * hoursInPixel * MIL_IN_HOUR;
      var result = new Date(milisecondsFromNow);
      var lightSavingDiff = (result.getTimezoneOffset() - today.getTimezoneOffset()) * 60 * 1000;
      result.setTime(result.getTime() + lightSavingDiff);
      return result;
    }
  }, {
    key: "getToday",
    value: function getToday() {
      var date = new Date();
      date.setHours(0, 0, 0, 0);
      return date;
    }
  }, {
    key: "monthDiff",
    value: function monthDiff(start, end) {
      return Math.abs(end.getMonth() - start.getMonth() + 12 * (end.getFullYear() - start.getFullYear()));
    }
  }, {
    key: "daysInMonth",
    value: function daysInMonth(month, year) {
      return new Date(year, month, 0).getDate();
    }
  }, {
    key: "isLeapYear",
    value: function isLeapYear(year) {
      return year % 400 === 0 || year % 100 !== 0 && year % 4 === 0;
    }
  }]);

  return DateHelper;
}();

var helper = new DateHelper();
exports.default = helper;

/***/ }),

/***/ 1588:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(1626);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./pictureGrid.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./pictureGrid.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 1589:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimelineStateConsumer = exports.TimelineStateProvider = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _createReactContext2 = _interopRequireDefault(__webpack_require__(1662));

var _calendar = __webpack_require__(1549);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/* this context will hold all information regarding timeline state:
  1. timeline width
  2. visible time start and end
  3. canvas time start and end
  4. helpers for calculating left offset of items (and really...anything)
*/

/* eslint-disable no-console */
var defaultContextState = {
  getTimelineState: function getTimelineState() {
    console.warn('"getTimelineState" default func is being used');
  },
  getLeftOffsetFromDate: function getLeftOffsetFromDate() {
    console.warn('"getLeftOffsetFromDate" default func is being used');
  },
  getDateFromLeftOffsetPosition: function getDateFromLeftOffsetPosition() {
    console.warn('"getDateFromLeftOffsetPosition" default func is being used');
  },
  showPeriod: function showPeriod() {
    console.warn('"showPeriod" default func is being used');
  }
  /* eslint-enable */

};

var _createReactContext = (0, _createReactContext2["default"])(defaultContextState),
    Consumer = _createReactContext.Consumer,
    Provider = _createReactContext.Provider;

var TimelineStateProvider =
/*#__PURE__*/
function (_React$Component) {
  _inherits(TimelineStateProvider, _React$Component);

  /* eslint-disable react/no-unused-prop-types */
  function TimelineStateProvider(props) {
    var _this;

    _classCallCheck(this, TimelineStateProvider);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(TimelineStateProvider).call(this, props));

    _defineProperty(_assertThisInitialized(_this), "getTimelineState", function () {
      var _this$props = _this.props,
          visibleTimeStart = _this$props.visibleTimeStart,
          visibleTimeEnd = _this$props.visibleTimeEnd,
          canvasTimeStart = _this$props.canvasTimeStart,
          canvasTimeEnd = _this$props.canvasTimeEnd,
          canvasWidth = _this$props.canvasWidth,
          timelineUnit = _this$props.timelineUnit,
          timelineWidth = _this$props.timelineWidth;
      return {
        visibleTimeStart: visibleTimeStart,
        visibleTimeEnd: visibleTimeEnd,
        canvasTimeStart: canvasTimeStart,
        canvasTimeEnd: canvasTimeEnd,
        canvasWidth: canvasWidth,
        timelineUnit: timelineUnit,
        timelineWidth: timelineWidth // REVIEW,

      };
    });

    _defineProperty(_assertThisInitialized(_this), "getLeftOffsetFromDate", function (date) {
      var _this$props2 = _this.props,
          canvasTimeStart = _this$props2.canvasTimeStart,
          canvasTimeEnd = _this$props2.canvasTimeEnd,
          canvasWidth = _this$props2.canvasWidth;
      return (0, _calendar.calculateXPositionForTime)(canvasTimeStart, canvasTimeEnd, canvasWidth, date);
    });

    _defineProperty(_assertThisInitialized(_this), "getDateFromLeftOffsetPosition", function (leftOffset) {
      var _this$props3 = _this.props,
          canvasTimeStart = _this$props3.canvasTimeStart,
          canvasTimeEnd = _this$props3.canvasTimeEnd,
          canvasWidth = _this$props3.canvasWidth;
      return (0, _calendar.calculateTimeForXPosition)(canvasTimeStart, canvasTimeEnd, canvasWidth, leftOffset);
    });

    _this.state = {
      timelineContext: {
        getTimelineState: _this.getTimelineState,
        getLeftOffsetFromDate: _this.getLeftOffsetFromDate,
        getDateFromLeftOffsetPosition: _this.getDateFromLeftOffsetPosition,
        showPeriod: _this.props.showPeriod
      }
    };
    return _this;
  }

  _createClass(TimelineStateProvider, [{
    key: "render",
    value: function render() {
      return _react["default"].createElement(Provider, {
        value: this.state.timelineContext
      }, this.props.children);
    }
  }]);

  return TimelineStateProvider;
}(_react["default"].Component);

exports.TimelineStateProvider = TimelineStateProvider;

_defineProperty(TimelineStateProvider, "propTypes", {
  children: _propTypes["default"].element.isRequired,
  visibleTimeStart: _propTypes["default"].number.isRequired,
  visibleTimeEnd: _propTypes["default"].number.isRequired,
  canvasTimeStart: _propTypes["default"].number.isRequired,
  canvasTimeEnd: _propTypes["default"].number.isRequired,
  canvasWidth: _propTypes["default"].number.isRequired,
  showPeriod: _propTypes["default"].func.isRequired,
  timelineUnit: _propTypes["default"].string.isRequired,
  timelineWidth: _propTypes["default"].number.isRequired
});

var TimelineStateConsumer = Consumer;
exports.TimelineStateConsumer = TimelineStateConsumer;

/***/ }),

/***/ 1618:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 采购合同组件
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _download = __webpack_require__(68);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Index = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Index, _React$Component);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this.handlePreview = function () {
			var data = _this.props.data;
			var fileUrl = data.fileUrl,
			    name = data.name;

			if (fileUrl == "" || fileUrl == null) return;
			_this.store.getDocumentUrl({ url: fileUrl }).then(function (res) {
				if (res) {
					_this.setState({
						previewImage: res,
						previewVisible: true,
						name: name
					});
				}
			});
		};

		_this.downloadUrl = function () {
			var data = _this.props.data;
			var fileUrl = data.fileUrl,
			    name = data.name;

			if (fileUrl == "" || fileUrl == null) return;
			_this.info();
			(0, _download.downloadFile)(fileUrl, name);
		};

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.info = function () {
			_antd.Modal.info({
				title: '文件正在下载中，请耐心等待',
				onOk: function onOk() {}
			});
		};

		_this.store = _this.props.store;
		_this.state = {
			previewVisible: false,
			previewImage: ''
		};
		return _this;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}

		// 预览


		// 下载

	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    name = _state.name;
			var data = this.props.data;


			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement('img', { src: './images/share_word.png', alt: '', width: '85px', style: { verticalAlign: "top" } }),
				_react2.default.createElement(
					'p',
					{ style: { display: "inline-block", margin: "15px 0 0 10px" } },
					_react2.default.createElement(
						'div',
						null,
						data && data.name,
						_react2.default.createElement(
							_antd.Button,
							{ type: 'link', onClick: this.handlePreview },
							'\u9884\u89C8'
						),
						_react2.default.createElement(
							_antd.Button,
							{ type: 'link', onClick: this.downloadUrl },
							'\u4E0B\u8F7D'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt15' },
						data && data.createTime !== 0 && data.createTime !== null && data.createTime !== undefined ? (0, _moment2.default)(data.createTime).format('YYYY-MM-DD HH:mm') : '暂无',
						'\xA0\xA0\u751F\u6210'
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: name,
						width: '65%',
						style: { minHeight: '500px', minWidth: '800px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					_react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '500px' },
						frameBorder: '1' })
				)
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class;

exports.default = Index;

/***/ }),

/***/ 1619:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var MODE_NONE = exports.MODE_NONE = 0;
var MODE_MOVE = exports.MODE_MOVE = 1;
var MOVE_RESIZE_LEFT = exports.MOVE_RESIZE_LEFT = 2;
var MOVE_RESIZE_RIGHT = exports.MOVE_RESIZE_RIGHT = 3;

var BUFFER_DAYS = exports.BUFFER_DAYS = 100;

var DATA_CONTAINER_WIDTH = exports.DATA_CONTAINER_WIDTH = 5000;

var VIEW_MODE_DAY = exports.VIEW_MODE_DAY = 'day';
var VIEW_MODE_WEEK = exports.VIEW_MODE_WEEK = 'week';
var VIEW_MODE_MONTH = exports.VIEW_MODE_MONTH = 'month';
var VIEW_MODE_YEAR = exports.VIEW_MODE_YEAR = 'year';

var DAY_YEAR_MODE = exports.DAY_YEAR_MODE = 4;
var DAY_MONTH_MODE = exports.DAY_MONTH_MODE = 24;
var DAY_WEEK_MODE = exports.DAY_WEEK_MODE = 480; //each hour 20 px
var HOUR_DAY_WEEK = exports.HOUR_DAY_WEEK = 20;
var DAY_DAY_MODE = exports.DAY_DAY_MODE = 1440; //each hour 60 px
var HOUR_DAY_DAY = exports.HOUR_DAY_DAY = 60;

/***/ }),

/***/ 1626:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, "/* 拖动的时候的样式 */\r\n.SortableHelper {\r\n  box-shadow: rgba(0, 0, 0, 0.075) 0 1px 6px, rgba(0, 0, 0, 0.075) 0 1px 4px;\r\n  background-color: lightgreen;\r\n}\r\n", ""]);

// exports


/***/ }),

/***/ 1648:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimelineMarkersConsumer = exports.TimelineMarkersProvider = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _createReactContext2 = _interopRequireDefault(__webpack_require__(1662));

var _generic = __webpack_require__(1583);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var defaultContextState = {
  markers: [],
  subscribeMarker: function subscribeMarker() {
    // eslint-disable-next-line
    console.warn('default subscribe marker used');
    return _generic.noop;
  }
};

var _createReactContext = (0, _createReactContext2["default"])(defaultContextState),
    Consumer = _createReactContext.Consumer,
    Provider = _createReactContext.Provider; // REVIEW: is this the best way to manage ids?


var _id = 0;

var createId = function createId() {
  _id += 1;
  return _id + 1;
};

var TimelineMarkersProvider =
/*#__PURE__*/
function (_React$Component) {
  _inherits(TimelineMarkersProvider, _React$Component);

  function TimelineMarkersProvider() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, TimelineMarkersProvider);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TimelineMarkersProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "handleSubscribeToMarker", function (newMarker) {
      newMarker = _objectSpread({}, newMarker, {
        // REVIEW: in the event that we accept id to be passed to the Marker components, this line would override those
        id: createId()
      });

      _this.setState(function (state) {
        return {
          markers: [].concat(_toConsumableArray(state.markers), [newMarker])
        };
      });

      return {
        unsubscribe: function unsubscribe() {
          _this.setState(function (state) {
            return {
              markers: state.markers.filter(function (marker) {
                return marker.id !== newMarker.id;
              })
            };
          });
        },
        getMarker: function getMarker() {
          return newMarker;
        }
      };
    });

    _defineProperty(_assertThisInitialized(_this), "handleUpdateMarker", function (updateMarker) {
      var markerIndex = _this.state.markers.findIndex(function (marker) {
        return marker.id === updateMarker.id;
      });

      if (markerIndex < 0) return;

      _this.setState(function (state) {
        return {
          markers: [].concat(_toConsumableArray(state.markers.slice(0, markerIndex)), [updateMarker], _toConsumableArray(state.markers.slice(markerIndex + 1)))
        };
      });
    });

    _defineProperty(_assertThisInitialized(_this), "state", {
      markers: [],
      subscribeMarker: _this.handleSubscribeToMarker,
      updateMarker: _this.handleUpdateMarker
    });

    return _this;
  }

  _createClass(TimelineMarkersProvider, [{
    key: "render",
    value: function render() {
      return _react["default"].createElement(Provider, {
        value: this.state
      }, this.props.children);
    }
  }]);

  return TimelineMarkersProvider;
}(_react["default"].Component);

exports.TimelineMarkersProvider = TimelineMarkersProvider;

_defineProperty(TimelineMarkersProvider, "propTypes", {
  children: _propTypes["default"].element.isRequired
});

var TimelineMarkersConsumer = Consumer;
exports.TimelineMarkersConsumer = TimelineMarkersConsumer;

/***/ }),

/***/ 1656:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(942);

/***/ }),

/***/ 1658:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _lodash = __webpack_require__(231);

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var Option = _antd.Select.Option;

var dateFormat = 'YYYY-MM-DD';

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: [],
			detailWorks: [] // 施工任务数据
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				//this.toggleEdit();
				delete values["beginTime"];
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.onBlur = function () {
			//this.toggleEdit();
		}, _this2.handlePositionChange = function (value) {
			var record = _this2.props.record;

			_this2.props.getProductCategoryList(record, value);
		}, _this2.handleProductCategoryChange = function (value) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			_this2.props.getProductDetailList(value, record);
		}, _this2.handleProductDetailChange = function (value) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;
			var detailWorks = _this2.state.detailWorks;

			var selectedDetailItem = Array.isArray(detailWorks) ? detailWorks.filter(function (item) {
				return item.productDetailId === value;
			}) : [];

			if (selectedDetailItem.length > 0) {
				handleSave(Object.assign(record, { "planBeginTime": selectedDetailItem[0].planBeginTime, "planEndTime": selectedDetailItem[0].planEndTime, "productDetail": selectedDetailItem[0].productDetail, "productDetailId": selectedDetailItem[0].productDetailId, "palnProgress": selectedDetailItem[0].palnProgress, "actualProgress": selectedDetailItem[0].actualProgress }));
			} else {
				handleSave(Object.assign(record, { "planBeginTime": 0, "planEndTime": 0, "productDetail": value, "productDetailId": "", "palnProgress": 0, "actualProgress": 0 }));
			}
		}, _this2.handleNumberActualProgressSave = function (e) {
			var _this2$props4 = _this2.props,
			    record = _this2$props4.record,
			    handleSave = _this2$props4.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error) {
					return;
				}
				handleSave(Object.assign(record, { "actualProgress": values.actualProgress }));
			});
		}, _this2.handleNumberPalnProgressSave = function (e) {
			var _this2$props5 = _this2.props,
			    record = _this2$props5.record,
			    handleSave = _this2$props5.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error) {
					return;
				}
				handleSave(Object.assign(record, { "palnProgress": values.palnProgress }));
			});
		}, _this2.handleDateTime = function (date) {
			var _this2$props6 = _this2.props,
			    record = _this2$props6.record,
			    handleSave = _this2$props6.handleSave;

			handleSave(Object.assign(record, { "actualBeginTime": date.valueOf() }));
		}, _this2.renderOption = function (item) {
			return _react2.default.createElement(
				Option,
				{ key: item.id, text: item.name },
				item.name
			);
		}, _this2.renderOption2 = function (item) {
			return _react2.default.createElement(
				Option,
				{ key: item.productDetailId, text: item.productDetailId },
				item.productDetail
			);
		}, _this2.onFocus = function () {
			var _this2$props7 = _this2.props,
			    record = _this2$props7.record,
			    getDetailWorkByPostionId = _this2$props7.getDetailWorkByPostionId;

			getDetailWorkByPostionId(record["positionId"]).then(function (res) {
				_this2.setState({
					detailWorks: Array.isArray(res) ? res : []
				});
			});
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props8 = _this2.props,
			    children = _this2$props8.children,
			    dataIndex = _this2$props8.dataIndex,
			    record = _this2$props8.record,
			    title = _this2$props8.title,
			    handleDelete = _this2$props8.handleDelete,
			    positionList = _this2$props8.positionList,
			    dailyDate = _this2$props8.dailyDate,
			    tableType = _this2$props8.tableType;
			var _this2$state = _this2.state,
			    editing = _this2$state.editing,
			    detailWorks = _this2$state.detailWorks;

			if (dataIndex == 'position') {
				// 部位
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: tableType === "today" ? true : false,
							message: '\u697C\u680B\u662F\u5FC5\u8F93'
						}],
						initialValue: record['positionId'] == null ? undefined : record['positionId'] === '' ? record['position'] : record['positionId']
					})(_react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
									return handleDelete(record);
								} },
							_react2.default.createElement(_antd.Icon, {
								style: {
									width: '30px',
									color: '#F17E7E',
									fontSize: '15px'
								},
								type: 'minus-circle' })
						),
						_react2.default.createElement(_antd.AutoComplete, {
							defaultValue: record[dataIndex],
							dataSource: positionList.map(_this2.renderOption),
							placeholder: '选择或输入',
							style: { width: "140px" },
							onChange: _this2.handlePositionChange
						})
					))
				) : _react2.default.createElement(
					'div',
					{ className: 'w clearfix' },
					_react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return handleDelete(record);
							} },
						_react2.default.createElement(_antd.Icon, {
							style: {
								width: '35px',
								color: '#F17E7E',
								fontSize: '22px',
								float: 'left'
							},
							type: 'minus-circle' })
					),
					_react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: {
								float: 'right',
								width: 'calc(100% - 35px)',
								minHeight: '31px'
							},
							onClick: _this2.toggleEdit
						},
						children
					)
				);
			} else if (dataIndex == 'productCategory') {
				// 相同列
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: tableType === "today" ? true : false,
							message: '\u4EA7\u54C1\u7C7B\u522B\u662F\u5FC5\u8F93'
						}],
						initialValue: record['productCategoryId'] == null ? undefined : record['productCategoryId'] == "" ? record['productCategory'] : record['productCategoryId']
					})(_react2.default.createElement(_antd.AutoComplete, {
						defaultValue: record[dataIndex],
						dataSource: Array.isArray(record['productCategoryList']) ? record['productCategoryList'].map(_this2.renderOption) : [],
						placeholder: '选择或输入',
						style: { width: "140px" },
						onChange: _this2.handleProductCategoryChange
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'productDetail') {
				// 施工任务
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: tableType === "today" ? true : false,
							message: '\u65BD\u5DE5\u4EFB\u52A1\u662F\u5FC5\u8F93'
						}],
						initialValue: record['productDetail']
						//initialValue: record['productDetailId'] == null ? undefined : record['productDetailId'] == ""?record['productDetail']:record['productDetailId'],
					})(_react2.default.createElement(
						'div',
						null,
						_react2.default.createElement(_antd.AutoComplete, {
							value: record['productDetail'],
							disabled: record["position"] == "" || record["position"] == null ? true : false,
							onFocus: _this2.onFocus
							//dataSource={Array.isArray(record['productDetailList'])?record['productDetailList'].map(this.renderOption2):[]}
							, dataSource: Array.isArray(detailWorks) ? detailWorks.map(_this2.renderOption2) : [],
							placeholder: '选择或输入',
							style: { width: "140px" },
							onChange: _this2.handleProductDetailChange
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'planBeginTime' || dataIndex == 'planEndTime') {
				// 相同列
				return editing && false ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { minHeight: '31px' }
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : (0, _moment2.default)(record[dataIndex]).format(dateFormat)
				);
			} else if (dataIndex == 'actualBeginTime') {
				// 相同列
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: tableType === "today" ? true : false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? (0, _moment2.default)() : (0, _moment2.default)(record[dataIndex])
					})(_react2.default.createElement(_antd.DatePicker, {
						style: { width: '122px' },
						placeholder: '\u8BF7\u9009\u62E9',
						format: 'YYYY-MM-DD',
						onChange: _this2.handleDateTime
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { minHeight: '31px' }
					},
					record[dataIndex] == null || record[dataIndex] == 0 ? dailyDate : (0, _moment2.default)(record[dataIndex]).format(dateFormat)
				);
			} else if (dataIndex == 'actualProgress') {
				// 实际完成比例
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: tableType === "today" ? true : false,
							message: '\u5B9E\u9645\u5B8C\u6210\u8FDB\u5EA6\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ style: { display: "inline-block" } },
						_react2.default.createElement(_antd.InputNumber, {
							min: 0,
							max: 100,
							ref: function ref(node) {
								return _this2.input = node;
							},
							onPressEnter: _this2.handleNumberActualProgressSave,
							onBlur: _this2.handleNumberActualProgressSave,
							value: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
						})
					)),
					' %'
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					children,
					'%'
				);
			} else if (dataIndex == 'palnProgress') {
				// 计划完成比例
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ style: { display: "inline-block" } },
						_react2.default.createElement(_antd.InputNumber, {
							min: 0,
							max: 100,
							ref: function ref(node) {
								return _this2.input = node;
							},
							onPressEnter: _this2.handleNumberPalnProgressSave,
							onBlur: _this2.handleNumberPalnProgressSave,
							value: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
						})
					)),
					' %'
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					children,
					'%'
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
					})(_react2.default.createElement(_antd.InputNumber, {
						min: 0,
						max: 100
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					children,
					'%'
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTable = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTable, _React$Component2);

	function EditableTable(props) {
		_classCallCheck(this, EditableTable);

		var _this3 = _possibleConstructorReturn(this, (EditableTable.__proto__ || Object.getPrototypeOf(EditableTable)).call(this, props));

		_this3.getPositionList = function () {
			var hash = window.location.hash;
			var projectId = hash.split("projectId=")[1];
			if (projectId === undefined) {
				return;
			} else {
				_this3.store.getDailyObjList({
					"dailyId": projectId,
					"type": 0
				}).then(function (res) {
					_this3.store.positionList = res;
				});
			}
		};

		_this3.getProductCategoryList = function (record, value) {
			var positionList = _this3.store.positionList;

			var selectedItem = positionList.filter(function (item) {
				return item.id === value;
			});
			if (selectedItem.length > 0) {
				_this3.store.getDailyObjList({
					"dailyId": value,
					"type": 1
				}).then(function (res) {
					_this3.store.productCategoryList = res;
					if (record["positionId"] == selectedItem[0].id) {
						_this3.handleSave(Object.assign(record, { "position": selectedItem[0].name, "positionId": selectedItem[0].id, "productCategoryList": res }));
					} else {
						// 切换清空
						_this3.handleSave(Object.assign(record, { "position": selectedItem[0].name, "positionId": selectedItem[0].id, "productCategoryList": res,
							productDetail: "", planBeginTime: null, planEndTime: null, palnProgress: 0, actualProgress: 0
						}));
					}
				});
			} else {
				_this3.handleSave(Object.assign(record, { "position": value, "positionId": "", "productCategoryList": [] }));
			}
		};

		_this3.getProductDetailList = function (value, record) {
			var projectDetail = _this3.store.projectDetail;

			_this3.store.getDailyContentDetailList({
				"dailyId": value,
				"type": record['type'] === 1 ? 0 : 1 //record 中的type 1 表示今日，这的type0，表示今日，1是明日...
			}).then(function (res) {
				if (res.length > 0) {
					var selectedItem = record['productCategoryList'].filter(function (item) {
						return item.id === value;
					});
					_this3.handleSave(Object.assign(record, { "productCategory": selectedItem[0].name, "productCategoryId": selectedItem[0].id, "productDetailList": res }));
					if (record['type'] === 1) {
						_this3.store.getDailyMaterialList({ "dailyId": projectDetail.id, "dcs": res }).then(function (res) {
							_this3.store.dailyMaterialList = res;
						});
					}
				} else {
					_this3.handleSave(Object.assign(record, { "productCategory": value, "productCategoryId": "", "productDetailList": [] }));
				}
			});
		};

		_this3.handleDelete = function (record) {
			var id = record.id,
			    key = record.key;

			var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
			_this3.setState({
				dataSource: dataSource.filter(function (item) {
					return item.key !== key;
				})
			}, function () {
				_this3.props.saveData(_this3.state.dataSource, key);
			});
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;
			// const newData = Object.assign(primaryData, {key: count, id:"!"+uuidv4()});

			var newData = Object.assign(primaryData, { key: count });
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onCalac = function (key) {
			_this3.saveExpandedRows(key);
			_this3.store.isEdit = false;
			// 更新tree
			var treeData = JSON.parse(JSON.stringify(_this3.store.treeData));
			_this3.store.treeData = utils.updateTreeData(treeData, "update", _this3.state.activeObj);
			_this3.subtask.clearState();
			_this3.setState({
				activeObj: Object.assign({})
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.getDetailWorkByPostionId = function (param) {
			var dailyDate = _this3.props.dailyDate;

			var params = {
				positionId: param,
				dateTime: dailyDate == null || dailyDate == "" ? 0 : (0, _moment2.default)(dailyDate).valueOf()
			};
			return _this3.store.getDetailWorkByPostionId(params);
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"position": "",
				"positionId": "",
				"productCategory": "",
				"productDetail": "",
				"specifications": "",
				"unit": "",
				"palnProgress": 0,
				"actualProgress": 0,
				"type": _this3.props.tableType === 'today' ? 1 : 0
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTable, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"position": "",
						"positionId": "",
						"productCategory": "",
						"productDetail": "",
						"specifications": "",
						"unit": "",
						"palnProgress": 0,
						"actualProgress": 0,
						"type": this.props.tableType === 'today' ? 1 : 0
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"position": "",
					"positionId": "",
					"productCategory": "",
					"productDetail": "",
					"specifications": "",
					"unit": "",
					"palnProgress": 0,
					"actualProgress": 0,
					"type": this.props.tableType === 'today' ? 1 : 0
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
			this.getPositionList();
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		// 折叠效果


		// 查看


		// 取消保存


		// 点击


		// 更新施工任务数据

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys;
			var _props2 = this.props,
			    disabled = _props2.disabled,
			    tableType = _props2.tableType,
			    dailyDate = _props2.dailyDate;
			var _store = this.store,
			    positionList = _store.positionList,
			    productCategoryList = _store.productCategoryList,
			    productDetailList = _store.productDetailList;

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: _react2.default.createElement(
					'span',
					null,
					_react2.default.createElement(
						'span',
						null,
						'\u697C\u680B'
					),
					_react2.default.createElement(
						'span',
						{ style: tableType === "today" ? { color: "red" } : { display: "none" } },
						'*'
					)
				),
				dataIndex: 'position',
				width: '14%',
				align: "left",
				editable: !disabled
				/*render: (text, record) => {
    	return (<div
    		id={`${record.id}`}
    		onClick={this.onRow.bind(this, record)}
    		style={{width: '100%', height: '46px', lineHeight: '46px'}}
    		className="pr">
    		{text}
    	</div>);
    }*/
			},
			/*{
   	title: (<span><span>产品类别</span><span style={tableType==="today"?{color:"red"}:{display:"none"}}>*</span></span>),
   	dataIndex: 'productCategory',
   	width: '14%',
   	align: "center",
   	editable: !disabled,
   },*/
			{
				title: _react2.default.createElement(
					'span',
					null,
					_react2.default.createElement(
						'span',
						null,
						'\u65BD\u5DE5\u4EFB\u52A1'
					),
					_react2.default.createElement(
						'span',
						{ style: tableType === "today" ? { color: "red" } : { display: "none" } },
						'*'
					)
				),
				dataIndex: 'productDetail',
				width: '14%',
				editable: !disabled,
				align: "center"
			}, {
				title: '计划开始时间',
				dataIndex: 'planBeginTime',
				width: '130px',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text === null || text === 0 || text === "0" ? "" : (0, _moment2.default)(text).format(dateFormat)
					);
				}
			}, {
				title: '计划完成时间',
				dataIndex: 'planEndTime',
				width: '130px',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							onClick: _this4.onRow.bind(_this4, record)
						},
						text === null || text === 0 || text === "0" ? "" : (0, _moment2.default)(text).format(dateFormat)
					);
				}
			}];
			if (tableType === 'today') {
				columnEle = columnEle.concat([
				/*  {
    title: '实际开始时间',
    dataIndex: 'actualBeginTime',
    width: '130px',
    editable: !disabled,
    align: "center",
    render: (text, record) => {
    	return (<div
    		id={`${record.id}`}
    		onClick={this.onRow.bind(this, record)}
    		style={{width: '100%', height: '46px', lineHeight: '46px'}}
    		className="pr">
    		{text===null || text===0|| text==="0"?"":moment(text).format(dateFormat)}
    	</div>);
    }
    },*/
				{
					title: '计划完成进度',
					dataIndex: 'palnProgress',
					width: '160px',
					editable: !disabled,
					align: "center",
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								onClick: _this4.onRow.bind(_this4, record),
								style: { width: '100%', height: '46px', lineHeight: '46px' },
								className: 'pr' },
							text,
							'%'
						);
					}
				}, {
					title: _react2.default.createElement(
						'span',
						null,
						_react2.default.createElement(
							'span',
							null,
							'\u5B9E\u9645\u5B8C\u6210\u8FDB\u5EA6'
						),
						_react2.default.createElement(
							'span',
							{ style: tableType === "today" ? { color: "red" } : { display: "none" } },
							'*'
						)
					),
					dataIndex: 'actualProgress',
					width: '160px',
					editable: !disabled,
					align: "center",
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								onClick: _this4.onRow.bind(_this4, record),
								style: { width: '100%', height: '46px', lineHeight: '46px' },
								className: 'pr' },
							text,
							'%'
						);
					}
				}]);
			}
			if (tableType === 'tomorrow') {

				columnEle = columnEle.concat([{
					title: '计划施工完成进度',
					dataIndex: 'palnProgress',
					width: '160px',
					editable: !disabled,
					align: "center",
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								onClick: _this4.onRow.bind(_this4, record),
								style: { width: '100%', height: '46px', lineHeight: '46px' },
								className: 'pr' },
							text,
							'%'
						);
					}
				}]);
			}

			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete,
							getProductCategoryList: _this4.getProductCategoryList,
							getProductDetailList: _this4.getProductDetailList,
							getDetailWorkByPostionId: _this4.getDetailWorkByPostionId,
							positionList: positionList,
							productCategoryList: productCategoryList,
							productDetailList: productDetailList,
							dailyDate: dailyDate,
							tableType: tableType
						};
					}
				});
			});
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '15px' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTable;
}(_react2.default.Component)) || _class2;

exports.default = EditableTable;

/***/ }),

/***/ 1662:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _implementation = __webpack_require__(2143);

var _implementation2 = _interopRequireDefault(_implementation);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = _react2.default.createContext || _implementation2.default;
module.exports = exports['default'];

/***/ }),

/***/ 1663:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimelineHeadersConsumer = exports.TimelineHeadersProvider = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _createReactContext2 = _interopRequireDefault(__webpack_require__(1662));

var _generic = __webpack_require__(1583);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var defaultContextState = {
  registerScroll: function registerScroll() {
    // eslint-disable-next-line
    console.warn('default registerScroll header used');
    return _generic.noop;
  },
  rightSidebarWidth: 0,
  leftSidebarWidth: 150,
  timeSteps: {}
};

var _createReactContext = (0, _createReactContext2["default"])(defaultContextState),
    Consumer = _createReactContext.Consumer,
    Provider = _createReactContext.Provider;

var TimelineHeadersProvider =
/*#__PURE__*/
function (_React$Component) {
  _inherits(TimelineHeadersProvider, _React$Component);

  function TimelineHeadersProvider() {
    _classCallCheck(this, TimelineHeadersProvider);

    return _possibleConstructorReturn(this, _getPrototypeOf(TimelineHeadersProvider).apply(this, arguments));
  }

  _createClass(TimelineHeadersProvider, [{
    key: "render",
    value: function render() {
      var contextValue = {
        rightSidebarWidth: this.props.rightSidebarWidth,
        leftSidebarWidth: this.props.leftSidebarWidth,
        timeSteps: this.props.timeSteps,
        registerScroll: this.props.registerScroll
      };
      return _react["default"].createElement(Provider, {
        value: contextValue
      }, this.props.children);
    }
  }]);

  return TimelineHeadersProvider;
}(_react["default"].Component);

exports.TimelineHeadersProvider = TimelineHeadersProvider;

_defineProperty(TimelineHeadersProvider, "propTypes", {
  children: _propTypes["default"].element.isRequired,
  rightSidebarWidth: _propTypes["default"].number,
  leftSidebarWidth: _propTypes["default"].number.isRequired,
  //TODO: maybe this should be skipped?
  timeSteps: _propTypes["default"].object.isRequired,
  registerScroll: _propTypes["default"].func.isRequired
});

var TimelineHeadersConsumer = Consumer;
exports.TimelineHeadersConsumer = TimelineHeadersConsumer;

/***/ }),

/***/ 1664:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TimelineMarkerType = void 0;
var TimelineMarkerType = {
  Today: 'Today',
  Custom: 'Custom',
  Cursor: 'Cursor'
};
exports.TimelineMarkerType = TimelineMarkerType;

/***/ }),

/***/ 1782:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 大文件上传组件
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * */


var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return 'ZJMZ_OpenPlatform/' + (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file).then(function (data) {
			resolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了
		}).catch(function (error) {
			reject(error);
		});
	});
};

var MyUpload = function (_React$Component) {
	_inherits(MyUpload, _React$Component);

	function MyUpload(props) {
		var _this3 = this;

		_classCallCheck(this, MyUpload);

		var _this2 = _possibleConstructorReturn(this, (MyUpload.__proto__ || Object.getPrototypeOf(MyUpload)).call(this, props));

		_this2.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this2.handleChange = function (info) {
			var status = info.file.status;

			// 记录新上传的
			var fileList = [].concat(_toConsumableArray(info.fileList));
			var oldFileList = JSON.parse(JSON.stringify(fileList)).filter(function (file) {
				return file.status && file.status === 'done';
			}); // 之前保存过的
			var newFileList = JSON.parse(JSON.stringify(fileList));
			newFileList = newFileList.filter(function (file) {
				if (file.status && file.status === 'done') {
					return false;
				}
				return true;
			});
			newFileList = newFileList.map(function (file) {
				if (file.originFileObj) {
					var url = _this2.state.host + uploadPath('path', file);
					return Object.assign({}, {
						uid: file.uid,
						name: file.name,
						status: "done",
						url: url,
						fileId: null,
						fileName: file.name,
						filePath: url,
						id: ""
					});
				}
				return file;
			});
			if (status == undefined) {
				// 处理附件
				var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), _toConsumableArray(newFileList))));
				var _this = _this2;
				_this.setState({
					loading: true
				});
				setTimeout(function () {
					_this.props.saveAttachment(array);
					_this.setState({
						loading: false
					});
				}, 1000);
			} else if (status === "removed") {
				// 删除
				var id = info.file.id;
				if (id !== "" || id !== null) {// 删除已有的
					// this.props.delNode(id);
				}
				var _array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), _toConsumableArray(newFileList))));
				_this2.props.saveAttachment(_array);
			}
		};

		_this2.beforeUpload = function (file) {
			var accept = _this2.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				//console.log(accept, file.type, type, 'accept')
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}
			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}
			var reader = new FileReader();
			reader.readAsDataURL(file);

			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this2, '上传路径oss配置信息', file).then(function (data) {
					return data;
				});
			};
			return false; // 不调用默认的上传方法
		};

		_this2.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this2.getDocumentUrl(file.filePath).then(function (res) {
										_this2.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this2.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this2.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this2.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this3);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this2.handleCancel = function (type) {
			return _this2.setState(_defineProperty({}, type, false));
		};

		_this2.downloadUrl = function () {
			var _this2$state = _this2.state,
			    filePath = _this2$state.filePath,
			    name = _this2$state.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this2.downloadImage(filePath, name);
			}
		};

		_this2.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this2.downloadImage(filePath, name);
			}
		};

		_this2.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this2.state = {
			fileList: _this2.props.fileList,
			loading: false,
			token: {
				access_key_id: '', //'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id
				access_key_secret: '', //'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret
				stsToken: '', //'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\u003d\u003d',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0
		};
		return _this2;
	}

	_createClass(MyUpload, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList
				});
			}
			if (this.props.ossData) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: this.props.ossData.accessKeyId,
						access_key_secret: this.props.ossData.accessKeySecret,
						stsToken: this.props.ossData.securityToken
					})
				});
			}
		}

		// 手动下载


		// 预览下载


		// 直接下载

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				onChange: this.handleChange,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "text",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				showUploadList: {
					showDownloadIcon: true
				}
			};
			var uploadButton = _react2.default.createElement(_antd.Icon, { style: { fontSize: "16px", color: "#1890ff" },
				className: 'pointer',
				type: 'cloud-upload',
				title: '\u4E0A\u4F20\u9644\u4EF6'
			});

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'span',
				{ style: {
						display: "inline-block"
					} },
				_react2.default.createElement(
					_antd.Upload,
					_extends({}, props, { fileList: fileList }),
					disabled ? null : uploadButton
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage, alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this4.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUpload;
}(_react2.default.Component);

exports.default = MyUpload;

/***/ }),

/***/ 1784:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var Option = _antd.Select.Option;

var dateFormat = 'YYYY-MM-DD';

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: []
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this2.onBlur = function () {
			//this.toggleEdit();
		}, _this2.handlePositionChange = function (value) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			_this2.props.getProductCategoryList(record, value);
		}, _this2.handleProductCategoryChange = function (value) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			_this2.props.getDailyTomorrowMaterial(value, record);
		}, _this2.handleProductDetailChange = function (value) {
			var _this2$props4 = _this2.props,
			    record = _this2$props4.record,
			    handleSave = _this2$props4.handleSave;

			var selectedDetailItem = record['productDetailList'].filter(function (item) {
				return item.productDetailId === value;
			});
			if (selectedDetailItem.length > 0) {
				handleSave(Object.assign(record, {
					"planBeginTime": selectedDetailItem[0].planBeginTime,
					"planEndTime": selectedDetailItem[0].planEndTime,
					"productDetail": selectedDetailItem[0].productDetail,
					"productDetailId": selectedDetailItem[0].productDetailId,
					"showName": selectedDetailItem[0].showName,
					"tomorrowProgress": selectedDetailItem[0].tomorrowProgress
				}));
			} else {
				handleSave(Object.assign(record, {
					"planBeginTime": 0,
					"planEndTime": 0,
					"productDetail": "",
					"productDetailId": "",
					"showName": value,
					"tomorrowProgress": 0
				}));
			}
		}, _this2.handleNumberTomorrowProgressSave = function (e) {
			var _this2$props5 = _this2.props,
			    record = _this2$props5.record,
			    handleSave = _this2$props5.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error) {
					return;
				}
				handleSave(Object.assign(record, { "tomorrowProgress": values.tomorrowProgress }));
			});
		}, _this2.renderOption = function (item) {
			return _react2.default.createElement(
				Option,
				{ key: item.id, text: item.name },
				item.name
			);
		}, _this2.renderOption2 = function (item, index) {
			return _react2.default.createElement(
				Option,
				{ key: item.showName, text: item.showName },
				item.showName
			);
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props6 = _this2.props,
			    children = _this2$props6.children,
			    dataIndex = _this2$props6.dataIndex,
			    record = _this2$props6.record,
			    title = _this2$props6.title,
			    handleDelete = _this2$props6.handleDelete,
			    positionList = _this2$props6.positionList;
			var editing = _this2.state.editing;

			if (dataIndex == 'position') {
				// 部位
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record['positionId'] == null ? undefined : record['positionId']
					})(_react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
									return handleDelete(record);
								} },
							_react2.default.createElement(_antd.Icon, {
								style: {
									width: '30px',
									color: '#f17e7e',
									fontSize: '15px'
								},
								type: 'minus-circle' })
						),
						_react2.default.createElement(_antd.AutoComplete, {
							defaultValue: record[dataIndex],
							dataSource: positionList.map(_this2.renderOption),
							placeholder: '请选择',
							style: { width: "140px" },
							onChange: _this2.handlePositionChange
						})
					))
				) : _react2.default.createElement(
					'div',
					{ className: 'w clearfix' },
					_react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return handleDelete(record);
							} },
						_react2.default.createElement(_antd.Icon, {
							style: {
								width: '30px',
								color: '#F17E7E',
								fontSize: '15px'
							},
							type: 'minus-circle' })
					),
					_react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: {
								float: 'right',
								width: 'calc(100% - 35px)',
								minHeight: '31px'
							},
							onClick: _this2.toggleEdit
						},
						children
					)
				);
			} else if (dataIndex == 'productCategory') {
				// 相同列
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record['productCategoryId'] == null ? undefined : record['productCategoryId'] == "" ? record['productCategory'] : record['productCategoryId']
					})(_react2.default.createElement(_antd.AutoComplete, {
						defaultValue: record[dataIndex],
						dataSource: Array.isArray(record['productCategoryList']) ? record['productCategoryList'].map(_this2.renderOption) : [],
						placeholder: '请选择',
						style: { width: "140px" },
						onChange: _this2.handleProductCategoryChange
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'productDetail') {
				// 相同列
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record['productDetailId'] == null ? undefined : record['productDetailId'] == "" ? record['showName'] : record['productDetailId']
					})(_react2.default.createElement(_antd.AutoComplete, {
						defaultValue: record[dataIndex],
						dataSource: Array.isArray(record['productDetailList']) ? record['productDetailList'].map(_this2.renderOption2) : [],
						placeholder: '请选择',
						style: { width: "140px" },
						onChange: _this2.handleProductDetailChange
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' }
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'planBeginTime' || dataIndex == 'planEndTime') {
				// 相同列
				return editing && false ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { minHeight: '31px' }
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : (0, _moment2.default)(record[dataIndex]).format(dateFormat)
				);
			} else if (dataIndex == 'tomorrowProgress') {
				// 计划完成比例
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
					})(_react2.default.createElement(_antd.InputNumber, {
						min: 0,
						max: 100,
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.handleNumberTomorrowProgressSave,
						onBlur: _this2.handleNumberTomorrowProgressSave
					})),
					'%'
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					children,
					'%'
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ className: 'tfc' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]
					})(_react2.default.createElement(_antd.InputNumber, {
						min: 0,
						max: 100
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					children,
					'%'
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableTomorrowMaterial = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableTomorrowMaterial, _React$Component2);

	function EditableTableTomorrowMaterial(props) {
		_classCallCheck(this, EditableTableTomorrowMaterial);

		var _this3 = _possibleConstructorReturn(this, (EditableTableTomorrowMaterial.__proto__ || Object.getPrototypeOf(EditableTableTomorrowMaterial)).call(this, props));

		_this3.getPositionList = function () {
			var hash = window.location.hash;
			var projectId = hash.split("projectId=")[1];
			if (projectId === undefined) {
				return;
			} else {
				_this3.store.getDailyObjList({
					"dailyId": projectId,
					"type": 0
				}).then(function (res) {
					_this3.store.positionList = res;
				});
			}
		};

		_this3.getProductCategoryList = function (record, value) {
			var positionList = _this3.store.positionList;

			var selectedItem = positionList.filter(function (item) {
				return item.id === value;
			});
			if (selectedItem.length > 0) {
				_this3.store.getDailyObjList({
					"dailyId": value,
					"type": 1
				}).then(function (res) {
					_this3.store.productCategoryList = res;
					_this3.handleSave(Object.assign(record, { "position": selectedItem[0].name, "positionId": selectedItem[0].id, "productCategoryList": res }));
				});
			} else {
				_this3.handleSave(Object.assign(record, { "position": value, "positionId": "", "productCategoryList": [] }));
			}
		};

		_this3.getProductDetailList = function (productCategoryId, record) {
			_this3.store.getDailyContentDetailList({
				"dailyId": productCategoryId,
				"type": record['type'] === 1 ? 0 : 1 //record 中的type 1 表示今日，这的type0，表示今日，1是明日...
			}).then(function (res) {
				_this3.store.productDetailList = res;
			});
		};

		_this3.getDailyTomorrowMaterial = function (value, record) {
			_this3.store.getDailyTomorrowMaterial({
				"categoryId": value
			}).then(function (res) {
				if (res.length > 0) {
					var selectedItem = record['productCategoryList'].filter(function (item) {
						return item.id === value;
					});
					_this3.handleSave(Object.assign(record, { "productCategory": selectedItem[0].name, "productCategoryId": selectedItem[0].id, "productDetailList": res }));
				} else {
					_this3.handleSave(Object.assign(record, { "productCategory": value, "productCategoryId": "", "productDetailList": [] }));
				}
			});
		};

		_this3.handleDelete = function (record) {
			var id = record.id,
			    key = record.key;

			var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
			_this3.setState({
				dataSource: dataSource.filter(function (item) {
					return item.key !== key;
				})
			}, function () {
				_this3.props.saveData(_this3.state.dataSource, key);
			});
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;
			// const newData = Object.assign(primaryData, {key: count, id:"!"+uuidv4()});

			var newData = Object.assign(primaryData, { key: count });
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"dailyId": "",
				"projectId": "",
				"materialId": "",
				"position": "",
				"productCategory": "",
				"productDetail": "",
				"planBeginTime": 0,
				"planEndTime": 0,
				"tomorrowProgress": 0,
				"name": "",
				"showName": ""
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTableTomorrowMaterial, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"dailyId": "",
						"projectId": "",
						"materialId": "",
						"position": "",
						"productCategory": "",
						"productDetail": "",
						"planBeginTime": 0,
						"planEndTime": 0,
						"tomorrowProgress": 0,
						"name": "",
						"showName": ""
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"dailyId": "",
					"projectId": "",
					"materialId": "",
					"position": "",
					"productCategory": "",
					"productDetail": "",
					"planBeginTime": 0,
					"planEndTime": 0,
					"tomorrowProgress": 0,
					"name": "",
					"showName": ""
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
			this.getPositionList();
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		// 折叠效果


		// 查看


		// 点击

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys;
			var disabled = this.props.disabled;
			var positionList = this.store.positionList;

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '部位',
				dataIndex: 'position',
				width: '14%',
				align: "left",
				editable: !disabled
				/*render: (text, record) => {
    	return (<div
    		id={`${record.id}`}
    		onClick={this.onRow.bind(this, record)}
    		style={{width: '100%', height: '46px', lineHeight: '46px'}}
    		className="pr">
    		{text}
    	</div>);
    }*/
			}, {
				title: '产品类别',
				dataIndex: 'productCategory',
				width: '14%',
				align: "center",
				editable: !disabled
				/*render: (text, record) => {
    	return (<div
    		id={`${record.id}`}
    		onClick={this.onRow.bind(this, record)}
    		style={{width: '100%', height: '46px', lineHeight: '46px'}}
    		className="pr">
    		{text}
    	</div>);
    }*/
			}, {
				title: '产品明细',
				dataIndex: 'productDetail',
				width: '14%',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						record['showName'] !== null ? record['showName'] : ''
					);
				}
			}, {
				title: '计划发车时间',
				dataIndex: 'planBeginTime',
				width: '130px',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text === null || text === 0 || text === "0" ? "" : (0, _moment2.default)(text).format(dateFormat)
					);
				}
			}, {
				title: '计划到货时间',
				dataIndex: 'planEndTime',
				width: '130px',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							onClick: _this4.onRow.bind(_this4, record)
						},
						text === null || text === 0 || text === "0" ? "" : (0, _moment2.default)(text).format(dateFormat)
					);
				}
			}, {
				title: '明日计划进展',
				dataIndex: 'tomorrowProgress',
				width: '14%',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text,
						'%'
					);
				}
			}];
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete,
							getProductCategoryList: _this4.getProductCategoryList,
							getProductDetailList: _this4.getProductDetailList,
							getDailyTomorrowMaterial: _this4.getDailyTomorrowMaterial,
							positionList: mobx.toJS(positionList)
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '15px' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTableTomorrowMaterial;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableTomorrowMaterial;

/***/ }),

/***/ 1833:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _HeadersContext = __webpack_require__(1663);

var _constants = __webpack_require__(1906);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var SidebarHeader =
/*#__PURE__*/
function (_React$PureComponent) {
  _inherits(SidebarHeader, _React$PureComponent);

  function SidebarHeader() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, SidebarHeader);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SidebarHeader)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "getRootProps", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var style = props.style;
      var width = _this.props.variant === _constants.RIGHT_VARIANT ? _this.props.rightSidebarWidth : _this.props.leftSidebarWidth;
      return {
        style: _objectSpread({}, style, {
          width: width
        })
      };
    });

    _defineProperty(_assertThisInitialized(_this), "getStateAndHelpers", function () {
      return {
        getRootProps: _this.getRootProps,
        data: _this.props.headerData
      };
    });

    return _this;
  }

  _createClass(SidebarHeader, [{
    key: "render",
    value: function render() {
      var props = this.getStateAndHelpers();
      var Renderer = this.props.children;
      return _react["default"].createElement(Renderer, props);
    }
  }]);

  return SidebarHeader;
}(_react["default"].PureComponent);

_defineProperty(SidebarHeader, "propTypes", {
  children: _propTypes["default"].func.isRequired,
  rightSidebarWidth: _propTypes["default"].number,
  leftSidebarWidth: _propTypes["default"].number.isRequired,
  variant: _propTypes["default"].string,
  headerData: _propTypes["default"].object
});

var SidebarWrapper = function SidebarWrapper(_ref) {
  var children = _ref.children,
      variant = _ref.variant,
      headerData = _ref.headerData;
  return _react["default"].createElement(_HeadersContext.TimelineHeadersConsumer, null, function (_ref2) {
    var leftSidebarWidth = _ref2.leftSidebarWidth,
        rightSidebarWidth = _ref2.rightSidebarWidth;
    return _react["default"].createElement(SidebarHeader, {
      leftSidebarWidth: leftSidebarWidth,
      rightSidebarWidth: rightSidebarWidth,
      children: children,
      variant: variant,
      headerData: headerData
    });
  });
};

SidebarWrapper.propTypes = {
  children: _propTypes["default"].func.isRequired,
  variant: _propTypes["default"].string,
  headerData: _propTypes["default"].object
};
SidebarWrapper.defaultProps = {
  variant: _constants.LEFT_VARIANT,
  children: function children(_ref3) {
    var getRootProps = _ref3.getRootProps;
    return _react["default"].createElement("div", getRootProps());
  }
};
SidebarWrapper.secretKey = "SidebarHeader";
var _default = SidebarWrapper;
exports["default"] = _default;

/***/ }),

/***/ 1834:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createDefaultRenderer = exports.createMarkerStylesWithLeftOffset = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * Baseline styles to get the marker to render correctly
 */
var criticalStyles = {
  position: 'absolute',
  top: 0,
  bottom: 0,
  width: '2px',
  backgroundColor: 'black',
  // by default, pointer events (specifically click) will
  // "pass through".  This is added so that CursorMarker
  // will not get in the way of canvas click
  pointerEvents: 'none' // FIXME: this creates a new object each time in render
  // might want to memoize this?

};

var createMarkerStylesWithLeftOffset = function createMarkerStylesWithLeftOffset(leftOffset) {
  return _objectSpread({}, criticalStyles, {
    left: leftOffset
  });
};

exports.createMarkerStylesWithLeftOffset = createMarkerStylesWithLeftOffset;

var createDefaultRenderer = function createDefaultRenderer(dataTestidValue) {
  // eslint-disable-next-line
  return function DefaultMarkerRenderer(_ref) {
    var styles = _ref.styles;
    return _react["default"].createElement("div", {
      style: styles
    });
  };
};

exports.createDefaultRenderer = createDefaultRenderer;

/***/ }),

/***/ 1873:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _PersonAdd = __webpack_require__(1545);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

var _PersonAdd2FourItem = __webpack_require__(1965);

var _PersonAdd2FourItem2 = _interopRequireDefault(_PersonAdd2FourItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var TextArea = _antd.Input.TextArea;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: []
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (type, e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, _defineProperty({}, type, values[type])));
			});
		}, _this2.updatePerson = function (users) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			var data = {};
			var userIds = void 0;
			if (users.length) {
				userIds = users;
			} else {
				userIds = [];
			}
			data["masters"] = userIds;
			data["userTeamId"] = userIds.length > 0 ? userIds[0]['userId'] : null;
			data["userTeamName"] = userIds.length > 0 ? userIds[0]['userName'] : null;
			// if(users.length>0){
			// 	data["masterName"] = userIds[0]['userName'];
			// 	data["masterId"] = userIds[0]['userId'];
			// }
			console.log(data, 'data');
			handleSave(_extends({}, record, data));
		}, _this2.updateUsed = function (checked) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			var data = {};
			data["used"] = checked ? 1 : 0;
			handleSave(_extends({}, record, data));
		}, _this2.onBlur = function () {}
		//this.toggleEdit();

		/*//设置开始日期不能选择的时间
  disabledStartDate = startValue => {
  	const {record} = this.props;
  	if (!startValue || !record.endTime) {
  		return false
  	}
  	return startValue.valueOf() > record.endTime.valueOf()
  }
  //设置结束不能选择的时间
  disabledEndDate = endValue => {
  	const {record} = this.props;
  	if (!endValue || !record.beginTime) {
  		return false
  	}
  	return endValue.valueOf() <= record.beginTime.valueOf()
  }*/
		, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props4 = _this2.props,
			    children = _this2$props4.children,
			    dataIndex = _this2$props4.dataIndex,
			    record = _this2$props4.record,
			    title = _this2$props4.title,
			    handleDelete = _this2$props4.handleDelete;
			var editing = _this2.state.editing;

			if (dataIndex == 'name') {
				// 部位
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(record['key'] >= 2 ? _react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
									return handleDelete(record);
								} },
							_react2.default.createElement(_antd.Icon, {
								style: {
									width: '35px',
									color: '#F17E7E',
									fontSize: '20px',
									float: 'left'
								},
								type: 'minus-circle' })
						),
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save.bind(_this2, dataIndex),
							onBlur: _this2.save.bind(_this2, dataIndex)
						})
					) : _react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save.bind(_this2, dataIndex),
							onBlur: _this2.save.bind(_this2, dataIndex)
						})
					))
				) : _react2.default.createElement(
					'div',
					{ className: 'w clearfix' },
					_react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return handleDelete(record);
							} },
						_react2.default.createElement(_antd.Icon, {
							style: {
								width: '35px',
								color: '#F17E7E',
								fontSize: '22px',
								float: 'left'
							},
							type: 'minus-circle' })
					),
					_react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: {
								float: 'right',
								width: 'calc(100% - 35px)',
								minHeight: '31px'
							},
							onClick: _this2.toggleEdit
						},
						children
					)
				);
			} else if (dataIndex == 'masters') {
				// 负责人
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'w' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map(function (item) {
							return item.userId;
						})
					})(_react2.default.createElement(
						'div',
						{ className: 'w', ref: function ref(node) {
								return _this2.input = node;
							} },
						_react2.default.createElement(_PersonAdd2FourItem2.default, {
							data: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex],
							updatePerson: _this2.updatePerson,
							disabled: !editing
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit },
					children
				);
			} else if (dataIndex == 'used') {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? false : true
					})(_react2.default.createElement(_antd.Switch, { onChange: _this2.updateUsed, className: 'task_switch', checked: record[dataIndex] === 1 ? true : false, defaultChecked: true }))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'frequency') {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: record['used'] === 1 ? true : false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save.bind(_this2, dataIndex),
						onBlur: _this2.save.bind(_this2, dataIndex),
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save.bind(_this2, dataIndex),
						onBlur: _this2.save.bind(_this2, dataIndex),
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}
	/*//日期格式保存
 saveDate = (date, dateString) => {
 	const {record, handleSave} = this.props;
 	this.form.validateFields((error, values) => {
 		if (values.hasOwnProperty('beginTime')) {
 			values["beginTime"] = moment(dateString, 'YYYY-MM-DD').valueOf();
 		}
 		delete values["endTime"];
 		handleSave({...record, ...values});
 	});
 }
 saveDate2 = (date, dateString) => {
 	const {record, handleSave} = this.props;
 	this.form.validateFields((error, values) => {
 		if (values.hasOwnProperty('endTime')) {
 			values["endTime"] = moment(dateString, 'YYYY-MM-DD').valueOf();
 		}
 		delete values["beginTime"];
 		handleSave({...record, ...values});
 	});
 }*/


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableFourItem = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableFourItem, _React$Component2);

	function EditableTableFourItem(props) {
		_classCallCheck(this, EditableTableFourItem);

		var _this3 = _possibleConstructorReturn(this, (EditableTableFourItem.__proto__ || Object.getPrototypeOf(EditableTableFourItem)).call(this, props));

		_this3.handleDelete = function (record) {
			var id = record.id,
			    key = record.key;

			if (id !== "" && id !== null && !id.startsWith("!")) {
				// 删除原来已有的
				_this3.store.delNode(id).then(function (res) {
					if (res) {
						_antd.message.success("删除成功");
						var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
						_this3.setState({
							dataSource: dataSource.filter(function (item) {
								return item.key !== key;
							})
						}, function () {
							_this3.props.saveData(_this3.state.dataSource);
						});
					} else {
						_antd.message.error("删除失败");
					}
				});
			} else {
				// 删除新增的
				var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
				_this3.setState({
					dataSource: dataSource.filter(function (item) {
						return item.key !== key;
					})
				}, function () {
					_this3.props.saveData(_this3.state.dataSource, key);
				});
			}
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			//console.log('newdata==>',newData)
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				// this.props.saveData(this.state.dataSource);
			});
			_this3.props.saveItem(mobx.toJS(newData)[index]);
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onCalac = function (key) {
			_this3.saveExpandedRows(key);
			_this3.store.isEdit = false;
			// 更新tree
			var treeData = JSON.parse(JSON.stringify(_this3.store.treeData));
			_this3.store.treeData = utils.updateTreeData(treeData, "update", _this3.state.activeObj);
			_this3.subtask.clearState();
			_this3.setState({
				activeObj: Object.assign({})
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"name": "",
				"masters": [],
				"projectScale": "",
				"address": ""
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTableFourItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"name": "",
						"masterName": "",
						"projectScale": "",
						"address": ""
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"name": "",
					"masters": [],
					"projectScale": "",
					"address": ""
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		// 折叠效果


		// 查看


		// 取消保存


		// 点击

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    subTaskDis = _state.subTaskDis;
			var _props2 = this.props,
			    disabled = _props2.disabled,
			    tableType = _props2.tableType,
			    selectedRows = _props2.selectedRows;

			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '序号', dataIndex: 'keyIndex', align: 'left', width: "5%"
			}, {
				title: '机制', dataIndex: 'rule', align: 'left'
			}, {
				title: '机制说明', dataIndex: 'ruleExplain', align: 'left', width: "35%",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '是否采用',
				dataIndex: 'used',
				align: "center",
				width: "8%",
				editable: !disabled && !isChaijie,
				render: function render(text, record) {
					return _react2.default.createElement('img', { style: { width: '26px', height: '26px' }, src: text !== 1 ? "./images/delivery/u2100.png" : "./images/delivery/u964.png" });
				}
			}, {
				title: '时间/频次',
				dataIndex: 'frequency',
				editable: !disabled && !isChaijie,
				align: "center",
				width: "10%",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '负责人',
				dataIndex: 'masters',
				align: "center",
				width: "20%",
				editable: !disabled && !isChaijie,
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						record['userTeamName'] !== null ? record['userTeamName'] : ''
					);
				}
			}, {
				title: '备注',
				dataIndex: 'remark',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text
					);
				}
			}];
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete
						};
					}
				});
			});
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px', display: 'none' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTableFourItem;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableFourItem;

/***/ }),

/***/ 1874:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var Option = _antd.Select.Option;
var TextArea = _antd.Input.TextArea;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var dutyList = ["1、协助项目经理解决工厂应急问题；\n" + "2、配合项目经理做好项目关系管理；\n" + "3、督导PMO工作落地情况；\n" + "4、督导项目进度；\n" + "5、参加项目关键里程碑会议；\n" + "6、重大事件决策", "1、全力保障项目目标完成；\n" + "2、协调内外部资源，负责项目交付进度和质量控制；\n" + "3、安排内部其他项目组成员工作，做好分工安排；\n" + "4、保障项目中各类文档按期完成；\n" + "5、定期做高层汇报，并提出管理改进建议", "1、负责工厂订单、生产；\n" + "2、现场质量、安全、进度保证；\n" + "3、每日工作情况汇报及明日计划", "1、针对东小口项目验证交付标准化流程，改进和完善，并思考数字化落地方案；\n" + "2、辅助项目经理完成交付过程中所需的作业文件；\n" + "3、跟进各部门安排的标准化作业文件提交落地情况；\n" + "4、补充陕建华山云商-东小口功能箱产品上架和维护。", "1、当项目需要设计参与时，与商务经理和大项目经理探索客户需求，商讨设计解决方案；\n" + "2、确定需要的设计专业，安排好设计人员的工作，保障如期交付设计方案。", "推进产品标准化工作，搜集现场案例", "1、负责维护好客户关系，尤其是关键干系人情绪，使其对项目满意；\n" + "2、负责项目内外的商务沟通与协调工作，及时反馈客户信息；\n" + "3、及时跟进客户的回款工作。"];

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: []
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this2.updatePerson = function (users) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			var data = {};
			var userIds = void 0;
			if (users.length) {
				userIds = users;
			} else {
				userIds = [];
			}
			data["masters"] = userIds;
			// if(users.length>0){
			// 	data["masterName"] = userIds[0]['userName'];
			// 	data["masterId"] = userIds[0]['userId'];
			// }
			handleSave(_extends({}, record, data));
		}, _this2.onBlur = function () {
			//this.toggleEdit();
		}, _this2.handleChangeSelect = function (e) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			handleSave(_extends({}, record, { "position": e, 'duty': _this2.getDutyByPosition(e) }));
		}, _this2.getDutyByPosition = function (p) {
			if (p === "项目总监") {
				return dutyList[0];
			}
			if (p === "项目经理") {
				return dutyList[1];
			}
			if (p === "生产经理") {
				return dutyList[2];
			}
			if (p === "项目PMO") {
				return dutyList[3];
			}
			if (p === "设计经理") {
				return dutyList[4];
			}
			if (p === "产品经理") {
				return dutyList[5];
			}
			if (p === "商务经理") {
				return dutyList[6];
			}
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props4 = _this2.props,
			    children = _this2$props4.children,
			    dataIndex = _this2$props4.dataIndex,
			    record = _this2$props4.record,
			    title = _this2$props4.title,
			    handleDelete = _this2$props4.handleDelete;
			var editing = _this2.state.editing;

			if (dataIndex == 'orders') {
				// 序号
				return _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' }
					},
					children
				);
			} else if (dataIndex == 'caozuo') {
				// 操作
				return record['canDel'] === 0 ? _react2.default.createElement('div', null) : _react2.default.createElement(
					'div',
					{
						style: { minHeight: '31px' } },
					children
				);
			} else if (dataIndex == 'position') {
				// position
				return record['canDel'] !== 0 ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == '' ? undefined : record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{ placeholder: '请选择', style: { width: 120 }, onChange: _this2.handleChangeSelect },
						_react2.default.createElement(
							Option,
							{ value: '\u9879\u76EE\u603B\u76D1' },
							'\u9879\u76EE\u603B\u76D1'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u9879\u76EE\u7ECF\u7406' },
							'\u9879\u76EE\u7ECF\u7406'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u751F\u4EA7\u7ECF\u7406' },
							'\u751F\u4EA7\u7ECF\u7406'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u9879\u76EEPMO' },
							'\u9879\u76EEPMO'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u8BBE\u8BA1\u7ECF\u7406' },
							'\u8BBE\u8BA1\u7ECF\u7406'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u4EA7\u54C1\u7ECF\u7406' },
							'\u4EA7\u54C1\u7ECF\u7406'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u5546\u52A1\u7ECF\u7406' },
							'\u5546\u52A1\u7ECF\u7406'
						)
					))
				) : _react2.default.createElement(
					'div',
					{
						style: { minHeight: '31px' }
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'duty') {
				return editing && false ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(TextArea, {
						rows: 5,
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' }
						//onClick={this.toggleEdit}
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else {
				return record['canDel'] !== 0 && record['userId'] === "" ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { minHeight: '31px' }
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableOneItem = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableOneItem, _React$Component2);

	function EditableTableOneItem(props) {
		_classCallCheck(this, EditableTableOneItem);

		var _this3 = _possibleConstructorReturn(this, (EditableTableOneItem.__proto__ || Object.getPrototypeOf(EditableTableOneItem)).call(this, props));

		_this3.handleDelete = function (record) {
			var id = record.id,
			    key = record.key;

			if (id !== "" && id !== null && !id.startsWith("!")) {
				// 删除原来已有的
				_this3.store.delNode(id).then(function (res) {
					if (res) {
						_antd.message.success("删除成功");
						var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
						_this3.setState({
							dataSource: dataSource.filter(function (item) {
								return item.key !== key;
							})
						}, function () {
							_this3.props.saveData(_this3.state.dataSource);
						});
					} else {
						_antd.message.error("删除失败");
					}
				});
			} else {
				// 删除新增的
				var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
				_this3.setState({
					dataSource: dataSource.filter(function (item) {
						return item.key !== key;
					})
				}, function () {
					_this3.props.saveData(_this3.state.dataSource, key);
				});
			}
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				_this3.props.saveData(_this3.state.dataSource);
			});

			var id = newData.id,
			    newItem = _objectWithoutProperties(newData, ['id']);

			_this3.props.saveItem(newItem);
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				// this.props.saveData(this.state.dataSource);
			});
			_this3.props.saveItem(newData[index]);
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onCalac = function (key) {
			_this3.saveExpandedRows(key);
			_this3.store.isEdit = false;
			// 更新tree
			var treeData = JSON.parse(JSON.stringify(_this3.store.treeData));
			_this3.store.treeData = utils.updateTreeData(treeData, "update", _this3.state.activeObj);
			_this3.subtask.clearState();
			_this3.setState({
				activeObj: Object.assign({})
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.handleRemoveItem = function (id) {
			var taskDetail = _this3.store.taskDetail;

			_this3.store.delBuildTeamItemOne({ "id": id }).then(function (res) {
				_this3.props.saveData();
			});
		};

		_this3.showUserInfo = function (level) {
			if (level === "1") {
				return "项目总监";
			}
			if (level === "2") {
				return "项目经理";
			}
			if (level === "3") {
				return "生产经理";
			}
			if (level === "4") {
				return "项目PMO";
			}
			if (level === "5") {
				return "设计经理";
			}
			if (level === "6") {
				return "产品经理";
			}
			if (level === "7") {
				return "商务经理";
			}
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"orders": 0,
				"canDel": 1,
				"userName": "",
				"phone": "",
				"email": "",
				"position": "",
				"duty": ""
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTableOneItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"orders": 0,
						"canDel": 1,
						"userName": "",
						"phone": "",
						"email": "",
						"position": "",
						"duty": ""
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"orders": 0,
					"canDel": 1,
					"userName": "",
					"phone": "",
					"email": "",
					"position": "",
					"duty": ""
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		// 折叠效果


		// 查看


		// 取消保存


		// 点击

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    subTaskDis = _state.subTaskDis;
			var _props2 = this.props,
			    disabled = _props2.disabled,
			    tableType = _props2.tableType,
			    selectedRows = _props2.selectedRows;

			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var rowSelection = {
				onChange: function onChange(selectedRowKeys, selectedRows) {
					console.log('selectedRowKeys: ' + selectedRowKeys, 'selectedRows: ', selectedRows);
					selectedRows(selectedRows);
				}
			};
			var columnEle = [{
				title: '序号',
				dataIndex: 'keyIndex',
				width: '50px',
				align: "center"
			}, {
				title: '姓名',
				dataIndex: 'userName',
				width: '150px',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '手机号',
				dataIndex: 'phone',
				width: '14%',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '邮箱',
				dataIndex: 'email',
				width: '14%',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '项目职务',
				dataIndex: 'position',
				width: '14%',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						!isNaN(Number(text)) ? _this4.showUserInfo(text) : text
					);
				}
			}, {
				title: '项目职责',
				dataIndex: 'duty',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' },
							className: 'pr' },
						text
					);
				}
			}];
			if (!disabled) {
				columnEle = columnEle.concat([{
					title: '操作', dataIndex: 'caozuo', align: 'left', width: '10%', editable: !disabled, render: function render(text, record) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								_antd.Button,
								{
									ghost: true,
									type: 'primary',
									icon: 'delete',
									onClick: function onClick() {
										_this4.handleRemoveItem('' + record.id);
									} },
								'\u5220\u9664'
							)
						);
					}
				}]);
			}
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
					//rowSelection={!disabled?rowSelection:null}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTableOneItem;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableOneItem;

/***/ }),

/***/ 1875:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var Option = _antd.Select.Option;
var TextArea = _antd.Input.TextArea;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: []
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				//this.toggleEdit();
				handleSave(_extends({}, record, values));
			});
		}, _this2.handleChangeLevel = function (e) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			handleSave(_extends({}, record, { "level": e }));
		}, _this2.saveDate = function (date, dateString) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('beginTime')) {
					values["beginTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.saveDate2 = function (date, dateString) {
			var _this2$props4 = _this2.props,
			    record = _this2$props4.record,
			    handleSave = _this2$props4.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('endTime')) {
					values["endTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["beginTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.updatePerson = function (users) {
			var _this2$props5 = _this2.props,
			    record = _this2$props5.record,
			    handleSave = _this2$props5.handleSave;

			var data = {};
			var userIds = void 0;
			if (users.length) {
				userIds = users;
			} else {
				userIds = [];
			}
			data["masters"] = userIds;
			// if(users.length>0){
			// 	data["masterName"] = userIds[0]['userName'];
			// 	data["masterId"] = userIds[0]['userId'];
			// }
			handleSave(_extends({}, record, data));
		}, _this2.handleRemoveItem = function (id) {
			var handleDelete = _this2.props.handleDelete;

			handleDelete(id);
		}, _this2.onBlur = function () {
			//this.toggleEdit();
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props6 = _this2.props,
			    children = _this2$props6.children,
			    dataIndex = _this2$props6.dataIndex,
			    record = _this2$props6.record,
			    title = _this2$props6.title,
			    handleDelete = _this2$props6.handleDelete,
			    pDataList = _this2$props6.pDataList;
			var editing = _this2.state.editing;

			if (dataIndex == 'keyIndex') {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
									return handleDelete(record);
								} },
							_react2.default.createElement(_antd.Icon, {
								style: {
									width: '35px',
									color: '#F17E7E',
									fontSize: '20px',
									float: 'left'
								},
								type: 'minus-circle' })
						),
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save,
							onBlur: _this2.save
						})
					))
				) : _react2.default.createElement(
					'div',
					{ className: 'w clearfix' },
					_react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return handleDelete(record);
							} },
						_react2.default.createElement(_antd.Icon, {
							style: {
								width: '35px',
								color: '#F17E7E',
								fontSize: '22px',
								float: 'left'
							},
							type: 'minus-circle' })
					),
					_react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: {
								float: 'right',
								width: 'calc(100% - 35px)',
								minHeight: '31px'
							},
							onClick: _this2.toggleEdit
						},
						children
					)
				);
			} else if (dataIndex == 'level') {
				return _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? undefined : record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{ placeholder: '请选择决策等级', style: { width: 120 }, onChange: _this2.handleChangeLevel },
						pDataList.map(function (item, index) {
							return _react2.default.createElement(
								Option,
								{ key: 'level' + index, value: item.keyIndex },
								item.level
							);
						})
					))
				);
			} else if (dataIndex == 'caozuo') {
				return _react2.default.createElement(
					_antd.Popconfirm,
					{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
							_this2.handleRemoveItem('' + record.id);
						} },
					_react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' })
				);
			} else {
				return editing && record['orders'] > 6 ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(TextArea, {
						rows: 5,
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' }
						//onClick={this.toggleEdit}
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	_createClass(EditableCell, [{
		key: 'componentDidMount',
		value: function componentDidMount() {}
		//日期格式保存

	}, {
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableThreeItemMatter = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableThreeItemMatter, _React$Component2);

	function EditableTableThreeItemMatter(props) {
		_classCallCheck(this, EditableTableThreeItemMatter);

		var _this3 = _possibleConstructorReturn(this, (EditableTableThreeItemMatter.__proto__ || Object.getPrototypeOf(EditableTableThreeItemMatter)).call(this, props));

		_this3.handleDelete = function (id) {
			var taskDetail = _this3.store.taskDetail;

			_this3.store.delBuildTeamThreeItem({ "id": id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this3.store.getBuildTeamThreeItemList({ "taskId": taskDetail.id }).then(function (res) {
						_this3.props.saveData(res);
					});
				} else {
					_antd.message.error("删除失败");
				}
			});
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), _toConsumableArray(newData)),
				count: count + 1
			}, function () {
				_this3.props.saveData(dataSource.concat([newData]));
			});

			var id = newData.id,
			    newItem = _objectWithoutProperties(newData, ['id']);

			_this3.props.saveItem(newItem);
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				_this3.props.saveData(_this3.state.dataSource);
			});
			_this3.props.saveItem(newData[index]);
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onCalac = function (key) {
			_this3.saveExpandedRows(key);
			_this3.store.isEdit = false;
			// 更新tree
			var treeData = JSON.parse(JSON.stringify(_this3.store.treeData));
			_this3.store.treeData = utils.updateTreeData(treeData, "update", _this3.state.activeObj);
			_this3.subtask.clearState();
			_this3.setState({
				activeObj: Object.assign({})
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.showDecisionLevelInfo = function (level) {
			if (level === 1) {
				return "一级决策";
			}
			if (level === 2) {
				return "二级决策";
			}
			if (level === 3) {
				return "三级决策";
			}
			if (level === 4) {
				return "四级决策";
			}
			if (level === 0) {
				return "";
			}
		};

		_this3.checkForm = function (form) {
			console.log('form=>', form);
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": null,
				"buildTeamThree": null,
				"orders": 0,
				"item": "",
				"level": 0
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTableThreeItemMatter, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": null,
						"buildTeamThree": null,
						"orders": 0,
						"item": "",
						"level": 0
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": null,
					"buildTeamThree": null,
					"orders": 0,
					"item": "",
					"level": 0
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
			this.props.onRef && this.props.onRef(this);
		}

		// 删除


		// 新增


		// 保存


		// 折叠效果


		// 查看


		// 取消保存


		// 点击

	}, {
		key: 'checkFormValidate',
		value: function checkFormValidate() {
			console.log("EditableFormRow=>", EditableFormRow);
			// this.props.form.validateFields((err, values) => {
			// 	if (!err) {
			// 		console.log('Received values of form: ', values);
			// 	}else{
			//
			// 	}
			// });
		}
	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    subTaskDis = _state.subTaskDis;
			var _props2 = this.props,
			    disabled = _props2.disabled,
			    tableType = _props2.tableType,
			    selectedRows = _props2.selectedRows,
			    pDataList = _props2.pDataList;

			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '序号', dataIndex: 'keyIndex', align: 'left', width: '50px'
			}, {
				title: '决策事项',
				dataIndex: 'item',
				editable: !disabled && !isChaijie,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '决策等级',
				dataIndex: 'level',
				width: '25%',
				editable: !disabled,
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
							className: 'pr' },
						_this4.showDecisionLevelInfo(text)
					);
				}
			}];
			if (!disabled) {
				columnEle = [{
					title: '操作', dataIndex: 'caozuo', align: 'left', editable: !disabled, width: '50px',
					render: function render(text, record) {
						//rendcell 实现操作业务
						return _react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' });
					}
				}].concat(columnEle);
			}
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							pDataList: pDataList,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete,
							checkForm: _this4.checkForm
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTableThreeItemMatter;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableThreeItemMatter;

/***/ }),

/***/ 1876:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _PersonAdd = __webpack_require__(1878);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: []
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				//this.toggleEdit();
				delete values["beginTime"];
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.saveDate = function (date, dateString) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('beginTime')) {
					values["beginTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.saveDate2 = function (date, dateString) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('endTime')) {
					values["endTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["beginTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.updatePerson = function (users) {
			var _this2$props4 = _this2.props,
			    record = _this2$props4.record,
			    handleSave = _this2$props4.handleSave,
			    handleSave2 = _this2$props4.handleSave2;

			var data = {};
			var userIds = void 0;
			if (users.length) {
				userIds = users;
			} else {
				userIds = [];
			}
			data["masters"] = userIds;
			// if(users.length>0){
			// 	data["masterName"] = userIds[0]['userName'];
			// 	data["masterId"] = userIds[0]['userId'];
			// }
			handleSave2(_extends({}, record, data));
		}, _this2.onBlur = function () {}
		//this.toggleEdit();

		//设置开始日期不能选择的时间
		, _this2.disabledStartDate = function (startValue) {
			var record = _this2.props.record;

			if (!startValue || !record.endTime) {
				return false;
			}
			return startValue.valueOf() > record.endTime.valueOf();
		}, _this2.disabledEndDate = function (endValue) {
			var record = _this2.props.record;

			if (!endValue || !record.beginTime) {
				return false;
			}
			return endValue.valueOf() <= record.beginTime.valueOf();
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props5 = _this2.props,
			    children = _this2$props5.children,
			    dataIndex = _this2$props5.dataIndex,
			    record = _this2$props5.record,
			    title = _this2$props5.title,
			    handleDelete = _this2$props5.handleDelete;
			var editing = _this2.state.editing;

			if (dataIndex == 'name') {
				// 部位
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(record['key'] >= 2 ? _react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
									return handleDelete(record);
								} },
							_react2.default.createElement(_antd.Icon, {
								style: {
									width: '35px',
									color: '#F17E7E',
									fontSize: '20px',
									float: 'left'
								},
								type: 'minus-circle' })
						),
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save,
							onBlur: _this2.save
						})
					) : _react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save,
							onBlur: _this2.save
						})
					))
				) : _react2.default.createElement(
					'div',
					{ className: 'w clearfix' },
					_react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return handleDelete(record);
							} },
						_react2.default.createElement(_antd.Icon, {
							style: {
								width: '35px',
								color: '#F17E7E',
								fontSize: '22px',
								float: 'left'
							},
							type: 'minus-circle' })
					),
					_react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: {
								float: 'right',
								width: 'calc(100% - 35px)',
								minHeight: '31px'
							},
							onClick: _this2.toggleEdit
						},
						children
					)
				);
			} else if (dataIndex == 'masters') {
				// 负责人
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'w' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map(function (item) {
							return item.userId;
						})
					})(_react2.default.createElement(
						'div',
						{ className: 'w', ref: function ref(node) {
								return _this2.input = node;
							} },
						_react2.default.createElement(_PersonAdd2.default, {
							data: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex],
							updatePerson: _this2.updatePerson,
							disabled: false
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit },
					children
				);
			} else if (dataIndex == 'projectScale') {
				// 规模
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u89C4\u6A21\uFF1A\u8BF7\u586B\u5199\u7BB1\u4F53\u6570\u91CF'
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else {
				// 地点
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u5730\u70B9\uFF1A\u8BF7\u586B\u5199\u5B50\u9879\u76EE\u5730\u5740'
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this2.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}
	//日期格式保存

	//设置结束不能选择的时间


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableThreeItemPolicy = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableThreeItemPolicy, _React$Component2);

	function EditableTableThreeItemPolicy(props) {
		_classCallCheck(this, EditableTableThreeItemPolicy);

		var _this3 = _possibleConstructorReturn(this, (EditableTableThreeItemPolicy.__proto__ || Object.getPrototypeOf(EditableTableThreeItemPolicy)).call(this, props));

		_this3.handleDelete = function (record) {
			var id = record.id,
			    key = record.key;

			if (id !== "" && id !== null && !id.startsWith("!")) {
				// 删除原来已有的
				_this3.store.delNode(id).then(function (res) {
					if (res) {
						_antd.message.success("删除成功");
						var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
						_this3.setState({
							dataSource: dataSource.filter(function (item) {
								return item.key !== key;
							})
						}, function () {
							_this3.props.saveData(_this3.state.dataSource);
						});
					} else {
						_antd.message.error("删除失败");
					}
				});
			} else {
				// 删除新增的
				var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
				_this3.setState({
					dataSource: dataSource.filter(function (item) {
						return item.key !== key;
					})
				}, function () {
					_this3.props.saveData(_this3.state.dataSource, key);
				});
			}
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				_this3.props.saveData(_this3.state.dataSource);
			});
		};

		_this3.handleSave2 = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				_this3.props.saveData(_this3.state.dataSource);
			});
			_this3.props.saveData2(row);
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onCalac = function (key) {
			_this3.saveExpandedRows(key);
			_this3.store.isEdit = false;
			// 更新tree
			var treeData = JSON.parse(JSON.stringify(_this3.store.treeData));
			_this3.store.treeData = utils.updateTreeData(treeData, "update", _this3.state.activeObj);
			_this3.subtask.clearState();
			_this3.setState({
				activeObj: Object.assign({})
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"name": "",
				"masters": [],
				"projectScale": "",
				"address": ""
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTableThreeItemPolicy, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"name": "",
						"masterName": "",
						"projectScale": "",
						"address": ""
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"name": "",
					"masters": [],
					"projectScale": "",
					"address": ""
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		// 保存2


		// 折叠效果


		// 查看


		// 取消保存


		// 点击

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    subTaskDis = _state.subTaskDis;
			var _props2 = this.props,
			    disabled = _props2.disabled,
			    tableType = _props2.tableType,
			    selectedRows = _props2.selectedRows;

			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '序号', dataIndex: 'keyIndex', align: 'center', width: '50px'
			}, {
				title: '决策等级', dataIndex: 'level', align: 'center', width: '100px'
			}, {
				title: '决策人员',
				dataIndex: 'masters',
				align: "right",
				editable: !disabled && !isChaijie,
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						_react2.default.createElement(_PersonAdd2.default, {
							data: text,
							disabled: true
						})
					);
				}
			}];
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleSave2: _this4.handleSave2,
							handleDelete: _this4.handleDelete
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px', display: 'none' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTableThreeItemPolicy;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableThreeItemPolicy;

/***/ }),

/***/ 1877:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _PersonAdd = __webpack_require__(1545);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

var _ProgressTarget = __webpack_require__(1968);

var _ProgressTarget2 = _interopRequireDefault(_ProgressTarget);

var _ProgressPromise = __webpack_require__(1967);

var _ProgressPromise2 = _interopRequireDefault(_ProgressPromise);

var _QualityTarget = __webpack_require__(1970);

var _QualityTarget2 = _interopRequireDefault(_QualityTarget);

var _QualityPromise = __webpack_require__(1969);

var _QualityPromise2 = _interopRequireDefault(_QualityPromise);

var _ProfitTarget = __webpack_require__(1966);

var _ProfitTarget2 = _interopRequireDefault(_ProfitTarget);

var _Cost = __webpack_require__(1961);

var _Cost2 = _interopRequireDefault(_Cost);

var _Marketing = __webpack_require__(1963);

var _Marketing2 = _interopRequireDefault(_Marketing);

var _SafetyTarget = __webpack_require__(1972);

var _SafetyTarget2 = _interopRequireDefault(_SafetyTarget);

var _SafetyPromise = __webpack_require__(1971);

var _SafetyPromise2 = _interopRequireDefault(_SafetyPromise);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var TextArea = _antd.Input.TextArea;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true, //false,
			userIds: []
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.showCurrentCell = function (keyIndex) {
			if (keyIndex === 1) {
				return false;
			}
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				//this.toggleEdit();
				delete values["beginTime"];
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.saveDate = function (date, dateString) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('beginTime')) {
					values["beginTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.saveDate2 = function (date, dateString) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('endTime')) {
					values["endTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["beginTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this2.updatePerson = function (users) {
			var _this2$props4 = _this2.props,
			    record = _this2$props4.record,
			    handleSave = _this2$props4.handleSave;

			var data = {};
			var userIds = void 0;
			if (users.length) {
				userIds = users;
			} else {
				userIds = [];
			}
			data["masters"] = userIds;
			// if(users.length>0){
			// 	data["masterName"] = userIds[0]['userName'];
			// 	data["masterId"] = userIds[0]['userId'];
			// }
			handleSave(_extends({}, record, data));
		}, _this2.updateData = function (key, value) {
			console.log(key, value);
		}, _this2.handleProgressTarget = function (key, value) {
			console.log('progressTarget' + key, value);
			_this2.props.handleMainCell(key, value);
		}, _this2.handleProgressPromise = function (key, value) {
			console.log('promiseTarget' + key, value);
			_this2.props.handleMainCell(key, value);
		}, _this2.handleQualityTarget = function (key, value) {
			console.log('qualityTarget' + key, value);
			_this2.props.handleMainCell(key, value);
		}, _this2.handleQualityPromise = function (key, value) {
			console.log('qualityPromise' + key, value);
			_this2.props.handleMainCell(key, value);
		}, _this2.handleProfit = function (key, value) {
			_this2.props.handleMainCell(key, value);
		}, _this2.handleCost = function (key, value) {
			_this2.props.handleMainCell(key, value);
		}, _this2.handleMarketing = function (key, value) {
			_this2.props.handleMainCell(key, value);
		}, _this2.handleSafetyTarget = function (key, value) {
			console.log('safeTarget' + key, value);
			_this2.props.handleMainCell(key, value);
		}, _this2.handleSafetyPromise = function (key, value) {
			console.log('safePromise' + key, value);
			_this2.props.handleMainCell(key, value);
		}, _this2.onBlur = function () {
			//this.toggleEdit();
		}, _this2.handleRemoveItem = function (id) {
			var handleDelete = _this2.props.handleDelete;

			handleDelete(id);
		}, _this2.disabledStartDate = function (startValue) {
			var record = _this2.props.record;

			if (!startValue || !record.endTime) {
				return false;
			}
			return startValue.valueOf() > record.endTime.valueOf();
		}, _this2.disabledEndDate = function (endValue) {
			var record = _this2.props.record;

			if (!endValue || !record.beginTime) {
				return false;
			}
			return endValue.valueOf() <= record.beginTime.valueOf();
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props5 = _this2.props,
			    children = _this2$props5.children,
			    dataIndex = _this2$props5.dataIndex,
			    record = _this2$props5.record,
			    title = _this2$props5.title,
			    handleDelete = _this2$props5.handleDelete;
			var editing = _this2.state.editing;

			if (dataIndex == 'name') {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(record['key'] >= 2 ? _react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
									return handleDelete(record);
								} },
							_react2.default.createElement(_antd.Icon, {
								style: {
									width: '35px',
									color: '#F17E7E',
									fontSize: '20px',
									float: 'left'
								},
								type: 'minus-circle' })
						),
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save,
							onBlur: _this2.save
						})
					) : _react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100% - 35px)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this2.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this2.save,
							onBlur: _this2.save
						})
					))
				) : _react2.default.createElement(
					'div',
					{ className: 'w clearfix' },
					_react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return handleDelete(record);
							} },
						_react2.default.createElement(_antd.Icon, {
							style: {
								width: '35px',
								color: '#F17E7E',
								fontSize: '22px',
								float: 'left'
							},
							type: 'minus-circle' })
					),
					_react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: {
								float: 'right',
								width: 'calc(100% - 35px)',
								minHeight: '31px'
							},
							onClick: _this2.toggleEdit
						},
						children
					)
				);
			} else if (dataIndex == 'caozuo') {
				return record['dataType'] === 'item' ? _react2.default.createElement(
					_antd.Popconfirm,
					{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
							_this2.handleRemoveItem('' + record.id);
						} },
					_react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' })
				) : _react2.default.createElement('span', null);
			} else if (dataIndex == 'item') {
				// 规模
				return editing && record['dataType'] === 'item' ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(TextArea, {
						rows: 3,
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						style: { marginTop: "10px" }
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			} else if (dataIndex == 'targetValue') {
				// 规模
				return editing && record['dataType'] === 'main' ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0, width: '100%' }, className: 'w' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: {}
					})(record['keyIndex'] === 1 ? _react2.default.createElement(_ProgressTarget2.default, { updateData: _this2.handleProgressTarget }) : record['keyIndex'] === 2 ? _react2.default.createElement(_QualityTarget2.default, { updateData: _this2.handleQualityTarget, label: '\u9A8C\u6536\u6B21\u6570' }) : record['keyIndex'] === 3 ? _react2.default.createElement(_ProfitTarget2.default, { updateData: _this2.handleProfit }) : record['keyIndex'] === 4 ? _react2.default.createElement(_Cost2.default, { updateData: _this2.handleCost, label: '\u7ED9\u7532\u65B9\u4ED8\u6B3E\u540E' }) : record['keyIndex'] === 5 ? _react2.default.createElement(_Marketing2.default, { updateData: _this2.handleMarketing, label: '' }) : record['keyIndex'] === 6 ? _react2.default.createElement(_SafetyTarget2.default, { updateData: _this2.handleSafetyTarget, label: '\u5B89\u5168\u4E8B\u6545', label2: '\u5B89\u5168\u9690\u60A3', tipInfo: '\u6B7B\u4EA1\u3001\u91CD\u4F24\u3001\u8F7B\u4F24', tipInfo2: '\u91CD\u5927\u4E8B\u6545\u9690\u60A3' }) : _react2.default.createElement('span', null))
				) : _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(TextArea, {
						rows: 3,
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				);
			} else if (dataIndex == 'promiseValue') {
				// 规模
				return editing && record['dataType'] === 'main' ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0, width: '100%' }, className: 'w' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: {}
					})(record['keyIndex'] === 1 ? _react2.default.createElement(_ProgressPromise2.default, { updateData: _this2.handleProgressPromise }) : record['keyIndex'] === 2 ? _react2.default.createElement(_QualityPromise2.default, { updateData: _this2.handleQualityPromise, label: '\u8D28\u91CF\u4E8B\u6545' }) : record['keyIndex'] === 3 ? _react2.default.createElement('span', null) : record['keyIndex'] === 4 ? _react2.default.createElement('span', null) : record['keyIndex'] === 5 ? _react2.default.createElement('span', null) : record['keyIndex'] === 6 ? _react2.default.createElement(_SafetyPromise2.default, { updateData: _this2.handleSafetyPromise, label: '\u5B89\u5168\u4E8B\u6545', label2: '\u5B89\u5168\u9690\u60A3', tipInfo: '\u6B7B\u4EA1\u3001\u91CD\u4F24\u3001\u8F7B\u4F24', tipInfo2: '\u91CD\u5927\u4E8B\u6545\u9690\u60A3' }) : _react2.default.createElement('span', null))
				) : _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(TextArea, {
						rows: 3,
						ref: function ref(node) {
							return _this2.input = node;
						},
						onPressEnter: _this2.save,
						onBlur: _this2.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				);
			} else {
				// 地点
				return record[dataIndex];
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}
	//日期格式保存


	//设置开始日期不能选择的时间

	//设置结束不能选择的时间


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableTwoItem = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableTwoItem, _React$Component2);

	function EditableTableTwoItem(props) {
		_classCallCheck(this, EditableTableTwoItem);

		var _this3 = _possibleConstructorReturn(this, (EditableTableTwoItem.__proto__ || Object.getPrototypeOf(EditableTableTwoItem)).call(this, props));

		_this3.handleDelete = function (id) {
			var taskDetail = _this3.store.taskDetail;

			_this3.store.delBuildTeamTwoItem({ "id": id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this3.store.getBuildTeamTwoItemList({ "taskId": taskDetail.id }).then(function (res) {
						_this3.props.saveData(res);
					});
				} else {
					_antd.message.error("删除失败");
				}
			});
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    dataSource = _this3$state.dataSource,
			    primaryData = _this3$state.primaryData,
			    count = _this3$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				// this.props.saveData(this.state.dataSource);
			});

			var id = newData.id,
			    newItem = _objectWithoutProperties(newData, ['id']);

			_this3.props.saveItem(newItem);
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData }, function () {
				// 更新保存数据
				// this.props.saveData(this.state.dataSource);
			});
			_this3.props.saveItem(newData[index]);
		};

		_this3.handleMainCell = function (key, value) {
			var newObj = {};
			newObj[key] = value;
			var buildTeamTwoMainObj = _this3.store.buildTeamTwoMainObj;

			_this3.store.saveBuildTeamTwoMain({ "bttm": Object.assign(mobx.toJS(buildTeamTwoMainObj), newObj) }).then(function (res) {
				_this3.store.buildTeamTwoMainObj = res;
			});
		};

		_this3.saveExpandedRows = function (key) {
			var _this = _this3;
			var keys = _this.state.keys;

			if (keys.indexOf(key) >= 0) {
				keys.splice(keys.indexOf(key), 1);
			} else {
				keys.push(key);
			}
			_this.setState({
				expandedKeys: keys
			}, function () {
				var obj = _defineProperty({}, _this.props.id, keys);
				var expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));
				_this.store.expandedKeys = Object.assign(expandedKeys, obj);
			});
		};

		_this3.handleView = function (record) {
			_this3.setState({
				subTaskDis: true // 不可编辑
			}, function () {
				_this3.saveExpandedRows(record);
			});
		};

		_this3.onCalac = function (key) {
			_this3.saveExpandedRows(key);
			_this3.store.isEdit = false;
			// 更新tree
			var treeData = JSON.parse(JSON.stringify(_this3.store.treeData));
			_this3.store.treeData = utils.updateTreeData(treeData, "update", _this3.state.activeObj);
			_this3.subtask.clearState();
			_this3.setState({
				activeObj: Object.assign({})
			});
		};

		_this3.onRow = function (record) {
			var disabled = _this3.props.disabled;

			var subTasks = record.children == null ? [] : record.children.filter(function (item) {
				return item.treeType === 'subtask';
			});
			var subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length;
			if (disabled && subNumber > 0) {
				// 详情态
				_this3.handleView(record.id);
			}
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"item": "",
				"targetValue": "",
				"promiseValue": ""
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			subtasks: [],
			activeObj: {}, // 记录拆解前主任务数据
			activeSub: [], // 记录拆解前子任务数据
			subTaskDis: false // 控制子任务的编辑状态
		};
		return _this3;
	}

	_createClass(EditableTableTwoItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource !== undefined && nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item == undefined ? {} : item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"item": "",
						"targetValue": "",
						"promiseValue": ""
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"item": "",
					"targetValue": "",
					"promiseValue": ""
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		// 折叠效果


		// 查看


		// 取消保存


		// 点击

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    subTaskDis = _state.subTaskDis;
			var _props2 = this.props,
			    disabled = _props2.disabled,
			    tableType = _props2.tableType,
			    selectedRows = _props2.selectedRows;

			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '序号', dataIndex: 'keyIndex', align: 'left', width: '5%', render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{ style: { marginTop: '10px' } },
						text
					);
				}
			}, {
				title: '目标项',
				dataIndex: 'item',
				width: '10%',
				editable: !disabled,
				align: "left",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%', height: '46px', lineHeight: '46px' },
							className: 'pr' },
						text
					);
				}
			}, {
				title: '内控目标值',
				dataIndex: 'targetValue',
				width: '45%',
				editable: !disabled && !isChaijie,
				align: "left",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%' },
							className: 'pr' },
						Array.isArray(record.targetValue) ? record.targetValue.map(function (item, index) {
							return _react2.default.createElement(
								'div',
								{ style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' } },
								item
							);
						}) : text
					);
				}
			}, {
				title: '对外承诺目标值',
				dataIndex: 'promiseValue',
				width: '45%',
				align: "left",
				editable: !disabled && !isChaijie,
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							id: '' + record.id,
							onClick: _this4.onRow.bind(_this4, record),
							style: { width: '100%' },
							className: 'pr' },
						Array.isArray(record.promiseValue) ? record.promiseValue.map(function (item, index) {
							return _react2.default.createElement(
								'div',
								{ style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' } },
								item
							);
						}) : text
					);
				}
			}];
			if (!disabled) {
				columnEle = [{
					title: '操作', dataIndex: 'caozuo', width: '5%', align: 'left', editable: !disabled,
					render: function render(text, record) {
						return _react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' });
					}
				}].concat(columnEle);
			}
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete,
							handleMainCell: _this4.handleMainCell
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					expandRowByClick: true,
					expandIconAsCell: false,
					expandIconColumnIndex: -1,
					expandedRowKeys: expandedKeys,
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px' },
					type: 'plus-circle' })
			);
		}
	}]);

	return EditableTableTwoItem;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableTwoItem;

/***/ }),

/***/ 1878:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd2 = (_dec = (0, _mobxReact.inject)('UserStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd2, _React$Component);

	function PersonAdd2(props) {
		_classCallCheck(this, PersonAdd2);

		var _this = _possibleConstructorReturn(this, (PersonAdd2.__proto__ || Object.getPrototypeOf(PersonAdd2)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var users = dataArray.filter(function (res) {
				return res.selected == true;
			}).map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: "",
				data: Object.assign([], _this.state.defaultData)
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: _this.props.data, // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [] // 筛选数据
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd2, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.stringify(nextProps.data) != JSON.stringify(this.props.data)) {
				this.setState({
					oldSelect: nextProps.data
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var params = "";
			// 未选的全部用户
			this.props.UserStore.getRole(params).then(function (res) {
				_this3.setState({
					defaultData: res.body.map(function (item) {
						return Object.assign(item, { selected: false });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text;
			var _props = this.props,
			    disabled = _props.disabled,
			    title = _props.title;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					disabled ? "" : _react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: title == undefined ? "添加负责人" : title,
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								data && data.filter(function (res) {
									return res.selected == true;
								}).length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								data.filter(function (res) {
									return res.selected == true;
								}).length > 0 && data.filter(function (res) {
									return res.selected == true;
								}).map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd2;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd2;

/***/ }),

/***/ 1879:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 分页、下拉选择
                  *dangw@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobxReact = __webpack_require__(22);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var PageSelect2 = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PageSelect2, _React$Component);

	function PageSelect2(props) {
		_classCallCheck(this, PageSelect2);

		var _this = _possibleConstructorReturn(this, (PageSelect2.__proto__ || Object.getPrototypeOf(PageSelect2)).call(this, props));

		_this.state = {
			fetching: false,
			text: "", //关键字
			companyData: [],
			pageIndex: 1,
			pageSize: 10
		};

		_this.onFocus = function () {
			_this.setState({
				text: "", //关键字
				pageIndex: 1,
				pageSize: 10
			}, function () {
				_this.getCompanyList(); // 调用api方法
			});
		};

		_this.companyScroll = function (e) {
			e.persist();
			var target = e.target;
			var type = _this.props.type;

			if (target.scrollTop + target.offsetHeight === target.scrollHeight) {
				var _this$state = _this.state,
				    pageIndex = _this$state.pageIndex,
				    pageSize = _this$state.pageSize,
				    text = _this$state.text,
				    companyData = _this$state.companyData;

				var nextScrollPage = pageIndex + 1;
				_this.setState({
					pageIndex: nextScrollPage
				}, function () {
					var old = JSON.parse(JSON.stringify(companyData));
					var params = {
						text: text,
						pageIndex: _this.state.pageIndex,
						pageSize: pageSize,
						code: ""
					};
					_this.store.getMachineByCode(type, params).then(function (res) {
						if (res) {
							_this.setState({
								companyData: [].concat(_toConsumableArray(old), _toConsumableArray(res.body))
							});
						}
					});
				});
			}
		};

		_this.fetchCompany = function (value) {
			_this.setState({ companyData: [], fetching: true, text: value }, function () {
				_this.getCompanyList(); // 关键字模糊查询api
			});
		};

		_this.getCompanyList = function () {
			var text = _this.state.text;
			var type = _this.props.type;

			var params = {
				text: text,
				pageIndex: 1,
				pageSize: 10,
				code: ""
			};
			_this.store.getMachineByCode(type, params).then(function (res) {
				_this.setState({
					companyData: Object.assign([], Array.isArray(res.body) ? res.body : [])
				});
			});
		};

		_this.setCheckNum = function (val, e) {
			var item = e.props.val || {};
			// 更新父组件的方法
			_this.props.updateStore(item);
		};

		_this.store = _this.props.DeliveryStore;
		return _this;
	}

	_createClass(PageSelect2, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.onFocus();
		}
	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    companyData = _state.companyData,
			    fetching = _state.fetching;
			var _props = this.props,
			    value = _props.value,
			    name = _props.name,
			    disabled = _props.disabled;

			var isFlag = companyData && companyData.some(function (item) {
				return item.id === value;
			});
			return _react2.default.createElement(
				_antd.Select,
				{
					disabled: disabled,
					style: { width: '100%' },
					showSearch: true,
					placeholder: '\u8BF7\u9009\u62E9',
					notFoundContent: fetching ? _react2.default.createElement(_antd.Spin, { size: 'small' }) : null,
					onSearch: this.fetchCompany,
					onChange: this.setCheckNum,
					onPopupScroll: this.companyScroll,
					filterOption: false,
					onFocus: this.onFocus,
					value: isFlag ? value : name
				},
				companyData && companyData.map(function (item) {
					return _react2.default.createElement(
						Option,
						{ value: item.id, key: item.id, title: item.name, val: item },
						item.name
					);
				})
			);
		}
	}]);

	return PageSelect2;
}(_react2.default.Component)) || _class) || _class);
exports.default = PageSelect2;

/***/ }),

/***/ 1880:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            *表二详情
            *dangw@bocspace.cn
            */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _antd = __webpack_require__(17);

var _TimelineTable = __webpack_require__(1993);

var _TimelineTable2 = _interopRequireDefault(_TimelineTable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TwoItemView = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(TwoItemView, _React$Component);

	function TwoItemView(props) {
		_classCallCheck(this, TwoItemView);

		var _this = _possibleConstructorReturn(this, (TwoItemView.__proto__ || Object.getPrototypeOf(TwoItemView)).call(this, props));

		_this.store = _this.props.store;
		_this.state = {};
		return _this;
	}

	_createClass(TwoItemView, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    dataSource = _props.dataSource,
			    dataSourceTwo = _props.dataSourceTwo,
			    type = _props.type,
			    disabled = _props.disabled;

			var columns = [{
				title: '施工任务',
				dataIndex: 'name',
				key: 'name',
				align: 'left',
				width: "100px",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{ style: {
								paddingLeft: record.level * 10 + "px"
							} },
						(record.code == null ? "" : record.code) + " " + record.name
					);
				}
			}, {
				title: _react2.default.createElement(
					'div',
					{ style: { width: "56px" } },
					_react2.default.createElement(
						'p',
						null,
						type == "three" ? "剩余用时" : "标准用时"
					),
					_react2.default.createElement(
						'p',
						null,
						'\uFF08\u5929\uFF09'
					)
				),
				dataIndex: 'needWorkTime',
				key: 'needWorkTime',
				align: 'center',
				width: "90px"
			}, {
				title: '计划开始时间',
				dataIndex: 'planBeginTime',
				key: 'planBeginTime',
				align: 'center',
				width: "90px",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						null,
						text !== 0 && text !== null && text !== undefined ? (0, _moment2.default)(text).format('MM月DD日') : ''
					);
				}
			}, {
				title: '计划完成时间',
				dataIndex: 'planEndTime',
				key: 'planEndTime',
				align: 'center',
				width: "90px",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						null,
						text !== 0 && text !== null && text !== undefined ? (0, _moment2.default)(text).format('MM月DD日') : ''
					);
				}
			}];

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					_antd.Button,
					{
						disabled: disabled,
						className: this.props.currentStep == 3 ? "hidden" : "mb10",
						ghost: true,
						type: 'primary',
						icon: 'poweroff',
						onClick: this.props.reStartHandover
					},
					'\u91CD\u65B0\u542F\u52A8'
				),
				_react2.default.createElement(
					'div',
					{ className: 'clearfix' },
					_react2.default.createElement(
						'div',
						{ className: "fl",
							style: { width: '480px' } },
						_react2.default.createElement(_antd.Table, {
							dataSource: dataSource.filter(function (item) {
								return item.name !== "材料运输";
							}),
							columns: columns,
							pagination: false,
							bordered: true,
							className: 'agenda_nohover construction_table',
							rowClassName: function rowClassName(record) {
								if (record.currentProgress == 100 || record.needWorkTime == 0) {
									return "construct_trfive";
								} else {
									if (record.level == 0) {
										return "construct_trone";
									} else if (record.level == 1) {
										return "construct_trtwo";
									} else if (record.level == 2) {
										return "construct_trthree";
									} else {
										return "";
									}
								}
							}
						})
					),
					_react2.default.createElement(
						'div',
						{ className: "fl ",
							style: {
								width: 'calc(100% - 480px)',
								paddingLeft: "15px"
							} },
						_react2.default.createElement(
							_antd.Spin,
							{
								tip: '\u6B63\u5728\u52A0\u8F7D\uFF0C\u8BF7\u7A0D\u7B49......',
								spinning: disabled
							},
							_react2.default.createElement(_TimelineTable2.default, {
								dataSource: dataSourceTwo
							})
						)
					)
				)
			);
		}
	}]);

	return TwoItemView;
}(_react2.default.Component)) || _class;

exports.default = TwoItemView;

/***/ }),

/***/ 1881:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd, _React$Component);

	function PersonAdd(props) {
		_classCallCheck(this, PersonAdd);

		var _this = _possibleConstructorReturn(this, (PersonAdd.__proto__ || Object.getPrototypeOf(PersonAdd)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var users = dataArray.filter(function (res) {
				return res.selected == true;
			}).map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: "",
				data: Object.assign([], _this.state.defaultData)
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			dataArray.map(function (item) {
				return Object.assign(item, { selected: false });
			});
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: _this.props.data, // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [] // 筛选数据
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.stringify(nextProps.data) != JSON.stringify(this.props.data)) {
				this.setState({
					oldSelect: nextProps.data || []
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			// 未选的全部用户
			this.props.DeliveryStore.getBuildTeamOneItemListByProjectId().then(function (res) {
				_this3.setState({
					defaultData: res.map(function (item) {
						return Object.assign(item, { selected: false, realname: item.userName });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text;
			var disabled = this.props.disabled;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect != null && oldSelect != undefined && oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							{ key: index },
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					_react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: '\u6DFB\u52A0\u4E3B\u5BF9\u63A5\u4EBA',
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								data && data.filter(function (res) {
									return res.selected == true;
								}).length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								data.filter(function (res) {
									return res.selected == true;
								}).length > 0 && data.filter(function (res) {
									return res.selected == true;
								}).map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd;

/***/ }),

/***/ 1882:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _numeral = __webpack_require__(1901);

var _numeral2 = _interopRequireDefault(_numeral);

var _mobxReact = __webpack_require__(22);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件 合同清单组件
                                                                                                                                                                                                                             * */


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
    var form = _ref.form,
        index = _ref.index,
        props = _objectWithoutProperties(_ref, ['form', 'index']);

    return _react2.default.createElement(
        EditableContext.Provider,
        { value: form },
        _react2.default.createElement('tr', props)
    );
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
    _inherits(EditableCell, _React$Component);

    function EditableCell() {
        var _ref2;

        var _temp, _this, _ret;

        _classCallCheck(this, EditableCell);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {
            editing: false
        }, _this.toggleEdit = function () {
            var editing = !_this.state.editing;
            _this.setState({ editing: editing }, function () {
                if (editing) {
                    _this.input.focus();
                }
            });
        }, _this.save = function (e) {
            var _this$props = _this.props,
                record = _this$props.record,
                handleSave = _this$props.handleSave;

            _this.form.validateFields(function (error, values) {
                if (error && error[e.currentTarget.id]) {
                    return;
                }
                _this.toggleEdit();
                var dataIndex = e.currentTarget.id;
                var obj = {};
                if (dataIndex == 'count') {
                    var count = values["count"] == null || values["count"] == undefined ? 0 : values["count"];
                    var prize = record["prize"] == null || record["prize"] == undefined ? 0 : record["prize"];
                    obj.total = count * prize;
                }
                if (dataIndex == 'prize') {
                    var _count = record["count"] == null || record["count"] == undefined ? 0 : record["count"];
                    var _prize = values["prize"] == null || values["prize"] == undefined ? 0 : values["prize"];
                    obj.total = _count * _prize;
                }
                handleSave(_extends({}, record, values, obj));
            });
        }, _this.renderCell = function (form) {
            _this.form = form;
            var _this$props2 = _this.props,
                children = _this$props2.children,
                dataIndex = _this$props2.dataIndex,
                record = _this$props2.record,
                title = _this$props2.title;
            var editing = _this.state.editing;


            if (dataIndex == 'count' || dataIndex == 'prize' || dataIndex == 'total') {
                // 数字金额
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(_antd.InputNumber, { ref: function ref(node) {
                            return _this.input = node;
                        }, onPressEnter: _this.save, onBlur: _this.save }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { minHeight: '31px' },
                        onClick: _this.toggleEdit
                    },
                    children
                );
            } else {
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
                            return _this.input = node;
                        }, onPressEnter: _this.save, onBlur: _this.save }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { minHeight: '31px' },
                        onClick: _this.toggleEdit
                    },
                    children
                );
            }
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(EditableCell, [{
        key: 'render',
        value: function render() {
            var _props = this.props,
                editable = _props.editable,
                dataIndex = _props.dataIndex,
                title = _props.title,
                record = _props.record,
                index = _props.index,
                handleSave = _props.handleSave,
                children = _props.children,
                restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

            return _react2.default.createElement(
                'td',
                restProps,
                editable ? _react2.default.createElement(
                    EditableContext.Consumer,
                    null,
                    this.renderCell
                ) : children
            );
        }
    }]);

    return EditableCell;
}(_react2.default.Component);

var EditableTableInventory = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
    _inherits(EditableTableInventory, _React$Component2);

    function EditableTableInventory(props) {
        _classCallCheck(this, EditableTableInventory);

        var _this2 = _possibleConstructorReturn(this, (EditableTableInventory.__proto__ || Object.getPrototypeOf(EditableTableInventory)).call(this, props));

        _this2.handleDelete = function () {
            if (_this2.state.selectedRowKeys.length == 0) {
                _antd.message.warn("请先选中一项");
                return false;
            }
            var dataSource = [].concat(_toConsumableArray(_this2.state.dataSource));
            var data = dataSource.filter(function (item) {
                return !_this2.state.selectedRowKeys.includes(item.key);
            }).map(function (v, vindex) {
                return Object.assign(v, { key: vindex + 1 });
            });
            _this2.setState({
                dataSource: data,
                count: data.length
            });
            _this2.props.updateState(data);
            _this2.setState({
                selectedRowKeys: []
            });
            _antd.message.success("删除成功");
        };

        _this2.handleAdd = function () {
            var _this2$state = _this2.state,
                count = _this2$state.count,
                dataSource = _this2$state.dataSource;
            var supplierTwoItem = _this2.store.supplierTwoItem;

            var obj = JSON.parse(JSON.stringify(supplierTwoItem));
            var newData = {
                key: count + 1,
                id: "",
                type: 2,
                taskId: "",
                supplierId: obj.id,
                supplierTwoId: "",
                position: "",
                positionId: "",
                categoryType: "",
                categoryTypeId: "",
                productDetail: "",
                productDetailId: "",
                units: "",
                count: null,
                prize: null,
                total: null,
                remarks: "",
                specification: "",
                rate: "13%"
            };
            _this2.setState({
                dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
                count: count + 1
            });
            _this2.props.updateState([].concat(_toConsumableArray(dataSource), [newData]));
        };

        _this2.handleSave = function (row) {
            var newData = [].concat(_toConsumableArray(_this2.state.dataSource));
            var index = newData.findIndex(function (item) {
                return row.key === item.key;
            });
            var item = newData[index];
            newData.splice(index, 1, _extends({}, item, row));
            _this2.setState({ dataSource: newData });
            _this2.props.updateState(newData);
        };

        _this2.onSelectChange = function (selectedRowKeys) {
            _this2.setState({ selectedRowKeys: selectedRowKeys });
        };

        _this2.onSelectChange2 = function (selectedRowKeys) {
            _this2.setState({ selectedRowKeys2: selectedRowKeys });
        };

        _this2.showModal = function () {
            var params = {
                id: _this2.store.projectId
            };
            _this2.store.getSupplierContractListByProjectId(params).then(function (res) {
                _this2.setState({
                    dataSource2: res == null ? [] : res.map(function (item) {
                        return Object.assign(item, {
                            supplierTwoId: _this2.props.fields.id,
                            taskId: _this2.props.fields.taskId
                        });
                    }),
                    visible: true
                });
            });
        };

        _this2.handleOk = function (e) {
            var data = [].concat(_toConsumableArray(_this2.state.dataSource2));
            var newData = data.filter(function (item) {
                return _this2.state.selectedRowKeys2.includes(item.parentId);
            });
            _this2.props.updateState(newData);
            _this2.setState({
                visible: false
            });
        };

        _this2.handleCancel = function (e) {
            _this2.setState({
                visible: false
            });
        };

        _this2.store = _this2.props.store;
        _this2.state = {
            dataSource: [],
            count: 0,
            selectedRowKeys: [],
            selectedRowKeys2: [],
            visible: false,
            dataSource2: []
        };
        return _this2;
    }

    _createClass(EditableTableInventory, [{
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps, nextContext) {
            var _this3 = this;

            if (JSON.stringify(nextProps.dataSource) != JSON.stringify(this.props.dataSource)) {
                var _list = nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (v, vindex) {
                    return Object.assign(v, { rate: "13%", key: vindex + 1 });
                });
                this.setState({
                    dataSource: _list,
                    count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length
                }, function () {
                    var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
                    _this3.setState({
                        selectedRowKeys2: dataSource.map(function (item) {
                            return item.parentId;
                        })
                    });
                });
            }
        }
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {
            var _this4 = this;

            if (this.props.dataSource) {
                var _list = this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (v, vindex) {
                    return Object.assign(v, { rate: "13%", key: vindex + 1 });
                });
                this.setState({
                    dataSource: _list,
                    count: this.props.dataSource == null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length
                }, function () {
                    var dataSource = JSON.parse(JSON.stringify(_this4.state.dataSource));
                    _this4.setState({
                        selectedRowKeys2: dataSource.map(function (item) {
                            return item.parentId;
                        })
                    });
                });
            }
        }
    }, {
        key: 'render',
        value: function render() {
            var _this5 = this;

            var _state = this.state,
                dataSource = _state.dataSource,
                selectedRowKeys = _state.selectedRowKeys,
                visible = _state.visible,
                selectedRowKeys2 = _state.selectedRowKeys2,
                dataSource2 = _state.dataSource2;

            var columnsOld = [{
                title: '序号',
                dataIndex: 'key',
                width: '70px',
                align: "center",
                render: function render(text, record, index) {
                    return '' + (index + 1);
                }
            }, {
                title: '部位',
                dataIndex: 'position',
                align: "center",
                width: "10%"
            }, {
                title: '产品类别',
                dataIndex: 'categoryType',
                align: "center",
                width: "10%"
            }, {
                title: '产品明细',
                dataIndex: 'proudctDetail',
                align: "center",
                width: "10%"
            }, {
                title: '规格尺寸',
                dataIndex: 'specification',
                align: "center",
                width: "10%"
            }, {
                title: '单位',
                dataIndex: 'units',
                align: "center",
                width: "10%"
            }, {
                title: '数量',
                dataIndex: 'count',
                align: "center",
                width: "10%"
            }, {
                title: '采购单价',
                dataIndex: 'prize',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%",
                render: function render(text, record) {
                    return text == null || text == 0 ? 0 : (0, _numeral2.default)(text).format('0,0');
                }
            }, {
                title: '合计金额',
                dataIndex: 'total',
                align: "center",
                width: "10%",
                render: function render(text, record) {
                    return text == null || text == 0 ? 0 : (0, _numeral2.default)(text).format('0,0');
                }
            }, {
                title: '税率',
                dataIndex: 'rate',
                align: "center",
                width: '50px'
            }, {
                title: '备注',
                dataIndex: 'remarks',
                align: "center",
                width: "10%"
            }];
            var columnsOld2 = [{
                title: '序号',
                dataIndex: 'key',
                width: '70px',
                align: "center",
                render: function render(text, record, index) {
                    return '' + (index + 1);
                }
            }, {
                title: '部位',
                dataIndex: 'position',
                align: "center",
                width: "10%"
            }, {
                title: '产品类别',
                dataIndex: 'categoryType',
                align: "center",
                width: "10%"
            }, {
                title: '产品明细',
                dataIndex: 'productDetail',
                align: "center",
                width: "10%"
            }, {
                title: '规格尺寸',
                dataIndex: 'specification',
                align: "center",
                width: "10%"
            }, {
                title: '单位',
                dataIndex: 'units',
                align: "center",
                width: "10%"
            }, {
                title: '数量',
                dataIndex: 'count',
                align: "center",
                width: "10%"
            }, {
                title: '销售单价',
                dataIndex: 'prize',
                align: "center",
                width: "10%",
                render: function render(text, record) {
                    return text == null || text == 0 ? 0 : (0, _numeral2.default)(text).format('0,0');
                }
            }, {
                title: '合计金额',
                dataIndex: 'total',
                align: "center",
                width: "10%",
                render: function render(text, record) {
                    return text == null || text == 0 ? 0 : (0, _numeral2.default)(text).format('0,0');
                }
            }, {
                title: '税率',
                dataIndex: 'rate',
                align: "center",
                width: '50px'
            }, {
                title: '备注',
                dataIndex: 'remarks',
                align: "center",
                width: "10%"
            }];
            var components = {
                body: {
                    row: EditableFormRow,
                    cell: EditableCell
                }
            };
            var columns = columnsOld.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this5.handleSave
                        };
                    }
                });
            });
            var disabled = this.props.disabled;

            var rowSelection = {
                selectedRowKeys: selectedRowKeys,
                onChange: this.onSelectChange
            };
            var arrquantitynew = dataSource.map(function (itemnew) {
                return itemnew.total == null ? 0 : itemnew.total; //单个
            });
            var total = dataSource.length > 0 ? arrquantitynew.reduce(function (n, m) {
                return n + m;
            }) : 0;
            var rowSelection2 = {
                selectedRowKeys: selectedRowKeys2,
                onChange: this.onSelectChange2
            };

            return _react2.default.createElement(
                'div',
                null,
                disabled ? null : _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        _antd.Button,
                        {
                            onClick: this.showModal,
                            ghost: true,
                            type: 'primary',
                            icon: 'plus-circle',
                            style: { paddingLeft: "8px", paddingRight: "8px", marginTop: "10px" }
                        },
                        '\u9009\u62E9\u9500\u552E\u5408\u540C\u6E05\u5355'
                    ),
                    _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
                                return _this5.handleDelete();
                            } },
                        _react2.default.createElement(
                            _antd.Button,
                            {
                                ghost: true,
                                type: 'primary',
                                icon: 'delete',
                                style: { marginLeft: "15px", paddingLeft: "8px", paddingRight: "8px", marginTop: "10px" }
                            },
                            '\u5220\u9664'
                        )
                    )
                ),
                _react2.default.createElement(_antd.Table, {
                    rowSelection: disabled ? null : rowSelection,
                    components: components,
                    rowClassName: function rowClassName() {
                        return 'editable-row';
                    },
                    className: 'expand_table bpm_table mt10',
                    bordered: true,
                    dataSource: dataSource,
                    columns: columns,
                    pagination: false,
                    footer: function footer() {
                        return '合计: ' + (0, _numeral2.default)(total).format('0,0');
                    }
                }),
                _react2.default.createElement(
                    _antd.Modal,
                    {
                        style: { width: "60%", minWidth: "1000px" },
                        title: '\u9009\u62E9\u9500\u552E\u5408\u540C\u6E05\u5355',
                        visible: visible,
                        onOk: this.handleOk,
                        onCancel: this.handleCancel
                    },
                    _react2.default.createElement(_antd.Table, {
                        rowSelection: rowSelection2,
                        bordered: true,
                        dataSource: dataSource2,
                        columns: columnsOld2,
                        pagination: false,
                        rowKey: function rowKey(record) {
                            return record.parentId;
                        }
                    })
                )
            );
        }
    }]);

    return EditableTableInventory;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableInventory;

/***/ }),

/***/ 1883:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SSHAPE_SIDE_WIDTH = 20;

var Link = function (_Component) {
  _inherits(Link, _Component);

  function Link(props) {
    _classCallCheck(this, Link);

    var _this = _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).call(this, props));

    _this.calcNormCoordinates = function () {
      var cpt1 = { x: 0, y: 0 };
      var cpt2 = { x: 0, y: 0 };
      var middle = 0;
      middle = _this.props.start.x + (_this.props.end.x - _this.props.start.x) / 2;
      cpt1 = { x: middle, y: _this.props.start.y };
      cpt2 = { x: middle, y: _this.props.end.y };
      return { cpt1: cpt1, cpt2: cpt2 };
    };

    _this.calcSCoordinates = function () {
      var cpt1 = { x: _this.props.start.x + SSHAPE_SIDE_WIDTH, y: _this.props.start.y };
      var halfY = (_this.props.end.y - _this.props.start.y) / 2;
      var cpt2 = { x: cpt1.x, y: cpt1.y + halfY };
      var cpt3 = { x: _this.props.end.x - SSHAPE_SIDE_WIDTH, y: cpt2.y };
      var cpt4 = { x: cpt3.x, y: cpt3.y + halfY };
      return { cpt1: cpt1, cpt2: cpt2, cpt3: cpt3, cpt4: cpt4 };
    };

    _this.getPath = function () {
      var coordinates = null;
      if (_this.props.start.x > _this.props.end.x) {
        coordinates = _this.calcSCoordinates();
        return 'M' + _this.props.start.x + ' ' + _this.props.start.y + '  ' + coordinates.cpt1.x + ' ' + coordinates.cpt1.y + ' ' + coordinates.cpt2.x + ' ' + coordinates.cpt2.y + ' ' + coordinates.cpt3.x + ' ' + coordinates.cpt3.y + ' ' + coordinates.cpt4.x + ' ' + coordinates.cpt4.y + ' ' + _this.props.end.x + ' ' + _this.props.end.y;
      } else {
        coordinates = _this.calcNormCoordinates();
        return 'M' + _this.props.start.x + ' ' + _this.props.start.y + '  ' + coordinates.cpt1.x + ' ' + coordinates.cpt1.y + ' ' + coordinates.cpt2.x + ' ' + coordinates.cpt2.y + ' ' + _this.props.end.x + ' ' + _this.props.end.y;
      }
    };

    _this.onSelect = function (e) {
      if (_this.props.onSelectItem) _this.props.onSelectItem(_this.props.item);
    };

    return _this;
  }

  _createClass(Link, [{
    key: 'render',
    value: function render() {
      var pathColor = this.props.isSelected ? _Config2.default.values.links.selectedColor : _Config2.default.values.links.color;
      return _react2.default.createElement(
        'g',
        { className: 'timeline-link' },
        _react2.default.createElement('path', {
          pointerEvents: 'stroke',
          onMouseDown: this.onSelect,
          stroke: 'white',
          d: this.getPath(),
          strokeLinejoin: 'round',
          fill: 'transparent',
          strokeWidth: '4',
          cursor: 'pointer'
        }),
        _react2.default.createElement('path', {
          pointerEvents: 'stroke',
          onMouseDown: this.onSelect,
          stroke: pathColor,
          d: this.getPath(),
          strokeLinejoin: 'round',
          fill: 'transparent',
          strokeWidth: '1',
          cursor: 'pointer',
          markerEnd: 'url(#arrow)'
        })
      );
    }
  }]);

  return Link;
}(_react.Component);

exports.default = Link;

/***/ }),

/***/ 1884:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Registry = function () {
    function Registry() {
        _classCallCheck(this, Registry);

        this.data = {};
        this.link = {};
    }

    _createClass(Registry, [{
        key: "registerData",
        value: function registerData(list) {
            if (!list) return;
            this.data = {};
            for (var i = 0; i < list.length; i++) {
                this.data[list[i].id] = { item: list[i], index: i };
            }
        }
    }, {
        key: "registerLinks",
        value: function registerLinks(list) {
            if (!list) return;
            this.link = {};
            var start = 0;
            var end = 0;

            for (var i = 0; i < list.length; i++) {
                start = list[i].start;
                end = list[i].end;
                var value = { link: list[i], index: i };
                this.createAddTo(start, this.link, value, i);
                this.createAddTo(end, this.link, value, i);
            }
        }
    }, {
        key: "createAddTo",
        value: function createAddTo(id, list, value, index) {
            if (!list[id]) list[id] = [];
            if (list[id].indexOf(value) == -1) list[id].push(value);
        }
    }, {
        key: "getTask",
        value: function getTask(id) {
            return this.data[id];
        }
    }, {
        key: "getLinks",
        value: function getLinks(id) {
            return this.link[id];
        }
    }]);

    return Registry;
}();

var instanceRegistry = new Registry();
exports.default = instanceRegistry;

/***/ }),

/***/ 1897:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var detector = module.exports = {};

detector.isIE = function(version) {
    function isAnyIeVersion() {
        var agent = navigator.userAgent.toLowerCase();
        return agent.indexOf("msie") !== -1 || agent.indexOf("trident") !== -1 || agent.indexOf(" edge/") !== -1;
    }

    if(!isAnyIeVersion()) {
        return false;
    }

    if(!version) {
        return true;
    }

    //Shamelessly stolen from https://gist.github.com/padolsey/527683
    var ieVersion = (function(){
        var undef,
            v = 3,
            div = document.createElement("div"),
            all = div.getElementsByTagName("i");

        do {
            div.innerHTML = "<!--[if gt IE " + (++v) + "]><i></i><![endif]-->";
        }
        while (all[0]);

        return v > 4 ? v : undef;
    }());

    return version === ieVersion;
};

detector.isLegacyOpera = function() {
    return !!window.opera;
};


/***/ }),

/***/ 1898:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = module.exports = {};

/**
 * Loops through the collection and calls the callback for each element. if the callback returns truthy, the loop is broken and returns the same value.
 * @public
 * @param {*} collection The collection to loop through. Needs to have a length property set and have indices set from 0 to length - 1.
 * @param {function} callback The callback to be called for each element. The element will be given as a parameter to the callback. If this callback returns truthy, the loop is broken and the same value is returned.
 * @returns {*} The value that a callback has returned (if truthy). Otherwise nothing.
 */
utils.forEach = function(collection, callback) {
    for(var i = 0; i < collection.length; i++) {
        var result = callback(collection[i]);
        if(result) {
            return result;
        }
    }
};


/***/ }),

/***/ 1901:
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */

(function (global, factory) {
    if (true) {
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if (typeof module === 'object' && module.exports) {
        module.exports = factory();
    } else {
        global.numeral = factory();
    }
}(this, function () {
    /************************************
        Variables
    ************************************/

    var numeral,
        _,
        VERSION = '2.0.6',
        formats = {},
        locales = {},
        defaults = {
            currentLocale: 'en',
            zeroFormat: null,
            nullFormat: null,
            defaultFormat: '0,0',
            scalePercentBy100: true
        },
        options = {
            currentLocale: defaults.currentLocale,
            zeroFormat: defaults.zeroFormat,
            nullFormat: defaults.nullFormat,
            defaultFormat: defaults.defaultFormat,
            scalePercentBy100: defaults.scalePercentBy100
        };


    /************************************
        Constructors
    ************************************/

    // Numeral prototype object
    function Numeral(input, number) {
        this._input = input;

        this._value = number;
    }

    numeral = function(input) {
        var value,
            kind,
            unformatFunction,
            regexp;

        if (numeral.isNumeral(input)) {
            value = input.value();
        } else if (input === 0 || typeof input === 'undefined') {
            value = 0;
        } else if (input === null || _.isNaN(input)) {
            value = null;
        } else if (typeof input === 'string') {
            if (options.zeroFormat && input === options.zeroFormat) {
                value = 0;
            } else if (options.nullFormat && input === options.nullFormat || !input.replace(/[^0-9]+/g, '').length) {
                value = null;
            } else {
                for (kind in formats) {
                    regexp = typeof formats[kind].regexps.unformat === 'function' ? formats[kind].regexps.unformat() : formats[kind].regexps.unformat;

                    if (regexp && input.match(regexp)) {
                        unformatFunction = formats[kind].unformat;

                        break;
                    }
                }

                unformatFunction = unformatFunction || numeral._.stringToNumber;

                value = unformatFunction(input);
            }
        } else {
            value = Number(input)|| null;
        }

        return new Numeral(input, value);
    };

    // version number
    numeral.version = VERSION;

    // compare numeral object
    numeral.isNumeral = function(obj) {
        return obj instanceof Numeral;
    };

    // helper functions
    numeral._ = _ = {
        // formats numbers separators, decimals places, signs, abbreviations
        numberToFormat: function(value, format, roundingFunction) {
            var locale = locales[numeral.options.currentLocale],
                negP = false,
                optDec = false,
                leadingCount = 0,
                abbr = '',
                trillion = 1000000000000,
                billion = 1000000000,
                million = 1000000,
                thousand = 1000,
                decimal = '',
                neg = false,
                abbrForce, // force abbreviation
                abs,
                min,
                max,
                power,
                int,
                precision,
                signed,
                thousands,
                output;

            // make sure we never format a null value
            value = value || 0;

            abs = Math.abs(value);

            // see if we should use parentheses for negative number or if we should prefix with a sign
            // if both are present we default to parentheses
            if (numeral._.includes(format, '(')) {
                negP = true;
                format = format.replace(/[\(|\)]/g, '');
            } else if (numeral._.includes(format, '+') || numeral._.includes(format, '-')) {
                signed = numeral._.includes(format, '+') ? format.indexOf('+') : value < 0 ? format.indexOf('-') : -1;
                format = format.replace(/[\+|\-]/g, '');
            }

            // see if abbreviation is wanted
            if (numeral._.includes(format, 'a')) {
                abbrForce = format.match(/a(k|m|b|t)?/);

                abbrForce = abbrForce ? abbrForce[1] : false;

                // check for space before abbreviation
                if (numeral._.includes(format, ' a')) {
                    abbr = ' ';
                }

                format = format.replace(new RegExp(abbr + 'a[kmbt]?'), '');

                if (abs >= trillion && !abbrForce || abbrForce === 't') {
                    // trillion
                    abbr += locale.abbreviations.trillion;
                    value = value / trillion;
                } else if (abs < trillion && abs >= billion && !abbrForce || abbrForce === 'b') {
                    // billion
                    abbr += locale.abbreviations.billion;
                    value = value / billion;
                } else if (abs < billion && abs >= million && !abbrForce || abbrForce === 'm') {
                    // million
                    abbr += locale.abbreviations.million;
                    value = value / million;
                } else if (abs < million && abs >= thousand && !abbrForce || abbrForce === 'k') {
                    // thousand
                    abbr += locale.abbreviations.thousand;
                    value = value / thousand;
                }
            }

            // check for optional decimals
            if (numeral._.includes(format, '[.]')) {
                optDec = true;
                format = format.replace('[.]', '.');
            }

            // break number and format
            int = value.toString().split('.')[0];
            precision = format.split('.')[1];
            thousands = format.indexOf(',');
            leadingCount = (format.split('.')[0].split(',')[0].match(/0/g) || []).length;

            if (precision) {
                if (numeral._.includes(precision, '[')) {
                    precision = precision.replace(']', '');
                    precision = precision.split('[');
                    decimal = numeral._.toFixed(value, (precision[0].length + precision[1].length), roundingFunction, precision[1].length);
                } else {
                    decimal = numeral._.toFixed(value, precision.length, roundingFunction);
                }

                int = decimal.split('.')[0];

                if (numeral._.includes(decimal, '.')) {
                    decimal = locale.delimiters.decimal + decimal.split('.')[1];
                } else {
                    decimal = '';
                }

                if (optDec && Number(decimal.slice(1)) === 0) {
                    decimal = '';
                }
            } else {
                int = numeral._.toFixed(value, 0, roundingFunction);
            }

            // check abbreviation again after rounding
            if (abbr && !abbrForce && Number(int) >= 1000 && abbr !== locale.abbreviations.trillion) {
                int = String(Number(int) / 1000);

                switch (abbr) {
                    case locale.abbreviations.thousand:
                        abbr = locale.abbreviations.million;
                        break;
                    case locale.abbreviations.million:
                        abbr = locale.abbreviations.billion;
                        break;
                    case locale.abbreviations.billion:
                        abbr = locale.abbreviations.trillion;
                        break;
                }
            }


            // format number
            if (numeral._.includes(int, '-')) {
                int = int.slice(1);
                neg = true;
            }

            if (int.length < leadingCount) {
                for (var i = leadingCount - int.length; i > 0; i--) {
                    int = '0' + int;
                }
            }

            if (thousands > -1) {
                int = int.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1' + locale.delimiters.thousands);
            }

            if (format.indexOf('.') === 0) {
                int = '';
            }

            output = int + decimal + (abbr ? abbr : '');

            if (negP) {
                output = (negP && neg ? '(' : '') + output + (negP && neg ? ')' : '');
            } else {
                if (signed >= 0) {
                    output = signed === 0 ? (neg ? '-' : '+') + output : output + (neg ? '-' : '+');
                } else if (neg) {
                    output = '-' + output;
                }
            }

            return output;
        },
        // unformats numbers separators, decimals places, signs, abbreviations
        stringToNumber: function(string) {
            var locale = locales[options.currentLocale],
                stringOriginal = string,
                abbreviations = {
                    thousand: 3,
                    million: 6,
                    billion: 9,
                    trillion: 12
                },
                abbreviation,
                value,
                i,
                regexp;

            if (options.zeroFormat && string === options.zeroFormat) {
                value = 0;
            } else if (options.nullFormat && string === options.nullFormat || !string.replace(/[^0-9]+/g, '').length) {
                value = null;
            } else {
                value = 1;

                if (locale.delimiters.decimal !== '.') {
                    string = string.replace(/\./g, '').replace(locale.delimiters.decimal, '.');
                }

                for (abbreviation in abbreviations) {
                    regexp = new RegExp('[^a-zA-Z]' + locale.abbreviations[abbreviation] + '(?:\\)|(\\' + locale.currency.symbol + ')?(?:\\))?)?$');

                    if (stringOriginal.match(regexp)) {
                        value *= Math.pow(10, abbreviations[abbreviation]);
                        break;
                    }
                }

                // check for negative number
                value *= (string.split('-').length + Math.min(string.split('(').length - 1, string.split(')').length - 1)) % 2 ? 1 : -1;

                // remove non numbers
                string = string.replace(/[^0-9\.]+/g, '');

                value *= Number(string);
            }

            return value;
        },
        isNaN: function(value) {
            return typeof value === 'number' && isNaN(value);
        },
        includes: function(string, search) {
            return string.indexOf(search) !== -1;
        },
        insert: function(string, subString, start) {
            return string.slice(0, start) + subString + string.slice(start);
        },
        reduce: function(array, callback /*, initialValue*/) {
            if (this === null) {
                throw new TypeError('Array.prototype.reduce called on null or undefined');
            }

            if (typeof callback !== 'function') {
                throw new TypeError(callback + ' is not a function');
            }

            var t = Object(array),
                len = t.length >>> 0,
                k = 0,
                value;

            if (arguments.length === 3) {
                value = arguments[2];
            } else {
                while (k < len && !(k in t)) {
                    k++;
                }

                if (k >= len) {
                    throw new TypeError('Reduce of empty array with no initial value');
                }

                value = t[k++];
            }
            for (; k < len; k++) {
                if (k in t) {
                    value = callback(value, t[k], k, t);
                }
            }
            return value;
        },
        /**
         * Computes the multiplier necessary to make x >= 1,
         * effectively eliminating miscalculations caused by
         * finite precision.
         */
        multiplier: function (x) {
            var parts = x.toString().split('.');

            return parts.length < 2 ? 1 : Math.pow(10, parts[1].length);
        },
        /**
         * Given a variable number of arguments, returns the maximum
         * multiplier that must be used to normalize an operation involving
         * all of them.
         */
        correctionFactor: function () {
            var args = Array.prototype.slice.call(arguments);

            return args.reduce(function(accum, next) {
                var mn = _.multiplier(next);
                return accum > mn ? accum : mn;
            }, 1);
        },
        /**
         * Implementation of toFixed() that treats floats more like decimals
         *
         * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present
         * problems for accounting- and finance-related software.
         */
        toFixed: function(value, maxDecimals, roundingFunction, optionals) {
            var splitValue = value.toString().split('.'),
                minDecimals = maxDecimals - (optionals || 0),
                boundedPrecision,
                optionalsRegExp,
                power,
                output;

            // Use the smallest precision value possible to avoid errors from floating point representation
            if (splitValue.length === 2) {
              boundedPrecision = Math.min(Math.max(splitValue[1].length, minDecimals), maxDecimals);
            } else {
              boundedPrecision = minDecimals;
            }

            power = Math.pow(10, boundedPrecision);

            // Multiply up by precision, round accurately, then divide and use native toFixed():
            output = (roundingFunction(value + 'e+' + boundedPrecision) / power).toFixed(boundedPrecision);

            if (optionals > maxDecimals - boundedPrecision) {
                optionalsRegExp = new RegExp('\\.?0{1,' + (optionals - (maxDecimals - boundedPrecision)) + '}$');
                output = output.replace(optionalsRegExp, '');
            }

            return output;
        }
    };

    // avaliable options
    numeral.options = options;

    // avaliable formats
    numeral.formats = formats;

    // avaliable formats
    numeral.locales = locales;

    // This function sets the current locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    numeral.locale = function(key) {
        if (key) {
            options.currentLocale = key.toLowerCase();
        }

        return options.currentLocale;
    };

    // This function provides access to the loaded locale data.  If
    // no arguments are passed in, it will simply return the current
    // global locale object.
    numeral.localeData = function(key) {
        if (!key) {
            return locales[options.currentLocale];
        }

        key = key.toLowerCase();

        if (!locales[key]) {
            throw new Error('Unknown locale : ' + key);
        }

        return locales[key];
    };

    numeral.reset = function() {
        for (var property in defaults) {
            options[property] = defaults[property];
        }
    };

    numeral.zeroFormat = function(format) {
        options.zeroFormat = typeof(format) === 'string' ? format : null;
    };

    numeral.nullFormat = function (format) {
        options.nullFormat = typeof(format) === 'string' ? format : null;
    };

    numeral.defaultFormat = function(format) {
        options.defaultFormat = typeof(format) === 'string' ? format : '0.0';
    };

    numeral.register = function(type, name, format) {
        name = name.toLowerCase();

        if (this[type + 's'][name]) {
            throw new TypeError(name + ' ' + type + ' already registered.');
        }

        this[type + 's'][name] = format;

        return format;
    };


    numeral.validate = function(val, culture) {
        var _decimalSep,
            _thousandSep,
            _currSymbol,
            _valArray,
            _abbrObj,
            _thousandRegEx,
            localeData,
            temp;

        //coerce val to string
        if (typeof val !== 'string') {
            val += '';

            if (console.warn) {
                console.warn('Numeral.js: Value is not string. It has been co-erced to: ', val);
            }
        }

        //trim whitespaces from either sides
        val = val.trim();

        //if val is just digits return true
        if (!!val.match(/^\d+$/)) {
            return true;
        }

        //if val is empty return false
        if (val === '') {
            return false;
        }

        //get the decimal and thousands separator from numeral.localeData
        try {
            //check if the culture is understood by numeral. if not, default it to current locale
            localeData = numeral.localeData(culture);
        } catch (e) {
            localeData = numeral.localeData(numeral.locale());
        }

        //setup the delimiters and currency symbol based on culture/locale
        _currSymbol = localeData.currency.symbol;
        _abbrObj = localeData.abbreviations;
        _decimalSep = localeData.delimiters.decimal;
        if (localeData.delimiters.thousands === '.') {
            _thousandSep = '\\.';
        } else {
            _thousandSep = localeData.delimiters.thousands;
        }

        // validating currency symbol
        temp = val.match(/^[^\d]+/);
        if (temp !== null) {
            val = val.substr(1);
            if (temp[0] !== _currSymbol) {
                return false;
            }
        }

        //validating abbreviation symbol
        temp = val.match(/[^\d]+$/);
        if (temp !== null) {
            val = val.slice(0, -1);
            if (temp[0] !== _abbrObj.thousand && temp[0] !== _abbrObj.million && temp[0] !== _abbrObj.billion && temp[0] !== _abbrObj.trillion) {
                return false;
            }
        }

        _thousandRegEx = new RegExp(_thousandSep + '{2}');

        if (!val.match(/[^\d.,]/g)) {
            _valArray = val.split(_decimalSep);
            if (_valArray.length > 2) {
                return false;
            } else {
                if (_valArray.length < 2) {
                    return ( !! _valArray[0].match(/^\d+.*\d$/) && !_valArray[0].match(_thousandRegEx));
                } else {
                    if (_valArray[0].length === 1) {
                        return ( !! _valArray[0].match(/^\d+$/) && !_valArray[0].match(_thousandRegEx) && !! _valArray[1].match(/^\d+$/));
                    } else {
                        return ( !! _valArray[0].match(/^\d+.*\d$/) && !_valArray[0].match(_thousandRegEx) && !! _valArray[1].match(/^\d+$/));
                    }
                }
            }
        }

        return false;
    };


    /************************************
        Numeral Prototype
    ************************************/

    numeral.fn = Numeral.prototype = {
        clone: function() {
            return numeral(this);
        },
        format: function(inputString, roundingFunction) {
            var value = this._value,
                format = inputString || options.defaultFormat,
                kind,
                output,
                formatFunction;

            // make sure we have a roundingFunction
            roundingFunction = roundingFunction || Math.round;

            // format based on value
            if (value === 0 && options.zeroFormat !== null) {
                output = options.zeroFormat;
            } else if (value === null && options.nullFormat !== null) {
                output = options.nullFormat;
            } else {
                for (kind in formats) {
                    if (format.match(formats[kind].regexps.format)) {
                        formatFunction = formats[kind].format;

                        break;
                    }
                }

                formatFunction = formatFunction || numeral._.numberToFormat;

                output = formatFunction(value, format, roundingFunction);
            }

            return output;
        },
        value: function() {
            return this._value;
        },
        input: function() {
            return this._input;
        },
        set: function(value) {
            this._value = Number(value);

            return this;
        },
        add: function(value) {
            var corrFactor = _.correctionFactor.call(null, this._value, value);

            function cback(accum, curr, currI, O) {
                return accum + Math.round(corrFactor * curr);
            }

            this._value = _.reduce([this._value, value], cback, 0) / corrFactor;

            return this;
        },
        subtract: function(value) {
            var corrFactor = _.correctionFactor.call(null, this._value, value);

            function cback(accum, curr, currI, O) {
                return accum - Math.round(corrFactor * curr);
            }

            this._value = _.reduce([value], cback, Math.round(this._value * corrFactor)) / corrFactor;

            return this;
        },
        multiply: function(value) {
            function cback(accum, curr, currI, O) {
                var corrFactor = _.correctionFactor(accum, curr);
                return Math.round(accum * corrFactor) * Math.round(curr * corrFactor) / Math.round(corrFactor * corrFactor);
            }

            this._value = _.reduce([this._value, value], cback, 1);

            return this;
        },
        divide: function(value) {
            function cback(accum, curr, currI, O) {
                var corrFactor = _.correctionFactor(accum, curr);
                return Math.round(accum * corrFactor) / Math.round(curr * corrFactor);
            }

            this._value = _.reduce([this._value, value], cback);

            return this;
        },
        difference: function(value) {
            return Math.abs(numeral(this._value).subtract(value).value());
        }
    };

    /************************************
        Default Locale && Format
    ************************************/

    numeral.register('locale', 'en', {
        delimiters: {
            thousands: ',',
            decimal: '.'
        },
        abbreviations: {
            thousand: 'k',
            million: 'm',
            billion: 'b',
            trillion: 't'
        },
        ordinal: function(number) {
            var b = number % 10;
            return (~~(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
        },
        currency: {
            symbol: '$'
        }
    });

    

(function() {
        numeral.register('format', 'bps', {
            regexps: {
                format: /(BPS)/,
                unformat: /(BPS)/
            },
            format: function(value, format, roundingFunction) {
                var space = numeral._.includes(format, ' BPS') ? ' ' : '',
                    output;

                value = value * 10000;

                // check for space before BPS
                format = format.replace(/\s?BPS/, '');

                output = numeral._.numberToFormat(value, format, roundingFunction);

                if (numeral._.includes(output, ')')) {
                    output = output.split('');

                    output.splice(-1, 0, space + 'BPS');

                    output = output.join('');
                } else {
                    output = output + space + 'BPS';
                }

                return output;
            },
            unformat: function(string) {
                return +(numeral._.stringToNumber(string) * 0.0001).toFixed(15);
            }
        });
})();


(function() {
        var decimal = {
            base: 1000,
            suffixes: ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']
        },
        binary = {
            base: 1024,
            suffixes: ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']
        };

    var allSuffixes =  decimal.suffixes.concat(binary.suffixes.filter(function (item) {
            return decimal.suffixes.indexOf(item) < 0;
        }));
        var unformatRegex = allSuffixes.join('|');
        // Allow support for BPS (http://www.investopedia.com/terms/b/basispoint.asp)
        unformatRegex = '(' + unformatRegex.replace('B', 'B(?!PS)') + ')';

    numeral.register('format', 'bytes', {
        regexps: {
            format: /([0\s]i?b)/,
            unformat: new RegExp(unformatRegex)
        },
        format: function(value, format, roundingFunction) {
            var output,
                bytes = numeral._.includes(format, 'ib') ? binary : decimal,
                suffix = numeral._.includes(format, ' b') || numeral._.includes(format, ' ib') ? ' ' : '',
                power,
                min,
                max;

            // check for space before
            format = format.replace(/\s?i?b/, '');

            for (power = 0; power <= bytes.suffixes.length; power++) {
                min = Math.pow(bytes.base, power);
                max = Math.pow(bytes.base, power + 1);

                if (value === null || value === 0 || value >= min && value < max) {
                    suffix += bytes.suffixes[power];

                    if (min > 0) {
                        value = value / min;
                    }

                    break;
                }
            }

            output = numeral._.numberToFormat(value, format, roundingFunction);

            return output + suffix;
        },
        unformat: function(string) {
            var value = numeral._.stringToNumber(string),
                power,
                bytesMultiplier;

            if (value) {
                for (power = decimal.suffixes.length - 1; power >= 0; power--) {
                    if (numeral._.includes(string, decimal.suffixes[power])) {
                        bytesMultiplier = Math.pow(decimal.base, power);

                        break;
                    }

                    if (numeral._.includes(string, binary.suffixes[power])) {
                        bytesMultiplier = Math.pow(binary.base, power);

                        break;
                    }
                }

                value *= (bytesMultiplier || 1);
            }

            return value;
        }
    });
})();


(function() {
        numeral.register('format', 'currency', {
        regexps: {
            format: /(\$)/
        },
        format: function(value, format, roundingFunction) {
            var locale = numeral.locales[numeral.options.currentLocale],
                symbols = {
                    before: format.match(/^([\+|\-|\(|\s|\$]*)/)[0],
                    after: format.match(/([\+|\-|\)|\s|\$]*)$/)[0]
                },
                output,
                symbol,
                i;

            // strip format of spaces and $
            format = format.replace(/\s?\$\s?/, '');

            // format the number
            output = numeral._.numberToFormat(value, format, roundingFunction);

            // update the before and after based on value
            if (value >= 0) {
                symbols.before = symbols.before.replace(/[\-\(]/, '');
                symbols.after = symbols.after.replace(/[\-\)]/, '');
            } else if (value < 0 && (!numeral._.includes(symbols.before, '-') && !numeral._.includes(symbols.before, '('))) {
                symbols.before = '-' + symbols.before;
            }

            // loop through each before symbol
            for (i = 0; i < symbols.before.length; i++) {
                symbol = symbols.before[i];

                switch (symbol) {
                    case '$':
                        output = numeral._.insert(output, locale.currency.symbol, i);
                        break;
                    case ' ':
                        output = numeral._.insert(output, ' ', i + locale.currency.symbol.length - 1);
                        break;
                }
            }

            // loop through each after symbol
            for (i = symbols.after.length - 1; i >= 0; i--) {
                symbol = symbols.after[i];

                switch (symbol) {
                    case '$':
                        output = i === symbols.after.length - 1 ? output + locale.currency.symbol : numeral._.insert(output, locale.currency.symbol, -(symbols.after.length - (1 + i)));
                        break;
                    case ' ':
                        output = i === symbols.after.length - 1 ? output + ' ' : numeral._.insert(output, ' ', -(symbols.after.length - (1 + i) + locale.currency.symbol.length - 1));
                        break;
                }
            }


            return output;
        }
    });
})();


(function() {
        numeral.register('format', 'exponential', {
        regexps: {
            format: /(e\+|e-)/,
            unformat: /(e\+|e-)/
        },
        format: function(value, format, roundingFunction) {
            var output,
                exponential = typeof value === 'number' && !numeral._.isNaN(value) ? value.toExponential() : '0e+0',
                parts = exponential.split('e');

            format = format.replace(/e[\+|\-]{1}0/, '');

            output = numeral._.numberToFormat(Number(parts[0]), format, roundingFunction);

            return output + 'e' + parts[1];
        },
        unformat: function(string) {
            var parts = numeral._.includes(string, 'e+') ? string.split('e+') : string.split('e-'),
                value = Number(parts[0]),
                power = Number(parts[1]);

            power = numeral._.includes(string, 'e-') ? power *= -1 : power;

            function cback(accum, curr, currI, O) {
                var corrFactor = numeral._.correctionFactor(accum, curr),
                    num = (accum * corrFactor) * (curr * corrFactor) / (corrFactor * corrFactor);
                return num;
            }

            return numeral._.reduce([value, Math.pow(10, power)], cback, 1);
        }
    });
})();


(function() {
        numeral.register('format', 'ordinal', {
        regexps: {
            format: /(o)/
        },
        format: function(value, format, roundingFunction) {
            var locale = numeral.locales[numeral.options.currentLocale],
                output,
                ordinal = numeral._.includes(format, ' o') ? ' ' : '';

            // check for space before
            format = format.replace(/\s?o/, '');

            ordinal += locale.ordinal(value);

            output = numeral._.numberToFormat(value, format, roundingFunction);

            return output + ordinal;
        }
    });
})();


(function() {
        numeral.register('format', 'percentage', {
        regexps: {
            format: /(%)/,
            unformat: /(%)/
        },
        format: function(value, format, roundingFunction) {
            var space = numeral._.includes(format, ' %') ? ' ' : '',
                output;

            if (numeral.options.scalePercentBy100) {
                value = value * 100;
            }

            // check for space before %
            format = format.replace(/\s?\%/, '');

            output = numeral._.numberToFormat(value, format, roundingFunction);

            if (numeral._.includes(output, ')')) {
                output = output.split('');

                output.splice(-1, 0, space + '%');

                output = output.join('');
            } else {
                output = output + space + '%';
            }

            return output;
        },
        unformat: function(string) {
            var number = numeral._.stringToNumber(string);
            if (numeral.options.scalePercentBy100) {
                return number * 0.01;
            }
            return number;
        }
    });
})();


(function() {
        numeral.register('format', 'time', {
        regexps: {
            format: /(:)/,
            unformat: /(:)/
        },
        format: function(value, format, roundingFunction) {
            var hours = Math.floor(value / 60 / 60),
                minutes = Math.floor((value - (hours * 60 * 60)) / 60),
                seconds = Math.round(value - (hours * 60 * 60) - (minutes * 60));

            return hours + ':' + (minutes < 10 ? '0' + minutes : minutes) + ':' + (seconds < 10 ? '0' + seconds : seconds);
        },
        unformat: function(string) {
            var timeArray = string.split(':'),
                seconds = 0;

            // turn hours and minutes into seconds and add them all up
            if (timeArray.length === 3) {
                // hours
                seconds = seconds + (Number(timeArray[0]) * 60 * 60);
                // minutes
                seconds = seconds + (Number(timeArray[1]) * 60);
                // seconds
                seconds = seconds + Number(timeArray[2]);
            } else if (timeArray.length === 2) {
                // minutes
                seconds = seconds + (Number(timeArray[0]) * 60);
                // seconds
                seconds = seconds + Number(timeArray[1]);
            }
            return Number(seconds);
        }
    });
})();

return numeral;
}));


/***/ }),

/***/ 1902:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.defaultSubHeaderLabelFormats = exports.defaultHeaderLabelFormats = exports.defaultHeaderFormats = exports.defaultTimeSteps = exports.defaultKeys = void 0;
var defaultKeys = {
  groupIdKey: 'id',
  groupTitleKey: 'title',
  groupRightTitleKey: 'rightTitle',
  groupLabelKey: 'title',
  itemIdKey: 'id',
  itemTitleKey: 'title',
  itemDivTitleKey: 'title',
  itemGroupKey: 'group',
  itemTimeStartKey: 'start_time',
  itemTimeEndKey: 'end_time'
};
exports.defaultKeys = defaultKeys;
var defaultTimeSteps = {
  second: 1,
  minute: 1,
  hour: 1,
  day: 1,
  month: 1,
  year: 1
};
exports.defaultTimeSteps = defaultTimeSteps;
var defaultHeaderFormats = {
  year: {
    "long": 'YYYY',
    mediumLong: 'YYYY',
    medium: 'YYYY',
    "short": 'YY'
  },
  month: {
    "long": 'MMMM YYYY',
    mediumLong: 'MMMM',
    medium: 'MMMM',
    "short": 'MM/YY'
  },
  week: {
    "long": 'w',
    mediumLong: 'w',
    medium: 'w',
    "short": 'w'
  },
  day: {
    "long": 'dddd, LL',
    mediumLong: 'dddd, LL',
    medium: 'dd D',
    "short": 'D'
  },
  hour: {
    "long": 'dddd, LL, HH:00',
    mediumLong: 'L, HH:00',
    medium: 'HH:00',
    "short": 'HH'
  },
  minute: {
    "long": 'HH:mm',
    mediumLong: 'HH:mm',
    medium: 'HH:mm',
    "short": 'mm'
  } //TODO: delete this

};
exports.defaultHeaderFormats = defaultHeaderFormats;
var defaultHeaderLabelFormats = {
  yearShort: 'YY',
  yearLong: 'YYYY',
  monthShort: 'MM/YY',
  monthMedium: 'MM/YYYY',
  monthMediumLong: 'MMM YYYY',
  monthLong: 'MMMM YYYY',
  dayShort: 'L',
  dayLong: 'dddd, LL',
  hourShort: 'HH',
  hourMedium: 'HH:00',
  hourMediumLong: 'L, HH:00',
  hourLong: 'dddd, LL, HH:00',
  time: 'LLL' //TODO: delete this

};
exports.defaultHeaderLabelFormats = defaultHeaderLabelFormats;
var defaultSubHeaderLabelFormats = {
  yearShort: 'YY',
  yearLong: 'YYYY',
  monthShort: 'MM',
  monthMedium: 'MMM',
  monthLong: 'MMMM',
  dayShort: 'D',
  dayMedium: 'dd D',
  dayMediumLong: 'ddd, Do',
  dayLong: 'dddd, Do',
  hourShort: 'HH',
  hourLong: 'HH:00',
  minuteShort: 'mm',
  minuteLong: 'HH:mm'
};
exports.defaultSubHeaderLabelFormats = defaultSubHeaderLabelFormats;

/***/ }),

/***/ 1903:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.CustomHeader = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _HeadersContext = __webpack_require__(1663);

var _TimelineStateContext = __webpack_require__(1589);

var _calendar = __webpack_require__(1549);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var CustomHeader =
/*#__PURE__*/
function (_React$Component) {
  _inherits(CustomHeader, _React$Component);

  function CustomHeader(_props) {
    var _this;

    _classCallCheck(this, CustomHeader);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CustomHeader).call(this, _props));

    _defineProperty(_assertThisInitialized(_this), "getHeaderIntervals", function (_ref) {
      var canvasTimeStart = _ref.canvasTimeStart,
          canvasTimeEnd = _ref.canvasTimeEnd,
          unit = _ref.unit,
          timeSteps = _ref.timeSteps,
          getLeftOffsetFromDate = _ref.getLeftOffsetFromDate;
      var intervals = [];
      (0, _calendar.iterateTimes)(canvasTimeStart, canvasTimeEnd, unit, timeSteps, function (startTime, endTime) {
        var left = getLeftOffsetFromDate(startTime.valueOf());
        var right = getLeftOffsetFromDate(endTime.valueOf());
        var width = right - left;
        intervals.push({
          startTime: startTime,
          endTime: endTime,
          labelWidth: width,
          left: left
        });
      });
      return intervals;
    });

    _defineProperty(_assertThisInitialized(_this), "getRootProps", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var style = props.style;
      return {
        style: Object.assign({}, style ? style : {}, {
          position: 'relative',
          width: _this.props.canvasWidth,
          height: _this.props.height
        })
      };
    });

    _defineProperty(_assertThisInitialized(_this), "getIntervalProps", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var interval = props.interval,
          style = props.style;
      if (!interval) throw new Error('you should provide interval to the prop getter');
      var startTime = interval.startTime,
          labelWidth = interval.labelWidth,
          left = interval.left;
      return {
        style: _this.getIntervalStyle({
          style: style,
          startTime: startTime,
          labelWidth: labelWidth,
          canvasTimeStart: _this.props.canvasTimeStart,
          unit: _this.props.unit,
          left: left
        }),
        key: "label-".concat(startTime.valueOf())
      };
    });

    _defineProperty(_assertThisInitialized(_this), "getIntervalStyle", function (_ref2) {
      var left = _ref2.left,
          labelWidth = _ref2.labelWidth,
          style = _ref2.style;
      return _objectSpread({}, style, {
        left: left,
        width: labelWidth,
        position: 'absolute'
      });
    });

    _defineProperty(_assertThisInitialized(_this), "getStateAndHelpers", function () {
      var _this$props = _this.props,
          canvasTimeStart = _this$props.canvasTimeStart,
          canvasTimeEnd = _this$props.canvasTimeEnd,
          unit = _this$props.unit,
          showPeriod = _this$props.showPeriod,
          timelineWidth = _this$props.timelineWidth,
          visibleTimeStart = _this$props.visibleTimeStart,
          visibleTimeEnd = _this$props.visibleTimeEnd,
          headerData = _this$props.headerData; //TODO: only evaluate on changing params

      return {
        timelineContext: {
          timelineWidth: timelineWidth,
          visibleTimeStart: visibleTimeStart,
          visibleTimeEnd: visibleTimeEnd,
          canvasTimeStart: canvasTimeStart,
          canvasTimeEnd: canvasTimeEnd
        },
        headerContext: {
          unit: unit,
          intervals: _this.state.intervals
        },
        getRootProps: _this.getRootProps,
        getIntervalProps: _this.getIntervalProps,
        showPeriod: showPeriod,
        data: headerData
      };
    });

    var _canvasTimeStart = _props.canvasTimeStart,
        _canvasTimeEnd = _props.canvasTimeEnd,
        canvasWidth = _props.canvasWidth,
        _unit = _props.unit,
        _timeSteps = _props.timeSteps,
        _showPeriod = _props.showPeriod,
        _getLeftOffsetFromDate = _props.getLeftOffsetFromDate;

    var _intervals = _this.getHeaderIntervals({
      canvasTimeStart: _canvasTimeStart,
      canvasTimeEnd: _canvasTimeEnd,
      canvasWidth: canvasWidth,
      unit: _unit,
      timeSteps: _timeSteps,
      showPeriod: _showPeriod,
      getLeftOffsetFromDate: _getLeftOffsetFromDate
    });

    _this.state = {
      intervals: _intervals
    };
    return _this;
  }

  _createClass(CustomHeader, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      if (nextProps.canvasTimeStart !== this.props.canvasTimeStart || nextProps.canvasTimeEnd !== this.props.canvasTimeEnd || nextProps.canvasWidth !== this.props.canvasWidth || nextProps.unit !== this.props.unit || nextProps.timeSteps !== this.props.timeSteps || nextProps.showPeriod !== this.props.showPeriod || nextProps.children !== this.props.children || nextProps.headerData !== this.props.headerData) {
        return true;
      }

      return false;
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (nextProps.canvasTimeStart !== this.props.canvasTimeStart || nextProps.canvasTimeEnd !== this.props.canvasTimeEnd || nextProps.canvasWidth !== this.props.canvasWidth || nextProps.unit !== this.props.unit || nextProps.timeSteps !== this.props.timeSteps || nextProps.showPeriod !== this.props.showPeriod) {
        var canvasTimeStart = nextProps.canvasTimeStart,
            canvasTimeEnd = nextProps.canvasTimeEnd,
            canvasWidth = nextProps.canvasWidth,
            unit = nextProps.unit,
            timeSteps = nextProps.timeSteps,
            showPeriod = nextProps.showPeriod,
            getLeftOffsetFromDate = nextProps.getLeftOffsetFromDate;
        var intervals = this.getHeaderIntervals({
          canvasTimeStart: canvasTimeStart,
          canvasTimeEnd: canvasTimeEnd,
          canvasWidth: canvasWidth,
          unit: unit,
          timeSteps: timeSteps,
          showPeriod: showPeriod,
          getLeftOffsetFromDate: getLeftOffsetFromDate
        });
        this.setState({
          intervals: intervals
        });
      }
    }
  }, {
    key: "render",
    value: function render() {
      var props = this.getStateAndHelpers();
      var Renderer = this.props.children;
      return _react["default"].createElement(Renderer, props);
    }
  }]);

  return CustomHeader;
}(_react["default"].Component);

exports.CustomHeader = CustomHeader;

_defineProperty(CustomHeader, "propTypes", {
  //component props
  children: _propTypes["default"].func.isRequired,
  unit: _propTypes["default"].string.isRequired,
  //Timeline context
  timeSteps: _propTypes["default"].object.isRequired,
  visibleTimeStart: _propTypes["default"].number.isRequired,
  visibleTimeEnd: _propTypes["default"].number.isRequired,
  canvasTimeStart: _propTypes["default"].number.isRequired,
  canvasTimeEnd: _propTypes["default"].number.isRequired,
  canvasWidth: _propTypes["default"].number.isRequired,
  showPeriod: _propTypes["default"].func.isRequired,
  headerData: _propTypes["default"].object,
  getLeftOffsetFromDate: _propTypes["default"].func.isRequired,
  height: _propTypes["default"].number.isRequired
});

var CustomHeaderWrapper = function CustomHeaderWrapper(_ref3) {
  var children = _ref3.children,
      unit = _ref3.unit,
      headerData = _ref3.headerData,
      height = _ref3.height;
  return _react["default"].createElement(_TimelineStateContext.TimelineStateConsumer, null, function (_ref4) {
    var getTimelineState = _ref4.getTimelineState,
        showPeriod = _ref4.showPeriod,
        getLeftOffsetFromDate = _ref4.getLeftOffsetFromDate;
    var timelineState = getTimelineState();
    return _react["default"].createElement(_HeadersContext.TimelineHeadersConsumer, null, function (_ref5) {
      var timeSteps = _ref5.timeSteps;
      return _react["default"].createElement(CustomHeader, _extends({
        children: children,
        timeSteps: timeSteps,
        showPeriod: showPeriod,
        unit: unit ? unit : timelineState.timelineUnit
      }, timelineState, {
        headerData: headerData,
        getLeftOffsetFromDate: getLeftOffsetFromDate,
        height: height
      }));
    });
  });
};

CustomHeaderWrapper.propTypes = {
  children: _propTypes["default"].func.isRequired,
  unit: _propTypes["default"].string,
  headerData: _propTypes["default"].object,
  height: _propTypes["default"].number
};
CustomHeaderWrapper.defaultProps = {
  height: 30
};
var _default = CustomHeaderWrapper;
exports["default"] = _default;

/***/ }),

/***/ 1904:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _TimelineStateContext = __webpack_require__(1589);

var _CustomHeader = _interopRequireDefault(__webpack_require__(1903));

var _calendar = __webpack_require__(1549);

var _defaultConfig = __webpack_require__(1902);

var _memoizeOne = _interopRequireDefault(__webpack_require__(2190));

var _CustomDateHeader = __webpack_require__(2204);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var DateHeader =
/*#__PURE__*/
function (_React$Component) {
  _inherits(DateHeader, _React$Component);

  function DateHeader() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, DateHeader);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DateHeader)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "getHeaderUnit", function () {
      if (_this.props.unit === 'primaryHeader') {
        return (0, _calendar.getNextUnit)(_this.props.timelineUnit);
      } else if (_this.props.unit) {
        return _this.props.unit;
      }

      return _this.props.timelineUnit;
    });

    _defineProperty(_assertThisInitialized(_this), "getRootStyle", (0, _memoizeOne["default"])(function (style) {
      return _objectSpread({
        height: 30
      }, style);
    }));

    _defineProperty(_assertThisInitialized(_this), "getLabelFormat", function (interval, unit, labelWidth) {
      var labelFormat = _this.props.labelFormat;

      if (typeof labelFormat === 'string') {
        var startTime = interval[0];
        return startTime.format(labelFormat);
      } else if (typeof labelFormat === 'function') {
        return labelFormat(interval, unit, labelWidth);
      } else {
        throw new Error('labelFormat should be function or string');
      }
    });

    _defineProperty(_assertThisInitialized(_this), "getHeaderData", (0, _memoizeOne["default"])(function (intervalRenderer, style, className, getLabelFormat, unitProp, headerData) {
      return {
        intervalRenderer: intervalRenderer,
        style: style,
        className: className,
        getLabelFormat: getLabelFormat,
        unitProp: unitProp,
        headerData: headerData
      };
    }));

    return _this;
  }

  _createClass(DateHeader, [{
    key: "render",
    value: function render() {
      var unit = this.getHeaderUnit();
      var _this$props = this.props,
          headerData = _this$props.headerData,
          height = _this$props.height;
      return _react["default"].createElement(_CustomHeader["default"], {
        unit: unit,
        height: height,
        headerData: this.getHeaderData(this.props.intervalRenderer, this.getRootStyle(this.props.style), this.props.className, this.getLabelFormat, this.props.unit, this.props.headerData),
        children: _CustomDateHeader.CustomDateHeader
      });
    }
  }]);

  return DateHeader;
}(_react["default"].Component);

_defineProperty(DateHeader, "propTypes", {
  unit: _propTypes["default"].string,
  style: _propTypes["default"].object,
  className: _propTypes["default"].string,
  timelineUnit: _propTypes["default"].string,
  labelFormat: _propTypes["default"].oneOfType([_propTypes["default"].func, _propTypes["default"].objectOf(_propTypes["default"].objectOf(_propTypes["default"].string)), _propTypes["default"].string]).isRequired,
  intervalRenderer: _propTypes["default"].func,
  headerData: _propTypes["default"].object,
  height: _propTypes["default"].number
});

var DateHeaderWrapper = function DateHeaderWrapper(_ref) {
  var unit = _ref.unit,
      labelFormat = _ref.labelFormat,
      style = _ref.style,
      className = _ref.className,
      intervalRenderer = _ref.intervalRenderer,
      headerData = _ref.headerData,
      height = _ref.height;
  return _react["default"].createElement(_TimelineStateContext.TimelineStateConsumer, null, function (_ref2) {
    var getTimelineState = _ref2.getTimelineState;
    var timelineState = getTimelineState();
    return _react["default"].createElement(DateHeader, {
      timelineUnit: timelineState.timelineUnit,
      unit: unit,
      labelFormat: labelFormat,
      style: style,
      className: className,
      intervalRenderer: intervalRenderer,
      headerData: headerData,
      height: height
    });
  });
};

DateHeaderWrapper.propTypes = {
  style: _propTypes["default"].object,
  className: _propTypes["default"].string,
  unit: _propTypes["default"].string,
  labelFormat: _propTypes["default"].oneOfType([_propTypes["default"].func, _propTypes["default"].objectOf(_propTypes["default"].objectOf(_propTypes["default"].string)), _propTypes["default"].string]),
  intervalRenderer: _propTypes["default"].func,
  headerData: _propTypes["default"].object,
  height: _propTypes["default"].number
};
DateHeaderWrapper.defaultProps = {
  labelFormat: formatLabel
};

function formatLabel(_ref3, unit, labelWidth) {
  var _ref4 = _slicedToArray(_ref3, 2),
      timeStart = _ref4[0],
      timeEnd = _ref4[1];

  var formatOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _defaultConfig.defaultHeaderFormats;
  var format;

  if (labelWidth >= 150) {
    format = formatOptions[unit]['long'];
  } else if (labelWidth >= 100) {
    format = formatOptions[unit]['mediumLong'];
  } else if (labelWidth >= 50) {
    format = formatOptions[unit]['medium'];
  } else {
    format = formatOptions[unit]['short'];
  }

  return timeStart.format(format);
}

var _default = DateHeaderWrapper;
exports["default"] = _default;

/***/ }),

/***/ 1905:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _classnames = _interopRequireDefault(__webpack_require__(29));

var _HeadersContext = __webpack_require__(1663);

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _SidebarHeader = _interopRequireDefault(__webpack_require__(1833));

var _constants = __webpack_require__(1906);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var TimelineHeaders =
/*#__PURE__*/
function (_React$Component) {
  _inherits(TimelineHeaders, _React$Component);

  function TimelineHeaders(props) {
    var _this;

    _classCallCheck(this, TimelineHeaders);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(TimelineHeaders).call(this, props));

    _defineProperty(_assertThisInitialized(_this), "getRootStyle", function () {
      return _objectSpread({}, _this.props.style, {
        display: 'flex',
        width: '100%'
      });
    });

    _defineProperty(_assertThisInitialized(_this), "getCalendarHeaderStyle", function () {
      var _this$props = _this.props,
          leftSidebarWidth = _this$props.leftSidebarWidth,
          rightSidebarWidth = _this$props.rightSidebarWidth,
          calendarHeaderStyle = _this$props.calendarHeaderStyle;
      return _objectSpread({}, calendarHeaderStyle, {
        overflow: 'hidden',
        width: "calc(100% - ".concat(leftSidebarWidth + rightSidebarWidth, "px)")
      });
    });

    _defineProperty(_assertThisInitialized(_this), "handleRootRef", function (element) {
      if (_this.props.headerRef) {
        _this.props.headerRef(element);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "isSidebarHeader", function (child) {
      if (child.type === undefined) return false;
      return child.type.secretKey === _SidebarHeader["default"].secretKey;
    });

    return _this;
  }

  _createClass(TimelineHeaders, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var rightSidebarHeader;
      var leftSidebarHeader;
      var calendarHeaders = [];
      var children = Array.isArray(this.props.children) ? this.props.children.filter(function (c) {
        return c;
      }) : [this.props.children];

      _react["default"].Children.map(children, function (child) {
        if (_this2.isSidebarHeader(child)) {
          if (child.props.variant === _constants.RIGHT_VARIANT) {
            rightSidebarHeader = child;
          } else {
            leftSidebarHeader = child;
          }
        } else {
          calendarHeaders.push(child);
        }
      });

      if (!leftSidebarHeader) {
        leftSidebarHeader = _react["default"].createElement(_SidebarHeader["default"], null);
      }

      if (!rightSidebarHeader && this.props.rightSidebarWidth) {
        rightSidebarHeader = _react["default"].createElement(_SidebarHeader["default"], {
          variant: "right"
        });
      }

      return _react["default"].createElement("div", {
        ref: this.handleRootRef,
        style: this.getRootStyle(),
        className: (0, _classnames["default"])('rct-header-root', this.props.className)
      }, leftSidebarHeader, _react["default"].createElement("div", {
        ref: this.props.registerScroll,
        style: this.getCalendarHeaderStyle(),
        className: (0, _classnames["default"])('rct-calendar-header', this.props.calendarHeaderClassName)
      }, calendarHeaders), rightSidebarHeader);
    }
  }]);

  return TimelineHeaders;
}(_react["default"].Component);

_defineProperty(TimelineHeaders, "propTypes", {
  registerScroll: _propTypes["default"].func.isRequired,
  leftSidebarWidth: _propTypes["default"].number.isRequired,
  rightSidebarWidth: _propTypes["default"].number.isRequired,
  style: _propTypes["default"].object,
  children: _propTypes["default"].node,
  className: _propTypes["default"].string,
  calendarHeaderStyle: _propTypes["default"].object,
  calendarHeaderClassName: _propTypes["default"].string,
  headerRef: _propTypes["default"].func
});

var TimelineHeadersWrapper = function TimelineHeadersWrapper(_ref) {
  var children = _ref.children,
      style = _ref.style,
      className = _ref.className,
      calendarHeaderStyle = _ref.calendarHeaderStyle,
      calendarHeaderClassName = _ref.calendarHeaderClassName;
  return _react["default"].createElement(_HeadersContext.TimelineHeadersConsumer, null, function (_ref2) {
    var leftSidebarWidth = _ref2.leftSidebarWidth,
        rightSidebarWidth = _ref2.rightSidebarWidth,
        registerScroll = _ref2.registerScroll;
    return _react["default"].createElement(TimelineHeaders, {
      leftSidebarWidth: leftSidebarWidth,
      rightSidebarWidth: rightSidebarWidth,
      registerScroll: registerScroll,
      style: style,
      className: className,
      calendarHeaderStyle: calendarHeaderStyle,
      calendarHeaderClassName: calendarHeaderClassName
    }, children);
  });
};

TimelineHeadersWrapper.propTypes = {
  style: _propTypes["default"].object,
  children: _propTypes["default"].node,
  className: _propTypes["default"].string,
  calendarHeaderStyle: _propTypes["default"].object,
  calendarHeaderClassName: _propTypes["default"].string
};
TimelineHeadersWrapper.secretKey = "TimelineHeaders";
var _default = TimelineHeadersWrapper;
exports["default"] = _default;

/***/ }),

/***/ 1906:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RIGHT_VARIANT = exports.LEFT_VARIANT = void 0;
var LEFT_VARIANT = 'left';
exports.LEFT_VARIANT = LEFT_VARIANT;
var RIGHT_VARIANT = 'right';
exports.RIGHT_VARIANT = RIGHT_VARIANT;

/***/ }),

/***/ 1907:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MarkerCanvasConsumer = exports.MarkerCanvasProvider = void 0;

var _createReactContext2 = _interopRequireDefault(__webpack_require__(1662));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/* eslint-disable no-console */
var defaultContextState = {
  subscribeToMouseOver: function subscribeToMouseOver() {
    console.warn('"subscribeToMouseOver" default func is being used');
  }
  /* eslint-enable */

};

var _createReactContext = (0, _createReactContext2["default"])(defaultContextState),
    Consumer = _createReactContext.Consumer,
    Provider = _createReactContext.Provider;

var MarkerCanvasProvider = Provider;
exports.MarkerCanvasProvider = MarkerCanvasProvider;
var MarkerCanvasConsumer = Consumer;
exports.MarkerCanvasConsumer = MarkerCanvasConsumer;

/***/ }),

/***/ 1908:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getParentPosition = getParentPosition;
exports.getSumScroll = getSumScroll;
exports.getSumOffset = getSumOffset;

// TODO: can we use getBoundingClientRect instead??
// last place this is used is in "handleWheel" in ScrollElement
function getParentPosition(element) {
  var xPosition = 0;
  var yPosition = 0;
  var first = true;

  while (element) {
    if (!element.offsetParent && element.tagName === 'BODY' && element.scrollLeft === 0 && element.scrollTop === 0) {
      element = document.scrollingElement || element;
    }

    xPosition += element.offsetLeft - (first ? 0 : element.scrollLeft) + element.clientLeft;
    yPosition += element.offsetTop - (first ? 0 : element.scrollTop) + element.clientTop;
    element = element.offsetParent;
    first = false;
  }

  return {
    x: xPosition,
    y: yPosition
  };
}

function getSumScroll(node) {
  if (node === document.body) {
    return {
      scrollLeft: 0,
      scrollTop: 0
    };
  } else {
    var parent = getSumScroll(node.parentNode);
    return {
      scrollLeft: node.scrollLeft + parent.scrollLeft,
      scrollTop: node.scrollTop + parent.scrollTop
    };
  }
}

function getSumOffset(node) {
  if (node === document.body) {
    return {
      offsetLeft: 0,
      offsetTop: 0
    };
  } else {
    var parent = getSumOffset(node.offsetParent);
    return {
      offsetLeft: node.offsetLeft + parent.offsetLeft,
      offsetTop: node.offsetTop + parent.offsetTop
    };
  }
}

/***/ }),

/***/ 1909:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.composeEvents = composeEvents;

function composeEvents() {
  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {
    fns[_key] = arguments[_key];
  }

  return function (event) {
    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      args[_key2 - 1] = arguments[_key2];
    }

    event.preventDefault();
    fns.forEach(function (fn) {
      return fn && fn.apply(void 0, [event].concat(args));
    });
  };
}

/***/ }),

/***/ 1924:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = _asyncToGenerator;
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

/***/ }),

/***/ 1927:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = _objectWithoutPropertiesLoose;
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

/***/ }),

/***/ 1928:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(2241);


/***/ }),

/***/ 1929:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_runtime_helpers_esm_asyncToGenerator__ = __webpack_require__(1924);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__babel_runtime_helpers_esm_extends__ = __webpack_require__(730);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__babel_runtime_helpers_esm_objectWithoutPropertiesLoose__ = __webpack_require__(1927);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator__ = __webpack_require__(1928);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_react__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_prop_types__ = __webpack_require__(20);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_prop_types__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_easy_crop__ = __webpack_require__(2228);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_es_locale_provider_LocaleReceiver__ = __webpack_require__(2260);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_es_modal__ = __webpack_require__(2263);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_es_slider__ = __webpack_require__(2264);
function __$styleInject(css) {
    if (!css) return;

    if (typeof window == 'undefined') return;
    var style = document.createElement('style');
    style.setAttribute('media', 'screen');

    style.innerHTML = css;
    document.head.appendChild(style);
    return css;
}












__$styleInject(".antd-img-crop-modal .ant-modal-body {\n  padding-bottom: 16px;\n}\n.antd-img-crop-modal .antd-img-crop-container {\n  position: relative;\n  width: 100%;\n  height: 40vh;\n  margin-bottom: 16px;\n}\n.antd-img-crop-modal .antd-img-crop-control {\n  display: flex;\n  align-items: center;\n  width: 60%;\n  margin-left: auto;\n  margin-right: auto;\n}\n.antd-img-crop-modal .antd-img-crop-control button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 34px;\n  height: 34px;\n  padding: 0;\n  font-style: normal;\n  background: transparent;\n  border: 0;\n  outline: 0;\n  cursor: pointer;\n}\n.antd-img-crop-modal .antd-img-crop-control button[disabled] {\n  cursor: default;\n}\n.antd-img-crop-modal .antd-img-crop-control.zoom button {\n  font-size: 18px;\n}\n.antd-img-crop-modal .antd-img-crop-control.rotate button {\n  font-size: 16px;\n}\n.antd-img-crop-modal .antd-img-crop-control.rotate button:first-of-type {\n  transform: rotate(-20deg);\n}\n.antd-img-crop-modal .antd-img-crop-control.rotate button:last-of-type {\n  transform: rotate(20deg);\n}\n.antd-img-crop-modal .antd-img-crop-control .ant-slider {\n  flex: 1;\n  margin: 0 8px;\n}\n");

var pkg = 'antd-img-crop';

var noop = function noop() {};

var MEDIA_CLASS = pkg + "-media";
var ZOOM_STEP = 0.1;
var MIN_ROTATE = 0;
var MAX_ROTATE = 360;
var ROTATE_STEP = 1;
var EasyCrop = /*#__PURE__*/__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["forwardRef"])(function (props, ref) {
  var src = props.src,
      aspect = props.aspect,
      shape = props.shape,
      grid = props.grid,
      hasZoom = props.hasZoom,
      zoomVal = props.zoomVal,
      rotateVal = props.rotateVal,
      setZoomVal = props.setZoomVal,
      setRotateVal = props.setRotateVal,
      minZoom = props.minZoom,
      maxZoom = props.maxZoom,
      onComplete = props.onComplete,
      cropperProps = props.cropperProps;

  var _useState = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useState"])({
    x: 0,
    y: 0
  }),
      crop = _useState[0],
      setCrop = _useState[1];

  var _useState2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useState"])({
    width: 0,
    height: 0
  }),
      cropSize = _useState2[0],
      setCropSize = _useState2[1];

  var onCropComplete = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function (croppedArea, croppedAreaPixels) {
    onComplete(croppedAreaPixels);
  }, [onComplete]);
  var onMediaLoaded = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function (mediaSize) {
    var width = mediaSize.width,
        height = mediaSize.height;
    var ratioWidth = height * aspect;

    if (width > ratioWidth) {
      setCropSize({
        width: ratioWidth,
        height: height
      });
    } else {
      setCropSize({
        width: width,
        height: width / aspect
      });
    }
  }, [aspect]);
  return /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_react_easy_crop__["a" /* default */], Object.assign({}, cropperProps, {
    ref: ref,
    image: src,
    crop: crop,
    cropSize: cropSize,
    onCropChange: setCrop,
    aspect: aspect,
    cropShape: shape,
    showGrid: grid,
    zoomWithScroll: hasZoom,
    zoom: zoomVal,
    rotation: rotateVal,
    onZoomChange: setZoomVal,
    onRotationChange: setRotateVal,
    minZoom: minZoom,
    maxZoom: maxZoom,
    onCropComplete: onCropComplete,
    onMediaLoaded: onMediaLoaded,
    classes: {
      containerClassName: pkg + "-container",
      mediaClassName: MEDIA_CLASS
    }
  }));
});
EasyCrop.propTypes = {
  src: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string,
  aspect: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  shape: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string,
  grid: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.bool,
  hasZoom: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.bool,
  zoomVal: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  rotateVal: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  setZoomVal: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.func,
  setRotateVal: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.func,
  minZoom: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  maxZoom: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  onComplete: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.func,
  cropperProps: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.object
};
var ImgCrop = /*#__PURE__*/__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["forwardRef"])(function (props, ref) {
  var aspect = props.aspect,
      shape = props.shape,
      grid = props.grid,
      quality = props.quality,
      zoom = props.zoom,
      rotate = props.rotate,
      minZoom = props.minZoom,
      maxZoom = props.maxZoom,
      fillColor = props.fillColor,
      modalTitle = props.modalTitle,
      modalWidth = props.modalWidth,
      modalOk = props.modalOk,
      modalCancel = props.modalCancel,
      beforeCrop = props.beforeCrop,
      children = props.children,
      cropperProps = props.cropperProps;
  var hasZoom = zoom === true;
  var hasRotate = rotate === true;

  var _useState3 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useState"])(''),
      src = _useState3[0],
      setSrc = _useState3[1];

  var _useState4 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useState"])(1),
      zoomVal = _useState4[0],
      setZoomVal = _useState4[1];

  var _useState5 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useState"])(0),
      rotateVal = _useState5[0],
      setRotateVal = _useState5[1];

  var beforeUploadRef = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useRef"])();
  var fileRef = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useRef"])();
  var resolveRef = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useRef"])(noop);
  var rejectRef = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useRef"])(noop);
  var cropPixelsRef = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useRef"])();
  /**
   * Upload
   */

  var renderUpload = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function () {
    var upload = Array.isArray(children) ? children[0] : children;

    var _upload$props = upload.props,
        beforeUpload = _upload$props.beforeUpload,
        accept = _upload$props.accept,
        restUploadProps = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__babel_runtime_helpers_esm_objectWithoutPropertiesLoose__["a" /* default */])(_upload$props, ["beforeUpload", "accept"]);

    beforeUploadRef.current = beforeUpload;
    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__babel_runtime_helpers_esm_extends__["default"])({}, upload, {
      props: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__babel_runtime_helpers_esm_extends__["default"])({}, restUploadProps, {
        accept: accept || 'image/*',
        beforeUpload: function beforeUpload(file, fileList) {
          return new Promise(function (resolve, reject) {
            if (beforeCrop && !beforeCrop(file, fileList)) {
              reject();
              return;
            }

            fileRef.current = file;
            resolveRef.current = resolve;
            rejectRef.current = reject;
            var reader = new FileReader();
            reader.addEventListener('load', function () {
              setSrc(reader.result);
            });
            reader.readAsDataURL(file);
          });
        }
      })
    });
  }, [beforeCrop, children]);
  /**
   * EasyCrop
   */

  var onComplete = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function (croppedAreaPixels) {
    cropPixelsRef.current = croppedAreaPixels;
  }, []);
  /**
   * Controls
   */

  var isMinZoom = zoomVal - ZOOM_STEP < minZoom;
  var isMaxZoom = zoomVal + ZOOM_STEP > maxZoom;
  var isMinRotate = rotateVal === MIN_ROTATE;
  var isMaxRotate = rotateVal === MAX_ROTATE;
  var subZoomVal = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function () {
    if (!isMinZoom) setZoomVal(zoomVal - ZOOM_STEP);
  }, [isMinZoom, zoomVal]);
  var addZoomVal = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function () {
    if (!isMaxZoom) setZoomVal(zoomVal + ZOOM_STEP);
  }, [isMaxZoom, zoomVal]);
  var subRotateVal = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function () {
    if (!isMinRotate) setRotateVal(rotateVal - ROTATE_STEP);
  }, [isMinRotate, rotateVal]);
  var addRotateVal = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function () {
    if (!isMaxRotate) setRotateVal(rotateVal + ROTATE_STEP);
  }, [isMaxRotate, rotateVal]);
  /**
   * Modal
   */

  var modalProps = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useMemo"])(function () {
    var obj = {
      width: modalWidth,
      okText: modalOk,
      cancelText: modalCancel
    };
    Object.keys(obj).forEach(function (key) {
      if (!obj[key]) delete obj[key];
    });
    return obj;
  }, [modalCancel, modalOk, modalWidth]);
  var onClose = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])(function () {
    setSrc('');
    setZoomVal(1);
    setRotateVal(0);
  }, []);
  var onOk = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_react__["useCallback"])( /*#__PURE__*/__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__babel_runtime_helpers_esm_asyncToGenerator__["a" /* default */])( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator___default.a.mark(function _callee2() {
    var naturalImg, naturalWidth, naturalHeight, canvas, ctx, maxLen, halfMax, left, top, maxImgData, _cropPixelsRef$curren, width, height, x, y, _fileRef$current, type, name, uid;

    return __WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            onClose();
            naturalImg = document.querySelector("." + MEDIA_CLASS);
            naturalWidth = naturalImg.naturalWidth, naturalHeight = naturalImg.naturalHeight;
            canvas = document.createElement('canvas');
            ctx = canvas.getContext('2d'); // create a max canvas to cover the source image after rotated

            maxLen = Math.sqrt(Math.pow(naturalWidth, 2) + Math.pow(naturalHeight, 2));
            canvas.width = maxLen;
            canvas.height = maxLen; // rotate the image

            if (hasRotate && rotateVal > 0 && rotateVal < 360) {
              halfMax = maxLen / 2;
              ctx.translate(halfMax, halfMax);
              ctx.rotate(rotateVal * Math.PI / 180);
              ctx.translate(-halfMax, -halfMax);
            }

            ctx.fillStyle = fillColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height); // draw the source image in the center of the max canvas

            left = (maxLen - naturalWidth) / 2;
            top = (maxLen - naturalHeight) / 2;
            ctx.drawImage(naturalImg, left, top); // shrink the max canvas to the crop area size, then align two center points

            maxImgData = ctx.getImageData(0, 0, maxLen, maxLen);
            _cropPixelsRef$curren = cropPixelsRef.current, width = _cropPixelsRef$curren.width, height = _cropPixelsRef$curren.height, x = _cropPixelsRef$curren.x, y = _cropPixelsRef$curren.y;
            canvas.width = width;
            canvas.height = height;
            ctx.putImageData(maxImgData, Math.round(-left - x), Math.round(-top - y)); // get the new image

            _fileRef$current = fileRef.current, type = _fileRef$current.type, name = _fileRef$current.name, uid = _fileRef$current.uid;
            canvas.toBlob( /*#__PURE__*/function () {
              var _ref2 = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__babel_runtime_helpers_esm_asyncToGenerator__["a" /* default */])( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator___default.a.mark(function _callee(blob) {
                var newFile, res, passedFile, _type;

                return __WEBPACK_IMPORTED_MODULE_3__babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {
                  while (1) {
                    switch (_context.prev = _context.next) {
                      case 0:
                        newFile = new File([blob], name, {
                          type: type
                        });
                        newFile.uid = uid;

                        if (!(typeof beforeUploadRef.current !== 'function')) {
                          _context.next = 4;
                          break;
                        }

                        return _context.abrupt("return", resolveRef.current(newFile));

                      case 4:
                        res = beforeUploadRef.current(newFile, [newFile]);

                        if (!(typeof res !== 'boolean' && !res)) {
                          _context.next = 8;
                          break;
                        }

                        console.error('beforeUpload must return a boolean or Promise');
                        return _context.abrupt("return");

                      case 8:
                        if (!(res === true)) {
                          _context.next = 10;
                          break;
                        }

                        return _context.abrupt("return", resolveRef.current(newFile));

                      case 10:
                        if (!(res === false)) {
                          _context.next = 12;
                          break;
                        }

                        return _context.abrupt("return", rejectRef.current('not upload'));

                      case 12:
                        if (!(res && typeof res.then === 'function')) {
                          _context.next = 25;
                          break;
                        }

                        _context.prev = 13;
                        _context.next = 16;
                        return res;

                      case 16:
                        passedFile = _context.sent;
                        _type = Object.prototype.toString.call(passedFile);
                        if (_type === '[object File]' || _type === '[object Blob]') newFile = passedFile;
                        resolveRef.current(newFile);
                        _context.next = 25;
                        break;

                      case 22:
                        _context.prev = 22;
                        _context.t0 = _context["catch"](13);
                        rejectRef.current(_context.t0);

                      case 25:
                      case "end":
                        return _context.stop();
                    }
                  }
                }, _callee, null, [[13, 22]]);
              }));

              return function (_x) {
                return _ref2.apply(this, arguments);
              };
            }(), type, quality);

          case 21:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  })), [hasRotate, onClose, quality, rotateVal]);

  var renderComponent = function renderComponent(titleOfModal) {
    return /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_react___default.a.Fragment, null, renderUpload(), src && /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_antd_es_modal__["default"], Object.assign({
      visible: true,
      wrapClassName: pkg + "-modal",
      title: titleOfModal,
      onOk: onOk,
      onCancel: onClose,
      maskClosable: false,
      destroyOnClose: true
    }, modalProps), /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(EasyCrop, {
      ref: ref,
      src: src,
      aspect: aspect,
      shape: shape,
      grid: grid,
      hasZoom: hasZoom,
      zoomVal: zoomVal,
      rotateVal: rotateVal,
      setZoomVal: setZoomVal,
      setRotateVal: setRotateVal,
      minZoom: minZoom,
      maxZoom: maxZoom,
      onComplete: onComplete,
      cropperProps: cropperProps
    }), hasZoom && /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement("div", {
      className: pkg + "-control zoom"
    }, /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement("button", {
      onClick: subZoomVal,
      disabled: isMinZoom
    }, "\uFF0D"), /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_es_slider__["default"], {
      min: minZoom,
      max: maxZoom,
      step: ZOOM_STEP,
      value: zoomVal,
      onChange: setZoomVal
    }), /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement("button", {
      onClick: addZoomVal,
      disabled: isMaxZoom
    }, "\uFF0B")), hasRotate && /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement("div", {
      className: pkg + "-control rotate"
    }, /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement("button", {
      onClick: subRotateVal,
      disabled: isMinRotate
    }, "\u21BA"), /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_es_slider__["default"], {
      min: MIN_ROTATE,
      max: MAX_ROTATE,
      step: ROTATE_STEP,
      value: rotateVal,
      onChange: setRotateVal
    }), /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement("button", {
      onClick: addRotateVal,
      disabled: isMaxRotate
    }, "\u21BB"))));
  };

  if (modalTitle) return renderComponent(modalTitle);
  return /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_antd_es_locale_provider_LocaleReceiver__["default"], null, function (locale, localeCode) {
    return renderComponent(localeCode === 'zh-cn' ? '编辑图片' : 'Edit image');
  });
});
ImgCrop.propTypes = {
  aspect: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  shape: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.oneOf(['rect', 'round']),
  grid: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.bool,
  quality: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  zoom: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.bool,
  rotate: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.bool,
  minZoom: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  maxZoom: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number,
  fillColor: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string,
  modalTitle: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string,
  modalWidth: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.oneOfType([__WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.number, __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string]),
  modalOk: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string,
  modalCancel: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.string,
  beforeCrop: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.func,
  cropperProps: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.object,
  children: __WEBPACK_IMPORTED_MODULE_5_prop_types___default.a.node
};
ImgCrop.defaultProps = {
  aspect: 1,
  shape: 'rect',
  grid: false,
  quality: 0.4,
  zoom: true,
  rotate: false,
  minZoom: 1,
  maxZoom: 3,
  fillColor: 'white'
};

/* harmony default export */ __webpack_exports__["default"] = (ImgCrop);


/***/ }),

/***/ 1959:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         * 添加成员
                         * dangw@glodon.com
                         * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Search = _antd.Input.Search;

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var UserList = (_dec = (0, _mobxReact.inject)('UserStore'), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(UserList, _React$Component);

	function UserList(props) {
		_classCallCheck(this, UserList);

		var _this = _possibleConstructorReturn(this, (UserList.__proto__ || Object.getPrototypeOf(UserList)).call(this, props));

		_this.handleOk = function () {
			var _this$props$DeliveryS = _this.props.DeliveryStore,
			    taskDetail = _this$props$DeliveryS.taskDetail,
			    projectDetail = _this$props$DeliveryS.projectDetail;

			var dataArray = JSON.parse(JSON.stringify(_this.props.data));
			var users = dataArray.filter(function (res) {
				return res.selected == true;
			});

			// 记录orders
			var length = _this.props.dataSource.length;
			var add = length > 0 ? _this.props.dataSource[length - 1].orders : 0;

			users.forEach(function (item, index) {
				var btoiObj = {
					buildTeamOne: taskDetail.id,
					orders: add + (index + 1),
					canDel: 1,
					userName: item.realname,
					userId: item.id,
					phone: item.phone,
					email: item.email,
					position: '',
					duty: ''
				};
				_this.props.DeliveryStore.saveBuildTeamOneItem({ "btoi": btoiObj }).then(function (res) {
					if (res) {
						_this.props.updateState('add', { visible: false });
						_this.props.getTableSearch(" ");
						_this.props.updateOneItem();
					}
				});
			});
		};

		_this.handleCancel = function () {
			_this.props.updateState('add', { visible: false });
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.props.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.props.updateState('add', {
				data: Object.assign([], dataArray)
			});
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.props.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.props.updateState('add', {
				data: Object.assign([], dataArray)
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.state = {
			text: ''
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(UserList, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 搜索
		/*onSearch = (value) => {
  	const param = _.trim(value);
  	this.props.getSearch(param);
  }*/

		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var param = this.state.text;
			this.props.getSearch(param);
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var _props = this.props,
			    visible = _props.visible,
			    data = _props.data;


			return _react2.default.createElement(
				_antd.Modal,
				{
					maskClosable: false,
					closable: false,
					okText: '提交',
					title: '\u6DFB\u52A0\u6210\u5458',
					visible: visible,
					onOk: this.handleOk,
					onCancel: this.handleCancel
				},
				_react2.default.createElement(
					_antd.Row,
					{ type: 'flex', justify: 'space-between', className: '' },
					_react2.default.createElement(
						_antd.Col,
						{ span: 12, className: 'pr20' },
						_react2.default.createElement(_antd.Input, {
							placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
							suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
							onChange: this.onChange
						}),
						_react2.default.createElement(
							_reactCustomScrollbars.Scrollbars,
							{
								autoHide: true,
								autoHideTimeout: 1000,
								autoHideDuration: 200,
								autoHeight: true,
								autoHeightMin: 0,
								autoHeightMax: 350,
								thumbMinSize: 30,
								universal: true
							},
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul' },
								data.length > 0 && data.map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this2.handClick.bind(_this2, item) },
										_react2.default.createElement(
											'div',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(
											'div',
											{ className: 'ul_station' },
											item.station
										),
										_react2.default.createElement(
											'div',
											{ className: 'ul_email' },
											item.email
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '10px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(75,164,190,1)'
											},
											className: item.selected ? "active" : "hidden", type: 'check' })
									);
								})
							)
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ span: 12, className: 'tl', style: {
								minHeight: '350px',
								borderLeft: '1px solid #e6e6e6'
							} },
						_react2.default.createElement(
							'p',
							{ className: 'pl20' },
							'\u5DF2\u9009\u6210\u5458(',
							data && data.filter(function (res) {
								return res.selected == true;
							}).length,
							')'
						),
						_react2.default.createElement(
							'ul',
							{ className: 'userlist_ul_del' },
							data.filter(function (res) {
								return res.selected == true;
							}).length > 0 && data.filter(function (res) {
								return res.selected == true;
							}).map(function (item, index) {
								return _react2.default.createElement(
									'li',
									{
										key: index,
										className: 'pr',
										onClick: _this2.handClickDel.bind(_this2, item) },
									_react2.default.createElement(
										_antd.Avatar,
										{
											style: { display: 'inlineBlock', backgroundColor: colorList[index % 10], verticalAlign: 'middle' }, size: 'small' },
										item.realname.slice(0, 1)
									),
									'  ',
									_react2.default.createElement(
										'span',
										{ className: 'ul_name' },
										item.realname
									),
									_react2.default.createElement(_antd.Icon, {
										style: {
											position: 'absolute',
											top: '13px',
											right: '15px',
											fontSize: '16px',
											color: 'rgba(184,80,74,1)',
											cursor: 'pointer'
										},
										className: 'userlist_ul_icon',
										type: 'close' })
								);
							})
						)
					)
				)
			);
		}
	}]);

	return UserList;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = UserList;

/***/ }),

/***/ 1960:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交付管理-组建项目团队
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _OneItem = __webpack_require__(1964);

var _OneItem2 = _interopRequireDefault(_OneItem);

var _TwoItem = __webpack_require__(1974);

var _TwoItem2 = _interopRequireDefault(_TwoItem);

var _ThreeItem = __webpack_require__(1973);

var _ThreeItem2 = _interopRequireDefault(_ThreeItem);

var _FourItem = __webpack_require__(1962);

var _FourItem2 = _interopRequireDefault(_FourItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BuildTeam = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(BuildTeam, _React$Component);

	function BuildTeam(props) {
		_classCallCheck(this, BuildTeam);

		var _this = _possibleConstructorReturn(this, (BuildTeam.__proto__ || Object.getPrototypeOf(BuildTeam)).call(this, props));

		_this.getTaskIdByType = function (projectDetail, type) {
			var taskId = null;
			var stages = projectDetail.stages;

			if (stages.length > 0) {
				taskId = stages[0]['tasks'].filter(function (item) {
					return item.taskType === type;
				})[0]['id'];
			}
			return taskId;
		};

		_this.updateTask = function (id) {
			_this.store.getTaskById({ 'id': id }).then(function (res) {
				if (res) {
					_this.store.taskDetail = res;
				}
			});
		};

		_this.getDailyListPage = function () {
			var projectDetail = _this.store.projectDetail;

			_this.store.dailyParmas.projectId = mobx.toJS(projectDetail).id;
			_this.setState({ projectId: mobx.toJS(projectDetail).id });
			_this.store.getDailyListPage().then(function (res) {
				_this.store.dailyList = Object.assign([], res.body);
				_this.store.dailyParmas.pageIndex = res.pageIndex;
				_this.store.dailyParmas.pageSize = res.pageSize;
				_this.store.dailyParmas.totalCount = res.totalCount;
				if (res.body.length > 0) {
					_this.handleSelectedDaily(res.body[0], 0);
				}
			});
		};

		_this.getBuildTeamState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				_this.store.buildTeamState = res;
			});
		};

		_this.getProgressStateInfo = function (state) {
			var info = "";
			if (state === 0) {
				info = "正常";
			}
			if (state === 1) {
				info = "提前";
			}
			if (state === 2) {
				info = "延迟";
			}
			return info;
		};

		_this.handleSelectedDaily = function (item, index) {
			_this.setState({ currentItem: index });
			_this.store.getDailyById({ "id": item.id }).then(function (res) {
				_this.store.dailyDetail = Object.assign({}, res);
			});
		};

		_this.addNewLog = function () {
			_this.store.dailyPageState = 1;
		};

		_this.getTodayContentInfo = function (item) {
			if (item.contents.length >= 2) {

				return '' + item.contents[0]['position'] + item.contents[0]['productCategory'] + '\u5B8C\u6210' + item.contents[0]['actualProgress'] + '%\uFF0C' + item.contents[1]['position'] + item.contents[1]['productCategory'] + '\u5B8C\u6210' + item.contents[1]['actualProgress'] + '%';
			}
			if (item.contents.length > 0) {
				return '' + item.contents[0]['position'] + item.contents[0]['productCategory'] + '\u5B8C\u6210' + item.contents[0]['actualProgress'] + '%';
			}
		};

		_this.switchSteps = function (step) {
			_this.setState({ currentStep: step });
		};

		_this.getBuildTeamStateInfo = function (state) {
			if (state === 0) {
				return "待启动";
			}
			if (state === 1) {
				return "进行中";
			}
			if (state === 2) {
				return "已完成";
			}
		};

		_this.getBuildTeamStateIcon = function (state) {
			if (state === 0) {
				return "./images/delivery/u1055.png";
			}
			if (state === 1) {
				return "./images/delivery/u1053.png";
			}
			if (state === 2) {
				return "./images/delivery/u1232.png";
			}
		};

		_this.overCurrentStageTask = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.overBuildTeamStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				_this.store.buildTeamState = res;
				_this.getProjectDetail();
			});
		};

		_this.reStartBuildTeam = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartBuildTeam({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				_this.store.buildTeamState = res;
				_this.getProjectDetail();
			});
		};

		_this.getProjectDetail = function () {
			var search = _this.props.location.search;
			var projectId = _url2.default.parse(search, true).query.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			currentItem: 0,
			projectId: null,
			currentStep: 1,
			taskId: null
		};
		return _this;
	}

	_createClass(BuildTeam, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			var taskDetail = mobx.toJS(nextProps.DeliveryStore.taskDetail);
			if (projectDetail.id !== this.state.projectId || taskDetail.id !== null && taskDetail.id !== this.state.taskId) {
				this.setState({ projectId: projectDetail.id, taskId: taskDetail.id, currentStep: 1 });
				//this.store.projectDetail = projectDetail;
				//this.updateTask(this.getTaskIdByType(projectDetail, "buildTeam"))
				this.getBuildTeamState();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			// this.getDailyListPage();
			var projectDetail = this.store.projectDetail;

			this.setState({ projectId: mobx.toJS(projectDetail).id });
			this.getBuildTeamState();
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {
			// this.getDailyListPage();
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var currentStep = this.state.currentStep;
			var buildTeamState = this.store.buildTeamState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal' },
				_react2.default.createElement(
					'div',
					{ className: 'mt20 f14' },
					_react2.default.createElement(
						'div',
						{ style: { display: "flex", justifyContent: 'center', alignItems: 'center' } },
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(buildTeamState).state1), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(buildTeamState).state1)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(1);
										}, type: currentStep === 1 ? 'primary' : 'link', className: currentStep === 1 ? 'active-button' : 'no-active-button' },
									'\u7EC4\u5EFA\u56E2\u961F'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 1 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(buildTeamState).state2), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(buildTeamState).state2)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(2);
										}, type: currentStep === 2 ? 'primary' : 'link', className: currentStep === 2 ? 'active-button' : 'no-active-button' },
									'\u786E\u5B9A\u76EE\u6807'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(buildTeamState).state3), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(buildTeamState).state3)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 3 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(3);
										}, type: currentStep === 3 ? 'primary' : 'link', className: currentStep === 3 ? 'active-button' : 'no-active-button' },
									'\u51B3\u7B56\u673A\u5236'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 3 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(buildTeamState).state4), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(buildTeamState).state4)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 4 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(4);
										}, type: currentStep === 4 ? 'primary' : 'link', className: currentStep === 4 ? 'active-button' : 'no-active-button' },
									'\u6C9F\u901A\u673A\u5236'
								),
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					currentStep === 1 ? _react2.default.createElement(_OneItem2.default, {
						projectId: this.state.projectId,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartBuildTeam: this.reStartBuildTeam,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 2 ? _react2.default.createElement(_TwoItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartBuildTeam: this.reStartBuildTeam,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 3 ? _react2.default.createElement(_ThreeItem2.default, {
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartBuildTeam: this.reStartBuildTeam,
						store: this.store }) : _react2.default.createElement(_FourItem2.default, {
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartBuildTeam: this.reStartBuildTeam,
						store: this.store })
				)
			);
		}
	}]);

	return BuildTeam;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = BuildTeam;

/***/ }),

/***/ 1961:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Cost = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Cost, _React$Component);

	function Cost(props) {
		_classCallCheck(this, Cost);

		var _this = _possibleConstructorReturn(this, (Cost.__proto__ || Object.getPrototypeOf(Cost)).call(this, props));

		_this.handleChange = function (e, type) {
			console.log('checked = ' + e.target.checked, type);
			_this.props.updateData(type, e.target.checked ? 1 : 0);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {};
		return _this;
	}

	_createClass(Cost, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			_objectDestructuringEmpty(this.state);

			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;
			var label = this.props.label;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: "", labelAlign: 'left', className: 'w', style: { marginBottom: "0" } },
								_react2.default.createElement(
									'div',
									{ style: { display: 'flex', flexDirection: 'column', alignItems: 'flex-start' } },
									_react2.default.createElement(
										_antd.Checkbox,
										{ checked: fields.costTargetOne, onChange: function onChange(e) {
												_this2.handleChange(e, "costTargetOne");
											} },
										'\u5206\u5305\u8D39\u7528\uFF1A\u53C2\u7167\u5408\u540C'
									),
									_react2.default.createElement(
										'div',
										{ style: { display: 'flex', alignItems: 'top' } },
										_react2.default.createElement(
											'div',
											null,
											_react2.default.createElement(_antd.Checkbox, { checked: fields.costTargetTwo, onChange: function onChange(e) {
													_this2.handleChange(e, "costTargetTwo");
												} }),
											_react2.default.createElement(
												'span',
												{ style: { paddingLeft: '8px' } },
												'\u5B89\u5168\u6587\u660E\u65BD\u5DE5\uFF1A'
											)
										),
										_react2.default.createElement(
											'div',
											null,
											'\u5408\u540C\u989D\u2264200\u4E07\uFF0C\u8D39\u7528\u22642000\u5143',
											_react2.default.createElement('br', null),
											'\u5408\u540C\u989D\uFF1E200\u4E07\uFF0C\u8D39\u7528\u22643000\u5143'
										)
									),
									_react2.default.createElement(
										_antd.Checkbox,
										{ className: 'cost-check', checked: fields.costTargetThree, onChange: function onChange(e) {
												_this2.handleChange(e, "costTargetThree");
											} },
										'\u62DB\u5F85\u8D39\uFF1A\u2264\u5408\u540C\u989D*2\u2030  \u4E14  \u22642000\u5143'
									),
									_react2.default.createElement(
										_antd.Checkbox,
										{ className: 'cost-check', checked: fields.costTargetThree2, onChange: function onChange(e) {
												_this2.handleChange(e, "costTargetThree2");
											} },
										'\u62DB\u5F85\u8D39\uFF08\u5C55\u5385\u9002\u7528\uFF09\uFF1A\u2264\u5408\u540C\u989D\u76842\u2030 \u4E14 \u22641500\u5143'
									),
									_react2.default.createElement(
										_antd.Checkbox,
										{ className: 'cost-check', checked: fields.costTargetFour, onChange: function onChange(e) {
												_this2.handleChange(e, "costTargetFour");
											} },
										'\u98CE\u9669\u9644\u52A0\uFF1A\u2264\u5408\u540C\u989D*5\u2030  \u4E14  \u226410000\u5143'
									),
									_react2.default.createElement(
										_antd.Checkbox,
										{ className: 'cost-check', checked: fields.costTargetFour2, onChange: function onChange(e) {
												_this2.handleChange(e, "costTargetFour2");
											} },
										'\u98CE\u9669\u9644\u52A0\uFF08\u5C55\u5385\u9002\u7528\uFF09\uFF1A\u2264\u5408\u540C\u989D\u76845\u2030 \u4E14 \u22645000\u5143'
									)
								)
							)
						)
					)
				)
			);
		}
	}]);

	return Cost;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Cost;

/***/ }),

/***/ 1962:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            *项目管理
            *qiufh@bocspace.cn
            */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _EditableTableFourItem = __webpack_require__(1873);

var _EditableTableFourItem2 = _interopRequireDefault(_EditableTableFourItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FourItem = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(FourItem, _React$Component);

	function FourItem(props) {
		_classCallCheck(this, FourItem);

		var _this = _possibleConstructorReturn(this, (FourItem.__proto__ || Object.getPrototypeOf(FourItem)).call(this, props));

		_this.getBuildTeamFourItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamFourItemList({ "taskId": taskDetail.id }).then(function (res) {
				_this.store.btFourItemList = res;
			});
		};

		_this.saveContents = function (dataSource) {
			console.log("dataSource=>", dataSource);
		};

		_this.saveFourItem = function (row) {
			var masters = row.masters,
			    key = row.key,
			    keyIndex = row.keyIndex,
			    newItem = _objectWithoutProperties(row, ['masters', 'key', 'keyIndex']);

			console.log(row, masters, 'masters');
			if (masters.length > 0) {
				newItem['userTeamName'] = masters[0]['userName'];
				newItem['userTeamId'] = masters[0]['userId'];
			} else {
				newItem['userTeamName'] = "";
				newItem['userTeamId'] = "";
			}
			_this.saveBuildTeamFourItem({ "btfi": Object.assign(newItem, { "used": newItem['used'] ? 1 : 0 }) });
		};

		_this.saveBuildTeamFourItem = function (parmas) {
			_this.store.saveBuildTeamFourItem(parmas).then(function (res) {
				_this.getBuildTeamFourItemList();
			});
		};

		_this.overCurrentStage = function () {
			var cfr = _this.checkFormRequre();
			if (!cfr.result) {
				_antd.message.warn(cfr.info);
				return;
			}
			_this.props.overCurrentStageTask();
			_this.getBuildTeamFourItemList();
		};

		_this.checkFormRequre = function () {
			var resultObj = { "info": "频次和负责人不能为空", result: false };
			var btFourItemList = _this.store.btFourItemList;
			// console.log('btFourItemList=>',mobx.toJS(btFourItemList))

			var bfil = mobx.toJS(btFourItemList).filter(function (item, index) {

				return item.used === 1 && (item.frequency === null || item.frequency === "" || item.userTeamName === null || item.userTeamName === "");
			});
			if (bfil.length === 0) {
				resultObj.result = true;
			}
			return resultObj;
		};

		_this.store = _this.props.store;
		_this.state = {
			visible: false,
			stateValue: 0,
			id: ""
		};
		return _this;
	}

	_createClass(FourItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getBuildTeamFourItemList();
		}
	}, {
		key: 'render',
		value: function render() {
			var _store = this.store,
			    buildTeamState = _store.buildTeamState,
			    btFourItemList = _store.btFourItemList;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;

			_objectDestructuringEmpty(this.state);

			return _react2.default.createElement(
				'div',
				{ style: { height: 'auto' } },
				_react2.default.createElement(
					'div',
					{ className: 'mb10' },
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.props.reStartBuildTeam,
							style: buildTeamState.state4 === 2 ? { display: '', cursor: 'pointer' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					)
				),
				_react2.default.createElement(_EditableTableFourItem2.default, {
					id: 'id',
					store: this.store,
					dataSource: mobx.toJS(btFourItemList).map(function (item, index) {
						var masters = [];
						if (item.userTeamName !== null && item.userTeamId !== null && item.userTeamName !== "" && item.userTeamId !== "") masters = [{ "userName": item.userTeamName, "userId": item.userTeamId }];
						return Object.assign(item, { "keyIndex": index + 1, "masters": masters });
					}),
					saveData: this.saveContents,
					saveItem: this.saveFourItem,
					disabled: buildTeamState.state4 === 2 ? true : false,
					pid: ''
				}),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state4 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStage, ghost: true,
							type: 'primary' },
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state4 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep - 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0A\u4E00\u6B65'
					)
				)
			);
		}
	}]);

	return FourItem;
}(_react2.default.Component)) || _class) || _class;

exports.default = FourItem;

/***/ }),

/***/ 1963:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Marketing = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Marketing, _React$Component);

	function Marketing(props) {
		_classCallCheck(this, Marketing);

		var _this = _possibleConstructorReturn(this, (Marketing.__proto__ || Object.getPrototypeOf(Marketing)).call(this, props));

		_this.handleChange = function (e, type) {
			console.log('checked = ' + e.target.checked, type);
			_this.props.updateData(type, e.target.checked ? 1 : 0);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			markingTargetStandard: false,
			markingTargetSatisfied: false
		};
		return _this;
	}

	_createClass(Marketing, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var _state = this.state,
			    markingTargetStandard = _state.markingTargetStandard,
			    markingTargetSatisfied = _state.markingTargetSatisfied;
			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;
			var label = this.props.label;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label, labelAlign: 'left', className: 'w', style: { marginBottom: "0" } },
								_react2.default.createElement(
									'div',
									{ style: { display: 'flex', flexDirection: 'column', alignItems: 'flex-start' } },
									_react2.default.createElement(
										_antd.Checkbox,
										{ className: 'cost-check', checked: fields.markingTargetStandard, onChange: function onChange(e) {
												_this2.handleChange(e, "markingTargetStandard");
											} },
										'\u6253\u9020\u6210\u4E3A\u6807\u6746\u9879\u76EE\uFF0C\u5F62\u6210\u8425\u9500\u6848\u4F8B'
									),
									_react2.default.createElement(
										_antd.Checkbox,
										{ className: 'cost-check', checked: fields.markingTargetSatisfied, onChange: function onChange(e) {
												_this2.handleChange(e, "markingTargetSatisfied");
											} },
										'\u987E\u5BA2\u6EE1\u610F\uFF0C\u80FD\u591F\u7ED9\u6211\u4EEC\u53D1\u8868\u626C\u4FE1'
									)
								)
							)
						)
					)
				)
			);
		}
	}]);

	return Marketing;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Marketing;

/***/ }),

/***/ 1964:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *项目管理
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _EditableTableOneItem = __webpack_require__(1874);

var _EditableTableOneItem2 = _interopRequireDefault(_EditableTableOneItem);

var _AddPerosn = __webpack_require__(1959);

var _AddPerosn2 = _interopRequireDefault(_AddPerosn);

var _events = __webpack_require__(33);

var _events2 = _interopRequireDefault(_events);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var OneItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = (0, _mobxReact.inject)('UserStore'), _dec(_class = _dec2(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(OneItem, _React$Component);

	function OneItem(props) {
		_classCallCheck(this, OneItem);

		var _this = _possibleConstructorReturn(this, (OneItem.__proto__ || Object.getPrototypeOf(OneItem)).call(this, props));

		_this.handleAdd = function () {
			_this.setState({
				add: Object.assign(_this.state.add, { visible: true })
			}, function () {
				_this.getSearch("");
			});
		};

		_this.onChange = function (type, e) {
			_this.store.salesParams[type] = e.target.value;
		};

		_this.handleChange = function (type, value) {
			if (value == undefined) {
				// 清空
				_this.store.salesParams[type] = 10;
			} else {
				_this.store.salesParams[type] = value;
			}
		};

		_this.handleSearch = function () {
			_this.store.getSalesOrderPageList();
		};

		_this.handleOk = function () {
			var _this$state = _this.state,
			    id = _this$state.id,
			    stateValue = _this$state.stateValue;

			var params = {
				id: id,
				state: typeof stateValue == "string" ? Number(stateValue) : stateValue
			};
			_this.store.changeSalesOrderState(params).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					_this.setState({
						visible: false
					});
					_this.handleSearch();
				}
			});
		};

		_this.handleCancel = function (e) {
			_this.setState({
				visible: false
			});
		};

		_this.confirm = function (id) {
			var params = {
				id: id
			};
			_this.store.delSalesOrderState(params).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this.store.getSalesOrderPageList();
				}
			});
		};

		_this.delProject = function (id) {
			_this.store.delProject({ "id": id }).then(function (res) {
				_this.store.getProjectPageList('');
			});
		};

		_this.getBuildTeamOneItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamOneItemList({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				var data = res.map(function (item, index) {
					return Object.assign(item, { keyIndex: index + 1 });
				});
				_this.store.buildTeamOneItem = data;
				_this.setState({ dataSource: data, oneItemList: data });
			});
		};

		_this.updateState = function (type, data) {
			console.log(type, data);
			_this.setState(_defineProperty({}, type, Object.assign(_this.state[type], data)));
		};

		_this.getSearch = function (param) {
			var projectDetail = _this.store.projectDetail;

			var params = param;
			_this.props.UserStore.getRoleData(params).then(function (res) {
				_this.setState({
					add: Object.assign(_this.state.add, { data: res.body.filter(function (item) {
							return item.id !== projectDetail.masterId;
						}).map(function (item) {
							return Object.assign(item, { selected: false });
						}) })
				});
			});
		};

		_this.saveContents = function () {
			_this.getBuildTeamOneItemList();
		};

		_this.saveBuildTeamOneItem = function (params) {
			_this.store.saveBuildTeamOneItem(params).then(function (res) {
				if (res) {
					_this.getBuildTeamOneItemList();
				}
			});
		};

		_this.saveItem = function (row) {
			var taskDetail = _this.store.taskDetail;
			var oneItemList = _this.state.oneItemList;
			// 记录orders

			var length = oneItemList.length;
			var add = length > 0 ? oneItemList[length - 1].orders : 0;

			var newItem = {
				"buildTeamOne": taskDetail.id,
				'orders': add + 1,
				"userName": "",
				"userId": "",
				"position": row.position,
				"phone": row.phone,
				"email": row.email,
				"duty": row.duty,
				"canDel": 1
			};
			if (typeof row.id !== "undefined") {
				newItem['id'] = row.id;
				newItem['orders'] = row.orders;
				newItem['userId'] = row.userId;
				newItem['canDel'] = row.canDel;
				newItem['position'] = row.position;
				newItem['phone'] = row.phone;
				newItem['duty'] = row.duty;
				newItem['email'] = row.email;
				newItem['userName'] = row.userName;
			}
			_this.saveBuildTeamOneItem({ "btoi": newItem });
			// console.log('newItem',row)
		};

		_this.formatDataSource = function () {
			var dataSource = _this.state.dataSource;

			var ds = dataSource.map(function (item, index) {
				if (index === 0) {
					return Object.assign(item, { "duty": "1、全力保障项目目标完成；\n" + "2、协调内外部资源，负责项目交付进度和质量控制；\n" + "3、安排内部其他项目组成员工作，做好分工安排；\n" + "4、保障项目中各类文档按期完成；\n" + "5、定期做高层汇报，并提出管理改进建议" });
				} else {
					return item;
				}
			});
			return ds;
		};

		_this.overCurrentStage = function () {
			// const cict = this.checkIsIncludeTeam();
			// if(!cict.result){
			// 	message.warn(cict.info)
			// 	return
			// }
			var ctpd = _this.checkTeamPositionAndDuty();
			if (!ctpd.result) {
				_antd.message.warn(ctpd.info);
				return;
			}
			_this.props.overCurrentStageTask();
		};

		_this.doneAndNext = function () {
			var currentStep = _this.props.currentStep;
			// const cict = this.checkIsIncludeTeam();
			// if(!cict.result){
			// 	message.warn(cict.info)
			// 	return
			// }

			var ctpd = _this.checkTeamPositionAndDuty();
			if (!ctpd.result) {
				_antd.message.warn(ctpd.info);
				return;
			}
			_this.props.overCurrentStageTask();
			_this.props.switchSteps(currentStep + 1);
		};

		_this.checkIsIncludeTeam = function () {
			var dataSource = _this.state.dataSource;

			var resultObj = { "info": "至少选择一位团队成员", result: false };
			if (dataSource.length >= 2) {
				resultObj.result = true;
			}
			return resultObj;
		};

		_this.checkTeamPositionAndDuty = function () {
			var dataSource = _this.state.dataSource;

			var resultObj = { "info": "团队成员职务和职责不能为空", result: false };
			var ds = dataSource.filter(function (item, index) {
				return index > 0 && item.position === "" || item.duty === "";
			});
			if (ds.length === 0) resultObj.result = true;
			return resultObj;
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			visible: false,
			stateValue: 0,
			id: "",
			dataSource: [],
			oneItemList: [],
			add: {
				visible: false,
				data: []
			},
			projectId: null,
			taskId: null
		};
		return _this;
	}

	_createClass(OneItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			//const projectDetail = mobx.toJS(this.store.projectDetail)
			//const taskDetail = mobx.toJS(nextProps.DeliveryStore.taskDetail)
			//console.log(this.store.projectId, nextProps.projectId, 'projectDetail')
			/*if(this.store.projectId!=nextProps.projectId) {
   	this.getBuildTeamOneItemList();
   }*/
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this2 = this;

			this.getBuildTeamOneItemList();
			this.emitter = _events2.default.addListener('getBuildTeamOneItemList', function (res) {
				_this2.getBuildTeamOneItemList();
			});
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}

		// 添加成员


		// 列表搜索

	}, {
		key: 'render',
		value: function render() {
			var _store = this.store,
			    projectDetail = _store.projectDetail,
			    buildTeamState = _store.buildTeamState;
			var dataSource = this.state.dataSource;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;

			return _react2.default.createElement(
				'div',
				{ style: { height: 'auto' } },
				_react2.default.createElement(
					'div',
					{ className: 'mt20', style: { display: 'flex', justifyContent: 'space-between' } },
					_react2.default.createElement(
						'div',
						{ className: 'mb10' },
						_react2.default.createElement(
							_antd.Button,
							{
								ghost: true,
								className: 'fl',
								type: 'primary',
								icon: 'plus',
								onClick: this.handleAdd,
								style: buildTeamState.state1 === 2 ? { display: 'none' } : { display: '' }
							},
							'\u6DFB\u52A0\u7EC4\u7EC7\u6210\u5458'
						),
						_react2.default.createElement(
							_antd.Button,
							{
								ghost: true,
								className: 'fl',
								type: 'primary',
								icon: 'delete',
								style: { display: 'none' }
							},
							'\u6279\u91CF\u5220\u9664'
						),
						_react2.default.createElement(
							_antd.Button,
							{
								ghost: true,
								className: 'fl',
								type: 'primary',
								icon: 'poweroff',
								onClick: this.props.reStartBuildTeam,
								style: buildTeamState.state1 === 2 ? { display: '' } : { display: 'none' }
							},
							'\u91CD\u65B0\u542F\u52A8'
						)
					)
				),
				_react2.default.createElement(_EditableTableOneItem2.default, {
					id: 'id',
					store: this.store,
					dataSource: this.formatDataSource(),
					saveData: this.saveContents,
					saveItem: this.saveItem,
					disabled: buildTeamState.state1 === 2 ? true : false,
					pid: ''
				}),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state1 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStage,
							ghost: true,
							type: 'primary'
						},
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					),
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
						' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state1 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep + 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0B\u4E00\u6B65'
					)
				),
				_react2.default.createElement(_AddPerosn2.default, _extends({}, this.state.add, {
					dataSource: this.formatDataSource(),
					updateState: this.updateState,
					getSearch: this.getSearch,
					getTableSearch: this.getBuildTeamOneItemList,
					updateOneItem: this.getBuildTeamOneItemList
				}))
			);
		}
	}]);

	return OneItem;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = OneItem;

/***/ }),

/***/ 1965:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd2FourItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd2FourItem, _React$Component);

	function PersonAdd2FourItem(props) {
		_classCallCheck(this, PersonAdd2FourItem);

		var _this = _possibleConstructorReturn(this, (PersonAdd2FourItem.__proto__ || Object.getPrototypeOf(PersonAdd2FourItem)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var users = dataArray.filter(function (res) {
				return res.selected == true;
			}).map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: "",
				data: Object.assign([], _this.state.defaultData)
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: _this.props.data, // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [] // 筛选数据
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd2FourItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.stringify(nextProps.data) != JSON.stringify(this.props.data)) {
				this.setState({
					oldSelect: nextProps.data
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var params = "";
			// 未选的全部用户
			var taskDetail = this.props.DeliveryStore.taskDetail;

			this.props.DeliveryStore.getBuildTeamOneItemList({ "taskId": taskDetail.id }).then(function (res) {
				_this3.setState({
					defaultData: res.map(function (item) {
						return Object.assign(item, { selected: false, realname: item.userName });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text;
			var disabled = this.props.disabled;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					_react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: '\u6DFB\u52A0\u8D1F\u8D23\u4EBA',
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								data && data.filter(function (res) {
									return res.selected == true;
								}).length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								data.filter(function (res) {
									return res.selected == true;
								}).length > 0 && data.filter(function (res) {
									return res.selected == true;
								}).map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd2FourItem;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd2FourItem;

/***/ }),

/***/ 1966:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Profit = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Profit, _React$Component);

	function Profit(props) {
		_classCallCheck(this, Profit);

		var _this = _possibleConstructorReturn(this, (Profit.__proto__ || Object.getPrototypeOf(Profit)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			_this.props.updateData("profitTarget", e.target.value);
		};

		_this.handleNumChange = function (e, type) {
			// console.log(e.target.value)
			_this.props.updateData(type, e.target.value);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0 //defalut 0
		};
		return _this;
	}

	_createClass(Profit, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var sureState = this.state.sureState;
			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					_extends({}, formItemLayout, { labelAlign: 'left' }),
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '', className: 'w', style: { marginBottom: "0" } },
								getFieldDecorator('profitTarget', {
									initialValue: fields.profitTarget,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: this.handleTimeSure },
									_react2.default.createElement(
										_antd.Radio,
										{ value: 0 },
										'\u4E0D\u4E8F\u635F'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: 1 },
										'\u76C8\u5229'
									)
								)),
								getFieldDecorator('profitTargetRate', {
									initialValue: fields.profitTargetRate,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'profitTargetRate');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' %'
							)
						)
					)
				)
			);
		}
	}]);

	return Profit;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Profit;

/***/ }),

/***/ 1967:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Progress = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Progress, _React$Component);

	function Progress(props) {
		_classCallCheck(this, Progress);

		var _this = _possibleConstructorReturn(this, (Progress.__proto__ || Object.getPrototypeOf(Progress)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressPromiseTimeSure", e.target.value);
		};

		_this.handleBaseTime = function (date, datestring) {
			_this.props.updateData("progressPromiseBaseTime", date.valueOf());
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0 //defalut 0
		};
		return _this;
	}

	_createClass(Progress, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var sureState = this.state.sureState;
			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u8FDB\u573A\u65F6\u95F4', labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								getFieldDecorator('progressPromiseTimeSure', {
									initialValue: fields.progressPromiseTimeSure,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: this.handleTimeSure },
									_react2.default.createElement(
										_antd.Radio,
										{ value: 0 },
										'\u672A\u786E\u5B9A'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: 1 },
										'\u5DF2\u786E\u5B9A'
									)
								)),
								getFieldDecorator('progressTargetBaseTime', {
									initialValue: fields.progressPromiseTimeSure == null || fields.progressPromiseBaseTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.progressPromiseBaseTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
									rules: [{ required: false, message: '此项是必填' }]
								})(fields.progressPromiseTimeSure === 1 ? _react2.default.createElement(_antd.DatePicker, {
									className: 'w',
									style: { width: '160px' },
									placeholder: '\u8BF7\u9009\u62E9',
									format: 'YYYY-MM-DD',
									onChange: this.handleBaseTime
								}) : _react2.default.createElement('span', null))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u975E\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4', labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'T+ ',
								getFieldDecorator('progressPromiseNostandardDay', {
									initialValue: fields.progressPromiseNostandardDay,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleDaysChange(e, 'progressPromiseNostandardDay');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u65E5\u5386\u5929'
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u88C5\u914D\u5B8C\u6210\u65F6\u95F4', labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'T+ ',
								getFieldDecorator('progressPromiseOverDay', {
									initialValue: fields.progressPromiseOverDay,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleDaysChange(e, 'progressPromiseOverDay');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u65E5\u5386\u5929'
							)
						)
					)
				)
			);
		}
	}]);

	return Progress;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Progress;

/***/ }),

/***/ 1968:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Progress = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Progress, _React$Component);

	function Progress(props) {
		_classCallCheck(this, Progress);

		var _this = _possibleConstructorReturn(this, (Progress.__proto__ || Object.getPrototypeOf(Progress)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressTargetTimeSure", e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.handleBaseTime = function (date, datestring) {
			_this.props.updateData("progressTargetBaseTime", date.valueOf());
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, parseInt(e.target.value));
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0 //defalut 0
		};
		return _this;
	}

	_createClass(Progress, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var sureState = this.state.sureState;
			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u8FDB\u573A\u65F6\u95F4', labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								getFieldDecorator('progressTargetTimeSure', {
									initialValue: fields.progressTargetTimeSure,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: this.handleTimeSure },
									_react2.default.createElement(
										_antd.Radio,
										{ value: 0 },
										'\u672A\u786E\u5B9A'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: 1 },
										'\u5DF2\u786E\u5B9A'
									)
								)),
								getFieldDecorator('progressTargetBaseTime', {
									initialValue: fields.progressTargetBaseTime == null || fields.progressTargetBaseTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.progressTargetBaseTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
									rules: [{ required: false, message: '此项是必填' }]
								})(fields.progressTargetTimeSure === 1 ? _react2.default.createElement(_antd.DatePicker, {
									className: 'w',
									style: { width: '160px' },
									placeholder: '\u8BF7\u9009\u62E9',
									format: 'YYYY-MM-DD',
									onChange: this.handleBaseTime
								}) : _react2.default.createElement('span', null))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u975E\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4', labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'T+ ',
								getFieldDecorator('progressTargetNostandardDay', {
									initialValue: fields.progressTargetNostandardDay,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleDaysChange(e, 'progressTargetNostandardDay');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u65E5\u5386\u5929'
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u88C5\u914D\u5B8C\u6210\u65F6\u95F4', labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'T+ ',
								getFieldDecorator('progressTargetOverDay', {
									initialValue: fields.progressTargetOverDay,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleDaysChange(e, 'progressTargetOverDay');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u65E5\u5386\u5929'
							)
						)
					)
				)
			);
		}
	}]);

	return Progress;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Progress;

/***/ }),

/***/ 1969:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var QualityPromise = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(QualityPromise, _React$Component);

	function QualityPromise(props) {
		_classCallCheck(this, QualityPromise);

		var _this = _possibleConstructorReturn(this, (QualityPromise.__proto__ || Object.getPrototypeOf(QualityPromise)).call(this, props));

		_this.handleNumChange = function (e, key) {
			// console.log(e.target.value)
			_this.props.updateData(key, e.target.value);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {};
		return _this;
	}

	_createClass(QualityPromise, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			_objectDestructuringEmpty(this.state);

			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;
			var label = this.props.label;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					_extends({}, formItemLayout, { labelAlign: 'left' }),
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label, className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'\u2264 ',
								getFieldDecorator('qualityPromiseAccidentCount', {
									initialValue: fields.qualityPromiseAccidentCount,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'qualityPromiseAccidentCount');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u6B21 ',
								label === '验收次数' ? '客户确认签字' : ''
							)
						)
					)
				)
			);
		}
	}]);

	return QualityPromise;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = QualityPromise;

/***/ }),

/***/ 1970:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Quality = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Quality, _React$Component);

	function Quality(props) {
		_classCallCheck(this, Quality);

		var _this = _possibleConstructorReturn(this, (Quality.__proto__ || Object.getPrototypeOf(Quality)).call(this, props));

		_this.handleNumChange = function (e, key) {
			// console.log(e.target.value)
			_this.props.updateData(key, e.target.value);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {};
		return _this;
	}

	_createClass(Quality, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			_objectDestructuringEmpty(this.state);

			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;
			var label = this.props.label;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					_extends({}, formItemLayout, { labelAlign: 'left' }),
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label, className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'\u2264 ',
								getFieldDecorator('qualityTargetCheckCount', {
									initialValue: fields.qualityTargetCheckCount,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'qualityTargetCheckCount');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u6B21 ',
								label === '验收次数' ? '客户确认签字' : ''
							)
						)
					)
				)
			);
		}
	}]);

	return Quality;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Quality;

/***/ }),

/***/ 1971:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Safety = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Safety, _React$Component);

	function Safety(props) {
		_classCallCheck(this, Safety);

		var _this = _possibleConstructorReturn(this, (Safety.__proto__ || Object.getPrototypeOf(Safety)).call(this, props));

		_this.handleNumChange = function (e, type) {
			// console.log(e.target.value)
			_this.props.updateData(type, e.target.value);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {};
		return _this;
	}

	_createClass(Safety, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			_objectDestructuringEmpty(this.state);

			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;
			var _props = this.props,
			    label = _props.label,
			    tipInfo = _props.tipInfo,
			    label2 = _props.label2,
			    tipInfo2 = _props.tipInfo2;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label, labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'\u2264 ',
								getFieldDecorator('safePromiseAccidentCount', {
									initialValue: fields.safePromiseAccidentCount,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'safePromiseAccidentCount');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u6B21 ',
								tipInfo
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label2, labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'\u2264 ',
								getFieldDecorator('safePromiseTreacherousCount', {
									initialValue: fields.safePromiseTreacherousCount,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'safePromiseTreacherousCount');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u6B21 ',
								tipInfo2
							)
						)
					)
				)
			);
		}
	}]);

	return Safety;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Safety;

/***/ }),

/***/ 1972:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Safety = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Safety, _React$Component);

	function Safety(props) {
		_classCallCheck(this, Safety);

		var _this = _possibleConstructorReturn(this, (Safety.__proto__ || Object.getPrototypeOf(Safety)).call(this, props));

		_this.handleNumChange = function (e, type) {
			// console.log(e.target.value)
			_this.props.updateData(type, e.target.value);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {};
		return _this;
	}

	_createClass(Safety, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			_objectDestructuringEmpty(this.state);

			var buildTeamTwoMainObj = this.store.buildTeamTwoMainObj;
			var _props = this.props,
			    label = _props.label,
			    tipInfo = _props.tipInfo,
			    label2 = _props.label2,
			    tipInfo2 = _props.tipInfo2;

			var fields = mobx.toJS(buildTeamTwoMainObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label, labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'\u2264 ',
								getFieldDecorator('safeTargetAccidentCount', {
									initialValue: fields.safeTargetAccidentCount,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'safeTargetAccidentCount');
									}, placeholder: '\u8BF7\u8F93\u5165' })),
								' \u6B21 ',
								tipInfo
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: label2, labelAlign: 'left', className: 'w build-two-form-label', style: { marginBottom: "0" } },
								'\u2264 ',
								getFieldDecorator('safeTargetTreacherousCount', {
									initialValue: fields.safeTargetTreacherousCount,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { className: 'build-two-input', onBlur: function onBlur(e) {
										_this2.handleNumChange(e, 'safeTargetTreacherousCount');
									}, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57' })),
								' \u6B21 ',
								tipInfo2
							)
						)
					)
				)
			);
		}
	}]);

	return Safety;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = Safety;

/***/ }),

/***/ 1973:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            *项目管理
            *qiufh@bocspace.cn
            */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _EditableTableThreeItemPolicy = __webpack_require__(1876);

var _EditableTableThreeItemPolicy2 = _interopRequireDefault(_EditableTableThreeItemPolicy);

var _EditableTableThreeItemMatter = __webpack_require__(1875);

var _EditableTableThreeItemMatter2 = _interopRequireDefault(_EditableTableThreeItemMatter);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ThreeItem = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ThreeItem, _React$Component);

	function ThreeItem(props) {
		_classCallCheck(this, ThreeItem);

		var _this = _possibleConstructorReturn(this, (ThreeItem.__proto__ || Object.getPrototypeOf(ThreeItem)).call(this, props));

		_this.saveContents = function (dataSource) {
			console.log("dataSource=========>", dataSource);
			_this.setState({ btThreeList: dataSource });
		};

		_this.savePolicy = function (dataSource) {};

		_this.saveDecisionItem = function (row) {
			var taskDetail = _this.store.taskDetail;
			var btThreeList = _this.state.btThreeList;

			// 记录orders

			var length = btThreeList.length;
			var add = length > 0 ? btThreeList[length - 1].orders > 6 ? btThreeList[length - 1].orders : 6 : 6;

			var newItem = {
				"buildTeamThree": taskDetail.id,
				"orders": add + 1,
				"item": row.item,
				"level": row.level
			};
			if (typeof row.id !== "undefined") {
				newItem['id'] = row.id;
				newItem['orders'] = row.orders;
			}
			_this.saveBuildTeamThreeItem({ "btti": newItem });
			// console.log('newItem',row)
		};

		_this.getPolicyDecisonLevelByLevel = function () {
			[1, 2, 3, 4].forEach(function (level) {
				_this.getPolicyDecision(level);
			});
		};

		_this.getPolicyDecision = function (level) {
			var pDataList = _this.state.pDataList;
			var _this$store = _this.store,
			    taskDetail = _this$store.taskDetail,
			    buildTeamTwoMainObj = _this$store.buildTeamTwoMainObj;

			_this.store.getPolicyDecisionList({ "taskId": taskDetail.id, "level": level }).then(function (res) {
				var newPDataList = pDataList.map(function (item, index) {
					if (index + 1 === level) {
						return Object.assign(item, { "masters": res });
					} else {
						return item;
					}
				});
				_this.setState({ pDataList: newPDataList });
			});
		};

		_this.savePolicyDecisionByLevel = function (row) {
			var taskDetail = _this.store.taskDetail;

			console.log("row=>", row);
			var masters = row.masters;

			var userInfos = masters.map(function (item, index) {
				return Object.assign({ "id": item.userId, "userName": item.userName });
			});
			_this.store.savePolicyDecisionByLevel({ "userInfos": userInfos, "taskId": taskDetail.id, "level": row.keyIndex }).then(function (res) {
				_this.getPolicyDecisonLevelByLevel();
			});
		};

		_this.getBuildTeamThreeItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamThreeItemList({ "taskId": taskDetail.id }).then(function (res) {
				_this.setState({ btThreeList: res });
			});
		};

		_this.saveBuildTeamThreeItem = function (parmas) {
			_this.store.saveBuildTeamThreeItem(parmas).then(function (res) {
				_this.getBuildTeamThreeItemList();
			});
		};

		_this.doneAndNext = function () {
			var currentStep = _this.props.currentStep;

			var plOne = _this.checkPolicyByLevelOne();
			if (!plOne.result) {
				_antd.message.warn(plOne.info);
				return;
			}
			var mList = _this.checkMatter();
			if (!mList.result) {
				_antd.message.warn(mList.info);
				return;
			}
			var cpb = _this.checkSyncPolicyByLevel();
			if (!cpb.result) {
				_antd.message.warn(cpb.info);
				return;
			}
			_this.props.overCurrentStageTask();
			_this.props.switchSteps(currentStep + 1);
		};

		_this.overCurrentStage = function () {
			var _this$state = _this.state,
			    pDataList = _this$state.pDataList,
			    formRequire = _this$state.formRequire;

			var plOne = _this.checkPolicyByLevelOne();
			if (!plOne.result) {
				_antd.message.warn(plOne.info);
				return;
			}
			var mList = _this.checkMatter();
			if (!mList.result) {
				_antd.message.warn(mList.info);
				return;
			}
			var cpb = _this.checkSyncPolicyByLevel();
			if (!cpb.result) {
				_antd.message.warn(cpb.info);
				return;
			}
			_this.props.overCurrentStageTask();
			_this.getPolicyDecisonLevelByLevel();
			_this.getBuildTeamThreeItemList();
		};

		_this.checkPolicyByLevelOne = function () {
			var pDataList = _this.state.pDataList;

			var resultObj = { "info": "至少选择一位一级决策人员", result: false };
			pDataList.map(function (item, index) {
				if (index === 0) {
					if (item.masters.length === 0) {
						resultObj.result = false;
					} else {
						resultObj.result = true;
					}
				}
			});
			return resultObj;
		};

		_this.checkSyncPolicyByLevel = function () {
			var _this$state2 = _this.state,
			    pDataList = _this$state2.pDataList,
			    btThreeList = _this$state2.btThreeList;

			var resultObj = { "info": "请更新最新决策等级选项", result: true };
			var usefulPList = pDataList.filter(function (item) {
				return item.masters.length > 0;
			});
			btThreeList.forEach(function (item) {
				var upl = usefulPList.filter(function (upItem) {
					return upItem.keyIndex === item.level;
				});
				if (upl.length === 0) resultObj.result = false;
			});
			return resultObj;
		};

		_this.checkMatter = function () {
			var resultObj = { "info": "决策等级,决策事项不能为空", result: false };
			var btThreeList = _this.state.btThreeList;

			var result = btThreeList.filter(function (item, index) {
				return item.level === 0 || item.item === "";
			});
			if (result.length === 0) resultObj.result = true;
			return resultObj;
		};

		_this.checkForm = function (info) {
			_this.setState(info);
		};

		_this.store = _this.props.store;
		_this.state = {
			visible: false,
			stateValue: 0,
			id: "",
			pDataList: [{
				keyIndex: 1,
				level: '一级决策',
				masters: []
			}, {
				keyIndex: 2,
				level: '二级决策',
				masters: []
			}, {
				keyIndex: 3,
				level: '三级决策',
				masters: []
			}, {
				keyIndex: 4,
				level: '四级决策',
				masters: []
			}],
			btThreeList: [],
			formRequire: { "result": false, "info": "决策等级不能为空" }

		};
		return _this;
	}

	_createClass(ThreeItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getPolicyDecisonLevelByLevel();
			this.getBuildTeamThreeItemList();
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var buildTeamState = this.store.buildTeamState;
			var _state = this.state,
			    pDataList = _state.pDataList,
			    btThreeList = _state.btThreeList;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;


			return _react2.default.createElement(
				'div',
				{ style: { height: 'auto' } },
				_react2.default.createElement(
					'div',
					{ className: 'mb10' },
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.props.reStartBuildTeam,
							style: buildTeamState.state3 === 2 ? { display: '', cursor: 'pointer' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					)
				),
				_react2.default.createElement(
					_antd.Row,
					{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15], className: 'task_detail_zone',
						style: {
							//overflowY:'scroll',
							//minHeight:'600px',
							//height:'calc(100vh - 100px)'
						}
					},
					_react2.default.createElement(
						_antd.Col,
						{ style: { overflowY: 'auto', overflowX: 'auto' }, span: 9 },
						_react2.default.createElement(_EditableTableThreeItemPolicy2.default, {
							id: 'id',
							store: this.store,
							dataSource: buildTeamState.state3 === 2 ? pDataList.filter(function (item) {
								return item.masters.length > 0;
							}) : pDataList,
							saveData: this.savePolicy,
							saveData2: this.savePolicyDecisionByLevel,
							disabled: buildTeamState.state3 === 2 ? true : false,
							pid: ''
						})
					),
					_react2.default.createElement(
						_antd.Col,
						{ style: { borderLeft: '1px solid #f2f2f2' }, span: 15 },
						_react2.default.createElement(_EditableTableThreeItemMatter2.default, {
							id: 'id',
							onRef: function onRef(node) {
								return _this2.EditableTableThreeItemMatter = node;
							},
							store: this.store,
							dataSource: btThreeList.map(function (item, index) {
								return Object.assign(item, { "keyIndex": index + 1 });
							}),
							saveData: this.saveContents,
							saveItem: this.saveDecisionItem,
							disabled: buildTeamState.state3 === 2 ? true : false,
							checkForm: this.checkForm,
							pDataList: pDataList.filter(function (item) {
								return item.masters.length > 0;
							}),
							pid: ''
						})
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state3 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStage,
							ghost: true,
							type: 'primary' },
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					),
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
						' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state3 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep + 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0B\u4E00\u6B65'
					)
				)
			);
		}
	}]);

	return ThreeItem;
}(_react2.default.Component)) || _class) || _class;

exports.default = ThreeItem;

/***/ }),

/***/ 1974:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            *项目管理
            *qiufh@bocspace.cn
            */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _uuid = __webpack_require__(79);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _MyUpload = __webpack_require__(1782);

var _MyUpload2 = _interopRequireDefault(_MyUpload);

var _download = __webpack_require__(68);

var _EditableTableTwoItem = __webpack_require__(1877);

var _EditableTableTwoItem2 = _interopRequireDefault(_EditableTableTwoItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InputGroup = _antd.Input.Group;
var Option = _antd.Select.Option;
var RangePicker = _antd.DatePicker.RangePicker;
var Search = _antd.Input.Search;


var dateFormat = 'YYYY-MM-DD';

var progressValue = function progressValue(day1, day2, day3) {

	return ['1\u3001\u8FDB\u573A\u65F6\u95F4\uFF1A\u56FE\u7EB8\u786E\u8BA4\u540E' + day1 + '\u5929\u5185\u6750\u6599\u5F00\u59CB\u8FDB\u573A\uFF08\u5907\u6CE8\uFF1A\u9700\u8981\u7532\u65B9\u5177\u5907\u8FDB\u573A\u6761\u4EF6\uFF09', '2\u3001\u5B9A\u5236\u7BB1\u5DE5\u5382\u751F\u4EA7\u65F6\u95F4\uFF1A\u56FE\u7EB8\u7B7E\u5B57\u540E\uFF0C' + day2 + '\u5929\u5168\u90E8\u6750\u6599\u8FDB\u573A\u5B8C\u6BD5', '3\u3001\u73B0\u573A\u5B89\u88C5\u65F6\u95F4\uFF1A\u56FE\u7EB8\u7B7E\u5B57\u540E\uFF0C' + day3 + '\u5929\u5168\u90E8\u5B89\u88C5\u5B8C\u6BD5'];
};

var progressValueV4 = function progressValueV4(day1, day2, day3) {

	if (day2 === null || day2 === "T+0") {
		return ['1\u3001\u8FDB\u573A\u65F6\u95F4\uFF1A' + day1, '2\u3001\u88C5\u914D\u5B8C\u6210\u65F6\u95F4\uFF1A' + day3];
	} else {
		return ['1\u3001\u8FDB\u573A\u65F6\u95F4\uFF1A' + day1, '2\u3001\u975E\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A' + day2, '3\u3001\u88C5\u914D\u5B8C\u6210\u65F6\u95F4\uFF1A' + day3];
	}
};

var qualityValue = function qualityValue(label, count) {
	return [label + '\uFF1A\u2264 ' + count + '\u6B21 ' + (label === '验收次数' ? '客户确认签字' : '')];
};

var profitValue = function profitValue(label, number) {
	return [label + '\uFF1A     ' + (number === null ? 0 : number) + '%'];
};

var costValue = function costValue(label, number) {
	return [label + '\uFF1A\u2265 ' + number + '\u5929 \u7ED9\u4F9B\u5E94\u5546\u4ED8\u6B3E'];
};

var safetyValue = function safetyValue(number1, number2) {
	return ['\u5B89\u5168\u4E8B\u6545\uFF1A\u2264 ' + number1 + '\u6B21 \u6B7B\u4EA1\u3001\u91CD\u4F24\u3001\u8F7B\u4F24', '\u5B89\u5168\u9690\u60A3\uFF1A\u2264 ' + number2 + '\u6B21 \u91CD\u5927\u4E8B\u6545\u9690\u60A3'];
};

var marketingValue = function marketingValue(flag1, flag2) {
	if (flag1 === 1 && flag2 === 1) {
		return ['1\u3001\u6253\u9020\u6210\u4E3A\u6807\u6746\u9879\u76EE\uFF0C\u5F62\u6210\u8425\u9500\u6848\u4F8B', '2\u3001\u987E\u5BA2\u6EE1\u610F\uFF0C\u80FD\u591F\u7ED9\u6211\u4EEC\u53D1\u8868\u626C\u4FE1'];
	}
	if (flag1 === 1 && flag2 === 0) {
		return ['\u987E\u5BA2\u6EE1\u610F\uFF0C\u80FD\u591F\u7ED9\u6211\u4EEC\u53D1\u8868\u626C\u4FE1'];
	}
	if (flag1 === 0 && flag2 === 1) {
		return ['\u6253\u9020\u6210\u4E3A\u6807\u6746\u9879\u76EE\uFF0C\u5F62\u6210\u8425\u9500\u6848\u4F8B'];
	}
	if (flag1 === 0 && flag2 === 0) {
		return [];
	}
};

var TwoItem = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(TwoItem, _React$Component);

	function TwoItem(props) {
		_classCallCheck(this, TwoItem);

		var _this = _possibleConstructorReturn(this, (TwoItem.__proto__ || Object.getPrototypeOf(TwoItem)).call(this, props));

		_this.getCostValue = function () {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var _mobx$toJS = mobx.toJS(buildTeamTwoMainObj),
			    costTargetOne = _mobx$toJS.costTargetOne,
			    costTargetTwo = _mobx$toJS.costTargetTwo,
			    costTargetThree = _mobx$toJS.costTargetThree,
			    costTargetFour = _mobx$toJS.costTargetFour,
			    costTargetThree2 = _mobx$toJS.costTargetThree2,
			    costTargetFour2 = _mobx$toJS.costTargetFour2;

			var dataInfo = [{ "show": costTargetOne, "info": "分包费用: 参照合同" }, { "show": costTargetTwo, "info": "安全文明施工: 合同额≤200万，费用≤2000元; 合同额＞200万，费用≤3000元" }, { "show": costTargetThree, "info": "招待费: ≤合同额*2‰ 且 ≤2000元" }, { "show": costTargetThree2, "info": "招待费（展厅适用）: ≤合同额的2‰ 且 ≤1500元" }, { "show": costTargetFour, "info": "风险附加: ≤合同额*5‰ 且 ≤10000元" }, { "show": costTargetFour2, "info": "风险附加（展厅适用）:≤合同额的5‰ 且 ≤5000元" }];
			var result = dataInfo.filter(function (item) {
				return item.show === 1;
			});
			result = result.map(function (item) {
				return item.info;
			});
			return result;
		};

		_this.getBuildTeamTwoMain = function () {
			var _this$store = _this.store,
			    taskDetail = _this$store.taskDetail,
			    buildTeamTwoMainObj = _this$store.buildTeamTwoMainObj,
			    buildTeamState = _this$store.buildTeamState;

			_this.store.getBuildTeamTwoMain({ "taskId": taskDetail.id }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
				var targetDay1 = res.progressTargetTimeSure === 1 ? (0, _moment2.default)(res.progressTargetBaseTime).format(dateFormat) : "T";
				var targetDay2 = targetDay1 === "T" ? "T+" + res.progressTargetNostandardDay + "日历天" : (0, _moment2.default)(targetDay1).add(res.progressTargetNostandardDay, "days").format(dateFormat);
				var targetDay3 = targetDay1 === "T" ? "T+" + res.progressTargetOverDay + "日历天" : (0, _moment2.default)(targetDay1).add(res.progressTargetOverDay, "days").format(dateFormat);

				var promiseDay1 = res.progressPromiseTimeSure === 1 ? (0, _moment2.default)(res.progressPromiseBaseTime).format(dateFormat) : "T";
				var promiseDay2 = promiseDay1 === "T" ? "T+" + res.progressPromiseNostandardDay + "日历天" : (0, _moment2.default)(promiseDay1).add(res.progressPromiseNostandardDay, "days").format(dateFormat);
				var promiseDay3 = promiseDay1 === "T" ? "T+" + res.progressPromiseOverDay + "日历天" : (0, _moment2.default)(promiseDay1).add(res.progressPromiseOverDay, "days").format(dateFormat);

				var profitTargetValue = res.profitTarget === 0 ? "不亏损" : profitValue("盈利", res.profitTargetRate);

				var dl = [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(targetDay1, targetDay2, targetDay3), "promiseValue": progressValueV4(promiseDay1, promiseDay2, promiseDay3) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", res.qualityTargetCheckCount), "promiseValue": qualityValue("质量事故", res.qualityPromiseAccidentCount) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitTargetValue, "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "成本", "targetValue": _this.getCostValue() }, { "keyIndex": 5, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "营销", "targetValue": marketingValue(res.markingTargetSatisfied, res.markingTargetStandard), "promiseValue": "" }, { "keyIndex": 6, "id": "!" + (0, _uuid.v4)(), "orders": 6, "item": "安全", "targetValue": safetyValue(res.safeTargetAccidentCount, res.safeTargetTreacherousCount), "promiseValue": safetyValue(res.safePromiseAccidentCount, res.safePromiseTreacherousCount) }];

				if (buildTeamState.state2 === 2) {
					if (res.costTargetFour2 === 0 && res.costTargetThree2 === 0 && res.costTargetOne === 0 && res.costTargetTwo === 0 && res.costTargetThree === 0 && res.costTargetFour === 0 && res.markingTargetSatisfied === 0 && res.markingTargetStandard === 0) {
						dl = [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(targetDay1, targetDay2, targetDay3), "promiseValue": progressValueV4(promiseDay1, promiseDay2, promiseDay3) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", res.qualityTargetCheckCount), "promiseValue": qualityValue("质量事故", res.qualityPromiseAccidentCount) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitTargetValue, "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "安全", "targetValue": safetyValue(res.safeTargetAccidentCount, res.safeTargetTreacherousCount), "promiseValue": safetyValue(res.safePromiseAccidentCount, res.safePromiseTreacherousCount) }];
					} else if (res.costTargetOne === 0 && res.costTargetTwo === 0 && res.costTargetFour2 === 0 && res.costTargetThree === 0 && res.costTargetThree2 === 0 && res.costTargetFour === 0) {
						dl = [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(targetDay1, targetDay2, targetDay3), "promiseValue": progressValueV4(promiseDay1, promiseDay2, promiseDay3) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", res.qualityTargetCheckCount), "promiseValue": qualityValue("质量事故", res.qualityPromiseAccidentCount) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitTargetValue, "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "营销", "targetValue": marketingValue(res.markingTargetSatisfied, res.markingTargetStandard), "promiseValue": "" }, { "keyIndex": 5, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "安全", "targetValue": safetyValue(res.safeTargetAccidentCount, res.safeTargetTreacherousCount), "promiseValue": safetyValue(res.safePromiseAccidentCount, res.safePromiseTreacherousCount) }];
					} else if (res.markingTargetSatisfied === 0 && res.markingTargetStandard === 0) {
						dl = [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(targetDay1, targetDay2, targetDay3), "promiseValue": progressValueV4(promiseDay1, promiseDay2, promiseDay3) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", res.qualityTargetCheckCount), "promiseValue": qualityValue("质量事故", res.qualityPromiseAccidentCount) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitTargetValue, "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "成本", "targetValue": _this.getCostValue() }, { "keyIndex": 5, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "安全", "targetValue": safetyValue(res.safeTargetAccidentCount, res.safeTargetTreacherousCount), "promiseValue": safetyValue(res.safePromiseAccidentCount, res.safePromiseTreacherousCount) }];
					} else {
						dl = [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(targetDay1, targetDay2, targetDay3), "promiseValue": progressValueV4(promiseDay1, promiseDay2, promiseDay3) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", res.qualityTargetCheckCount), "promiseValue": qualityValue("质量事故", res.qualityPromiseAccidentCount) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitTargetValue, "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "成本", "targetValue": _this.getCostValue() }, { "keyIndex": 5, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "营销", "targetValue": marketingValue(res.markingTargetSatisfied, res.markingTargetStandard), "promiseValue": "" }, { "keyIndex": 6, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "安全", "targetValue": safetyValue(res.safeTargetAccidentCount, res.safeTargetTreacherousCount), "promiseValue": safetyValue(res.safePromiseAccidentCount, res.safePromiseTreacherousCount) }];
					}
				}

				_this.setState({ dataList: dl, buildTeamTwoMainObj: res });
			});
		};

		_this.getBuildTeamTwoItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamTwoItemList({ "taskId": taskDetail.id }).then(function (res) {
				_this.setState({ bttiList: res });
			});
		};

		_this.saveBuildTeamTwoItem = function (params) {
			_this.store.saveBuildTeamTwoItem(params).then(function (res) {
				_this.getBuildTeamTwoItemList();
			});
		};

		_this.saveContents = function (dataSource) {
			console.log("dataSource=>", dataSource);
			_this.setState({ bttiList: dataSource });
		};

		_this.saveItem = function (row) {
			var taskDetail = _this.store.taskDetail;
			var _this$state = _this.state,
			    dataList = _this$state.dataList,
			    bttiList = _this$state.bttiList;

			var newItem = {
				"buildTeamTwo": taskDetail.id,
				"orders": dataList.length + bttiList.length + 1,
				"targetValue": row.targetValue,
				"promiseValue": row.promiseValue,
				"item": row.item
			};
			if (row.id !== null || row.id !== undefined) {
				newItem['id'] = row.id;
				newItem['orders'] = row.orders;
			}
			_this.saveBuildTeamTwoItem({ "btti": newItem });
		};

		_this.convertToTableData = function () {
			var _this$state2 = _this.state,
			    dataList = _this$state2.dataList,
			    bttiList = _this$state2.bttiList;

			return dataList.map(function (item, index) {
				return Object.assign(item, { "dataType": "main" });
			}).concat(bttiList.map(function (item, index) {
				return Object.assign(item, { "dataType": "item", "keyIndex": dataList.length + 1 + index });
			}));
		};

		_this.overCurrentStage = function () {
			var cpt = _this.checkProfitTarget();
			if (!cpt.result) {
				_antd.message.warn(cpt.info);
				return;
			}

			// 校验必填字段
			var buildTeamTwoMainObj = mobx.toJS(_this.store.buildTeamTwoMainObj);
			if (buildTeamTwoMainObj.progressTargetTimeSure === 1 && (buildTeamTwoMainObj.progressTargetBaseTime == null || buildTeamTwoMainObj.progressTargetBaseTime == 0)) {
				_antd.message.warn("内控目标值，进场时间是必填项");
				return false;
			}
			if (buildTeamTwoMainObj.progressPromiseTimeSure === 1 && (buildTeamTwoMainObj.progressPromiseBaseTime == null || buildTeamTwoMainObj.progressPromiseBaseTime == 0)) {
				_antd.message.warn("对外承诺目标值，进场时间是必填项");
				return false;
			}

			_this.props.overCurrentStageTask();
			setTimeout(function () {
				_this.getBuildTeamTwoMain();
				_this.getBuildTeamTwoItemList();
			}, 500);
		};

		_this.doneAndNext = function () {
			var currentStep = _this.props.currentStep;

			var cpt = _this.checkProfitTarget();
			if (!cpt.result) {
				_antd.message.warn(cpt.info);
				return;
			}

			// 校验必填字段
			var buildTeamTwoMainObj = mobx.toJS(_this.store.buildTeamTwoMainObj);
			if (buildTeamTwoMainObj.progressTargetTimeSure === 1 && (buildTeamTwoMainObj.progressTargetBaseTime == null || buildTeamTwoMainObj.progressTargetBaseTime == 0)) {
				_antd.message.warn("内控目标值，进场时间是必填项");
				return false;
			}
			if (buildTeamTwoMainObj.progressPromiseTimeSure === 1 && (buildTeamTwoMainObj.progressPromiseTimeSure == null || buildTeamTwoMainObj.progressPromiseTimeSure == 0)) {
				_antd.message.warn("对外承诺目标值，进场时间是必填项");
				return false;
			}

			_this.props.overCurrentStageTask();
			_this.props.switchSteps(currentStep + 1);
		};

		_this.reStartBuildTeam = function () {
			_this.props.reStartBuildTeam();
			setTimeout(function () {
				_this.getBuildTeamTwoMain();
			}, 500);
		};

		_this.checkProfitTarget = function () {
			var resultObj = { "info": "盈利值不能为空", result: false };
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			if (buildTeamTwoMainObj.profitTarget === 1 && buildTeamTwoMainObj.profitTargetRate !== null && buildTeamTwoMainObj.profitTargetRate > 0) {
				resultObj.result = true;
			}
			if (buildTeamTwoMainObj.profitTarget === 0) {
				resultObj.result = true;
			}
			return resultObj;
		};

		_this.store = _this.props.store;
		_this.state = {
			dataList: [],
			bttiList: [],
			visible: false,
			stateValue: 0,
			id: "",
			buildTeamTwoMainObj: null

		};
		return _this;
	}

	_createClass(TwoItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getBuildTeamTwoMain();
			this.getBuildTeamTwoItemList();
		}
	}, {
		key: 'render',
		value: function render() {
			var buildTeamState = this.store.buildTeamState;
			var _state = this.state,
			    dataList = _state.dataList,
			    bttiList = _state.bttiList;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;

			return _react2.default.createElement(
				'div',
				{ className: 'mt30' },
				_react2.default.createElement(
					'div',
					{ className: 'mb10' },
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.reStartBuildTeam,
							style: buildTeamState.state2 === 2 ? { display: '', cursor: 'pointer' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					)
				),
				_react2.default.createElement(_EditableTableTwoItem2.default, {
					id: 'id',
					store: this.store,
					dataSource: this.convertToTableData(),
					saveData: this.saveContents,
					saveItem: this.saveItem,
					disabled: buildTeamState.state2 === 2 ? true : false,
					pid: ''
				}),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state2 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							onClick: this.overCurrentStage },
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					),
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
						' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: buildTeamState.state2 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep + 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0B\u4E00\u6B65'
					)
				)
			);
		}
	}]);

	return TwoItem;
}(_react2.default.Component)) || _class) || _class;

exports.default = TwoItem;

/***/ }),

/***/ 1977:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员  带排序
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd = (_dec = (0, _mobxReact.inject)('UserStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd, _React$Component);

	function PersonAdd(props) {
		_classCallCheck(this, PersonAdd);

		var _this = _possibleConstructorReturn(this, (PersonAdd.__proto__ || Object.getPrototypeOf(PersonAdd)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			}, function () {

				// 右侧
				var olds = JSON.parse(JSON.stringify(_this.state.oldSelect));
				var newArray = [];
				olds.forEach(function (vitem) {
					var filterArray = arr.filter(function (v) {
						return v.id === vitem.userId;
					});
					if (filterArray.length > 0) {
						newArray.push.apply(newArray, _toConsumableArray(filterArray));
					}
				});
				_this.setState({
					rightSelect: Object.assign([], newArray)
				});
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.rightSelect));
			var users = dataArray.map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: ""
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});

			// oldSelect
			var oldS = JSON.parse(JSON.stringify(_this.state.rightSelect));
			if (!oldS.filter(function (item) {
				return item.id == param.id;
			}).length > 0) {
				// 之前已选中
				_this.setState({
					rightSelect: [].concat(_toConsumableArray(_this.state.rightSelect), [param])
				});
			}
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});

			// 右侧删除
			var rightS = JSON.parse(JSON.stringify(_this.state.rightSelect));
			var olindex = rightS.findIndex(function (item) {
				return item.id == param.id;
			});
			rightS.splice(olindex, 1);
			_this.setState({
				rightSelect: rightS
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				}, function () {
					_this.init();
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: [], // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [], // 筛选数据
			rightSelect: [] // 右侧选择
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			var _this2 = this;

			this.setState({
				oldSelect: nextProps.data
			}, function () {
				_this2.init();
			});
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var params = "";
			// 未选的全部用户
			this.props.UserStore.getRole(params).then(function (res) {
				_this3.setState({
					defaultData: res.body.map(function (item) {
						return Object.assign(item, { selected: false });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text,
			    rightSelect = _state2.rightSelect;
			var _props = this.props,
			    disabled = _props.disabled,
			    title = _props.title;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline' } },
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement('img', { onClick: this.handleAdd, style: { verticalAlign: 'middle', marginRight: '10px', cursor: 'pointer' }, width: 30, height: 30, src: './images/delivery/user2.png' }),
					oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					})
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: title || "添加负责人",
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								rightSelect && rightSelect.length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								rightSelect.length > 0 && rightSelect.map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd;

/***/ }),

/***/ 1979:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 确认进场条件
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _OneItem = __webpack_require__(1980);

var _OneItem2 = _interopRequireDefault(_OneItem);

var _TwoItem = __webpack_require__(1982);

var _TwoItem2 = _interopRequireDefault(_TwoItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ConfirmEnter = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ConfirmEnter, _React$Component);

	function ConfirmEnter(props) {
		_classCallCheck(this, ConfirmEnter);

		var _this = _possibleConstructorReturn(this, (ConfirmEnter.__proto__ || Object.getPrototypeOf(ConfirmEnter)).call(this, props));

		_this.getConfirmSupplierState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getTaskStepState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this.store.confirmEnterState = res;
				}
			});
		};

		_this.getBuildTeamStateInfo = function (state) {
			if (state === 0) {
				return "待启动";
			}
			if (state === 1) {
				return "进行中";
			}
			if (state === 2) {
				return "已完成";
			}
		};

		_this.getBuildTeamStateIcon = function (state) {
			if (state === 0) {
				return "./images/delivery/u1055.png";
			}
			if (state === 1) {
				return "./images/delivery/u1053.png";
			}
			if (state === 2) {
				return "./images/delivery/u1232.png";
			}
		};

		_this.overCurrentStageTask = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.overTaskStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.confirmEnterState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.reStartHandover = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartTaskStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.confirmEnterState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.getProjectDetail = function () {
			var projectId = _this.store.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.switchSteps = function (step) {
			_this.setState({ currentStep: step });
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null,
			currentStep: 1
		};
		return _this;
	}

	_createClass(ConfirmEnter, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.getConfirmSupplierState();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var projectDetail = this.store.projectDetail;

			this.setState({ projectId: mobx.toJS(projectDetail).id });
			this.getConfirmSupplierState();
			this.store.getSts();
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var currentStep = this.state.currentStep;
			var confirmEnterState = this.store.confirmEnterState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal pb50' },
				_react2.default.createElement(
					'div',
					{ className: 'mt20 f14', style: { borderBottom: "1px dashed #e6e6e6", paddingBottom: "30px" } },
					_react2.default.createElement(
						'div',
						{ style: { display: "flex", justifyContent: 'center', alignItems: 'center' } },
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(confirmEnterState).state1), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(confirmEnterState).state1)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(1);
										}, type: currentStep === 1 ? 'primary' : 'link', className: currentStep === 1 ? 'active-button' : 'no-active-button' },
									'\u51C6\u5907\u8FDB\u573A'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 1 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(confirmEnterState).state2), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(confirmEnterState).state2)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(2);
										}, type: currentStep === 2 ? 'primary' : 'link', className: currentStep === 2 ? 'active-button' : 'no-active-button' },
									'\u786E\u8BA4\u8FDB\u573A\u6761\u4EF6'
								),
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					currentStep === 1 ? _react2.default.createElement(_OneItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 2 ? _react2.default.createElement(_TwoItem2.default, {
						getConfirmSupplierState: this.getConfirmSupplierState,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : null
				)
			);
		}
	}]);

	return ConfirmEnter;
}(_react2.default.Component)) || _class) || _class);
exports.default = ConfirmEnter;

/***/ }),

/***/ 1980:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *第一步
                         *dangw@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

var _Document = __webpack_require__(1618);

var _Document2 = _interopRequireDefault(_Document);

var _PersonAdd = __webpack_require__(1981);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var OneItem = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = _dec2(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(OneItem, _React$Component);

    function OneItem(props) {
        _classCallCheck(this, OneItem);

        var _this2 = _possibleConstructorReturn(this, (OneItem.__proto__ || Object.getPrototypeOf(OneItem)).call(this, props));

        _this2.getConstructionScheduleList = function () {
            var taskDetail = _this2.store.taskDetail;

            _this2.store.getConfirmEnterOneMain({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
                _this2.setState({
                    fields: res,
                    dataSource2: res.entryConditionsJson == null || res.entryConditionsJson == "" ? [{ first: "", last: "" }] : JSON.parse(res.entryConditionsJson)
                });
            });
        };

        _this2.handleDate = function (type, date, dateString) {
            var value = dateString == null || dateString == "" ? 0 : (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
            var data = JSON.parse(JSON.stringify(_this2.state.fields));
            data[type] = value;
            data.entryConditionsJson = _this2.state.dataSource2 == null ? "" : JSON.stringify(_this2.state.dataSource2);
            _this2.store.saveConfirmEnterOneMain({ mian: data }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this2.setState({
                        fields: Object.assign({}, res)
                    });
                }
            });
        };

        _this2.doneAndNext = function () {
            // 校验
            var _this = _this2;
            var currentStep = _this.props.currentStep;

            _this.checkFunction(function () {
                // 是否重新生成策划书
                var fields = JSON.parse(JSON.stringify(_this.state.fields));
                var isDocument = fields.document == null; // 是否有采购合同
                if (isDocument) {
                    _this.buildWord(function () {
                        _this.props.overCurrentStageTask();
                        _this.props.switchSteps(currentStep + 1);
                    });
                } else {
                    _this.props.overCurrentStageTask();
                    _this.props.switchSteps(currentStep + 1);
                }
            });
        };

        _this2.onSave = function () {
            var fields = JSON.parse(JSON.stringify(_this2.state.fields));
            fields.entryConditionsJson = _this2.state.dataSource2 == null ? "" : JSON.stringify(_this2.state.dataSource2);
            _this2.store.saveConfirmEnterOneMain({ mian: fields }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this2.setState({
                        fields: Object.assign({}, res)
                    });
                }
            });
        };

        _this2.handleChange = function (type, e) {
            var data = JSON.parse(JSON.stringify(_this2.state.fields));
            data[type] = e;
            if (type == "basicStructureForm") data["basicStrengthRequirement"] = "";
            if (type == "powerProvider" && e == "甲方") {
                data["powerStandard"] = "220V";
            }
            if (type == "powerProvider" && e != "甲方") {
                data["powerStandard"] = "20KW";
            }
            _this2.setState({
                fields: Object.assign({}, data)
            }, function () {
                _this2.onSave();
            });
        };

        _this2.handleChange2 = function (type, e) {
            var data = JSON.parse(JSON.stringify(_this2.state.fields));
            data[type] = e.target.value;
            _this2.setState({
                fields: Object.assign({}, data)
            });
        };

        _this2.handleBChange2 = function (type, bfData) {
            var value = _braftEditor2.default.createEditorState(bfData).toHTML();
            var fields = JSON.parse(JSON.stringify(_this2.state.fields));
            fields[type] = value;
            _this2.setState({
                fields: Object.assign({}, fields)
            }, function () {
                _this2.onSave();
            });
        };

        _this2.buildWord = function (callback) {
            var fields = JSON.parse(JSON.stringify(_this2.state.fields));
            fields.entryConditionsJson = _this2.state.dataSource2 == null ? "" : JSON.stringify(_this2.state.dataSource2);
            _this2.store.buildConfirmEnterDoc({ main: fields }).then(function (res) {
                _this2.setState({
                    downloading: true
                });
                _this2.getReportUrl({ "id": res }, callback);
            });
        };

        _this2.getReportUrl = function (id, callback) {
            var _this = _this2;
            _this.timer22 = setInterval(function () {
                _this.store.getConfirmEnterDownloadUrl(id).then(function (url) {
                    if (url !== null && url !== "") {
                        _this.setState({ downloading: false });
                        // 重新保存任务
                        _this.getConstructionScheduleList();
                        if (typeof callback == "function") {
                            callback();
                        }
                        clearInterval(_this.timer22);
                    } else {}
                });
            }, 3000);
        };

        _this2.updatePerson = function (type, users) {
            var data = JSON.parse(JSON.stringify(_this2.state.fields));
            data[type] = users;
            _this2.setState({
                fields: Object.assign({}, data)
            }, function () {
                _this2.onSave();
            });
        };

        _this2.overCurrentStage = function () {
            // 校验
            var _this = _this2;
            _this2.checkFunction(function () {
                // 是否重新生成策划书
                var fields = JSON.parse(JSON.stringify(_this.state.fields));
                var isDocument = fields.document == null; // 是否有采购合同
                if (isDocument) {
                    _this.buildWord(function () {
                        _this.props.overCurrentStageTask();
                    });
                } else {
                    _this.props.overCurrentStageTask();
                }
            });
        };

        _this2.checkFunction = function (callback) {
            var fields = _this2.state.fields;
            var basicProvider = fields.basicProvider,
                waterProvider = fields.waterProvider,
                powerProvider = fields.powerProvider,
                roadProvider = fields.roadProvider,
                materialFieldProvider = fields.materialFieldProvider,
                craneSitesProvider = fields.craneSitesProvider,
                basicStructureForm = fields.basicStructureForm,
                basicStrengthRequirement = fields.basicStrengthRequirement,
                basicLongitudinal = fields.basicLongitudinal,
                basicElevation = fields.basicElevation,
                basicSize = fields.basicSize,
                waterStandard = fields.waterStandard,
                powerStandard = fields.powerStandard,
                roadStandard = fields.roadStandard,
                materialFieldStandard = fields.materialFieldStandard,
                craneSitesStandard = fields.craneSitesStandard,
                explorativeTime = fields.explorativeTime,
                explorativePeople = fields.explorativePeople,
                explorativeAddress = fields.explorativeAddress;

            if (basicProvider == null || basicProvider == "" || waterProvider == null || waterProvider == "" || powerProvider == null || powerProvider == "" || roadProvider == null || roadProvider == "" || materialFieldProvider == null || materialFieldProvider == "" || craneSitesProvider == null || craneSitesProvider == "" || basicStructureForm == null || basicStructureForm == "" || basicStrengthRequirement == null || basicStrengthRequirement == "" || basicLongitudinal == null || basicLongitudinal == "" || basicElevation == null || basicElevation == "" || basicSize == null || basicSize == "" || waterStandard == null || waterStandard == "" || powerStandard == null || powerStandard == "" || roadStandard == null || roadStandard == "" || materialFieldStandard == null || materialFieldStandard == "" || craneSitesStandard == null || craneSitesStandard == "") {
                _antd.message.warn("请完善进场条件必填信息");
                return false;
            }
            if (explorativeTime == null || explorativeTime == 0) {
                _antd.message.warn("踏勘时间是必填项");
                return false;
            }
            if (explorativePeople == null || explorativePeople.length == 0) {
                _antd.message.warn("参加人是必填项");
                return false;
            }
            if (explorativeAddress == null || explorativeAddress == "") {
                _antd.message.warn("踏勘地点是必填项");
                return false;
            }
            return callback();
        };

        _this2.getEnclosureList = function () {
            var taskDetail = _this2.store.taskDetail;

            _this2.store.getOnlyShowEnclosureListByTaskIdAndIndex({ "taskId": mobx.toJS(taskDetail).id, "index": 0 }).then(function (res) {
                _this2.setState({ dataSource: res });
            });
        };

        _this2.add = function () {
            var dataSource2 = JSON.parse(JSON.stringify(_this2.state.dataSource2));
            _this2.setState({
                dataSource2: [].concat(_toConsumableArray(dataSource2), [{ first: "", last: "" }])
            });
        };

        _this2.remove = function (index) {
            var dataSource2 = JSON.parse(JSON.stringify(_this2.state.dataSource2));
            dataSource2.splice(index, 1);
            _this2.setState({
                dataSource2: [].concat(_toConsumableArray(dataSource2))
            });
        };

        _this2.handleChange3 = function (type, index, e) {
            var dataSource2 = JSON.parse(JSON.stringify(_this2.state.dataSource2));
            dataSource2[index][type] = e.target.value;
            _this2.setState({
                dataSource2: [].concat(_toConsumableArray(dataSource2))
            });
        };

        _this2.store = _this2.props.DeliveryStore;
        _this2.state = {
            projectId: null,
            fields: {},
            downloading: false,
            dataSource: [],
            dataSource2: [{ first: "", last: "" }]
        };
        return _this2;
    }

    _createClass(OneItem, [{
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps, nextContext) {
            var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
            if (projectDetail.id !== this.state.projectId) {
                this.setState({ projectId: projectDetail.id });
                this.getConstructionScheduleList();
                this.getEnclosureList();
            }
        }
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.getConstructionScheduleList();
            this.getEnclosureList();
        }

        // 完成并进入下一步


        // 间隔3秒获取pdf地址


        // 统一校验方法

    }, {
        key: 'render',
        value: function render() {
            var _this3 = this;

            var _props = this.props,
                currentStep = _props.currentStep,
                switchSteps = _props.switchSteps;
            var getFieldDecorator = this.props.form.getFieldDecorator;

            var formItemLayout = {
                labelCol: { span: 2 },
                wrapperCol: { span: 12 }
            };
            var formItemLayoutWithOutLabel = {
                wrapperCol: {
                    xs: { span: 2, offset: 2 },
                    sm: { span: 12, offset: 2 }
                }
            };
            var _state = this.state,
                fields = _state.fields,
                downloading = _state.downloading,
                dataSource = _state.dataSource,
                dataSource2 = _state.dataSource2;
            var confirmEnterState = this.store.confirmEnterState;

            var controls = ['bold', 'text-color'];
            var isDocument = fields.document == null || _typeof(fields.document) == "object" && Object.keys(fields.document).length == 0 ? false : true; // 是否有采购合同
            var dateFormat = 'YYYY-MM-DD';
            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    _antd.Spin,
                    { className: 'fixed-spin', spinning: downloading, tip: '\u6B63\u5728\u751F\u6210\u8FDB\u573A\u6761\u4EF6\u786E\u8BA4\u5355,\u8BF7\u7A0D\u7B49...' },
                    _react2.default.createElement(
                        'div',
                        { className: confirmEnterState.state1 === 2 ? "hidden" : "" },
                        _react2.default.createElement(
                            'div',
                            { className: 'daily_tips' },
                            _react2.default.createElement(
                                'p',
                                null,
                                _react2.default.createElement(
                                    'span',
                                    null,
                                    '\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u8BF7\u5728\u6B63\u5F0F\u8FDB\u573A\u524D\uFF0C\u786E\u8BA4\u57FA\u7840\u6761\u4EF6\u8981\u6C42\uFF0C\u5728\u6B63\u5F0F\u8FDB\u573A\u524D\u73B0\u573A\u786E\u8BA4\uFF0C\u4E89\u53D6\u7532\u65B9\u7684\u7B7E\u5B57\u9A8C\u6536\u54E6~'
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u8FDB\u573A\u6761\u4EF6'
                            ),
                            fields.optimalConfirmTime == null || fields.optimalConfirmTime == 0 ? "" : _react2.default.createElement(
                                'span',
                                { style: { fontWeight: 400, fontSize: "12px" } },
                                '\uFF08\u8BF7\u5728\u8BA1\u5212\u8FDB\u573A\u524D\u4E00\u5468\uFF0C\u5373',
                                (0, _moment2.default)(fields.optimalConfirmTime).format('YYYY年MM月DD日'),
                                ' \u4E4B\u524D\u786E\u8BA4\u4EE5\u4E0B\u4FE1\u606F\uFF0C\u63D0\u9192\u7532\u65B9\u51C6\u5907\u597D\u8FDB\u573A\u6761\u4EF6\uFF09'
                            )
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'makeplotTable' },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5E8F\u53F7'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u57FA\u7840\u6761\u4EF6\u9879\u76EE'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u63D0\u4F9B\u65B9'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u9879'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u9A8C\u6536\u6807\u51C6'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u671F\u671B\u5B8C\u6210\u65F6\u95F4'
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '1'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '\u57FA\u7840'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicProvider,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "basicProvider") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "甲方" },
                                            '\u7532\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "我方" },
                                            '\u6211\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "第三方" },
                                            '\u7B2C\u4E09\u65B9'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7ED3\u6784\u5F62\u5F0F'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicStructureForm,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "basicStructureForm") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "独立基础" },
                                            '\u72EC\u7ACB\u57FA\u7840'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "条形基础" },
                                            '\u6761\u5F62\u57FA\u7840'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "筏板基础" },
                                            '\u7B4F\u677F\u57FA\u7840'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "砖基础" },
                                            '\u7816\u57FA\u7840'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.basicPlanOverTime == null || fields.basicPlanOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.basicPlanOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "basicPlanOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8BBE\u8BA1\u5F3A\u5EA6\u8981\u6C42'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStructureForm == "砖基础" ? _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicStrengthRequirement,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "basicStrengthRequirement") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "MU15及以上" },
                                            'MU15\u53CA\u4EE5\u4E0A'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "MU20及以上" },
                                            'MU20\u53CA\u4EE5\u4E0A'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "MU25及以上" },
                                            'MU25\u53CA\u4EE5\u4E0A'
                                        )
                                    ) : _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicStrengthRequirement,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "basicStrengthRequirement") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "C20及以上" },
                                            'C20\u53CA\u4EE5\u4E0A'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "C25及以上" },
                                            'C25\u53CA\u4EE5\u4E0A'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "C30及以上" },
                                            'C30\u53CA\u4EE5\u4E0A'
                                        )
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5750\u6807\u7EB5\u3001\u6A2A\u8F74\u7EBF\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicLongitudinal,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "basicLongitudinal") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤&nbsp; ±5mm" },
                                            '\xA0 \u2264\xA0 \xB15mm'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤&nbsp; ±10mm" },
                                            '\xA0 \u2264\xA0 \xB110mm'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤ ±15mm" },
                                            '\xA0 \u2264 \xB115mm'
                                        )
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5E73\u9762\u6807\u9AD8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicElevation,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "basicElevation") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤&nbsp; ±5mm" },
                                            '\xA0 \u2264\xA0 \xB15mm'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤&nbsp; ±10mm" },
                                            '\xA0 \u2264\xA0 \xB110mm'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤ ±15mm" },
                                            '\xA0 \u2264 \xB115mm'
                                        )
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5916\u5F62\u5C3A\u5BF8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.basicSize,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "firstContractState") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤&nbsp; ±5mm" },
                                            '\xA0 \u2264\xA0 \xB15mm'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤&nbsp; ±10mm" },
                                            '\xA0 \u2264\xA0 \xB110mm'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "&nbsp; ≤ ±15mm" },
                                            '\xA0 \u2264 \xB115mm'
                                        )
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '2'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.waterProvider,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "waterProvider") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "甲方" },
                                            '\u7532\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "我方" },
                                            '\u6211\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "第三方" },
                                            '\u7B2C\u4E09\u65B9'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u65BD\u5DE5\u7528\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.Input, {
                                        value: fields.waterStandard,
                                        onChange: this.handleChange2.bind(this, "waterStandard"),
                                        onBlur: this.onSave,
                                        style: { width: "100%" },
                                        placeholder: '\u8BF7\u8F93\u5165' })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.waterPlanOverTime == null || fields.waterPlanOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.waterPlanOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "waterPlanOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '3'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u7535'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.powerProvider,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "powerProvider") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "甲方" },
                                            '\u7532\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "我方" },
                                            '\u6211\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "第三方" },
                                            '\u7B2C\u4E09\u65B9'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerProvider == "甲方" ? "电压" : "功率"
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.Input, {
                                        value: fields.powerStandard,
                                        onChange: this.handleChange2.bind(this, "powerStandard"),
                                        onBlur: this.onSave,
                                        style: { width: "100%" },
                                        placeholder: '\u8BF7\u8F93\u5165' })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.powerPlanOverTime == null || fields.powerPlanOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.powerPlanOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "powerPlanOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u9053\u8DEF'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.roadProvider,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "roadProvider") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "甲方" },
                                            '\u7532\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "我方" },
                                            '\u6211\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "第三方" },
                                            '\u7B2C\u4E09\u65B9'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8F66\u8F86\u8FDB\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.Input, {
                                        value: fields.roadStandard,
                                        onChange: this.handleChange2.bind(this, "roadStandard"),
                                        onBlur: this.onSave,
                                        style: { width: "100%" },
                                        placeholder: '\u8BF7\u8F93\u5165' })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.roadPlanOverTime == null || fields.roadPlanOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.roadPlanOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "roadPlanOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '5'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '\u573A\u5730'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.materialFieldProvider,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "materialFieldProvider") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "甲方" },
                                            '\u7532\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "我方" },
                                            '\u6211\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "第三方" },
                                            '\u7B2C\u4E09\u65B9'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6750\u6599\u5806\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.Input, {
                                        value: fields.materialFieldStandard,
                                        onChange: this.handleChange2.bind(this, "materialFieldStandard"),
                                        onBlur: this.onSave,
                                        style: { width: "100%" },
                                        placeholder: '\u8BF7\u8F93\u5165' })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.materialFieldPlanOverTime == null || fields.materialFieldPlanOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.materialFieldPlanOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "materialFieldPlanOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: fields.craneSitesProvider,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "craneSitesProvider") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: "甲方" },
                                            '\u7532\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "我方" },
                                            '\u6211\u65B9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: "第三方" },
                                            '\u7B2C\u4E09\u65B9'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u540A\u8F66\u7AD9\u4F4D'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.Input, {
                                        value: fields.craneSitesStandard,
                                        onChange: this.handleChange2.bind(this, "craneSitesStandard"),
                                        onBlur: this.onSave,
                                        style: { width: "100%" },
                                        placeholder: '\u8BF7\u8F93\u5165' })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.craneSitesPlanOverTime == null || fields.craneSitesPlanOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.craneSitesPlanOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "craneSitesPlanOverTime") })
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u5907\u6CE8'
                            )
                        ),
                        _react2.default.createElement(_braftEditor2.default, {
                            className: 'my-editor',
                            onBlur: function onBlur(e) {
                                _this3.handleBChange2('remarkOne', e);
                            },
                            controls: controls,
                            contentStyle: {
                                minHeight: 100,
                                maxHeight: 100,
                                overflowY: 'scroll',
                                height: 'auto',
                                width: '100%'
                            },
                            value: fields.remarkOne == null || fields.remarkOne == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(fields.remarkOne),
                            placeholder: '\u8BF7\u8F93\u5165\u5176\u4ED6\u9700\u63D0\u524D\u51C6\u5907\u7684\u5185\u5BB9'
                        }),
                        _react2.default.createElement(
                            'div',
                            { style: { margin: "30px 0" } },
                            _react2.default.createElement(
                                _antd.Button,
                                { type: 'primary', onClick: this.buildWord },
                                '\u751F\u6210\u8FDB\u573A\u6761\u4EF6\u786E\u8BA4\u5355'
                            ),
                            isDocument ? _react2.default.createElement(_Document2.default, {
                                data: fields.document,
                                store: this.store
                            }) : null
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u73B0\u573A\u8E0F\u52D8\u8BA1\u5212'
                            )
                        ),
                        _react2.default.createElement(
                            _antd.Form,
                            _extends({ layout: 'horizontal' }, formItemLayout),
                            _react2.default.createElement(
                                _antd.Form.Item,
                                { label: '\u8E0F\u52D8\u65F6\u95F4', className: 'w' },
                                getFieldDecorator('explorativeTime', {
                                    initialValue: fields.explorativeTime == null || fields.explorativeTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.explorativeTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                    rules: [{ required: true, message: '此项是必填' }]
                                })(_react2.default.createElement(_antd.DatePicker, {
                                    allowClear: false,
                                    format: dateFormat,
                                    placeholder: '\u8BF7\u9009\u62E9',
                                    style: { width: 150 },
                                    onChange: this.handleDate.bind(this, "explorativeTime") })),
                                _react2.default.createElement(
                                    'span',
                                    { className: 'daily_tips ml15' },
                                    '\u5EFA\u8BAE\u9009\u62E9\u8FDB\u573A\u65F6\u95F4\u7684\u524D1-2\u5929'
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Form.Item,
                                { label: '\u53C2\u52A0\u4EBA', className: 'w' },
                                getFieldDecorator('explorativePeople', {
                                    //initialValue: fields.explorativePeople || [],
                                    rules: [{ required: true, message: '此项是必填' }]
                                })(_react2.default.createElement(_PersonAdd2.default, {
                                    title: "添加参加人",
                                    data: fields.explorativePeople == null || fields.explorativePeople.length == 0 ? [] : fields.explorativePeople,
                                    updatePerson: this.updatePerson.bind(this, "explorativePeople")
                                }))
                            ),
                            _react2.default.createElement(
                                _antd.Form.Item,
                                { label: '\u8E0F\u52D8\u5730\u70B9', className: 'w' },
                                getFieldDecorator('explorativeAddress', {
                                    initialValue: fields.explorativeAddress || "",
                                    rules: [{ required: true, message: '此项是必填' }]
                                })(_react2.default.createElement(_antd.Input, {
                                    onChange: this.handleChange2.bind(this, "explorativeAddress"),
                                    onBlur: this.onSave,
                                    placeholder: '\u9ED8\u8BA4\u4E3A\u9879\u76EE\u5730\u70B9\uFF0C\u53EF\u4FEE\u6539' }))
                            ),
                            dataSource2.map(function (field, index) {
                                return _react2.default.createElement(
                                    _antd.Form.Item,
                                    _extends({
                                        colon: false
                                    }, index === 0 ? formItemLayout : formItemLayoutWithOutLabel, {
                                        label: index === 0 ? _react2.default.createElement(
                                            'div',
                                            { className: 'f14', style: { lineHeight: "34px", paddingRight: "9px" } },
                                            '\u8FDB\u573A\u6761\u4EF6\u5F85\u529E',
                                            _react2.default.createElement(_antd.Icon, {
                                                style: { marginLeft: '2px' },
                                                onClick: function onClick() {
                                                    return _this3.add();
                                                },
                                                type: 'plus-circle' }),
                                            ':'
                                        ) : '',
                                        labelAlign: 'center',
                                        required: false,
                                        key: index,
                                        style: { marginBottom: '0' }
                                    }),
                                    _react2.default.createElement(
                                        'div',
                                        { key: index, style: { display: 'flex' }, align: 'baseline', className: 'w' },
                                        _react2.default.createElement(
                                            _antd.Form.Item,
                                            _extends({}, field, {
                                                rules: [{ required: false, message: '此项是必填' }]
                                            }),
                                            _react2.default.createElement(_antd.Input, { placeholder: '\u586B\u5199\u5F85\u529E\u4E8B\u9879', value: field.first, onBlur: _this3.onSave, onChange: _this3.handleChange3.bind(_this3, "first", index) })
                                        ),
                                        _react2.default.createElement(
                                            _antd.Form.Item,
                                            _extends({
                                                className: 'ml10'
                                            }, field, {
                                                rules: [{ required: false, message: '此项是必填' }]
                                            }),
                                            _react2.default.createElement(_antd.Input, { placeholder: '\u586B\u5199\u8FDB\u5C55\u72B6\u6001', value: field.last, onBlur: _this3.onSave, onChange: _this3.handleChange3.bind(_this3, "last", index) })
                                        ),
                                        index === 0 ? null : _react2.default.createElement(_antd.Icon, { type: 'minus-circle',
                                            style: { position: "relative", top: "14px", left: "6px" },
                                            onClick: function onClick() {
                                                return _this3.remove(index);
                                            }
                                        })
                                    )
                                );
                            })
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u9644\u4EF6'
                            )
                        ),
                        _react2.default.createElement(_EditableTableUpload2.default, {
                            id: 'id',
                            store: this.store,
                            dataSource: dataSource.map(function (item, index) {
                                return Object.assign(item, { "keyIndex": index + 1 });
                            }),
                            saveData: function saveData() {},
                            saveItem: function saveItem() {},
                            disabled: true,
                            pid: ''
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { style: { padding: "0 10px" }, className: confirmEnterState.state1 === 2 ? "" : "hidden" },
                        _react2.default.createElement(
                            _antd.Button,
                            {
                                ghost: true,
                                type: 'primary',
                                icon: 'poweroff',
                                onClick: this.props.reStartHandover,
                                style: confirmEnterState.state1 === 2 ? { display: '' } : { display: 'none' }
                            },
                            '\u91CD\u65B0\u542F\u52A8'
                        ),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u8FDB\u573A\u6761\u4EF6',
                            fields.optimalConfirmTime == null || fields.optimalConfirmTime == 0 ? "" : _react2.default.createElement(
                                'span',
                                { style: { fontWeight: 400, fontSize: "12px" } },
                                '\uFF08\u8BF7\u5728\u8BA1\u5212\u8FDB\u573A\u524D\u4E00\u5468\uFF0C\u5373',
                                (0, _moment2.default)(fields.optimalConfirmTime).format('YYYY年MM月DD日'),
                                ' \u4E4B\u524D\u786E\u8BA4\u4EE5\u4E0B\u4FE1\u606F\uFF0C\u63D0\u9192\u7532\u65B9\u51C6\u5907\u597D\u8FDB\u573A\u6761\u4EF6\uFF09'
                            )
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'makeplotTable' },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5E8F\u53F7'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u57FA\u7840\u6761\u4EF6\u9879\u76EE'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u63D0\u4F9B\u65B9'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u9879'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u9A8C\u6536\u6807\u51C6'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u671F\u671B\u5B8C\u6210\u65F6\u95F4'
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '1'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '\u57FA\u7840'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    fields.basicProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7ED3\u6784\u5F62\u5F0F'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStructureForm
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    fields.basicPlanOverTime == null || fields.basicPlanOverTime == 0 ? "" : (0, _moment2.default)(fields.basicPlanOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8BBE\u8BA1\u5F3A\u5EA6\u8981\u6C42'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStrengthRequirement
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5750\u6807\u7EB5\u3001\u6A2A\u8F74\u7EBF\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicLongitudinal
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5E73\u9762\u6807\u9AD8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicElevation
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5916\u5F62\u5C3A\u5BF8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicSize
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '2'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u65BD\u5DE5\u7528\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterPlanOverTime == null || fields.waterPlanOverTime == 0 ? "" : (0, _moment2.default)(fields.waterPlanOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '3'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u7535'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerProvider == "甲方" ? "电压" : "功率"
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerPlanOverTime == null || fields.powerPlanOverTime == 0 ? "" : (0, _moment2.default)(fields.powerPlanOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u9053\u8DEF'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8F66\u8F86\u8FDB\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadPlanOverTime == null || fields.roadPlanOverTime == 0 ? "" : (0, _moment2.default)(fields.roadPlanOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '5'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '\u573A\u5730'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6750\u6599\u5806\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldPlanOverTime == null || fields.materialFieldPlanOverTime == 0 ? "" : (0, _moment2.default)(fields.materialFieldPlanOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u540A\u8F66\u7AD9\u4F4D'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesPlanOverTime == null || fields.craneSitesPlanOverTime == 0 ? "" : (0, _moment2.default)(fields.craneSitesPlanOverTime).format('YYYY-MM-DD')
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u5907\u6CE8'
                        ),
                        _react2.default.createElement('div', { className: 'deaft_content_detail mt20', style: { paddingLeft: '14px' },
                            dangerouslySetInnerHTML: { __html: fields.remarkOne } }),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u751F\u6210\u7684\u8FDB\u573A\u6761\u4EF6\u786E\u8BA4\u5355'
                        ),
                        isDocument ? _react2.default.createElement(_Document2.default, {
                            data: fields.document,
                            store: this.store
                        }) : null,
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u73B0\u573A\u8E0F\u52D8\u8BA1\u5212'
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'suppliertable', style: { width: '100%' } },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8E0F\u52D8\u65F6\u95F4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.explorativeTime == null || fields.explorativeTime == 0 ? "" : (0, _moment2.default)(fields.explorativeTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u53C2\u52A0\u4EBA'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.explorativePeople && fields.explorativePeople.map(function (v) {
                                        return v.userName;
                                    }).join("、")
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8E0F\u52D8\u5730\u70B9'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.explorativeAddress
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8FDB\u573A\u6761\u4EF6\u5F85\u529E'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        'div',
                                        { className: 'ol-list' },
                                        fields.entryConditionsJson == null || fields.entryConditionsJson == "" ? "" : JSON.parse(fields.entryConditionsJson).map(function (item, index) {
                                            return _react2.default.createElement(
                                                'div',
                                                { key: index },
                                                _react2.default.createElement(
                                                    'span',
                                                    { className: 'dill_title ellsis', title: item.first, style: { color: "#333" } },
                                                    index + 1 + ". ",
                                                    item.first == "" || item.first == undefined ? "无" : item.first
                                                ),
                                                _react2.default.createElement(
                                                    'span',
                                                    { className: 'dill_title ellsis w40 ml5', style: { color: "#0ECE73" }, title: item.last },
                                                    item.last
                                                )
                                            );
                                        })
                                    )
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u9644\u4EF6'
                        ),
                        _react2.default.createElement(_EditableTableUpload2.default, {
                            id: 'id',
                            store: this.store,
                            dataSource: dataSource.map(function (item, index) {
                                return Object.assign(item, { "keyIndex": index + 1 });
                            }),
                            saveData: function saveData() {},
                            saveItem: function saveItem() {},
                            disabled: true,
                            pid: ''
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt30 mb30', style: confirmEnterState.state1 !== 2 ? {
                                display: 'flex',
                                justifyContent: 'center'
                            } : { display: 'none' } },
                        _react2.default.createElement(
                            _antd.Button,
                            { onClick: this.overCurrentStage,
                                ghost: true,
                                type: 'primary'
                            },
                            ' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
                        ),
                        _react2.default.createElement(
                            _antd.Button,
                            {
                                onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
                            ' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt30 mb30', style: confirmEnterState.state1 === 2 ? {
                                display: 'flex',
                                justifyContent: 'center'
                            } : { display: 'none' } },
                        _react2.default.createElement(
                            _antd.Button,
                            { onClick: function onClick() {
                                    switchSteps(currentStep + 1);
                                }, style: { marginLeft: '20px' }, type: 'primary' },
                            '\u4E0B\u4E00\u6B65'
                        )
                    )
                )
            );
        }
    }]);

    return OneItem;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = OneItem;

/***/ }),

/***/ 1981:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员 多选
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd, _React$Component);

	function PersonAdd(props) {
		_classCallCheck(this, PersonAdd);

		var _this = _possibleConstructorReturn(this, (PersonAdd.__proto__ || Object.getPrototypeOf(PersonAdd)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.id === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var users = dataArray.filter(function (res) {
				return res.selected == true;
			}).map(function (item, index) {
				return { id: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: "",
				data: Object.assign([], _this.state.defaultData)
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.id !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: _this.props.data, // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [] // 筛选数据
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.stringify(nextProps.data) != JSON.stringify(this.props.data)) {
				this.setState({
					oldSelect: nextProps.data || []
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			// 未选的全部用户
			this.props.DeliveryStore.getBuildTeamOneItemListByProjectId().then(function (res) {
				_this3.setState({
					defaultData: res.map(function (item) {
						return Object.assign(item, { selected: false, realname: item.userName });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text;
			var _props = this.props,
			    disabled = _props.disabled,
			    title = _props.title;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect != null && oldSelect != undefined && oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							{ key: index },
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					_react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: title == undefined ? "添加负责人" : title,
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								data && data.filter(function (res) {
									return res.selected == true;
								}).length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								data.filter(function (res) {
									return res.selected == true;
								}).length > 0 && data.filter(function (res) {
									return res.selected == true;
								}).map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd;

/***/ }),

/***/ 1982:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 第二步
                  *dangw@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var TwoItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(TwoItem, _React$Component);

    function TwoItem(props) {
        _classCallCheck(this, TwoItem);

        var _this = _possibleConstructorReturn(this, (TwoItem.__proto__ || Object.getPrototypeOf(TwoItem)).call(this, props));

        _this.getConstructionScheduleList = function () {
            var taskDetail = _this.store.taskDetail;

            _this.store.getConfirmEnterOneMain({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
                _this.setState({
                    fields: res
                });
            });
        };

        _this.handleDate = function (type, date, dateString) {
            var value = dateString == null || dateString == "" ? 0 : (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
            var data = JSON.parse(JSON.stringify(_this.state.fields));
            data[type] = value;
            _this.store.saveConfirmEnterOneMain({ mian: data }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this.setState({
                        fields: Object.assign({}, res)
                    });
                }
            });
        };

        _this.getEnclosureList = function () {
            var taskDetail = _this.store.taskDetail;

            _this.store.getEnclosureList({ "taskId": mobx.toJS(taskDetail).id, "indexs": 0 }).then(function (res) {
                _this.setState({ dataSource: res });
            });
        };

        _this.overCurrentStage = function () {
            _this.props.overCurrentStageTask();
        };

        _this.onChange = function (type, e) {
            var data = JSON.parse(JSON.stringify(_this.state.fields));
            data[type] = e.target.value;
            _this.setState({
                fields: Object.assign({}, data)
            }, function () {
                _this.onSave();
            });
        };

        _this.onSave = function () {
            _this.store.saveConfirmEnterOneMain({ mian: _this.state.fields }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    /*this.setState({
                       fields: Object.assign({}, res)
                    });*/
                }
            });
        };

        _this.handleChange2 = function (type, e) {
            var data = JSON.parse(JSON.stringify(_this.state.fields));
            data[type] = e.target.value;
            _this.setState({
                fields: Object.assign({}, data)
            });
        };

        _this.handleBChange2 = function (type, bfData) {
            var value = _braftEditor2.default.createEditorState(bfData).toHTML();
            var fields = JSON.parse(JSON.stringify(_this.state.fields));
            fields[type] = value;
            _this.setState({
                fields: Object.assign({}, fields)
            }, function () {
                _this.onSave();
            });
        };

        _this.onSwitch = function (checked) {
            var data = JSON.parse(JSON.stringify(_this.state.fields));
            data["firstPartySignature"] = checked ? 1 : 0;
            _this.setState({
                fields: Object.assign({}, data)
            }, function () {
                _this.onSave();
            });
        };

        _this.saveContents = function () {
            _this.getEnclosureList();
        };

        _this.saveItem = function (row) {
            var dataSource = _this.state.dataSource;
            var taskDetail = _this.store.taskDetail;

            var em = { taskId: taskDetail.id, name: '', indexs: 1, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
            if (row.id !== undefined && row.id[0] !== "!") {
                em['id'] = row.id;
                em['orders'] = row.orders;
                em['enclosureItems'] = row.enclosureItems;
                em['templates'] = row.templates;
                em['cases'] = row.cases;
                em['name'] = row.name;
            }
            var parmas = { "em": em, taskId: taskDetail.id, indexs: 1 };
            _this.store.saveEnclosureMain(parmas).then(function (res) {
                _this.getEnclosureList();
            });
        };

        _this.getEnclosureList = function () {
            var taskDetail = _this.store.taskDetail;

            _this.store.getEnclosureList({ "taskId": mobx.toJS(taskDetail).id, "indexs": 0 }).then(function (res) {
                _this.store.enclosureList = res;
                _this.setState({ dataSource: res, enclosureList: res });
            });
        };

        _this.store = _this.props.DeliveryStore;
        _this.state = {
            fields: {},
            dataSource: []
        };
        return _this;
    }

    _createClass(TwoItem, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.getConstructionScheduleList();
            this.getEnclosureList();
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            var confirmEnterState = this.store.confirmEnterState;
            var _props = this.props,
                currentStep = _props.currentStep,
                switchSteps = _props.switchSteps;
            var _state = this.state,
                dataSource = _state.dataSource,
                fields = _state.fields;

            var controls = ['bold', 'text-color'];

            return _react2.default.createElement(
                'div',
                { className: confirmEnterState.state2 === 2 ? "" : "mt30" },
                _react2.default.createElement(
                    'div',
                    {
                        ref: function ref(node) {
                            _this2.container = node;
                        }
                    },
                    _react2.default.createElement(
                        'div',
                        { className: confirmEnterState.state2 === 2 ? "hidden" : "" },
                        _react2.default.createElement(
                            'div',
                            { className: 'daily_tips' },
                            _react2.default.createElement(
                                'p',
                                null,
                                _react2.default.createElement(
                                    'span',
                                    null,
                                    '\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u8BF7\u5728\u6B63\u5F0F\u8FDB\u573A\u524D\uFF0C\u786E\u8BA4\u57FA\u7840\u6761\u4EF6\u8981\u6C42\uFF0C\u5728\u6B63\u5F0F\u8FDB\u573A\u524D\u73B0\u573A\u786E\u8BA4\uFF0C\u4E89\u53D6\u7532\u65B9\u7684\u7B7E\u5B57\u9A8C\u6536\u54E6~'
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u5B9E\u9645\u8E0F\u52D8\u7ED3\u679C'
                            )
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'makeplotTable' },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5E8F\u53F7'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u57FA\u7840\u6761\u4EF6\u9879\u76EE'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u63D0\u4F9B\u65B9'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u9879'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u6807\u51C6'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u9A8C\u6536\u7ED3\u679C'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u65F6\u95F4'
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '1'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '\u57FA\u7840'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    fields.basicProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7ED3\u6784\u5F62\u5F0F'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStructureForm
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "basicStructureFormResult"), value: fields.basicStructureFormResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.basicStructureFormResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.basicStructureFormActual,
                                        onChange: this.handleChange2.bind(this, "basicStructureFormActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.basicActualOverTime == null || fields.basicActualOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.basicActualOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "basicActualOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8BBE\u8BA1\u5F3A\u5EA6\u8981\u6C42'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStrengthRequirement
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "basicStrengthRequirementResult"), value: fields.basicStrengthRequirementResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.basicStrengthRequirementResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.basicStrengthRequirementActual,
                                        onChange: this.handleChange2.bind(this, "basicStrengthRequirementActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5750\u6807\u7EB5\u3001\u6A2A\u8F74\u7EBF\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicLongitudinal
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "basicLongitudinalResult"), value: fields.basicLongitudinalResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.basicLongitudinalResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.basicLongitudinalActual,
                                        onChange: this.handleChange2.bind(this, "basicLongitudinalActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5E73\u9762\u6807\u9AD8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicElevation
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "basicElevationResult"), value: fields.basicElevationResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.basicElevationResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.basicElevationActual,
                                        onChange: this.handleChange2.bind(this, "basicElevationActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5916\u5F62\u5C3A\u5BF8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicSize
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "basicSizeResult"), value: fields.basicSizeResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.basicSizeResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.basicSizeActual,
                                        onChange: this.handleChange2.bind(this, "basicSizeActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '2'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u65BD\u5DE5\u7528\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "waterStandardResult"), value: fields.waterStandardResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.waterStandardResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.waterStandardActual,
                                        onChange: this.handleChange2.bind(this, "waterStandardActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.waterActualOverTime == null || fields.waterActualOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.waterActualOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "waterActualOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '3'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u7535'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7535\u538B'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "powerStandardResult"), value: fields.powerStandardResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.powerStandardResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.powerStandardActual,
                                        onChange: this.handleChange2.bind(this, "powerStandardActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.powerActualOverTime == null || fields.powerActualOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.powerActualOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "powerActualOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u9053\u8DEF'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8F66\u8F86\u8FDB\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "roadStandardResult"), value: fields.roadStandardResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.roadStandardResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.roadStandardActual,
                                        onChange: this.handleChange2.bind(this, "roadStandardActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.roadActualOverTime == null || fields.roadActualOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.roadActualOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "roadActualOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '5'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '\u573A\u5730'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6750\u6599\u5806\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "materialFieldStandardResult"), value: fields.materialFieldStandardResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.materialFieldStandardResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.materialFieldStandardActual,
                                        onChange: this.handleChange2.bind(this, "materialFieldStandardActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.materialFieldActualOverTime == null || fields.materialFieldActualOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.materialFieldActualOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "materialFieldActualOverTime") })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u540A\u8F66\u7AD9\u4F4D'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Radio.Group,
                                        { onChange: this.onChange.bind(this, "craneSitesStandardResult"), value: fields.craneSitesStandardResult },
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 1 },
                                            '\u6EE1\u8DB3'
                                        ),
                                        _react2.default.createElement(
                                            _antd.Radio,
                                            { value: 0 },
                                            '\u4E0D\u6EE1\u8DB3'
                                        )
                                    ),
                                    fields.craneSitesStandardResult == 0 ? _react2.default.createElement(_antd.Input, {
                                        value: fields.craneSitesStandardActual,
                                        onChange: this.handleChange2.bind(this, "craneSitesStandardActual"),
                                        onBlur: this.onSave,
                                        style: { width: "140px" },
                                        placeholder: '\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C' }) : _react2.default.createElement('div', { style: { width: "140px", height: "34px", display: "inline-block" } })
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    _react2.default.createElement(_antd.DatePicker, {
                                        format: 'YYYY-MM-DD',
                                        style: { width: 120 },
                                        value: fields.craneSitesActualOverTime == null || fields.craneSitesActualOverTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.craneSitesActualOverTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                        onChange: this.handleDate.bind(this, "craneSitesActualOverTime") })
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u5907\u6CE8'
                            )
                        ),
                        _react2.default.createElement(_braftEditor2.default, {
                            className: 'my-editor',
                            onBlur: function onBlur(e) {
                                _this2.handleBChange2('remarkTwo', e);
                            },
                            controls: controls,
                            contentStyle: {
                                minHeight: 100,
                                maxHeight: 100,
                                overflowY: 'scroll',
                                height: 'auto',
                                width: '100%'
                            },
                            value: fields.remarkTwo == null || fields.remarkTwo == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(fields.remarkTwo),
                            placeholder: '\u8BF7\u8F93\u5165'
                        }),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u7532\u65B9\u662F\u5426\u7B7E\u5B57'
                            ),
                            '\uFF08\u82E5\u7532\u65B9\u7B7E\u5B57\u56F0\u96BE\uFF0C\u53EF\u901A\u8FC7\u5C0F\u7A0B\u5E8F\u62CD\u6444\u73B0\u573A\u57FA\u7840\u7167\u7247\uFF0C\u4E0A\u4F20\u81F3\u7CFB\u7EDF\u4E2D~\uFF09'
                        ),
                        _react2.default.createElement(_antd.Switch, {
                            checked: fields.firstPartySignature == 1 ? true : false,
                            onChange: this.onSwitch
                        }),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
                            _react2.default.createElement(
                                'span',
                                { style: { fontWeight: '700', fontSize: '18px' } },
                                '\u9644\u4EF6'
                            ),
                            '\uFF08\u8BF7\u6309\u7167\u8981\u6C42\u4E0A\u4F20\u9644\u4EF6\u5185\u5BB9\uFF0C\u6807\u661F\u4E3A\u5FC5\u987B\u4E0A\u4F20\u9879\uFF0C\u53EF\u81EA\u7531\u6DFB\u52A0\u9644\u4EF6\u9879\u76EE\u4E2D\u4E0D\u542B\u7684\u76F8\u5173\u5185\u5BB9\uFF09'
                        ),
                        _react2.default.createElement(_EditableTableUpload2.default, {
                            id: 'id',
                            store: this.store,
                            dataSource: dataSource.map(function (item, index) {
                                return Object.assign(item, { "keyIndex": index + 1 });
                            }),
                            saveData: this.saveContents,
                            saveItem: this.saveItem,
                            disabled: false,
                            pid: ''
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { style: { padding: "0 10px" }, className: confirmEnterState.state2 === 2 ? "" : "hidden" },
                        _react2.default.createElement(
                            _antd.Button,
                            {
                                ghost: true,
                                type: 'primary',
                                icon: 'poweroff',
                                onClick: this.props.reStartHandover,
                                style: confirmEnterState.state2 === 2 ? { display: '' } : { display: 'none' }
                            },
                            '\u91CD\u65B0\u542F\u52A8'
                        ),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u5B9E\u9645\u8E0F\u52D8\u7ED3\u679C'
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'makeplotTable' },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5E8F\u53F7'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u57FA\u7840\u6761\u4EF6\u9879\u76EE'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u63D0\u4F9B\u65B9'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u9879'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u6807\u51C6'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u7ED3\u679C'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u9A8C\u6536\u65F6\u95F4'
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '1'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    '\u57FA\u7840'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    fields.basicProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7ED3\u6784\u5F62\u5F0F'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStructureForm
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.basicStructureFormResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.basicStructureFormResult == 0 && fields.basicStructureFormActual != null ? ": " + fields.basicStructureFormActual : null
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 5, className: 'vm' },
                                    fields.basicActualOverTime == null || fields.basicActualOverTime == 0 ? "" : (0, _moment2.default)(fields.basicActualOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8BBE\u8BA1\u5F3A\u5EA6\u8981\u6C42'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicStrengthRequirement
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.basicStrengthRequirementResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.basicStrengthRequirementResult == 0 && fields.basicStrengthRequirementActual != null ? ": " + fields.basicStrengthRequirementActual : null
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5750\u6807\u7EB5\u3001\u6A2A\u8F74\u7EBF\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicLongitudinal
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.basicLongitudinalResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.basicLongitudinalResult == 0 && fields.basicLongitudinalActual != null ? ": " + fields.basicLongitudinalActual : null
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5E73\u9762\u6807\u9AD8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicElevation
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.basicElevationResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.basicElevationResult == 0 && fields.basicElevationActual != null ? ": " + fields.basicElevationActual : null
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5916\u5F62\u5C3A\u5BF8\u504F\u5DEE'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.basicSize
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.basicSizeResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.basicSizeResult == 0 && fields.basicSizeActual != null ? ": " + fields.basicSizeActual : null
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '2'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u65BD\u5DE5\u7528\u6C34'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.waterStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.waterStandardResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.waterStandardResult == 0 && fields.waterStandardActual != null ? ": " + fields.waterStandardActual : null
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    fields.waterActualOverTime == null || fields.waterActualOverTime == 0 ? "" : (0, _moment2.default)(fields.waterActualOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '3'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E34\u7535'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7535\u538B'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.powerStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.powerStandardResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.powerStandardResult == 0 && fields.powerStandardActual != null ? ": " + fields.powerStandardActual : null
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    fields.powerActualOverTime == null || fields.powerActualOverTime == 0 ? "" : (0, _moment2.default)(fields.powerActualOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u9053\u8DEF'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8F66\u8F86\u8FDB\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.roadStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.roadStandardResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.roadStandardResult == 0 && fields.roadStandardActual != null ? ": " + fields.roadStandardActual : null
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    fields.roadActualOverTime == null || fields.roadActualOverTime == 0 ? "" : (0, _moment2.default)(fields.roadActualOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '5'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { rowSpan: 2, className: 'vm' },
                                    '\u573A\u5730'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6750\u6599\u5806\u573A'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.materialFieldStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.materialFieldStandardResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.materialFieldStandardResult == 0 && fields.materialFieldStandardActual != null ? ": " + fields.materialFieldStandardActual : null
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    fields.materialFieldActualOverTime == null || fields.materialFieldActualOverTime == 0 ? "" : (0, _moment2.default)(fields.materialFieldActualOverTime).format('YYYY-MM-DD')
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesProvider
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u540A\u8F66\u7AD9\u4F4D'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.craneSitesStandard
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'tl' },
                                    fields.craneSitesStandardResult == 1 ? _react2.default.createElement(
                                        'div',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/success.png', alt: '' }),
                                        '\u6EE1\u8DB3\u6761\u4EF6'
                                    ) : _react2.default.createElement(
                                        'span',
                                        null,
                                        _react2.default.createElement('img', {
                                            width: '18',
                                            height: '18',
                                            style: { "vertical-align": 'middle', marginRight: '6px' },
                                            src: './images/delivery/error.png', alt: '' }),
                                        '\u4E0D\u6EE1\u8DB3'
                                    ),
                                    fields.craneSitesStandardResult == 0 && fields.craneSitesStandardActual != null ? ": " + fields.craneSitesStandardActual : null
                                ),
                                _react2.default.createElement(
                                    'td',
                                    { className: 'vm' },
                                    fields.craneSitesActualOverTime == null || fields.craneSitesActualOverTime == 0 ? "" : (0, _moment2.default)(fields.craneSitesActualOverTime).format('YYYY-MM-DD')
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u5907\u6CE8'
                        ),
                        _react2.default.createElement('div', { className: 'deaft_content_detail mt20', style: { paddingLeft: '14px' },
                            dangerouslySetInnerHTML: { __html: fields.remarkTwo } }),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u7532\u65B9\u662F\u5426\u7B7E\u5B57'
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'deaft_content_detail mt20', style: { paddingLeft: '14px' } },
                            fields.firstPartySignature == 1 ? _react2.default.createElement(
                                'div',
                                null,
                                _react2.default.createElement('img', {
                                    width: '18',
                                    height: '18',
                                    style: { "vertical-align": 'middle', marginRight: '6px' },
                                    src: './images/delivery/success.png', alt: '' }),
                                '\u5DF2\u7B7E\u5B57'
                            ) : "未签字"
                        ),
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u9644\u4EF6'
                        ),
                        _react2.default.createElement(_EditableTableUpload2.default, {
                            id: 'id',
                            store: this.store,
                            dataSource: dataSource.map(function (item, index) {
                                return Object.assign(item, { "keyIndex": index + 1 });
                            }),
                            saveData: function saveData() {},
                            saveItem: function saveItem() {},
                            disabled: true,
                            pid: ''
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt30 mb30', style: confirmEnterState.state2 !== 2 ? {
                                display: 'flex',
                                justifyContent: 'center'
                            } : { display: 'none' } },
                        _react2.default.createElement(
                            _antd.Button,
                            { onClick: this.overCurrentStage,
                                ghost: true,
                                type: 'primary'
                            },
                            ' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt30 mb30', style: confirmEnterState.state2 === 2 ? {
                                display: 'flex',
                                justifyContent: 'center'
                            } : { display: 'none' } },
                        _react2.default.createElement(
                            _antd.Button,
                            { onClick: function onClick() {
                                    switchSteps(currentStep - 1);
                                }, type: 'primary' },
                            '\u4E0A\u4E00\u6B65'
                        )
                    )
                )
            );
        }
    }]);

    return TwoItem;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = TwoItem;

/***/ }),

/***/ 1983:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 交底施工内容
                  * qiufh@bocspace.com
                  * */

// import TimeLine from 'react-gantt-timeline';


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _uuid = __webpack_require__(79);

var _MyUploadNew = __webpack_require__(100);

var _MyUploadNew2 = _interopRequireDefault(_MyUploadNew);

var _ContentTips = __webpack_require__(1984);

var _ContentTips2 = _interopRequireDefault(_ContentTips);

var _ContractPunishment = __webpack_require__(1985);

var _ContractPunishment2 = _interopRequireDefault(_ContractPunishment);

var _TechnologyContent = __webpack_require__(1989);

var _TechnologyContent2 = _interopRequireDefault(_TechnologyContent);

var _SafetyContent = __webpack_require__(1988);

var _SafetyContent2 = _interopRequireDefault(_SafetyContent);

var _EditableTableUpload = __webpack_require__(1986);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _TimeLine = __webpack_require__(2076);

var _TimeLine2 = _interopRequireDefault(_TimeLine);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TabPane = _antd.Tabs.TabPane;


var columns = [{
	title: '序号',
	dataIndex: 'key',
	key: 'key',
	align: 'center'
}, {
	title: "风险类型",
	dataIndex: 'type',
	key: 'type',
	align: 'center',
	editable: true
}, {
	title: "风险描述",
	dataIndex: 'describes',
	key: 'describes',
	align: 'center',
	width: '40%',
	render: function render(text, record) {
		return _react2.default.createElement(
			'div',
			{ style: { width: '100%', height: '46px', lineHeight: '46px', wordBreak: 'break-all', whiteSpace: 'pre-wrap' } },
			text
		);
	}

}, {
	title: "应对方案",
	dataIndex: 'programme',
	key: 'programme',
	align: 'center',
	width: '40%',
	render: function render(text, record) {
		return _react2.default.createElement(
			'div',
			{ style: { width: '100%', height: '46px', lineHeight: '46px', wordBreak: 'break-all', whiteSpace: 'pre-wrap' } },
			text
		);
	}
}];

var config = {
	header: {
		top: {
			style: {
				background: "#F2F2F2",
				height: 20
			}
		}
	},
	taskList: {
		title: {
			label: "任务名称",
			style: {
				display: "flex",
				flexDirection: "column",
				alignItems: "center",
				background: "#F2F2F2",
				height: "60px"

			}
		}
	},
	dataViewPort: {
		task: {
			showLabel: false,
			style: {
				marginTop: 9,
				borderRadius: 5,
				maxHeight: "15px"
			}
		}
	}
};

var ConstructionContent = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ConstructionContent, _React$Component);

	function ConstructionContent(props) {
		_classCallCheck(this, ConstructionContent);

		var _this = _possibleConstructorReturn(this, (ConstructionContent.__proto__ || Object.getPrototypeOf(ConstructionContent)).call(this, props));

		_this.getCurrentStageState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getTaskStepState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this.store.constructionState = res;
				}
			});
		};

		_this.handleChangeTabs = function (key) {
			_this.setState({ activeKey: key });
		};

		_this.getEnclosureList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getOnlyShowEnclosureListByTaskIdAndIndex({ "taskId": mobx.toJS(taskDetail).id, "index": 0 }).then(function (res) {
				if (res) {
					_this.setState({ dataSource: res });
				}
			});
		};

		_this.changeCurrentStageStatus = function () {
			var taskDetail = _this.store.taskDetail;

			if (taskDetail.state === 0) {
				_this.handleChangeTaskStepState({ "taskId": taskDetail.id, "index": 1, "state": 1 });
			}
		};

		_this.handleAttment = function (type, params) {
			// 处理附件
			var arr = [];
			params.length && params.map(function (item) {
				arr.push({
					fileId: item.fileId,
					fileName: item.fileName,
					filePath: item.filePath,
					id: item.id,
					uid: item.uid,
					name: item.fileName,
					status: 'done',
					url: item.filePath
				});
			});
			_this.setState(_defineProperty({}, type, Object.assign([], arr)), function () {
				_this.changeCurrentStageStatus();
			});
		};

		_this.getConstructionScheduleDetail = function () {
			var projectDetail = _this.store.projectDetail;

			var _mobx$toJS = mobx.toJS(projectDetail),
			    stages = _mobx$toJS.stages;

			var planStep = stages.filter(function (item) {
				return item.name === '规划阶段';
			});
			var csTask = planStep[0]['tasks'].filter(function (item) {
				return item.taskType === 'constructionSchedule';
			})[0];

			_this.store.getConstructionScheduleDetail({ "taskId": csTask.id }).then(function (res) {
				var dataSource = typeof res == "string" ? JSON.parse(res) : res;
				var requireSource = Array.isArray(dataSource.vos) ? dataSource.vos.filter(function (item) {
					return item.planBeginTime != undefined;
				}) : [];
				var data = requireSource.map(function (item) {
					return { id: item.id, start: item.planBeginTime, end: item.planEndTime, name: item.name, color: "#FACD91" };
				});

				_this.setState({
					timelineData: Array.isArray(data) ? data : []

				});
			});
		};

		_this.getMakePlot = function () {
			var projectId = _this.store.projectId;
			_this.store.getMakePlot({ 'projectId': projectId }).then(function (mres) {
				if (mres) {
					var res = JSON.parse(JSON.stringify(mres));
					_this.setState({
						makePlotInfo: res.makePlotInfo,
						makePlotRisk: Array.isArray(res.makePlotRisk) ? res.makePlotRisk.map(function (item, index) {
							return Object.assign(item, { key: index + 1 });
						}) : []
					});
				}
			});
		};

		_this.getProjectDetail = function () {
			var projectId = _this.store.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.changeTaskStepState = function (param) {

			_this.store.changeTaskStepState(param).then(function (res) {
				_this.getProjectDetail();
			});
		};

		_this.handleChangeTaskStepState = function (param) {
			var taskDetail = _this.store.taskDetail;

			_this.store.getTaskStepState({ "taskId": taskDetail.id }).then(function (res) {
				if (res) {
					_this.changeTaskStepState(param);
				}
			});
		};

		_this.overCurrentStageTask = function () {
			var taskDetail = _this.store.taskDetail;
			var attachments = _this.state.attachments;

			if (attachments.length > 0) {
				attachments.map(function (item) {
					if (item.id == "" || item.id == null) {
						_this.updateDocument(item);
					}
				});
			} else {
				_this.changeTaskStepState({ "taskId": taskDetail.id, "index": 1, "state": 1 });
				_antd.message.warn("请上传安全交底签字文件");
				return false;
			}
			_this.store.getTaskStepState({ "taskId": taskDetail.id }).then(function (res) {
				if (res) {
					_this.store.overTaskStep({ "taskId": taskDetail.id, "index": 1 }).then(function (res) {
						if (res) {
							_this.getProjectDetail();
							_this.props.closeModal();
							_this.store.constructionState = res;
						}
					});
				}
			});
		};

		_this.updateDocument = function (file) {
			var taskDetail = _this.store.taskDetail;

			var document = {
				id: file.id,
				name: file.name,
				taskId: taskDetail.id,
				fileUrl: file.filePath,
				fileSize: file.size,
				downloadCount: 0,
				ownerId: '',
				ownerName: '',
				orders: 0,
				isVisible: 1,
				category: 1
			};
			_this.store.updateDocument({ 'd': document }).then(function (res) {});
		};

		_this.getDocumentList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getDocumentList({ 'taskId': taskDetail.id }).then(function (res) {
				if (res) {
					var attachments = res.map(function (item, index) {
						return Object.assign({}, {
							"fileId": null,
							"fileName": item.fileUrl,
							"filePath": item.fileUrl,
							"id": item.id,
							"name": item.name,
							"status": "done",
							"uid": (0, _uuid.v4)(),
							"url": item.fileUrl
						});
					});
					_this.setState({ attachments: attachments });
				}
			});
		};

		_this.handleRemove = function (item) {
			_this.delDocument(item.id);
		};

		_this.delDocument = function (id) {
			_this.store.delDocument({ 'id': id }).then(function (res) {
				if (res) {
					_antd.message.success("文件删除成功");
				}
			});
		};

		_this.getScheduleNowposition = function (data) {
			var result = 0;
			if (data.length > 0) {
				var start = data[0].start;

				var days = _moment2.default.duration((0, _moment2.default)().valueOf() - start).asDays();
				result = parseInt(days) * 24;
			}
			return result;
		};

		_this.reStartHandover = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartTaskStep({ "taskId": taskDetail.id, "index": 1 }).then(function (res) {
				if (res) {
					_this.store.constructionState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null,
			currentStep: 1,
			activeKey: "1",
			dataSource: [],
			attachments: [],
			timelineData: [], // 进度图数据
			makePlotInfo: {}, // 工程概况
			makePlotRisk: [] //重难点分析
		};
		return _this;
	}

	_createClass(ConstructionContent, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.getEnclosureList();
				this.getConstructionScheduleDetail();
				this.getMakePlot();
				this.getDocumentList();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var projectDetail = this.store.projectDetail;

			this.setState({ projectId: mobx.toJS(projectDetail).id });
			this.getEnclosureList();
			this.getConstructionScheduleDetail();
			this.getMakePlot();
			this.getDocumentList();
			this.getCurrentStageState();
		}

		// 附件

	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    activeKey = _state.activeKey,
			    dataSource = _state.dataSource,
			    attachments = _state.attachments,
			    timelineData = _state.timelineData,
			    makePlotInfo = _state.makePlotInfo,
			    makePlotRisk = _state.makePlotRisk;
			var _store = this.store,
			    ossData = _store.ossData,
			    constructionState = _store.constructionState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal', style: { paddingRight: "30px" } },
				_react2.default.createElement(
					'div',
					{ className: 'mt20', style: { borderBottom: "1px dashed #e6e6e6", paddingBottom: "30px" } },
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.reStartHandover,
							style: constructionState.state1 === 2 ? { display: '' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					),
					_react2.default.createElement(
						_antd.Tabs,
						{ className: 'cc-tabs mt20', defaultActiveKey: '1', activeKey: activeKey, onChange: this.handleChangeTabs, tabBarGutter: 10, type: 'card' },
						_react2.default.createElement(
							TabPane,
							{ tab: '\u9879\u76EE\u91CD\u96BE\u70B9', key: '1', style: { padding: "0 10px" } },
							_react2.default.createElement(_ContentTips2.default, {
								headPerson: '\u9879\u76EE\u7ECF\u7406',
								acceptPerson: '\u65BD\u5DE5\u5DE5\u957F',
								notice: '\u8BF7\u5728\u9879\u76EE\u6B63\u5F0F\u8FDB\u573A\u524D1-2\u5929\u8FDB\u884C\u4EA4\u5E95'
							}),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									'\u5DE5\u7A0B\u6982\u51B5'
								)
							),
							_react2.default.createElement(
								'table',
								{ style: { width: "100%" }, className: 'suppliertable' },
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5DE5\u7A0B\u540D\u79F0'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.name
									),
									_react2.default.createElement(
										'td',
										null,
										'\u5DE5\u7A0B\u5730\u70B9'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.address
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5EFA\u8BBE\u5355\u4F4D'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.partyUnits
									),
									_react2.default.createElement(
										'td',
										null,
										'\u65BD\u5DE5\u5355\u4F4D'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.buildUnits
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u4E3B\u8981\u4F9B\u5E94\u5546'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.supplier == null ? "" : makePlotInfo.supplier.map(function (item) {
											return item.name;
										}).join("，")
									),
									_react2.default.createElement(
										'td',
										null,
										'\u5DE5\u7A0B\u7C7B\u578B'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.projectConstructionType
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5EFA\u7B51\u9762\u79EF\uFF08m2\uFF09'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.buildArea
									),
									_react2.default.createElement(
										'td',
										null,
										'\u623F\u95F4\u7EC4\u6210\uFF08\u95F4\uFF09'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.roomComposition
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u8FDB\u573A\u6761\u4EF6'
									),
									_react2.default.createElement(
										'td',
										null,
										makePlotInfo.enterCondition
									),
									_react2.default.createElement(
										'td',
										null,
										'\u627F\u63A5\u5185\u5BB9'
									),
									_react2.default.createElement(
										'td',
										null,
										Array.isArray(makePlotInfo.productType) ? makePlotInfo.productType.join("、 ") : ""
									)
								)
							),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									'\u91CD\u70B9\u4E0E\u96BE\u70B9\u5206\u6790'
								)
							),
							_react2.default.createElement(_antd.Table, {
								columns: columns,
								dataSource: makePlotRisk,
								pagination: false,
								bordered: true
							})
						),
						_react2.default.createElement(
							TabPane,
							{ tab: '\u65BD\u5DE5\u8FDB\u5EA6', key: '2', style: { padding: "0 10px" } },
							_react2.default.createElement(_ContentTips2.default, {
								headPerson: '\u9879\u76EE\u7ECF\u7406',
								acceptPerson: '\u65BD\u5DE5\u5DE5\u957F',
								notice: '\u8BF7\u5728\u9879\u76EE\u6B63\u5F0F\u8FDB\u573A\u524D1-2\u5929\u8FDB\u884C\u4EA4\u5E95'
							}),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									'\u65BD\u5DE5\u8FDB\u5EA6\u8BA1\u5212'
								)
							),
							timelineData.length > 0 ? _react2.default.createElement(_TimeLine2.default, {
								data: timelineData.filter(function (item) {
									return item.name !== "材料运输";
								}),
								config: config,
								nonEditableName: true,
								itemheight: 39,
								nowposition: this.getScheduleNowposition(timelineData)
							}) : ""
						),
						_react2.default.createElement(
							TabPane,
							{ tab: '\u5956\u7F5A\u63AA\u65BD', key: '3', style: { padding: "0 10px" } },
							_react2.default.createElement(_ContentTips2.default, {
								headPerson: '\u9879\u76EE\u7ECF\u7406',
								acceptPerson: '\u65BD\u5DE5\u5DE5\u957F',
								notice: '\u8BF7\u5728\u9879\u76EE\u6B63\u5F0F\u8FDB\u573A\u524D1-2\u5929\u8FDB\u884C\u4EA4\u5E95'
							}),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									'\u5408\u540C\u60E9\u7F5A\u63AA\u65BD\u7EA6\u5B9A'
								)
							),
							_react2.default.createElement(_ContractPunishment2.default, null)
						),
						_react2.default.createElement(
							TabPane,
							{ tab: '\u6280\u672F\u4EA4\u5E95', key: '4', style: { padding: "0 10px" } },
							_react2.default.createElement(_ContentTips2.default, {
								headPerson: '\u9879\u76EE\u7ECF\u7406',
								acceptPerson: '\u64CD\u4F5C\u5DE5\u4EBA',
								notice: '\u8BF7\u5728\u5DE5\u4EBA\u4E0A\u5DE5\u524D\u505A\u96C6\u4F53\u4EA4\u5E95\u3002',
								isTechnology: true
							}),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									'\u6280\u672F\u4EA4\u5E95\u5185\u5BB9'
								)
							),
							_react2.default.createElement(_TechnologyContent2.default, null)
						),
						_react2.default.createElement(
							TabPane,
							{ tab: '\u5B89\u5168\u4EA4\u5E95', key: '5', style: { padding: "0 10px" } },
							_react2.default.createElement(_ContentTips2.default, {
								headPerson: '\u9879\u76EE\u7ECF\u7406',
								acceptPerson: '\u64CD\u4F5C\u5DE5\u4EBA',
								notice: '\u8BF7\u5728\u5DE5\u4EBA\u4E0A\u5DE5\u524D\u505A\u96C6\u4F53\u4EA4\u5E95\uFF0C\u5E76\u8981\u6C42\u5DE5\u4EBA',
								isSafety: true
							}),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									'\u5B89\u5168\u4EA4\u5E95\u5185\u5BB9'
								)
							),
							_react2.default.createElement(_SafetyContent2.default, null),
							_react2.default.createElement(
								'div',
								{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
								_react2.default.createElement(
									'span',
									{ style: { fontWeight: '700', fontSize: '18px' } },
									_react2.default.createElement(
										'span',
										{ style: { fontFamily: 'PingFang-SC-Bold\', \'PingFang SC Bold\', \'PingFang SC', fontweight: '700', color: "#d9001b" } },
										'*'
									),
									'\u5B89\u5168\u4EA4\u5E95\u786E\u8BA4\u6587\u4EF6'
								)
							),
							_react2.default.createElement(_MyUploadNew2.default, {
								saveAttachment: this.handleAttment.bind(this, 'attachments'),
								onRemove: this.handleRemove,
								disabled: constructionState.state1 === 2 ? true : false,
								multiple: true,
								listType: 'picture-card',
								ossData: mobx.toJS(ossData),
								fileList: attachments == null ? [] : attachments,
								journalType: 'journal'
							})
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ style: { padding: '0 10px' } },
					_react2.default.createElement(
						'div',
						{ className: 'mb20 mt20', style: { fontFamily: 'PingFang-SC-Regular', fontWeight: 400, fontSize: '14px' } },
						_react2.default.createElement(
							'span',
							{ style: { fontWeight: '700', fontSize: '18px' } },
							'\u9644\u4EF6'
						)
					),
					_react2.default.createElement(_EditableTableUpload2.default, {
						id: 'id',
						store: this.store,
						dataSource: dataSource.map(function (item, index) {
							return Object.assign(item, { "keyIndex": index + 1 });
						}),
						saveData: function saveData() {},
						saveItem: function saveItem() {},
						changeTaskStepState: this.handleChangeTaskStepState,
						disabled: true,
						pid: ''
					}),
					_react2.default.createElement('div', { style: constructionState.state1 === 2 ? {
							height: "60px"
						} : { display: 'none' } })
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: constructionState.state1 !== 2 ? {
							display: 'flex',
							justifyContent: 'center'
						} : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStageTask,
							ghost: true,
							type: 'primary' },
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					)
				)
			);
		}
	}]);

	return ConstructionContent;
}(_react2.default.Component)) || _class) || _class);
exports.default = ConstructionContent;

/***/ }),

/***/ 1984:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交底施工内容
                  *qiufh@bocspace.com
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

__webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ContentTips = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ContentTips, _React$Component);

	function ContentTips(props) {
		_classCallCheck(this, ContentTips);

		var _this = _possibleConstructorReturn(this, (ContentTips.__proto__ || Object.getPrototypeOf(ContentTips)).call(this, props));

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null
		};
		return _this;
	}

	_createClass(ContentTips, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _props = this.props,
			    headPerson = _props.headPerson,
			    acceptPerson = _props.acceptPerson,
			    notice = _props.notice;

			_objectDestructuringEmpty(this.state);

			_objectDestructuringEmpty(this.store);

			return _react2.default.createElement(
				'div',
				{ className: 'content-tips' },
				_react2.default.createElement(
					'div',
					{ className: 'tips-info' },
					_react2.default.createElement('img', { width: 37, height: 37, src: './images/delivery/u9451.png' }),
					_react2.default.createElement(
						'div',
						{ className: 'info-zone', style: { marginLeft: '10px' } },
						_react2.default.createElement(
							'span',
							{ className: 'role-label' },
							'\u4EA4\u5E95\u8D1F\u8D23\u4EBA\uFF1A'
						),
						_react2.default.createElement(
							'span',
							{ className: 'role-info' },
							headPerson
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'tips-info' },
					this.props.isTechnology !== undefined && this.props.isTechnology ? _react2.default.createElement('img', { width: 28, height: 28, src: './images/delivery/u4934.png' }) : _react2.default.createElement('img', { width: 28, height: 28, src: './images/delivery/u9452.png' }),
					_react2.default.createElement(
						'div',
						{ className: 'info-zone' },
						_react2.default.createElement(
							'span',
							{ className: 'role-label' },
							'\u4EA4\u5E95\u5BF9\u8C61\uFF1A'
						),
						_react2.default.createElement(
							'span',
							{ className: 'role-info' },
							acceptPerson
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'tips-info' },
					_react2.default.createElement('img', { width: 26, height: 26, src: './images/delivery/u9453.png' }),
					_react2.default.createElement(
						'div',
						{ className: 'info-zone' },
						_react2.default.createElement(
							'span',
							{ className: 'role-label' },
							'\u6CE8\u610F\u4E8B\u9879\uFF1A'
						),
						this.props.isSafety !== undefined && this.props.isSafety ? _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'role-info' },
								notice
							),
							_react2.default.createElement(
								'span',
								{ className: 'make-sure' },
								'\u7B7E\u5B57\u786E\u8BA4\u3002'
							)
						) : _react2.default.createElement(
							'span',
							{ className: 'role-info' },
							notice
						)
					)
				)
			);
		}
	}]);

	return ContentTips;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = ContentTips;

/***/ }),

/***/ 1985:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交底施工内容
                  *qiufh@bocspace.com
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

__webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ContractPunishment = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ContractPunishment, _React$Component);

	function ContractPunishment(props) {
		_classCallCheck(this, ContractPunishment);

		var _this = _possibleConstructorReturn(this, (ContractPunishment.__proto__ || Object.getPrototypeOf(ContractPunishment)).call(this, props));

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null
		};
		return _this;
	}

	_createClass(ContractPunishment, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'render',
		value: function render() {
			_objectDestructuringEmpty(this.props);

			_objectDestructuringEmpty(this.state);

			_objectDestructuringEmpty(this.store);

			return _react2.default.createElement(
				'div',
				{ className: 'contract-punishment' },
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						null,
						'1\u3001\u4E59\u65B9\u5E94\u4E25\u683C\u6309\u7167\u7532\u65B9\u7684\u65BD\u5DE5\u8FDB\u5EA6\u8BA1\u5212\u914D\u5408\u65BD\u5DE5\uFF0C\u9664\u4E0D\u53EF\u6297\u529B\u7684\u56E0\u7D20\u5916\uFF0C\u4E0D\u5F97\u62D6\u5EF6\u3002\u5426\u5219\uFF0C\u5DE5\u671F\u6BCF\u62D6\u5EF6\u4E00\u5929\uFF0C\u4E59\u65B9\u5411\u7532\u65B9\u652F\u4ED8\u8FDD\u7EA6\u91D1500~1000\u5143\uFF0C\u5E76\u627F\u62C5\u7531\u5DE5\u671F\u5EF6\u8BEF\u5E26\u6765\u7684\u4E00\u5207\u635F\u5931\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'2\u3001\u4E59\u65B9\u5FC5\u987B\u6309\u7167\u7532\u65B9\u7684\u6574\u4F53\u89C4\u5212\u505A\u597D\u73B0\u573A\u6587\u660E\u65BD\u5DE5\uFF0C\u65BD\u5DE5\u9636\u6BB5\u5FC5\u987B\u6D3E\u9A7B\u4E13\u4EBA\u505A\u4FDD\u6D01\uFF0C\u6B64\u8D39\u7528\u8BA1\u5165\u5408\u540C\u989D\u91CC\u3002\u65BD\u5DE5\u73B0\u573A\u8981\u6C42\u6BCF\u5929\u4E0B\u73ED\u524D\u6750\u6599\u5806\u7801\u89C4\u8303\uFF0C\u5E94\u5C06\u4F5C\u4E1A\u533A\u57DF\u7684\u5783\u573E\u8FD0\u81F3\u5DE5\u5730\u6307\u5B9A\u5730\u70B9\u5806\u653E\uFF0C\u4E0D\u5F97\u5230\u5904\u4E71\u6254\uFF0C\u5806\u653E\u65F6\u95F4\u4E0D\u5F97\u8D85\u8FC73\u5929\uFF0C\u505A\u5230\u5DE5\u5B8C\u573A\u6E05\uFF0C\u5426\u5219\u7532\u65B9\u6709\u6743\u89C6\u60C5\u51B5\u5BF9\u4E59\u65B9\u8FDB\u884C  800  \u5143/\u6B21\u7684\u8FDD\u7EA6\u5904\u7406\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'3\u3001\u82E5\u4E59\u65B9\u672A\u6309\u7532\u65B9\u8981\u6C42\u8FDB\u884C\u65BD\u5DE5\uFF0C\u7532\u65B9\u6709\u6743\u8981\u6C42\u5176\u652F\u4ED8\u8FDD\u7EA6\u91D1\uFF0C\u8FDD\u7EA6\u91D1\u8303\u56F4\u4E3A1000\u5143\uFF5E2000\u5143\u3002\u82E5\u51FA\u73B0\u8D28\u91CF\u3001\u5B89\u5168\u4E8B\u6545\uFF0C\u89C6\u60C5\u8282\u8F7B\u91CD\u6263\u9664\u76F8\u5E94\u8FDD\u7EA6\u91D1\u751A\u81F3\u89E3\u9664\u5408\u540C\u5E76\u8FFD\u7A76\u76F8\u5E94\u6CD5\u5F8B\u8D23\u4EFB\u3002\u5404\u79CD\u9690\u853D\u5DE5\u7A0B\u5FC5\u987B\u53CA\u65F6\u4E66\u9762\u901A\u77E5\u7532\u65B9\u68C0\u67E5\uFF0C\u672A\u7ECF\u7532\u65B9\u6216\u8005\u4E1A\u4E3B\u540C\u610F\u64C5\u81EA\u9690\u853D\u7684\uFF0C\u6B64\u90E8\u5206\u5DE5\u7A0B\u91CF\u4E0D\u4E88\u7ED3\u7B97\uFF0C\u5E76\u6263\u9664\u8FDD\u7EA6\u91D11000\u5143/\u6B21\u3002\u7532\u65B9\u6263\u9664\u7684\u8FDD\u7EA6\u91D1\u76F4\u63A5\u4ECE\u5408\u540C\u6B3E\u4E2D\u6263\u9664\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'4\u3001\u82E5\u53D1\u751F\u52B3\u8D44\u7EA0\u7EB7\u65F6\uFF0C\u4E59\u65B9\u5E94\u91C7\u53D6\u79EF\u6781\u7A33\u59A5\u7684\u65B9\u5F0F\uFF0C\u5C06\u95EE\u9898\u548C\u77DB\u76FE\u5316\u89E3\u5728\u840C\u82BD\u72B6\u6001\uFF0C\u907F\u514D\u4E8B\u6001\u7684\u8FDB\u4E00\u6B65\u6269\u5927\u3002\u82E5\u56E0\u4E59\u65B9\u539F\u56E0\u53D1\u751F\u52B3\u8D44\u7EA0\u7EB7\uFF0C\u4E59\u65B9\u987B\u7ACB\u5373\u91C7\u53D6\u6709\u6548\u63AA\u65BD\u89E3\u51B3\u7EA0\u7EB7\uFF0C\u540C\u65F6\uFF0C\u7532\u65B9\u6709\u6743\u6309\u7167  500  \u5143/\u4EBA/\u6B21\u5BF9\u4E59\u65B9\u8FDB\u884C\u8FDD\u7EA6\u5904\u7406\uFF1B \u5982\u53D1\u751F\u4E0A\u8FF0\u6076\u6027\u8D1F\u9762\u4E8B\u4EF6\uFF0C\u4E0D\u8BBA\u4F55\u79CD\u539F\u56E0\uFF0C\u7532\u65B9\u5747\u6709\u6743\u89C6\u60C5\u51B5\u6309\u7167  2000 \u5143/\u6B21\u5BF9\u4E59\u65B9\u8FDB\u884C\u8FDD\u7EA6\u5904\u7406\uFF0C\u751A\u81F3\u89E3\u9664\u5408\u540C\uFF0C\u5E76\u627F\u62C5\u56E0\u6B64\u4EA7\u751F\u7684\u4E00\u5207\u8D23\u4EFB\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'5\u3001\u5DE5\u671F\u6BCF\u5EF6\u8BEF\u4E00\u5929\uFF0C\u4E59\u65B9\u5411\u7532\u65B9\u652F\u4ED8\u8FDD\u7EA6\u91D1 500~1000 \u5143\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'6\u3001\u5982\u679C\u51FA\u73B0\u4E0D\u5408\u683C\u6216\u4E0D\u7B26\u5408\u5408\u540C\u7EA6\u5B9A\u7684\u5B89\u88C5\u6750\u6599\u3001\u8BBE\u5907\u7528\u4E8E\u5DE5\u7A0B\uFF0C\u9664\u4E59\u65B9\u65E0\u6761\u4EF6\u8FD4\u5DE5\u5916\uFF0C\u8FD8\u9700\u5411\u7532\u65B9\u4EA4\u7EB3\u8FDD\u7EA6\u91D110000\u5143/\u5904\uFF08\u6B21\uFF09\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'7\u3001\u5C5E\u4E59\u65B9\u8303\u56F4\u5185\u7684\u6709\u5173\u6536\u5C3E\u5DE5\u4F5C\uFF0C\u7ECF\u7532\u65B9\u73B0\u573A\u65BD\u5DE5\u4EBA\u5458\u53E3\u5934\u6216\u4E66\u9762\u901A\u77E5\u8FDB\u884C\u6574\u6539\u6216\u5B8C\u5584\u6709\u5173\u5DE5\u4F5C\u540E\uFF0C\u4E59\u65B9\u5E94\u57284\u4E2A\u5C0F\u65F6\u5185\u7EC4\u7EC7\u6574\u6539\uFF0C\u5426\u5219\u7532\u65B9\u6709\u6743\u59D4\u6D3E\u5176\u5B83\u73ED\u7EC4\u8FDB\u884C\u65BD\u5DE5\uFF0C\u5176\u8D39\u7528\u6309\u5B9E\u9645\u53D1\u751F\u7684\u8D39\u7528\u53E6\u52A0\u200215\u2002\uFF05\u7F5A\u6B3E\u5728\u652F\u4ED8\u4E59\u65B9\u8FDB\u5EA6\u6B3E\u65F6\u6263\u9664\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'8\u3001\u4E59\u65B9\u8FDD\u7EA6\u540E\uFF0C\u5982\u7532\u65B9\u8981\u6C42\u4E59\u65B9\u6539\u6B63\uFF0C\u800C\u4E59\u65B9\u6CA1\u6709\u5728\u7532\u65B9\u8981\u6C42\u671F\u9650\u5185\u53CA\u65F6\u6539\u6B63\uFF0C\u5219\u7532\u65B9\u6709\u6743\u8981\u6C42\u4E59\u65B9\u9000\u573A\uFF0C\u4E14\u4E59\u65B9\u5FC5\u987B\u5728\u7532\u65B9\u8981\u6C42\u7684\u671F\u9650\u5185\u9000\u573A\uFF1B\u5982\u5728\u4E0A\u8FF0\u671F\u9650\u5185\u4E59\u65B9\u6CA1\u6709\u9000\u573A\uFF0C\u4E59\u65B9\u5E94\u5411\u7532\u65B9\u652F\u4ED8\u5408\u540C\u603B\u989D\u7684 2% \u4F5C\u4E3A\u8FDD\u7EA6\u91D1\u3002\u7532\u65B9\u6709\u6743\u4ECE\u4E59\u65B9\u7684\u5DE5\u7A0B\u6B3E\u6216\u5C65\u7EA6\u4FDD\u8BC1\u91D1\u91CC\u6263\u9664\u3002'
					)
				)
			);
		}
	}]);

	return ContractPunishment;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = ContractPunishment;

/***/ }),

/***/ 1986:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _utils = __webpack_require__(89);

var utils = _interopRequireWildcard(_utils);

var _uuid = __webpack_require__(79);

var _MyUploadNew = __webpack_require__(1987);

var _MyUploadNew2 = _interopRequireDefault(_MyUploadNew);

var _download = __webpack_require__(68);

var _api = __webpack_require__(30);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件
                                                                                                                                                                                                                             * */


var TextArea = _antd.Input.TextArea;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

/*自定义编辑组件*/

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {
			editing: true, //false,
			userIds: []
		}, _this.toggleEdit = function () {
			var editing = !_this.state.editing;
			_this.setState({ editing: editing }, function () {
				if (editing) {
					_this.input.focus();
				}
			});
		}, _this.save = function (e) {
			var _this$props = _this.props,
			    record = _this$props.record,
			    handleSave = _this$props.handleSave;

			_this.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this.saveDate = function (date, dateString) {
			var _this$props2 = _this.props,
			    record = _this$props2.record,
			    handleSave = _this$props2.handleSave;

			_this.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('beginTime')) {
					values["beginTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["endTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this.saveDate2 = function (date, dateString) {
			var _this$props3 = _this.props,
			    record = _this$props3.record,
			    handleSave = _this$props3.handleSave;

			_this.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('endTime')) {
					values["endTime"] = (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
				}
				delete values["beginTime"];
				handleSave(_extends({}, record, values));
			});
		}, _this.handleRemoveItem = function (id) {
			var handleDelete = _this.props.handleDelete;

			handleDelete(id);
		}, _this.onBlur = function () {
			//this.toggleEdit();
		}, _this.convertHttp2Https = function (url) {
			var fileUrl = url;
			if (fileUrl.indexOf("http://") !== -1) {
				fileUrl = 'https://' + fileUrl.split('http://')[1];
			}
			fileUrl = decodeURIComponent(fileUrl.split('?')[0]);
			return fileUrl;
		}, _this.handleAttment = function (arr, record) {
			var es = arr.map(function (item, index) {
				return Object.assign({}, {
					"mainId": record.id,
					"orders": index,
					"name": item.name,
					"fileSize": item.fileSize,
					"createTime": (0, _moment2.default)(item.createTime).valueOf(),
					"fileUrl": _this.convertHttp2Https(item.fileUrl),
					"fileType": item.fileType,
					"category": 0
				});
			});

			_this.props.handleAttmentsAdd({ es: es, mainId: record.id });
		}, _this.renderCell = function (form) {
			_this.form = form;
			var _this$props4 = _this.props,
			    children = _this$props4.children,
			    dataIndex = _this$props4.dataIndex,
			    record = _this$props4.record,
			    title = _this$props4.title,
			    handleDelete = _this$props4.handleDelete,
			    ossData = _this$props4.ossData;
			var editing = _this.state.editing;

			if (dataIndex == 'name') {
				return editing && record['canDel'] === 1 ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: true,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ className: 'w clearfix' },
						_react2.default.createElement(_antd.Input, {
							style: {
								float: 'right',
								width: 'calc(100%)'
							},
							defaultValue: record[dataIndex],
							ref: function ref(node) {
								return _this.input = node;
							}
							//onChange={this.save}
							, onPressEnter: _this.save,
							onBlur: _this.save
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						style: {
							float: 'right',
							width: 'calc(100%)',
							minHeight: '31px'
						}
					},
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "2px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif",
								display: record['isMust'] == 1 ? "inline" : "none"
							} },
						'*'
					),
					children
				);
			} else if (dataIndex == 'caozuo') {
				return _react2.default.createElement(
					'div',
					{ style: { display: 'flex', alignItems: 'center' } },
					record['key'] >= 2 ? record["canDel"] == 1 ? _react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								_this.handleRemoveItem('' + record.id);
							} },
						_react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' })
					) : null : null,
					_react2.default.createElement(_MyUploadNew2.default, {
						saveAttachment: function saveAttachment(arr) {
							_this.handleAttment(arr, record);
						},
						disabled: false,
						multiple: true,
						listType: 'text',
						ossData: mobx.toJS(ossData),
						fileList: [],
						journalType: 'journal'
					})
				);
			} else if (dataIndex == 'templates') {
				return _react2.default.createElement(
					'div',
					{ style: { display: 'flex', alignItems: 'center' } },
					_react2.default.createElement('img', { style: { width: '33px', heigth: '33px', cursor: 'pointer' }, src: './images/delivery/u2608.png' }),
					_react2.default.createElement(
						_antd.Button,
						{ type: 'link' },
						'\u6A21\u677F\u4E0B\u8F7D'
					)
				);
			} else if (dataIndex == 'cases') {
				return _react2.default.createElement(
					'div',
					{ style: { display: 'flex', alignItems: 'center' } },
					_react2.default.createElement('img', { style: { width: '33px', heigth: '33px', cursor: 'pointer' }, src: './images/delivery/u2608.png' }),
					_react2.default.createElement(
						_antd.Button,
						{ type: 'link' },
						'\u6848\u4F8B\u4E0B\u8F7D'
					)
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + '\u662F\u5FC5\u8F93'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : record[dataIndex]
					})(_react2.default.createElement(_antd.Input, {
						ref: function ref(node) {
							return _this.input = node;
						},
						onPressEnter: _this.save,
						onBlur: _this.save,
						placeholder: '\u8BF7\u8F93\u5165'
					}))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { minHeight: '31px' },
						onClick: _this.toggleEdit
					},
					record[dataIndex] == "" || record[dataIndex] == null ? "--" : record[dataIndex]
				);
			}
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}
	//日期格式保存


	// 附件


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

/*
* 编辑table
* */


var EditableTableUpload = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(EditableTableUpload, _React$Component2);

	function EditableTableUpload(props) {
		var _this3 = this;

		_classCallCheck(this, EditableTableUpload);

		var _this2 = _possibleConstructorReturn(this, (EditableTableUpload.__proto__ || Object.getPrototypeOf(EditableTableUpload)).call(this, props));

		_this2.handleDelete = function (id) {
			var taskDetail = _this2.store.taskDetail;

			_this2.store.delEnclosureMain({ "id": id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this2.props.saveData();
				} else {
					_antd.message.error("删除失败");
				}
			});
		};

		_this2.handleAdd = function () {
			var _this2$state = _this2.state,
			    dataSource = _this2$state.dataSource,
			    primaryData = _this2$state.primaryData,
			    count = _this2$state.count;

			var newData = Object.assign(primaryData, { key: count, id: "!" + (0, _uuid.v4)() });
			// const newData = Object.assign(primaryData, {key: count});
			_this2.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			}, function () {
				// this.props.saveData(this.state.dataSource);
			});
			_this2.props.saveItem(newData);
		};

		_this2.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this2.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			console.log('newdata==>', newData);
			_this2.setState({ dataSource: newData }, function () {
				// 更新保存数据
				// this.props.saveData(this.state.dataSource);
			});
			_this2.props.saveItem(mobx.toJS(newData)[index]);
		};

		_this2.handleAttmentsAdd = function (params) {

			_this2.store.saveEnclosureItemList(params).then(function (res) {
				_this2.props.saveData();
			});
		};

		_this2.formatTC = function () {};

		_this2.showText = function (text, numSub) {
			if (text == null) {
				return "";
			}
			if (text.length > numSub) {
				return text.substring(0, numSub - 1) + "...";
			}
			return text;
		};

		_this2.trans = function (file) {
			var src = void 0;
			if (/\.(doc|docx)$/.test(file)) {
				src = './images/delivery/share_word.png';
			} else if (/\.(xls|xlsx)$/.test(file)) {
				src = './images/delivery/share_excel.png';
			} else if (/\.(pdf)$/.test(file)) {
				src = './images/delivery/share_pdf.png';
			} else if (/\.(zip|rar)$/.test(file)) {
				src = './images/delivery/share_zip.png';
			} else if (/\.(ppt|pptx)$/.test(file)) {
				src = './images/delivery/share_ppt.png';
			} else if (/\.(mp4|rmvb|avi|ts)$/.test(file)) {
				src = './images/delivery/share_vodie.png';
			} else if (/\.(exe)$/.test(file)) {
				src = './images/delivery/exe_default.jpg';
			} else if (/\.(bmp|jpg|png|gif|jpeg|webp)$/.test(file)) {
				src = './images/delivery/share_png.png';
			} else {
				src = './images/delivery/share_other.png';
			}
			return src;
		};

		_this2.downloadUrl = function (item) {
			var taskDetail = _this2.store.taskDetail;

			if (taskDetail.state === 0) {
				_this2.props.changeTaskStepState({ "taskId": taskDetail.id, "index": 1, "state": 1 });
			}
			var fileUrl = item.fileUrl,
			    name = item.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(fileUrl, name); // 直接下载pdf
			} else {
				_this2.downloadImage(fileUrl, name);
			}
		};

		_this2.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this2.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this2.showModal = function () {
			var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item) {
				var taskDetail, isImage;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								taskDetail = _this2.store.taskDetail;

								if (taskDetail.state === 0) {
									_this2.props.changeTaskStepState({ "taskId": taskDetail.id, "index": 1, "state": 1 });
								}
								isImage = /\.(doc|docx)$/.test(item.fileUrl) || /\.(xls|xlsx)$/.test(item.fileUrl) || /\.(pdf)$/.test(item.fileUrl) || /\.(zip|rar)$/.test(item.fileUrl) || /\.(ppt|pptx)$/.test(item.fileUrl);

								if (isImage) {
									// when true, it's document
									_this2.getDocumentUrl(decodeURIComponent(item.fileUrl)).then(function (res) {
										_this2.setState({
											modalVisible: true,
											modalTitle: item.name,
											fileUrl: res,
											currentItem: item,
											isImageOrDoc: 'doc'
										});
									});
								} else {
									// when false, it's image
									_this2.setState({ isImageOrDoc: 'image', fileUrl: item.fileUrl, modalVisible: true, modalTitle: item.name, currentItem: item });
								}

							case 4:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this3);
			}));

			return function (_x) {
				return _ref3.apply(this, arguments);
			};
		}();

		_this2.handleCancel = function (e) {
			_this2.setState({
				modalVisible: false,
				fileUrl: ''
			});
		};

		_this2.delItem = function (id) {
			_this2.store.delEnclosureItem({ id: id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this2.props.saveData();
				} else {
					_antd.message.error("删除失败");
				}
			});
		};

		_this2.handleRenameOk = function () {
			var _this2$state2 = _this2.state,
			    fileName = _this2$state2.fileName,
			    renameFile = _this2$state2.renameFile,
			    eMainId = _this2$state2.eMainId;

			var newFile = Object.assign(renameFile, { "name": fileName });
			_this2.store.saveEnclosureItem({ e: newFile, mainId: eMainId }).then(function (res) {
				if (res) {
					_antd.message.success("重命名成功");
					_this2.props.saveData();
					_this2.setState({ renameModalVisible: false });
				} else {
					_antd.message.error("重命名失败");
				}
			});
		};

		_this2.handleRenameCancel = function () {
			_this2.setState({
				renameModalVisible: false,
				fileName: '',
				eMainId: null
			});
		};

		_this2.handleRenameChange = function (e) {
			_this2.setState({ fileName: e.target.value });
		};

		_this2.showRenameModal = function (item, mainId) {
			_this2.setState({ renameModalVisible: true, renameFile: item, fileName: item.name, eMainId: mainId });
		};

		_this2.store = _this2.props.store;
		_this2.state = {
			dataSource: [], // 任务数据源
			count: 0, // table的key
			primaryData: {
				"id": "",
				"name": "",
				"nameList": "",
				"ownerList": "",
				"fileSizeList": "",
				"createTimeList": "",
				"templates": [],
				"cases": []
			}, // 新增任务数据
			expandedKeys: [], // 折叠
			keys: [], // 折叠
			modalVisible: false,
			renameModalVisible: false,
			modalTitle: '',
			fileUrl: "",
			fileName: "",
			eMainId: null,
			renameFile: null,
			currentItem: null,
			isImageOrDoc: 'doc'
		};
		return _this2;
	}

	_createClass(EditableTableUpload, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			if (nextProps.dataSource != this.props.dataSource) {
				this.setState({
					dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map(function (item, index) {
						return Object.assign(item, { key: index });
					}),
					count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,
					primaryData: Object.assign({}, {
						"id": "",
						"name": "",
						"nameList": "",
						"ownerList": "",
						"fileSizeList": "",
						"createTimeList": "",
						"templates": [],
						"cases": []
					}) // 新增任务数据
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.setState({
				dataSource: this.props.dataSource === undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map(function (item, index) {
					return Object.assign(item, { "key": index });
				}),
				count: this.props.dataSource === undefined || this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,
				primaryData: Object.assign({}, {
					"id": "",
					"name": "",
					"nameList": "",
					"ownerList": "",
					"fileSizeList": "",
					"createTimeList": "",
					"templates": [],
					"cases": []
				}), // 新增任务数据
				expandedKeys: [], // 折叠
				keys: [], // 折叠
				subtasks: []
			});
		}
	}, {
		key: 'componentWillUnMount',
		value: function componentWillUnMount() {}

		// 删除


		// 新增


		// 保存


		//附件新增


		// 手动下载


		// 直接下载

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    dataSource = _state.dataSource,
			    expandedKeys = _state.expandedKeys,
			    modalVisible = _state.modalVisible,
			    modalTitle = _state.modalTitle,
			    currentItem = _state.currentItem,
			    isImageOrDoc = _state.isImageOrDoc,
			    fileUrl = _state.fileUrl,
			    renameModalVisible = _state.renameModalVisible,
			    fileName = _state.fileName,
			    renameFile = _state.renameFile;
			var disabled = this.props.disabled;

			var modalHeader = _react2.default.createElement(
				_antd.Row,
				null,
				_react2.default.createElement(
					_antd.Col,
					{ span: 12, className: 'leftLabelHeader' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							null,
							modalTitle
						)
					)
				),
				_react2.default.createElement(
					_antd.Col,
					{ span: 12, className: 'rightLabelHeader' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							_antd.Button,
							{ type: 'default', icon: 'download', onClick: function onClick(e) {
									_this4.downloadUrl(currentItem, e);
								} },
							'\u4E0B\u8F7D'
						)
					)
				)
			);
			var isChaijie = expandedKeys.length > 0;
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columnEle = [{
				title: '序号', dataIndex: 'keyIndex', align: 'center', width: "5%"
			}, {
				title: '附件项目', dataIndex: 'name', align: 'left', editable: !disabled && !isChaijie
			}, {
				title: '附件名称', dataIndex: 'nameList', align: 'left',
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'left' },
								className: 'pr' },
							_react2.default.createElement(
								'div',
								{ style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									null,
									_react2.default.createElement('img', { style: { verticalAlign: 'middle', cursor: 'pointer', padding: 0 }, width: '25', height: '25 ', src: _this4.trans(item.name), alt: '' }),
									_react2.default.createElement(
										_antd.Button,
										{ style: { padding: '5px' }, onClick: function onClick() {
												_this4.showModal(item);
											}, title: item.name, type: 'link' },
										disabled ? _this4.showText(item.name, 55) : _this4.showText(item.name, 20)
									)
								),
								_react2.default.createElement(
									'div',
									null,
									disabled ? _react2.default.createElement(
										_antd.Button,
										{ onClick: function onClick() {
												_this4.downloadUrl(item);
											}, type: 'link' },
										'\u4E0B\u8F7D'
									) : _react2.default.createElement('img', { onClick: function onClick() {
											_this4.downloadUrl(item);
										}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/download.png', title: '\u4E0B\u8F7D', alt: '\u4E0B\u8F7D' }),
									disabled ? "" : _react2.default.createElement(
										'span',
										null,
										_react2.default.createElement(
											_antd.Popconfirm,
											{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
													_this4.delItem(item.id);
												} },
											_react2.default.createElement('img', { style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/delete.png', title: '\u5220\u9664', alt: '\u5220\u9664' })
										),
										_react2.default.createElement('img', { onClick: function onClick() {
												_this4.showRenameModal(item, record['id']);
											}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/rename.png', title: '\u91CD\u547D\u540D', alt: '\u91CD\u547D\u540D' })
									)
								)
							)
						);
					}) : _react2.default.createElement('span', null);
				}
			}, {
				title: '大小',
				dataIndex: 'fileSizeList',
				width: '5%',
				align: "center",
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'center' },
								className: 'pr' },
							(0, _utils.converSize)(item.fileSize)
						);
					}) : _react2.default.createElement('span', null);
				}
			}, {
				title: '上传人',
				dataIndex: 'ownerNameList',
				width: '5%',
				align: "center",
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'center' },
								className: 'pr' },
							item.ownerName
						);
					}) : _react2.default.createElement('span', null);
				}
			}, {
				title: '上传时间',
				dataIndex: 'createTimeList',
				width: '150px',
				align: "center",
				render: function render(text, record) {
					return record['enclosureItems'] !== undefined && record['enclosureItems'].length > 0 ? record['enclosureItems'].map(function (item, index) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								style: { width: '100%', height: 'auto', lineHeight: '30px', textAlign: 'center' },
								className: 'pr' },
							(0, _moment2.default)(item.createTime).format("YYYY-MM-DD")
						);
					}) : _react2.default.createElement('span', null);
				}
			}];
			if (!disabled) {
				columnEle = [{
					title: '操作', dataIndex: 'caozuo', align: 'center', width: '5%', editable: !disabled,
					render: function render(text, record) {
						//rendcell 实现操作业务
						return _react2.default.createElement(
							'div',
							null,
							_react2.default.createElement('img', { style: { width: '19px', heigth: '19px', cursor: 'pointer' }, src: './images/delivery/u1226.png' }),
							_react2.default.createElement(
								_antd.Button,
								{ type: 'link' },
								'\u4E0A\u4F20'
							)
						);
					}
				}].concat(columnEle).concat([{
					title: '模板',
					dataIndex: 'templates',
					align: "center",
					width: '10%',
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								className: 'pr' },
							record['canDel'] === 0 ? record["templates"].length > 0 ? record["templates"].map(function (item, index) {
								return _react2.default.createElement(
									'div',
									{ style: { display: "flex" } },
									_react2.default.createElement('img', { onClick: function onClick() {
											_this4.showModal(item);
										}, title: item.name, style: { "width": "33px", "height": "33px", padding: '0' }, src: './images/delivery/u2608.png' }),
									' ',
									_react2.default.createElement(
										_antd.Button,
										{ style: { padding: '0' }, onClick: function onClick() {
												_this4.downloadUrl(item);
											}, title: item.name, type: 'link' },
										_this4.showText(item.name, 10)
									)
								);
							}) : _react2.default.createElement(
								'div',
								{ style: { display: "flex" } },
								_react2.default.createElement('img', { style: { "width": "33px", "height": "33px" }, src: './images/delivery/u2607.png' }),
								' ',
								_react2.default.createElement(
									_antd.Button,
									{ style: { color: "rgb(127,127,127)", padding: '0' }, type: 'link' },
									'\u6682\u65E0\u6A21\u677F'
								)
							) : _react2.default.createElement('span', null)
						);
					}
				}, {
					title: '案例',
					dataIndex: 'cases',
					align: "center",
					width: '10%',
					render: function render(text, record) {
						return _react2.default.createElement(
							'div',
							{
								id: '' + record.id,
								className: 'pr' },
							record['canDel'] === 0 ? record["cases"].length > 0 ? record["cases"].map(function (item, index) {
								return _react2.default.createElement(
									'div',
									{ style: { display: "flex" } },
									_react2.default.createElement('img', { onClick: function onClick() {
											_this4.showModal(item);
										}, style: { "width": "33px", "height": "33px", padding: '0' }, title: item.name, src: './images/delivery/u2608.png' }),
									' ',
									_react2.default.createElement(
										_antd.Button,
										{ style: { padding: '0' }, onClick: function onClick() {
												_this4.downloadUrl(item);
											}, title: item.name, type: 'link' },
										_this4.showText(item.name, 8)
									)
								);
							}) : _react2.default.createElement(
								'div',
								{ style: { display: "flex" } },
								_react2.default.createElement('img', { style: { "width": "33px", "height": "33px", padding: '0' }, src: './images/delivery/u2607.png' }),
								' ',
								_react2.default.createElement(
									_antd.Button,
									{ style: { color: "rgb(127,127,127)", padding: '0' }, type: 'link' },
									'\u6682\u65E0\u6848\u4F8B'
								)
							) : _react2.default.createElement('span', null)
						);
					}
				}]);
			}
			var columns = columnEle.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleDelete: _this4.handleDelete,
							ossData: _this4.store.ossData,
							handleAttmentsAdd: _this4.handleAttmentsAdd
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(_antd.Table, {
					components: components,
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					className: 'expand_table bpm_table',
					bordered: false,
					dataSource: dataSource,
					columns: columns,
					pagination: false,
					size: "middle",
					rowKey: function rowKey(row) {
						return row.id;
					}
				}),
				disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '22px' },
					type: 'plus-circle' }),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: modalHeader,
						visible: modalVisible,
						onCancel: this.handleCancel,
						footer: null,
						style: { top: 70, height: 'calc(100vh - 150px)', minWidth: '1000px' },
						bodyStyle: { padding: 0 },
						width: 'calc(100% - 400px)'
					},
					_react2.default.createElement(
						'div',
						{ style: isImageOrDoc === 'doc' ? { height: 'calc(100vh - 200px)' } : { height: 'calc(100vh - 200px)', textAlign: 'center', backgroundColor: '#000', paddingTop: '40px' } },
						isImageOrDoc === 'doc' ? _react2.default.createElement('iframe', {
							src: fileUrl,
							width: '100%', height: '100%', frameBorder: '1', style: { minHeight: '600px' } }) : _react2.default.createElement('img', { src: fileUrl, height: '600px', style: { minHeight: '600px' }, alt: '' })
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: "文件重命名",
						visible: renameModalVisible,
						onOk: this.handleRenameOk,
						onCancel: this.handleRenameCancel,
						style: { top: 70, height: '300px', minWidth: '600px' },
						bodyStyle: { padding: 0 }
					},
					_react2.default.createElement(
						'div',
						{ style: { display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100px' } },
						_react2.default.createElement(_antd.Input, {
							style: {
								width: '500px'

							},
							value: fileName,
							onChange: this.handleRenameChange
						})
					)
				)
			);
		}
	}]);

	return EditableTableUpload;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableUpload;

/***/ }),

/***/ 1987:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*
                                                                                                                                                                                                                                                                  * 大文件上传组件 antd upload 支持拖拽排序
                                                                                                                                                                                                                                                                  * dangwei
                                                                                                                                                                                                                                                                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _mobxReact = __webpack_require__(22);

var _reactSortableHoc = __webpack_require__(705);

var _UploadList = __webpack_require__(707);

var _UploadList2 = _interopRequireDefault(_UploadList);

__webpack_require__(2169);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ifcancel = false;
var abortCheckpoint = void 0;

var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT,
		timeout: 5 * 60 * 1000
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file, option) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file, option).then(function (data) {
			resolve(data);
		}).catch(function (error) {
			reject(error);
		});
	});
};

var itemStyle = {
	width: 104,
	height: 104,
	margin: 4,
	cursor: 'grab',
	zIndex: '1000'
};
var SortableItem = (0, _reactSortableHoc.SortableElement)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: itemStyle },
		_react2.default.createElement(_UploadList2.default, {
			locale: { previewFile: '预览', removeFile: '删除', downloadFile: "下载" },
			listType: params.props.listType,
			onPreview: params.onPreview,
			onDownload: params.onDownload,
			onRemove: params.onRemove,
			items: [params.item],
			showDownloadIcon: true
		})
	);
});
var listStyle = {
	display: 'flex',
	flexWrap: 'wrap',
	maxWidth: '100%'
};
var SortableList = (0, _reactSortableHoc.SortableContainer)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: listStyle },
		params.items.map(function (item, index) {
			return _react2.default.createElement(SortableItem, {
				key: '' + item.uid,
				index: index,
				item: item,
				props: params.props,
				onPreview: params.props.onPreview,
				onDownload: params.props.onDownload,
				onRemove: params.props.onRemove
			});
		}),
		_react2.default.createElement(
			_antd.Upload,
			_extends({}, params.props, {
				className: 'my_upload_normal',
				showUploadList: false
			}),
			params.uploadButton
		),
		params.cancelButton
	);
});

var MyUploadNew = (_dec = (0, _mobxReact.inject)('appStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MyUploadNew, _React$Component);

	function MyUploadNew(props) {
		var _this2 = this;

		_classCallCheck(this, MyUploadNew);

		var _this = _possibleConstructorReturn(this, (MyUploadNew.__proto__ || Object.getPrototypeOf(MyUploadNew)).call(this, props));

		_this.init = function () {
			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this.state.token));
					_this.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						}),
						expiration: str.expiration
					});
				}
			});
		};

		_this.cancelUploadFileToAliyun = function (params) {
			(0, _api.requestPost)('cancelUploadFileToAliyun', _config2.default.journal.cancelUploadFileToAliyun, _journal2.default.journal.cancelUploadFileToAliyun, { uploadId: params.uploadId, key: params.name }).then(function (res) {
				if (res == true) {
					_antd.message.success("取消上传成功");
				}
			});
		};

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				fileUrl: url,
				fileId: null,
				fileName: file.name,
				fileSize: file.size,
				fileType: file.type,
				createTime: file.lastModifiedDate,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		};

		_this.beforeUpload = function (file) {

			// 上传凭证失效，重查
			var expiration = _this.state.expiration;

			var expire = new Date(expiration).getTime();
			if (expiration != "" && expire < Date.now()) {
				_this.init();
			}

			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx, .dwg"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}

			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}

			_this.setState({
				loading: true
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = true; // 记录一次
				}
			});

			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file, {
					parallel: 4,
					partSize: 1024 * 1024,
					progress: function progress(p, cpt, res) {
						abortCheckpoint = cpt;
						//console.log(p, cpt, res, '进度');
					}
				}).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {

					if (error.name === 'abort') {
						// handle abort

					} else {
						//message.error("文件上传失败");
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});
						return false;
					}
				});
			};

			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										// 去掉url的问号
										if (filePath.indexOf("?") != -1) {
											filePath = filePath.split("?")[0];
										}
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.cancel = function () {
			ifcancel = true;
			var _abortCheckpoint = abortCheckpoint,
			    uploadId = _abortCheckpoint.uploadId,
			    name = _abortCheckpoint.name;

			client(_this).cancel();
			if (abortCheckpoint && uploadId != undefined) {
				_this.cancelUploadFileToAliyun({ name: name, uploadId: uploadId });
			}
			_this.setState({
				loading: false
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = false; // 清楚记录
				}
			});
		};

		_this.onSortEnd = function (_ref2) {
			var oldIndex = _ref2.oldIndex,
			    newIndex = _ref2.newIndex;
			var fileList = _this.state.fileList;

			_this.props.saveAttachment((0, _reactSortableHoc.arrayMove)(fileList, oldIndex, newIndex));
		};

		_this.onRemove = function (file) {
			var fileList = _this.state.fileList;

			var newFileList = fileList.filter(function (item) {
				return item.uid !== file.uid;
			});
			_this.props.saveAttachment(newFileList);
		};

		_this.store = _this.props.appStore;
		_this.state = {
			fileList: _this.props.fileList,
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0,
			expiration: "" // 过期时间
		};
		return _this;
	}

	_createClass(MyUploadNew, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (this.props.journalType) {
				this.store.journal = false; // 记录一次
			}
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}

			// 访问后端，获取请求上传凭证
			this.init();
		}

		// 取消阿里云上传


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx, .dwg"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "text",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				onRemove: this.onRemove
			};
			// const uploadButton = (
			// 	<div className="pr">
			// 		<Icon type={loading ? "loading" : "plus"}/>
			// 		{loading ? <div className="ant-upload-text">上传中</div> : null}
			// 	</div>
			// );
			var uploadButton = _react2.default.createElement(
				_antd.Button,
				{ type: 'link' },
				'\u4E0A\u4F20'
			);
			var cancelButton = loading ? _react2.default.createElement(_antd.Icon, { type: 'stop',
				title: '\u53D6\u6D88\u4E0A\u4F20',
				style: {
					fontSize: '15px',
					color: '#1890ff'
				},
				onClick: this.cancel }) : null;
			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(SortableList, {
					distance: 1,
					items: fileList,
					onSortEnd: this.onSortEnd,
					axis: 'xy',
					helperClass: 'SortableHelper',
					props: props,
					uploadButton: disabled ? "" : uploadButton,
					cancelButton: cancelButton
				}),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage,
						alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this3.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUploadNew;
}(_react2.default.Component)) || _class) || _class);
exports.default = MyUploadNew;

/***/ }),

/***/ 1988:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交底施工内容
                  *qiufh@bocspace.com
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

__webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SafetyContent = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(SafetyContent, _React$Component);

	function SafetyContent(props) {
		_classCallCheck(this, SafetyContent);

		var _this = _possibleConstructorReturn(this, (SafetyContent.__proto__ || Object.getPrototypeOf(SafetyContent)).call(this, props));

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null
		};
		return _this;
	}

	_createClass(SafetyContent, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'render',
		value: function render() {
			_objectDestructuringEmpty(this.props);

			_objectDestructuringEmpty(this.state);

			_objectDestructuringEmpty(this.store);

			return _react2.default.createElement(
				'div',
				{ className: 'safety-content' },
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u4E00\u3001\u64CD\u4F5C\u4EBA\u5458\u5B89\u5168\u4FDD\u62A4'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u51E1\u4ECE\u4E8B\u5DE5\u7A0B\u65BD\u5DE5\u7684\u64CD\u4F5C\u4EBA\u5458\uFF0C\u5FC5\u987B\u6301\u8BC1\u4E0A\u5C97\uFF0C\u5728\u8FDB\u5165\u65BD\u5DE5\u73B0\u573A\u524D\uFF0C\u5FC5\u987B\u7ECF\u8FC7\u4E09\u7EA7\u5B89\u5168\u6559\u80B2\uFF0C\u5E76\u7ECF\u8003\u8BD5\u5408\u683C\u540E\u65B9\u53EF\u4E0A\u5C97\u64CD\u4F5C\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u64CD\u4F5C\u4EBA\u5458\u5E94\u7262\u56FA\u6811\u7ACB\u5B89\u5168\u7B2C\u4E00\u3001\u9884\u9632\u4E3A\u4E3B\u7684\u601D\u60F3\uFF0C\u5F3A\u5316\u5B89\u5168\u610F\u8BC6\uFF0C\u6491\u63E1\u5B89\u5168\u77E5\u8BC6\uFF0C\u4E25\u683C\u6267\u884C\u65BD\u5DE5\u64CD\u4F5C\u5B89\u5168\u89C4\u5B9A\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\u3001\u8FDB\u5165\u65BD\u5DE5\u73B0\u573A\u5FC5\u987B\u6309\u8981\u6C42\u6234\u597D\u5B89\u5168\u5E3D\uFF1B\u4E25\u7981\u7A7F\u62D6\u978B\u6216\u8D64\u811A\u8FDB\u5165\u65BD\u5DE5\u73B0\u573A\uFF1B\u4E25\u7981\u4ECE\u9AD8\u5904\u629B\u6254\u7269\u54C1\u3001\u91CE\u86EE\u65BD\u5DE5\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\u3001\u4E0A\u5C97\u4F5C\u4E1A\u524D\uFF0C\u4E25\u7981\u559D\u6D12\uFF1B\u5438\u70DF\u5E94\u5230\u6307\u5B9A\u7684\u5438\u70DF\u5BA4\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'5\u3001\u65BD\u5DE5\u64CD\u4F5C\u5E94\u6309\u8981\u6C42\u6B63\u786E\u914D\u6234\u5B89\u5168\u6709\u6548\u7684\u4E2A\u4EBA\u4FDD\u62A4\u7528\u54C1\uFF0C\u5254\u51FF\u69FD\u3001\u6D1E\u5E94\u6234\u4E0A\u9632\u62A4\u773C\u955C\u548C\u624B\u5957\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'6\u3001\u9AD8\u7A7A\u4F5C\u4E1A\u5FC5\u987B\u6309\u8981\u6C42\u7CFB\u597D\u5B89\u5168\u5E26\uFF0C\u8863\u7740\u7075\u4FBF\uFF0C\u4E0D\u5F97\u7A7F\u786C\u5E95\u548C\u5E26\u9489\u6613\u6ED1\u7684\u978B\uFF1B\u9AD8\u7A7A\u4F5C\u4E1A\u7684\u67B6\u5B50\u8D85\u8FC72\u7C73\u65F6\uFF0C\u5E94\u7531\u4E13\u804C\u5B89\u5168\u5458\u786E\u8BA4\u6709\u826F\u597D\u7684\u5B89\u5168\u7CFB\u6570\u540E\uFF0C\u624D\u80FD\u4E0A\u4EBA\u64CD\u4F5C\uFF0C\uFF08\u67B6\u5B50\u5E94\u7531\u4E13\u4E1A\u67B6\u5B50\u642D\u8BBE\uFF09\uFF0C\u65BD\u5DE5\u65F6\u9884\u7559\u7684\u6D1E\u53E3\u8981\u53CA\u65F6\u5C01\u5835\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'7\u3001\u60A3\u6709\u5FC3\u810F\u75C5\u3001\u9AD8\u8840\u538B\u3001\u6655\u75C5\u6216\u6709\u8FC7\u7A81\u53D1\u6027\u75C5\u75C7\u7684\u4EBA\u5458\uFF0C\u4E25\u7981\u8E6C\u9AD8\u4F5C\u4E1A\uFF0C\u4E0D\u5F97\u9760\u8FD1\u697C\u68AF\u53E3\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'8\u3001\u4F7F\u7528\u5207\u5272\u673A\u7B49\u5E26\u6709\u8F6C\u52A8\u9F7F\u8F6E\u548C\u76AE\u5E26\u8F6E\u7684\u7535\u52A8\u673A\u5177\u65F6\uFF0C\u5E94\u6234\u4E0A\u9632\u62A4\u773C\u955C\uFF0C\u9632\u6B62\u94C1\u6E23\u5F39\u5165\u773C\u5185\uFF1B\u5E76\u7981\u6B62\u6234\u624B\u5957\uFF0C\u9632\u6B62\u624B\u5957\u5165\u9F7F\u8F6E\u6216\u76AE\u5E26\u8F6E\u5185\u9020\u6210\u4F24\u6B8B\u3002\u624B\u6301\u7535\u52A8\u5DE5\u5177\uFF0C\u4F7F\u7528\u65F6\u8981\u6234\u7EDD\u7F18\u624B\u5957\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u4E8C\u3001\u64CD\u4F5C\u5B89\u5168\u63AA\u65BD'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u7528\u952F\u5F13\u3001\u7802\u8F6E\u5207\u5272\u673A\u5207\u5272\u7BA1\u9053\u65F6\uFF0C\u8981\u57AB\u5E73\uFF0C\u5361\u7262\u7528\u529B\u4E0D\u5F97\u8FC7\u731B\uFF0C\u7802\u8F6E\u7247\u5E94\u5B8C\u597D\uFF0C\u64CD\u4F5C\u65F6\u5E94\u7AD9\u5728\u4FA7\u9762\uFF0C\u7981\u6B62\u5728\u7802\u8F6E\u5207\u5272\u673A\u4E0A\u6253\u78E8\u4EFB\u4F55\u7269\u54C1\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u7528\u7535\u9524\u6216\u9524\u6253\u900F\u773C\u65F6\uFF0C\u677F\u4E0B\uFF0C\u5899\u540E\uFF0C\u4E0D\u5F97\u6709\u4EBA\u9760\u8FD1\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\u3001\u4F7F\u7528\u7802\u8F6E\u952F\u65F6\uFF0C\u4E25\u7981\u5B89\u88C5\u5012\u987A\u5F00\u5173\u3002\u65CB\u8F6C\u65B9\u5411\u7981\u6B62\u6B63\u5BF9\u901A\u9053\u53CA\u6613\u71C3\u7269\u54C1\uFF0C\u64CD\u4F5C\u8005\u5E94\u7AD9\u5728\u7802\u8F6E\u952F\u7684\u4FA7\u9762\u3002\u64CD\u4F5C\u65F6\u5E94\u6234\u597D\u9632\u62A4\u773C\u955C\u4EE5\u9632\u4F24\u773C\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\u3001\u4F7F\u7528\u4EBA\u5B57\u68AF\u5B50\u65F6\uFF0C\u5E94\u5148\u68C0\u67E5\u6709\u65E0\u635F\u7F3A\uFF0C\u6813\u597D\u9632\u6ED1\u7EF3\uFF0C\u7981\u6B62\u4E24\u4EBA\u5728\u540C\u4E00\u68AF\u5B50\u4E0A\u4F5C\u4E1A\uFF0C\u5E76\u4E0D\u5F97\u8BA9\u5728\u6700\u9AD8\u4E00\u6B65\u64CD\u4F5C\uFF0C\u9AD8\u7A7A\u4F5C\u4E1A\u5FC5\u987B\u7CFB\u597D\u5B89\u5168\u5E26\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'5\u3001\u65BD\u5DE5\u4E2D\u642C\u8FD0\u7BA1\u9053\u3001\u8BBE\u5907\u548C\u673A\u5177\uFF0C\u5E94\u8BBE\u4E13\u4EBA\u6307\u6325\uFF0C\u540C\u8D77\u540C\u843D\uFF0C\u6B65\u8C03\u4E00\u81F4\uFF0C\u9632\u6B62\u56E0\u53D7\u529B\u4E0D\u5747\u6216\u4E0D\u534F\u8C03\u800C\u9020\u6210\u4F24\u4EBA\u6216\u635F\u5BB3\u673A\u5177\u8BBE\u5907\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'6\u3001\u5982\u5DE5\u5E8F\u4EA4\u53C9\uFF0C\u5E94\u76F8\u4E92\u6253\u597D\u62DB\u547C\uFF0C\u76F8\u4E92\u7167\u5E94\uFF0C\u5E76\u4E14\u6709\u826F\u597D\u7684\u9632\u62A4\u63AA\u65BD\u3002\u4ECE\u4E0B\u5F80\u4E0A\u4F20\u9012\u6750\u6599\u6216\u5DE5\u5177\u3002\u4E0A\u4E0B\u7684\u4EBA\u548C\u7269\u4F53\u4E0D\u5F97\u5728\u4E00\u5782\u76F4\u7EBF\u4E0A\uFF0C\u4E25\u7981\u4E0A\u4E0B\u629B\u6254\u7269\u4EF6\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'7\u3001\u96E8\u5B63\u65BD\u5DE5\u65F6\uFF0C\u7535\u6C14\u8BBE\u5907\u8981\u6709\u9632\u96E8\u9632\u6F6E\u7B49\u63AA\u65BD\uFF0C\u96E8\u540E\u53CA\u65F6\u68C0\u67E5\u7535\u6C14\u8BBE\u5907\uFF0C\u786E\u8BA4\u65E0\u9690\u60A3\u65F6\u65B9\u80FD\u4F7F\u7528\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'8\u3001\u96E8\u5929\u3001\u96E8\u540E\u65BD\u5DE5\u65F6\uFF0C\u8981\u6CE8\u610F\u9053\u8DEF\u9632\u6ED1\uFF0C\u9632\u6B62\u8DCC\u5012\u6454\u4F24\uFF0C\u96F7\u96E8\u5929\u3001\u4E94\u7EA7\u4EE5\u4E0A\u5927\u98CE\u5929\u4E0D\u5728\u5C4B\u9876\u6216\u5BA4\u5916\u4F5C\u4E1A\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'9\u3001\u65BD\u5DE5\u4E2D\u4E0D\u5F97\u968F\u610F\u7FFB\u8D8A\u9633\u53F0\u3001\u95E8\u7A97\u6D1E\u53E3\uFF0C\u9632\u6B62\u5815\u843D\u3002\u65BD\u5DE5\u8FC7\u7A0B\u4E2D\uFF0C\u4E0D\u5F97\u5C06\u624B\u3001\u5934\u4F38\u51FA\u95E8\u7A97\u5916\uFF0C\u4EE5\u9632\u5760\u843D\u7269\u6253\u51FB\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'10\u3001\u6240\u4F7F\u7528\u7684\u624B\u52A8\u5DE5\u5177\u7EDD\u7F18\u826F\u597D\uFF0C\u64CD\u4F5C\u4EBA\u5458\u5FC5\u987B\u4F69\u5E26\u7EDD\u7F18\u624B\u5957\u3002\u7981\u6B62\u65BD\u5DE5\u65E0\u201CCCC\u201D\u4EA7\u54C1\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'11\u3001\u4F7F\u7528\u7802\u8F6E\u673A\u5207\u5272\u65F6\uFF0C\u8981\u5728\u7802\u8F6E\u524D\u97622\u7C73\u5904\u91C7\u7528\u963B\u71C3\u6750\u6599\u8FDB\u884C\u56F4\u6321\uFF0C\u9632\u6B62\u706B\u82B1\u56DB\u6E85'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'12\u3001\u7535\u710A\u673A\u8BBE\u7F6E\u5730\u70B9\u5E94\u9632\u6F6E\u3001\u9632\u96E8\u3001\u9632\u7838\u3002\u7535\u710A\u673A\u7535\u6E90\u7EBF\u4E0D\u80FD\u6709\u63A5\u5934\uFF0C\u4E00\u6B21\u7535\u6E90\u7EBF\u4E0D\u957F\u4E8E3\u7C73\uFF0C\u4E8C\u6B21\u7EBF\u957F\u5EA6\u5E94\u4E0D\u957F\u4E8E15\u7C73\uFF0C\u8981\u53CC\u7EBF\u5230\u4F4D\uFF0C\u4E25\u7981\u501F\u7528\u7ED3\u6784\u94A2\u7B4B\u3001\u94A2\u7BA1\u3001\u91D1\u5C5E\u4EF6\u4F5C\u56DE\u8DEF\u5730\u7EBF\u3002\u710A\u628A\u7EBF\u65E0\u7834\u635F\u3001\u7EDD\u7F18\u826F\u597D\u3002\u64CD\u4F5C\u65F6\u8981\u6E05\u9664\u5468\u56F4\u7684\u6613\u71C3\u3001\u6613\u7206\u7269\u54C1\u3001\u8BBE\u4E13\u4EBA\u770B\u706B\uFF0C\u914D\u5907\u706D\u706B\u5668\u5177\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'13\u3001\u6C14\u710A\u4F5C\u4E1A\u65F6\uFF0C\u6C27\u6C14\u74F6\u3001\u4E59\u7094\u74F6\u95F4\u8DDD\u4E0D\u5C0F\u4E8E10\u7C73\uFF0C\u8DDD\u660E\u706B\u4E0D\u5C0F\u4E8E10\u7C73\u3002\u6E05\u9664\u5468\u56F4\u7684\u6613\u71C3\u3001\u6613\u7206\u7269\u54C1\uFF0C\u8BBE\u4E13\u4EBA\u770B\u706B\uFF0C\u914D\u5907\u706D\u706B\u5668\u5177\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'14\u3001\u6865\u67B6\u5B89\u88C5\u3001\u7535\u7F06\u6577\u8BBE\u3001\u706F\u5177\u5B89\u88C5\u3001\u538B\u63A5\u914D\u7535\u7BB1\u3001\u67DC\u65F6\u63D0\u524D\u505A\u597D\u5FC5\u8981\u7684\u5B89\u5168\u9632\u62A4\u5DE5\u4F5C\uFF0C\u4E25\u7981\u8FDD\u7AE0\u6307\u6325\uFF0C\u8FDD\u7AE0\u4F5C\u4E1A\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'15\u3001\u901A\u7535\u8BD5\u8FD0\u884C\u65F6\uFF0C\u8981\u7EDF\u4E00\u670D\u4ECE\u9879\u76EE\u90E8\u7684\u6307\u6325\uFF0C\u4E25\u7981\u79C1\u81EA\u901A\u7535\u8BD5\u9A8C\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u4E09\u3001\u6750\u6599\u53CA\u8BBE\u5907\u642C\u8FD0\u5B89\u5168\u6CE8\u610F\u4E8B\u9879'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u7528\u8F66\u8F86\u6216\u4EBA\u529B\u8FD0\u8F93\u3001\u6750\u6599\u3001\u8BBE\u5907\u53CA\u5927\u4E2D\u578B\u673A\u5177\u65F6\u8981\u4E13\u4EBA\u6307\u6325\uFF0C\u5E76\u7ED1\u624E\u56FA\u5B9A\u7262\u56FA\u3001\u53EF\u9760\uFF0C\u6240\u8FD0\u7269\u4E0B\u4E0D\u5F97\u6709\u4EBA\u3002\u4EBA\u529B\u642C\u8FD0\u6750\u6599\uFF0C\u8BBE\u5907\u3001\u5927\u4E2D\u578B\u673A\u5177\uFF0C\u8D77\u843D\u8981\u4E00\u81F4\uFF0C\u7528\u6EDA\u6760\u8FD0\u8F93\u3001\u8981\u9632\u6B62\u538B\u811A\uFF0C\u5E76\u4E0D\u51C6\u7528\u624B\u76F4\u63A5\u8C03\u6574\u6EDA\u6760\uFF0C\u7269\u4F53\u6EDA\u52A8\u524D\u65B9\u4E0D\u5F97\u6709\u4EBA\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u540A\u8F66\u540A\u8FD0\u6750\u6599\u3001\u8BBE\u5907\u65F6\u5FC5\u987B\u7ED1\u624E\u7262\u56FA\u3001\u53EF\u9760\uFF0C\u5E94\u9AD8\u4E13\u4EBA\u6307\u6325\uFF1B\u9632\u6B62\u8131\u94A9\uFF0C\u4EFB\u4F55\u4EBA\u4E0D\u5F97\u5728\u9AD8\u540A\u7269\u4E0B\u884C\u8D70\u6216\u65BD\u5DE5\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\u3001\u6750\u6599\u3001\u8BBE\u5907\u3001\u5927\u4E2D\u578B\u673A\u68B0\uFF0C\u5E94\u653E\u5E73\uFF0C\u653E\u7A33\uFF0C\u5806\u653E\u5728\u575A\u5B9E\u7684\u57FA\u7840\u4E0A\uFF0C\u5E76\u7801\u653E\u6574\u9F50\uFF0C\u7262\u56FA\uFF0C\u53EF\u9760\uFF0C\u9632\u6B62\u5012\u584C\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\u3001\u65BD\u5DE5\u4E2D\uFF0C\u642C\u8FD0\u3001\u7BA1\u6750\u3001\u7BB1\u67DC\u3001\u5927\u4E2D\u578B\u673A\u5177\u7B49\u91CD\u6750\u3001\u8BBE\u5907\u3001\u673A\u5177\u3001\u5E94\u8BBE\u4E13\u4EBA\u6307\u6325\uFF0C\u5E94\u540C\u8D77\u3001\u540C\u843D\u3001\u540C\u65F6\u7528\u529B\u3001\u9632\u6B62\u53D7\u529B\u4E0D\u5747\u6216\u4E0D\u534F\u8C03\u800C\u9020\u6210\u4F24\u4EBA\u3002\u4E25\u7981\u8D1F\u91CD\u8DE8\u8D8A\u6C9F\u3001\u69FD\u3001\u4E95\u53E3\u3001\u969C\u788D\u7269\u7B49\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u56DB\u3001\u673A\u68B0\u7535\u5668\u8BBE\u5907\u64CD\u4F5C\u6CE8\u610F\u4E8B\u9879'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\uFF0E\u914D\u7535\u7BB1\u5185\u7684\u7535\u5668\u5143\u5668\u4EF6\u5FC5\u987B\u9F50\u5168\uFF0C\u6F0F\u7535\u7075\u654F\u53EF\u9760\u6709\u6548\uFF0C\u4E25\u7981\u79C1\u81EA\u4E71\u63A5\u7535\u6E90\u7EBF\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\uFF0E\u73B0\u573A\u673A\u68B0\u3001\u7535\u6C14\u8BBE\u5907\u3001\u7167\u660E\u7528\u7535\uFF0C\u5FC5\u987B\u6709\u4E13\u4E1A\u64CD\u4F5C\u8BC1\u7684\u7535\u5DE5\u64CD\u4F5C\uFF0C\u975E\u4E13\u4E1A\u64CD\u4F5C\u4EBA\u5458\u4E0D\u5F97\u4EFB\u610F\u64CD\u4F5C\uFF0C\u673A\u68B0\u3001\u673A\u5177\u3001\u7535\u6C14\u8BBE\u5907\u5FC5\u987B\u6309\u8981\u6C42\u88C5\u6F0F\u7535\u4FDD\u62A4\u5668\uFF0C\u63A5\u5730\uFF0C\u63A5\u96F6\uFF0C\u826F\u597D\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\uFF0E\u5957\u4E1D\u673A\uFF0C\u5207\u5272\u673A\uFF0C\u7535\u710A\u673A\u7B49\u5E26\u7535\u673A\u5177\uFF0C\u4F7F\u7528\u524D\u5FC5\u987B\u5148\u68C0\u67E5\u662F\u5426\u7F3A\u4EF6\uFF0C\u96F6\u4EF6\u662F\u5426\u677E\u52A8\uFF0C\u7EDD\u7F18\u662F\u5426\u826F\u597D\uFF0C\u786E\u4FDD\u673A\u68B0\uFF0C\u8BBE\u5907\u5B8C\u597D\uFF0C\u5B89\u5168\u53EF\u9760\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\uFF0E\u4E0D\u5C5E\u4E8E\u81EA\u5DF1\u6216\u672C\u5DE5\u79CD\u6240\u6709\u7684\u673A\u5177\uFF0C\u4E0D\u5F97\u597D\u5947\u968F\u610F\u52A8\u7528\uFF0C\u4EE5\u9632\u610F\u5916\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'5\uFF0E\u7535\u710A\u673A\u7684\u5916\u58F3\u4EE5\u53CA\u710A\u94B3\u4E0E\u628A\u7EBF\u5FC5\u987B\u7EDD\u7F18\u826F\u597D\u3002\u8FDE\u63A5\u7262\u56FA\uFF0C\u66F4\u6362\u710A\u6761\u5E94\u6234\u4E0A\u7EDD\u7F18\u624B\u5957\uFF0C\u5728\u7A7A\u4E2D\u7535\u710A\u65F6\uFF0C\u4E0D\u5F97\u624B\u6301\u5E26\u7535\u7684\u628A\u7EBF\uFF0C\u628A\u94B3\u3002\u722C\u68AF\u8E6C\u9AD8\uFF0C\u5728\u6F6E\u6E7F\u548C\u6709\u6C34\u5730\u70B9\u4F5C\u4E1A\u5E94\u7A7F\u7EDD\u7F18\u80F6\u978B\u6216\u7EDD\u7F18\u6C34\u978B\u3002\u710A\u628A\u7EBF\u3001\u628A\u94B3\u4E0D\u51C6\u653E\u5728\u6C34\u6216\u6CE5\u6D46\u5185\uFF0C\u7535\u710A\u673A\u7535\u6E90\u7684\u4E00\u6B21\u548C\u4E8C\u6B21\u63A5\u7EBF\u5E94\u7B26\u5408\u8981\u6C42\u63A5\u5730\uFF0C\u63A5\u96F6\u7EBF\u4E0D\u51C6\u7528\u94A2\u7B4B\uFF0C\u94A2\u7BA1\u7B49\u94C1\u4EF6\u4EE3\u66FF\u3002\u7535\u710A\u673A\u7535\u6E90\u4E0E\u95F8\u7BB1\u5E94\u4E0D\u5927\u4E8E\u4E09\u7C73\uFF0C\u7BB1\u5185\u5E94\u6309\u89C4\u5B9A\u8BBE\u4E13\u7528\u914D\u4EF6\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'6\uFF0E\u5404\u79CD\u5E26\u7535\u8BBE\u5907\uFF0C\u673A\u5177\u66F4\u6362\u573A\u5730\u3001\u79FB\u52A8\u524D\u5E94\u5148\u5207\u65AD\u7535\u6E90\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'7\uFF0E\u65BD\u5DE5\u7528\u914D\u7535\u7BB1\u5FC5\u987B\u662F\u94C1\u5236\u3002\u5E76\u5E94\u6309\u89C4\u5B9A\u8BBE\u7F6E\u7BB1\u5185\u914D\u4EF6\uFF0C\u5E76\u5E94\u8BBE\u7F6E\u8DB3\u591F\u7684\u63D2\u5EA7\uFF0C\u65BD\u5DE5\u65F6\u4E0D\u5F97\u4E24\u4E2A\u4EE5\u4E0A\u7535\u5668\u673A\u5177\u3001\u8BBE\u5907\u5171\u7528\u4E00\u4E2A\u63D2\u5EA7\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u4E94\u3001\u6587\u660E\u65BD\u5DE5'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u4E25\u683C\u9075\u5B88\u65BD\u5DE5\u73B0\u573A\u7684\u89C4\u7AE0\u5236\u5EA6\uFF0C\u670D\u4ECE\u9879\u76EE\u90E8\u5DE5\u4F5C\u4EBA\u5458\u7684\u7BA1\u7406\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u65BD\u5DE5\u73B0\u573A\u4E25\u7981\u5438\u70DF\uFF0C\u4E25\u7981\u53D1\u751F\u6253\u67B6\u3001\u8D4C\u535A\u53CA\u9157\u9152\u7B49\u8FDD\u6CD5\u884C\u4E3A\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\u3001\u65BD\u5DE5\u73B0\u573A\u5185\u4E25\u7981\u968F\u5904\u5927\u5C0F\u4FBF\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\u3001\u65BD\u5DE5\u73B0\u573A\u5185\u4E25\u7981\u4E71\u6254\u6742\u7269\u53CA\u5E9F\u6599\u3002\u5C06\u6742\u7269\u53CA\u5E9F\u6599\u8FD0\u5230\u6307\u5B9A\u5730\u70B9\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'5\u3001\u4E25\u7981\u632A\u7528\u548C\u62C6\u9664\u5B89\u5168\u8BBE\u65BD\u3001\u6D88\u9632\u8BBE\u65BD\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'6\u3001\u4E25\u7981\u5728\u673A\u68B0\u540A\u7269\u4E0B\u7A7F\u884C\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u516D\u3001\u73AF\u5883\u4FDD\u62A4'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u4E25\u683C\u6309\u65BD\u5DE5\u65B9\u6848\u8FDB\u884C\u65BD\u5DE5\uFF0C\u5408\u7406\u5229\u7528\u573A\u5730\uFF0C\u5B89\u6392\u597D\u6750\u6599\u52A0\u5DE5\u573A\uFF0C\u4FDD\u8BC1\u65BD\u5DE5\u73B0\u573A\u6E05\u6D01\u6574\u9F50\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u4F5C\u4E1A\u65F6\u51CF\u5C0F\u626C\u5C18\u3001\u6C61\u67D3\u53CA\u566A\u58F0\uFF0C\u673A\u5177\u6CE8\u610F\u65E5\u5E38\u7EF4\u62A4\u4FEE\u7406\u4FDD\u517B\uFF0C\u4EE5\u4FDD\u8BC1\u4F7F\u7528\u65F6\u8FD0\u8F6C\u6B63\u5E38\uFF0C\u9632\u6B62\u589E\u52A0\u4E0D\u5FC5\u8981\u7684\u566A\u58F0\u3002\u7535\u52A8\u673A\u5177\u505C\u7528\u65F6\uFF0C\u8981\u968F\u624B\u5207\u65AD\u7535\u6E90\uFF0C\u4EE5\u8282\u7EA6\u7528\u7535\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\u3001\u65BD\u5DE5\u4E2D\u5404\u79CD\u5E9F\u7269\u5F03\u7269\u54C1\u5747\u5B89\u6392\u5206\u7C7B\u5783\u573E\u7BB1\uFF0C\u5206\u7C7B\u6536\u96C6\u4E22\u5F03\uFF0C\u5BF9\u4E8E\u5404\u7C7B\u6CB9\u6F06\u6876\uFF0C\u5269\u4F59\u6CB9\u6F06\u7B49\u6C61\u67D3\u6027\u5E9F\u5F03\u7269\u9001\u5230\u4E13\u95E8\u673A\u6784\u5904\u7406\u3002\u6CB9\u6F06\u3001\u70EF\u6599\u7B49\u5316\u5B66\u539F\u6599\u65B9\u9762\uFF0C\u5E94\u5C3D\u91CF\u51CF\u5C11\u6D41\u635F\uFF0C\u7528\u540E\u5C01\u5835\u4E25\u5BC6\uFF0C\u9632\u6B62\u6709\u5BB3\u6C14\u4F53\u6325\u53D1\uFF0C\u76DB\u5177\u53CA\u88AB\u6C61\u67D3\u7684\u7528\u5177\u5E94\u96C6\u4E2D\u56DE\u6536\u5904\u7406\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\u3001\u65BD\u5DE5\u4EBA\u5458\u5728\u6BCF\u4E00\u533A\u65BD\u5DE5\u6BB5\u5B8C\u6BD5\u540E\uFF0C\u5404\u4F5C\u4E1A\u9762\u5783\u573E\u968F\u65F6\u6E05\u7406\uFF0C\u5206\u7C7B\u6295\u653E\uFF0C\u4FDD\u6301\u73B0\u573A\u7684\u6E05\u6D01\u548C\u51CF\u5C11\u6C61\u67D3\u6E90\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'5\u3001\u65BD\u5DE5\u7528\u6C34\u8BBE\u65BD\u5747\u91C7\u7528\u8282\u80FD\u578B\u4EA7\u54C1\uFF0C\u8282\u7EA6\u7528\u6C34\u3002\u8BD5\u538B\u3001\u51B2\u6D17\u8BD5\u9A8C\u65F6\u63D0\u524D\u505A\u597D\u8BA1\u5212\uFF0C\u4E13\u95E8\u8FDE\u63A5\u6392\u6C34\uFF0C\u6CFB\u6C34\u7BA1\u9053\u5F15\u81F3\u5468\u8FB9\u5E02\u653F\u6392\u6C34\u7BA1\u7F51\u53EF\u9760\u6392\u8D70\uFF0C\u4EE5\u514D\u6D78\u6CE1\u5468\u8FB9\u73AF\u5883\uFF0C\u675C\u7EDD\u968F\u610F\u5728\u65BD\u5DE5\u73B0\u573A\u6392\u653E\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'6\u3001\u710A\u63A5\u4F5C\u4E1A\u65F6\uFF0C\u5468\u56F4\u8BBE\u7F6E\u56F4\u6321\uFF0C\u907F\u514D\u706B\u82B1\u98DE\u6E85\u3002\u710A\u63A5\u540E\u53CA\u65F6\u56DE\u6536\u4E0D\u518D\u5229\u7528\u7684\u710A\u836F\u3001\u710A\u5242 \u3001\u5E9F\u5F03\u7684\u710A\u6761\u3001\u5E9F\u6E23\u7B49\u5783\u573E\u6309\u7167\u73B0\u573A\u7BA1\u7406\u8981\u6C42\u53E6\u7C7B\u6295\u653E\uFF0C\u96C6\u4E2D\u56DE\u6536\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u4E03\u3001\u5176\u4ED6\u8981\u6C42'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u9664\u4E0A\u8FF0\u8981\u6C42\u5916\uFF0C\u8FD8\u5E94\u6839\u636E\u65BD\u5DE5\u5B9E\u9645\u60C5\u51B5\uFF0C\u6267\u884C\u73B0\u573A\u4E3B\u7BA1\u5355\u4F4D\u548C\u4E0A\u7EA7\u9881\u53D1\u7684\u5404\u6709\u5173\u5B89\u5168\u6280\u672F\u89C4\u8303\u548C\u89C4\u7AE0\u5236\u5EA6\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u51E1\u4E0E\u672C\u4EA4\u5E95\u672A\u6D89\u53CA\uFF0C\u4E14\u5B58\u5728\u4E0D\u5B89\u5168\u9690\u60A3\uFF0C\u65BD\u5DE5\u4EBA\u5458\u5FC5\u987B\u62D2\u7EDD\u65BD\u5DE5\uFF0C\u53CA\u65F6\u62A5\u544A\uFF0C\u5F85\u6709\u53EF\u9760\u7684\u5B89\u5168\u63AA\u65BD\u540E\uFF0C\u65B9\u53EF\u64CD\u4F5C\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'3\u3001\u4E25\u7981\u8FDD\u7AE0\u6307\u6325\u3001\u8FDD\u7AE0\u64CD\u4F5C\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'4\u3001\u7535\u6C14\u9632\u62A4\u7528\u54C1\u8981\u5B9A\u671F\u68C0\u67E5\uFF0C\u5408\u683C\u540E\u65B9\u80FD\u4F7F\u7528\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'5\u3001\u5DE5\u5730\u98DF\u5802\u8981\u641E\u597D\u536B\u751F\uFF0C\u9632\u6B62\u98DF\u7269\u4E2D\u6BD2\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'6\u3001\u5BBF\u820D\u5185\u8981\u5B9A\u671F\u68C0\u67E5\u5B58\u5728\u989D\u4E0D\u5B89\u5168\u56E0\u7D20\uFF0C\u4E25\u7981\u79C1\u63A5\u7535\u6E90\u7EBF\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'7\u3001\u641E\u597D\u5B9A\u671F\u6559\u80B2\u53CA\u6587\u660E\u65BD\u5DE5\u3002'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'8\u3001\u65BD\u5DE5\u8FC7\u7A0B\u4E2D\u5168\u4F53\u4EBA\u5458\u8981\u53D1\u626C\u56E2\u7ED3\u53CB\u7231\u7684\u7CBE\u795E\uFF0C\u4E92\u76F8\u5E2E\u52A9\uFF0C\u4E92\u76F8\u76D1\u7763\uFF0C\u505A\u5230\u9075\u7AE0\u5B88\u7EAA\u5B89\u5168\u751F\u4EA7\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						{ className: 'label' },
						'\u9488\u5BF9\u6027\u4EA4\u5E95\uFF1A'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'1\u3001\u65B0\u8FDB\u573A\u5DE5\u4EBA\u5FC5\u987B\u7ECF\u8FC7\u4E09\u7EA7\u6559\u80B2\uFF0C\u7ECF\u8003\u8BD5\u5408\u683C\u540E\u65B9\u53EF\u4E0A\u5C97\u64CD\u4F5C\uFF0C\u672A\u7ECF\u6559\u80B2\u57F9\u8BAD\u548C\u8003\u8BD5\u4E0D\u5408\u683C\u8005\uFF0C\u4E0D\u5F97\u4E0A\u5C97\u4F5C\u4E1A\uFF1B'
					),
					_react2.default.createElement(
						'p',
						{ className: 'content' },
						'2\u3001\u65BD\u5DE5\u73B0\u573A\u4E25\u7981\u5438\u70DF\uFF0C\u4E25\u7981\u9152\u540E\u4F5C\u4E1A\u3001\u4E25\u7981\u5728\u4F5C\u4E1A\u65F6\u6253\u95F9\u3001\u4E25\u7981\u8FDD\u7AE0\u4F5C\u4E1A\u3001\u4E25\u7981\u8FDD\u7AE0\u6307\u6325\u3002'
					)
				)
			);
		}
	}]);

	return SafetyContent;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = SafetyContent;

/***/ }),

/***/ 1989:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交底施工内容
                  *qiufh@bocspace.com
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

__webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectDestructuringEmpty(obj) { if (obj == null) throw new TypeError("Cannot destructure undefined"); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TechnologyContent = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(TechnologyContent, _React$Component);

	function TechnologyContent(props) {
		_classCallCheck(this, TechnologyContent);

		var _this = _possibleConstructorReturn(this, (TechnologyContent.__proto__ || Object.getPrototypeOf(TechnologyContent)).call(this, props));

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null
		};
		return _this;
	}

	_createClass(TechnologyContent, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'render',
		value: function render() {
			_objectDestructuringEmpty(this.props);

			_objectDestructuringEmpty(this.state);

			_objectDestructuringEmpty(this.store);

			return _react2.default.createElement(
				'div',
				{ className: 'technology-content' },
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'p',
						null,
						'1\u3001\u8D77\u540A\uFF1A\u5728\u7BB1\u4F53\u7684\u4E0B\u90E8\u7528\u4E24\u6761\u540A\u88C5\u5E26\u62F4\u81F4\u4E24\u7AEF\u7BB1\u89D2\u540A\u88C5\u5B54\uFF0C\u5229\u7528\u4EBA\u5B57\u68AF\u6216\u79FB\u52A8\u811A\u624B\u67B6\uFF0C\u5DE5\u4EBA\u722C\u5230\u7BB1\u7BB1\u623F\u5C4B\u9876\u90E8\uFF0C\u4E13\u7528\u540A\u8F66\u53CA\u6302\u94A9\u76F4\u63A5\u4F38\u5230\u9876\u90E8\u7BB1\u89D2\u540A\u88C5\u5B54\u6302\u597D\u5E77\u8F7B\u5FAE\u542F\u52A8\u8BA9\u6302\u94A9\u53D7\u529B\uFF0C\u5DE5\u4EBA\u56DE\u5230\u79FB\u52A8\u811A\u624B\u67B6\u4E0A\u5E76\u5B89\u5168\u843D\u5730\u3002\u540A\u8F66\u8D77\u540A\u3002\u8D77\u540A\u65F6\u4E25\u7981\u7BB1\u4E0B\u81C2\u4E0B\u7AD9\u4EBA\uFF0C\u9884\u9632\u8131\u94A9\u4F24\u4EBA\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'2\u3001\u5B89\u88C5\uFF1A\u8D77\u540A\u540E\u6709\u4E24\u4EBA\u7275\u7740\u540A\u88C5\u5E26\u5E73\u7A33\u79FB\u5230\u57FA\u7840\u5904\u6162\u6162\u4E0B\u964D\u5E76\u6709\u56DB\u4EBA\u5728\u56DB\u4E2A\u89D2\u5904\u6276\u7A33\u6446\u653E\u5230\u4F7F\u7528\u65B9\u6307\u5B9A\u4F4D\u7F6E\u653E\u7A33\uFF0C\u518D\u6709\u4E00\u4EBA\u7528\u5347\u964D\u673A\u5230\u9876\u90E8\u53D6\u4E0B\u6302\u94A9\u3002\u7B2C\u4E8C\u4E2A\u7BB1\u5B50\u6309\u540C\u6837\u7A0B\u5E8F\u540A\u4E0B\u6765\u4E0E\u7B2C\u4E00\u4E2A\u7BB1\u5728\u9876\u90E8\u6709\u4E24\u4E2AM12X30\u9540\u950C\u87BA\u4E1D\u8FDE\u63A5\uFF0C\u5E95\u90E8\u6709\u4E24\u4E2AM12X100\u9540\u950C\u87BA\u4E1D\u8FDE\u63A5\u3002\u4F9D\u6B21\u7C7B\u63A8\u3002\u88C5\u5B8C\u540E\u5E94\u7528\u78C1\u529B\u7EBF\u5760\u6821\u76F4\u6821\u6B63\uFF0C\u6821\u6B63\u540E\u628A\u4E0A\u4E0B\u87BA\u4E1D\u8FDB\u884C\u7D27\u56FA\u3002\u5782\u76F4\u5EA6\u5141\u8BB8\u504F\u5DEE\u4E3A5mm\u3002\u4E24\u7BB1\u62FC\u63A5\u5904\u5B89\u88C5\u4E09\u5143\u4E59\u4E19\u5BC6\u5C01\u6761\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'3\u3001\u94A2\u6784\u4EF6\u5B89\u88C5\u8D28\u91CF\u8981\u6C42'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF081\uFF09\u7ED3\u6784\u4EF6\u8868\u9762\u5E72\u51C0\uFF0C\u65E0\u6CB9\u6C61\uFF0C\u6CE5\u7802\u548C\u7070\u5C18\u7B49\u6742\u7269\u3002\uFF082\uFF09\u6784\u4EF6\u5728\u8FD0\u8F93\u3001\u5B58\u653E\u548C\u5B89\u88C5\u8FC7\u7A0B\u4E2D\u635F\u574F\u7684\u6D82\u5C42\u5E94\u8865\u6D82\u3002\uFF083\uFF09\u5B89\u88C5\u5141\u8BB8\u504F\u5DEE\u5E94\u6EE1\u8DB3\u516C\u53F8\u5185\u90E8\u8D28\u91CF\u68C0\u67E5\u6807\u51C6\u3002\uFF084\uFF09\u8FDE\u63A5\u8282\u70B9\u7684\u5168\u90E8\u7D27\u56FA\u4EF6\uFF0C\u5E94\u7D27\u56FA\uFF0C\u65E0\u677E\u52A8\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'4\u3001\u5899\u677F\u4E0E\u5C4B\u9762\u5B89\u88C5\u8D28\u91CF\u8981\u6C42'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF081\uFF09\u5C4B\u9762\u3001\u5899\u677F\u5E94\u5E73\u6574\u6E05\u6D01\uFF0C\u63A5\u69CE\u987A\u76F4\uFF0C\u7EB5\u6A2A\u642D\u63A5\u7F1D\u5747\u5448\u76F4\u7EBF\uFF0C\u6A90\u53E3\u548C\u5899\u9762\u4E0B\u7AEF\u5448\u76F4\u7EBF\uFF0C\u65E0\u9519\u94BB\u5B54\uFF0C\u63A5\u7F1D\u65E0\u7FD8\u66F2\u3002\uFF082\uFF09\u5C4B\u9762\u5B89\u88C5\u5141\u8BB8\u504F\u5DEE\u5E94\u6EE1\u8DB3\u516C\u53F8\u5185\u90E8\u6807\u51C6\u7684\u8981\u6C42\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'5\u3001\u95E8\u3001\u7A97\u5B89\u88C5'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF081\uFF09\u95E8\u7A97\u6846\u5B89\u88C5\u5E94\u6A2A\u5E73\u7AD6\u76F4\uFF0C\u9AD8\u4F4E\u4E00\u81F4\uFF0C\u5E73\u9762\u4E00\u81F4\u3002\uFF082\uFF09\u6846\u4E0E\u67F1\u8FDE\u63A5\u5E94\u7262\u56FA\uFF0C\u4E0D\u6643\u52A8\uFF0C\u7F1D\u9699\u5747\u5300\u3002\uFF083\uFF09\u95E8\u7A97\u8868\u9762\u5E94\u5E73\u6574\u3001\u5149\u6ED1\u3001\u5927\u9762\u65E0\u5212\u75D5\u3001\u78B0\u4F24\u3002'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'content-block' },
					_react2.default.createElement(
						'p',
						null,
						'6\u3001\u4E94\u91D1\u4EF6\u5B89\u88C5\u8D28\u91CF\u8981\u6C42'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF081\uFF09\u4E94\u91D1\u4EF6\u5E94\u88C5\u914D\u53EF\u9760\uFF0C\u8F6C\u6ED1\u52A8\u5904\u4E0D\u5F97\u6709\u5F71\u54CD\u4F7F\u7528\u6027\u80FD\u7684\u677E\u52A8\u548C\u5361\u963B\u73B0\u8C61\u3002'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF082\uFF09\u5916\u8F6E\u5ECA\u4E0D\u5E94\u6709\u88C2\u7EB9\uFF0C\u6BDB\u523A\uFF0C\u673A\u68B0\u635F\u4F24\uFF0C\u6F06\u819C\u9540\u5C42\u4E0D\u5E94\u6709\u8131\u843D\u73B0\u8C61\u3002'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF083\uFF09\u9489\u7AEF\u90E8\u5FC5\u987B\u5706\u6B63\uFF0C\u5149\u6ED1\uFF0C\u4E0D\u5E94\u9AD8\u51FA\u7EC4\u5408\u4EF6\u8868\u9762\uFF0C\u94C6\u9489\u5E94\u7262\u56FA\uFF0C\u65E0\u677E\u52A8\u3002'
					),
					_react2.default.createElement(
						'p',
						null,
						'  \uFF084\uFF09\u9501\u3001\u7A97\u9501\u94A9\uFF0C\u63D2\u9500\u5E94\u5F00\u5173\u7075\u6D3B\uFF0C\u5916\u578B\u5B8C\u6574\uFF0C\u65E0\u660E\u663E\u5F71\u54CD\u7F8E\u89C2\u7684\u7F3A\u9677\u3002'
					)
				)
			);
		}
	}]);

	return TechnologyContent;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = TechnologyContent;

/***/ }),

/***/ 1990:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 制定施工进度计划
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _OneItem = __webpack_require__(1991);

var _OneItem2 = _interopRequireDefault(_OneItem);

var _TwoItem = __webpack_require__(1994);

var _TwoItem2 = _interopRequireDefault(_TwoItem);

var _ThreeItem = __webpack_require__(1992);

var _ThreeItem2 = _interopRequireDefault(_ThreeItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ConstructionSchedule = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ConstructionSchedule, _React$Component);

	function ConstructionSchedule(props) {
		_classCallCheck(this, ConstructionSchedule);

		var _this = _possibleConstructorReturn(this, (ConstructionSchedule.__proto__ || Object.getPrototypeOf(ConstructionSchedule)).call(this, props));

		_this.getConfirmSupplierState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getTaskStepState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this.store.constructionState = res;
				}
			});
		};

		_this.getBuildTeamStateInfo = function (state) {
			if (state === 0) {
				return "待启动";
			}
			if (state === 1) {
				return "进行中";
			}
			if (state === 2) {
				return "已完成";
			}
		};

		_this.getBuildTeamStateIcon = function (state) {
			if (state === 0) {
				return "./images/delivery/u1055.png";
			}
			if (state === 1) {
				return "./images/delivery/u1053.png";
			}
			if (state === 2) {
				return "./images/delivery/u1232.png";
			}
		};

		_this.overCurrentStageTask = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.overTaskStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.constructionState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.reStartHandover = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartTaskStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.constructionState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.getProjectDetail = function () {
			var projectId = _this.store.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.switchSteps = function (step) {
			_this.setState({ currentStep: step });
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null,
			currentStep: 1
		};
		return _this;
	}

	_createClass(ConstructionSchedule, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id, currentStep: 1 });
				this.getConfirmSupplierState();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var projectDetail = this.store.projectDetail;

			this.setState({ projectId: mobx.toJS(projectDetail).id });
			this.getConfirmSupplierState();
			this.store.getSts();
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var currentStep = this.state.currentStep;
			var constructionState = this.store.constructionState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal' },
				_react2.default.createElement(
					'div',
					{ className: 'mt20 f14', style: { borderBottom: "1px dashed #e6e6e6", paddingBottom: "30px" } },
					_react2.default.createElement(
						'div',
						{ style: { display: "flex", justifyContent: 'center', alignItems: 'center' } },
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(constructionState).state1), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(constructionState).state1)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(1);
										}, type: currentStep === 1 ? 'primary' : 'link', className: currentStep === 1 ? 'active-button' : 'no-active-button' },
									'\u786E\u5B9A\u65BD\u5DE5\u8981\u7D20'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 1 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(constructionState).state2), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(constructionState).state2)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(2);
										}, type: currentStep === 2 ? 'primary' : 'link', className: currentStep === 2 ? 'active-button' : 'no-active-button' },
									'\u5236\u5B9A\u65BD\u5DE5\u8BA1\u5212'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(constructionState).state2), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(constructionState).state2)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 3 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(3);
										}, type: currentStep === 3 ? 'primary' : 'link', className: currentStep === 3 ? 'active-button' : 'no-active-button' },
									'\u5B9E\u65F6\u8FDB\u5EA6\u8BA1\u5212'
								),
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					currentStep === 1 ? _react2.default.createElement(_OneItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 2 ? _react2.default.createElement(_TwoItem2.default, {
						getConfirmSupplierState: this.getConfirmSupplierState,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 3 ? _react2.default.createElement(_ThreeItem2.default, {
						currentStep: currentStep,
						store: this.store
					}) : null
				)
			);
		}
	}]);

	return ConstructionSchedule;
}(_react2.default.Component)) || _class) || _class);
exports.default = ConstructionSchedule;

/***/ }),

/***/ 1991:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _dec, _dec2, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _lodash = __webpack_require__(231);

var _lodash2 = _interopRequireDefault(_lodash);

var _PageSelect = __webpack_require__(1879);

var _PageSelect2 = _interopRequireDefault(_PageSelect);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             *确定施工要素
                                                                                                                                                                                                                             *dangw@bocspace.cn
                                                                                                                                                                                                                             */


var confirm = _antd.Modal.confirm;
var TextArea = _antd.Input.TextArea;
var Option = _antd.Select.Option;

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
    var form = _ref.form,
        index = _ref.index,
        props = _objectWithoutProperties(_ref, ['form', 'index']);

    return _react2.default.createElement(
        EditableContext.Provider,
        { value: form },
        _react2.default.createElement('tr', props)
    );
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
    _inherits(EditableCell, _React$Component);

    function EditableCell() {
        var _ref2;

        var _temp, _this2, _ret;

        _classCallCheck(this, EditableCell);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
            editing: true
        }, _this2.toggleEdit = function () {
            var editing = !_this2.state.editing;
            _this2.setState({ editing: editing }, function () {
                if (editing) {
                    _this2.input.focus();
                }
            });
        }, _this2.save = function (e) {
            var _this2$props = _this2.props,
                record = _this2$props.record,
                handleSave = _this2$props.handleSave;

            _this2.form.validateFields(function (error, values) {
                if (error && error[e.currentTarget.id]) {
                    return;
                }
                handleSave(_extends({}, record, values));
            });
        }, _this2.onChange = function (type, e) {
            var _this2$props2 = _this2.props,
                record = _this2$props2.record,
                handleSave = _this2$props2.handleSave;

            if (record["resType"] != e) {
                var _extends2;

                // 不相等时清空
                handleSave(_extends({}, record, (_extends2 = {}, _defineProperty(_extends2, type, e), _defineProperty(_extends2, "name", ""), _defineProperty(_extends2, "omId", ""), _extends2)));
            } else {
                handleSave(_extends({}, record, _defineProperty({}, type, e)));
            }
        }, _this2.updateStore = function (param) {
            var _this2$props3 = _this2.props,
                record = _this2$props3.record,
                handleSave = _this2$props3.handleSave;

            _this2.form.validateFields(function (error, values) {
                values["name"] = param.name;
                values["omId"] = param.id;
                handleSave(_extends({}, record, values));
            });
        }, _this2.renderCell = function (form) {
            _this2.form = form;
            var _this2$props4 = _this2.props,
                children = _this2$props4.children,
                dataIndex = _this2$props4.dataIndex,
                record = _this2$props4.record,
                title = _this2$props4.title;
            var editing = _this2.state.editing;

            if (dataIndex == "resType") {
                // 资源类型
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(
                        _antd.Select,
                        { style: { width: 200 },
                            ref: function ref(node) {
                                return _this2.input = node;
                            },
                            value: record[dataIndex],
                            onChange: _this2.onChange.bind(_this2, "resType")
                        },
                        _react2.default.createElement(
                            Option,
                            { value: '\u4EBA\u5DE5' },
                            '\u4EBA\u5DE5'
                        ),
                        _react2.default.createElement(
                            Option,
                            { value: '\u673A\u68B0' },
                            '\u673A\u68B0'
                        )
                    ))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            } else if (dataIndex == "name") {
                // 名称
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 }, className: 'w' },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex] == null || record[dataIndex] == "" ? [] : record[dataIndex]
                    })(_react2.default.createElement(
                        'div',
                        { className: 'w' },
                        _react2.default.createElement(_PageSelect2.default, {
                            disabled: record["resType"] == null || record["resType"] == "" ? true : false,
                            type: record["resType"] == "机械" ? "getMachinePageList" : "getWorkerPageList",
                            name: record["name"],
                            value: record["omId"] || "",
                            updateStore: _this2.updateStore
                        })
                    ))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    record[dataIndex] == null || record[dataIndex] == "" ? null : record[dataIndex].join("、")
                );
            } else {
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(_antd.InputNumber, { style: { width: "100%" }, ref: function ref(node) {
                            return _this2.input = node;
                        }, onPressEnter: _this2.save, onBlur: _this2.save }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            }
        }, _temp), _possibleConstructorReturn(_this2, _ret);
    }

    _createClass(EditableCell, [{
        key: 'render',
        value: function render() {
            var _props = this.props,
                editable = _props.editable,
                dataIndex = _props.dataIndex,
                title = _props.title,
                record = _props.record,
                index = _props.index,
                handleSave = _props.handleSave,
                children = _props.children,
                restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

            return _react2.default.createElement(
                'td',
                restProps,
                editable ? _react2.default.createElement(
                    EditableContext.Consumer,
                    null,
                    this.renderCell
                ) : children
            );
        }
    }]);

    return EditableCell;
}(_react2.default.Component);

var OneItem = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = _dec2(_class2 = (0, _reactRouterDom.withRouter)(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
    _inherits(OneItem, _React$Component2);

    function OneItem(props) {
        _classCallCheck(this, OneItem);

        var _this3 = _possibleConstructorReturn(this, (OneItem.__proto__ || Object.getPrototypeOf(OneItem)).call(this, props));

        _this3.getConstructionScheduleList = function () {
            var taskDetail = _this3.store.taskDetail;

            _this3.store.getConstructionScheduleList({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
                _this3.setState({
                    dataSource: Array.isArray(res) && res.length > 0 ? res : [
                        /*{
                        "id": "",
                        "taskId": mobx.toJS(taskDetail).id,
                        "name": "",
                        "planBeginTime": 0,
                        "constructionKey": [],
                        "layers": 1,
                        "remark": "",
                        "multiple": 1,
                        "bocdesignId": ""
                        }*/
                    ]
                });
            });
        };

        _this3.getDictWorkContentSelectList = function () {
            _this3.store.getDictWorkContentSelectList({}).then(function (res) {
                _this3.setState({
                    dictWork: Array.isArray(res) ? res : []
                });
            });
        };

        _this3.handleAdd = function () {
            var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));

            var len = dataSource.length;
            if (len >= 1) {
                // 校验
                var param = dataSource[len - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("楼栋名称是必填项");
                    return false;
                }
                if (param.planBeginTime == null || param.planBeginTime == 0 || param.planBeginTime == "") {
                    _antd.message.warn("计划开工时间是必填项");
                    return false;
                }

                if ((param.bocdesignId == undefined || param.bocdesignId == "" || param.bocdesignId == null) && param.type != undefined && param.type != 1 && (param.planEndTime == null || param.planEndTime == 0 || param.planEndTime == "")) {
                    _antd.message.warn("计划完成时间是必填项");
                    return false;
                }

                if (param.type != undefined && param.type == 1 && (param.layers == null || param.layers == "")) {
                    _antd.message.warn("选择层数是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                "id": "",
                "taskId": mobx.toJS(taskDetail).id,
                "name": "",
                "planBeginTime": 0,
                "planEndTime": 0,
                "constructionKey": [_this3.state.dictWork[0]],
                "layers": null,
                "remark": "",
                "bocdesignId": "",
                "standardCount": 1,
                "type": 1,
                "toiletCount": 0,
                "haveGallery": 0,
                "curtainType": null
            };

            dataSource = [].concat(_toConsumableArray(dataSource), [newData]);
            _this3.save(dataSource).then(function (res) {
                _this3.setState({
                    dataSource: res
                });
            });
        };

        _this3.handleDelete = function (record) {
            if (record.id != "" && record.id != null) {
                _this3.store.delConstructionSchedule({ id: record.id }).then(function (res) {
                    if (res) {
                        _antd.message.success("删除成功");
                        var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
                        var newData = dataSource.filter(function (item) {
                            return item.id !== record.id;
                        });
                        _this3.setState({
                            dataSource: newData
                        });
                    }
                });
            } else {
                _antd.message.warn("楼栋信息未保存");
                return false;
            }
        };

        _this3.overCurrentStage = function () {
            var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
            var len = dataSource.length;
            if (len == 0) {
                _antd.message.warn("请完善必填信息");
                return false;
            }

            if (len >= 1) {
                // 校验
                var param = dataSource[len - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("楼栋名称是必填项");
                    return false;
                }
                if (param.planBeginTime == null || param.planBeginTime == 0 || param.planBeginTime == "") {
                    _antd.message.warn("计划开工时间是必填项");
                    return false;
                }
                if ((param.bocdesignId == undefined || param.bocdesignId == "" || param.bocdesignId == null) && param.type != undefined && param.type != 1 && (param.planEndTime == null || param.planEndTime == 0 || param.planEndTime == "")) {
                    _antd.message.warn("计划完成时间是必填项");
                    return false;
                }
                /*if (param.constructionKey == null || (Array.isArray(param.constructionKey) && param.constructionKey.length == 0)) {
                    message.warn("选择施工要素是必填项");
                    return false;
                }*/
                if (param.type != undefined && param.type == 1 && (param.layers == null || param.layers == "")) {
                    _antd.message.warn("选择层数是必填项");
                    return false;
                }
            }
            _this3.props.overCurrentStageTask();
        };

        _this3.doneAndNext = function () {
            var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
            var len = dataSource.length;
            if (len == 0) {
                _antd.message.warn("请完善必填信息");
                return false;
            }

            if (len >= 1) {
                // 校验
                var param = dataSource[len - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("楼栋名称是必填项");
                    return false;
                }
                if (param.planBeginTime == null || param.planBeginTime == 0 || param.planBeginTime == "") {
                    _antd.message.warn("计划开工时间是必填项");
                    return false;
                }
                if ((param.bocdesignId == undefined || param.bocdesignId == "" || param.bocdesignId == null) && param.type != undefined && param.type != 1 && (param.planEndTime == null || param.planEndTime == 0 || param.planEndTime == "")) {
                    _antd.message.warn("计划完成时间是必填项");
                    return false;
                }
                /*if (param.constructionKey == null || (Array.isArray(param.constructionKey) && param.constructionKey.length == 0)) {
                    message.warn("选择施工要素是必填项");
                    return false;
                }*/
                if (param.type != undefined && param.type == 1 && (param.layers == null || param.layers == "")) {
                    _antd.message.warn("选择层数是必填项");
                    return false;
                }
            }
            var currentStep = _this3.props.currentStep;

            _this3.props.overCurrentStageTask();
            _this3.props.switchSteps(currentStep + 1);
        };

        _this3.save = function (css) {
            var taskDetail = _this3.store.taskDetail;

            var params = {
                css: css,
                taskId: mobx.toJS(taskDetail).id
            };
            return new Promise(function (resolve) {
                _this3.store.saveConstructionScheduleList(params).then(function (res) {
                    resolve(res);
                });
            });
        };

        _this3.handChange = function (type, index, e) {
            var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
            if (type == "constructionKey") {
                var constructionKey = dataSource[index][type] == null ? [] : JSON.parse(JSON.stringify(dataSource[index][type]));
                var _e$target = e.target,
                    checked = _e$target.checked,
                    value = _e$target.value;

                if (checked) {
                    // true
                    if (constructionKey.findIndex(function (i) {
                        return i.id == value.id;
                    }) == "-1") {
                        constructionKey.push(value);
                    }
                } else {
                    var mindex = constructionKey.findIndex(function (i) {
                        return i.id == value.id;
                    });
                    constructionKey.splice(mindex, 1);
                }
                dataSource[index][type] = constructionKey;
            } else if (type == "standardCount" || type == "toiletCount") {
                var val = _lodash2.default.trim(e) == "" ? 1 : e;
                dataSource[index][type] = val;
            } else if (type == "haveGallery") {
                var _val = Number(e.target.value);
                dataSource[index][type] = _val;
                if (_val == 0) {
                    dataSource[index]["curtainType"] = 0;
                }
            } else if (type == "curtainType") {
                var _val2 = Number(e);
                dataSource[index][type] = _val2;
            } else if (type == "type" && e.target.value == 1) {
                // 切换类型
                var _val3 = e.target.value;
                dataSource[index][type] = _val3;

                dataSource[index]["layers"] = null;
                dataSource[index]["standardCount"] = 1;
                dataSource[index]["toiletCount"] = 0;
                dataSource[index]["haveGallery"] = 0;
                dataSource[index]["curtainType"] = 0;
                dataSource[index]["planEndTime"] = 0;
            } else {
                var _val4 = e.target.value;
                dataSource[index][type] = _val4;
            }

            if (type == "standardCount" || type == "toiletCount") {
                _this3.setState({
                    dataSource: dataSource
                });
            } else {
                _this3.save(dataSource).then(function (res) {
                    _this3.setState({
                        dataSource: res
                    });
                });
            }
        };

        _this3.handBlur = function () {
            _this3.save(_this3.state.dataSource).then(function (res) {
                _this3.setState({
                    dataSource: res
                });
            });
        };

        _this3.handleChange2 = function (type, value) {
            var obj = JSON.parse(JSON.stringify(_this3.state.main));
            obj[type] = value;
            obj["currentEfficiency"] = value;
            _this3.setState({
                main: Object.assign({}, obj)
            });
        };

        _this3.handBlur2 = function () {
            _this3.store.saveConstructionMain(_this3.state.main).then(function (res) {
                if (res) {
                    _antd.message.success("操作成功");
                    _this3.setState({
                        main: Object.assign({}, res)
                    });
                }
            });
        };

        _this3.handDate = function (type, index, date, dateString) {
            var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
            dataSource[index][type] = dateString == null || dateString == "" ? 0 : (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
            _this3.save(dataSource).then(function (res) {
                _this3.setState({
                    dataSource: res
                });
            });
        };

        _this3.onChangeSchedule = function (type, value) {
            if (value == null || value == "" || typeof value == "string") {
                return false;
            }
            var scheduleResources = JSON.parse(JSON.stringify(_this3.state.scheduleResources));
            scheduleResources[type] = value;
            _this3.store.saveScheduleResources({ "csr": scheduleResources }).then(function (res) {
                _this3.setState({
                    scheduleResources: res == null ? {
                        id: "",
                        projectId: _this3.store.projectId,
                        planUsePeople: null,
                        planUseMachine: null
                    } : res
                });
            });
        };

        _this3.handleAsync = function () {
            var _this = _this3;
            confirm({
                title: '您确定要同步合同方案吗?',
                content: '原有数据将要被覆盖',
                onOk: function onOk() {
                    _this.store.syncConstructionElements().then(function (res) {
                        _this.save(res).then(function (mres) {
                            _this.setState({
                                dataSource: mres
                            });
                        });
                    });
                    _this.store.syncConstructionResources().then(function (res) {
                        _this.setState({
                            tableDatasource: res == null ? [] : res
                        });
                    });
                },
                onCancel: function onCancel() {}
            });
        };

        _this3.tableAdd = function () {
            var tableDatasource = _this3.state.tableDatasource;
            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                projectId: _this3.store.projectId,
                taskId: mobx.toJS(taskDetail).id,
                name: "",
                code: "",
                counts: null,
                omId: "",
                resType: ""
            };
            var data = [].concat(_toConsumableArray(tableDatasource), [newData]);
            _this3.saveScheduleResourcesList(data);
        };

        _this3.tableDel = function (index) {
            var tableDatasource = [].concat(_toConsumableArray(_this3.state.tableDatasource));
            tableDatasource.splice(index, 1);
            _this3.saveScheduleResourcesList(tableDatasource);
            _antd.message.success("删除成功");
        };

        _this3.tableSave = function (row) {
            var newData = [].concat(_toConsumableArray(_this3.state.tableDatasource));
            var index = newData.findIndex(function (item) {
                return row.id === item.id;
            });
            var item = newData[index];
            newData.splice(index, 1, _extends({}, item, row));
            _this3.saveScheduleResourcesList(newData);
        };

        _this3.saveScheduleResourcesList = function (data) {
            var params = {
                list: data,
                type: 0
            };
            _this3.store.saveScheduleResourcesList(params).then(function (res) {
                _this3.setState({
                    tableDatasource: res
                });
            });
        };

        _this3.store = _this3.props.DeliveryStore;
        _this3.state = {
            projectId: null,
            dictWork: [],
            dataSource: [
                /*{
                "id": "",
                "taskId": "",
                "name": "",
                "planBeginTime": 0,
                "planEndTime": 0,
                "constructionKey": [],
                "layers": 1,
                "remark": "",
                "orders": 1,
                "createTime": 0,
                "multiple": 1,
                "bocdesignId": ""
                }*/
            ],
            tableDatasource: [], // 表格数据源
            main: {
                "efficiency": 100,
                "currentEfficiency": 100
            },
            projectTypes: [{
                id: "1",
                name: "标准箱"
            }, {
                id: "3",
                name: "展厅"
            }, {
                id: "2",
                name: "钢结构"
            }]
        };
        return _this3;
    }

    _createClass(OneItem, [{
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps, nextContext) {
            var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
            if (projectDetail.id !== this.state.projectId) {
                this.setState({ projectId: projectDetail.id });
                this.getConstructionScheduleList();
            }
        }
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {
            var _this4 = this;

            this.getDictWorkContentSelectList();
            this.getConstructionScheduleList();
            var taskDetail = this.store.taskDetail;

            this.store.getScheduleResourcesListByTaskId({
                "type": 0,
                "taskId": mobx.toJS(taskDetail).id
            }).then(function (res) {
                _this4.setState({
                    tableDatasource: res == null ? [] : res
                });
            });
            this.store.getConstructionMainByProjectId().then(function (res) {
                if (res) {
                    _this4.setState({
                        main: res
                    });
                }
            });
        }

        // 新增


        // 删除


        // 完成该阶段


        // 完成并进入下一步


        // 自动保存


        // 同步


        // 表格新增


        // 表格删除


        // 表格报存

    }, {
        key: 'render',
        value: function render() {
            var _this5 = this;

            var _props2 = this.props,
                currentStep = _props2.currentStep,
                switchSteps = _props2.switchSteps;
            var getFieldDecorator = this.props.form.getFieldDecorator;

            var formItemLayout = {
                labelCol: { span: 8 },
                wrapperCol: { span: 12 }
            };
            var formItemLayout2 = {
                labelCol: { span: 4 },
                wrapperCol: { span: 18 }
            };
            var _state = this.state,
                dataSource = _state.dataSource,
                dictWork = _state.dictWork,
                tableDatasource = _state.tableDatasource,
                main = _state.main,
                projectTypes = _state.projectTypes;
            var constructionState = this.store.constructionState;

            var obj = { 1: "一层", 2: "二层", 3: "三层" };
            var obj3 = { 1: "标准箱", 2: "钢结构", 3: "展厅" };
            var components = {
                body: {
                    row: EditableFormRow,
                    cell: EditableCell
                }
            };
            var columns = [{
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                className: constructionState.state1 === 2 ? "hidden" : "",
                render: function render(text, record, index) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
                                return _this5.tableDel(index);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }, {
                title: '序号',
                dataIndex: 'key',
                width: '80px',
                align: 'center',
                render: function render(text, record, index) {
                    return '' + (index + 1);
                }
            }, {
                title: '资源类型',
                dataIndex: 'resType',
                align: 'center',
                width: '200px',
                editable: constructionState.state1 === 2 ? false : true
            }, {
                title: '名称',
                dataIndex: 'name',
                align: 'center',
                editable: constructionState.state1 === 2 ? false : true
            }, {
                title: '数量',
                dataIndex: 'counts',
                align: 'center',
                editable: constructionState.state1 === 2 ? false : true
            }];
            var column = columns.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this5.tableSave
                        };
                    }
                });
            });

            var obj2 = { 0: "不含", 1: "全隐", 2: "半隐" };

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    'div',
                    { className: constructionState.state1 === 2 ? "hidden" : "" },
                    _react2.default.createElement(
                        _antd.Form,
                        _extends({ layout: 'inline' }, formItemLayout),
                        _react2.default.createElement(
                            _antd.Row,
                            { gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15],
                                style: {
                                    margin: "0"
                                } },
                            _react2.default.createElement(
                                _antd.Col,
                                { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    { label: '\u5DE5\u65F6\u7CFB\u6570', className: 'w' },
                                    getFieldDecorator('efficiency')(_react2.default.createElement(
                                        'div',
                                        { className: 'w' },
                                        _react2.default.createElement(_antd.InputNumber, {
                                            className: 'w',
                                            min: 0,
                                            max: 500,
                                            formatter: function formatter(value) {
                                                return value + '%';
                                            },
                                            parser: function parser(value) {
                                                return value.replace('%', '');
                                            },
                                            onChange: this.handleChange2.bind(this, "efficiency"),
                                            onBlur: this.handBlur2,
                                            value: main.efficiency
                                        })
                                    ))
                                )
                            )
                        )
                    ),
                    _react2.default.createElement(
                        _antd.Row,
                        { className: 'mt20' },
                        _react2.default.createElement(
                            _antd.Col,
                            { span: 20, offset: 3 },
                            _react2.default.createElement(
                                _antd.Button,
                                { type: 'primary', onClick: this.handleAsync },
                                '\u540C\u6B65\u5408\u540C\u65B9\u6848'
                            ),
                            _react2.default.createElement(
                                _antd.Button,
                                { className: 'ml20', type: 'primary', onClick: this.handleAdd },
                                '\u6DFB\u52A0\u697C\u680B'
                            )
                        ),
                        _react2.default.createElement(
                            _antd.Col,
                            { span: 20, offset: 3,
                                style: {
                                    paddingBottom: "20px",
                                    borderBottom: "1px solid #E6E6E6"
                                } },
                            _react2.default.createElement(_antd.Table, {
                                components: components,
                                className: 'digital_table mt15 mb15',
                                rowClassName: function rowClassName() {
                                    return 'editable-row';
                                },
                                dataSource: tableDatasource,
                                columns: column,
                                pagination: false,
                                bordered: true,
                                rowKey: function rowKey(record) {
                                    return record.id;
                                }
                            }),
                            _react2.default.createElement(_antd.Icon, { onClick: this.tableAdd,
                                type: 'plus-circle',
                                style: {
                                    position: "relative",
                                    left: "28px",
                                    fontSize: "18px",
                                    color: "#609AF1",
                                    cursor: "pointer"
                                } })
                        )
                    ),
                    _react2.default.createElement(
                        _antd.Form,
                        _extends({ layout: 'inline' }, formItemLayout),
                        dataSource.map(function (item, index) {
                            return _react2.default.createElement(
                                _antd.Row,
                                { key: "list-" + index, gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15],
                                    style: {
                                        margin: "0",
                                        padding: "20px 0"
                                        // borderBottom: "1px solid #E6E6E6"
                                    } },
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u697C\u680B\u540D\u79F0', className: 'w' },
                                        getFieldDecorator('name' + index, {
                                            initialValue: item.name || "",
                                            rules: [{ required: true, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, {
                                            placeholder: '\u8BF7\u8F93\u5165',
                                            onBlur: _this5.handChange.bind(_this5, "name", index),
                                            onPressEnter: _this5.handChange.bind(_this5, "name", index),
                                            onChange: _this5.handChange.bind(_this5, "name", index),
                                            value: item.name || "" }))
                                    )
                                ),
                                item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null ? null : _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u7C7B\u578B', className: 'w' },
                                        getFieldDecorator('type' + index, {})(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(
                                                _antd.Radio.Group,
                                                {
                                                    value: item.type,
                                                    onChange: _this5.handChange.bind(_this5, "type", index)
                                                },
                                                projectTypes.map(function (v) {
                                                    return _react2.default.createElement(
                                                        _antd.Radio,
                                                        { value: Number(v.id), key: v.id },
                                                        v.name
                                                    );
                                                })
                                            )
                                        ))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u8BA1\u5212\u5F00\u5DE5\u65F6\u95F4', className: 'w' },
                                        getFieldDecorator('planBeginTime' + index, {
                                            rules: [{ required: true, message: '此项是必填' }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(_antd.DatePicker, { format: 'YYYY-MM-DD',
                                                placeholder: '\u8BF7\u9009\u62E9',
                                                className: 'w',
                                                value: item.planBeginTime == null || item.planBeginTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(item.planBeginTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                                onChange: _this5.handDate.bind(_this5, "planBeginTime", index)
                                            })
                                        ))
                                    )
                                ),
                                item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null ? null : item.type != 1 ? _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4', className: 'w' },
                                        getFieldDecorator('planEndTime' + index, {
                                            rules: [{ required: true, message: '此项是必填' }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(_antd.DatePicker, { format: 'YYYY-MM-DD',
                                                placeholder: '\u8BF7\u9009\u62E9',
                                                className: 'w',
                                                value: item.planEndTime == null || item.planEndTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(item.planEndTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                                onChange: _this5.handDate.bind(_this5, "planEndTime", index)
                                            })
                                        ))
                                    )
                                ) : null,
                                item.type != undefined && item.type != 1 ? null : _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u9009\u62E9\u697C\u5C42', className: 'w' },
                                        getFieldDecorator('layers' + index, {
                                            rules: [{ required: true, message: '此项是必填' }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(
                                                _antd.Radio.Group,
                                                {
                                                    value: item.layers,
                                                    onChange: _this5.handChange.bind(_this5, "layers", index)
                                                },
                                                _react2.default.createElement(
                                                    _antd.Radio,
                                                    { value: 1 },
                                                    '\u4E00\u5C42'
                                                ),
                                                _react2.default.createElement(
                                                    _antd.Radio,
                                                    { value: 2 },
                                                    '\u4E8C\u5C42'
                                                ),
                                                _react2.default.createElement(
                                                    _antd.Radio,
                                                    { value: 3 },
                                                    '\u4E09\u5C42'
                                                )
                                            )
                                        ))
                                    )
                                ),
                                item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != 1 ? null : _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u6807\u51C6\u7BB1\u6570\u91CF', className: 'w' },
                                        getFieldDecorator('standardCount' + index, {
                                            rules: [{
                                                required: false,
                                                message: '此项是必填' }, {
                                                pattern: /^([0-9]\d+)|[1-9]$/,
                                                message: "输入大于等于1的正整数"
                                            }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(_antd.InputNumber, {
                                                className: 'w',
                                                min: 1,
                                                placeholder: '\u8BF7\u8F93\u5165',
                                                onBlur: _this5.handBlur.bind(_this5, "standardCount", index),
                                                onChange: _this5.handChange.bind(_this5, "standardCount", index),
                                                value: item.standardCount })
                                        ))
                                    )
                                ),
                                item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != 1 ? null : _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u536B\u751F\u95F4\u6570\u91CF', className: 'w' },
                                        getFieldDecorator('toiletCount' + index, {
                                            rules: [{
                                                required: false,
                                                message: '此项是必填' }, {
                                                pattern: /^([0-9]\d+)|[0-9]$/,
                                                message: "输入大于等于0的整数"
                                            }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(_antd.InputNumber, {
                                                className: 'w',
                                                min: 0,
                                                placeholder: '\u8BF7\u8F93\u5165',
                                                onBlur: _this5.handBlur.bind(_this5, "toiletCount", index),
                                                onChange: _this5.handChange.bind(_this5, "toiletCount", index),
                                                value: item.toiletCount })
                                        ))
                                    )
                                ),
                                item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != 1 ? null : _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u662F\u5426\u5305\u542B\u5ECA\u9053', className: 'w' },
                                        getFieldDecorator('haveGallery' + index, {
                                            rules: [{
                                                required: false,
                                                message: '此项是必填' }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(
                                                _antd.Radio.Group,
                                                { onChange: _this5.handChange.bind(_this5, "haveGallery", index),
                                                    value: item.haveGallery != undefined && typeof item.haveGallery == "number" ? String(item.haveGallery) : "0" },
                                                _react2.default.createElement(
                                                    _antd.Radio,
                                                    { value: "1" },
                                                    '\u662F'
                                                ),
                                                _react2.default.createElement(
                                                    _antd.Radio,
                                                    { value: "0" },
                                                    '\u5426'
                                                )
                                            )
                                        ))
                                    )
                                ),
                                item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.haveGallery != "1" || item.type != 1 ? null : _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u5E55\u5899\u7C7B\u578B', className: 'w' },
                                        getFieldDecorator('curtainType' + index, {
                                            rules: [{
                                                required: false,
                                                message: '此项是必填' }]
                                        })(_react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(
                                                _antd.Select,
                                                {
                                                    value: item.curtainType != undefined && typeof item.curtainType == "number" ? String(item.curtainType) : "0",
                                                    onChange: _this5.handChange.bind(_this5, "curtainType", index)
                                                },
                                                _react2.default.createElement(
                                                    Option,
                                                    { value: '0' },
                                                    '\u4E0D\u542B'
                                                ),
                                                _react2.default.createElement(
                                                    Option,
                                                    { value: '1' },
                                                    '\u5168\u9690'
                                                ),
                                                _react2.default.createElement(
                                                    Option,
                                                    { value: '2' },
                                                    '\u534A\u9690'
                                                )
                                            )
                                        ))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: '\u5907\u6CE8', className: 'w' }, formItemLayout2),
                                        getFieldDecorator('remark' + index, {
                                            initialValue: item.remark || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(TextArea, {
                                            value: item.remark,
                                            onBlur: _this5.handChange.bind(_this5, "remark", index),
                                            onChange: _this5.handChange.bind(_this5, "remark", index),
                                            rows: 4,
                                            placeholder: '\u8BF7\u8F93\u5165'
                                        }))
                                    )
                                ),
                                item.id != "" && item.id != null && _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: ' ' }, formItemLayout2, { className: 'w', colon: false }),
                                        _react2.default.createElement(
                                            _antd.Popconfirm,
                                            { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
                                                    return _this5.handleDelete(item);
                                                } },
                                            _react2.default.createElement(
                                                _antd.Button,
                                                { type: 'danger' },
                                                '\u5220\u9664\u697C\u680B'
                                            )
                                        )
                                    )
                                )
                            );
                        })
                    )
                ),
                _react2.default.createElement(
                    'div',
                    { style: { width: "80%", margin: "0 auto", padding: "0 25px" } },
                    _react2.default.createElement(
                        _antd.Button,
                        {
                            ghost: true,
                            type: 'primary',
                            icon: 'poweroff',
                            onClick: this.props.reStartHandover,
                            style: constructionState.state1 === 2 ? { display: '' } : { display: 'none' }
                        },
                        '\u91CD\u65B0\u542F\u52A8'
                    ),
                    constructionState.state1 === 2 && _react2.default.createElement(
                        'div',
                        null,
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "15px 0 0 ", fontSize: "16px", fontWeight: "700" } },
                            '\u5DE5\u65F6\u7CFB\u6570: ',
                            main && main.efficiency,
                            ' %'
                        )
                    ),
                    constructionState.state1 === 2 && _react2.default.createElement(_antd.Table, {
                        components: components,
                        className: 'digital_table mt15',
                        rowClassName: function rowClassName() {
                            return 'editable-row';
                        },
                        dataSource: tableDatasource,
                        columns: column,
                        pagination: false,
                        bordered: true,
                        rowKey: function rowKey(record) {
                            return record.id;
                        }
                    })
                ),
                constructionState.state1 === 2 && dataSource.map(function (item) {
                    var name = item.name,
                        planBeginTime = item.planBeginTime,
                        planEndTime = item.planEndTime,
                        layers = item.layers,
                        constructionKey = item.constructionKey,
                        remark = item.remark,
                        standardCount = item.standardCount,
                        toiletCount = item.toiletCount,
                        haveGallery = item.haveGallery,
                        curtainType = item.curtainType,
                        type = item.type;

                    return _react2.default.createElement(
                        'div',
                        { key: "dataSource-" + item.id,
                            style: { width: "80%", margin: "0 auto", marginBottom: "30px", padding: "0 25px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "15px 0", fontSize: "16px", fontWeight: "700" } },
                            name
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'suppliertable', style: { width: "100%" } },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8BA1\u5212\u5F00\u5DE5\u65F6\u95F4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    planBeginTime !== 0 && planBeginTime !== null ? (0, _moment2.default)(planBeginTime).format('YYYY年MM月DD日') : ''
                                )
                            ),
                            item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != undefined && item.type == 1 ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    planEndTime !== 0 && planEndTime !== null ? (0, _moment2.default)(planEndTime).format('YYYY年MM月DD日') : ''
                                )
                            ),
                            item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7C7B\u578B'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    obj3[type]
                                )
                            ),
                            item.type != undefined && item.type != 1 ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5C42\u6570'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    obj[layers]
                                )
                            ),
                            item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != 1 ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6807\u51C6\u7BB1\u6570\u91CF'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    standardCount
                                )
                            ),
                            item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != 1 ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u536B\u751F\u95F4\u6570\u91CF'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    toiletCount
                                )
                            ),
                            item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.type != 1 ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u662F\u5426\u5305\u542B\u5ECA\u9053'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    haveGallery == "1" ? "含有" : "不含"
                                )
                            ),
                            item.bocdesignId != undefined && item.bocdesignId != "" && item.bocdesignId != null || item.haveGallery != "1" || item.type != 1 ? null : _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5E55\u5899\u7C7B\u578B'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    obj2[item.curtainType] || ""
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u5907\u6CE8'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    remark
                                )
                            )
                        )
                    );
                }),
                _react2.default.createElement(
                    'div',
                    { className: 'mt30 mb30', style: constructionState.state1 !== 2 ? {
                            display: 'flex',
                            justifyContent: 'center'
                        } : { display: 'none' } },
                    _react2.default.createElement(
                        _antd.Button,
                        { onClick: this.overCurrentStage,
                            ghost: true,
                            type: 'primary'
                        },
                        ' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
                    ),
                    _react2.default.createElement(
                        _antd.Button,
                        {
                            onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
                        ' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
                    )
                ),
                _react2.default.createElement(
                    'div',
                    { className: 'mt30 mb30', style: constructionState.state1 === 2 ? {
                            display: 'flex',
                            justifyContent: 'center'
                        } : { display: 'none' } },
                    _react2.default.createElement(
                        _antd.Button,
                        { onClick: function onClick() {
                                switchSteps(currentStep + 1);
                            }, style: { marginLeft: '20px' }, type: 'primary' },
                        '\u4E0B\u4E00\u6B65'
                    )
                )
            );
        }
    }]);

    return OneItem;
}(_react2.default.Component)) || _class2) || _class2) || _class2) || _class2);
exports.default = OneItem;

/***/ }),

/***/ 1992:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _dec, _dec2, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _TwoItemView = __webpack_require__(1880);

var _TwoItemView2 = _interopRequireDefault(_TwoItemView);

var _PageSelect = __webpack_require__(1879);

var _PageSelect2 = _interopRequireDefault(_PageSelect);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             *制定施工计划
                                                                                                                                                                                                                             *dangw@bocspace.cn
                                                                                                                                                                                                                             */


var Option = _antd.Select.Option;

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {
			editing: true
		}, _this.toggleEdit = function () {
			var editing = !_this.state.editing;
			_this.setState({ editing: editing }, function () {
				if (editing) {
					_this.input.focus();
				}
			});
		}, _this.save = function (e) {
			var _this$props = _this.props,
			    record = _this$props.record,
			    handleSave = _this$props.handleSave;

			_this.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this.onChange = function (type, e) {
			var _this$props2 = _this.props,
			    record = _this$props2.record,
			    handleSave = _this$props2.handleSave;

			if (record["resType"] != e) {
				var _extends2;

				// 不相等时清空
				handleSave(_extends({}, record, (_extends2 = {}, _defineProperty(_extends2, type, e), _defineProperty(_extends2, "name", ""), _defineProperty(_extends2, "omId", ""), _extends2)));
			} else {
				handleSave(_extends({}, record, _defineProperty({}, type, e)));
			}
		}, _this.updateStore = function (param) {
			var _this$props3 = _this.props,
			    record = _this$props3.record,
			    handleSave = _this$props3.handleSave;

			_this.form.validateFields(function (error, values) {
				values["name"] = param.name;
				values["omId"] = param.id;
				handleSave(_extends({}, record, values));
			});
		}, _this.renderCell = function (form) {
			_this.form = form;
			var _this$props4 = _this.props,
			    children = _this$props4.children,
			    dataIndex = _this$props4.dataIndex,
			    record = _this$props4.record,
			    title = _this$props4.title;
			var editing = _this.state.editing;

			if (dataIndex == "resType") {
				// 资源类型
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{ style: { width: 200 },
							ref: function ref(node) {
								return _this.input = node;
							},
							value: record[dataIndex],
							onChange: _this.onChange.bind(_this, "resType")
						},
						_react2.default.createElement(
							Option,
							{ value: '\u4EBA\u5DE5' },
							'\u4EBA\u5DE5'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u673A\u68B0' },
							'\u673A\u68B0'
						)
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this.toggleEdit
					},
					children
				);
			} else if (dataIndex == "name") {
				// 名称
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 }, className: 'w' },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == "" ? [] : record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ className: 'w' },
						_react2.default.createElement(_PageSelect2.default, {
							disabled: record["resType"] == null || record["resType"] == "" ? true : false,
							type: record["resType"] == "机械" ? "getMachinePageList" : "getWorkerPageList",
							name: record["name"],
							value: record["omId"] || "",
							updateStore: _this.updateStore
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this.toggleEdit
					},
					record[dataIndex] == null || record[dataIndex] == "" ? null : record[dataIndex].join("、")
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.InputNumber, { style: { width: "100%" }, ref: function ref(node) {
							return _this.input = node;
						}, onPressEnter: _this.save, onBlur: _this.save }))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this.toggleEdit
					},
					children
				);
			}
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

var ThreeItem = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = _dec2(_class2 = (0, _reactRouterDom.withRouter)(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(ThreeItem, _React$Component2);

	function ThreeItem(props) {
		_classCallCheck(this, ThreeItem);

		var _this2 = _possibleConstructorReturn(this, (ThreeItem.__proto__ || Object.getPrototypeOf(ThreeItem)).call(this, props));

		_this2.getDetailWorkContentByProjectId = function () {
			_this2.setState({
				loading: true
			}, function () {
				_this2.store.getDetailWorkContentByProjectId(1).then(function (res) {
					if (res) {
						_this2.setState({
							loading: false,
							dataSourceTwo: Array.isArray(res) ? res : []
						});
					} else {
						_this2.setState({
							loading: false
						});
					}
				});
			});
		};

		_this2.getConstructionScheduleDetail = function () {
			var taskDetail = _this2.store.taskDetail;

			_this2.store.getScheduleDetailListByTaskId({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				_this2.setState({
					dataSource: Array.isArray(res) ? res : []
				});
			});
		};

		_this2.calculationSchedule = function (type) {
			var taskDetail = _this2.store.taskDetail;

			var time = (0, _moment2.default)().format('YYYY-MM-DD');
			var params = {
				taskId: mobx.toJS(taskDetail).id,
				projectId: _this2.store.projectId,
				dateTime: (0, _moment2.default)(time).valueOf()
			};
			_this2.store.getCurrentContents(params).then(function (res) {
				if (res) {
					if (type != "1") {
						_antd.message.success("操作成功");
					}
					_this2.setState({
						dataSource: Array.isArray(res) ? res : []
					});

					_this2.getDetailWorkContentByProjectId();
				}
			});
		};

		_this2.tableAdd = function () {
			var tableDatasource = _this2.state.tableDatasource;
			var taskDetail = _this2.store.taskDetail;

			var newData = {
				id: "",
				projectId: _this2.store.projectId,
				taskId: mobx.toJS(taskDetail).id,
				name: "",
				code: "",
				counts: null,
				omId: "",
				resType: ""
			};
			var data = [].concat(_toConsumableArray(tableDatasource), [newData]);
			_this2.saveScheduleResourcesList(data);
		};

		_this2.tableDel = function (index) {
			var tableDatasource = [].concat(_toConsumableArray(_this2.state.tableDatasource));
			tableDatasource.splice(index, 1);
			_this2.saveScheduleResourcesList(tableDatasource);
			_antd.message.success("删除成功");
		};

		_this2.tableSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this2.state.tableDatasource));
			var index = newData.findIndex(function (item) {
				return row.id === item.id;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this2.saveScheduleResourcesList(newData);
		};

		_this2.saveScheduleResourcesList = function (data) {
			var params = {
				list: data,
				type: 1
			};
			_this2.store.saveScheduleResourcesList(params).then(function (res) {
				_this2.setState({
					tableDatasource: res
				});
			});
		};

		_this2.handleChange2 = function (type, value) {
			var obj = JSON.parse(JSON.stringify(_this2.state.main));
			obj[type] = value;
			_this2.setState({
				main: Object.assign({}, obj)
			});
		};

		_this2.handBlur2 = function () {
			_this2.store.saveConstructionMain(_this2.state.main).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					_this2.setState({
						main: Object.assign({}, res)
					});
				}
			});
		};

		_this2.store = _this2.props.DeliveryStore;
		_this2.state = {
			tableDatasource: [], // 表格数据源
			dataSource: [],
			dataSourceTwo: [],
			loading: false,
			main: {
				"efficiency": 100,
				"currentEfficiency": 100
			}
		};
		return _this2;
	}

	_createClass(ThreeItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var taskDetail = this.store.taskDetail;

			this.store.getScheduleResourcesListByTaskId({
				"type": 1,
				"taskId": mobx.toJS(taskDetail).id
			}).then(function (res) {
				_this3.setState({
					tableDatasource: res == null ? [] : res
				});
			});
			this.calculationSchedule("1");
			this.store.getConstructionMainByProjectId().then(function (res) {
				if (res) {
					_this3.setState({
						main: res
					});
				}
			});
		}

		// 计算排期


		// 表格新增


		// 表格删除


		// 表格报存

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var currentStep = this.props.currentStep;
			var _state = this.state,
			    dataSource = _state.dataSource,
			    tableDatasource = _state.tableDatasource,
			    dataSourceTwo = _state.dataSourceTwo,
			    loading = _state.loading,
			    main = _state.main;

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columns = [{
				title: '操作',
				dataIndex: 'opater',
				width: '80px',
				align: 'center',
				render: function render(text, record, index) {
					return _react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return _this4.tableDel(index);
							} },
						_react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
					);
				}
			}, {
				title: '序号',
				dataIndex: 'key',
				width: '80px',
				align: 'center',
				render: function render(text, record, index) {
					return '' + (index + 1);
				}
			}, {
				title: '资源类型',
				dataIndex: 'resType',
				align: 'center',
				width: '200px',
				editable: true
			}, {
				title: '名称',
				dataIndex: 'name',
				align: 'center',
				editable: true
			}, {
				title: '数量',
				dataIndex: 'counts',
				align: 'center',
				editable: true
			}];
			var column = columns.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.tableSave
						};
					}
				});
			});
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: { span: 3 },
				wrapperCol: { span: 12 }
			};
			return _react2.default.createElement(
				'div',
				{ className: 'pb50' },
				_react2.default.createElement(
					_antd.Form,
					_extends({ layout: 'inline' }, formItemLayout),
					_react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15],
							style: {
								margin: "0"
							} },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5DE5\u65F6\u7CFB\u6570', className: 'w' },
								getFieldDecorator('currentEfficiency')(_react2.default.createElement(
									'div',
									{ className: 'w' },
									_react2.default.createElement(_antd.InputNumber, {
										className: 'w',
										min: 0,
										max: 500,
										formatter: function formatter(value) {
											return value + '%';
										},
										parser: function parser(value) {
											return value.replace('%', '');
										},
										onChange: this.handleChange2.bind(this, "currentEfficiency"),
										onBlur: this.handBlur2,
										value: main.currentEfficiency
									})
								))
							)
						)
					)
				),
				_react2.default.createElement(
					_antd.Button,
					{ disabled: loading, onClick: this.calculationSchedule, type: 'primary' },
					'\u8BA1\u7B97\u6392\u671F'
				),
				_react2.default.createElement(_antd.Table, {
					components: components,
					className: 'digital_table mt15 mb15',
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					dataSource: tableDatasource,
					columns: column,
					pagination: false,
					bordered: true,
					rowKey: function rowKey(record) {
						return record.id;
					}
				}),
				_react2.default.createElement(_antd.Icon, { onClick: this.tableAdd,
					type: 'plus-circle',
					style: {
						position: "relative",
						left: "28px",
						fontSize: "18px",
						color: "#609AF1",
						cursor: "pointer",
						marginBottom: "15px"
					} }),
				_react2.default.createElement(
					'div',
					{ ref: function ref(node) {
							_this4.container = node;
						} },
					_react2.default.createElement(_TwoItemView2.default, {
						disabled: loading,
						type: 'three',
						currentStep: currentStep,
						parentContainer: this.container,
						dataSource: dataSource,
						dataSourceTwo: dataSourceTwo,
						reStartHandover: this.props.reStartHandover,
						store: this.store })
				)
			);
		}
	}]);

	return ThreeItem;
}(_react2.default.Component)) || _class2) || _class2) || _class2) || _class2);
exports.default = ThreeItem;

/***/ }),

/***/ 1993:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactCalendarTimeline = __webpack_require__(2201);

var _reactCalendarTimeline2 = _interopRequireDefault(_reactCalendarTimeline);

__webpack_require__(2166);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 进度图分段显示组件
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * dangw@bocspace.cn
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * */


var TimelineTable = function (_Component) {
	_inherits(TimelineTable, _Component);

	function TimelineTable(props) {
		_classCallCheck(this, TimelineTable);

		var _this = _possibleConstructorReturn(this, (TimelineTable.__proto__ || Object.getPrototypeOf(TimelineTable)).call(this, props));

		_this.init = function () {
			var dataSource = _this.state.dataSource;

			var newData = JSON.parse(JSON.stringify(dataSource));
			var items = [];
			var groups = [];
			var minTimes = []; // 计算最小值
			var maxTimes = []; // 计算最大值
			newData.forEach(function (item) {
				var obj = Object.assign({}, {
					id: item.id,
					group: item.parentId == null ? 0 : item.parentId,
					title: "", //item.name,
					start_time: item.planBeginTime == 0 || item.planBeginTime == null ? (0, _moment2.default)() : item.planBeginTime,
					end_time: item.planEndTime == 0 || item.planEndTime == null ? (0, _moment2.default)() : item.planEndTime,
					bgColor: item.currentProgress == 100 || item.needWorkTime == 0 ? "#F5F5F5" : "#2196F3"
				});
				var obj2 = Object.assign({}, {
					id: item.parentId,
					title: item.name,
					height: 39
				});
				items.push(obj);
				groups.push(obj2);

				if (item.planBeginTime != 0 && item.planBeginTime != null) {
					minTimes.push(item.planBeginTime);
				}
				if (item.planEndTime != 0 && item.planEndTime != null) {
					maxTimes.push(item.planEndTime);
				}
			});

			//groups 去重

			// 封装去重方法
			function removalRepeat(arr) {
				var map = new Map();
				var _iteratorNormalCompletion = true;
				var _didIteratorError = false;
				var _iteratorError = undefined;

				try {
					for (var _iterator = arr[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
						var i = _step.value;

						map.set(i.id, i);
					}
				} catch (err) {
					_didIteratorError = true;
					_iteratorError = err;
				} finally {
					try {
						if (!_iteratorNormalCompletion && _iterator.return) {
							_iterator.return();
						}
					} finally {
						if (_didIteratorError) {
							throw _iteratorError;
						}
					}
				}

				arr = [].concat(_toConsumableArray(map.values()));
				//console.log(arr)
				return arr;
			}
			var groupData = removalRepeat(groups);
			_this.setState({
				items: items,
				groups: groupData,
				defaultTimeStart: Math.min.apply(Math, minTimes),
				defaultTimeEnd: Math.max.apply(Math, maxTimes),
				visibleTimeStart: Math.min.apply(Math, minTimes)
			});
		};

		_this.itemRenderer = function (_ref) {
			var item = _ref.item,
			    timelineContext = _ref.timelineContext,
			    itemContext = _ref.itemContext,
			    getItemProps = _ref.getItemProps,
			    getResizeProps = _ref.getResizeProps;

			var _getResizeProps = getResizeProps(),
			    leftResizeProps = _getResizeProps.left,
			    rightResizeProps = _getResizeProps.right;
			//const borderColor = itemContext.resizing ? "red" : item.bgColor;


			var backgroundColor = itemContext.selected ? itemContext.dragging ? "red" : item.selectedBgColor : item.bgColor;
			return _react2.default.createElement(
				"div",
				getItemProps({
					style: {
						backgroundColor: backgroundColor,
						color: item.color
						//borderColor,
					}
				}),
				itemContext.useResizeHandle ? _react2.default.createElement("div", leftResizeProps) : null,
				_react2.default.createElement(
					"div",
					{
						style: {
							height: itemContext.dimensions.height,
							overflow: "hidden",
							paddingLeft: 3,
							textOverflow: "ellipsis",
							whiteSpace: "nowrap"
						}
					},
					itemContext.title
				),
				itemContext.useResizeHandle ? _react2.default.createElement("div", rightResizeProps) : null
			);
		};

		_this.handleTimeChangeFirst = function (visibleTimeStart, visibleTimeEnd, updateScrollCanvas) {
			//console.log("first", visibleTimeStart, visibleTimeEnd);
			_this.setState({ visibleTimeStart: visibleTimeStart, visibleTimeEnd: visibleTimeEnd });
		};

		_this.state = {
			groups: [],
			items: [],
			dataSource: [],
			defaultTimeStart: (0, _moment2.default)().add(-12, 'day'),
			defaultTimeEnd: (0, _moment2.default)().add(12, 'day'),
			visibleTimeStart: (0, _moment2.default)().add(-12, 'day'),
			visibleTimeEnd: (0, _moment2.default)().add(12, 'day')
		};
		return _this;
	}

	_createClass(TimelineTable, [{
		key: "componentWillReceiveProps",
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.parse(JSON.stringify(this.state.dataSource)) != JSON.parse(JSON.stringify(nextProps.dataSource))) {
				this.setState({
					dataSource: nextProps.dataSource
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: "componentDidMount",
		value: function componentDidMount() {
			var _this3 = this;

			this.setState({
				dataSource: this.props.dataSource
			}, function () {
				_this3.init();
			});
		}
	}, {
		key: "render",
		value: function render() {
			var _state = this.state,
			    items = _state.items,
			    groups = _state.groups,
			    defaultTimeStart = _state.defaultTimeStart,
			    defaultTimeEnd = _state.defaultTimeEnd,
			    visibleTimeStart = _state.visibleTimeStart,
			    visibleTimeEnd = _state.visibleTimeEnd;

			var defaultTimeStart2 = (0, _moment2.default)().add(-12, 'day');
			var defaultTimeEnd2 = (0, _moment2.default)().add(12, 'day');
			return items.length > 0 && _react2.default.createElement(
				_reactCalendarTimeline2.default,
				{
					groups: groups,
					items: items,
					timeSteps: {
						day: 1
					}
					//defaultTimeStart={defaultTimeStart}
					//defaultTimeEnd={defaultTimeEnd2}
					, itemRenderer: this.itemRenderer,
					itemTouchSendsClick: false,
					canMove: false,
					canResize: false,
					canSelect: false,
					visibleTimeStart: visibleTimeStart,
					visibleTimeEnd: defaultTimeEnd,
					onTimeChange: this.handleTimeChangeFirst
				},
				_react2.default.createElement(
					_reactCalendarTimeline.TimelineHeaders,
					{ className: "sticky" },
					_react2.default.createElement(
						_reactCalendarTimeline.SidebarHeader,
						null,
						function (_ref2) {
							var getRootProps = _ref2.getRootProps;

							return _react2.default.createElement(
								"div",
								_extends({}, getRootProps(), { className: "constructionSchedule-title" }),
								"\u4EFB\u52A1\u540D\u79F0"
							);
						}
					),
					_react2.default.createElement(_reactCalendarTimeline.DateHeader, { unit: "primaryHeader" }),
					_react2.default.createElement(_reactCalendarTimeline.DateHeader, null)
				)
			);
		}
	}]);

	return TimelineTable;
}(_react.Component);

exports.default = TimelineTable;

/***/ }),

/***/ 1994:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _dec, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _TwoItemView = __webpack_require__(1880);

var _TwoItemView2 = _interopRequireDefault(_TwoItemView);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             *制定施工计划
                                                                                                                                                                                                                             *dangw@bocspace.cn
                                                                                                                                                                                                                             */


var Option = _antd.Select.Option;
var confirm = _antd.Modal.confirm;

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: false
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (type, e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				_this2.toggleEdit();
				handleSave(_extends({}, record, _defineProperty({}, type, values[type])));
			});
		}, _this2.handleAdd = function () {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSaveNew = _this2$props2.handleSaveNew;

			var recordData = JSON.parse(JSON.stringify(record));
			var id = recordData.id;
			// 记录当前下一行数据
			var active = Object.assign(recordData, {
				id: "",
				name: "新增任务",
				remark: "",
				prerequisiteName: "",
				needWorkTime: 0,
				planBeginTime: recordData.planBeginTime,
				planEndTime: recordData.planBeginTime,
				adjunction: 1
			});
			handleSaveNew(id, active);
		}, _this2.handleDelete = function () {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleDel = _this2$props3.handleDel;

			var recordData = JSON.parse(JSON.stringify(record));
			var id = recordData.id;
			handleDel(id);
		}, _this2.handleChangeSel = function (e) {
			var _this2$props4 = _this2.props,
			    record = _this2$props4.record,
			    handleSave = _this2$props4.handleSave;

			handleSave(_extends({}, record, { "prerequisiteName": e }));
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props5 = _this2.props,
			    children = _this2$props5.children,
			    dataIndex = _this2$props5.dataIndex,
			    record = _this2$props5.record,
			    title = _this2$props5.title,
			    dataSource = _this2$props5.dataSource;
			var editing = _this2.state.editing;

			var content = _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					'p',
					{ style: { color: "#1791FF", cursor: "pointer" }, onClick: _this2.handleAdd },
					_react2.default.createElement(_antd.Icon, { type: 'plus-circle' }),
					'\xA0\u5728\u4E0B\u65B9\u63D2\u5165\u884C'
				),
				_react2.default.createElement(
					'p',
					{ style: { color: "#E97C6F", cursor: "pointer" }, onClick: _this2.handleDelete },
					_react2.default.createElement(_antd.Icon, { type: 'minus-circle' }),
					'\xA0\u5220\u9664\u6240\u5728\u884C'
				)
			);
			if (dataIndex == "needWorkTime") {
				// 时间
				return editing && record.level == 3 || record.adjunction == 1 ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.InputNumber, { ref: function ref(node) {
							return _this2.input = node;
						}
						//onPressEnter={this.save.bind(this, dataIndex)}
						, onBlur: _this2.save.bind(_this2, dataIndex) }))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: record.level == 3 ? _this2.toggleEdit : null
					},
					children
				);
			} else if (dataIndex == "prerequisiteName" && record.adjunction == 1) {
				// 前置任务
				var parentId = record.parentId;
				var filterData = dataSource.filter(function (item) {
					return item.parentId == parentId && item.id != record.id;
				}); // 过滤
				return _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{
							style: { width: "100%" },
							onChange: _this2.handleChangeSel },
						filterData.map(function (item, index) {
							return _react2.default.createElement(
								Option,
								{ value: item.name, key: item.id == null || item.id == "" ? "prerequisiteName-" + index : item.id },
								item.name
							);
						})
					))
				);
			} else {
				return editing && record.level == 3 || record.adjunction ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					record.adjunction == 1 && dataIndex == "name" ? _react2.default.createElement(
						_antd.Popover,
						{ placement: 'rightTop', content: content, trigger: 'click' },
						_react2.default.createElement(
							'span',
							{ style: { cursor: "pointer", width: "16px", fontSize: "18px", display: "inline-block", position: "relative", top: "-3px" } },
							'...'
						)
					) : "",
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
							return _this2.input = node;
						},
						onBlur: _this2.save.bind(_this2, dataIndex) }))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: {
							paddingLeft: dataIndex == "name" ? record.level * 8 + "px" : 0,
							paddingRight: 24, minHeight: "34px" },
						onClick: record.level == 3 ? _this2.toggleEdit : null
					},
					dataIndex == "name" ? _react2.default.createElement(
						'span',
						null,
						record.parentId !== null ? _react2.default.createElement(
							_antd.Popover,
							{ placement: 'rightTop', content: content, trigger: 'click' },
							_react2.default.createElement(
								'span',
								{ style: { width: "16px", fontSize: "18px", display: "inline-block", position: "relative", top: "-3px" } },
								'...'
							)
						) : "",
						' ',
						(record.code == null ? "" : record.code) + " " + record.name
					) : children
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	// 新增下一行


	// 删除当前行


	// 前置任务


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    handleSaveNew = _props.handleSaveNew,
			    handleDel = _props.handleDel,
			    dataSource = _props.dataSource,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'handleSaveNew', 'handleDel', 'dataSource', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

var TwoItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = (0, _reactRouterDom.withRouter)(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(TwoItem, _React$Component2);

	function TwoItem(props) {
		_classCallCheck(this, TwoItem);

		var _this3 = _possibleConstructorReturn(this, (TwoItem.__proto__ || Object.getPrototypeOf(TwoItem)).call(this, props));

		_this3.getConstructionScheduleDetail = function () {
			var taskDetail = _this3.store.taskDetail;

			_this3.setState({
				loading: true
			}, function () {
				_this3.store.getScheduleDetailListByTaskId({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
					_this3.setState({
						dataSource: Array.isArray(res) ? res : [],
						loading: false
					});
				});
			});
		};

		_this3.overCurrentStage = function () {
			// 校验
			var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
			var requireSource = dataSource.filter(function (item) {
				return item.planBeginTime != undefined;
			});
			if (dataSource.length == 0) {
				_antd.message.warn("请先完成施工要素");
				return false;
			}
			if (requireSource.some(function (item) {
				return item.planBeginTime == null || item.planBeginTime == "" || item.planBeginTime == 0;
			})) {
				_antd.message.warn("请完善当前阶段的必填信息");
				return false;
			}
			// 详情态
			_this3.props.overCurrentStageTask();
			_this3.getDetailWorkContentByProjectId();
		};

		_this3.disabledDate = function (current) {
			var _this3$state = _this3.state,
			    begin = _this3$state.begin,
			    end = _this3$state.end;

			return current < begin || current > end;
		};

		_this3.handDate = function (record, date, dateString) {
			var param = Object.assign({}, record, { "earlyPlanBeginTime": dateString == null || dateString == "" ? 0 : (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf() });
			var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
			var index = dataSource.findIndex(function (item) {
				return item.id == param.id;
			});
			// 插入数据
			dataSource.splice(index, 1, param);

			var taskDetail = mobx.toJS(_this3.store.taskDetail);
			var params = {
				taskId: taskDetail.id,
				contents: dataSource
			};
			_this3.store.saveScheduleWorkContent(params).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					// 重查列表
					_this3.getConstructionScheduleDetail();
					_this3.props.getConfirmSupplierState();
				}
			});
		};

		_this3.onFocus = function (record) {
			if (record.level != undefined && record.level == 2) {
				var params = {
					detailId: record.detailId
				};
				_this3.store.getPlanBeginTimeRange(params).then(function (res) {
					var data = typeof res == "string" ? JSON.parse(res) : res;
					if (Array.isArray(data) && data.length > 0) {
						_this3.setState({
							begin: data[0],
							end: data[1]
						});
					}
				});
			} else if (record.level != undefined && record.level == 3) {
				var _params = {
					detailId: record.detailId
				};
				_this3.store.getMaterialTimeRange(_params).then(function (res) {
					var data = typeof res == "string" ? JSON.parse(res) : res;
					if (Array.isArray(data) && data.length > 0) {
						_this3.setState({
							begin: data[0],
							end: data[1]
						});
					}
				});
			}
		};

		_this3.handleSave = function (row) {
			var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
			var param = JSON.parse(JSON.stringify(row));
			var index = dataSource.findIndex(function (item) {
				return item.id == param.id;
			});
			// 插入数据
			dataSource.splice(index, 1, param);

			var taskDetail = mobx.toJS(_this3.store.taskDetail);
			var params = {
				taskId: taskDetail.id,
				contents: dataSource
			};
			_this3.store.saveScheduleWorkContent(params).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					// 重查列表
					_this3.getConstructionScheduleDetail();
					_this3.props.getConfirmSupplierState();
				}
			});
		};

		_this3.handleSaveNew = function (id, row) {
			var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
			var index = dataSource.findIndex(function (item) {
				return item.id == id;
			}) + 1;
			// 插入数据
			dataSource.splice(index, 0, row);
			var taskDetail = mobx.toJS(_this3.store.taskDetail);
			var params = {
				taskId: taskDetail.id,
				contents: dataSource
			};
			_this3.store.saveScheduleWorkContent(params).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					// 重查列表
					_this3.getConstructionScheduleDetail();
					_this3.props.getConfirmSupplierState();
				}
			});
		};

		_this3.handleDel = function (id) {
			var _this = _this3;
			confirm({
				title: '确定要删除吗?',
				okText: '是',
				okType: 'danger',
				cancelText: '否',
				onOk: function onOk() {
					var dataSource = JSON.parse(JSON.stringify(_this.state.dataSource));
					var index = dataSource.findIndex(function (item) {
						return item.id == id;
					});
					// 插入数据
					dataSource.splice(index, 1);
					var taskDetail = mobx.toJS(_this.store.taskDetail);
					var params = {
						taskId: taskDetail.id,
						contents: dataSource
					};
					_this.store.saveScheduleWorkContent(params).then(function (res) {
						if (res) {
							_antd.message.success("操作成功");
							// 重查列表
							_this.getConstructionScheduleDetail();
							_this.props.getConfirmSupplierState();
						}
					});
				},
				onCancel: function onCancel() {
					console.log('Cancel');
				}
			});
		};

		_this3.calculationSchedule = function () {
			var constructionState = _this3.store.constructionState;

			if (constructionState.state1 != 2) {
				_antd.message.warn("请完成施工要素");
				return false;
			}
			var dataSource = JSON.parse(JSON.stringify(_this3.state.dataSource));
			_this3.setState({
				loading: true
			}, function () {
				_this3.store.calculationSchedule(dataSource).then(function (res) {
					if (res) {
						_antd.message.success("操作成功");
						_this3.setState({
							dataSource: Array.isArray(res) ? res : [],
							loading: false
						});
					}
				});
			});
		};

		_this3.getDetailWorkContentByProjectId = function () {
			_this3.setState({
				loading: true
			}, function () {
				_this3.store.getDetailWorkContentByProjectId(0).then(function (res) {
					if (res) {
						_this3.setState({
							loading: false,
							dataSourceTwo: Array.isArray(res) ? res : []
						});
					}
				});
			});
		};

		_this3.store = _this3.props.DeliveryStore;
		_this3.state = {
			dataSource: [],
			begin: 0,
			end: 0,
			data: [], // 右侧数据
			dataSourceTwo: [], // 表二数据
			loading: false
		};
		return _this3;
	}

	_createClass(TwoItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			var constructionState = mobx.toJS(this.store.constructionState);
			if (constructionState.state2 === 2) {
				this.getDetailWorkContentByProjectId();
				this.getConstructionScheduleDetail();
			} else {
				this.getConstructionScheduleDetail();
			}
		}

		// 可用范围


		// 获取焦点


		// 插入当前行


		// 删除当前行


		// 计算排期

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var constructionState = this.store.constructionState;
			var _props2 = this.props,
			    currentStep = _props2.currentStep,
			    switchSteps = _props2.switchSteps;
			var _state = this.state,
			    dataSource = _state.dataSource,
			    dataSourceTwo = _state.dataSourceTwo,
			    loading = _state.loading;

			var columns = [{
				title: '施工任务',
				dataIndex: 'name',
				key: 'name',
				align: 'left',
				editable: true
			}, {
				title: '工作内容',
				dataIndex: 'remark',
				key: 'remark',
				align: 'left',
				editable: true
			}, {
				title: '前置任务',
				dataIndex: 'prerequisiteName',
				key: 'prerequisiteName',
				align: 'left',
				editable: true
			}, {
				title: '计划用时（天）',
				dataIndex: 'needWorkTime',
				key: 'needWorkTime',
				align: 'center',
				width: "150px",
				editable: true
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u8BA1\u5212\u5F00\u59CB\u65F6\u95F4'
				),
				dataIndex: 'earlyPlanBeginTime',
				key: 'earlyPlanBeginTime',
				align: 'center',
				width: "200px",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						null,
						_react2.default.createElement(_antd.DatePicker, {
							allowClear: false,
							key: record.id,
							style: { width: "120px" },
							format: 'YYYY-MM-DD',
							placeholder: '\u8BF7\u9009\u62E9',
							value: text == null || text == 0 ? record.planBeginTime == null || record.planBeginTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(record.planBeginTime).format('YYYY-MM-DD'), "YYYY-MM-DD") : (0, _moment2.default)((0, _moment2.default)(text).format('YYYY-MM-DD'), "YYYY-MM-DD"),
							onChange: _this4.handDate.bind(_this4, record)
						})
					);
				}
			}, {
				title: '计划完成时间',
				dataIndex: 'planEndTime',
				key: 'planEndTime',
				align: 'center',
				width: "200px",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						null,
						text !== 0 && text !== null && text !== undefined ? (0, _moment2.default)(text).format('MM月DD日') : ''
					);
				}
			}];
			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var colum = columns.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							handleSaveNew: _this4.handleSaveNew,
							handleDel: _this4.handleDel,
							dataSource: dataSource
						};
					}
				});
			});
			return _react2.default.createElement(
				'div',
				{ className: constructionState.state2 === 2 ? "" : "mt30" },
				_react2.default.createElement(
					'div',
					{ ref: function ref(node) {
							_this4.container = node;
						} },
					_react2.default.createElement(
						'div',
						{ className: constructionState.state2 === 2 ? "hidden" : "" },
						_react2.default.createElement(
							_antd.Button,
							{
								disabled: loading,
								onClick: this.calculationSchedule, type: 'primary', className: 'mb15' },
							'\u8BA1\u7B97\u6392\u671F'
						),
						_react2.default.createElement(_antd.Table, {
							dataSource: dataSource,
							components: components,
							columns: colum,
							pagination: false,
							bordered: true,
							rowClassName: function rowClassName(record) {
								if (record.level == 0) {
									return "construct_trone";
								} else if (record.level == 1) {
									return "construct_trtwo";
								} else if (record.level == 2) {
									return "construct_trthree";
								} else if (record.level == 3) {
									return "construct_trfour editable-row";
								} else {
									return "";
								}
							},
							className: 'agenda_nohover construction_table digital_table'
						})
					),
					constructionState.state2 === 2 && _react2.default.createElement(_TwoItemView2.default, {
						disabled: loading,
						parentContainer: this.container,
						dataSource: dataSource,
						dataSourceTwo: dataSourceTwo,
						reStartHandover: this.props.reStartHandover,
						store: this.store }),
					_react2.default.createElement(
						'div',
						{ className: 'mt30 mb30', style: constructionState.state2 !== 2 ? {
								display: 'flex',
								justifyContent: 'center'
							} : { display: 'none' } },
						_react2.default.createElement(
							_antd.Button,
							{ onClick: this.overCurrentStage,
								ghost: true,
								type: 'primary',
								disabled: loading
							},
							' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt10', style: constructionState.state2 === 2 ? {
								display: 'flex',
								justifyContent: 'center'
							} : { display: 'none' } },
						_react2.default.createElement(
							_antd.Button,
							{
								disabled: loading,
								onClick: function onClick() {
									switchSteps(currentStep - 1);
								}, style: { marginLeft: '20px' }, type: 'primary' },
							'\u4E0A\u4E00\u6B65'
						)
					)
				)
			);
		}
	}]);

	return TwoItem;
}(_react2.default.Component)) || _class2) || _class2) || _class2);
exports.default = TwoItem;

/***/ }),

/***/ 2004:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 干系人分析 - 沟通方式
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CommunicationWay = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(CommunicationWay, _React$Component);

	function CommunicationWay(props) {
		_classCallCheck(this, CommunicationWay);

		var _this = _possibleConstructorReturn(this, (CommunicationWay.__proto__ || Object.getPrototypeOf(CommunicationWay)).call(this, props));

		_this.showModal = function () {
			_this.setState({
				visible: true
			}, function () {
				_this.store.getBuildTeamFourItemListByProjectId().then(function (res) {
					_this.setState({
						defaultData: res.map(function (item) {
							return Object.assign(item, { selected: false });
						})
					}, function () {
						_this.init();
					});
				});
			});
		};

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.id === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			});
		};

		_this.handleOk = function (e) {
			_this.setState({
				visible: false
			}, function () {
				var defaultDatas = JSON.parse(JSON.stringify(_this.state.data));
				var active = defaultDatas.filter(function (item) {
					return item.selected == true;
				});
				_this.props.updateWay(active);
			});
		};

		_this.handleCancel = function (e) {
			_this.setState({
				visible: false
			});
		};

		_this.onChange = function (type, e) {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.data));
			defaultDatas[type].selected = e.target.checked;
			_this.setState({
				data: defaultDatas
			});
		};

		_this.handleDel = function (index) {
			_this.props.handleDel(index);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			visible: false,
			defaultData: [],
			data: [],
			oldSelect: []
		};
		return _this;
	}

	_createClass(CommunicationWay, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var _this2 = this;

			if (JSON.stringify(nextProps.data) != JSON.stringify(this.props.data)) {
				this.setState({
					oldSelect: nextProps.data || []
				}, function () {
					_this2.init();
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			this.store.getBuildTeamFourItemListByProjectId().then(function (res) {
				_this3.setState({
					oldSelect: _this3.props.data || [],
					defaultData: res.map(function (item) {
						return Object.assign(item, { selected: false });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    visible = _state.visible,
			    data = _state.data,
			    oldSelect = _state.oldSelect;


			return _react2.default.createElement(
				'div',
				{ className: '' },
				_react2.default.createElement(
					_antd.Button,
					{ type: 'link', className: 'dib', style: { verticalAlign: "top", position: 'relative',
							top: '5px' }, onClick: this.showModal },
					'\u9009\u62E9'
				),
				_react2.default.createElement(
					'div',
					{ className: 'dib' },
					oldSelect != undefined && oldSelect != null && oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'p',
							{ key: item.id },
							item.rule,
							' ',
							item.frequency == null || item.frequency == "" ? null : " - " + item.frequency,
							' ',
							_react2.default.createElement(_antd.Icon, { type: 'delete', onClick: _this4.handleDel.bind(_this4, index), style: { color: "#57ACFF" } })
						);
					})
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: '\u9009\u62E9\u6C9F\u901A\u65B9\u5F0F',
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel,
						centered: true
					},
					_react2.default.createElement(
						_antd.Row,
						null,
						data.map(function (item, index) {
							return _react2.default.createElement(
								_antd.Col,
								{ span: '8', key: item.id },
								_react2.default.createElement(
									_antd.Checkbox,
									{ checked: item.selected,
										onChange: _this4.onChange.bind(_this4, index) },
									item.rule
								)
							);
						})
					)
				)
			);
		}
	}]);

	return CommunicationWay;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = CommunicationWay;

/***/ }),

/***/ 2005:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交付管理-日报列表
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _reactCustomScrollbars = __webpack_require__(336);

var _reactInfiniteScroller = __webpack_require__(1529);

var _reactInfiniteScroller2 = _interopRequireDefault(_reactInfiniteScroller);

var _antd = __webpack_require__(17);

var _DailyView = __webpack_require__(2008);

var _DailyView2 = _interopRequireDefault(_DailyView);

var _EmailSetting = __webpack_require__(2009);

var _EmailSetting2 = _interopRequireDefault(_EmailSetting);

var _events = __webpack_require__(33);

var _events2 = _interopRequireDefault(_events);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Daily = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(Daily, _React$Component);

    function Daily(props) {
        _classCallCheck(this, Daily);

        var _this = _possibleConstructorReturn(this, (Daily.__proto__ || Object.getPrototypeOf(Daily)).call(this, props));

        _this.getDailyListPage = function () {
            var projectDetail = _this.store.projectDetail;

            _this.store.dailyParmas.projectId = mobx.toJS(projectDetail).id;
            _this.setState({ projectId: mobx.toJS(projectDetail).id });
            if (_this.store.dailyListHasMore) {
                _this.store.dailyListLoading = true;
                _this.store.getDailyListPage().then(function (res) {
                    if (res.body.length === 0 && res.pageIndex === 1) {
                        _this.store.dailyListHasMore = false;
                        _this.store.dailyListLoading = false;
                        _this.store.dailyList = Object.assign([]);
                        return false;
                    }

                    if (res && res['body'].length > 0) {
                        var tempData = mobx.toJS(_this.store.dailyList);

                        _this.store.dailyList = tempData.concat(res.body);
                        _this.store.dailyParmas.pageIndex = res.pageIndex + 1;
                        _this.store.dailyParmas.pageSize = res.pageSize;
                        _this.store.dailyParmas.totalCount = res.totalCount;

                        _this.handleSelectedDaily(res.body[0], 0);
                    }
                    _this.store.dailyListLoading = false;
                });
            }
        };

        _this.getProgressStateInfo = function (state) {
            var info = "";
            if (state === 0) {
                info = "正常";
            }
            if (state === 1) {
                info = "提前";
            }
            if (state === 2) {
                info = "延迟";
            }
            return info;
        };

        _this.handleSelectedDaily = function (item, index) {
            _this.setState({ currentItem: index });
            _this.store.getDailyById({ "id": item.id }).then(function (res) {
                _this.store.dailyDetail = Object.assign({}, res, {
                    dailyProjectPhotos: res.dailyProjectPhotos == null ? [{
                        id: "",
                        projectId: "",
                        place: "",
                        imageDocs: [],
                        createTime: 0
                    }, {
                        id: "",
                        projectId: "",
                        place: "",
                        imageDocs: [],
                        createTime: 0
                    }, {
                        id: "",
                        projectId: "",
                        place: "",
                        imageDocs: [],
                        createTime: 0
                    }, {
                        id: "",
                        projectId: "",
                        place: "",
                        imageDocs: [],
                        createTime: 0
                    }] : res.dailyProjectPhotos
                });
            });
        };

        _this.addNewLog = function () {
            _this.store.dailyPageState = 1;
            _this.store.dailyDetail = Object.assign({}, {
                "id": null,
                "date": null,
                "title": null,
                "progressState": null,
                "weather": null,
                "windPower": null,
                "overallDescription": null,
                "contentRemarks": null,
                "workersCount": null,
                "material": null,
                "summary": null,
                "tomorrowPlanRemarks": null,
                "tomorrowWeather": null,
                "tomorrowWindPower": null,
                "tomorrowMaterial": null,
                "assistance": null,
                "saveType": null,
                "createTime": 0,
                "likeCount": 0,
                "commentCount": 0,
                "readCount": 0,
                "contents": [],
                "tomorrowContents": [],
                "projectId": null,
                "comments": [],
                "likeUsers": [],
                "dailyDocuments": [],
                "createUser": null,
                "createUserName": null,
                "noArriveMaterials": [],
                "materialInfluence": null,
                "tomorrowPlanArriveMaterial": [],
                "arrivalCount": null,
                "installCount": null,
                "onWayCount": null,
                "distributionJson": "",
                "driverName": "",
                "driverPhone": "",
                "dailyProjectPhotos": [{
                    id: "",
                    projectId: "",
                    place: "",
                    imageDocs: [],
                    createTime: 0
                }, {
                    id: "",
                    projectId: "",
                    place: "",
                    imageDocs: [],
                    createTime: 0
                }, {
                    id: "",
                    projectId: "",
                    place: "",
                    imageDocs: [],
                    createTime: 0
                }, {
                    id: "",
                    projectId: "",
                    place: "",
                    imageDocs: [],
                    createTime: 0
                }]
            });
        };

        _this.getTodayContentInfo = function (item) {
            if (item.contents.length >= 2) {

                return '' + item.contents[0]['position'] + item.contents[0]['productDetail'] + '\u5B8C\u6210' + item.contents[0]['actualProgress'] + '%\uFF0C' + item.contents[1]['position'] + item.contents[1]['productDetail'] + '\u5B8C\u6210' + item.contents[1]['actualProgress'] + '%';
            }
            if (item.contents.length > 0) {
                return '' + item.contents[0]['position'] + item.contents[0]['productDetail'] + '\u5B8C\u6210' + item.contents[0]['actualProgress'] + '%';
            }
        };

        _this.onClick = function (e) {
            var key = e.key;

            var taskDetail = JSON.parse(JSON.stringify(_this.store.taskDetail));
            if (key == "1") {
                taskDetail.state = 1;
            } else if (key == "2") {
                taskDetail.state = 10;
            }
            _this.store.updateTask({ task: taskDetail }).then(function (res) {
                if (res) {
                    _antd.message.success("操作成功");
                    _this.store.taskDetail = Object.assign({}, res);
                    _events2.default.emit("getProjectState", {});
                }
            });
        };

        _this.handleInfiniteOnLoad = function () {

            if (_this.store.dailyListHasMore) {
                _this.getDailyListPage();
            }
        };

        _this.uniqueDatas = function (dataArray) {
            var result = {};
            var finalResult = [];
            for (var i = 0; i < dataArray.length; i++) {
                result[dataArray[i].id] = dataArray[i];
            }
            for (var item in result) {
                finalResult.push(result[item]);
            }
            return finalResult;
        };

        _this.showCoverPic = function (dailyDocuments) {
            var url = "";
            var coverPic = dailyDocuments.filter(function (item) {
                return item.isVisible === 2;
            });
            if (coverPic.length > 0) {
                url = coverPic[0]['fileUrl'];
            } else if (dailyDocuments.length > 0) {
                url = dailyDocuments[0]['fileUrl'];
            } else {
                url = "./images/delivery/u1366.png";
            }
            return url;
        };

        _this.handDraft = function () {
            _this.store.dailyList = [];
            _this.store.dailyListHasMore = true;
            _this.store.dailyParmas.type = 1;
            _this.store.dailyParmas.pageIndex = 1;
            _this.getDailyListPage();
        };

        _this.handAll = function () {
            _this.store.dailyList = [];
            _this.store.dailyListHasMore = true;
            var dailyParmas = JSON.parse(JSON.stringify(_this.store.dailyParmas));
            _this.store.dailyParmas = Object.assign(dailyParmas, {
                type: 0,
                pageIndex: 1
            });
            _this.getDailyListPage();
        };

        _this.store = _this.props.DeliveryStore;
        _this.state = {
            currentItem: 0,
            projectId: null
        };
        return _this;
    }

    /*componentWillReceiveProps(nextProps, nextContext) {
        let search = nextProps.location.search;
        const projectId = url.parse(search, true).query.projectId;
        if (projectId !== this.state.projectId) {
            this.store.dailyParmas.type = 0;
            this.store.dailyParmas.pageIndex = 1;
            this.store.dailyList = [];
            this.store.dailyListHasMore = true;
            this.getDailyListPage();
            this.setState({projectId: projectId})
        }
        console.log(1)
    }*/

    _createClass(Daily, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.store.dailyParmas.pageIndex = 1;
            this.store.dailyList = [];
            this.store.dailyListHasMore = true;
            this.store.dailyEmail = null;
            this.getDailyListPage();
            var projectDetail = this.store.projectDetail;
            //console.log(mobx.toJS(projectDetail), "测试赛")

            this.setState({ projectId: mobx.toJS(projectDetail).id });
        }

        // 草稿箱


        // 返回全部列表

    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            var currentItem = this.state.currentItem;
            var _store = this.store,
                dailyList = _store.dailyList,
                taskDetail = _store.taskDetail,
                dailyListHasMore = _store.dailyListHasMore,
                dailyListLoading = _store.dailyListLoading,
                dailyEmail = _store.dailyEmail;

            var menu = _react2.default.createElement(
                _antd.Menu,
                { onClick: this.onClick },
                _react2.default.createElement(
                    _antd.Menu.Item,
                    { key: '1' },
                    '\u8FDB\u884C\u4E2D'
                ),
                _react2.default.createElement(
                    _antd.Menu.Item,
                    { key: '2' },
                    '\u5DF2\u5B8C\u6210'
                )
            );
            var taskObj = { 0: "待启动", 1: "进行中", 10: "已完成" };
            var taskD = mobx.toJS(taskDetail);
            var dailyParmas = mobx.toJS(this.store.dailyParmas);
            var type = dailyParmas.type;


            return _react2.default.createElement(
                'div',
                { className: 'dailyModal', style: { padding: 0 } },
                dailyEmail == true ? _react2.default.createElement(_EmailSetting2.default, { projectId: this.state.projectId }) : null,
                dailyEmail == false || dailyEmail == null ? _react2.default.createElement(
                    'div',
                    { className: 'w' },
                    _react2.default.createElement(
                        'div',
                        { className: 'fl', style: {
                                paddingRight: '0',
                                width: '310px',
                                overflowY: 'scroll',
                                minHeight: '600px',
                                height: 'calc(100vh)'
                            } },
                        _react2.default.createElement(
                            'div',
                            { className: 'require-table', style: { height: "calc(100% - 53px)" } },
                            _react2.default.createElement(
                                _antd.Affix,
                                { offsetTop: 50 },
                                type == 0 ? _react2.default.createElement(
                                    'div',
                                    { className: 'daily_list_op', style: { padding: "0 20px" } },
                                    _react2.default.createElement(
                                        _antd.Button,
                                        { style: { padding: "0 3px" }, onClick: this.addNewLog, className: 'title',
                                            type: 'link' },
                                        _react2.default.createElement('img', { src: './images/delivery/u1378.png',
                                            style: { width: '21px', height: '21px' } }),
                                        '\u65B0\u5EFA'
                                    ),
                                    _react2.default.createElement(
                                        _antd.Button,
                                        { style: { padding: "0 3px" }, onClick: this.handDraft, className: 'title',
                                            type: 'link' },
                                        _react2.default.createElement('img', { src: './images/delivery/u1377.png',
                                            style: { width: '21px', height: '21px' } }),
                                        '\u8349\u7A3F\u7BB1'
                                    ),
                                    _react2.default.createElement(
                                        _antd.Dropdown,
                                        { overlay: menu },
                                        _react2.default.createElement(
                                            _antd.Button,
                                            { style: { padding: "0 3px" }, className: 'title', type: 'link' },
                                            _react2.default.createElement('img', {
                                                src: './images/delivery/u3773.png', style: { width: '21px', height: '21px' } }),
                                            taskObj[taskD.state],
                                            _react2.default.createElement(_antd.Icon, { type: 'down' })
                                        )
                                    )
                                ) : _react2.default.createElement(
                                    'div',
                                    { className: 'daily_list_op', style: { lineHeight: "50px", justifyContent: "flex-start", padding: "0 20px" } },
                                    _react2.default.createElement(
                                        'span',
                                        { className: 'mr15' },
                                        _react2.default.createElement(_antd.Icon, { type: 'left-circle', style: { color: "#6CB6FF" } }),
                                        _react2.default.createElement(
                                            'span',
                                            { onClick: this.handAll, className: 'emailSetting-back f14' },
                                            '\u8FD4\u56DE\u5168\u90E8'
                                        )
                                    ),
                                    _react2.default.createElement(
                                        _antd.Button,
                                        { style: { padding: "0 3px" }, className: 'title',
                                            type: 'link' },
                                        _react2.default.createElement('img', { src: './images/delivery/u1377.png',
                                            style: { width: '21px', height: '21px' } }),
                                        '\u8349\u7A3F\u7BB1'
                                    )
                                ),
                                _react2.default.createElement(
                                    _reactCustomScrollbars.Scrollbars,
                                    {
                                        style: {
                                            minHeight: "500px",
                                            height: "calc(100vh - 100px)"
                                        },
                                        autoHide: false },
                                    this.uniqueDatas(mobx.toJS(dailyList)).length === 0 ? _react2.default.createElement(
                                        'div',
                                        { className: 'empty_daily_list' },
                                        _react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement('img', { src: './images/delivery/u2030.png',
                                                style: { width: '191px', height: '187px' } })
                                        ),
                                        type == 0 ? _react2.default.createElement(
                                            'div',
                                            null,
                                            _react2.default.createElement(
                                                _antd.Button,
                                                { onClick: this.addNewLog, type: 'primary' },
                                                '\u521B\u5EFA\u7B2C\u4E00\u7BC7\u65E5\u62A5'
                                            )
                                        ) : null
                                    ) : _react2.default.createElement(
                                        _reactInfiniteScroller2.default,
                                        {
                                            initialLoad: false,
                                            pageStart: 0,
                                            loadMore: this.handleInfiniteOnLoad,
                                            hasMore: dailyListHasMore && !dailyListLoading,
                                            useWindow: false
                                        },
                                        this.uniqueDatas(mobx.toJS(dailyList)).map(function (item, index) {
                                            return _react2.default.createElement(
                                                'div',
                                                { onClick: function onClick() {
                                                        _this2.handleSelectedDaily(item, index);
                                                    },
                                                    className: index === currentItem ? "daily_item daily_active_item" : "daily_item" },
                                                _react2.default.createElement(
                                                    'div',
                                                    { className: 'label_info' },
                                                    _react2.default.createElement(
                                                        'div',
                                                        null,
                                                        _react2.default.createElement('img', { src: _this2.showCoverPic(item.dailyDocuments),
                                                            style: { width: '86px', height: '82px' } })
                                                    ),
                                                    _react2.default.createElement(
                                                        'div',
                                                        null,
                                                        _react2.default.createElement(
                                                            'div',
                                                            { className: 'title' },
                                                            item.title
                                                        ),
                                                        _react2.default.createElement(
                                                            'div',
                                                            { className: 'desc_info' },
                                                            _react2.default.createElement(
                                                                'p',
                                                                null,
                                                                '\u4ECA\u65E5\u65BD\u5DE5\u5185\u5BB9\uFF1A',
                                                                _this2.getTodayContentInfo(item)
                                                            )
                                                        ),
                                                        _react2.default.createElement(
                                                            'div',
                                                            {
                                                                className: 'worker_num' },
                                                            '\u4ECA\u65E5\u5DE5\u4EBA\u6570\u91CF\uFF1A',
                                                            item.workersCount,
                                                            '\u4EBA\u3002'
                                                        )
                                                    )
                                                ),
                                                _react2.default.createElement(
                                                    'div',
                                                    { className: 'author_progress' },
                                                    _react2.default.createElement(
                                                        'div',
                                                        {
                                                            className: 'author_date' },
                                                        item.createUserName === null ? '' : item.createUserName,
                                                        ' ',
                                                        item.createTime !== 0 ? (0, _moment2.default)(item.createTime).format('YYYY.MM.DD HH:mm:ss') : ''
                                                    ),
                                                    _react2.default.createElement(
                                                        'div',
                                                        { className: 'work_progress' },
                                                        '\u8FDB\u5EA6: ',
                                                        _react2.default.createElement(
                                                            'span',
                                                            {
                                                                className: 'color_status' },
                                                            _this2.getProgressStateInfo(item.progressState)
                                                        )
                                                    )
                                                )
                                            );
                                        }),
                                        dailyListLoading && dailyListHasMore && _react2.default.createElement(
                                            'div',
                                            { className: 'demo-loading-container' },
                                            _react2.default.createElement(_antd.Spin, null)
                                        )
                                    )
                                )
                            )
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'fl', style: {
                                width: 'calc(100% - 320px)',
                                borderLeft: '1px solid #EBEBEB',
                                paddingLeft: '0',
                                paddingRight: '0'
                            } },
                        this.uniqueDatas(mobx.toJS(dailyList)).length === 0 ? _react2.default.createElement(
                            'div',
                            { className: 'empty_daily_content' },
                            _react2.default.createElement('img', { src: './images/delivery/u2033.png ',
                                style: { width: '336px', height: '336px' } })
                        ) : _react2.default.createElement(_DailyView2.default, null)
                    )
                ) : null
            );
        }
    }]);

    return Daily;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = Daily;

/***/ }),

/***/ 2006:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.DailyEdit = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-新建日报
                         *qiufh@bocspace.cn
                         */

//import EditableTableTomorrowMaterial from './EditableTableTomorrowMaterial';


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _uuid = __webpack_require__(79);

var _EditableTable = __webpack_require__(1658);

var _EditableTable2 = _interopRequireDefault(_EditableTable);

var _MyUploadNew = __webpack_require__(2010);

var _MyUploadNew2 = _interopRequireDefault(_MyUploadNew);

var _DailyUpload = __webpack_require__(2007);

var _DailyUpload2 = _interopRequireDefault(_DailyUpload);

var _antd = __webpack_require__(17);

var _events = __webpack_require__(33);

var _events2 = _interopRequireDefault(_events);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var TabPane = _antd.Tabs.TabPane;

var dateFormat = 'YYYY-MM-DD';

var DailyEdit = exports.DailyEdit = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = _dec2(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(DailyEdit, _React$Component);

    function DailyEdit(props) {
        var _this2 = this;

        _classCallCheck(this, DailyEdit);

        var _this = _possibleConstructorReturn(this, (DailyEdit.__proto__ || Object.getPrototypeOf(DailyEdit)).call(this, props));

        _this.getDailyInfo = function () {
            var projectDetail = _this.store.projectDetail;

            var projectId = mobx.toJS(projectDetail).id;
            var field = mobx.toJS(_this.store.dailyDetail);
            _this.setState({
                dataSource2: field.distributionJson == null || field.distributionJson == "" ? [{ first: "", last: "" }] : JSON.parse(field.distributionJson)
            });
            var params = {
                projectId: projectId,
                dateTime: (0, _moment2.default)(_this.state.dailyDate).valueOf()
            };
            _this.store.getDailyInfo(params).then(function (res) {
                if (res == null) {
                    _this.setState({
                        daily: Object.assign({}, {
                            boxCount: null,
                            purpose: "",
                            planOverTime: null,
                            countdownDay: null,
                            arrivalCount: field.arrivalCount == -1 ? null : field.arrivalCount,
                            installCount: field.installCount == -1 ? null : field.installCount,
                            onWayCount: field.onWayCount == -1 ? null : field.onWayCount
                        })
                    });
                } else {
                    if (res.dailyProjectPhotos != null && Array.isArray(res.dailyProjectPhotos)) {
                        // 同步照片数据
                        _this.store.dailyDetail = Object.assign(field, {
                            dailyProjectPhotos: res.dailyProjectPhotos
                        });
                    }
                    _this.setState({
                        daily: Object.assign({}, res, {
                            arrivalCount: res.arrivalCount == -1 ? null : field.arrivalCount,
                            installCount: res.installCount == -1 ? null : field.installCount,
                            onWayCount: res.onWayCount == -1 ? null : field.onWayCount
                        })
                    });
                }

                if (_this.store.dailyPageState === 1) {
                    new Promise(function (resolve) {
                        _this.setState({
                            todayContents: res.contents == null ? [] : res.contents,
                            tomorrowContents: res.tomorrowContents == null ? [] : res.tomorrowContents
                        });
                        resolve(true);
                    }).then(function (res) {
                        _this.setState({
                            isTodayContentLoadingCompleted: true
                        });
                    });
                }
            });
        };

        _this.saveContents = function (dataSource) {
            _this.setState({
                todayContents: dataSource.map(function (item) {
                    return Object.assign(item, { "type": 1 });
                })
            });
        };

        _this.saveTomorrowContents = function (dataSource) {
            _this.setState({
                tomorrowContents: dataSource.map(function (item) {
                    return Object.assign(item, { "type": 0 });
                })
            });
        };

        _this.saveTomorrowPlanArriveMaterial = function (dataSource) {
            _this.setState({ tomorrowPlanArriveMaterial: dataSource });
        };

        _this.getDailyListPage = function () {
            var projectDetail = _this.store.projectDetail;

            _this.store.dailyParmas.projectId = mobx.toJS(projectDetail).id;
            _this.store.getDailyListPage().then(function (res) {
                if (res) {
                    _this.store.dailyList = Object.assign([], res.body);
                    _this.store.dailyParmas.pageIndex = res.pageIndex;
                    _this.store.dailyParmas.pageSize = res.pageSize;
                    _this.store.dailyParmas.totalCount = res.totalCount;
                }
            });
        };

        _this.getDailyMaterialList = function () {
            var projectDetail = _this.store.projectDetail;

            _this.store.getDailyMaterialList({
                "dailyId": projectDetail.id,
                "dcs": []
            }).then(function (res) {
                _this.store.dailyMaterialList = res;
            });
        };

        _this.genDailyDocmentName = function (item, index) {
            var dailyDate = _this.state.dailyDate;
            var projectDetail = _this.store.projectDetail;

            var num = index + 1 < 10 ? "0" + (index + 1) : index + 1;

            return "日报_" + dailyDate + "_0" + num + "_" + mobx.toJS(projectDetail).name;
        };

        _this.submitPublish = function () {
            var _this$state = _this.state,
                todayContents = _this$state.todayContents,
                tomorrowContents = _this$state.tomorrowContents,
                tomorrowPlanArriveMaterial = _this$state.tomorrowPlanArriveMaterial,
                dailyDocuments = _this$state.dailyDocuments,
                dailyDate = _this$state.dailyDate,
                summary = _this$state.summary,
                overallDescription = _this$state.overallDescription,
                assistance = _this$state.assistance,
                summaryShare = _this$state.summaryShare,
                daily = _this$state.daily;
            var _this$store = _this.store,
                projectDetail = _this$store.projectDetail,
                dailyDetail = _this$store.dailyDetail,
                dailyPageState = _this$store.dailyPageState,
                dailyMaterialList = _this$store.dailyMaterialList;

            _this.props.form.validateFields(function (err, fieldsValue) {
                if (err) {
                    _antd.message.warn('您有必填项未填写，请检查后提交！');
                    return;
                }

                var newTodayContents = todayContents.map(function (item, index) {
                    var key = item.key,
                        productCategoryList = item.productCategoryList,
                        productDetailList = item.productDetailList,
                        obj = _objectWithoutProperties(item, ['key', 'productCategoryList', 'productDetailList']);

                    return obj;
                });

                if (newTodayContents.length === 0) {
                    _antd.message.warn("今日施工内容不能为空！");
                    return false;
                }

                var checkItems = newTodayContents.filter(function (item) {
                    return item.position === "" || item.productDetail === "";
                });

                if (checkItems.length > 0) {
                    _antd.message.warn("今日施工内容标星项不能为空！");
                    return false;
                }

                var photos = JSON.parse(JSON.stringify(_this.store.dailyDetail)).dailyProjectPhotos.slice(0, 4);
                // 校验照片
                if (photos.some(function (item) {
                    return item.place == "" || item.place == null || item.imageDocs == null || Array.isArray(item.imageDocs) && item.imageDocs.length == 0;
                })) {
                    _antd.message.warn("请完善安全文明施工定点照片的必填信息");
                    return false;
                }

                var newTomorrowContents = tomorrowContents.map(function (item, index) {
                    var key = item.key,
                        actualProgress = item.actualProgress,
                        productCategoryList = item.productCategoryList,
                        productDetailList = item.productDetailList,
                        obj = _objectWithoutProperties(item, ['key', 'actualProgress', 'productCategoryList', 'productDetailList']);

                    return obj;
                });

                var newTomorrowPlanArriveMaterial = tomorrowPlanArriveMaterial.map(function (item, index) {
                    var key = item.key,
                        productCategoryList = item.productCategoryList,
                        productDetailList = item.productDetailList,
                        obj = _objectWithoutProperties(item, ['key', 'productCategoryList', 'productDetailList']);

                    return Object.assign(obj, { "projectId": projectDetail.id });
                });

                var newDailyDocuments = dailyDocuments.map(function (item, index) {
                    if (item) {
                        // 区分视频和图片
                        var isVideo = /\.(avi|dat|mpg|wmv|asf|rm|rmvb|mov|flv|mp4|3gp|dv|divx|qt|asx)$/.test(item.name); // 视频
                        if (isVideo) {
                            return Object.assign({}, {
                                "name": item.name,
                                "fileUrl": item.filePath !== undefined && item.filePath !== null ? item.filePath : item.fileUrl,
                                "category": 3,
                                "id": item.id,
                                "isVisible": item.isVisible
                            });
                        } else {
                            // 图片
                            return Object.assign({}, {
                                "name": item.name,
                                "fileUrl": item.filePath !== undefined && item.filePath !== null ? item.filePath : item.fileUrl,
                                "category": 2,
                                "id": item.id,
                                "isVisible": item.isVisible
                            });
                        }
                    }
                });
                newDailyDocuments = [].concat(_toConsumableArray(new Set(newDailyDocuments)));
                var newDaily = Object.assign({}, fieldsValue, {
                    "contents": newTodayContents,
                    "tomorrowContents": newTomorrowContents,
                    "tomorrowPlanArriveMaterial": newTomorrowPlanArriveMaterial,
                    "progressState": parseInt(fieldsValue.progressState),
                    "workersCount": parseInt(fieldsValue.workersCount),
                    "dailyDocuments": newDailyDocuments.map(function (item, index) {
                        return Object.assign(item, { "name": _this.genDailyDocmentName(item, index), "orders": index + 1 });
                    }),
                    "title": dailyDate + " 日报",
                    "createUser": localStorage.getItem('userid'),
                    "createUserName": localStorage.getItem('username'),
                    "date": (0, _moment2.default)(dailyDate).valueOf(),
                    "projectId": projectDetail.id,
                    "summary": summary.toHTML(),
                    "summaryShare": summaryShare,
                    "overallDescription": overallDescription.toHTML(),
                    "assistance": assistance.toHTML(),
                    "noArriveMaterials": Array.isArray(fieldsValue.noArriveMaterials) ? fieldsValue.noArriveMaterials.map(function (item) {
                        if (mobx.toJS(dailyMaterialList).filter(function (dm) {
                            return dm.productDetailId === item;
                        }).length > 0) {
                            return mobx.toJS(dailyMaterialList).filter(function (dm) {
                                return dm.productDetailId === item;
                            })[0];
                        } else {
                            return { "showName": item };
                        }
                    }) : [],
                    "arrivalCount": daily.arrivalCount,
                    "installCount": daily.installCount,
                    "onWayCount": fieldsValue.onWayCount,
                    "distributionJson": _this.state.dataSource2 == null ? "" : JSON.stringify(_this.state.dataSource2),
                    "driverName": fieldsValue.driverName || "",
                    "driverPhone": fieldsValue.driverPhone || "",
                    'dailyProjectPhotos': photos.map(function (item, index) {
                        return Object.assign(item, {
                            imageDocs: item.imageDocs == null ? [] : item.imageDocs.map(function (v) {
                                return Object.assign({}, {
                                    id: v.id,
                                    name: v.name,
                                    fileUrl: v.fileUrl
                                });
                            })
                        });
                    })
                });
                if (dailyPageState === 2) {
                    newDaily.id = dailyDetail.id;
                    newDaily.title = (0, _moment2.default)(dailyDate).format(dateFormat) + " 日报";
                    newDaily.createTime = dailyDetail.createTime;
                }
                _this.setState({ submitButtonDisable: true });
                _this.store.saveDaily({ "d": newDaily, "saveType": 2 }).then(function (res) {
                    _this.store.dailyPageState = 0;
                    _this.store.dailyParmas.pageIndex = 1;
                    _this.store.dailyList = [];
                    _this.getDailyListPage();

                    _this.setState({ submitButtonDisable: false });
                    _events2.default.emit("getProjectState", {});
                });
            });
        };

        _this.saveDraft = function () {
            var _this$state2 = _this.state,
                todayContents = _this$state2.todayContents,
                tomorrowContents = _this$state2.tomorrowContents,
                tomorrowPlanArriveMaterial = _this$state2.tomorrowPlanArriveMaterial,
                dailyDocuments = _this$state2.dailyDocuments,
                dailyDate = _this$state2.dailyDate,
                summary = _this$state2.summary,
                overallDescription = _this$state2.overallDescription,
                assistance = _this$state2.assistance,
                summaryShare = _this$state2.summaryShare,
                daily = _this$state2.daily;
            var _this$store2 = _this.store,
                projectDetail = _this$store2.projectDetail,
                dailyDetail = _this$store2.dailyDetail,
                dailyPageState = _this$store2.dailyPageState,
                dailyMaterialList = _this$store2.dailyMaterialList;


            var newTodayContents = todayContents.map(function (item, index) {
                var key = item.key,
                    productCategoryList = item.productCategoryList,
                    productDetailList = item.productDetailList,
                    obj = _objectWithoutProperties(item, ['key', 'productCategoryList', 'productDetailList']);

                return obj;
            });

            var newTomorrowContents = tomorrowContents.map(function (item, index) {
                var key = item.key,
                    actualProgress = item.actualProgress,
                    productCategoryList = item.productCategoryList,
                    productDetailList = item.productDetailList,
                    obj = _objectWithoutProperties(item, ['key', 'actualProgress', 'productCategoryList', 'productDetailList']);

                return obj;
            });

            var newTomorrowPlanArriveMaterial = tomorrowPlanArriveMaterial.map(function (item, index) {
                var key = item.key,
                    productCategoryList = item.productCategoryList,
                    productDetailList = item.productDetailList,
                    obj = _objectWithoutProperties(item, ['key', 'productCategoryList', 'productDetailList']);

                return Object.assign(obj, { "projectId": projectDetail.id });
            });

            var fieldsValue = _this.props.form.getFieldsValue();
            var newDailyDocuments = dailyDocuments.length > 0 ? dailyDocuments.map(function (item, index) {
                if (item) {
                    // 区分视频和图片
                    var isVideo = /\.(avi|dat|mpg|wmv|asf|rm|rmvb|mov|flv|mp4|3gp|dv|divx|qt|asx)$/.test(item.name); // 视频
                    if (isVideo) {
                        return Object.assign({}, {
                            "name": item.name,
                            "fileUrl": item.filePath !== undefined && item.filePath !== null ? item.filePath : item.fileUrl,
                            "category": 3,
                            "id": item.id,
                            "isVisible": item.isVisible
                        });
                    } else {
                        // 图片
                        return Object.assign({}, {
                            "name": item.name,
                            "fileUrl": item.filePath !== undefined && item.filePath !== null ? item.filePath : item.fileUrl,
                            "category": 2,
                            "id": item.id,
                            "isVisible": item.isVisible
                        });
                    }
                }
            }) : [];
            newDailyDocuments = [].concat(_toConsumableArray(new Set(newDailyDocuments)));
            var photos = JSON.parse(JSON.stringify(_this.store.dailyDetail)).dailyProjectPhotos.slice(0, 4);
            var newDaily = Object.assign({}, fieldsValue, {
                "contents": newTodayContents,
                "tomorrowContents": newTomorrowContents,
                "tomorrowPlanArriveMaterial": newTomorrowPlanArriveMaterial,
                "progressState": parseInt(fieldsValue.progressState),
                "workersCount": parseInt(fieldsValue.workersCount),
                "dailyDocuments": newDailyDocuments.map(function (item, index) {
                    if (item) {
                        return Object.assign(item, { "name": _this.genDailyDocmentName(item, index), "orders": index + 1 });
                    }
                }),
                "title": dailyDate + " 日报",
                "createUser": localStorage.getItem('userid'),
                "createUserName": localStorage.getItem('username'),
                "date": (0, _moment2.default)(dailyDate).valueOf(),
                "projectId": projectDetail.id,
                "summary": summary.toHTML(),
                "summaryShare": summaryShare,
                "overallDescription": overallDescription.toHTML(),
                "assistance": assistance.toHTML(),
                "noArriveMaterials": Array.isArray(fieldsValue.noArriveMaterials) ? fieldsValue.noArriveMaterials.map(function (item) {
                    if (mobx.toJS(dailyMaterialList).filter(function (dm) {
                        return dm.productDetailId === item;
                    }).length > 0) {
                        return mobx.toJS(dailyMaterialList).filter(function (dm) {
                            return dm.productDetailId === item;
                        })[0];
                    } else {
                        return { "showName": item };
                    }
                }) : [],
                arrivalCount: daily.arrivalCount,
                installCount: daily.installCount,
                onWayCount: fieldsValue.onWayCount,
                "distributionJson": _this.state.dataSource2 == null ? "" : JSON.stringify(_this.state.dataSource2),
                "driverName": fieldsValue.driverName || "",
                "driverPhone": fieldsValue.driverPhone || "",
                'dailyProjectPhotos': photos.map(function (item, index) {
                    return Object.assign(item, {
                        imageDocs: item.imageDocs == null ? [] : item.imageDocs.map(function (v) {
                            return Object.assign({}, {
                                id: v.id,
                                name: v.fileName,
                                fileUrl: v.filePath
                            });
                        })
                    });
                })
            });
            if (dailyPageState === 2) {
                newDaily.id = dailyDetail.id;
                newDaily.title = (0, _moment2.default)(dailyDate).format(dateFormat) + " 日报";
                newDaily.createTime = dailyDetail.createTime;
            }
            _this.setState({ submitButtonDisable: true });
            _this.store.saveDaily({ "d": newDaily, "saveType": 1 }).then(function (res) {
                _this.store.dailyPageState = 0;
                _this.setState({ submitButtonDisable: false });
            });
        };

        _this.getPageDocument = function () {
            var projectDetail = _this.store.projectDetail;

            _this.store.docPageParmas.projectId = projectDetail.id;
            _this.store.getPageDocument();
        };

        _this.onHandleOk = function () {
            _this.setState({ picVisible: false });
        };

        _this.onHandleCancel = function () {
            _this.setState({ picVisible: false, selectedPics: [], attachments: [] });
        };

        _this.showUploadPicModal = function () {
            _this.setState({ picVisible: true, selectedPics: [], attachments: [] });
        };

        _this.handleAttment = function (type, params) {
            // 处理附件
            var arr = [];
            params.length && params.map(function (item) {
                arr.push({
                    fileId: item.fileId,
                    fileName: item.fileName,
                    filePath: item.filePath,
                    id: item.id,
                    uid: item.uid,
                    name: item.fileName,
                    status: 'done',
                    url: item.filePath,
                    "isVisible": 1
                });
            });
            _this.setState(_defineProperty({}, type, Object.assign([], arr)), function () {
                _this.getDailyDocuments2();
            });
        };

        _this.handleSelectPics = function (index, item) {
            var _this$state3 = _this.state,
                selectedPics = _this$state3.selectedPics,
                dailyDocuments = _this$state3.dailyDocuments;


            var fIndex = selectedPics.findIndex(function (obj) {
                return obj.id === item.id;
            });
            if (fIndex === -1) {
                var tmpSelected = selectedPics.filter(function (item) {
                    return item.fileUrl !== undefined;
                });
                // let newList = selectedPics.concat([mobx.toJS(item)]).concat(dailyDocuments);
                var newList = dailyDocuments.concat([mobx.toJS(item)]).concat(tmpSelected);
                _this.setState({ selectedPics: newList }, function () {
                    _this.getDailyDocuments();
                });
            } else {
                var _tmpSelected = selectedPics.filter(function (item) {
                    return item.fileUrl !== undefined;
                });
                _tmpSelected.splice(fIndex, 1);
                _this.setState(_tmpSelected, function () {

                    _this.getDailyDocuments();
                });
            }
        };

        _this.handleRemovePic = function (index, item) {
            var dailyDocuments = _this.state.dailyDocuments;

            var fIndex = dailyDocuments.findIndex(function (obj, oIndex) {
                return oIndex === index;
            });
            dailyDocuments.splice(fIndex, 1);
            _this.setState(dailyDocuments);
        };

        _this.handleSetCover = function (index) {
            var dailyDocuments = _this.state.dailyDocuments;

            var newdd = dailyDocuments.map(function (item, dIndex) {
                if (index === dIndex) {
                    item.isVisible = 2;
                } else {
                    item.isVisible = 1;
                }
                return item;
            });
            _this.setState({ dailyDocuments: newdd });
        };

        _this.isSelectedPic = function (item) {
            var selectedPics = _this.state.selectedPics;

            var findIndex = selectedPics.findIndex(function (obj) {
                return obj.id === item.id;
            });
            return findIndex !== -1 ? true : false;
        };

        _this.handlePageonChange = function (pageNumber) {
            _this.store.docPageParmas = Object.assign(mobx.toJS(_this.store.docPageParmas), {
                pageIndex: pageNumber
            });

            _this.store.getPageDocument();
        };

        _this.getDailyDefaultTitle = function () {
            var projectDetail = _this.store.projectDetail;
            var dailyDate = _this.state.dailyDate;

            return projectDetail.name + '-' + dailyDate + ' \u65E5\u62A5';
        };

        _this.getCurrentDailyTitle = function () {
            var _this$store3 = _this.store,
                projectDetail = _this$store3.projectDetail,
                dailyDetail = _this$store3.dailyDetail;

            return projectDetail.name + '-' + dailyDetail.title;
        };

        _this.getDailyDocuments = function () {
            var _this$state4 = _this.state,
                attachments = _this$state4.attachments,
                selectedPics = _this$state4.selectedPics;

            var newSelectedPics = selectedPics.map(function (item, index) {
                return Object.assign({}, {
                    "fileId": null,
                    "fileName": item.fileUrl,
                    "filePath": item.fileUrl,
                    "id": "",
                    "name": item.name,
                    "status": "done",
                    "uid": (0, _uuid.v4)(),
                    "url": item.fileUrl
                });
            });
            _this.setState({ dailyDocuments: _this.uniqueArray(newSelectedPics.concat(attachments), "name") });
        };

        _this.getDailyDocuments2 = function () {
            var _this$state5 = _this.state,
                attachments = _this$state5.attachments,
                dailyDocuments = _this$state5.dailyDocuments;

            _this.setState({ dailyDocuments: _this.uniqueArray(dailyDocuments.concat(attachments), "name") });
        };

        _this.handleDateChange = function (date) {
            _this.setState({ dailyDate: (0, _moment2.default)(date).format(dateFormat) }, function () {
                _this.getDailyInfo();
            });
        };

        _this.getProductCategoryList = function (id) {
            return new Promise(function (resolve) {
                _this.store.getDailyObjList({
                    "dailyId": id,
                    "type": 1
                }).then(function (res) {
                    resolve(res);
                });
            });
        };

        _this.getProductDetailList = function (productCategoryId, type) {
            var _this$store4 = _this.store,
                dailyMaterialList = _this$store4.dailyMaterialList,
                projectDetail = _this$store4.projectDetail;

            return new Promise(function (resolve) {
                _this.store.getDailyContentDetailList({
                    "dailyId": productCategoryId,
                    "type": type //这的type 0表示今日，1是明日...
                }).then(function (res) {
                    if (dailyMaterialList.length === 0) {
                        _this.store.getDailyMaterialList({ "dailyId": projectDetail.id, "dcs": res }).then(function (res) {
                            _this.store.dailyMaterialList = res;
                        });
                    }
                    resolve(res);
                });
            });
        };

        _this.getDailyTomorrowMaterial = function (productCategoryId) {
            return new Promise(function (resolve) {
                _this.store.getDailyTomorrowMaterial({
                    "categoryId": productCategoryId
                }).then(function (res) {
                    resolve(res);
                });
            });
        };

        _this.getTableData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
            var _this$store5, dailyDetail, dailyPageState, dailyList, newContents, newTomorrowContents, tomorrowPlanArriveMaterial, ydate, yDaily, nc;

            return regeneratorRuntime.wrap(function _callee5$(_context5) {
                while (1) {
                    switch (_context5.prev = _context5.next) {
                        case 0:
                            _this$store5 = _this.store, dailyDetail = _this$store5.dailyDetail, dailyPageState = _this$store5.dailyPageState, dailyList = _this$store5.dailyList;
                            _context5.next = 3;
                            return Promise.all(dailyDetail.contents.map(function () {
                                var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item, index) {
                                    var productCategoryList, productDetailList;
                                    return regeneratorRuntime.wrap(function _callee$(_context) {
                                        while (1) {
                                            switch (_context.prev = _context.next) {
                                                case 0:
                                                    productCategoryList = [];
                                                    productDetailList = [];

                                                    if (!(item.positionId !== null)) {
                                                        _context.next = 6;
                                                        break;
                                                    }

                                                    _context.next = 5;
                                                    return _this.getProductCategoryList(item.positionId);

                                                case 5:
                                                    productCategoryList = _context.sent;

                                                case 6:
                                                    if (!(item.productCategoryId !== null)) {
                                                        _context.next = 10;
                                                        break;
                                                    }

                                                    _context.next = 9;
                                                    return _this.getProductDetailList(item.productCategoryId, 0);

                                                case 9:
                                                    productDetailList = _context.sent;

                                                case 10:
                                                    return _context.abrupt('return', Object.assign(mobx.toJS(item), {
                                                        "productCategoryList": productCategoryList,
                                                        "productDetailList": productDetailList
                                                    }));

                                                case 11:
                                                case 'end':
                                                    return _context.stop();
                                            }
                                        }
                                    }, _callee, _this2);
                                }));

                                return function (_x, _x2) {
                                    return _ref2.apply(this, arguments);
                                };
                            }()));

                        case 3:
                            newContents = _context5.sent;
                            _context5.next = 6;
                            return Promise.all(dailyDetail.tomorrowContents.map(function () {
                                var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(item, index) {
                                    var productCategoryList, productDetailList;
                                    return regeneratorRuntime.wrap(function _callee2$(_context2) {
                                        while (1) {
                                            switch (_context2.prev = _context2.next) {
                                                case 0:
                                                    productCategoryList = [];
                                                    productDetailList = [];

                                                    if (!(item.positionId !== null)) {
                                                        _context2.next = 6;
                                                        break;
                                                    }

                                                    _context2.next = 5;
                                                    return _this.getProductCategoryList(item.positionId);

                                                case 5:
                                                    productCategoryList = _context2.sent;

                                                case 6:
                                                    if (!(item.productCategoryId !== null)) {
                                                        _context2.next = 10;
                                                        break;
                                                    }

                                                    _context2.next = 9;
                                                    return _this.getProductDetailList(item.productCategoryId, 1);

                                                case 9:
                                                    productDetailList = _context2.sent;

                                                case 10:
                                                    return _context2.abrupt('return', Object.assign(mobx.toJS(item), {
                                                        "productCategoryList": productCategoryList,
                                                        "productDetailList": productDetailList
                                                    }));

                                                case 11:
                                                case 'end':
                                                    return _context2.stop();
                                            }
                                        }
                                    }, _callee2, _this2);
                                }));

                                return function (_x3, _x4) {
                                    return _ref3.apply(this, arguments);
                                };
                            }()));

                        case 6:
                            newTomorrowContents = _context5.sent;
                            _context5.next = 9;
                            return Promise.all(dailyDetail.tomorrowPlanArriveMaterial.map(function () {
                                var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(item, index) {
                                    var productCategoryList, productDetailList;
                                    return regeneratorRuntime.wrap(function _callee3$(_context3) {
                                        while (1) {
                                            switch (_context3.prev = _context3.next) {
                                                case 0:
                                                    productCategoryList = [];
                                                    productDetailList = [];

                                                    if (!(item.positionId !== null)) {
                                                        _context3.next = 6;
                                                        break;
                                                    }

                                                    _context3.next = 5;
                                                    return _this.getProductCategoryList(item.positionId);

                                                case 5:
                                                    productCategoryList = _context3.sent;

                                                case 6:
                                                    if (!(item.productCategoryId !== null)) {
                                                        _context3.next = 10;
                                                        break;
                                                    }

                                                    _context3.next = 9;
                                                    return _this.getDailyTomorrowMaterial(item.productCategoryId);

                                                case 9:
                                                    productDetailList = _context3.sent;

                                                case 10:
                                                    return _context3.abrupt('return', Object.assign(mobx.toJS(item), {
                                                        "productCategoryList": productCategoryList,
                                                        "productDetailList": productDetailList
                                                    }));

                                                case 11:
                                                case 'end':
                                                    return _context3.stop();
                                            }
                                        }
                                    }, _callee3, _this2);
                                }));

                                return function (_x5, _x6) {
                                    return _ref4.apply(this, arguments);
                                };
                            }()));

                        case 9:
                            tomorrowPlanArriveMaterial = _context5.sent;

                            if (!(dailyPageState === 2)) {
                                _context5.next = 14;
                                break;
                            }

                            _this.setState({
                                todayContents: newContents,
                                tomorrowContents: newTomorrowContents,
                                tomorrowPlanArriveMaterial: tomorrowPlanArriveMaterial
                            });
                            _context5.next = 21;
                            break;

                        case 14:
                            ydate = (0, _moment2.default)((0, _moment2.default)().add(-1, 'days').format(dateFormat)).valueOf();
                            yDaily = mobx.toJS(dailyList).filter(function (item, index) {
                                return item.date === ydate;
                            });

                            if (!(yDaily.length > 0)) {
                                _context5.next = 21;
                                break;
                            }

                            _context5.next = 19;
                            return Promise.all(yDaily[0].tomorrowContents.map(function () {
                                var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(item) {
                                    var productCategoryList, productDetailList;
                                    return regeneratorRuntime.wrap(function _callee4$(_context4) {
                                        while (1) {
                                            switch (_context4.prev = _context4.next) {
                                                case 0:
                                                    productCategoryList = [];
                                                    productDetailList = [];

                                                    if (!(item.positionId !== null)) {
                                                        _context4.next = 6;
                                                        break;
                                                    }

                                                    _context4.next = 5;
                                                    return _this.getProductCategoryList(item.positionId);

                                                case 5:
                                                    productCategoryList = _context4.sent;

                                                case 6:
                                                    if (!(item.productCategoryId !== null)) {
                                                        _context4.next = 10;
                                                        break;
                                                    }

                                                    _context4.next = 9;
                                                    return _this.getProductDetailList(item.productCategoryId, 0);

                                                case 9:
                                                    productDetailList = _context4.sent;

                                                case 10:
                                                    return _context4.abrupt('return', Object.assign(mobx.toJS(item), {
                                                        "id": "",
                                                        "productCategoryList": productCategoryList,
                                                        "productDetailList": productDetailList
                                                    }));

                                                case 11:
                                                case 'end':
                                                    return _context4.stop();
                                            }
                                        }
                                    }, _callee4, _this2);
                                }));

                                return function (_x7) {
                                    return _ref5.apply(this, arguments);
                                };
                            }()));

                        case 19:
                            nc = _context5.sent;

                            _this.setState({
                                todayContents: nc
                            });

                        case 21:
                        case 'end':
                            return _context5.stop();
                    }
                }
            }, _callee5, _this2);
        }));

        _this.showDailyDocuments = function () {
            // 图片列表
            var _this$store6 = _this.store,
                dailyDetail = _this$store6.dailyDetail,
                dailyPageState = _this$store6.dailyPageState;

            if (dailyPageState === 2) {
                var dailyDocuments = mobx.toJS(dailyDetail).dailyDocuments;
                if (dailyDocuments.length > 0) {
                    var newDailyDocumnet = dailyDocuments.map(function (item, index) {
                        return Object.assign(item, { "url": item.fileUrl });
                    });
                    newDailyDocumnet.filter(function (item, index) {
                        return item.url !== null;
                    });

                    _this.setState({
                        dailyDocuments: _this.uniqueArray(newDailyDocumnet, "name")
                    });
                } else {
                    _this.setState({
                        dailyDocuments: []
                    });
                }
            }
        };

        _this.getDailyTitle = function () {
            var _this$store7 = _this.store,
                dailyDetail = _this$store7.dailyDetail,
                dailyPageState = _this$store7.dailyPageState;

            if (dailyPageState === 2) {
                _this.setState({
                    dailyDate: (0, _moment2.default)(dailyDetail.date).format(dateFormat)
                });
            }
        };

        _this.handleBChange = function (type, editorState) {
            if (type === 'summary') {
                _this.setState({ summary: editorState });
            }
            if (type === 'overallDescription') {
                _this.setState({ overallDescription: editorState });
            }
            if (type === 'assistance') {
                _this.setState({ assistance: editorState });
            }
        };

        _this.getSummaryData = function () {
            var _this$store8 = _this.store,
                dailyDetail = _this$store8.dailyDetail,
                dailyPageState = _this$store8.dailyPageState;

            if (dailyPageState === 2) {
                _this.setState({
                    summary: _braftEditor2.default.createEditorState(dailyDetail.summary)
                });
            } else {
                _this.setState({
                    summary: _braftEditor2.default.createEditorState(null)
                });
            }
        };

        _this.getSummaryShare = function () {
            var dailyDetail = _this.store.dailyDetail;

            _this.setState({ summaryShare: dailyDetail.summaryShare });
        };

        _this.getOverallDescriptionData = function () {
            var _this$store9 = _this.store,
                dailyDetail = _this$store9.dailyDetail,
                dailyPageState = _this$store9.dailyPageState;

            if (dailyPageState === 2) {
                _this.setState({
                    overallDescription: _braftEditor2.default.createEditorState(dailyDetail.overallDescription)
                });
            } else {
                _this.setState({
                    overallDescription: _braftEditor2.default.createEditorState(null)
                });
            }
        };

        _this.getAssistanceData = function () {
            var _this$store10 = _this.store,
                dailyDetail = _this$store10.dailyDetail,
                dailyPageState = _this$store10.dailyPageState;

            if (dailyPageState === 2) {
                _this.setState({
                    assistance: _braftEditor2.default.createEditorState(dailyDetail.assistance)
                });
            } else {
                _this.setState({
                    assistance: _braftEditor2.default.createEditorState(null)
                });
            }
        };

        _this.resolveNoArriveMaterials = function (dailyDetail) {
            var result = void 0;
            if (dailyDetail.noArriveMaterials === null) {
                result = undefined;
            } else if (mobx.toJS(dailyDetail).noArriveMaterials.filter(function (item) {
                return item === null;
            }).length === mobx.toJS(dailyDetail).noArriveMaterials.length) {
                result = undefined;
            } else {
                result = mobx.toJS(dailyDetail).noArriveMaterials.map(function (item) {
                    if (item !== null && item.productDetailId !== null) {
                        return item.productDetailId;
                    } else {
                        return item.showName !== undefined ? item.showName : "";
                    }
                });
            }
            return result;
        };

        _this.uniqueArray = function (array, key) {
            var result = [array[0]];
            for (var i = 1; i < array.length; i++) {
                var item = array[i];
                var repeat = false;
                for (var j = 0; j < result.length; j++) {
                    if (item[key] == result[j][key]) {
                        repeat = true;
                        break;
                    }
                }
                if (!repeat) {
                    result.push(item);
                }
            }
            return result;
        };

        _this.handleIsSummaryShare = function (checked) {
            _this.setState({ summaryShare: checked ? 1 : 0 });
        };

        _this.sscLabelHtml = function () {
            var dailyDetail = _this.store.dailyDetail;
            var summaryShare = _this.state.summaryShare;

            return _react2.default.createElement(
                'div',
                { className: 'require_label mb10' },
                '\u73B0\u573A\u65BD\u5DE5\u603B\u7ED3',
                _react2.default.createElement(
                    'span',
                    { style: { color: "red" } },
                    '*'
                ),
                ':',
                _react2.default.createElement(_antd.Switch, {
                    style: { marginLeft: "5px" }, onChange: _this.handleIsSummaryShare,
                    checked: summaryShare === 1 ? true : false, className: 'task_switch' }),
                _react2.default.createElement(
                    'span',
                    { className: 'daily_tips',
                        style: {
                            "fontSize": "14px",
                            marginLeft: "5px"
                        } },
                    '\u73B0\u573A\u65BD\u5DE5\u603B\u7ED3\u9ED8\u8BA4\u4E0D\u901A\u8FC7\u90AE\u4EF6\u81EA\u52A8\u53D1\u9001\u5916\u90E8\u5BA2\u6237\uFF0C\u53EF\u624B\u52A8\u9009\u62E9\u6253\u5F00\uFF0C\u5373\u53EF\u53D1\u9001\u5916\u90E8\u5BA2\u6237'
                )
            );
        };

        _this.onChangeField = function (type, e) {
            var daily = JSON.parse(JSON.stringify(_this.state.daily));
            if (type == "arrivalCount") {
                var _Object$assign;

                _this.setState({
                    daily: Object.assign(daily, (_Object$assign = {}, _defineProperty(_Object$assign, type, e), _defineProperty(_Object$assign, "installCount", null), _defineProperty(_Object$assign, "onWayCount", daily.boxCount - (daily.arrivalCount == null ? 0 : daily.arrivalCount)), _Object$assign))
                }, function () {
                    _this.props.form.setFieldsValue({
                        "installCount": null,
                        "onWayCount": daily.boxCount - (daily.arrivalCount == null ? 0 : daily.arrivalCount)
                    });
                });
            } else {
                _this.setState({
                    daily: Object.assign(daily, _defineProperty({}, type, e))
                }, function () {
                    /*if (daily.arrivalCount>0) {
                    	const data2 = daily.arrivalCount - e;
                    	this.setState({
                    		daily: Object.assign(this.state.daily, {"onWayCount": data2})
                    	});
                    	this.props.form.setFieldsValue({
                    		"onWayCount": data2
                    	});
                    }*/
                });
            }
        };

        _this.photoChange = function (index, e) {
            var photos = JSON.parse(JSON.stringify(_this.store.dailyDetail)).dailyProjectPhotos;
            photos[index].place = e.target.value;
            // 更新数据
            _this.store.dailyDetail.dailyProjectPhotos = Object.assign([], photos);
        };

        _this.saveAttachment = function (index, params) {
            // 处理附件
            var arr = [];
            params.length && params.map(function (item) {
                arr.push({
                    id: item.id,
                    name: item.fileName,
                    fileUrl: item.filePath
                });
            });

            var photos = JSON.parse(JSON.stringify(_this.store.dailyDetail)).dailyProjectPhotos;
            photos[index].imageDocs = Object.assign([], arr);
            photos[index].createTime = params.length > 0 ? (0, _moment2.default)().valueOf() : '';
            // 更新数据
            _this.store.dailyDetail.dailyProjectPhotos = Object.assign([], photos);
        };

        _this.add = function () {
            var dataSource2 = JSON.parse(JSON.stringify(_this.state.dataSource2));
            _this.setState({
                dataSource2: [].concat(_toConsumableArray(dataSource2), [{ first: "", last: "" }])
            });
        };

        _this.remove = function (index) {
            var dataSource2 = JSON.parse(JSON.stringify(_this.state.dataSource2));
            dataSource2.splice(index, 1);
            _this.setState({
                dataSource2: [].concat(_toConsumableArray(dataSource2))
            });
        };

        _this.handleChange3 = function (type, index, e) {
            var dataSource2 = JSON.parse(JSON.stringify(_this.state.dataSource2));
            dataSource2[index][type] = e.target.value;

            if (e.target.value == "" || e.target.value == null) {
                dataSource2[index].last = "";
            } else {
                dataSource2[index].last = (0, _moment2.default)().format("YYYY-MM-DD HH:mm:ss");
            }

            _this.setState({
                dataSource2: [].concat(_toConsumableArray(dataSource2))
            });
        };

        _this.updateTomorrowContents = function () {
            var _this$state6 = _this.state,
                todayContents = _this$state6.todayContents,
                dailyDate = _this$state6.dailyDate;
            var projectDetail = _this.store.projectDetail;

            var projectId = mobx.toJS(projectDetail).id;

            var newTodayContents = todayContents.map(function (item, index) {
                var key = item.key,
                    productCategoryList = item.productCategoryList,
                    productDetailList = item.productDetailList,
                    obj = _objectWithoutProperties(item, ['key', 'productCategoryList', 'productDetailList']);

                return obj;
            });
            var params = {
                projectId: projectId,
                contents: newTodayContents,
                dateTime: (0, _moment2.default)(dailyDate).valueOf()
            };
            _this.store.getTomorrowContents(params).then(function (res) {
                if (res && Array.isArray(res)) {
                    _this.saveTomorrowContents(res);
                }
            });
        };

        _this.store = _this.props.DeliveryStore;
        _this.state = {
            picVisible: false,
            summaryShare: 0,
            fileList: [],
            attachments: [],
            selectedPics: [],
            todayContents: [],
            tomorrowContents: [],
            tomorrowPlanArriveMaterial: [],
            dailyDocuments: [],
            dailyDate: (0, _moment2.default)(new Date()).format(dateFormat),
            summary: _braftEditor2.default.createEditorState(null),
            overallDescription: _braftEditor2.default.createEditorState(null),
            assistance: _braftEditor2.default.createEditorState(null),
            submitButtonDisable: false,
            daily: {
                boxCount: null,
                purpose: "",
                planOverTime: null,
                countdownDay: null,
                arrivalCount: null,
                installCount: null,
                onWayCount: null
            },
            dataSource2: [{ first: "", last: "" }],
            isTodayContentLoadingCompleted: false
        };
        return _this;
    }

    _createClass(DailyEdit, [{
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps, nextContext) {}
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.getTableData();
            this.showDailyDocuments();
            this.getDailyTitle();
            this.getSummaryData();
            this.getSummaryShare();
            this.getOverallDescriptionData();
            this.getAssistanceData();
            this.getDailyMaterialList();
            this.getDailyInfo();
        }
    }, {
        key: 'componentWillMount',
        value: function componentWillMount() {
            this.setState({ isTodayContentLoadingCompleted: false });
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.setState({ isTodayContentLoadingCompleted: false });
        }

        // 保存草稿


        // 附件


        /*
        * JSON数组去重
        * @param: [array] json Array
        * @param: [string] 唯一的key名，根据此键名进行去重
        */


        /*
        * 现场施工总结是否发送邮件
        */


        /*
        * 现场施工总结标题(Summary of site construction)
        *
        */

    }, {
        key: 'render',
        value: function render() {
            var _this3 = this;

            var _state = this.state,
                picVisible = _state.picVisible,
                fileList = _state.fileList,
                attachments = _state.attachments,
                selectedPics = _state.selectedPics,
                todayContents = _state.todayContents,
                tomorrowContents = _state.tomorrowContents,
                tomorrowPlanArriveMaterial = _state.tomorrowPlanArriveMaterial,
                dailyDocuments = _state.dailyDocuments,
                summary = _state.summary,
                overallDescription = _state.overallDescription,
                assistance = _state.assistance,
                dailyDate = _state.dailyDate,
                submitButtonDisable = _state.submitButtonDisable,
                daily = _state.daily,
                dataSource2 = _state.dataSource2,
                isTodayContentLoadingCompleted = _state.isTodayContentLoadingCompleted;
            var _store = this.store,
                ossData = _store.ossData,
                documentPageList = _store.documentPageList,
                docPageParmas = _store.docPageParmas,
                dailyPageState = _store.dailyPageState,
                dailyDetail = _store.dailyDetail,
                dailyMaterialList = _store.dailyMaterialList; // dailyPageState 0：查看 1:新增，2：编辑

            var formItemLayout = {
                labelCol: {
                    xs: { span: 24 },
                    md: { span: 8 },
                    sm: { span: 8 }
                },
                wrapperCol: {
                    xs: { span: 24 },
                    md: { span: 16 },
                    sm: { span: 16 }
                }
            };
            var formItemLayout1 = {
                labelCol: {
                    xs: { span: 24 },
                    md: { span: 3 },
                    sm: { span: 3 }
                },
                wrapperCol: {
                    xs: { span: 24 },
                    md: { span: 21 },
                    sm: { span: 21 }
                }
            };
            var formItemLayout2 = {
                labelCol: {
                    xs: { span: 24 },
                    md: { span: 24 },
                    sm: { span: 24 }
                },
                wrapperCol: {
                    xs: { span: 24 },
                    md: { span: 24 },
                    sm: { span: 24 }
                }
            };
            var formItemLayout3 = {
                labelCol: {
                    xs: { span: 24 },
                    md: { span: 10 },
                    sm: { span: 10 }
                },
                wrapperCol: {
                    xs: { span: 24 },
                    md: { span: 14 },
                    sm: { span: 14 }
                }
            };
            var formItemLayoutWithOutLabel = {
                wrapperCol: {
                    xs: { span: 16, offset: 8 },
                    sm: { span: 16, offset: 8 }
                }
            };
            var titleLayout = { sm: { span: 3 }, md: { span: 3 } };
            var controls = ['bold', 'text-color'];
            var getFieldDecorator = this.props.form.getFieldDecorator;

            var aspectList = { 0: 388 / 554, 1: 1180 / 402, 2: 308 / 547, 3: 308 / 252 }; // 定点照片裁剪比例
            var field = mobx.toJS(dailyDetail);

            return _react2.default.createElement(
                'div',
                { className: 'dailyModal', style: { minHeight: '600px' } },
                _react2.default.createElement(
                    _antd.Form,
                    formItemLayout,
                    _react2.default.createElement(
                        'div',
                        { className: 'daily_zone' },
                        _react2.default.createElement(
                            'div',
                            { className: 'daily_label' },
                            _react2.default.createElement(
                                'div',
                                { style: { width: '500px' } },
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    _extends({}, formItemLayout1, { label: '\u6807\u9898', labelAlign: 'right',
                                        className: 'w hidden_redstar' }),
                                    getFieldDecorator('title', {
                                        initialValue: dailyPageState === 2 ? this.getCurrentDailyTitle() : this.getDailyDefaultTitle(),
                                        rules: [{
                                            required: true,
                                            message: '该项是必填'
                                        }]
                                    })(_react2.default.createElement(_antd.Input, { style: { width: "calc(100% - 140px)" }, placeholder: '\u8BF7\u8F93\u5165' })),
                                    getFieldDecorator('date', {
                                        initialValue: dailyPageState === 2 ? (0, _moment2.default)((0, _moment2.default)(dailyDetail.date), dateFormat) : (0, _moment2.default)(new Date(), dateFormat),
                                        rules: [{
                                            required: true,
                                            message: '该项是必填'
                                        }]
                                    })(_react2.default.createElement(_antd.DatePicker, { allowClear: false, style: { width: '130px', marginLeft: '5px' },
                                        onChange: this.handleDateChange, format: dateFormat }))
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                { style: { width: '200px', marginLeft: '50px' } },
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    { label: '\u65BD\u5DE5\u8FDB\u5EA6', labelAlign: 'right', className: 'w hidden_redstar' },
                                    getFieldDecorator('progressState', {
                                        initialValue: dailyPageState === 2 ? dailyDetail.progressState : 0,
                                        rules: [{
                                            required: true,
                                            message: '该项是必填'
                                        }]
                                    })(_react2.default.createElement(
                                        _antd.Select,
                                        { placeholder: '\u8BF7\u9009\u62E9\u8FDB\u5EA6', style: { width: 80 } },
                                        _react2.default.createElement(
                                            Option,
                                            { value: 0 },
                                            '\u6B63\u5E38'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 1 },
                                            '\u63D0\u524D'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 2 },
                                            '\u5EF6\u8FDF'
                                        )
                                    ))
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                { style: { width: '400px' } },
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    { label: _react2.default.createElement(
                                            'span',
                                            null,
                                            '\u4ECA\u65E5\u5929\u6C14',
                                            _react2.default.createElement(
                                                'span',
                                                { style: { color: "red" } },
                                                '*'
                                            )
                                        ),
                                        labelAlign: 'right', className: 'w hidden_redstar' },
                                    getFieldDecorator('weather', {
                                        initialValue: dailyPageState === 2 ? dailyDetail.weather : "",
                                        rules: [{
                                            required: true,
                                            message: '该项是必填'
                                        }]
                                    })(_react2.default.createElement(
                                        _antd.Select,
                                        { placeholder: '\u8BF7\u9009\u62E9\u5929\u6C14', style: { width: '48%' } },
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u6674' },
                                            '\u6674'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u591A\u4E91' },
                                            '\u591A\u4E91'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u9634' },
                                            '\u9634'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u96E8' },
                                            '\u96E8'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u96EA' },
                                            '\u96EA'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u5927\u98CE' },
                                            '\u5927\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u9F99\u5377\u98CE' },
                                            '\u9F99\u5377\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u96FE\u973E' },
                                            '\u96FE\u973E'
                                        )
                                    )),
                                    getFieldDecorator('windPower', {
                                        initialValue: dailyPageState === 2 ? dailyDetail.windPower : "",
                                        rules: [{
                                            required: true,
                                            message: '该项是必填'
                                        }]
                                    })(_react2.default.createElement(
                                        _antd.Select,
                                        { placeholder: '\u8BF7\u9009\u62E9\u98CE\u529B', style: { marginLeft: '2%', width: '48%' } },
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u5FAE\u98CE' },
                                            '\u5FAE\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u4E09\u7EA7\u98CE' },
                                            '\u4E09\u7EA7\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u56DB\u7EA7\u98CE' },
                                            '\u56DB\u7EA7\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u4E94\u7EA7\u98CE' },
                                            '\u4E94\u7EA7\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u516D\u7EA7\u98CE' },
                                            '\u516D\u7EA7\u98CE'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: '\u516D\u7EA7\u4EE5\u4E0A\u5927\u98CE' },
                                            '\u516D\u7EA7\u4EE5\u4E0A\u5927\u98CE'
                                        )
                                    ))
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'div',
                                { className: 'daily_tips' },
                                _react2.default.createElement(
                                    'p',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u9ED1\u8272\u6807\u9898\u5185\u5BB9\u5747\u4E3A\u5FC5\u586B\u9879\uFF0C\u5168\u90E8\u586B\u5199\u5B8C\u6210\u624D\u80FD\u63D0\u4EA4\u54E6~'
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                { className: 'daily_smalltip' },
                                _react2.default.createElement(
                                    'span',
                                    { className: 'mr30' },
                                    _react2.default.createElement(
                                        'span',
                                        { className: 'fwb mr5' },
                                        '\u7BB1\u4F53\u6570\u91CF:'
                                    ),
                                    ' ',
                                    daily.boxCount,
                                    '\u5957'
                                ),
                                _react2.default.createElement(
                                    'span',
                                    { className: 'mr30' },
                                    _react2.default.createElement(
                                        'span',
                                        { className: 'fwb mr5' },
                                        '\u9879\u76EE\u7528\u9014:'
                                    ),
                                    ' ',
                                    daily.purpose
                                ),
                                _react2.default.createElement(
                                    'span',
                                    { className: 'mr30' },
                                    _react2.default.createElement(
                                        'span',
                                        {
                                            className: 'fwb mr5' },
                                        '\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:'
                                    ),
                                    ' ',
                                    daily.planOverTime == null || daily.planOverTime == 0 ? "无" : (0, _moment2.default)(daily.planOverTime).format(dateFormat)
                                ),
                                _react2.default.createElement(
                                    'span',
                                    { className: 'mr30' },
                                    _react2.default.createElement(
                                        'span',
                                        {
                                            className: 'fwb mr5' },
                                        '\u5012\u8BA1\u65F6:'
                                    ),
                                    ' ',
                                    daily.countdownDay,
                                    '\u5929'
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Row,
                                null,
                                _react2.default.createElement(
                                    _antd.Col,
                                    { span: 6 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: '\u5230\u573A\u6570\u91CF(\u95F4)',
                                            labelAlign: 'right'
                                        }, formItemLayout3, {
                                            className: 'w require_label_form_daily' }),
                                        getFieldDecorator('arrivalCount', {
                                            initialValue: daily.arrivalCount,
                                            rules: [{
                                                required: true,
                                                message: '该项是必填'
                                            }]
                                        })(_react2.default.createElement(_antd.InputNumber, { max: daily.boxCount == null ? 0 : daily.boxCount, placeholder: '\u8BF7\u8F93\u5165', className: 'w', onChange: this.onChangeField.bind(this, "arrivalCount") }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { span: 6 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: '\u5DF2\u5B89\u88C5\u6570\u91CF(\u95F4)',
                                            labelAlign: 'right'
                                        }, formItemLayout3, {
                                            className: 'w require_label_form_daily' }),
                                        getFieldDecorator('installCount', {
                                            initialValue: daily.installCount,
                                            rules: [{
                                                required: false,
                                                message: '该项是必填'
                                            }]
                                        })(_react2.default.createElement(_antd.InputNumber, { disabled: true, max: daily.arrivalCount == null ? 0 : daily.arrivalCount, placeholder: '\u8BF7\u8F93\u5165', className: 'w', onChange: this.onChangeField.bind(this, "installCount") }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { span: 6 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: '\u5728\u9014\u6570\u91CF(\u95F4)',
                                            labelAlign: 'right'
                                        }, formItemLayout3, {
                                            className: 'w require_label_form_daily' }),
                                        getFieldDecorator('onWayCount', {
                                            initialValue: daily.onWayCount,
                                            rules: [{
                                                required: false,
                                                message: '该项是必填'
                                            }]
                                        })(_react2.default.createElement(_antd.InputNumber, { placeholder: '\u8BF7\u8F93\u5165', className: 'w', disabled: true }))
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Row,
                                null,
                                _react2.default.createElement(
                                    _antd.Col,
                                    { span: 6 },
                                    dataSource2.map(function (field, index) {
                                        return _react2.default.createElement(
                                            _antd.Form.Item,
                                            _extends({
                                                colon: false
                                            }, index === 0 ? formItemLayout : formItemLayoutWithOutLabel, {
                                                label: index === 0 ? _react2.default.createElement(
                                                    'div',
                                                    { className: 'f14', style: { lineHeight: "34px", paddingRight: "9px" } },
                                                    '\u914D\u9001\u8FDB\u5C55',
                                                    _react2.default.createElement(_antd.Icon, {
                                                        style: { marginLeft: '2px' },
                                                        onClick: function onClick() {
                                                            return _this3.add();
                                                        },
                                                        type: 'plus-circle' }),
                                                    ':'
                                                ) : '',
                                                className: 'w require_label_form_daily',
                                                labelAlign: 'center',
                                                required: false,
                                                key: index,
                                                style: { marginBottom: '0' }
                                            }),
                                            _react2.default.createElement(
                                                'div',
                                                { key: index, style: { display: 'flex' }, align: 'baseline', className: 'w' },
                                                _react2.default.createElement(
                                                    _antd.Form.Item,
                                                    _extends({}, field, {
                                                        rules: [{ required: false, message: '此项是必填' }]
                                                    }),
                                                    _react2.default.createElement(_antd.Input, { placeholder: '\u586B\u5199\u7269\u6D41\u4FE1\u606F', value: field.first, onChange: _this3.handleChange3.bind(_this3, "first", index) })
                                                ),
                                                _react2.default.createElement(
                                                    _antd.Form.Item,
                                                    _extends({
                                                        className: 'ml5'
                                                    }, field, {
                                                        rules: [{ required: false, message: '此项是必填' }]
                                                    }),
                                                    _react2.default.createElement(_antd.Input, { title: field.last, className: 'daily_input', placeholder: '\u81EA\u52A8\u83B7\u53D6\u65F6\u95F4', value: field.last, disabled: true })
                                                ),
                                                index === 0 ? null : _react2.default.createElement(_antd.Icon, { type: 'minus-circle',
                                                    style: { position: "relative", top: "14px", left: "6px" },
                                                    onClick: function onClick() {
                                                        return _this3.remove(index);
                                                    }
                                                })
                                            )
                                        );
                                    })
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { span: 6 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: '\u53F8\u673A\u59D3\u540D',
                                            labelAlign: 'right'
                                        }, formItemLayout3, {
                                            className: 'w require_label_form_daily' }),
                                        getFieldDecorator('driverName', {
                                            initialValue: field.driverName,
                                            rules: [{
                                                required: false,
                                                message: '该项是必填'
                                            }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', className: 'w', onChange: this.onChangeField.bind(this, "driverName") }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { span: 6 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        _extends({ label: '\u624B\u673A\u53F7',
                                            labelAlign: 'right'
                                        }, formItemLayout3, {
                                            className: 'w require_label_form_daily' }),
                                        getFieldDecorator('driverPhone', {
                                            initialValue: field.driverPhone,
                                            rules: [{
                                                required: false,
                                                message: '该项是必填'
                                            }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', className: 'w', onChange: this.onChangeField.bind(this, "driverPhone") }))
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                null,
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    _extends({ labelAlign: 'left' }, formItemLayout2, {
                                        className: 'w require_label_form hidden_redstar' }),
                                    getFieldDecorator('overallDescription', {
                                        initialValue: dailyPageState === 2 ? overallDescription : '',
                                        rules: [{
                                            required: false,
                                            message: '该项是必填'
                                        }]
                                    })(_react2.default.createElement(_braftEditor2.default, {
                                        className: 'my-editor',
                                        onChange: this.handleBChange.bind(this, 'overallDescription'),
                                        controls: controls,
                                        contentStyle: {
                                            minHeight: 100,
                                            height: 'auto',
                                            width: '100%'
                                        }
                                    }))
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u8FDB\u573A\u6750\u6599',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "red" } },
                                            '*'
                                        )
                                    ),
                                    labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('material', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.material : '',
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(_antd.Input.TextArea, { rows: 2, placeholder: '\u63CF\u8FF0\u4ECA\u65E5\u65BD\u5DE5\u8FDB\u573A\u6750\u6599\uFF0C\u5982\uFF1A\u4E00\u8F66\u5899\u677F\u3002',
                                    style: { width: '100%', minWidth: '800px' } }))
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'div',
                                { className: 'require_label' },
                                '\u4ECA\u65E5\u65BD\u5DE5\u5185\u5BB9:'
                            ),
                            _react2.default.createElement(
                                'div',
                                { className: 'mt15' },
                                isTodayContentLoadingCompleted ? _react2.default.createElement(_EditableTable2.default, {
                                    id: 'id',
                                    store: this.store,
                                    dataSource: todayContents,
                                    saveData: this.saveContents,
                                    disabled: false,
                                    tableType: 'today',
                                    dailyDate: dailyDate,
                                    pid: ''
                                }) : null
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'div',
                                { className: 'require_label' },
                                '\u660E\u65E5\u65BD\u5DE5\u8BA1\u5212:',
                                _react2.default.createElement(
                                    _antd.Button,
                                    { className: 'ml15', onClick: this.updateTomorrowContents, type: 'primary' },
                                    '\u66F4\u65B0\u660E\u65E5\u8BA1\u5212'
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                { className: 'mt15' },
                                _react2.default.createElement(_EditableTable2.default, {
                                    id: 'id',
                                    store: this.store,
                                    dataSource: tomorrowContents,
                                    saveData: this.saveTomorrowContents,
                                    disabled: false,
                                    tableType: 'tomorrow',
                                    pid: ''
                                })
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            { style: { display: 'flex' } },
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u4ECA\u65E5\u5DE5\u4EBA\u6570\u91CF',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "red" } },
                                            '*'
                                        )
                                    ),
                                    labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('workersCount', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.workersCount : null,
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(_antd.InputNumber, { min: 0, placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57',
                                    style: { width: '220px', marginRight: '6px' } })),
                                '\u4EBA'
                            ),
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: '\u672A\u6309\u8BA1\u5212\u8FDB\u573A\u6750\u6599', labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('noArriveMaterials', {
                                    initialValue: dailyPageState === 1 ? undefined : this.resolveNoArriveMaterials(dailyDetail),
                                    rules: [{
                                        required: false,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(
                                    _antd.Select,
                                    { mode: 'tags', showArrow: true, style: { width: '220px' }, placeholder: '\u8BF7\u9009\u62E9' },
                                    dailyMaterialList.length > 0 ? mobx.toJS(dailyMaterialList).map(function (item, index) {
                                        return _react2.default.createElement(
                                            Option,
                                            { key: index + 'dm',
                                                value: item.productDetailId },
                                            item.showName
                                        );
                                    }) : []
                                ))
                            ),
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u662F\u5426\u5F71\u54CD\u65BD\u5DE5\u8FDB\u5EA6',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "red" } },
                                            '*'
                                        )
                                    ),
                                    labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('materialInfluence', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.materialInfluence : undefined,
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(
                                    _antd.Select,
                                    { placeholder: '\u8BF7\u9009\u62E9', style: { width: '220px' } },
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u4E0D\u5F71\u54CD' },
                                        '\u4E0D\u5F71\u54CD'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u67091-2\u5929\u5F71\u54CD' },
                                        '\u67091-2\u5929\u5F71\u54CD'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u67093\u5929\u4EE5\u53CA\u8F83\u5927\u5F71\u54CD' },
                                        '\u67093\u5929\u4EE5\u53CA\u8F83\u5927\u5F71\u54CD'
                                    )
                                ))
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'div',
                                { className: 'require_label' },
                                '\u73B0\u573A\u7167\u7247/\u89C6\u9891:'
                            ),
                            _react2.default.createElement(
                                'div',
                                { className: 'daily_notice' },
                                _react2.default.createElement(
                                    'p',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u7167\u7247\u4E0A\u4F20\u8981\u6C42\uFF1A\u5305\u542B\u4ECA\u65E5 ',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "#D9001B" } },
                                            '\u65BD\u5DE5\u5185\u5BB9'
                                        ),
                                        ' \u7167\u7247\uFF1B\u5DE5\u4EBA\u4F69\u6234',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "#D9001B" } },
                                            '\u5B89\u5168\u5E3D'
                                        ),
                                        '\u3001\u8EAB\u7A7F',
                                        _react2.default.createElement(
                                            'span',
                                            {
                                                style: { color: "#D9001B" } },
                                            '\u53CD\u5149\u80CC\u5FC3'
                                        ),
                                        '\u7684\u7167\u7247\uFF1B\u6709\u4E8C\u5C42\u53CA\u4EE5\u4E0A\u65BD\u5DE5\u9700\u5305\u542B',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "#D9001B" } },
                                            '\u4E34\u8FB9\u5B89\u5168\u9632\u62A4'
                                        ),
                                        '\u7167\u7247',
                                        _react2.default.createElement(
                                            _antd.Button,
                                            { onClick: this.showUploadPicModal, type: 'link' },
                                            '\u70B9\u51FB\u4E0A\u4F20'
                                        )
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                null,
                                '\u5DF2\u9009\u56FE\u7247/\u89C6\u9891:'
                            ),
                            _react2.default.createElement(
                                'div',
                                { style: { minHeight: '50px', width: '100%' } },
                                _react2.default.createElement(
                                    'div',
                                    { className: 'imgList2' },
                                    _react2.default.createElement(
                                        'ul',
                                        null,
                                        dailyDocuments.length > 0 ? dailyDocuments.map(function (item, index) {
                                            if (item) {
                                                //获取后缀
                                                var getExt = function getExt(filePath) {
                                                    // 去掉url的问号
                                                    if (filePath.indexOf("?") != -1) {
                                                        filePath = filePath.split("?")[0];
                                                    }
                                                    //获取最后一个.的位置
                                                    var index = filePath.lastIndexOf(".");
                                                    //获取后缀
                                                    var ext = filePath.substr(index + 1);
                                                    return ext;
                                                };

                                                var isVideo = /(avi|dat|mpg|wmv|asf|rm|rmvb|mov|flv|mp4|3gp|dv|divx|qt|asx)$/.test(getExt(item.url));

                                                return _react2.default.createElement(
                                                    'li',
                                                    { key: index },
                                                    _react2.default.createElement(
                                                        'div',
                                                        {
                                                            title: item !== undefined && item.name !== undefined ? item.name : "" },
                                                        _react2.default.createElement(
                                                            'div',
                                                            { className: 'imgWrap' },
                                                            _react2.default.createElement(
                                                                'div',
                                                                { className: 'imgBox' },
                                                                _react2.default.createElement('img', {
                                                                    src: isVideo ? "./images/video.png" : item !== undefined && item.url !== undefined ? item.url : "" })
                                                            ),
                                                            isVideo ? null : _react2.default.createElement(
                                                                _antd.Button,
                                                                { onClick: function onClick() {
                                                                        _this3.handleSetCover(index);
                                                                    }, size: 'small', type: 'primary',
                                                                    disabled: item !== undefined && item.isVisible === 2 ? true : false,
                                                                    className: item !== undefined && item.isVisible === 1 ? "set_cover_button" : "cover_button" },
                                                                item !== undefined && item.isVisible === 1 ? "设为封面" : "封面照片"
                                                            ),
                                                            _react2.default.createElement('img', { onClick: function onClick() {
                                                                    _this3.handleRemovePic(index, item);
                                                                }, className: 'img_remove',
                                                                style: { width: '20px', height: '20px' },
                                                                src: './images/delivery/u1667.png' })
                                                        )
                                                    )
                                                );
                                            }
                                        }) : "",
                                        '}'
                                    )
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'div',
                                { className: 'require_label' },
                                '\u5B89\u5168\u6587\u660E\u65BD\u5DE5\u5B9A\u70B9\u7167\u7247',
                                _react2.default.createElement(
                                    'span',
                                    { style: { color: "red" } },
                                    '*'
                                )
                            ),
                            _react2.default.createElement(
                                'div',
                                { className: 'clearfix mt20 mb20' },
                                _react2.default.createElement(
                                    'div',
                                    { style: { width: '250px', float: 'left' } },
                                    '\u76D1\u6D4B\u70B9\u540D\u79F0'
                                ),
                                _react2.default.createElement(
                                    'div',
                                    { style: { width: '100px', textAlign: 'center', float: 'left', margin: '0 60px' } },
                                    '\u4E0A\u4F20\u7167\u7247'
                                ),
                                _react2.default.createElement(
                                    'div',
                                    { style: { width: '250px', textAlign: 'center', float: 'left' } },
                                    '\u4E0A\u4F20\u65F6\u95F4'
                                )
                            ),
                            mobx.toJS(dailyDetail).dailyProjectPhotos.map(function (item, index) {
                                return _react2.default.createElement(
                                    'div',
                                    { key: 'photos-' + index, className: 'clearfix mt10' },
                                    _react2.default.createElement(_antd.Input, { value: item.place, onChange: _this3.photoChange.bind(_this3, index),
                                        style: { width: '250px', float: 'left' }, placeholder: '请输入监测点名称' + (index + 1) }),
                                    _react2.default.createElement(
                                        'div',
                                        { style: { width: '100px', float: 'left', margin: '0 60px' } },
                                        _react2.default.createElement(_DailyUpload2.default, {
                                            aspect: aspectList[index]
                                            //fileList={item.imageDocs == null ? [] : item.imageDocs}
                                            , fileList: item.imageDocs == null ? [] : item.imageDocs.map(function (vitem, vindex) {
                                                return Object.assign({}, {
                                                    uid: vitem.id == null || vitem.id == "" ? "!" + (0, _uuid.v4)() : vitem.id,
                                                    name: vitem.name,
                                                    status: 'done',
                                                    url: vitem.fileUrl,
                                                    fileId: vitem.id == null ? "!" + (0, _uuid.v4)() : vitem.id,
                                                    fileName: vitem.name,
                                                    filePath: vitem.fileUrl,
                                                    id: vitem.id == null ? "!" + (0, _uuid.v4)() : vitem.id
                                                });
                                            }),
                                            saveAttachment: _this3.saveAttachment.bind(_this3, index)
                                        })
                                    ),
                                    _react2.default.createElement(_antd.Input, {
                                        value: item.createTime == 0 || item.createTime == null ? '' : (0, _moment2.default)(item.createTime).format('YYYY.MM.DD.HH:mm:ss'),
                                        style: { width: '250px', float: 'left' }, disabled: true, placeholder: '\u81EA\u52A8\u5E26\u51FA' })
                                );
                            })
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u660E\u65E5\u5929\u6C14',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "red" } },
                                            '*'
                                        )
                                    ),
                                    labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('tomorrowWeather', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.tomorrowWeather : '',
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(
                                    _antd.Select,
                                    { placeholder: '\u8BF7\u9009\u62E9\u5929\u6C14', style: { width: '20%' } },
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u6674' },
                                        '\u6674'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u591A\u4E91' },
                                        '\u591A\u4E91'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u9634' },
                                        '\u9634'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u96E8' },
                                        '\u96E8'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u96EA' },
                                        '\u96EA'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u5927\u98CE' },
                                        '\u5927\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u9F99\u5377\u98CE' },
                                        '\u9F99\u5377\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u96FE\u973E' },
                                        '\u96FE\u973E'
                                    )
                                )),
                                getFieldDecorator('tomorrowWindPower', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.tomorrowWindPower : '',
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(
                                    _antd.Select,
                                    { placeholder: '\u8BF7\u9009\u62E9\u98CE\u529B', style: { marginLeft: '2%', width: '20%' } },
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u5FAE\u98CE' },
                                        '\u5FAE\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u4E09\u7EA7\u98CE' },
                                        '\u4E09\u7EA7\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u56DB\u7EA7\u98CE' },
                                        '\u56DB\u7EA7\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u4E94\u7EA7\u98CE' },
                                        '\u4E94\u7EA7\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u516D\u7EA7\u98CE' },
                                        '\u516D\u7EA7\u98CE'
                                    ),
                                    _react2.default.createElement(
                                        Option,
                                        { value: '\u516D\u7EA7\u4EE5\u4E0A\u5927\u98CE' },
                                        '\u516D\u7EA7\u4EE5\u4E0A\u5927\u98CE'
                                    )
                                ))
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u660E\u65E5\u8FDB\u573A\u6750\u6599',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "red" } },
                                            '*'
                                        )
                                    ),
                                    labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('tomorrowMaterial', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.tomorrowMaterial : '',
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(_antd.Input.TextArea, { rows: 2, placeholder: '\u63CF\u8FF0\u660E\u65E5\u65BD\u5DE5\u8FDB\u573A\u6750\u6599\uFF0C\u5982\uFF1A\u4E00\u8F66\u5899\u677F\u3002',
                                    style: { width: '100%', minWidth: '800px' } }))
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: _react2.default.createElement(
                                        'span',
                                        null,
                                        '\u98CE\u9669\u4E0E\u534F\u52A9',
                                        _react2.default.createElement(
                                            'span',
                                            { style: { color: "red" } },
                                            '*'
                                        )
                                    ),
                                    labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('assistance', {
                                    initialValue: dailyPageState === 2 ? assistance : '',
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(_braftEditor2.default, {
                                    className: 'my-editor',
                                    onChange: this.handleBChange.bind(this, 'assistance'),
                                    controls: controls,
                                    contentStyle: {
                                        minHeight: 100,
                                        height: 'auto',
                                        width: '100%'
                                    }
                                }))
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            this.sscLabelHtml(),
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ colon: false, labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w require_label_form hidden_redstar' }),
                                getFieldDecorator('summary', {
                                    initialValue: dailyPageState === 2 ? summary : '',
                                    rules: [{
                                        required: true,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(_braftEditor2.default, {
                                    className: 'my-editor',
                                    onChange: this.handleBChange.bind(this, 'summary'),
                                    controls: controls,
                                    contentStyle: {
                                        minHeight: 100,
                                        height: 'auto',
                                        width: '100%'
                                    }
                                }))
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                _antd.Form.Item,
                                _extends({ label: '\u5907\u6CE8', labelAlign: 'left' }, formItemLayout2, {
                                    className: 'w hidden_redstar' }),
                                getFieldDecorator('contentRemarks', {
                                    initialValue: dailyPageState === 2 ? dailyDetail.contentRemarks : '',
                                    rules: [{
                                        required: false,
                                        message: '该项是必填'
                                    }]
                                })(_react2.default.createElement(_antd.Input.TextArea, { rows: 2, style: { width: '100%', minWidth: '800px' } }))
                            )
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'daily_submit_zone' },
                        _react2.default.createElement(
                            _antd.Button,
                            { disabled: submitButtonDisable, onClick: this.saveDraft, type: 'dashed', className: 'pr',
                                style: { paddingLeft: "30px" } },
                            _react2.default.createElement('img', { src: './images/delivery/u1377.png', style: {
                                    width: '20px',
                                    height: '20px',
                                    position: "absolute",
                                    top: "5px",
                                    left: "5px"
                                } }),
                            '\u4FDD\u5B58\u8349\u7A3F'
                        ),
                        _react2.default.createElement(
                            _antd.Button,
                            { disabled: submitButtonDisable, className: 'pr', onClick: this.submitPublish,
                                type: 'primary', style: { marginLeft: '20px', marginRight: '20px', paddingLeft: "30px" } },
                            _react2.default.createElement('img', { src: './images/delivery/u1720.png', style: {
                                    width: '20px',
                                    height: '20px',
                                    position: "absolute",
                                    top: "5px",
                                    left: "5px"
                                } }),
                            '\u63D0\u4EA4\u53D1\u5E03'
                        )
                    )
                ),
                _react2.default.createElement(
                    _antd.Modal,
                    {
                        title: '\u9009\u62E9\u56FE\u7247',
                        visible: picVisible,
                        style: { width: '900px' },
                        width: 900,
                        onOk: this.onHandleOk,
                        onCancel: this.onHandleCancel
                    },
                    _react2.default.createElement(
                        _antd.Tabs,
                        null,
                        _react2.default.createElement(
                            TabPane,
                            { tab: '\u4E0A\u4F20\u672C\u5730\u56FE\u7247/\u89C6\u9891', key: '1' },
                            _react2.default.createElement(_MyUploadNew2.default, {
                                saveAttachment: this.handleAttment.bind(this, 'attachments'),
                                disabled: false,
                                multiple: true,
                                listType: 'picture-card',
                                ossData: mobx.toJS(ossData),
                                fileList: attachments == null ? [] : attachments,
                                journalType: 'journal',
                                accept: ".jpg,.jpeg,.gif,.png,.bmp,.avi,.dat,.mpg,.wmv,.asf,.rm,.rmvb,.mov,.flv,.mp4,.3gp,.dv,.divx,.qt,.asx"
                            })
                        ),
                        _react2.default.createElement(
                            TabPane,
                            { tab: '\u9009\u62E9\u9879\u76EE\u76F8\u518C\u56FE\u7247', key: '2' },
                            documentPageList.length > 0 ? _react2.default.createElement(
                                'div',
                                { className: 'imgList' },
                                _react2.default.createElement(
                                    'ul',
                                    null,
                                    documentPageList.map(function (item, index) {
                                        return _react2.default.createElement(
                                            'li',
                                            { key: index },
                                            _react2.default.createElement(
                                                'div',
                                                { onClick: function onClick() {
                                                        _this3.handleSelectPics(index, item);
                                                    }, className: selectedPics !== index ? "content" : "contentSelected",
                                                    title: item.name },
                                                _react2.default.createElement(
                                                    'div',
                                                    { className: 'imgWrap' },
                                                    _react2.default.createElement(
                                                        'div',
                                                        { className: 'imgBox' },
                                                        _react2.default.createElement('img', { src: item.fileUrl })
                                                    ),
                                                    _react2.default.createElement(_antd.Checkbox, { checked: _this3.isSelectedPic(item),
                                                        className: 'img_checkbox' })
                                                ),
                                                _react2.default.createElement(
                                                    'div',
                                                    { className: 'title' },
                                                    item.name
                                                )
                                            )
                                        );
                                    })
                                )
                            ) : null,
                            _react2.default.createElement(
                                'div',
                                { className: 'img_list_pagination' },
                                _react2.default.createElement(_antd.Pagination, { onChange: this.handlePageonChange, pageSize: docPageParmas.pageSize,
                                    current: docPageParmas.pageIndex, defaultCurrent: 1,
                                    total: docPageParmas.totalCount })
                            )
                        )
                    )
                )
            );
        }
    }]);

    return DailyEdit;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);


var WrappedDailyEditForm = _antd.Form.create({})(DailyEdit);
exports.default = WrappedDailyEditForm;

/***/ }),

/***/ 2007:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*
                                                                                                                                                                                                                                                                  * 大文件上传组件 antd upload 支持拖拽排序
                                                                                                                                                                                                                                                                  * dangwei
                                                                                                                                                                                                                                                                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _reactSortableHoc = __webpack_require__(705);

var _UploadList = __webpack_require__(707);

var _UploadList2 = _interopRequireDefault(_UploadList);

__webpack_require__(1588);

var _antdImgCrop = __webpack_require__(1929);

var _antdImgCrop2 = _interopRequireDefault(_antdImgCrop);

__webpack_require__(750);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ifcancel = false;
var abortCheckpoint = void 0;
var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT,
		timeout: 5 * 60 * 1000
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file, option) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file, option).then(function (data) {
			resolve(data);
		}).catch(function (error) {
			reject(error);
		});
	});
};

var itemStyle = {
	width: 104,
	height: 104,
	margin: 4,
	cursor: 'grab',
	zIndex: '1000'
};

var SortableItem = (0, _reactSortableHoc.SortableElement)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: itemStyle, className: 'my_upload_normal_daily' },
		_react2.default.createElement(_UploadList2.default, {
			locale: { previewFile: '预览', removeFile: '删除', downloadFile: "下载" },
			listType: params.props.listType,
			onPreview: params.onPreview,
			onDownload: params.onDownload,
			onRemove: params.onRemove,
			items: [params.item],
			showDownloadIcon: true
		})
	);
});
var listStyle = {
	display: 'flex',
	flexWrap: 'wrap',
	maxWidth: '100%'
};
var SortableList = (0, _reactSortableHoc.SortableContainer)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: listStyle },
		params.items.map(function (item, index) {
			return _react2.default.createElement(SortableItem, {
				key: '' + item.uid,
				index: index,
				item: item,
				props: params.props,
				onPreview: params.props.onPreview,
				onDownload: params.props.onDownload,
				onRemove: params.props.onRemove
			});
		}),
		_react2.default.createElement(
			_antdImgCrop2.default,
			{ grid: true, aspect: params.props.aspect, rotate: true },
			_react2.default.createElement(
				_antd.Upload,
				_extends({}, params.props, {
					className: 'my_upload_normal',
					showUploadList: false
				}),
				params.uploadButton
			)
		),
		params.cancelButton
	);
});

var DailyUpload = function (_React$Component) {
	_inherits(DailyUpload, _React$Component);

	function DailyUpload() {
		var _ref,
		    _this2 = this;

		var _temp, _this, _ret;

		_classCallCheck(this, DailyUpload);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = DailyUpload.__proto__ || Object.getPrototypeOf(DailyUpload)).call.apply(_ref, [this].concat(args))), _this), _this.state = {
			fileList: [],
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0,
			expiration: "" // 过期时间
		}, _this.init = function () {
			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this.state.token));
					_this.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						}),
						expiration: str.expiration
					});
				}
			});
		}, _this.cancelUploadFileToAliyun = function (params) {
			(0, _api.requestPost)('cancelUploadFileToAliyun', _config2.default.journal.cancelUploadFileToAliyun, _journal2.default.journal.cancelUploadFileToAliyun, { uploadId: params.uploadId, key: params.name }).then(function (res) {
				if (res == true) {
					_antd.message.success("取消上传成功");
				}
			});
		}, _this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		}, _this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				url: url,
				fileId: null,
				fileName: file.name,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		}, _this.beforeUpload = function (file) {

			// 上传凭证失效，重查
			var expiration = _this.state.expiration;

			var expire = new Date(expiration).getTime();
			if (expiration != "" && expire < Date.now()) {
				_this.init();
			}

			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}

			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}

			_this.setState({
				loading: true
			});

			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function (e) {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file, {
					parallel: 4,
					partSize: 1024 * 1024,
					progress: function progress(p, cpt, res) {
						abortCheckpoint = cpt;
						//console.log(p, cpt, res, '进度');
					}
				}).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {

					if (error.name === 'abort') {
						// handle abort

					} else {
						//message.error("文件上传失败");
						_this.setState({
							loading: false
						});
						return false;
					}
				});
			};

			return false; // 不调用默认的上传方法
		}, _this.handlePreview = function () {
			var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										// 去掉url的问号
										if (filePath.indexOf("?") != -1) {
											filePath = filePath.split("?")[0];
										}
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref2.apply(this, arguments);
			};
		}(), _this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		}, _this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		}, _this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		}, _this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		}, _this.cancel = function () {
			ifcancel = true;
			var _abortCheckpoint = abortCheckpoint,
			    uploadId = _abortCheckpoint.uploadId,
			    name = _abortCheckpoint.name;

			client(_this).cancel();
			if (abortCheckpoint && uploadId != undefined) {
				_this.cancelUploadFileToAliyun({ name: name, uploadId: uploadId });
			}
			_this.setState({
				loading: false
			});
		}, _this.onSortEnd = function (_ref3) {
			var oldIndex = _ref3.oldIndex,
			    newIndex = _ref3.newIndex;
			var fileList = _this.state.fileList;

			_this.props.saveAttachment((0, _reactSortableHoc.arrayMove)(fileList, oldIndex, newIndex));
		}, _this.onRemove = function (file) {
			var fileList = _this.state.fileList;

			var newFileList = fileList.filter(function (item) {
				return item.uid !== file.uid;
			});
			_this.props.saveAttachment(newFileList);
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}

	_createClass(DailyUpload, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url || "";
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url || "";
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}

			// 访问后端，获取请求上传凭证
			this.init();
		}

		// 取消阿里云上传


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept,
			    aspect = _props.aspect;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "picture-card",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				onRemove: this.onRemove,
				aspect: aspect
			};
			var uploadButton = _react2.default.createElement(
				'div',
				{ className: 'pr' },
				_react2.default.createElement(_antd.Icon, { type: loading ? "loading" : "plus" }),
				loading ? _react2.default.createElement(
					'div',
					{ className: 'ant-upload-text' },
					'\u4E0A\u4F20\u4E2D'
				) : null
			);
			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(SortableList, {
					distance: 1,
					items: fileList,
					onSortEnd: this.onSortEnd,
					axis: 'xy',
					helperClass: 'SortableHelper',
					props: props,
					uploadButton: disabled || fileList.length >= 1 ? "" : uploadButton
				}),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage,
						alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this3.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return DailyUpload;
}(_react2.default.Component);

exports.default = DailyUpload;

/***/ }),

/***/ 2008:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交付管理-日报查看
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _uuid = __webpack_require__(79);

var _EditableTable = __webpack_require__(1658);

var _EditableTable2 = _interopRequireDefault(_EditableTable);

var _EditableTableTomorrowMaterial = __webpack_require__(1784);

var _EditableTableTomorrowMaterial2 = _interopRequireDefault(_EditableTableTomorrowMaterial);

var _MyUpload = __webpack_require__(1517);

var _MyUpload2 = _interopRequireDefault(_MyUpload);

var _copyToClipboard = __webpack_require__(1656);

var _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);

var _jsBase = __webpack_require__(95);

var _reactZmage = __webpack_require__(1522);

var _reactZmage2 = _interopRequireDefault(_reactZmage);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var dateFormat = 'YYYY-MM-DD HH:mm:ss';
var dateFormat2 = 'YYYY-MM-DD';

var DailyView = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(DailyView, _React$Component);

	function DailyView(props) {
		_classCallCheck(this, DailyView);

		var _this = _possibleConstructorReturn(this, (DailyView.__proto__ || Object.getPrototypeOf(DailyView)).call(this, props));

		_this.getProgressStateInfo = function (state) {
			var info = "";
			if (state === 0) {
				info = "正常";
			}
			if (state === 1) {
				info = "提前";
			}
			if (state === 2) {
				info = "延迟";
			}
			return info;
		};

		_this.showDailyDocumnet = function () {
			var _this$store = _this.store,
			    projectDetail = _this$store.projectDetail,
			    dailyDetail = _this$store.dailyDetail;

			var dailyDocuments = [];
			//获取后缀
			function getExt(filePath) {
				// 去掉url的问号
				if (filePath.indexOf("?") != -1) {
					filePath = filePath.split("?")[0];
				}
				//获取最后一个.的位置
				var index = filePath.lastIndexOf(".");
				//获取后缀
				var ext = filePath.substr(index + 1);
				return ext;
			}

			if (mobx.toJS(dailyDetail).dailyDocuments !== null && mobx.toJS(dailyDetail).dailyDocuments.length > 0) {
				dailyDocuments = mobx.toJS(dailyDetail).dailyDocuments.map(function (item, index) {
					if (item) {
						var isVideo = /(avi|dat|mpg|wmv|asf|rm|rmvb|mov|flv|mp4|3gp|dv|divx|qt|asx)$/.test(getExt(item.fileUrl));
						return Object.assign({}, {
							"fileId": null,
							"fileName": item.fileUrl,
							"filePath": item.fileUrl,
							"id": "",
							"name": item.name,
							"status": "done",
							"uid": (0, _uuid.v4)(),
							"url": isVideo ? './images/video.png' : item.fileUrl
						});
					}
				});
				dailyDocuments = dailyDocuments.filter(function (item, index) {
					return item.url !== null;
				});
			}
			return dailyDocuments;
		};

		_this.getWeatherIconUrl = function (weather) {
			var iconUrl = "./images/delivery/weather/clearday.png";
			if (weather === "晴") {
				iconUrl = "./images/delivery/weather/clearday.png";
			}
			if (weather === "多云") {
				iconUrl = "./images/delivery/weather/cloud.png";
			}
			if (weather === "阴") {
				iconUrl = "./images/delivery/weather/overcast.png";
			}
			if (weather === "雨") {
				iconUrl = "./images/delivery/weather/rain.png";
			}
			if (weather === "雪") {
				iconUrl = "./images/delivery/weather/snow.png";
			}
			if (weather === "大风") {
				iconUrl = "./images/delivery/weather/wind.png";
			}
			if (weather === "龙卷风") {
				iconUrl = "./images/delivery/weather/tornado.png";
			}
			if (weather === "雾霾") {
				iconUrl = "./images/delivery/weather/haze.png";
			}
			return iconUrl;
		};

		_this.handleSelectedDaily = function (item, index) {
			_this.setState({ currentItem: index });
			_this.store.getDailyById({ "id": item.id }).then(function (res) {
				_this.store.dailyDetail = Object.assign({}, res);
			});
		};

		_this.getDailyListPage = function () {
			var projectDetail = _this.store.projectDetail;

			_this.store.dailyParmas.projectId = mobx.toJS(projectDetail).id;
			_this.store.dailyParmas.pageIndex = 1;
			_this.store.getDailyListPage().then(function (res) {
				_this.store.dailyList = Object.assign([], res.body);
				_this.store.dailyParmas.pageIndex = res.pageIndex;
				_this.store.dailyParmas.pageSize = res.pageSize;
				_this.store.dailyParmas.totalCount = res.totalCount;
				if (res.body.length > 0) {
					_this.handleSelectedDaily(res.body[0], 0);
				}
			});
		};

		_this.editDaily = function () {
			_this.store.dailyPageState = 2; //进入日报编辑状态
		};

		_this.delDaily = function () {
			var dailyDetail = _this.store.dailyDetail;

			_this.store.delDaily({ "id": dailyDetail.id }).then(function (res) {
				_this.getDailyListPage();
			});
		};

		_this.handleCloseModal = function () {
			_this.setState({ shareModalVisible: false });
		};

		_this.showModal = function () {
			_this.setState({ shareModalVisible: true });
		};

		_this.copyHref = function () {
			var _this$store2 = _this.store,
			    projectDetail = _this$store2.projectDetail,
			    dailyDetail = _this$store2.dailyDetail;

			(0, _copyToClipboard2.default)('https://www.bocspace.cn/repair/#/delivery/dailyshare?projectid=' + projectDetail.id + '&dailyid=' + dailyDetail.id);
			_antd.notification.success({
				message: '成功！',
				description: '成功复制到粘贴板！'
			});
		};

		_this.resolveNoArriveMaterials = function (dailyDetail) {
			var result = void 0;
			if (dailyDetail.noArriveMaterials === null) {
				result = "无";
			} else if (mobx.toJS(dailyDetail).noArriveMaterials.filter(function (item) {
				return item === null;
			}).length === mobx.toJS(dailyDetail).noArriveMaterials.length) {
				result = "无";
			} else {
				result = mobx.toJS(dailyDetail).noArriveMaterials.map(function (item) {
					if (item !== null && item.showName !== undefined) {
						return item.showName;
					} else {
						return "-";
					}
				}).join(", ");
			}
			return result;
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			shareModalVisible: false
		};
		return _this;
	}

	_createClass(DailyView, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'render',
		value: function render() {
			var shareModalVisible = this.state.shareModalVisible;
			var _store = this.store,
			    projectDetail = _store.projectDetail,
			    dailyDetail = _store.dailyDetail;

			var dailyParmas = mobx.toJS(this.store.dailyParmas);
			var type = dailyParmas.type;


			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_head' },
					_react2.default.createElement(
						'div',
						{ className: 'title_info' },
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_title' },
							projectDetail.name + '-' + dailyDetail.title
						),
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_progress' },
							'\u65BD\u5DE5\u8FDB\u5EA6 ',
							_react2.default.createElement(
								'span',
								{ className: 'color_status' },
								this.getProgressStateInfo(dailyDetail.progressState)
							)
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'buttons_zone' },
						_react2.default.createElement(
							_antd.Button,
							{ className: type == 0 ? "title" : "hidden", type: 'link', onClick: this.showModal },
							_react2.default.createElement('img', { src: './images/delivery/u389.png', style: { width: '20px', height: '20px' } }),
							'\u5206\u4EAB'
						),
						_react2.default.createElement(
							'span',
							{ className: type == 0 ? "gap" : "hidden" },
							' '
						),
						_react2.default.createElement(
							_antd.Button,
							{ className: 'title', type: 'link', onClick: this.editDaily },
							_react2.default.createElement('img', { src: './images/delivery/u1479.png', style: { width: '16px', height: '16px' } }),
							'\u7F16\u8F91'
						),
						_react2.default.createElement(
							'span',
							{ className: 'gap' },
							' '
						),
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u5220\u9664?', onConfirm: this.delDaily },
							_react2.default.createElement(
								_antd.Button,
								{ className: 'title', type: 'link' },
								_react2.default.createElement('img', { src: './images/delivery/u1480.png', style: { width: '16px', height: '16px' } }),
								'\u5220\u9664'
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'weather_author' },
					_react2.default.createElement('img', { src: this.getWeatherIconUrl(dailyDetail.weather), style: { width: '27px', height: '27px' } }),
					_react2.default.createElement(
						'div',
						{ className: 'info' },
						_react2.default.createElement(
							'div',
							{ className: 'weather' },
							dailyDetail.weather + '\uFF0C' + dailyDetail.windPower
						),
						_react2.default.createElement(
							'div',
							{ className: 'author' },
							dailyDetail.createUserName === null ? '' : dailyDetail.createUserName,
							' ',
							dailyDetail.createTime !== 0 ? (0, _moment2.default)(dailyDetail.createTime).format(dateFormat) : ''
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_smalltip', style: { paddingLeft: "20px", color: "#02A7F0", marginBottom: 0 } },
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u7BB1\u4F53\u6570\u91CF:'
						),
						' ',
						dailyDetail.boxCount,
						'\u5957'
					),
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u9879\u76EE\u7528\u9014:'
						),
						' ',
						dailyDetail.purpose
					),
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u8BA1\u5212\u5B8C\u6210\u65F6\u95F4:'
						),
						' ',
						dailyDetail.planOverTime == null || dailyDetail.planOverTime == 0 ? "无" : (0, _moment2.default)(dailyDetail.planOverTime).format(dateFormat2)
					),
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u5012\u8BA1\u65F6:'
						),
						' ',
						dailyDetail.countdownDay,
						'\u5929'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_smalltip', style: { paddingLeft: "20px", color: "#02A7F0", margin: 0 } },
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u5230\u573A\u6570\u91CF:'
						),
						' ',
						dailyDetail.arrivalCount,
						'\u95F4'
					),
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u5DF2\u5B89\u88C5\u6570\u91CF:'
						),
						' ',
						dailyDetail.installCount,
						'\u95F4'
					),
					_react2.default.createElement(
						'span',
						{ className: 'mr30' },
						_react2.default.createElement(
							'span',
							{ className: 'fwb mr5' },
							'\u5728\u9014\u6570\u91CF:'
						),
						' ',
						dailyDetail.onWayCount,
						'\u95F4'
					),
					_react2.default.createElement(
						'div',
						null,
						_react2.default.createElement(
							'span',
							{ className: 'mr30' },
							_react2.default.createElement(
								'span',
								{ className: 'fwb mr5' },
								'\u53F8\u673A\u59D3\u540D:'
							),
							' ',
							dailyDetail.driverName
						),
						_react2.default.createElement(
							'span',
							{ className: 'mr30' },
							_react2.default.createElement(
								'span',
								{ className: 'fwb mr5' },
								'\u624B\u673A\u53F7:'
							),
							' ',
							dailyDetail.driverPhone
						)
					),
					_react2.default.createElement(
						'div',
						null,
						_react2.default.createElement(
							'span',
							{ className: 'mr30' },
							_react2.default.createElement(
								'span',
								{ className: 'fwb mr5' },
								'\u914D\u9001\u8FDB\u5C55:'
							),
							dailyDetail.distributionJson == null || dailyDetail.distributionJson == "" ? "" : JSON.parse(dailyDetail.distributionJson).map(function (item, index) {
								return _react2.default.createElement(
									'div',
									{ key: index },
									_react2.default.createElement(
										'span',
										{ className: 'dill_title ellsis', title: item.first, style: { color: "#333" } },
										index + 1 + ". ",
										item.first == "" || item.first == undefined ? "无" : item.first
									),
									_react2.default.createElement(
										'span',
										{ className: 'dill_title ellsis w40 ml5', style: { color: "#0ECE73" }, title: item.last },
										item.last
									)
								);
							})
						)
					)
				),
				dailyDetail.overallDescription !== null && dailyDetail.overallDescription !== "" && _react2.default.createElement(
					'div',
					{ className: 'overall_desc' },
					_react2.default.createElement(
						'div',
						{ className: 'desc_info' },
						_react2.default.createElement('div', { className: 'deaft_content_detail', dangerouslySetInnerHTML: { __html: dailyDetail.overallDescription } })
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u4ECA\u65E5\u65BD\u5DE5\u5185\u5BB9'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(_EditableTable2.default, {
							id: 'id',
							store: this.store,
							dataSource: dailyDetail.contents,
							disabled: true,
							tableType: 'today',
							pid: ''
						})
					)
				),
				dailyDetail.contentRemarks == null || dailyDetail.contentRemarks == "" ? "" : _react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u5907\u6CE8\u4FE1\u606F'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(
							'p',
							null,
							dailyDetail.contentRemarks
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ style: { display: 'flex' } },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_item' },
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_label' },
							'\u4ECA\u65E5\u5DE5\u4EBA\u6570\u91CF'
						),
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_content' },
							dailyDetail.workersCount,
							'\u4EBA'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_item' },
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_label' },
							'\u672A\u6309\u8BA1\u5212\u8FDB\u573A\u6750\u6599'
						),
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_content' },
							this.resolveNoArriveMaterials(dailyDetail)
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_item' },
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_label' },
							'\u662F\u5426\u5F71\u54CD\u65BD\u5DE5\u8FDB\u5EA6'
						),
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_content' },
							dailyDetail.materialInfluence
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u4ECA\u65E5\u8FDB\u573A\u6750\u6599'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						dailyDetail.material
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u73B0\u573A\u7167\u7247'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(_MyUpload2.default, {
							disabled: true,
							multiple: true,
							listType: 'picture-card',
							fileList: this.showDailyDocumnet(),
							journalType: 'journal'
						})
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u5B89\u5168\u6587\u660E\u65BD\u5DE5\u5B9A\u70B9\u7167\u7247'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(
							'div',
							{ className: 'clearfix mt20 mb20' },
							_react2.default.createElement(
								'div',
								{ style: { width: '250px', float: 'left' } },
								'\u76D1\u6D4B\u70B9\u540D\u79F0'
							),
							_react2.default.createElement(
								'div',
								{ style: { width: '100px', textAlign: 'center', float: 'left', margin: '0 60px' } },
								'\u4E0A\u4F20\u7167\u7247'
							),
							_react2.default.createElement(
								'div',
								{ style: { width: '250px', textAlign: 'center', float: 'left' } },
								'\u4E0A\u4F20\u65F6\u95F4'
							)
						),
						mobx.toJS(dailyDetail).dailyProjectPhotos != null && mobx.toJS(dailyDetail).dailyProjectPhotos.length > 0 && mobx.toJS(dailyDetail).dailyProjectPhotos.map(function (item, index) {
							return _react2.default.createElement(
								'div',
								{ key: 'photos-' + index, className: 'clearfix mt10' },
								_react2.default.createElement(
									'div',
									{ style: { width: '250px', float: 'left' } },
									item.place
								),
								_react2.default.createElement(
									'div',
									{ style: { width: '100px', textAlign: 'center', float: 'left', margin: '0 60px' } },
									Array.isArray(item.imageDocs) && item.imageDocs.length > 0 ? _react2.default.createElement(_reactZmage2.default, {
										width: '80',
										height: '80',
										src: item.imageDocs[0].fileUrl, alt: '' }) : _react2.default.createElement('div', { style: { width: "150px", height: "80px" } })
								),
								_react2.default.createElement(
									'div',
									{ style: { width: '250px', textAlign: 'center', float: 'left' } },
									item.createTime == 0 || item.createTime == null ? '' : (0, _moment2.default)(item.createTime).format('YYYY.MM.DD.HH:mm:ss')
								)
							);
						})
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u73B0\u573A\u65BD\u5DE5\u603B\u7ED3'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement('div', { className: 'deaft_content_detail', dangerouslySetInnerHTML: { __html: dailyDetail.summary } })
					)
				),
				_react2.default.createElement('div', { className: 'split-line' }),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u660E\u65E5\u65BD\u5DE5\u8BA1\u5212'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(_EditableTable2.default, {
							id: 'id',
							store: this.store,
							dataSource: dailyDetail.tomorrowContents,
							disabled: true,
							tableType: 'tomorrow',
							pid: ''
						})
					)
				),
				dailyDetail.tomorrowPlanRemarks == null || dailyDetail.tomorrowPlanRemarks == "" ? null : _react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u5907\u6CE8\u4FE1\u606F'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(
							'p',
							null,
							dailyDetail.tomorrowPlanRemarks
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u660E\u65E5\u5929\u6C14'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(
							'div',
							{ className: 'weather_info' },
							_react2.default.createElement('img', { src: this.getWeatherIconUrl(dailyDetail.tomorrowWeather), style: { width: '27px', height: '27px' } }),
							_react2.default.createElement(
								'div',
								{ className: 'info' },
								_react2.default.createElement(
									'div',
									{ className: 'weather' },
									dailyDetail.tomorrowWeather + '\uFF0C' + dailyDetail.tomorrowWindPower
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u660E\u65E5\u8FDB\u573A\u6750\u6599'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content' },
						_react2.default.createElement(
							'p',
							null,
							dailyDetail.tomorrowMaterial
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_item' },
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_label' },
						'\u98CE\u9669\u4E0E\u534F\u52A9'
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_view_content', style: { paddingBottom: '40px' } },
						_react2.default.createElement('div', { className: 'deaft_content_detail', dangerouslySetInnerHTML: { __html: dailyDetail.assistance } })
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: '\u5206\u4EAB\u65E5\u62A5',
						visible: shareModalVisible,
						maskClosable: false,
						onCancel: this.handleCloseModal,
						footer: null,
						style: { top: 60, height: '100px', minWidth: '500px', maxWidth: '500px' },
						bodyStyle: { padding: 0 }
					},
					_react2.default.createElement(
						'div',
						{ style: { padding: '20px', textAlign: 'left' } },
						_react2.default.createElement(
							'p',
							null,
							'https://www.bocspace.cn/repair/#/delivery/dailyshare?projectid=' + projectDetail.id + '&dailyid=' + dailyDetail.id
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_submit_zone' },
						_react2.default.createElement(
							_antd.Button,
							{ onClick: this.copyHref, type: 'primary', style: { marginTop: '20px', marginRight: '20px' } },
							'\u590D\u5236\u94FE\u63A5'
						)
					)
				)
			);
		}
	}]);

	return DailyView;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = DailyView;

/***/ }),

/***/ 2009:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 日报 邮件设置
                  *dangw@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _PersonAdd = __webpack_require__(1878);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var plainOptions = [{ value: 1, label: '智建美住' }, { value: 2, label: '广联达' }];

var EmailSetting = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(EmailSetting, _React$Component);

	function EmailSetting(props) {
		_classCallCheck(this, EmailSetting);

		var _this = _possibleConstructorReturn(this, (EmailSetting.__proto__ || Object.getPrototypeOf(EmailSetting)).call(this, props));

		_this.updatePerson = function (users) {
			_this.setState({
				otherCompanyPeople: users
			}, function () {
				_this.handleSave();
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				sendType: e.target.value
			}, function () {
				_this.handleSave();
			});
		};

		_this.handleBack = function () {
			_this.store.dailyEmail = false;
		};

		_this.handleSave = function () {
			var _this$state = _this.state,
			    otherCompanyPeople = _this$state.otherCompanyPeople,
			    customer = _this$state.customer,
			    teamPeople = _this$state.teamPeople,
			    sendType = _this$state.sendType;

			var active = JSON.parse(JSON.stringify(_this.state.active));
			var people = JSON.parse(JSON.stringify(otherCompanyPeople));
			var params = Object.assign(active, {
				otherCompanyPeople: people.map(function (item) {
					return { "id": item.userId, "userName": item.userName };
				}),
				customer: customer,
				teamPeople: teamPeople,
				sendType: sendType
			});
			_this.store.saveDailyEmailSetting({ des: params }).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
				}
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			active: {},
			otherCompanyPeople: [],
			customer: [],
			teamPeople: [],
			sendType: 1
		};
		return _this;
	}

	_createClass(EmailSetting, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this2 = this;

			var projectId = this.props.projectId;

			if (projectId != null) {
				this.store.getDailyEmailSetting({ projectId: projectId }).then(function (res) {
					var people = res.otherCompanyPeople;
					_this2.setState({
						active: res,
						otherCompanyPeople: res.otherCompanyPeople == null ? [] : people.map(function (item) {
							return { "userId": item.id, "userName": item.userName };
						}),
						customer: res.customer,
						teamPeople: res.teamPeople,
						sendType: res.sendType
					});
				});
			}
		}

		// 保存

	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    otherCompanyPeople = _state.otherCompanyPeople,
			    customer = _state.customer,
			    teamPeople = _state.teamPeople,
			    sendType = _state.sendType;


			return _react2.default.createElement(
				'div',
				{ style: { padding: "10px 30px" } },
				_react2.default.createElement(
					_antd.Row,
					null,
					_react2.default.createElement(
						_antd.Col,
						{ span: 24, style: { paddingBottom: "15px", borderBottom: "1px dashed #e6e6e6" } },
						_react2.default.createElement(_antd.Icon, { type: 'left-circle', style: { color: "#6CB6FF" } }),
						'  ',
						_react2.default.createElement(
							'span',
							{ onClick: this.handleBack, className: 'emailSetting-back' },
							'\u8FD4\u56DE\u65E5\u62A5\u5217\u8868'
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ span: 24 },
						_react2.default.createElement(
							'div',
							{ className: 'daily_tips' },
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									{ style: { fontSize: 12 } },
									'\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u65E5\u62A5\u63D0\u4EA4\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u53D1\u9001\u90AE\u4EF6\u81F3\u4E0B\u5217\u76F8\u5173\u6210\u5458\u90AE\u7BB1\uFF0C\u53EF\u6DFB\u52A0\u60A8\u9700\u8981\u901A\u77E5\u7684\u5176\u4ED6\u6210\u5458'
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'p',
					{ className: 'emailSetting-title' },
					'\u5BA2\u6237\uFF08\u5173\u952E\u5E72\u7CFB\u4EBA\uFF09'
				),
				customer.length > 0 ? customer.map(function (item, index) {
					return _react2.default.createElement(
						'div',
						{ className: 'emailSetting-p', key: "customer" + index },
						item.userName
					);
				}) : "无",
				_react2.default.createElement(
					'p',
					{ className: 'emailSetting-title' },
					'\u9879\u76EE\u7EC4\u6210\u5458'
				),
				teamPeople.length > 0 ? teamPeople.map(function (item, index) {
					return _react2.default.createElement(
						'div',
						{ className: 'emailSetting-p', key: "teamPeople" + index },
						item.userName
					);
				}) : "无",
				_react2.default.createElement(
					'p',
					{ className: 'emailSetting-title' },
					'\u516C\u53F8\u5185\u90E8\u5176\u4ED6\u4EBA\u5458'
				),
				_react2.default.createElement(_PersonAdd2.default, {
					data: otherCompanyPeople,
					updatePerson: this.updatePerson,
					disabled: false
				}),
				_react2.default.createElement(
					'p',
					{ className: 'emailSetting-title' },
					'\u9ED8\u8BA4\u53D1\u9001\u65B9\u8BBE\u7F6E'
				),
				_react2.default.createElement(_antd.Radio.Group, { options: plainOptions, onChange: this.onChange, value: sendType })
			);
		}
	}]);

	return EmailSetting;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = EmailSetting;

/***/ }),

/***/ 2010:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*
                                                                                                                                                                                                                                                                  * 大文件上传组件 antd upload 支持拖拽排序
                                                                                                                                                                                                                                                                  * dangwei
                                                                                                                                                                                                                                                                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _mobxReact = __webpack_require__(22);

var _reactSortableHoc = __webpack_require__(705);

var _UploadList = __webpack_require__(707);

var _UploadList2 = _interopRequireDefault(_UploadList);

__webpack_require__(1588);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ifcancel = false;
var abortCheckpoint = void 0;

var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT,
		timeout: 5 * 60 * 1000
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file, option) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file, option).then(function (data) {
			resolve(data);
		}).catch(function (error) {
			reject(error);
		});
	});
};

var itemStyle = {
	width: 104,
	height: 104,
	margin: 4,
	cursor: 'grab',
	zIndex: '1000'
};
var SortableItem = (0, _reactSortableHoc.SortableElement)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: itemStyle },
		_react2.default.createElement(_UploadList2.default, {
			locale: { previewFile: '预览', removeFile: '删除', downloadFile: "下载" },
			listType: params.props.listType,
			onPreview: params.onPreview,
			onDownload: params.onDownload,
			onRemove: params.onRemove,
			items: [params.item],
			showDownloadIcon: true
		})
	);
});
var listStyle = {
	display: 'flex',
	flexWrap: 'wrap',
	maxWidth: '100%'
};
var SortableList = (0, _reactSortableHoc.SortableContainer)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: listStyle },
		params.items.map(function (item, index) {
			return _react2.default.createElement(SortableItem, {
				key: '' + item.uid,
				index: index,
				item: item,
				props: params.props,
				onPreview: params.props.onPreview,
				onDownload: params.props.onDownload,
				onRemove: params.props.onRemove
			});
		}),
		_react2.default.createElement(
			_antd.Upload,
			_extends({}, params.props, {
				className: 'my_upload_normal',
				showUploadList: false
			}),
			params.uploadButton
		),
		params.cancelButton
	);
});

var MyUploadNew = (_dec = (0, _mobxReact.inject)('appStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MyUploadNew, _React$Component);

	function MyUploadNew(props) {
		var _this2 = this;

		_classCallCheck(this, MyUploadNew);

		var _this = _possibleConstructorReturn(this, (MyUploadNew.__proto__ || Object.getPrototypeOf(MyUploadNew)).call(this, props));

		_this.init = function () {
			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this.state.token));
					_this.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						}),
						expiration: str.expiration
					});
				}
			});
		};

		_this.cancelUploadFileToAliyun = function (params) {
			(0, _api.requestPost)('cancelUploadFileToAliyun', _config2.default.journal.cancelUploadFileToAliyun, _journal2.default.journal.cancelUploadFileToAliyun, { uploadId: params.uploadId, key: params.name }).then(function (res) {
				if (res == true) {
					_antd.message.success("取消上传成功");
				}
			});
		};

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				url: url,
				fileId: null,
				fileName: file.name,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		};

		_this.beforeUpload = function (file) {

			// 上传凭证失效，重查
			var expiration = _this.state.expiration;

			var expire = new Date(expiration).getTime();
			if (expiration != "" && expire < Date.now()) {
				_this.init();
			}

			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}

			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}

			_this.setState({
				loading: true
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = true; // 记录一次
				}
			});

			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file, {
					parallel: 4,
					partSize: 1024 * 1024,
					progress: function progress(p, cpt, res) {
						abortCheckpoint = cpt;
						//console.log(p, cpt, res, '进度');
					}
				}).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {

					if (error.name === 'abort') {
						// handle abort

					} else {
						//message.error("文件上传失败");
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});
						return false;
					}
				});
			};

			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										// 去掉url的问号
										if (filePath.indexOf("?") != -1) {
											filePath = filePath.split("?")[0];
										}
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频，视频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.handleCancel = function (type) {
			var _this$setState;

			return _this.setState((_this$setState = {}, _defineProperty(_this$setState, type, false), _defineProperty(_this$setState, 'previewImage', ""), _defineProperty(_this$setState, 'name', ""), _this$setState));
		};

		_this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.cancel = function () {
			ifcancel = true;
			var _abortCheckpoint = abortCheckpoint,
			    uploadId = _abortCheckpoint.uploadId,
			    name = _abortCheckpoint.name;

			client(_this).cancel();
			if (abortCheckpoint && uploadId != undefined) {
				_this.cancelUploadFileToAliyun({ name: name, uploadId: uploadId });
			}
			_this.setState({
				loading: false
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = false; // 清楚记录
				}
			});
		};

		_this.onSortEnd = function (_ref2) {
			var oldIndex = _ref2.oldIndex,
			    newIndex = _ref2.newIndex;
			var fileList = _this.state.fileList;

			_this.props.saveAttachment((0, _reactSortableHoc.arrayMove)(fileList, oldIndex, newIndex));
		};

		_this.onRemove = function (file) {
			var fileList = _this.state.fileList;

			var newFileList = fileList.filter(function (item) {
				return item.uid !== file.uid;
			});
			_this.props.saveAttachment(newFileList);
		};

		_this.store = _this.props.appStore;
		_this.state = {
			fileList: _this.props.fileList,
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0,
			expiration: "" // 过期时间
		};
		return _this;
	}

	_createClass(MyUploadNew, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else if (/\.(avi|dat|mpg|wmv|asf|rm|rmvb|mov|flv|mp4|3gp|dv|divx|qt|asx)$/.test(file.name)) {
							file.url = './images/video.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (this.props.journalType) {
				this.store.journal = false; // 记录一次
			}
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else if (/\.(avi|dat|mpg|wmv|asf|rm|rmvb|mov|flv|mp4|3gp|dv|divx|qt|asx)$/.test(file.name)) {
							file.url = './images/video.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}

			// 访问后端，获取请求上传凭证
			this.init();
		}

		// 取消阿里云上传


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx,.avi,.dat,.mpg,.wmv,.asf,.rm,.rmvb,.mov,.flv,.mp4,.3gp,.dv,.divx,.qt,.asx"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "picture-card",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				onRemove: this.onRemove
			};
			var uploadButton = _react2.default.createElement(
				'div',
				{ className: 'pr' },
				_react2.default.createElement(_antd.Icon, { type: loading ? "loading" : "plus" }),
				loading ? _react2.default.createElement(
					'div',
					{ className: 'ant-upload-text' },
					'\u4E0A\u4F20\u4E2D'
				) : null
			);
			var cancelButton = loading ? _react2.default.createElement(_antd.Icon, { type: 'stop',
				title: '\u53D6\u6D88\u4E0A\u4F20',
				style: {
					fontSize: '15px',
					color: '#1890ff'
				},
				onClick: this.cancel }) : null;
			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(SortableList, {
					distance: 1,
					items: fileList,
					onSortEnd: this.onSortEnd,
					axis: 'xy',
					helperClass: 'SortableHelper',
					props: props,
					uploadButton: disabled ? "" : uploadButton,
					cancelButton: cancelButton
				}),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement(
						'video',
						{ src: previewImage, controls: 'controls', width: "100%", height: "100%" },
						'\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 video \u6807\u7B7E\u3002'
					)
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this3.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUploadNew;
}(_react2.default.Component)) || _class) || _class);
exports.default = MyUploadNew;

/***/ }),

/***/ 2011:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 项目信息 新的模板
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _MyUpload4Affairs = __webpack_require__(1564);

var _MyUpload4Affairs2 = _interopRequireDefault(_MyUpload4Affairs);

var _reactZmage = __webpack_require__(1522);

var _reactZmage2 = _interopRequireDefault(_reactZmage);

var _PersonAdd = __webpack_require__(1881);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

var _CommunicationWay = __webpack_require__(2004);

var _CommunicationWay2 = _interopRequireDefault(_CommunicationWay);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _mobxReact = __webpack_require__(22);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TextArea = _antd.Input.TextArea;
var Option = _antd.Select.Option;
var Index = (_dec = _antd.Form.create(), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Index, _React$Component);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this.handleAttment = function (type, param) {
			var url = param && param[0].url;
			_this.store.stakeObj[type] = url;
		};

		_this.updatePerson = function (params) {
			_this.store.stakeObj['communicator'] = params;
		};

		_this.updateWay = function (params) {
			_this.store.stakeObj['communicationMode'] = params;
		};

		_this.handleCancle = function () {
			_this.props.getTable();
		};

		_this.handleSave = function () {
			_this.props.form.validateFields(function (err, values) {
				if (err) {
					_antd.message.warn("请完善信息后再提交");
					return false;
				} else {
					var _values$name = values.name,
					    name = _values$name === undefined ? "" : _values$name,
					    _values$copingStrateg = values.copingStrategy,
					    copingStrategy = _values$copingStrateg === undefined ? "" : _values$copingStrateg,
					    _values$phone = values.phone,
					    phone = _values$phone === undefined ? "" : _values$phone,
					    _values$position = values.position,
					    position = _values$position === undefined ? "" : _values$position,
					    _values$sex = values.sex,
					    sex = _values$sex === undefined ? "" : _values$sex,
					    _values$age = values.age,
					    age = _values$age === undefined ? "" : _values$age,
					    _values$appellation = values.appellation,
					    appellation = _values$appellation === undefined ? "" : _values$appellation,
					    _values$email = values.email,
					    email = _values$email === undefined ? "" : _values$email,
					    _values$maritalStatus = values.maritalStatus,
					    maritalStatus = _values$maritalStatus === undefined ? "" : _values$maritalStatus,
					    _values$monthlyIncome = values.monthlyIncome,
					    monthlyIncome = _values$monthlyIncome === undefined ? "" : _values$monthlyIncome,
					    _values$hobby = values.hobby,
					    hobby = _values$hobby === undefined ? "" : _values$hobby,
					    _values$profile = values.profile,
					    profile = _values$profile === undefined ? "" : _values$profile,
					    _values$remark = values.remark,
					    remark = _values$remark === undefined ? "" : _values$remark,
					    _values$wechat = values.wechat,
					    wechat = _values$wechat === undefined ? "" : _values$wechat;
					var _this$store = _this.store,
					    stakeObj = _this$store.stakeObj,
					    taskDetail = _this$store.taskDetail;

					var _mobx$toJS = mobx.toJS(stakeObj),
					    photo = _mobx$toJS.photo,
					    communicationMode = _mobx$toJS.communicationMode,
					    communicator = _mobx$toJS.communicator;

					var _mobx$toJS2 = mobx.toJS(taskDetail),
					    id = _mobx$toJS2.id;

					// 校验


					if (communicator == undefined || communicator.length == 0) {
						_antd.message.warn("主对接人是必填项");
						return false;
					}
					if (communicationMode == null || Array.isArray(communicationMode) && communicationMode.length == 0) {
						_antd.message.warn("沟通方式是必填项");
						return false;
					}
					var newId = mobx.toJS(stakeObj).id;
					var params = {
						id: newId.startsWith("!") ? "" : newId,
						taskId: id,
						name: name,
						copingStrategy: copingStrategy,
						phone: phone,
						position: position,
						sex: sex,
						age: age,
						appellation: appellation,
						email: email,
						maritalStatus: maritalStatus,
						monthlyIncome: monthlyIncome,
						hobby: hobby,
						profile: profile,
						photo: photo,
						remark: remark,
						wechat: wechat,
						communicatorId: communicator[0].userId,
						communicatorName: communicator[0].userName,
						communicationMode: communicationMode.map(function (item) {
							delete item.selected;
							return Object.assign({}, item);
						})
					};

					_this.store.saveStakeholder({ s: params }).then(function (res) {
						if (res) {
							_antd.message.success("保存成功");
							_this.props.getTable();
						}
					});
					//console.log(params, '保存', communicator)
				}
			});
		};

		_this.handleDel = function (index) {
			var obj = JSON.parse(JSON.stringify(_this.store.stakeObj));
			var communicationMode = obj.communicationMode;
			communicationMode.splice(index, 1);
			_this.store.stakeObj['communicationMode'] = Object.assign([], communicationMode);
		};

		_this.store = _this.props.store;
		_this.state = {};
		return _this;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}

		// 主对接人


		// 沟通机制


		// 取消


		// 保存


		// 删除沟通人

	}, {
		key: 'render',
		value: function render() {
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: { span: 6 },
				wrapperCol: { span: 14 }
			};
			var formItemLayout2 = {
				labelCol: { span: 3 },
				wrapperCol: { span: 19 }
			};
			var copingStrategy = [{ id: "1", name: "A类-令其满意" }, { id: "2", name: "B类-重点管理" }, {
				id: "3",
				name: "C类-随时告知"
			}, { id: "4", name: "D类-监督管理" }];
			var content = _react2.default.createElement(
				'table',
				{ className: 'staketable' },
				_react2.default.createElement(
					'tr',
					null,
					_react2.default.createElement(
						'th',
						null,
						'\u5206\u7C7B'
					),
					_react2.default.createElement(
						'th',
						null,
						'\u7B56\u7565'
					),
					_react2.default.createElement(
						'th',
						null,
						'\u63CF\u8FF0'
					)
				),
				_react2.default.createElement(
					'tr',
					null,
					_react2.default.createElement(
						'td',
						null,
						'A'
					),
					_react2.default.createElement(
						'td',
						null,
						'\u4EE4\u5176\u6EE1\u610F'
					),
					_react2.default.createElement(
						'td',
						{ className: 'tl' },
						_react2.default.createElement(
							'p',
							null,
							'\u6253\u4EA4\u9053\u7684\u7B56\u7565\uFF1A'
						),
						_react2.default.createElement(
							'p',
							null,
							'1\u3001\u8BA9\u5176\u6EE1\u610F'
						),
						_react2.default.createElement(
							'p',
							null,
							'2\u3001\u81F3\u5C11\u4E0D\u5F97\u7F6A'
						),
						_react2.default.createElement(
							'p',
							null,
							'3\u3001\u4E89\u53D6\u652F\u6301'
						),
						_react2.default.createElement(
							'p',
							null,
							'4\u3001\u5316\u89E3\u654C\u610F'
						)
					)
				),
				_react2.default.createElement(
					'tr',
					null,
					_react2.default.createElement(
						'td',
						null,
						'B'
					),
					_react2.default.createElement(
						'td',
						null,
						'\u91CD\u70B9\u7BA1\u7406'
					),
					_react2.default.createElement(
						'td',
						{ className: 'tl' },
						_react2.default.createElement(
							'p',
							null,
							'\u5BA2\u6237\u3001\u4E3B\u7BA1\u9886\u5BFC\u662F\u5178\u578B\u7684\u8FD9\u7C7B\u5E72\u7CFB\u4EBA'
						),
						_react2.default.createElement(
							'p',
							null,
							'\u6253\u4EA4\u9053\u7684\u7B56\u7565\uFF1A'
						),
						_react2.default.createElement(
							'p',
							null,
							'1\u3001\u91CD\u70B9\u7BA1\u7406'
						),
						_react2.default.createElement(
							'p',
							null,
							'2\u3001\u4E89\u53D6\u652F\u6301'
						)
					)
				),
				_react2.default.createElement(
					'tr',
					null,
					_react2.default.createElement(
						'td',
						null,
						'C'
					),
					_react2.default.createElement(
						'td',
						null,
						'\u968F\u65F6\u544A\u77E5'
					),
					_react2.default.createElement(
						'td',
						{ className: 'tl' },
						_react2.default.createElement(
							'p',
							null,
							'\u6253\u4EA4\u9053\u7684\u7B56\u7565\uFF1A'
						),
						_react2.default.createElement(
							'p',
							null,
							'1\u3001\u5BF9\u652F\u6301\u9879\u76EE\u7684\u5E72\u7CFB\u4EBA\u53CA\u65F6\u901A\u62A5\u9879\u76EE\u7684\u8FDB\u5EA6\u4EE5\u83B7\u53D6\u652F\u6301'
						),
						_react2.default.createElement(
							'p',
							null,
							'2\u3001\u5BF9\u9879\u76EE\u6301\u53CD\u5BF9\u610F\u89C1\u7684\u5E72\u7CFB\u4EBA\uFF0C\u5C3D\u91CF\u4FDD\u5BC6\uFF0C\u4EE5\u964D\u4F4E\u5E72\u6270'
						)
					)
				),
				_react2.default.createElement(
					'tr',
					null,
					_react2.default.createElement(
						'td',
						null,
						'D'
					),
					_react2.default.createElement(
						'td',
						null,
						_react2.default.createElement(
							'p',
							null,
							'\u76D1\u7763'
						),
						_react2.default.createElement(
							'p',
							null,
							'\uFF08\u82B1\u6700\u5C0F\u7684\u7CBE\u529B\uFF09'
						)
					),
					_react2.default.createElement(
						'td',
						{ className: 'tl' },
						_react2.default.createElement(
							'p',
							null,
							'\u6253\u4EA4\u9053\u7684\u7B56\u7565\uFF1A'
						),
						_react2.default.createElement(
							'p',
							null,
							'1\u3001\u5728\u4E0D\u5F71\u54CD\u9879\u76EE\u7684\u524D\u63D0\u4E0B\u82B1\u6700\u5C11\u7684\u7CBE\u529B\u53BB\u76D1\u63A7'
						),
						_react2.default.createElement(
							'p',
							null,
							'2\u3001\u4E0D\u8BA9\u4ED6\u4EEC\u5E72\u6270\u9879\u76EE\u5373\u53EF'
						)
					)
				)
			);
			var fields = mobx.toJS(this.store.stakeObj) || {};

			//console.log(fields, 'fields')


			return _react2.default.createElement(
				_antd.Form,
				_extends({ layout: 'inline' }, formItemLayout),
				_react2.default.createElement(
					_antd.Row,
					{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15],
						style: {
							margin: "0",
							borderBottom: "1px solid rgba(242, 242, 242, 1)",
							position: "relative",
							height: "50px"
						} },
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u5E72\u7CFB\u4EBA\u59D3\u540D', className: 'w' },
							getFieldDecorator('name', {
								initialValue: fields.name || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: _react2.default.createElement(
									'span',
									null,
									'\u5E94\u5BF9\u7B56\u7565\xA0',
									_react2.default.createElement(
										_antd.Popover,
										{ content: content, placement: 'leftTop', trigger: 'hover' },
										_react2.default.createElement(_antd.Icon, { type: 'question-circle',
											style: { marginLeft: "0px", fontSize: '16px', color: '#4AA9F8' },
											theme: 'filled' })
									)
								), className: 'w' },
							getFieldDecorator('copingStrategy', {
								initialValue: fields.copingStrategy || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(
								_antd.Select,
								{ style: { width: "100%" }, placeholder: '\u8BF7\u9009\u62E9' },
								copingStrategy.map(function (v, i) {
									return _react2.default.createElement(
										Option,
										{ key: "copingStrategy" + v.id, value: v.name },
										v.name
									);
								})
							))
						)
					),
					_react2.default.createElement(
						'div',
						{ style: {
								position: "absolute",
								right: "10px",
								top: "14px"
							} },
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u53D6\u6D88\u5417?', onConfirm: this.handleCancle },
							_react2.default.createElement(
								'span',
								{ className: 'stake_title' },
								'\u53D6\u6D88'
							)
						),
						_react2.default.createElement(
							'span',
							{ className: 'stake_title ml5', onClick: this.handleSave },
							'\u4FDD\u5B58'
						)
					)
				),
				_react2.default.createElement(
					'h1',
					{ style: {
							padding: "10px 15px",
							fontWeight: 700,
							fontSize: "14px"
						} },
					'\u5E72\u7CFB\u4EBA\u57FA\u672C\u4FE1\u606F'
				),
				_react2.default.createElement(
					_antd.Row,
					{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15], style: { margin: "0" } },
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u624B\u673A', className: 'w' },
							getFieldDecorator('phone', {
								initialValue: fields.phone || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u804C\u4F4D', className: 'w' },
							getFieldDecorator('position', {
								initialValue: fields.position || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u6027\u522B', className: 'w' },
							getFieldDecorator('sex', {
								initialValue: fields.sex || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(
								_antd.Select,
								{ style: { width: "100%" } },
								_react2.default.createElement(
									Option,
									{ value: '\u7537' },
									'\u7537'
								),
								_react2.default.createElement(
									Option,
									{ value: '\u5973' },
									'\u5973'
								)
							))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u5E74\u9F84', className: 'w' },
							getFieldDecorator('age', {
								initialValue: fields.age || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165(\u53EF\u4F30\u7B97\u533A\u95F4)' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u79F0\u8C13', className: 'w' },
							getFieldDecorator('appellation', {
								initialValue: fields.appellation || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u5FAE\u4FE1\u53F7', className: 'w' },
							getFieldDecorator('wechat', {
								initialValue: fields.wechat || "",
								rules: [{ required: true, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u90AE\u7BB1', className: 'w' },
							getFieldDecorator('email', {
								initialValue: fields.email || "",
								rules: [{ required: fields.communicationMode && fields.communicationMode.some(function (item) {
										return item.rule == "日报";
									}) ? true : false, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u5A5A\u59FB\u72B6\u51B5', className: 'w' },
							getFieldDecorator('maritalStatus', {
								initialValue: fields.maritalStatus || "",
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(
								_antd.Select,
								{ style: { width: "100%" } },
								_react2.default.createElement(
									Option,
									{ value: '\u672A\u5A5A' },
									'\u672A\u5A5A'
								),
								_react2.default.createElement(
									Option,
									{ value: '\u5DF2\u5A5A' },
									'\u5DF2\u5A5A'
								)
							))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '\u6708\u6536\u5165', className: 'w' },
							getFieldDecorator('monthlyIncome', {
								initialValue: fields.monthlyIncome || "",
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
						_react2.default.createElement(
							_antd.Form.Item,
							_extends({ label: '\u5174\u8DA3\u7231\u597D', className: 'w' }, formItemLayout2),
							getFieldDecorator('hobby', {
								initialValue: fields.hobby || "",
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(TextArea, { rows: 4, placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
						_react2.default.createElement(
							_antd.Form.Item,
							_extends({ label: '\u4E2A\u4EBA\u7B80\u4ECB', className: 'w' }, formItemLayout2),
							getFieldDecorator('profile', {
								initialValue: fields.profile || "",
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(TextArea, { rows: 4, placeholder: '\u8BF7\u8F93\u5165' }))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
						_react2.default.createElement(
							_antd.Form.Item,
							_extends({ label: '\u4E2A\u4EBA\u7167\u7247', className: 'w' }, formItemLayout2),
							getFieldDecorator('photo', {
								rules: [{
									required: false,
									message: '该项是必填'
								}]
							})(_react2.default.createElement(
								'div',
								null,
								fields.photo == "" || fields.photo == null ? null : _react2.default.createElement(_reactZmage2.default, { src: fields.photo,
									style: {
										width: "102px",
										height: "102px",
										display: "inline-blcok"
									} }),
								_react2.default.createElement(
									'div',
									{ className: 'dib', style: {
											verticalAlign: "top",
											marginLeft: fields.photo == "" || fields.photo == null ? 0 : "15px"
										} },
									_react2.default.createElement(_MyUpload4Affairs2.default, {
										saveAttachment: this.handleAttment.bind(this, 'photo'),
										disabled: false,
										multiple: false,
										listType: 'picture-card',
										fileList: [],
										journalType: 'journal'
									})
								)
							))
						)
					)
				),
				_react2.default.createElement(
					'h1',
					{ style: {
							padding: "10px 15px",
							fontWeight: 700,
							fontSize: "14px"
						} },
					'\u5E72\u7CFB\u4EBA\u6C9F\u901A\u7BA1\u7406'
				),
				_react2.default.createElement(
					_antd.Row,
					null,
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
						_react2.default.createElement(
							_antd.Form.Item,
							_extends({
								label: _react2.default.createElement(
									'span',
									null,
									_react2.default.createElement(
										'span',
										{ style: {
												fontWeight: "400",
												marginRight: "4px",
												color: "#f5222d",
												fontSize: "14px",
												fontFamily: "SimSun, sans-serif"
											} },
										'*'
									),
									'\u4E3B\u5BF9\u63A5\u4EBA'
								),
								className: 'w' }, formItemLayout2),
							getFieldDecorator('communicator', {
								initialValue: fields.communicator || [],
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(_PersonAdd2.default, {
								data: fields.communicator,
								updatePerson: this.updatePerson
							}))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
						_react2.default.createElement(
							_antd.Form.Item,
							_extends({
								label: _react2.default.createElement(
									'span',
									null,
									_react2.default.createElement(
										'span',
										{ style: {
												fontWeight: "400",
												marginRight: "4px",
												color: "#f5222d",
												fontSize: "14px",
												fontFamily: "SimSun, sans-serif"
											} },
										'*'
									),
									'\u6C9F\u901A\u65B9\u5F0F'
								),
								className: 'w' }, formItemLayout2),
							getFieldDecorator('communicationMode', {
								initialValue: fields.communicationMode || [],
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(_CommunicationWay2.default, {
								data: fields.communicationMode,
								updateWay: this.updateWay,
								handleDel: this.handleDel
							}))
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 },
						_react2.default.createElement(
							_antd.Form.Item,
							_extends({ label: '\u5907\u6CE8', className: 'w' }, formItemLayout2),
							getFieldDecorator('remark', {
								initialValue: fields.remark || "",
								rules: [{ required: false, message: '此项是必填' }]
							})(_react2.default.createElement(TextArea, { rows: 4, placeholder: '\u8BF7\u8F93\u5165' }))
						)
					)
				)
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class) || _class);
exports.default = Index;

/***/ }),

/***/ 2012:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交付管理-干系人分析
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _reactCustomScrollbars = __webpack_require__(336);

var _antd = __webpack_require__(17);

var _StakeholdeEdit = __webpack_require__(2011);

var _StakeholdeEdit2 = _interopRequireDefault(_StakeholdeEdit);

var _StakeholdeView = __webpack_require__(2067);

var _StakeholdeView2 = _interopRequireDefault(_StakeholdeView);

var _StakeholdeFile = __webpack_require__(2066);

var _StakeholdeFile2 = _interopRequireDefault(_StakeholdeFile);

var _uuid = __webpack_require__(79);

var _events = __webpack_require__(33);

var _events2 = _interopRequireDefault(_events);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Stakeholder = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Stakeholder, _React$Component);

	function Stakeholder(props) {
		_classCallCheck(this, Stakeholder);

		var _this = _possibleConstructorReturn(this, (Stakeholder.__proto__ || Object.getPrototypeOf(Stakeholder)).call(this, props));

		_this.addNewLog = function () {
			var stakeholderList = JSON.parse(JSON.stringify(_this.store.stakeholderList));

			// 更新第一个的状态
			if (stakeholderList.length == 0) {
				var taskDetail = JSON.parse(JSON.stringify(_this.store.taskDetail));
				taskDetail.state = 1;
				_this.store.updateTask({ task: taskDetail }).then(function (res) {
					if (res) {
						_this.store.taskDetail = Object.assign({}, res);
					}
				});
			}

			var createUserName = localStorage.getItem('username');
			var createTime = (0, _moment2.default)().valueOf();
			var param = {
				id: "!" + (0, _uuid.v4)(),
				name: "",
				taskId: "",
				copingStrategy: "",
				phone: "",
				position: "",
				sex: "",
				age: "",
				appellation: "",
				email: "",
				maritalStatus: "",
				monthlyIncome: "",
				hobby: "",
				profile: "",
				photo: "",
				wechat: "",
				communicatorId: "",
				communicatorName: "",
				communicationMode: [],
				communicator: [],
				remark: "",
				createTime: createTime,
				createUserName: createUserName
			};

			stakeholderList = [param].concat(_toConsumableArray(stakeholderList));
			var dataArray = stakeholderList.map(function (item) {
				return Object.assign(item, { selected: false });
			});
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.store.stakeholderList = Object.assign([], dataArray);
			_this.store.stakeObj = Object.assign({}, param);
			_this.store.stakeState = true;
		};

		_this.handleSelectedDaily = function (item, index) {
			if (_this.store.stakeState == true) {
				_antd.message.warn("请先完成当前新增或编辑操作");
				return false;
			}
			var param = item;
			var stakeholderList = JSON.parse(JSON.stringify(_this.store.stakeholderList));
			var dataArray = stakeholderList.map(function (item) {
				return Object.assign(item, { selected: false });
			});
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.store.stakeholderList = Object.assign([], dataArray);
			_this.store.stakeObj = Object.assign({}, param);
			_this.store.stakeState = false;
		};

		_this.onClick = function (e) {
			var key = e.key;

			var taskDetail = JSON.parse(JSON.stringify(_this.store.taskDetail));
			if (key == "1") {
				taskDetail.state = 1;
			} else if (key == "2") {
				taskDetail.state = 10;
			}
			_this.store.updateTask({ task: taskDetail }).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					_this.store.taskDetail = Object.assign({}, res);
					_events2.default.emit("getProjectState", {});
				}
			});
		};

		_this.changeVis = function (type) {
			_this.setState({
				fileVis: type == 1 ? true : false
			});
			if (type == "1") {
				_this.store.getSts();
			}
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			fileVis: false // 附件页
		};
		return _this;
	}

	_createClass(Stakeholder, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.changeVis("2");
		}

		// 新增

	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var _store = this.store,
			    stakeholderList = _store.stakeholderList,
			    stakeState = _store.stakeState,
			    taskDetail = _store.taskDetail;
			var fileVis = this.state.fileVis;

			var menu = _react2.default.createElement(
				_antd.Menu,
				{ onClick: this.onClick },
				_react2.default.createElement(
					_antd.Menu.Item,
					{ key: '1' },
					'\u8FDB\u884C\u4E2D'
				),
				_react2.default.createElement(
					_antd.Menu.Item,
					{ key: '2' },
					'\u5DF2\u5B8C\u6210'
				)
			);
			var taskObj = { 0: "待启动", 1: "进行中", 10: "已完成" };
			var taskD = mobx.toJS(taskDetail);

			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal', style: { padding: 0 } },
				_react2.default.createElement(
					'div',
					{ className: fileVis == true ? "hidden" : "fl",
						style: { paddingRight: '0', width: '260px', minHeight: '600px', borderRight: '1px solid #EBEBEB' } },
					_react2.default.createElement(
						'div',
						{ className: 'daily_list_op' },
						_react2.default.createElement(
							_antd.Button,
							{ style: { padding: "5px 3px" }, onClick: this.addNewLog, className: 'title', type: 'link' },
							_react2.default.createElement('img', {
								src: './images/delivery/u3772.png', style: { width: '21px', height: '21px' } }),
							'\u65B0\u5EFA'
						),
						_react2.default.createElement(
							_antd.Button,
							{ style: { padding: "5px 3px" }, className: 'title', type: 'link', onClick: this.changeVis.bind(this, '1') },
							_react2.default.createElement('img', { src: './images/delivery/u3771.png',
								style: { width: '23px', height: '23px' } }),
							'\u9644\u4EF6'
						),
						_react2.default.createElement(
							_antd.Dropdown,
							{ overlay: menu },
							_react2.default.createElement(
								_antd.Button,
								{ style: { padding: "5px 3px" }, className: 'title', type: 'link' },
								_react2.default.createElement('img', { src: './images/delivery/u3773.png',
									style: { width: '21px', height: '21px' } }),
								taskObj[taskD.state],
								_react2.default.createElement(_antd.Icon, { type: 'down' })
							)
						)
					),
					_react2.default.createElement(
						_reactCustomScrollbars.Scrollbars,
						{
							style: {
								height: "calc(100vh - 200px)"
							},
							autoHide: true },
						mobx.toJS(stakeholderList).length === 0 ? _react2.default.createElement(
							'div',
							{ className: 'empty_daily_list' },
							_react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('img', { src: './images/delivery/u2030.png', style: { width: '191px', height: '187px' } })
							),
							_react2.default.createElement(
								'div',
								null,
								_react2.default.createElement(
									_antd.Button,
									{ onClick: this.addNewLog, type: 'primary' },
									'\u65B0\u5EFA\u7B2C\u4E00\u4E2A\u5E72\u7CFB\u4EBA'
								)
							)
						) : mobx.toJS(stakeholderList).map(function (item, index) {
							return _react2.default.createElement(
								'div',
								{ onClick: function onClick() {
										_this2.handleSelectedDaily(item, index);
									},
									className: item.selected == true ? "daily_item daily_active_item" : "daily_item" },
								_react2.default.createElement(
									'div',
									{ className: 'label_info' },
									_react2.default.createElement(
										'div',
										null,
										item.photo !== null && item.photo !== "" ? _react2.default.createElement('img', { src: item.photo, style: { width: '86px', height: '82px' } }) : _react2.default.createElement(
											'div',
											{ style: {
													width: '86px',
													height: '82px',
													lineHeight: "82px",
													textAlign: "center",
													background: "#4AA9F8",
													color: "#FFF",
													fontSize: "14px"
												} },
											item.name == null || item.name == "" ? "新增" : item.name.slice(-2)
										)
									),
									_react2.default.createElement(
										'div',
										null,
										_react2.default.createElement(
											'div',
											{ className: 'title' },
											item.name == null || item.name == "" ? "新增" : item.name
										),
										_react2.default.createElement(
											'div',
											{ className: 'desc_info' },
											_react2.default.createElement(
												'p',
												null,
												item.appellation,
												' ',
												item.phone == null || item.phone == "" ? null : "- " + item.phone
											)
										),
										_react2.default.createElement(
											'div',
											{ className: 'worker_num' },
											item.position
										)
									)
								),
								_react2.default.createElement(
									'div',
									{ className: 'author_progress' },
									_react2.default.createElement(
										'div',
										{
											className: 'author_date' },
										item.createUserName === null ? '' : item.createUserName,
										' ',
										item.createTime !== 0 && item.createTime !== null ? (0, _moment2.default)(item.createTime).format('YYYY.MM.DD') : ''
									)
								)
							);
						})
					)
				),
				_react2.default.createElement(
					'div',
					{ className: fileVis == true ? "hidden" : "fl",
						style: {
							width: 'calc(100% - 270px)',
							height: "calc(100vh - 135px)",
							overflowX: "hidden",
							overflowY: "scroll",
							padding: '0 0 30px 0'
						} },
					stakeState ? _react2.default.createElement(_StakeholdeEdit2.default, { store: this.store, getTable: this.props.getTable }) : mobx.toJS(stakeholderList).length === 0 ? _react2.default.createElement(
						'div',
						{ className: 'empty_daily_content', style: {
								height: "calc(100vh - 168px)"
							} },
						_react2.default.createElement('img', { src: './images/delivery/u2033.png ', style: { width: '336px', height: '336px' } })
					) : _react2.default.createElement(_StakeholdeView2.default, { store: this.store, getTable: this.props.getTable })
				),
				fileVis == true ? _react2.default.createElement(_StakeholdeFile2.default, {
					changeVis: this.changeVis,
					store: this.store
				}) : null
			);
		}
	}]);

	return Stakeholder;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = Stakeholder;

/***/ }),

/***/ 2013:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *任务详情
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _DeliveryStore = __webpack_require__(718);

var _DeliveryStore2 = _interopRequireDefault(_DeliveryStore);

var _reactRouterDom = __webpack_require__(32);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _antd = __webpack_require__(17);

var _reactZmage = __webpack_require__(1522);

var _reactZmage2 = _interopRequireDefault(_reactZmage);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _download = __webpack_require__(68);

var _api = __webpack_require__(30);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _lodash = __webpack_require__(231);

var _lodash2 = _interopRequireDefault(_lodash);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _utils = __webpack_require__(89);

var _PersonAdd = __webpack_require__(1977);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MonthPicker = _antd.DatePicker.MonthPicker,
    RangePicker = _antd.DatePicker.RangePicker;
var confirm = _antd.Modal.confirm;


var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file).then(function (data) {
			resolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了
		}).catch(function (error) {
			reject(error);
		});
	});
};

var SalesDetail = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(SalesDetail, _React$Component);

	function SalesDetail(props) {
		var _this2 = this;

		_classCallCheck(this, SalesDetail);

		var _this = _possibleConstructorReturn(this, (SalesDetail.__proto__ || Object.getPrototypeOf(SalesDetail)).call(this, props));

		_this.enableHtml = _react2.default.createElement(
			'div',
			{ className: 'task_detail_label' },
			_react2.default.createElement('img', { width: 20, height: 20, src: './images/delivery/enable.png' }),
			_react2.default.createElement(
				'span',
				null,
				'\u662F\u5426\u542F\u7528'
			)
		);
		_this.runManHtml = _react2.default.createElement(
			'div',
			{ className: 'task_detail_label' },
			_react2.default.createElement('img', { width: 20, height: 20, src: './images/delivery/user.png' }),
			_react2.default.createElement(
				'span',
				null,
				'\u6267\u884C\u4EBA'
			)
		);
		_this.statusHtml = _react2.default.createElement(
			'div',
			{ className: 'task_detail_label' },
			_react2.default.createElement('img', { width: 20, height: 20, src: './images/delivery/status_cycle.png' }),
			_react2.default.createElement(
				'span',
				null,
				'\u72B6\u6001'
			)
		);
		_this.calendarHtml = _react2.default.createElement(
			'div',
			{ className: 'task_detail_label' },
			_react2.default.createElement('img', { width: 20, height: 20, src: './images/delivery/calendar.png' }),
			_react2.default.createElement(
				'span',
				null,
				'\u65F6\u95F4'
			)
		);

		_this.updateTask = function (parmas) {
			_this.store.updateTask(parmas).then(function (res) {
				_this.store.getTaskById({ 'id': res.id }).then(function (res) {
					if (res) {
						_this.store.taskDetail = res;
					}
				});
				_this.getProjectDetail();
			});
		};

		_this.handleIsActive = function (checked) {
			var taskDetail = mobx.toJS(_this.store.taskDetail);
			var parmas = { "task": Object.assign(taskDetail, { 'isActive': checked ? 1 : 0 }) };
			_this.updateTask(parmas);
		};

		_this.handleTaskState = function (e) {
			var taskDetail = mobx.toJS(_this.store.taskDetail);
			var parmas = { "task": Object.assign(taskDetail, { 'state': e.target.value }) };
			_this.updateTask(parmas);
		};

		_this.handleTaskRange = function (value, dateString) {
			// console.log('Selected Time: ', (value[0]).valueOf());
			// console.log('Selected Time: ', (value[1]).format('YYYY-MM-DD HH:mm:ss'));
			// console.log('Formatted Selected Time: ', dateString);
			var taskDetail = mobx.toJS(_this.store.taskDetail);
			var parmas = { "task": Object.assign(taskDetail, { 'beginTime': value[0].valueOf(), 'endTime': value[1].valueOf() }) };
			_this.updateTask(parmas);
		};

		_this.getProjectDetail = function () {
			var search = _this.props.location.search;
			var projectId = _url2.default.parse(search, true).query.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.addTemplateDoc = function (res, file) {
			var fileUrl = res.requestUrls[0];
			if (fileUrl.indexOf("http://") !== -1) {
				fileUrl = 'https://' + fileUrl.split('http://')[1];
			}
			fileUrl = decodeURIComponent(fileUrl.split('?')[0]);
			var template = {
				name: file.name,
				defaultImageUrl: '',
				fileUrl: fileUrl,
				fileSize: file.size,
				downloadCount: 0,
				ownerId: '',
				ownerName: '李大宁',
				type: 0,
				orders: 0,
				isVisible: 1
			};
			_this.store.addTempleteDoc({ 'td': template }).then(function (res) {
				if (res) {
					_antd.message.success("文件上传成功");
					_this.store.getTempleteDocPageList("");
				}
			});
		};

		_this.renameDocument = function (item) {
			_this.setState({ renameItemId: item.id, currentRenameValue: item.name });
		};

		_this.closeRenameState = function () {
			_this.setState({ renameItemId: null });
		};

		_this.handleRenameInputOnchange = function (e) {
			var value = e.target.value;
			_this.setState({ currentRenameValue: value });
		};

		_this.addDocument = function (res, file) {
			var taskDetail = _this.store.taskDetail;

			var fileUrl = res.requestUrls[0];
			if (fileUrl.indexOf("http://") !== -1) {
				fileUrl = 'https://' + fileUrl.split('http://')[1];
			}
			fileUrl = decodeURIComponent(fileUrl.split('?')[0]);
			var document = {
				name: file.name,
				taskId: taskDetail.id,
				fileUrl: fileUrl,
				fileSize: file.size,
				downloadCount: 0,
				ownerId: '',
				ownerName: '',
				orders: 0,
				isVisible: 1
			};
			_this.store.addDocument({ 'd': document }).then(function (res) {
				if (res) {
					_antd.message.success("文件上传成功");
					_this.store.getDocumentList({ 'taskId': taskDetail.id }).then(function (res) {
						_this.store.documentList = res;
					});
				}
			});
		};

		_this.updateCurrent = function (item) {
			var _this$state = _this.state,
			    isDictTemplate = _this$state.isDictTemplate,
			    currentRenameValue = _this$state.currentRenameValue;
			var _this$store = _this.store,
			    documentList = _this$store.documentList,
			    dictDocumentList = _this$store.dictDocumentList;

			if (isDictTemplate) {
				var isSameItem = mobx.toJS(dictDocumentList).filter(function (ddItem) {
					return ddItem.name == currentRenameValue;
				});
				if (isSameItem.length > 0) {
					_this.showConfirm(item, _this.updateDictDocumnet);
				} else {
					_this.updateDictDocumnet(item);
				}
			} else {
				var _isSameItem = mobx.toJS(documentList).filter(function (dItem) {
					return dItem.name === currentRenameValue;
				});
				if (_isSameItem.length > 0) {
					_this.showConfirm(item, _this.updateDocumnet);
				} else {
					_this.updateDocumnet(item);
				}
			}
			_this.closeRenameState();
		};

		_this.updateDocumnet = function (item) {
			var currentRenameValue = _this.state.currentRenameValue;
			var taskDetail = _this.store.taskDetail;

			var document = Object.assign(item, { name: currentRenameValue });
			_this.store.updateDocument({ 'd': document }).then(function (res) {
				if (res) {
					_antd.message.success("文件修改成功");
					_this.store.getDocumentList({ 'taskId': taskDetail.id }).then(function (res) {
						_this.store.documentList = res;
					});
				}
			});
		};

		_this.updateDictDocumnet = function (item) {
			var currentRenameValue = _this.state.currentRenameValue;
			var taskDetail = _this.store.taskDetail;

			var dictDocument = Object.assign(item, { name: currentRenameValue });
			_this.store.updateDictDocument({ 'dd': dictDocument }).then(function (res) {
				if (res) {
					_antd.message.success("文件修改成功");
					_this.store.getDictDocumentList({ 'taskId': taskDetail.dictTaskId }).then(function (res) {
						_this.store.dictDocumentList = res;
					});
				}
			});
		};

		_this.delDocument = function (id) {
			var taskDetail = _this.store.taskDetail;

			_this.store.delDocument({ 'id': id }).then(function (res) {
				if (res) {
					_antd.message.success("文件删除成功");
					_this.store.getDocumentList({ 'taskId': taskDetail.id }).then(function (res) {
						_this.store.documentList = res;
					});
				}
			});
		};

		_this.addDictDocument = function (res, file) {
			var taskDetail = _this.store.taskDetail;


			var fileUrl = res.requestUrls[0];
			if (fileUrl.indexOf("http://") !== -1) {
				fileUrl = 'https://' + fileUrl.split('http://')[1];
			}
			fileUrl = decodeURIComponent(fileUrl.split('?')[0]);

			var dictDocument = {
				name: file.name,
				dictTaskId: taskDetail.dictTaskId,
				fileUrl: fileUrl,
				fileSize: file.size,
				downloadCount: 0,
				ownerId: '',
				ownerName: '',
				orders: 0,
				isVisible: 1
			};
			_this.store.addDictDocument({ 'dd': dictDocument }).then(function (res) {
				if (res) {
					_antd.message.success("文件上传成功");
					_this.store.getDictDocumentList({ 'taskId': taskDetail.dictTaskId }).then(function (res) {
						_this.store.dictDocumentList = res;
					});
				}
			});
		};

		_this.delDictDocument = function (id) {
			var taskDetail = _this.store.taskDetail;

			_this.store.delDictDocument({ 'id': id }).then(function (res) {
				if (res) {
					_antd.message.success("文件删除成功");
					_this.store.getDictDocumentList({ 'taskId': taskDetail.dictTaskId }).then(function (res) {
						_this.store.dictDocumentList = res;
					});
				}
			});
		};

		_this.changeDocumentOrDict = function (isOpen) {
			var taskDetail = _this.store.taskDetail;

			_this.setState({
				isDictTemplate: isOpen
			});
			if (isOpen) {
				_this.store.getDictDocumentList({ 'taskId': taskDetail.dictTaskId }).then(function (res) {
					_this.store.dictDocumentList = res;
				});
			}
		};

		_this.getTaskTimeRange = function () {

			var taskTimeRange = [];
			var dateFormat = 'YYYY-MM-DD HH:mm:ss';
			var taskDetail = _this.store.taskDetail;

			if (taskDetail.beginTime !== 0) {
				taskTimeRange.push((0, _moment2.default)((0, _moment2.default)(taskDetail.beginTime).format(dateFormat), dateFormat));
				if (taskDetail.endTime !== 0) {
					taskTimeRange.push((0, _moment2.default)((0, _moment2.default)(taskDetail.endTime).format(dateFormat), dateFormat));
				}
			}
			_this.setState({
				currentTimeRangeValue: taskTimeRange
			});
		};

		_this.updateState = function (type, data) {
			var taskDetail = _this.store.taskDetail;

			_this.setState(_defineProperty({}, type, Object.assign([], data)), function () {
				if (data.length > 0) {
					var task = Object.assign(taskDetail, { 'operatorId': data[0]['userId'], 'operatorName': data[0]['userName'] });
					_this.updateTask({ 'task': task });
				}
			});
		};

		_this.handleChange = function (info) {};

		_this.changeSrc = function (res, file) {
			var isDictTemplate = _this.state.isDictTemplate;

			if (res.requestUrls.length > 0) {
				// this.addTemplateDoc(res, file);
				if (isDictTemplate) {
					_this.addDictDocument(res, file);
				} else {
					_this.addDocument(res, file);
				}
			}
		};

		_this.beforeUpload = function (file) {
			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				//console.log(accept, file.type, type, 'accept')
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}
			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}
			_this.setState({
				loading: true
			});
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						// this.setState({
						// 	loading: false
						// }, ()=>{
						// 	if (this.props.journalType) {
						// 		this.store.journal = false; // 记录一次
						// 	}
						// });

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {
					_antd.message.error("文件上传失败");
					_this.setState({
						loading: false
					});
					return false;
				});
			};
			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.onDownload = function (file) {};

		_this.waitAccept = function () {};

		_this.trans = function (file) {
			var src = void 0;
			if (/\.(doc|docx)$/.test(file)) {
				src = './images/delivery/share_word.png';
			} else if (/\.(xls|xlsx)$/.test(file)) {
				src = './images/delivery/share_excel.png';
			} else if (/\.(pdf)$/.test(file)) {
				src = './images/delivery/share_pdf.png';
			} else if (/\.(zip|rar)$/.test(file)) {
				src = './images/delivery/share_zip.png';
			} else if (/\.(ppt|pptx)$/.test(file)) {
				src = './images/delivery/share_ppt.png';
			} else if (/\.(mp4|rmvb|avi|ts)$/.test(file)) {
				src = './images/delivery/share_vodie.png';
			} else if (/\.(exe)$/.test(file)) {
				src = './images/delivery/exe_default.jpg';
			} else if (/\.(bmp|jpg|png|gif|jpeg|webp)$/.test(file)) {
				src = './images/delivery/share_png.png';
			} else {
				src = './images/delivery/share_other.png';
			}
			return src;
		};

		_this.handleCheckChange = function (checkedList) {
			var isDictTemplate = _this.state.isDictTemplate;
			var _this$store2 = _this.store,
			    documentList = _this$store2.documentList,
			    dictDocumentList = _this$store2.dictDocumentList;

			if (isDictTemplate) {
				var ddocCheckedList = Object.assign([], checkedList);
				_this.setState({
					ddocCheckedList: ddocCheckedList,
					indeterminate: !!ddocCheckedList.length && ddocCheckedList.length < documentList.length,
					checkAll: ddocCheckedList.length == dictDocumentList.length
				});
			} else {
				_this.setState({
					checkedList: checkedList,
					indeterminate: !!checkedList.length && checkedList.length < documentList.length,
					checkAll: checkedList.length == documentList.length
				});
			}
		};

		_this.handleCheckAllChange = function (e) {
			var _this$store3 = _this.store,
			    documentList = _this$store3.documentList,
			    dictDocumentList = _this$store3.dictDocumentList;

			var checkedList = mobx.toJS(documentList).map(function (item) {
				return item.id;
			});
			if (e.target.checked) {
				_this.setState({
					checkedList: checkedList,
					indeterminate: false,
					checkAll: e.target.checked
				});
			} else {
				_this.setState({
					checkedList: [],
					indeterminate: false,
					checkAll: e.target.checked
				});
			}
		};

		_this.downloadUrl = function (item) {
			var fileUrl = item.fileUrl,
			    name = item.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(fileUrl, name); // 直接下载pdf
			} else {
				_this.downloadImage(fileUrl, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.matchDownload = function () {
			var _this$state2 = _this.state,
			    isDictTemplate = _this$state2.isDictTemplate,
			    checkedList = _this$state2.checkedList,
			    ddocCheckedList = _this$state2.ddocCheckedList;
			var _this$store4 = _this.store,
			    documentList = _this$store4.documentList,
			    dictDocumentList = _this$store4.dictDocumentList;

			if (isDictTemplate) {
				var dataList = [];
				mobx.toJS(dictDocumentList).filter(function (item) {
					return ddocCheckedList.forEach(function (id) {
						if (item.id === id) dataList.push(item);
					});
				});
				dataList.forEach(function (item) {
					_this.downloadUrl(item);
				});
			} else {
				var _dataList = [];
				mobx.toJS(documentList).filter(function (item) {
					return checkedList.forEach(function (id) {
						if (item.id === id) _dataList.push(item);
					});
				});
				_dataList.forEach(function (item) {
					_this.downloadUrl(item);
				});
			}
		};

		_this.matchDelete = function () {
			var _this$state3 = _this.state,
			    isDictTemplate = _this$state3.isDictTemplate,
			    checkedList = _this$state3.checkedList,
			    ddocCheckedList = _this$state3.ddocCheckedList;

			if (isDictTemplate) {
				ddocCheckedList.forEach(function (id) {
					_this.delDictDocument(id);
				});
			} else {
				checkedList.forEach(function (id) {
					_this.delDocument(id);
				});
			}
		};

		_this.showConfirm = function (item, func) {
			confirm({
				title: '',
				content: '此目录下已经存在同名文件，是否要保存两个文件',
				onOk: function onOk() {
					func(item);
				},
				onCancel: function onCancel() {
					return;
				}
			});
		};

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.showModal = function () {
			var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(item) {
				var isImage;
				return regeneratorRuntime.wrap(function _callee2$(_context2) {
					while (1) {
						switch (_context2.prev = _context2.next) {
							case 0:
								isImage = /\.(doc|docx)$/.test(item.fileUrl) || /\.(xls|xlsx)$/.test(item.fileUrl) || /\.(pdf)$/.test(item.fileUrl) || /\.(zip|rar)$/.test(item.fileUrl) || /\.(ppt|pptx)$/.test(item.fileUrl);

								if (isImage) {
									// when true, it's document
									_this.getDocumentUrl(decodeURIComponent(item.fileUrl)).then(function (res) {
										_this.setState({
											modalVisible: true,
											modalTitle: item.name,
											fileUrl: res,
											currentItem: item,
											isImageOrDoc: 'doc'
										});
									});
								} else {
									// when false, it's image
									_this.setState({ isImageOrDoc: 'image', fileUrl: item.fileUrl, modalVisible: true, modalTitle: item.name, currentItem: item });
								}

							case 2:
							case 'end':
								return _context2.stop();
						}
					}
				}, _callee2, _this2);
			}));

			return function (_x2) {
				return _ref2.apply(this, arguments);
			};
		}();

		_this.handleOk = function (e) {
			_this.setState({
				modalVisible: false
			});
		};

		_this.handleCancel = function (e) {
			_this.setState({
				modalVisible: false,
				fileUrl: ''
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			loading: false,
			currentTimeRangeValue: [],
			testFlag: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			userIds: [], // 用户
			isDictTemplate: false, //是否显示作业文件模板
			isRenameState: false,
			renameItemId: null,
			currentRenameValue: null,
			taskId: null,
			indeterminate: false,
			checkedList: [],
			checkAll: false,
			ddocCheckedList: [],
			modalVisible: false,
			modalTitle: '',
			fileUrl: "",
			currentItem: null,
			isImageOrDoc: 'doc'
		};
		return _this;
	}

	_createClass(SalesDetail, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			// console.log('nextProps==>',mobx.toJS(nextProps.DeliveryStore.taskDetail))
			var taskDetail = mobx.toJS(nextProps.DeliveryStore.taskDetail);
			if (taskDetail.id !== null && taskDetail.id !== this.state.taskId) {
				this.setState({
					taskId: taskDetail.id,
					isDictTemplate: false,
					indeterminate: false,
					checkedList: [],
					checkAll: false,
					ddocCheckedList: []
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this3.state.token));
					_this3.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						})
					});
				}
			});
		}

		// 只用做删除操作


		// 更新url


		// 预览下载


		// 待认领


		// 手动下载


		// 直接下载

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    userIds = _state.userIds,
			    isDictTemplate = _state.isDictTemplate,
			    isRenameState = _state.isRenameState,
			    renameItemId = _state.renameItemId,
			    currentRenameValue = _state.currentRenameValue,
			    indeterminate = _state.indeterminate,
			    checkAll = _state.checkAll,
			    checkedList = _state.checkedList,
			    ddocCheckedList = _state.ddocCheckedList,
			    modalVisible = _state.modalVisible,
			    modalTitle = _state.modalTitle,
			    currentItem = _state.currentItem,
			    isImageOrDoc = _state.isImageOrDoc,
			    fileUrl = _state.fileUrl;
			var _store = this.store,
			    taskDetail = _store.taskDetail,
			    templateDocList = _store.templateDocList,
			    documentList = _store.documentList,
			    dictDocumentList = _store.dictDocumentList;

			var taskTimeRange = [];
			var dateFormat = 'YYYY-MM-DD';
			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			var props = {
				accept: acceptDefault,
				name: 'file',
				multiple: true,
				onChange: this.handleChange,
				beforeUpload: this.beforeUpload,
				disabled: false,
				// listType: "text",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				showUploadList: false
			};

			var modalHeader = _react2.default.createElement(
				_antd.Row,
				null,
				_react2.default.createElement(
					_antd.Col,
					{ span: 12, className: 'leftLabelHeader' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							null,
							modalTitle
						)
					)
				),
				_react2.default.createElement(
					_antd.Col,
					{ span: 12, className: 'rightLabelHeader' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							_antd.Button,
							{ type: 'default', icon: 'download', onClick: function onClick(e) {
									_this4.downloadUrl(currentItem, e);
								} },
							'\u4E0B\u8F7D'
						)
					)
				)
			);

			var workFileHtml = _react2.default.createElement(
				'div',
				{ style: { display: "inline-flex" } },
				_react2.default.createElement(
					_antd.Upload,
					props,
					_react2.default.createElement(
						_antd.Button,
						{ className: 'workfile_button', icon: 'upload' },
						'\u4E0A\u4F20'
					)
				),
				_react2.default.createElement(
					_antd.Button,
					{ onClick: this.matchDownload, className: 'workfile_button', icon: 'download' },
					'\u4E0B\u8F7D'
				),
				_react2.default.createElement(
					_antd.Button,
					{ onClick: this.matchDelete, className: 'workfile_button', icon: 'delete' },
					'\u5220\u9664'
				)
			);

			var documentTitle = !isDictTemplate ? _react2.default.createElement(
				'span',
				{ style: { cursor: 'pointer' } },
				'\u4F5C\u4E1A\u6587\u4EF6'
			) : _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					'span',
					{ style: { cursor: 'pointer' }, onClick: function onClick() {
							_this4.changeDocumentOrDict(false);
						} },
					'\u4F5C\u4E1A\u6587\u4EF6'
				),
				' > ',
				_react2.default.createElement(
					'span',
					null,
					'\u4F5C\u4E1A\u6587\u4EF6\u6A21\u677F'
				)
			);

			var renameHtml = function renameHtml(item) {
				return _react2.default.createElement(_antd.Input, { onChange: function onChange(e) {
						_this4.handleRenameInputOnchange(e);
					}, style: { paddingRight: '30%', verticalAlign: 'middle' }, addonAfter: _react2.default.createElement(
						'div',
						null,
						_react2.default.createElement(_antd.Icon, { onClick: function onClick() {
								return _this4.updateCurrent(item);
							}, type: 'check' }),
						_react2.default.createElement(_antd.Icon, { onClick: _this4.closeRenameState, style: { marginLeft: 10 }, type: 'close' })
					), defaultValue: item.name });
			};

			if (taskDetail.beginTime !== 0) {
				taskTimeRange.push((0, _moment2.default)((0, _moment2.default)(taskDetail.beginTime).format(dateFormat), dateFormat));
				if (taskDetail.endTime !== 0) {
					taskTimeRange.push((0, _moment2.default)((0, _moment2.default)(taskDetail.endTime).format(dateFormat), dateFormat));
				}
			}
			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 8 },
					sm: { span: 8 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 16 },
					sm: { span: 16 }
				}
			};

			var cardHeadStyle = {
				border: 'none'
			};

			var cardBodyStyle = {
				paddingTop: 0,
				paddingLeft: '24px',
				paddingRight: '24px',
				'box-shadow': '0 0 0 rgba(0, 0, 0, 0.0), 0 0 0 0 rgba(0, 0, 0, 0.0)'
			};

			var cardBodyStyle2 = {
				'box-shadow': '0 0 0 rgba(0, 0, 0, 0.0), 0 0 0 0 rgba(0, 0, 0, 0.0)',
				'text-align': 'center'
			};

			return _react2.default.createElement(
				'div',
				{ className: 'taskModal' },
				_react2.default.createElement(
					_antd.Row,
					{ className: 'task_detail_zone', style: { minHeight: '600px' } },
					_react2.default.createElement(
						_antd.Col,
						{ style: { overflowY: 'auto', overflowX: 'auto' }, span: 12 },
						_react2.default.createElement(
							'div',
							{ className: 'task_zone' },
							_react2.default.createElement(
								_antd.Card,
								{
									bordered: false,
									headStyle: cardHeadStyle,
									bodyStyle: cardBodyStyle,
									title: '\u57FA\u672C\u4FE1\u606F' },
								_react2.default.createElement(
									_antd.Form,
									_extends({}, formItemLayout, { className: 'square_block' }),
									_react2.default.createElement(
										_antd.Row,
										{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 }, 15], style: { padding: 0, margin: "0" } },
										_react2.default.createElement(
											_antd.Col,
											{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
											_react2.default.createElement(
												_antd.Form.Item,
												{ colon: false, label: this.enableHtml, labelAlign: 'left', className: 'w' },
												_react2.default.createElement(_antd.Switch, { onChange: this.handleIsActive, checked: taskDetail.isActive !== 0 ? true : false, className: 'task_switch' })
											)
										),
										_react2.default.createElement(
											_antd.Col,
											{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
											_react2.default.createElement(
												_antd.Form.Item,
												{ colon: false, label: this.runManHtml, labelAlign: 'left', className: 'w' },
												_react2.default.createElement(
													'p',
													null,
													_react2.default.createElement(_PersonAdd2.default, {
														data: taskDetail.operatorId !== null && taskDetail.operatorName !== null ? [{ 'userId': taskDetail.operatorId, 'userName': taskDetail.operatorName }] : [],
														updatePerson: this.updateState.bind(this, 'userIds'),
														disabled: false,
														title: '\u6DFB\u52A0\u8D1F\u8D23\u4EBA'
													})
												)
											)
										),
										_react2.default.createElement(
											_antd.Col,
											{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
											_react2.default.createElement(
												_antd.Form.Item,
												{ colon: false, label: this.statusHtml, labelAlign: 'left', className: 'w' },
												taskDetail.isActive !== 0 ? _react2.default.createElement(
													_antd.Radio.Group,
													{ onChange: this.handleTaskState, value: taskDetail.state },
													_react2.default.createElement(
														_antd.Radio,
														{ value: 0 },
														'\u5F85\u542F\u52A8'
													),
													_react2.default.createElement(
														_antd.Radio,
														{ value: 1 },
														'\u8FDB\u884C\u4E2D'
													),
													_react2.default.createElement(
														_antd.Radio,
														{ value: 10 },
														'\u5DF2\u5B8C\u6210'
													)
												) : _react2.default.createElement(
													_antd.Radio.Group,
													{ value: taskDetail.state },
													_react2.default.createElement(
														_antd.Radio,
														null,
														'\u5F85\u542F\u52A8'
													),
													_react2.default.createElement(
														_antd.Radio,
														null,
														'\u8FDB\u884C\u4E2D'
													),
													_react2.default.createElement(
														_antd.Radio,
														null,
														'\u5DF2\u5B8C\u6210'
													)
												)
											)
										),
										_react2.default.createElement(
											_antd.Col,
											{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
											_react2.default.createElement(
												_antd.Form.Item,
												{ colon: false, label: this.calendarHtml, labelAlign: 'left', className: 'w' },
												_react2.default.createElement(RangePicker, { onChange: this.handleTaskRange, value: taskDetail.beginTime !== 0 && taskDetail.endTime !== 0 ? taskTimeRange : null, separator: ' - ', style: { maxWidth: '300px', minWidth: '300px' }, showTime: true, format: dateFormat })
											)
										)
									)
								)
							),
							_react2.default.createElement(
								_antd.Card,
								{
									bordered: false,
									bodyStyle: cardBodyStyle,
									extra: workFileHtml,
									title: documentTitle
								},
								_react2.default.createElement(
									'div',
									{ className: 'fl', style: {
											width: 'calc(100%)',
											minHeight: '350px',
											paddingLeft: '15px'
											//height: "calc(100vh - 800px)"
										} },
									_react2.default.createElement(
										'table',
										{ className: 'w share_resource_table', style: { borderBottom: '1px solid #f2f2f2' } },
										_react2.default.createElement(
											'thead',
											{ className: 'w' },
											_react2.default.createElement(
												'tr',
												{ className: 'w' },
												_react2.default.createElement(
													'th',
													{ className: 'tl', style: { width: 'calc(100% - 300px)' } },
													_react2.default.createElement(_antd.Checkbox, { style: { display: 'none' }, onChange: this.handleCheckAllChange, checked: checkAll, indeterminate: indeterminate }),
													_react2.default.createElement(
														'span',
														{ style: { marginLeft: '9%' } },
														'\u540D\u79F0'
													)
												),
												_react2.default.createElement(
													'th',
													{ className: 'w100 tc table-header-label' },
													'\u5927\u5C0F'
												),
												_react2.default.createElement(
													'th',
													{ className: 'w100 tc table-header-label' },
													'\u4E0A\u4F20\u4EBA'
												),
												_react2.default.createElement(
													'th',
													{ className: 'w100 tc table-header-label' },
													'\u4E0A\u4F20\u65F6\u95F4'
												)
											)
										)
									),
									_react2.default.createElement(
										_antd.Checkbox.Group,
										{ style: { width: '100%' }, onChange: function onChange(checkedValue) {
												_this4.handleCheckChange(checkedValue);
											} },
										_react2.default.createElement(
											'table',
											{ className: 'w share_resource_table' },
											_react2.default.createElement(
												'tbody',
												{ className: 'w' },
												!isDictTemplate ? _react2.default.createElement(
													'tr',
													{ className: 'w' },
													_react2.default.createElement(
														'td',
														{ className: 'tl pr', style: { width: 'calc(100% - 300px)' } },
														_react2.default.createElement(
															'div',
															{ onClick: function onClick() {
																	_this4.changeDocumentOrDict(true);
																}, className: 'filename' },
															_react2.default.createElement('img', { style: { verticalAlign: 'middle', marginRight: '8px', marginLeft: '9%' }, width: '32', height: '32 ', src: './images/delivery/folder.png', alt: '' }),
															_react2.default.createElement(
																'span',
																{ className: 'filename ellsis' },
																'\u4F5C\u4E1A\u6587\u4EF6\u6A21\u677F'
															)
														)
													),
													_react2.default.createElement('td', { className: 'w100 tc' }),
													_react2.default.createElement('td', { className: 'w100 tc' }),
													_react2.default.createElement('td', { className: 'w100 tc' })
												) : null,
												!isDictTemplate ? mobx.toJS(documentList).map(function (item, index) {
													return _react2.default.createElement(
														'tr',
														{ className: 'w' },
														_react2.default.createElement(
															'td',
															{ className: 'tl pr', style: { width: 'calc(100% - 300px)' } },
															_react2.default.createElement(
																'div',
																{ className: 'filename' },
																_react2.default.createElement(_antd.Checkbox, { checked: !!(checkedList.length === documentList.length), value: item.id }),
																_react2.default.createElement('img', { style: { verticalAlign: 'middle', marginLeft: '6%', marginRight: '8px', cursor: 'pointer' }, width: '32', height: '32 ', src: _this4.trans(item.name), alt: '' }),
																_react2.default.createElement(
																	'span',
																	{ onClick: function onClick() {
																			_this4.showModal(item);
																		}, className: 'filename ellsis', title: item.name },
																	item.id === renameItemId ? renameHtml(item) : item.name
																)
															),
															_react2.default.createElement(
																'span',
																{ style: { position: 'absolute', right: '5px' } },
																_react2.default.createElement('img', { onClick: function onClick() {
																		_this4.downloadUrl(item);
																	}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/download.png', title: '\u4E0B\u8F7D', alt: '\u4E0B\u8F7D' }),
																_react2.default.createElement('img', { onClick: function onClick() {
																		_this4.delDocument(item.id);
																	}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/delete.png', title: '\u5220\u9664', alt: '\u5220\u9664' }),
																_react2.default.createElement('img', { onClick: function onClick() {
																		_this4.renameDocument(item);
																	}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/rename.png', title: '\u91CD\u547D\u540D', alt: '\u91CD\u547D\u540D' })
															)
														),
														_react2.default.createElement(
															'td',
															{ className: 'w100 tc' },
															(0, _utils.converSize)(item.fileSize)
														),
														_react2.default.createElement(
															'td',
															{ className: 'w100 tc' },
															item.ownerName
														),
														_react2.default.createElement(
															'td',
															{ className: 'w100 tc' },
															(0, _moment2.default)(item.createTime).format('YYYY-MM-DD')
														)
													);
												}) : mobx.toJS(dictDocumentList).map(function (item, index) {
													return _react2.default.createElement(
														'tr',
														{ className: 'w' },
														_react2.default.createElement(
															'td',
															{ className: 'tl pr', style: { width: 'calc(100% - 300px)' } },
															_react2.default.createElement(
																'div',
																{ className: 'filename' },
																_react2.default.createElement(_antd.Checkbox, { value: item.id }),
																_react2.default.createElement('img', { style: { verticalAlign: 'middle', marginLeft: '6%', marginRight: '8px', cursor: 'pointer' }, width: '32', height: '32 ', src: _this4.trans(item.name), alt: '' }),
																_react2.default.createElement(
																	'span',
																	{ onClick: function onClick() {
																			_this4.showModal(item);
																		}, className: 'filename ellsis', title: item.name },
																	item.id === renameItemId ? renameHtml(item) : item.name
																)
															),
															_react2.default.createElement(
																'span',
																{ style: { position: 'absolute', right: '5px' } },
																_react2.default.createElement('img', { onClick: function onClick() {
																		_this4.downloadUrl(item);
																	}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/download.png', title: '\u4E0B\u8F7D', alt: '\u4E0B\u8F7D' }),
																_react2.default.createElement('img', { onClick: function onClick() {
																		_this4.delDictDocument(item.id);
																	}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/delete.png', title: '\u5220\u9664', alt: '\u5220\u9664' }),
																_react2.default.createElement('img', { onClick: function onClick() {
																		_this4.renameDocument(item);
																	}, style: { verticalAlign: 'middle', marginRight: '8px', cursor: 'pointer' }, width: '15', height: '15', src: './images/delivery/rename.png', title: '\u91CD\u547D\u540D', alt: '\u91CD\u547D\u540D' })
															)
														),
														_react2.default.createElement(
															'td',
															{ className: 'w100 tc' },
															(0, _utils.converSize)(item.fileSize)
														),
														_react2.default.createElement(
															'td',
															{ className: 'w100 tc' },
															item.ownerName
														),
														_react2.default.createElement(
															'td',
															{ className: 'w100 tc' },
															(0, _moment2.default)(item.createTime).format('YYYY-MM-DD')
														)
													);
												})
											)
										)
									)
								)
							)
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ style: { borderLeft: '1px solid #f2f2f2' }, span: 12 },
						_react2.default.createElement(
							'div',
							{ className: 'task_zone' },
							_react2.default.createElement(
								_antd.Card,
								{
									bordered: false,
									headStyle: cardHeadStyle,
									bodyStyle: cardBodyStyle,
									title: '\u9636\u6BB5\u76EE\u6807'
								},
								_react2.default.createElement(
									'div',
									{ className: 'square_block' },
									_react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: taskDetail.goal !== undefined ? taskDetail.goal : '' } })
								)
							),
							_react2.default.createElement(
								_antd.Card,
								{
									bordered: false,
									bodyStyle: cardBodyStyle2,
									title: '\u6807\u51C6\u6D41\u7A0B'
								},
								_react2.default.createElement(_reactZmage2.default, { className: 'flow-chart', src: taskDetail.flowChartUrl })
							)
						)
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: modalHeader,
						visible: modalVisible,
						onOk: this.handleOk,
						onCancel: this.handleCancel,
						footer: null,
						style: { top: 70, height: 'calc(100vh - 150px)', minWidth: '1000px' },
						bodyStyle: { padding: 0 },
						width: 'calc(100% - 400px)'
					},
					_react2.default.createElement(
						'div',
						{ style: isImageOrDoc === 'doc' ? { height: 'calc(100vh - 200px)' } : { height: 'calc(100vh - 200px)', textAlign: 'center', backgroundColor: '#000', paddingTop: '40px' } },
						isImageOrDoc === 'doc' ? _react2.default.createElement('iframe', {
							src: fileUrl,
							width: '100%', height: '100%', frameBorder: '1', style: { minHeight: '600px' } }) : _react2.default.createElement('img', { src: fileUrl, height: '600px', style: { minHeight: '600px' }, alt: '' })
					)
				)
			);
		}
	}]);

	return SalesDetail;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = SalesDetail;

/***/ }),

/***/ 2015:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _dec, _dec2, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _reactRouterDom = __webpack_require__(32);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _download = __webpack_require__(68);

var _SendMailModal = __webpack_require__(2016);

var _SendMailModal2 = _interopRequireDefault(_SendMailModal);

var _MyUpload4Affairs = __webpack_require__(1564);

var _MyUpload4Affairs2 = _interopRequireDefault(_MyUpload4Affairs);

var _reactZmage = __webpack_require__(1522);

var _reactZmage2 = _interopRequireDefault(_reactZmage);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * 五排一图
                                                                                                                                                                                                                             *dangw@bocspace.cn
                                                                                                                                                                                                                             */


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: false
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				_this2.toggleEdit();
				handleSave(_extends({}, record, values));
			});
		}, _this2.onChange = function (e) {
			var check = e.target.checked;
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave,
			    dataSource = _this2$props2.dataSource;

			// 记录长度,校验

			var dataArray = JSON.parse(JSON.stringify(dataSource));
			var array = dataArray.filter(function (item) {
				return item.isSelected == 1;
			});
			if (check && array.length >= 10) {
				_antd.message.warn("已达上限，“有无”选项最多可勾选显示10人");
				return false;
			} else {
				_this2.form.validateFields(function (error, values) {
					if (values.hasOwnProperty('isSelected')) {
						values["isSelected"] = check == true ? 1 : 0;
					}
					handleSave(_extends({}, record, values));
				});
			}
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props3 = _this2.props,
			    children = _this2$props3.children,
			    dataIndex = _this2$props3.dataIndex,
			    record = _this2$props3.record,
			    title = _this2$props3.title;
			var editing = _this2.state.editing;


			if (dataIndex == "station") {
				if (record["isEdit"] == 1) {
					return editing ? _react2.default.createElement(
						_antd.Form.Item,
						{ style: { margin: 0 } },
						form.getFieldDecorator(dataIndex, {
							rules: [{
								required: false,
								message: title + ' is required.'
							}],
							initialValue: record[dataIndex]
						})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
								return _this2.input = node;
							}, onPressEnter: _this2.save, onBlur: _this2.save }))
					) : _react2.default.createElement(
						'div',
						{
							// className="editable-cell-value-wrap"
							style: { minHeight: "34px" }
							// onClick={this.toggleEdit}
						},
						children
					);
				} else {
					return _react2.default.createElement(
						'div',
						null,
						children
					);
				}
			} else if (dataIndex == "isSelected") {
				return _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.Checkbox, { onChange: _this2.onChange, checked: true }))
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
							return _this2.input = node;
						}, onPressEnter: _this2.save, onBlur: _this2.save }))
				) : _react2.default.createElement(
					'div',
					{

						style: { minHeight: "34px" }
						// onClick={this.toggleEdit}
					},
					children
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    dataSource = _props.dataSource,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'dataSource', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

var FiveCards = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = (0, _reactRouterDom.withRouter)(_class2 = _dec2(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(FiveCards, _React$Component2);

	function FiveCards(props) {
		_classCallCheck(this, FiveCards);

		var _this3 = _possibleConstructorReturn(this, (FiveCards.__proto__ || Object.getPrototypeOf(FiveCards)).call(this, props));

		_this3.state = {
			modal1Visible: false,
			modal2Visible: false,
			modal3Visible: false,
			modal4Visible: false,
			fileList: [],
			loading: false,
			fetching: false,
			text: "", //关键字
			pageIndex: 1,
			pageSize: 10,
			companyData: [],
			isCallSuccess: false,
			downloading: false,
			dataSource: [],
			count: 8,
			selectedRows: [],
			selectedRowKeys: [],
			projectType: null,
			constructionPeriod: null
		};

		_this3.getLastConstruction = function () {
			var projectDetail = _this3.store.projectDetail;

			var param = {
				projectId: projectDetail.id
			};
			_this3.store.getConstruction(param).then(function (res) {

				if (res != null && res.projectId !== null) {
					// const tmpRes = Object.assign(res,{"projectType":"类型"});
					var _res$projectName = res.projectName,
					    projectName = _res$projectName === undefined ? "" : _res$projectName,
					    _res$projectType = res.projectType,
					    projectType = _res$projectType === undefined ? "" : _res$projectType,
					    _res$buildScale = res.buildScale,
					    buildScale = _res$buildScale === undefined ? "" : _res$buildScale,
					    _res$buildUnit = res.buildUnit,
					    buildUnit = _res$buildUnit === undefined ? "" : _res$buildUnit,
					    _res$constructionUnit = res.constructionUnit,
					    constructionUnit = _res$constructionUnit === undefined ? "" : _res$constructionUnit,
					    _res$constructionPeri = res.constructionPeriod,
					    constructionPeriod = _res$constructionPeri === undefined ? "" : _res$constructionPeri,
					    _res$projectUrl = res.projectUrl,
					    projectUrl = _res$projectUrl === undefined ? "" : _res$projectUrl,
					    _res$planUrl = res.planUrl,
					    planUrl = _res$planUrl === undefined ? "" : _res$planUrl,
					    _res$constructionMana = res.constructionManagers,
					    constructionManagers = _res$constructionMana === undefined ? [] : _res$constructionMana;


					_this3.props.form.setFieldsValue({
						projectName: projectName,
						projectType: projectType,
						buildScale: buildScale,
						buildUnit: buildUnit,
						constructionUnit: constructionUnit,
						constructionPeriod: constructionPeriod,
						projectUrl: projectUrl,
						planUrl: planUrl
					});

					_this3.store.construction = Object.assign({}, res);

					// 管理人员
					if (constructionManagers != null && Array.isArray(constructionManagers) && constructionManagers.length > 0) {
						_this3.setState({
							dataSource: constructionManagers.map(function (item, index) {
								return Object.assign(item, { key: index });
							}),
							count: constructionManagers.length
							// selectedRowKeys:constructionManagers.map((item, index)=>{
							// 	return index
							// }),
						});
					}
				}
			});
		};

		_this3.getBuildTeamOneItemListByProjectId = function () {
			var projectDetail = _this3.store.projectDetail;

			var param = {
				projectId: projectDetail.id
			};
			_this3.store.getBuildTeamOneItemListByProjectId(param).then(function (res) {
				var ds = res.map(function (item, index) {
					return {
						station: item.position,
						name: item.userName,
						phone: item.phone,
						level: item.positionLevel,
						key: index
					};
				});
				_this3.setState({ dataSource: ds, selectedRowKeys: ds.map(function (item, index) {
						return index;
					}), selectedRows: ds });
			});
		};

		_this3.getCurrentStageState = function () {
			var taskDetail = _this3.store.taskDetail;

			_this3.store.getTaskStepState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this3.store.fiveCardState = res;
				}
			});
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    count = _this3$state.count,
			    dataSource = _this3$state.dataSource;
			//新增成员最多只能勾选十个，超出时再添加选择人员已达上限

			var dataArray = JSON.parse(JSON.stringify(dataSource));
			var array = dataArray.filter(function (item) {
				return item.isSelected == 1;
			});
			if (array.length >= 10) {
				_antd.message.warn("已达上限，“有无”选项最多可勾选显示10人");
				return false;
			}
			var newData = {
				key: count,
				station: "",
				name: "",
				phone: "",
				level: 3,
				isSelected: 1,
				isEdit: 1
			};
			_this3.setState({
				dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
				count: count + 1
			});
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData });
		};

		_this3.showSendMailModal = function (e) {
			e.preventDefault();
			_this3.props.form.validateFields(function (err, values) {
				if (err) {
					_antd.message.warn("请完善信息后再提交");
					return false;
				} else {

					// 校验管理人员
					var _this3$state2 = _this3.state,
					    dataSource = _this3$state2.dataSource,
					    selectedRowKeys = _this3$state2.selectedRowKeys,
					    selectedRows = _this3$state2.selectedRows;

					if (selectedRowKeys.length > 10) {
						_antd.message.warn("管理人员人数不能大于10人");
						return false;
					}
					if (selectedRowKeys.length === 0) {
						_antd.message.warn("至少选择一名管理人员");
						return false;
					}

					var dataArray = JSON.parse(JSON.stringify(selectedRows));
					//console.log("da=>", dataArray);
					var array = dataArray.filter(function (item) {
						return item.isSelected == 1;
					});
					if (array.some(function (item) {
						return item.station == "" || item.station == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}
					if (array.some(function (item) {
						return item.name == "" || item.name == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}
					if (array.some(function (item) {
						return item.phone == "" || item.phone == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}

					_this3.setState({ modal3Visible: true });
				}
			});
		};

		_this3.sendMakeFile = function (param) {
			var _this3$props$form$get = _this3.props.form.getFieldsValue(),
			    _this3$props$form$get2 = _this3$props$form$get.projectName,
			    projectName = _this3$props$form$get2 === undefined ? "" : _this3$props$form$get2,
			    _this3$props$form$get3 = _this3$props$form$get.projectType,
			    projectType = _this3$props$form$get3 === undefined ? "" : _this3$props$form$get3,
			    _this3$props$form$get4 = _this3$props$form$get.buildScale,
			    buildScale = _this3$props$form$get4 === undefined ? "" : _this3$props$form$get4,
			    _this3$props$form$get5 = _this3$props$form$get.buildUnit,
			    buildUnit = _this3$props$form$get5 === undefined ? "" : _this3$props$form$get5,
			    _this3$props$form$get6 = _this3$props$form$get.constructionUnit,
			    constructionUnit = _this3$props$form$get6 === undefined ? "" : _this3$props$form$get6,
			    _this3$props$form$get7 = _this3$props$form$get.constructionPeriod,
			    constructionPeriod = _this3$props$form$get7 === undefined ? "" : _this3$props$form$get7;

			var construction = _this3.store.construction;
			var dataSource = _this3.state.dataSource;

			var _mobx$toJS = mobx.toJS(construction),
			    projectUrl = _mobx$toJS.projectUrl,
			    planUrl = _mobx$toJS.planUrl;

			var dataArray = JSON.parse(JSON.stringify(dataSource));
			var userid = localStorage.getItem("userid");
			var c = {
				projectName: projectName,
				projectType: projectType,
				buildScale: buildScale,
				buildUnit: buildUnit,
				constructionUnit: constructionUnit,
				constructionPeriod: constructionPeriod,
				projectUrl: projectUrl,
				planUrl: planUrl,
				constructionManagers: dataArray.map(function (item) {
					delete item.key;
					delete item.isEdit;
					return item;
				}),
				createUserId: userid

				// 保存
			};_this3.store.sendConstrctionEmail({ 'c': c, 'emails': param }).then(function (res) {
				if (res) {
					_this3.handleAfterSend();
				}
			});
		};

		_this3.inter3sRun = function () {
			_this3.props.form.validateFields(function (err, values) {
				if (err) {
					_antd.message.warn("请完善信息后再提交");
					return false;
				} else {
					var _values$projectName = values.projectName,
					    projectName = _values$projectName === undefined ? "" : _values$projectName,
					    _values$projectType = values.projectType,
					    projectType = _values$projectType === undefined ? "" : _values$projectType,
					    _values$buildScale = values.buildScale,
					    buildScale = _values$buildScale === undefined ? "" : _values$buildScale,
					    _values$buildUnit = values.buildUnit,
					    buildUnit = _values$buildUnit === undefined ? "" : _values$buildUnit,
					    _values$constructionU = values.constructionUnit,
					    constructionUnit = _values$constructionU === undefined ? "" : _values$constructionU,
					    _values$constructionP = values.constructionPeriod,
					    constructionPeriod = _values$constructionP === undefined ? "" : _values$constructionP;
					var construction = _this3.store.construction;
					var _this3$state3 = _this3.state,
					    dataSource = _this3$state3.dataSource,
					    selectedRowKeys = _this3$state3.selectedRowKeys,
					    selectedRows = _this3$state3.selectedRows;

					if (selectedRowKeys.length > 10) {
						_antd.message.warn("管理人员人数不能大于10人");
						return false;
					}
					if (selectedRowKeys.length === 0) {
						_antd.message.warn("至少选择一名管理人员");
						return false;
					}

					var _mobx$toJS2 = mobx.toJS(construction),
					    projectUrl = _mobx$toJS2.projectUrl,
					    planUrl = _mobx$toJS2.planUrl;

					var dataArray = JSON.parse(JSON.stringify(selectedRows));
					var userid = localStorage.getItem("userid");

					// 校验管理人员
					var array = dataArray;
					if (array.some(function (item) {
						return item.station == "" || item.station == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}
					if (array.some(function (item) {
						return item.name == "" || item.name == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}
					if (array.some(function (item) {
						return item.phone == "" || item.phone == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}

					var params = {
						projectName: projectName,
						projectType: projectType,
						buildScale: buildScale,
						buildUnit: buildUnit,
						constructionUnit: constructionUnit,
						constructionPeriod: constructionPeriod,
						projectUrl: projectUrl,
						planUrl: planUrl,
						constructionManagers: dataArray.map(function (item) {
							delete item.key;
							return item;
						}),
						createUserId: userid

						// 保存
					};_this3.store.saveConstruction({ c: params, saveType: 0 });
					_this3.setState({ isCallSuccess: false, downloading: true });
					_this3.store.saveConstrctionFile({ 'c': params }).then(function (res) {
						if (res) {
							_this3.getReportUrl({ "id": res }, projectName);
						}
					});
				}
			});
		};

		_this3.getReportUrl = function (id, projectName) {
			var _this = _this3;
			_this.timer22 = setInterval(function () {
				_this.store.getDocUrl2(id).then(function (url) {
					if (url !== null && url !== "") {
						_this.setState({ isCallSuccess: true, downloading: false });
						_this3.info();
						(0, _download.downloadFile)(url, projectName + '\u4E94\u724C\u4E00\u56FE');
						clearInterval(_this.timer22);
					} else {}
				});
			}, 3000);
		};

		_this3.handleCancel = function (modalVisible) {
			_this3.setState(modalVisible);
		};

		_this3.handleAfterSend = function () {
			_this3.setState({ modal3Visible: false });
			_this3.setState({ modal4Visible: true });
		};

		_this3.handleAttment = function (type, param) {
			var url = param && param[0].url;
			_this3.store.construction[type] = url;
		};

		_this3.info = function () {
			_antd.Modal.info({
				okText: "知道了",
				title: '文件生成成功，正在下载中，请耐心等待',
				onOk: function onOk() {}
			});
		};

		_this3.getProjectDetail = function () {
			var projectId = _this3.store.projectId;
			_this3.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this3.store.projectDetail = res;
			});
		};

		_this3.overCurrentStageTask = function () {
			var taskDetail = _this3.store.taskDetail;
			var dataSource = _this3.state.dataSource;

			_this3.props.form.validateFields(function (err, values) {
				if (err) {
					_antd.message.warn("请完善信息后再提交");
					return false;
				} else {

					var dataArray = JSON.parse(JSON.stringify(dataSource));

					// 校验管理人员
					var array = dataArray.filter(function (item) {
						return item.isSelected == 1;
					});
					if (array.some(function (item) {
						return item.station == "" || item.station == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}
					if (array.some(function (item) {
						return item.name == "" || item.name == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}
					if (array.some(function (item) {
						return item.phone == "" || item.phone == null;
					})) {
						_antd.message.warn("管理人员信息未完善，勾选的岗位信息需填写完整后提交");
						return false;
					}

					_this3.store.getTaskStepState({ "taskId": taskDetail.id }).then(function (res) {
						if (res) {
							_this3.store.overTaskStep({ "taskId": taskDetail.id, "index": 1 }).then(function (res) {
								if (res) {
									_this3.store.fiveCardState = res;
									_this3.getProjectDetail();
								}
							});
						}
					});
				}
			});
		};

		_this3.reStartHandover = function () {
			var taskDetail = _this3.store.taskDetail;

			_this3.store.reStartTaskStep({ "taskId": taskDetail.id, "index": 1 }).then(function (res) {
				if (res) {
					_this3.store.fiveCardState = res;
					_this3.getProjectDetail();
				}
			});
		};

		_this3.selectRow = function (record) {
			var selectedRowKeys = [].concat(_toConsumableArray(_this3.state.selectedRowKeys));
			if (selectedRowKeys.indexOf(record.key) >= 0) {
				selectedRowKeys.splice(selectedRowKeys.indexOf(record.key), 1);
			} else {
				selectedRowKeys.push(record.key);
			}
			_this3.setState({ selectedRowKeys: selectedRowKeys });
		};

		_this3.onSelectedRowKeysChange = function (selectedRowKeys, selectedRows) {
			_this3.setState({ selectedRowKeys: selectedRowKeys, selectedRows: selectedRows });
		};

		_this3.handleSaveConstruction = function (type, e) {
			var _mobx$toJS3 = mobx.toJS(_this3.store.construction),
			    projectType = _mobx$toJS3.projectType,
			    constructionPeriod = _mobx$toJS3.constructionPeriod;

			var currentValue = null;
			if (projectType !== _this3.props.form.getFieldValue(type) && _this3.props.form.getFieldValue(type) !== "" && _this3.props.form.getFieldValue(type) !== null) {
				currentValue = _this3.props.form.getFieldValue(type);
			} else {
				return;
			}
			var obj = {};
			obj[type] = currentValue;
			_this3.store.saveConstruction({ "c": Object.assign(mobx.toJS(_this3.store.construction), obj) }).then(function (res) {
				if (res) {
					_this3.getLastConstruction();
					_this3.getBuildTeamOneItemListByProjectId();
					_this3.getCurrentStageState();
				}
			});
		};

		_this3.store = _this3.props.DeliveryStore;
		return _this3;
	}

	_createClass(FiveCards, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getLastConstruction();
			this.getBuildTeamOneItemListByProjectId();
			this.getCurrentStageState();
		}

		// 新增


		// 保存


		//显示发送邮件对话框


		//发送制作文件


		// 保存本地


		// 间隔3秒获取pdf地址

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state = this.state,
			    modal1Visible = _state.modal1Visible,
			    downloading = _state.downloading,
			    modal3Visible = _state.modal3Visible,
			    modal4Visible = _state.modal4Visible,
			    dataSource = _state.dataSource,
			    selectedRows = _state.selectedRows,
			    selectedRowKeys = _state.selectedRowKeys;
			var _store = this.store,
			    construction = _store.construction,
			    fiveCardState = _store.fiveCardState;

			var _mobx$toJS4 = mobx.toJS(construction),
			    projectUrl = _mobx$toJS4.projectUrl,
			    planUrl = _mobx$toJS4.planUrl;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					sm: { span: 3 }
				},
				wrapperCol: {
					xs: { span: 24 },
					sm: { span: 21 }
				}
			};
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columns = [{ title: '序号', dataIndex: 'key', align: 'center', width: '10%', render: function render(text) {
					return parseInt(text) + 1;
				} }, {
				title: '岗位',
				dataIndex: 'station',
				width: '30%',
				align: 'center',
				editable: true
			}, {
				title: '姓名',
				dataIndex: 'name',
				width: '30%',
				align: 'center',
				editable: true
			}, {
				title: '联系电话',
				dataIndex: 'phone',
				width: '30%',
				align: 'center',
				editable: true
			}];
			var column = columns.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							dataSource: dataSource
						};
					}
				});
			});

			var rowSelection = {
				selectedRowKeys: selectedRowKeys,
				onChange: this.onSelectedRowKeysChange
			};

			return _react2.default.createElement(
				'div',
				{ className: 'ml50 pr' },
				_react2.default.createElement(
					_antd.Spin,
					{ spinning: downloading, tip: '\u751F\u6210\u5236\u4F5C\u6587\u4EF6\u8F83\u5927\uFF0C\u4E0B\u8F7D\u9884\u8BA1\u9700\u89812~5\u5206\u949F\u5DE6\u53F3\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85...', className: 'spin' },
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.reStartHandover,
							style: fiveCardState.state1 === 2 ? { display: '' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					),
					_react2.default.createElement(
						_antd.Row,
						null,
						_react2.default.createElement(
							_antd.Col,
							{ span: 24 },
							_react2.default.createElement(
								_antd.Form,
								formItemLayout,
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5DE5\u7A0B\u540D\u79F0', className: 'edit_form_bold' },
									getFieldDecorator('projectName', {
										rules: [{
											required: true,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(_antd.Input, {
										maxLength: 17,
										onBlur: function onBlur(e) {
											_this4.handleSaveConstruction("projectName", e);
										},
										style: { width: '300px' },
										placeholder: '\u8BF7\u8F93\u5165',
										disabled: fiveCardState.state1 !== 2 ? false : true
									}))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5DE5\u7A0B\u7C7B\u578B', className: 'edit_form_bold' },
									getFieldDecorator('projectType', {
										rules: [{
											required: true,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(_antd.Input, {
										maxLength: 17,
										onBlur: function onBlur(e) {
											_this4.handleSaveConstruction("projectType", e);
										},
										style: { width: '300px' },
										placeholder: '\u8BF7\u8F93\u5165',
										disabled: fiveCardState.state1 !== 2 ? false : true
									}))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5EFA\u7B51\u89C4\u6A21', className: 'edit_form_bold' },
									getFieldDecorator('buildScale', {
										rules: [{
											required: true,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(_antd.Input, {
										maxLength: 17,
										onBlur: function onBlur(e) {
											_this4.handleSaveConstruction("buildScale", e);
										},
										style: { width: '300px' },
										placeholder: '\u8BF7\u8F93\u5165',
										disabled: fiveCardState.state1 !== 2 ? false : true
									}))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5EFA\u8BBE\u5355\u4F4D', className: 'edit_form_bold' },
									getFieldDecorator('buildUnit', {
										rules: [{
											required: true,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(_antd.Input, {
										maxLength: 17,
										onBlur: function onBlur(e) {
											_this4.handleSaveConstruction("buildUnit", e);
										},
										style: { width: '300px' },
										placeholder: '\u8BF7\u8F93\u5165',
										disabled: fiveCardState.state1 !== 2 ? false : true
									}))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u65BD\u5DE5\u5355\u4F4D', className: 'edit_form_bold' },
									getFieldDecorator('constructionUnit', {
										rules: [{
											required: true,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(_antd.Input, {
										maxLength: 17,
										onBlur: function onBlur(e) {
											_this4.handleSaveConstruction("constructionUnit", e);
										},
										style: { width: '300px' },
										placeholder: '\u8BF7\u8F93\u5165',
										disabled: fiveCardState.state1 !== 2 ? false : true
									}))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5EFA\u8BBE\u5DE5\u671F', className: 'edit_form_bold' },
									getFieldDecorator('constructionPeriod', {
										rules: [{
											required: true,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(_antd.Input, {
										maxLength: 17,
										onBlur: function onBlur(e) {
											_this4.handleSaveConstruction("constructionPeriod", e);
										},
										style: { width: '262px' },
										placeholder: '\u8BF7\u8F93\u5165',
										disabled: fiveCardState.state1 !== 2 ? false : true
									})),
									_react2.default.createElement(
										'span',
										{ className: 'f12 ml5' },
										'\u65E5\u5386\u5929'
									)
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u9879\u76EE\u56FE\u7247', className: 'edit_form_bold' },
									getFieldDecorator('projectUrl', {
										rules: [{
											required: false,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(
										'div',
										null,
										projectUrl == "" || projectUrl == null ? "无" : _react2.default.createElement(_reactZmage2.default, { src: projectUrl,
											style: {
												width: "102px",
												height: "102px",
												display: "inline-blcok"
											} })
									))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u7BA1\u7406\u4EBA\u5458', className: 'edit_form_bold' },
									getFieldDecorator('constructionManagers', {
										rules: [{
											required: false,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(
										'div',
										null,
										_react2.default.createElement(_antd.Table, {
											components: components,
											rowSelection: rowSelection,
											onRow: function onRow(record) {
												return {
													onClick: function onClick() {
														_this4.selectRow(record);
													}
												};
											},
											className: 'digital_table',
											rowClassName: function rowClassName() {
												return 'editable-row';
											},
											bordered: false,
											dataSource: dataSource,
											columns: column,
											pagination: false
										})
									))
								),
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u8FDB\u5EA6\u8BA1\u5212\u56FE', className: 'edit_form_bold' },
									getFieldDecorator('planUrl', {
										rules: [{
											required: false,
											message: '该项是必填'
										}]
									})(_react2.default.createElement(
										'div',
										null,
										planUrl == "" || planUrl == null ? "无" : _react2.default.createElement(_reactZmage2.default, { src: planUrl, style: {
												width: "102px",
												height: "102px",
												display: "inline-blcok"
											} })
									))
								)
							)
						)
					),
					_react2.default.createElement(
						_antd.Row,
						null,
						_react2.default.createElement(
							_antd.Col,
							{ span: 24 },
							_react2.default.createElement(
								'div',
								{
									style: {
										marginTop: '0',
										right: 0,
										bottom: 0,
										width: '100%',
										background: '#fff',
										textAlign: 'center',
										zIndex: 9999
									}
								},
								_react2.default.createElement(
									_antd.Button,
									{
										onClick: this.showSendMailModal,
										icon: 'mail',
										shape: 'round',
										type: 'primary' },
									'\u53D1\u9001\u5236\u4F5C\u6587\u4EF6'
								),
								_react2.default.createElement(_antd.Divider, { type: 'vertical' }),
								_react2.default.createElement(
									_antd.Button,
									{
										onClick: this.inter3sRun,
										shape: 'round' },
									'\u4FDD\u5B58\u81F3\u672C\u5730'
								),
								_react2.default.createElement(
									'span',
									{ className: 'daily_tips ml15 f12' },
									'\u6253\u5370\u8981\u6C42\uFF1A600mm*900mm'
								)
							)
						)
					),
					_react2.default.createElement(
						_antd.Row,
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ style: fiveCardState.state1 !== 2 ? {
									display: 'flex',
									justifyContent: 'center'
								} : { display: 'none' } },
							_react2.default.createElement(
								_antd.Button,
								{ onClick: this.overCurrentStageTask,
									ghost: true,
									type: 'primary'
								},
								' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
							)
						)
					),
					_react2.default.createElement(
						_antd.Row,
						null,
						_react2.default.createElement('div', { style: { height: '20px' } })
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						visible: modal1Visible,
						title: '',
						onCancel: function onCancel() {
							_this4.handleCancel({ modal1Visible: false });
						},
						footer: null,
						width: 940,
						bodyStyle: { textAlign: 'center', height: '600px', verticalAlign: 'middle' }
					},
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '100px' } },
						_react2.default.createElement('img', {
							width: '116px',
							height: '116px',
							src: './images/u192.png' })
					),
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '35px', fontSize: '24px', fontWeight: 'bold' } },
						_react2.default.createElement(
							'h1',
							null,
							'\u540D\u7247\u7533\u8BF7\u6210\u529F'
						)
					),
					_react2.default.createElement(
						'p',
						{ style: { marginTop: '35px' } },
						'\u540D\u7247\u9884\u8BA12\u4E2A\u5DE5\u4F5C\u65E5\u5185\u53EF\u6253\u5370\u5B8C\u6BD5\uFF0C\u6253\u5370\u5B8C\u6210\u540E\u5C06\u7535\u8BDD\u6216\u90AE\u4EF6\u901A\u77E5\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u3002'
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						visible: modal4Visible,
						title: '',
						onCancel: function onCancel() {
							_this4.handleCancel({ modal4Visible: false });
						},
						footer: null,
						width: 300,
						bodyStyle: { textAlign: 'center', height: '300px', verticalAlign: 'middle' }
					},
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '30px' } },
						_react2.default.createElement('img', {
							width: '80px',
							height: '80px',
							src: './images/u380.svg' })
					),
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '10px', fontSize: '24px', fontWeight: 'bold' } },
						_react2.default.createElement(
							'h1',
							null,
							'\u53D1\u9001\u6210\u529F'
						)
					),
					_react2.default.createElement(
						'div',
						{
							style: {
								marginTop: '15px',
								right: 0,
								bottom: 0,
								width: '100%',
								padding: '10px 16px',
								background: '#fff',
								textAlign: 'center',
								zIndex: 9999
							}
						},
						_react2.default.createElement(
							_antd.Button,
							{
								style: { marginRight: 8 },
								shape: 'round',
								onClick: function onClick() {
									_this4.handleCancel({ modal4Visible: false });
								},
								type: 'primary' },
							'\u5173\u95ED'
						)
					)
				),
				_react2.default.createElement(_SendMailModal2.default, {
					type: 'fivecards',
					visible: modal3Visible,
					sendBuildBusinessEmail: this.sendMakeFile,
					closeModal: function closeModal() {
						_this4.handleCancel({ modal3Visible: false });
					},
					afterSend: this.handleAfterSend,
					store: this.store
				})
			);
		}
	}]);

	return FiveCards;
}(_react2.default.Component)) || _class2) || _class2) || _class2) || _class2);
exports.default = FiveCards;

/***/ }),

/***/ 2016:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *流程管理--列表
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _reactRouterDom = __webpack_require__(32);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SendMailModal = (_dec = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(SendMailModal, _React$Component);

	function SendMailModal(props) {
		_classCallCheck(this, SendMailModal);

		var _this = _possibleConstructorReturn(this, (SendMailModal.__proto__ || Object.getPrototypeOf(SendMailModal)).call(this, props));

		_this.state = {};

		_this.closeModal = function () {
			_this.props.closeModal();
		};

		_this.afterSend = function () {
			_this.props.afterSend();
		};

		_this.sendBuildBusinessEmail = function () {
			_this.props.form.validateFields(function (err, fieldsValue) {
				if (err) {
					return;
				}
				var mailuri = fieldsValue.mailuri;

				var params = [mailuri];
				_this.props.sendBuildBusinessEmail(params);
			});
		};

		_this.sendBuildBusinessEmail2 = function () {
			var businessCard = _this.store.businessCard;

			_this.props.form.validateFields(function (err, fieldsValue) {
				if (err) {
					return;
				}
				var mailuri = fieldsValue.mailuri;


				_this.store.sendBuildBusinessEmail({ 'bc': businessCard, 'emails': [mailuri] }).then(function (res) {
					if (res) {
						_this.afterSend();
					}
				});
			});
		};

		_this.sendBuildBusinessEmail3 = function () {
			var ratingplate = _this.store.ratingplate;

			_this.props.form.validateFields(function (err, fieldsValue) {
				if (err) {
					return;
				}
				var mailuri = fieldsValue.mailuri;

				_this.store.sendNameplateEmail({ 'n': ratingplate, 'emails': [mailuri] }).then(function (res) {
					if (res) {
						_this.afterSend();
					}
				});
			});
		};

		_this.trans = function (type) {
			switch (type) {
				case "businesscard":
					return _this.sendBuildBusinessEmail2;
					break;
				case "ratingplate":
					return _this.sendBuildBusinessEmail3;
					break;
				case "fivecards":
					return _this.sendBuildBusinessEmail;
					break;
				default:
					return null;
					break;
			}
		};

		_this.store = _this.props.store;

		return _this;
	}

	_createClass(SendMailModal, [{
		key: 'componentDidMount',
		value: function componentDidMount() {}

		// 发送邮件

	}, {
		key: 'render',
		value: function render() {
			var _props = this.props,
			    visible = _props.visible,
			    type = _props.type;


			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					sm: { span: 24 }
				},
				wrapperCol: {
					xs: { span: 24 },
					sm: { span: 24 }
				}
			};
			var getFieldDecorator = this.props.form.getFieldDecorator;

			return _react2.default.createElement(
				_antd.Modal,
				{
					visible: visible,
					title: '',
					onCancel: this.closeModal,
					footer: null,
					width: 940,
					bodyStyle: { textAlign: 'center', height: '600px', verticalAlign: 'middle' }
				},
				_react2.default.createElement(
					'div',
					{ style: { marginTop: '50px' } },
					_react2.default.createElement('img', {
						width: '257px',
						height: '192px',
						src: './images/u294.gif' })
				),
				_react2.default.createElement(
					'div',
					{ style: { fontSize: '16px' } },
					_react2.default.createElement(
						_antd.Form,
						formItemLayout,
						_react2.default.createElement(
							_antd.Form.Item,
							{ label: '', className: 'edit_form_bold' },
							getFieldDecorator('mailuri', {
								rules: [{
									required: true,
									type: 'email',
									message: '该项是必填并且符合邮箱命名规则'
								}]
							})(_react2.default.createElement(
								'div',
								{ style: { marginTop: '35px', fontSize: '16px', textAlign: 'center' } },
								_react2.default.createElement(
									'span',
									{ style: { color: '#000', fontSize: '14px', fontWeight: '400' } },
									'\u90AE\u7BB1\u5730\u5740:'
								),
								_react2.default.createElement(_antd.Input, { maxLength: 50,
									style: { width: '360px', marginLeft: '5px' },
									placeholder: '\u8BF7\u8F93\u5165(\u4E0D\u8D85\u8FC750\u5B57)'
								}),
								_react2.default.createElement(
									_antd.Button,
									{
										type: 'primary',
										onClick: this.trans(type),
										style: { marginLeft: '5px' }
									},
									'\u53D1\u9001'
								)
							))
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ style: { textAlign: 'left', paddingLeft: '30%' } },
					_react2.default.createElement(
						'p',
						{ style: { marginTop: '5px' } },
						'\u6E29\u99A8\u63D0\u9192\uFF1A\u53D1\u9001\u65F6\u90AE\u4EF6\u5C06\u9ED8\u8BA4\u6284\u9001\u7533\u8BF7\u4EBA\u4E00\u5C01\u3002'
					),
					_react2.default.createElement(
						'p',
						{ style: { marginTop: '15px' } },
						'\u5E38\u7528\u5730\u5740\uFF1A'
					),
					_react2.default.createElement(
						_antd.Row,
						null,
						_react2.default.createElement(
							_antd.Col,
							{ span: 12 },
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u5730\u5740\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'\u5E7F\u8054\u8FBE\u4E8C\u671F133\u7F8E\u7ACB\u7279\u6587\u5370\u5BA4 '
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u7535\u8BDD\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'15234018584'
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u90AE\u7BB1\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'615053062@qq.com'
								)
							)
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12 },
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u5730\u5740\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'\u6C5F\u9634\u5E02\u65B0\u57CE\u4E1C\u4E5D\u6708\u5E7F\u544A\u56FE\u6587'
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u7535\u8BDD\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'15961679730'
								)
							),
							_react2.default.createElement(
								'p',
								null,
								_react2.default.createElement(
									'span',
									null,
									'\u90AE\u7BB1\uFF1A'
								),
								_react2.default.createElement(
									'span',
									null,
									'27697090@qq.com'
								)
							)
						)
					)
				)
			);
		}
	}]);

	return SendMailModal;
}(_react2.default.Component)) || _class) || _class) || _class);


var WrappedSendMailModalForm = _antd.Form.create({})(SendMailModal);
exports.default = WrappedSendMailModalForm;

/***/ }),

/***/ 2017:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BackgroundItemOne = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(BackgroundItemOne, _React$Component);

	function BackgroundItemOne(props) {
		_classCallCheck(this, BackgroundItemOne);

		var _this = _possibleConstructorReturn(this, (BackgroundItemOne.__proto__ || Object.getPrototypeOf(BackgroundItemOne)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressTargetTimeSure", e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.handleBaseTime = function (date, datestring) {
			_this.props.updateData("progressTargetBaseTime", date.valueOf());
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, e.target.value);
		};

		_this.handleUpdate = function (type, e) {
			_this.props.updateHandOverOne(type, e);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0 //defalut 0
		};
		return _this;
	}

	_createClass(BackgroundItemOne, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.props.onRef && this.props.onRef(this);
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'checkFormValidate',
		value: function checkFormValidate() {
			this.props.form.validateFields(function (err, values) {
				if (!err) {
					console.log('Received values of form: ', values);
				}
			});
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var sureState = this.state.sureState;
			var _store = this.store,
			    handoverOneObj = _store.handoverOneObj,
			    handoverState = _store.handoverState;

			var fields = mobx.toJS(handoverOneObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 24 },
					md: { span: 4 },
					sm: { span: 4 }
				},
				wrapperCol: {
					xs: { span: 24 },
					md: { span: 20 },
					sm: { span: 20 }
				}
			};

			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					null,
					handoverState.state1 === 2 ? _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u80CC\u666F-\u57FA\u672C\u6982\u51B5', className: 'w' },
								_react2.default.createElement(
									'div',
									{
										style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' },
										className: 'pr' },
									handoverOneObj.background
								)
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u9879\u76EE\u610F\u4E49', className: 'w' },
								_react2.default.createElement(
									'div',
									{
										style: { width: '100%', height: 'auto', lineHeight: '30px', wordBreak: 'break-all', whiteSpace: 'pre-wrap', textAlign: 'left' },
										className: 'pr' },
									handoverOneObj.significance
								)
							)
						)
					) : _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u80CC\u666F-\u57FA\u672C\u6982\u51B5', className: 'w' },
								getFieldDecorator('background', {
									initialValue: fields.background == null ? "" : fields.background,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input.TextArea, { ref: function ref(node) {
										return _this2.input = node;
									}, onBlur: function onBlur(e) {
										_this2.handleUpdate("background", e);
									}, rows: 6, placeholder: '\u63CF\u8FF0\u9879\u76EE\u6027\u8D28\u3001\u5730\u70B9\u3001\u89C4\u6A21\u3001\u4F9B\u5E94\u8303\u56F4\u3001\u9879\u76EE\u5468\u671F\u7B49\u57FA\u672C\u60C5\u51B5\u3002', style: { width: '100%', minWidth: '800px' } }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u9879\u76EE\u610F\u4E49', className: 'w' },
								getFieldDecorator('significance', {
									initialValue: fields.significance == null ? "" : fields.significance,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input.TextArea, { onBlur: function onBlur(e) {
										_this2.handleUpdate("significance", e);
									}, rows: 6, placeholder: '\u63CF\u8FF0\u6B64\u9879\u76EE\u6210\u529F\u80FD\u4EA7\u751F\u7684\u4EF7\u503C\uFF0C\u5982\u6253\u9020\u54C1\u724C\u5F62\u8C61\uFF0C\u6811\u7ACB\u533A\u57DF\u6807\u6746\u7B49\u3002', style: { width: '100%', minWidth: '800px' } }))
							)
						)
					)
				)
			);
		}
	}]);

	return BackgroundItemOne;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = BackgroundItemOne;

/***/ }),

/***/ 2018:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//import _ from "lodash";
//import PageSelect from "@/components/common/PageSelect";
var DirectoryTree = _antd.Tree.DirectoryTree;

var InputGroup = _antd.Input.Group;
var Option = _antd.Select.Option;
var Text = _antd.Typography.Text;
var BaseInfoItemTwo = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(BaseInfoItemTwo, _React$Component);

	function BaseInfoItemTwo(props) {
		_classCallCheck(this, BaseInfoItemTwo);

		var _this = _possibleConstructorReturn(this, (BaseInfoItemTwo.__proto__ || Object.getPrototypeOf(BaseInfoItemTwo)).call(this, props));

		_this.getHandoverTwo = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getHandoverTwo({ "taskId": taskDetail.id }).then(function (res) {
				if (res) {
					_this.store.handoverTwoObj = res;
					_this.props.form.setFieldsValue({
						customerExpectations: res.customerExpectations == null || res.customerExpectations == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.customerExpectations),
						promise: res.promise == null || res.promise == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.promise)
					});
				}
			});
		};

		_this.handleOnChange = function (type, e) {
			_this.props.updateHandOver(type, e);
		};

		_this.handleUpdate = function (type, e) {
			_this.props.updateHandOver(type, e);
		};

		_this.handleBChange = function (type, bfData) {
			// console.log(type, BraftEditor.createEditorState(bfData).toHTML())
			_this.props.updateHandOverBC(type, _braftEditor2.default.createEditorState(bfData).toHTML());
		};

		_this.updateStore = function (param) {
			_this.props.form.setFieldsValue({
				"companyId": param.id
			});
			_this.props.updateHandOver3({
				companyId: param.id,
				companyName: param.name
			});
		};

		_this.showModal = function () {
			_this.setState({
				visible: true
			});
		};

		_this.handleOk = function (e) {
			_this.setState({
				visible: false
			});
		};

		_this.handleCancel = function (e) {
			//console.log(e);
			_this.setState({
				visible: false
			});
		};

		_this.getClientHeight = function () {
			var clientHeight = 0;
			if (document.body.clientHeight && document.documentElement.clientHeight) {
				var clientHeight = document.body.clientHeight < document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight;
			} else {
				var clientHeight = document.body.clientHeight > document.documentElement.clientHeight ? document.body.clientHeight : document.documentElement.clientHeight;
			}
			return clientHeight;
		};

		_this.getCompanyTree = function () {
			_this.store.getCompanyTree().then(function (response) {
				if (response) {
					var transformTree = function transformTree(list) {
						var tree = [];
						for (var i = 0, len = list.length; i < len; i++) {
							if (!list[i].parentId) {
								var item = _queryChildren(list[i], list);
								tree.push(Object.assign(item, { "title": item.nickname, key: item.id }));
							}
						}
						return tree;
					};

					var _queryChildren = function _queryChildren(parent, list) {
						var children = [];
						for (var i = 0, len = list.length; i < len; i++) {
							if (list[i].parentId === parent.id) {
								var item = _queryChildren(list[i], list);
								if (item.children == undefined) {
									// 子集
									children.push(Object.assign(item, { isLeaf: true, title: item.nickname, key: item.id }));
								} else {
									children.push(Object.assign(item, { isLeaf: false, title: item.nickname, key: item.id }));
								}
							}
						}
						if (children.length) {
							parent.children = children;
						}
						return parent;
					};

					_this.setState({
						companyTree: transformTree(response)
					});

					if (response && Array.isArray(response)) {
						response.forEach(function (item) {
							if (item.id === "root" && Object.keys(_this.state.selectedNode).length === 0) {
								_this.setState({
									selectedNode: Object.assign(item, { "title": item.nickname, "key": item.id })
								});
							}
						});
					}
				}
			});
		};

		_this.handleSearch = function () {
			_this.setState({
				params: Object.assign(_this.state.params, { pageIndex: 1, pageSize: 10 })
			}, function () {
				_this.getPage();
			});
		};

		_this.onChange = function (type, e) {
			_this.setState({
				params: Object.assign(_this.state.params, _defineProperty({}, type, e.target.value))
			});
		};

		_this.onChangeType = function (type, value) {
			_this.setState({
				params: Object.assign(_this.state.params, _defineProperty({}, type, value))
			});
		};

		_this.getPage = function () {
			_this.store.getCompanyPageList(_this.state.params).then(function (response) {
				if (response && response.body != null) {
					_this.setState({
						companyPageList: response.body.map(function (item, index) {
							return Object.assign(item, { keyIndex: index + 1 });
						}),
						totalCount: response.totalCount
					});
				} else {
					_this.setState({
						companyPageList: [],
						totalCount: 0
					});
				}
			});
		};

		_this.showSizeChange = function (current, pageSize) {
			_this.setState({
				params: Object.assign(_this.state.params, { "pageIndex": 1, "pageSize": pageSize })
			}, function () {
				_this.getPage();
			});
		};

		_this.onPageChange = function (pageNumber) {
			_this.setState({
				params: Object.assign(_this.state.params, { "pageIndex": pageNumber })
			}, function () {
				_this.getPage();
			});
		};

		_this.showTotal = function (total) {
			return '\u5171 ' + total + ' \u6761';
		};

		_this.onSelect = function (keys, event) {
			var node = event.node;

			_this.setState({
				selectedNode: node,
				params: Object.assign(_this.state.params, { "parentId": node.props.id === 'root' ? '' : node.props.id, pageIndex: 1, pageSize: 10 })
			}, function () {
				_this.getPage();
			});
		};

		_this.setClick = function (param) {
			_this.props.updateHandOver3({
				companyId: param.id,
				companyName: param.name
			});
			_this.handleCancel();
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0, //defalut 0
			summary: _braftEditor2.default.createEditorState(null),
			overallDescription: _braftEditor2.default.createEditorState(null),
			customerExpectations: _braftEditor2.default.createEditorState(null),
			promise: _braftEditor2.default.createEditorState(null),
			visible: false, // 客户弹框
			companyTree: [],
			selectedNode: {},
			params: {
				text: "",
				parentId: "",
				simpleName: "",
				level: 0,
				pageIndex: 1,
				pageSize: 10
			},
			orgType: [{ "id": "1", "name": "集团" }, { "id": "2", "name": "子集团" }, { "id": "3", "name": "分子公司" }],
			companyPageList: [],
			totalCount: 0
		};
		return _this;
	}

	_createClass(BaseInfoItemTwo, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.props.onRef && this.props.onRef(this);
			this.getHandoverTwo();
			this.getCompanyTree();
			this.getPage();
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'checkFormValidate',
		value: function checkFormValidate() {
			var _this2 = this;

			this.props.form.validateFields(function (err, values) {
				if (!err) {
					//console.log('Received values of form: ', values);
					_this2.props.checkFormRequre(true);
				} else {
					_this2.props.checkFormRequre(false);
				}
			});
		}

		// 左树点击

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    sureState = _state.sureState,
			    customerExpectations = _state.customerExpectations,
			    promise = _state.promise,
			    companyTree = _state.companyTree,
			    orgType = _state.orgType,
			    params = _state.params,
			    totalCount = _state.totalCount,
			    companyPageList = _state.companyPageList;
			var _store = this.store,
			    handoverTwoObj = _store.handoverTwoObj,
			    handoverState = _store.handoverState;

			var fields = mobx.toJS(handoverTwoObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 4 },
					md: { span: 4 },
					sm: { span: 4 }
				},
				wrapperCol: {
					xs: { span: 20 },
					md: { span: 20 },
					sm: { span: 20 }
				}
			};
			var controls = ['bold', 'text-color'];
			var columns = [{
				title: '序号',
				dataIndex: 'keyIndex',
				align: "center",
				width: "50px"
			}, {
				title: '组织名称',
				dataIndex: 'name',
				align: "center",
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							onClick: _this3.setClick.bind(_this3, record),
							style: { cursor: "pointer", color: "#1890ff" } },
						text
					);
				}
			}, {
				title: '组织类型',
				dataIndex: 'level',
				align: "center",
				render: function render(text, record) {
					return text === 1 ? "集团" : text === 2 ? "子集团" : "分公司";
				}
			},
			// {
			//   title: '组织层级',
			//   dataIndex: 'level',
			//   align: "center",
			//   width: "50px",
			// },
			{
				title: '组织简称',
				dataIndex: 'nickname',
				align: "center"
			}, {
				title: '备注',
				dataIndex: 'remarks',
				align: "center",
				render: function render(text, record) {
					return text == null || text == "" ? "" : _react2.default.createElement(
						Text,
						{
							style: { width: 300 }

						},
						text
					);
				}
			}];
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					handoverState.state2 === 2 ? _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								'table',
								{ className: 'suppliertable', style: { width: "100%" } },
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5BA2\u6237\u5355\u4F4D\u540D\u79F0'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.companyName
									),
									_react2.default.createElement(
										'td',
										null,
										'\u4E0E\u5E7F\u8054\u8FBE\u5173\u7CFB'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.glodonRelationship
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u7B2C\u51E0\u6B21\u5408\u4F5C'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.cooperations
									),
									_react2.default.createElement(
										'td',
										null,
										'\u4E0E\u667A\u5EFA\u7F8E\u4F4F\u5173\u7CFB'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.bocspaceRelationship
									)
								),
								fields.centralized === 0 ? _react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u662F\u5426\u4E3A\u96C6\u91C7\u9879\u76EE'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.centralized === 0 ? '否' : '是'
									)
								) : _react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u662F\u5426\u4E3A\u96C6\u91C7\u9879\u76EE'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.centralized === 0 ? '否' : '是'
									),
									_react2.default.createElement(
										'td',
										null,
										'\u96C6\u91C7\u5355\u4F4D\u540D\u79F0'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.centralizeCompany
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5BA2\u6237\u63D0\u51FA\u7684\u671F\u671B'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										_react2.default.createElement(
											'div',
											{ style: { width: '100%', wordBreak: 'break-all', whiteSpace: 'pre-wrap', padding: "5px" } },
											fields.customerExpectations !== "" ? _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: fields.customerExpectations } }) : ""
										)
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5173\u952E\u627F\u8BFA\uFF08\u542B\u53E3\u5934\uFF09'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										_react2.default.createElement(
											'div',
											{ style: { width: '100%', wordBreak: 'break-all', whiteSpace: 'pre-wrap', padding: "5px" } },
											fields.promise !== "" ? _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: fields.promise } }) : ""
										)
									)
								)
							)
						)
					) : _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5BA2\u6237\u5355\u4F4D\u540D\u79F0', className: 'w' },
								getFieldDecorator('companyId', {
									initialValue: fields.companyId || "",
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									'span',
									{ onClick: this.showModal },
									fields.companyName,
									_react2.default.createElement(_antd.Icon, { type: 'form', style: { cursor: "pointer", marginLeft: "5px" } })
								)
								/*<PageSelect
        	style="600px"
        	value={fields.companyId || ""}
        	updateStore={this.updateStore}
        />*/
								)
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5BA2\u6237\u63D0\u51FA\u7684\u671F\u671B', className: 'w' },
								getFieldDecorator('customerExpectations', {
									initialValue: fields.customerExpectations == null || fields.customerExpectations == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(fields.customerExpectations),
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_braftEditor2.default, {
									className: 'my-editor',
									onBlur: function onBlur(e) {
										_this3.handleBChange('customerExpectations', e);
									},
									controls: controls,
									contentStyle: {
										minHeight: 100,
										maxHeight: 100,
										overflowY: 'scroll',
										height: 'auto',
										width: '100%'
									}
								}))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5173\u952E\u627F\u8BFA\uFF08\u542B\u53E3\u5934\uFF09', className: 'w' },
								getFieldDecorator('promise', {
									//initialValue: promise,
									initialValue: fields.promise == null || fields.promise == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(fields.promise),
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_braftEditor2.default, {
									className: 'my-editor',
									onBlur: function onBlur(e) {
										_this3.handleBChange('promise', e);
									},
									controls: controls,
									contentStyle: {
										minHeight: 100,
										maxHeight: 100,
										overflowY: 'scroll',
										height: 'auto',
										width: '100%'
									}
								}))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u7B2C\u51E0\u6B21\u5408\u4F5C', className: 'w' },
								getFieldDecorator('cooperations', {
									initialValue: fields.cooperations,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleOnChange('cooperations', e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: "第一次" },
										'\u7B2C\u4E00\u6B21'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "第二次" },
										'\u7B2C\u4E8C\u6B21'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "第三次" },
										'\u7B2C\u4E09\u6B21'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "三次以上" },
										'\u4E09\u6B21\u4EE5\u4E0A'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u662F\u5426\u4E3A\u96C6\u91C7\u9879\u76EE', className: 'w' },
								getFieldDecorator('centralized', {
									initialValue: fields.centralized,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleOnChange('centralized', e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: 1 },
										'\u662F'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: 0 },
										'\u5426'
									)
								))
							),
							fields.centralized === 1 ? _react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u96C6\u91C7\u5355\u4F4D\u540D\u79F0', className: 'w' },
								getFieldDecorator('centralizeCompany', {
									initialValue: fields.centralizeCompany == null ? "" : fields.centralizeCompany,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("centralizeCompany", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							) : null,
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4E0E\u5E7F\u8054\u8FBE\u5173\u7CFB', className: 'w' },
								getFieldDecorator('glodonRelationship', {
									initialValue: fields.glodonRelationship,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleOnChange('glodonRelationship', e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: "非常好" },
										'\u975E\u5E38\u597D'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "一般" },
										'\u4E00\u822C'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "不了解" },
										'\u4E0D\u4E86\u89E3'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "很差" },
										'\u5F88\u5DEE'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4E0E\u667A\u5EFA\u7F8E\u4F4F\u5173\u7CFB', className: 'w' },
								getFieldDecorator('bocspaceRelationship', {
									initialValue: fields.bocspaceRelationship,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleOnChange('bocspaceRelationship', e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: "非常好" },
										'\u975E\u5E38\u597D'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "一般" },
										'\u4E00\u822C'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "不了解" },
										'\u4E0D\u4E86\u89E3'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "很差" },
										'\u5F88\u5DEE'
									)
								))
							)
						)
					)
				),
				_react2.default.createElement(
					_antd.Drawer,
					{
						zIndex: 1078,
						title: '\u9009\u62E9\u5BA2\u6237\u5355\u4F4D\u540D\u79F0',
						width: "80%",
						onClose: this.handleCancel,
						visible: this.state.visible,
						bodyStyle: { paddingBottom: 80 },
						maskClosable: false
					},
					_react2.default.createElement(
						'div',
						{ className: 'clearfix infor-main' },
						_react2.default.createElement(
							'div',
							{ className: 'infor-main-left2' },
							Array.isArray(companyTree) && companyTree.length > 0 && _react2.default.createElement(DirectoryTree, {
								expandAction: 'doubleClick',
								defaultSelectedKeys: ["root"],
								defaultExpandAll: true,
								onSelect: this.onSelect,
								treeData: companyTree,
								height: this.getClientHeight() - 200
							})
						),
						_react2.default.createElement(
							'div',
							{ className: 'infor-main-right2' },
							_react2.default.createElement(
								'div',
								{ className: 'clearfix mt10' },
								_react2.default.createElement(
									InputGroup,
									{ className: 'fl', style: { width: 'auto' } },
									_react2.default.createElement(_antd.Input, { onChange: this.onChange.bind(this, 'text'),
										value: params.text,
										style: { width: 125, marginLeft: 5 },
										placeholder: '\u540D\u79F0' })
								),
								_react2.default.createElement(
									InputGroup,
									{ className: 'fl', style: { width: 'auto' } },
									_react2.default.createElement(
										_antd.Select,
										{ style: { width: 125, marginLeft: 5 }, onChange: this.onChangeType.bind(this, 'level'), allowClear: true, placeholder: '\u7C7B\u578B' },
										orgType.map(function (item) {
											return _react2.default.createElement(
												Option,
												{ value: item.id, key: item.id },
												item.name
											);
										})
									)
								),
								_react2.default.createElement(
									InputGroup,
									{ className: 'fl', style: { width: 'auto' } },
									_react2.default.createElement(_antd.Input, { onChange: this.onChange.bind(this, 'simpleName'),
										value: params.simpleName,
										style: { width: 125, marginLeft: 5 },
										placeholder: '\u7B80\u79F0' })
								),
								_react2.default.createElement(
									_antd.Button,
									{
										style: { marginLeft: 5 },
										className: 'fl',
										type: 'primary',
										onClick: this.handleSearch
									},
									'\u641C\u7D22'
								)
							),
							_react2.default.createElement(_antd.Table, {
								size: 'small',
								bordered: true,
								className: 'm_table mt20',
								columns: columns,
								dataSource: companyPageList,
								rowKey: function rowKey(record) {
									return record.id;
								},
								pagination: false
								//loading={loading}
							}),
							_react2.default.createElement(_antd.Pagination, {
								className: 'mt20 tr',
								current: Number(params.pageIndex),
								pageSize: params.pageSize,
								total: totalCount,
								onShowSizeChange: this.showSizeChange,
								onChange: this.onPageChange,
								showSizeChanger: true,
								showQuickJumper: true,
								showTotal: this.showTotal
							})
						)
					)
				)
			);
		}
	}]);

	return BaseInfoItemTwo;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = BaseInfoItemTwo;

/***/ }),

/***/ 2019:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var BaseInfoTempItemThree = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(BaseInfoTempItemThree, _React$Component);

	function BaseInfoTempItemThree(props) {
		_classCallCheck(this, BaseInfoTempItemThree);

		var _this = _possibleConstructorReturn(this, (BaseInfoTempItemThree.__proto__ || Object.getPrototypeOf(BaseInfoTempItemThree)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressTargetTimeSure", e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.handleBaseTime = function (date, datestring) {
			_this.props.updateData("progressTargetBaseTime", date.valueOf());
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, e.target.value);
		};

		_this.handleUpdate = function (type, e) {
			_this.props.updateHandOver(type, e);
		};

		_this.handleUpdate2 = function (type, e) {

			_this.props.updateHandOverDate(type, e);
		};

		_this.handleBChange = function (type, bfData) {
			// console.log(type, BraftEditor.createEditorState(bfData).toHTML())
			_this.props.updateHandOverBC(type, _braftEditor2.default.createEditorState(bfData).toHTML());
		};

		_this.handleOnChange = function (type, e) {
			console.log(type, e);
			_this.props.updateHandOver(type, e);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0, //defalut 0
			summary: _braftEditor2.default.createEditorState(null),
			overallDescription: _braftEditor2.default.createEditorState(null)
		};
		return _this;
	}

	_createClass(BaseInfoTempItemThree, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.props.onRef && this.props.onRef(this);
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'checkFormValidate',
		value: function checkFormValidate() {
			var _this2 = this;

			this.props.form.validateFields(function (err, values) {
				if (!err) {
					console.log('Received values of form: ', values);
					_this2.props.checkFormRequre(true);
				} else {
					_this2.props.checkFormRequre(false);
				}
			});
		}
	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var sureState = this.state.sureState;
			var _store = this.store,
			    handoverThreeObj = _store.handoverThreeObj,
			    handoverState = _store.handoverState;

			var fields = mobx.toJS(handoverThreeObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 4 },
					md: { span: 4 },
					sm: { span: 4 }
				},
				wrapperCol: {
					xs: { span: 20 },
					md: { span: 20 },
					sm: { span: 20 }
				}
			};
			var controls = ['bold', 'text-color'];
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					handoverState.state3 === 2 ? _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								'table',
								{ className: 'suppliertable', style: { width: "100%" } },
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u4E34\u5EFA\u4EA7\u54C1\u7C7B\u578B'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.productType.join("，")
									),
									_react2.default.createElement(
										'td',
										null,
										'\u4EF7\u683C\u654F\u611F\u5EA6'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.priceSensitivity
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u9884\u7B97\u533A\u95F4\uFF08\u5143\uFF09'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.budget
									),
									_react2.default.createElement(
										'td',
										null,
										'\u7BB1\u4F53\u6570\u91CF'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.boxCount
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5EFA\u7B51\u9762\u79EF(m2)'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.areaRage
									),
									_react2.default.createElement(
										'td',
										null,
										'\u7BA1\u7406\u4EBA\u5458\u6570\u91CF\uFF08\u4EBA\uFF09'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.managerCount
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u671F\u671B\u8BBE\u8BA1\u5B8C\u6210\u65F6\u95F4'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.expectedDesignTime === 0 ? '' : (0, _moment2.default)(fields.expectedDesignTime).format('YYYY-MM-DD')
									),
									_react2.default.createElement(
										'td',
										null,
										'\u52B3\u52A1\u4EBA\u5458\u6570\u91CF\uFF08\u4EBA\uFF09'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.workerCount
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u8BA1\u5212\u8FDB\u573A\u65F6\u95F4'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.plannedArrivalTime === 0 ? '' : (0, _moment2.default)(fields.plannedArrivalTime).format('YYYY-MM-DD')
									),
									_react2.default.createElement(
										'td',
										null,
										'\u57FA\u7840\u662F\u5426\u5177\u5907\u6761\u4EF6'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.basicCondition
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u7528\u7535\u662F\u5426\u5177\u5907\u6761\u4EF6'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.powerCondition === 0 ? '否' : '是'
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5907\u6CE8\uFF08\u6CE8\u610F\u8981\u70B9\uFF09'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										_react2.default.createElement(
											'div',
											{ style: { width: '100%', wordBreak: 'break-all', whiteSpace: 'pre-wrap', padding: "5px" } },
											fields.remark !== "" ? _react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: fields.remark } }) : ""
										)
									)
								)
							)
						)
					) : _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4E34\u5EFA\u4EA7\u54C1\u7C7B\u578B', className: 'w' },
								getFieldDecorator('productType', {
									initialValue: fields.productType == null ? undefined : fields.productType,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Select,
									{ mode: 'multiple', placeholder: '请选择', style: { width: 600 }, onChange: function onChange(e) {
											_this3.handleUpdate2("productType", e);
										} },
									_react2.default.createElement(
										Option,
										{ value: '\u529E\u516C\u697C' },
										'\u529E\u516C\u697C'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u98DF\u5802' },
										'\u98DF\u5802'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u7BA1\u7406\u4EBA\u5458\u5BBF\u820D' },
										'\u7BA1\u7406\u4EBA\u5458\u5BBF\u820D'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u4F1A\u8BAE\u5BA4' },
										'\u4F1A\u8BAE\u5BA4'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u5C55\u5385' },
										'\u5C55\u5385'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u516C\u5171\u536B\u6D74\u95F4' },
										'\u516C\u5171\u536B\u6D74\u95F4'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u52B3\u52A1\u4EBA\u5458\u5BBF\u820D' },
										'\u52B3\u52A1\u4EBA\u5458\u5BBF\u820D'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u52B3\u52A1\u4ED3' },
										'\u52B3\u52A1\u4ED3'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u542B\u5E55\u5899' },
										'\u542B\u5E55\u5899'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u542B\u5C4B\u9876' },
										'\u542B\u5C4B\u9876'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u4FBF\u5229\u5E97' },
										'\u4FBF\u5229\u5E97'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4EF7\u683C\u654F\u611F\u5EA6', className: 'w' },
								getFieldDecorator('priceSensitivity', {
									initialValue: fields.priceSensitivity,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleOnChange('priceSensitivity', e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: "有付费能力，追求品质" },
										'\u6709\u4ED8\u8D39\u80FD\u529B\uFF0C\u8FFD\u6C42\u54C1\u8D28'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "普通标准，价格适中" },
										'\u666E\u901A\u6807\u51C6\uFF0C\u4EF7\u683C\u9002\u4E2D'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "预算有限，满足刚需" },
										'\u9884\u7B97\u6709\u9650\uFF0C\u6EE1\u8DB3\u521A\u9700'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u9884\u7B97\u533A\u95F4\uFF08\u5143\uFF09', className: 'w' },
								getFieldDecorator('budget', {
									initialValue: fields.budget == null ? "" : fields.budget,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("budget", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u7BB1\u4F53\u6570\u91CF', className: 'w' },
								getFieldDecorator('boxCount', {
									initialValue: fields.boxCount == null ? null : fields.boxCount,
									rules: [{
										pattern: /^[0-9]\d*$/,
										required: true,
										message: '只能输入大于等于0的整数'
									}]
								})(_react2.default.createElement(_antd.InputNumber, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("boxCount", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5EFA\u7B51\u9762\u79EF\uFF08m2\uFF09', className: 'w' },
								getFieldDecorator('areaRage', {
									initialValue: fields.areaRage == null ? "" : fields.areaRage,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("areaRage", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u7BA1\u7406\u4EBA\u5458\u6570\u91CF\uFF08\u4EBA\uFF09', className: 'w' },
								getFieldDecorator('managerCount', {
									initialValue: fields.managerCount == null ? "" : fields.managerCount,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("managerCount", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u52B3\u52A1\u4EBA\u5458\u6570\u91CF\uFF08\u4EBA\uFF09', className: 'w' },
								getFieldDecorator('workerCount', {
									initialValue: fields.workerCount == null ? "" : fields.workerCount,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("workerCount", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u671F\u671B\u8BBE\u8BA1\u5B8C\u6210\u65F6\u95F4', className: 'w' },
								getFieldDecorator('expectedDesignTime', {
									initialValue: fields.expectedDesignTime == null || fields.expectedDesignTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.expectedDesignTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.DatePicker, {
									className: 'w',
									style: { width: '600px' },
									placeholder: '\u8BF7\u9009\u62E9',
									format: 'YYYY-MM-DD',
									onChange: function onChange(e) {
										_this3.handleUpdate2("expectedDesignTime", (0, _moment2.default)(e).startOf('day').valueOf());
									}
								})
								// <Input ref={node => (this.input = node)} onBlur={(e)=>{this.handleUpdate("expectedDesignTime", e)}} style={{width:'600px'}}  placeholder="请输入"  />
								)
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u8BA1\u5212\u8FDB\u573A\u65F6\u95F4', className: 'w' },
								getFieldDecorator('plannedArrivalTime', {
									initialValue: fields.plannedArrivalTime == null || fields.plannedArrivalTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.plannedArrivalTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.DatePicker, {
									className: 'w',
									style: { width: '600px' },
									placeholder: '\u8BF7\u9009\u62E9',
									format: 'YYYY-MM-DD',
									onChange: function onChange(e) {
										_this3.handleUpdate2("plannedArrivalTime", (0, _moment2.default)(e).startOf('day').valueOf());
									}
								})
								// <Input ref={node => (this.input = node)} onBlur={(e)=>{this.handleUpdate("plannedArrivalTime", e)}} style={{width:'600px'}}  placeholder="请输入"  />
								)
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u57FA\u7840\u662F\u5426\u5177\u5907\u6761\u4EF6', className: 'w' },
								getFieldDecorator('basicCondition', {
									initialValue: fields.basicCondition,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleUpdate("basicCondition", e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: "已具备" },
										'\u5DF2\u5177\u5907'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "进场前可具备" },
										'\u8FDB\u573A\u524D\u53EF\u5177\u5907'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "不确定" },
										'\u4E0D\u786E\u5B9A'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u7528\u7535\u662F\u5426\u5177\u5907\u6761\u4EF6', className: 'w' },
								getFieldDecorator('powerCondition', {
									initialValue: fields.powerCondition,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Radio.Group,
									{ onChange: function onChange(e) {
											_this3.handleUpdate("powerCondition", e);
										} },
									_react2.default.createElement(
										_antd.Radio,
										{ value: "已具备" },
										'\u5DF2\u5177\u5907'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "进场前可具备" },
										'\u8FDB\u573A\u524D\u53EF\u5177\u5907'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "不确定" },
										'\u4E0D\u786E\u5B9A'
									),
									_react2.default.createElement(
										_antd.Radio,
										{ value: "不具备" },
										'\u4E0D\u5177\u5907'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5907\u6CE8\uFF08\u6CE8\u610F\u8981\u70B9\uFF09', className: 'w' },
								getFieldDecorator('remark', {
									initialValue: _braftEditor2.default.createEditorState(fields.remark),
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_braftEditor2.default, {
									className: 'my-editor',
									onBlur: this.handleBChange.bind(this, 'remark'),
									controls: controls,
									contentStyle: {
										minHeight: 100,
										maxHeight: 100,
										overflowY: 'scroll',
										height: 'auto',
										width: '100%'
									}
								}))
							)
						)
					)
				)
			);
		}
	}]);

	return BaseInfoTempItemThree;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = BaseInfoTempItemThree;

/***/ }),

/***/ 2020:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

var _lodash = __webpack_require__(231);

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ContractItemTwo = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(""), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ContractItemTwo, _React$Component);

	function ContractItemTwo(props) {
		_classCallCheck(this, ContractItemTwo);

		var _this = _possibleConstructorReturn(this, (ContractItemTwo.__proto__ || Object.getPrototypeOf(ContractItemTwo)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressTargetTimeSure", e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.handleDateChange = function (date, type) {
			_this.props.updateHandOver2(type, date);
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, e.target.value);
		};

		_this.handleUpdate = function (type, e) {
			_this.props.updateHandOver(type, e);
		};

		_this.handleUpdate2 = function (type, e) {
			_this.props.updateHandOver2(type, e);
		};

		_this.handleBChange = function (type, editorState) {
			// console.log(editorState.toHTML())
			if (type === 'summary') {
				_this.setState({ summary: editorState });
			}
			if (type === 'overallDescription') {
				_this.setState({ overallDescription: editorState });
			}
			if (type === 'assistance') {
				_this.setState({ assistance: editorState });
			}
		};

		_this.convertStrToArr = function (str) {
			var result = [];
			var newStr = _lodash2.default.trim(str, '[');
			newStr = _lodash2.default.trim(newStr, ']');
			result = Array.isArray(newStr.split(",")) ? newStr.split(",") : [];
			result = result.map(function (item) {
				return _lodash2.default.trim(item);
			});
			return result;
		};

		_this.handleChangeSelect = function (type, value) {
			var val = Array.isArray(value) && value.length == 0 ? "" : value.toString();
			_this.props.updateHandOver2(type, val);
		};

		_this.changeBoxtype = function (value) {
			var obj = { 1: 19800, 2: 15600, 3: 13300 };
			_this.props.updateHandOver3({
				"boxType": value,
				"boxMoney": obj[value]
			});
			_this.props.form.setFieldsValue({
				"boxMoney": obj[value]
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0, //defalut 0
			summary: _braftEditor2.default.createEditorState(null),
			overallDescription: _braftEditor2.default.createEditorState(null)
		};
		return _this;
	}

	_createClass(ContractItemTwo, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.props.onRef && this.props.onRef(this);
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'checkFormValidate',
		value: function checkFormValidate() {
			var _this2 = this;

			this.props.form.validateFields(function (err, values) {
				if (!err) {
					console.log('Received values of form: ', values);
					_this2.props.checkFormRequre(true);
				} else {
					_this2.props.checkFormRequre(false);
				}
			});
		}

		// 产品类型

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var sureState = this.state.sureState;
			var _store = this.store,
			    handoverTwoObj = _store.handoverTwoObj,
			    handoverState = _store.handoverState;

			var fields = mobx.toJS(handoverTwoObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 4 },
					md: { span: 4 },
					sm: { span: 4 }
				},
				wrapperCol: {
					xs: { span: 20 },
					md: { span: 20 },
					sm: { span: 20 }
				}
			};
			var controls = ['bold', 'text-color'];
			var boxTypeData = [{ name: '高档位', value: 1 }, { name: '中档位', value: 2 }, { name: '普通箱', value: 3 }];
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					handoverState.state2 === 2 ? _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								'table',
								{ className: 'suppliertable', style: { width: "100%" } },
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u9879\u76EE\u4EA4\u4ED8\u8303\u56F4'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.deliverRange
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u9879\u76EE\u7528\u9014'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										this.convertStrToArr(fields.purpose).join("、")
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u4ED8\u6B3E\u8282\u70B9'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.deliverNode
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5DE5\u671F\u8981\u6C42'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										(0, _moment2.default)(fields.requirementBeginTime).format("YYYY-MM-DD"),
										' \u81F3 ',
										(0, _moment2.default)(fields.requirementEndTime).format("YYYY-MM-DD")
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5408\u540C\u91D1\u989D'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.contractMoney,
										'\u5143'
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u4EA7\u54C1\u7C7B\u578B'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.boxType != "" && fields.boxType != null ? boxTypeData.filter(function (item) {
											return item.value == fields.boxType;
										})[0].name : ""
									),
									_react2.default.createElement(
										'td',
										null,
										'\u4EA7\u54C1\u5355\u4EF7'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.boxMoney
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5468\u8F6C\u6B21\u6570(\u6B21)'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.turnoverCount
									)
								)
							)
						)
					) : _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u9879\u76EE\u4EA4\u4ED8\u8303\u56F4', className: 'w' },
								getFieldDecorator('background', {
									initialValue: fields.deliverRange == null ? "" : fields.deliverRange,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("deliverRange", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u9879\u76EE\u7528\u9014', className: 'w' },
								getFieldDecorator('purpose', {
									initialValue: fields.purpose === null ? undefined : this.convertStrToArr(fields.purpose),
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Select,
									{ mode: 'multiple',
										style: { width: '600px' },
										value: this.convertStrToArr(fields.purpose),
										placeholder: '请选择',
										onChange: this.handleChangeSelect.bind(this, "purpose") },
									_react2.default.createElement(
										Option,
										{ value: '\u529E\u516C' },
										'\u529E\u516C'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u4F4F\u5BBF' },
										'\u4F4F\u5BBF'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u4F1A\u8BAE' },
										'\u4F1A\u8BAE'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u63A5\u5F85' },
										'\u63A5\u5F85'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u5C55\u793A' },
										'\u5C55\u793A'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u4F11\u95F2' },
										'\u4F11\u95F2'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u96F6\u552E' },
										'\u96F6\u552E'
									),
									_react2.default.createElement(
										Option,
										{ value: '\u4FBF\u6C11' },
										'\u4FBF\u6C11'
									)
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4ED8\u6B3E\u8282\u70B9', className: 'w' },
								getFieldDecorator('deliverNode', {
									initialValue: fields.deliverNode,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input.TextArea, { onBlur: function onBlur(e) {
										_this3.handleUpdate("deliverNode", e);
									}, rows: 6, placeholder: '\u8BF7\u8F93\u5165', style: { width: '100%', minWidth: '800px' } }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5DE5\u671F\u8981\u6C42', className: 'w' },
								_react2.default.createElement(
									'div',
									{ style: { display: 'flex', alignItems: 'center' } },
									getFieldDecorator('requirementBeginTime', {
										initialValue: fields.requirementBeginTime == null || fields.requirementBeginTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.requirementBeginTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.DatePicker, {
										onChange: function onChange(e) {
											_this3.handleDateChange(e.valueOf(), 'requirementBeginTime');
										},
										style: { width: "288px" },
										placeholder: '\u5F00\u59CB\u65F6\u95F4',
										format: 'YYYY-MM-DD'
									})),
									_react2.default.createElement(
										'div',
										{ style: { margin: '0 9px' } },
										'-'
									),
									getFieldDecorator('requirementEndTime', {
										initialValue: fields.requirementEndTime == null || fields.requirementEndTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.requirementEndTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.DatePicker, {
										onChange: function onChange(e) {
											_this3.handleDateChange(e.valueOf(), 'requirementEndTime');
										},
										style: { width: "288px" },
										placeholder: '\u7ED3\u675F\u65F6\u95F4',
										format: 'YYYY-MM-DD'
									}))
								)
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09', className: 'w' },
								getFieldDecorator('contractMoney', {
									initialValue: fields.contractMoney == null ? null : fields.contractMoney,
									rules: [{ required: true, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { style: { width: '600px' }, ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate2("contractMoney", e.target === null ? null : parseInt(e.target.value));
									}, placeholder: '\u8BF7\u8F93\u5165\u91D1\u989D' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4EA7\u54C1\u7C7B\u578B', className: 'w' },
								getFieldDecorator('boxType', {
									initialValue: fields.boxType || "",
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(
									_antd.Select,
									{ onChange: this.changeBoxtype,
										style: { width: '600px' }
									},
									boxTypeData.map(function (item, index) {
										return _react2.default.createElement(
											Option,
											{ key: 'boxTypeData' + index, value: item.value },
											item.name
										);
									})
								))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '产品单价(元)', className: 'w' },
								getFieldDecorator('boxMoney', {
									initialValue: fields.boxMoney || "",
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.InputNumber, { placeholder: '\u8BF7\u8F93\u5165', style: { width: '600px' }, disabled: true }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '周转次数(次)', className: 'w' },
								getFieldDecorator('turnoverCount', {
									initialValue: fields.turnoverCount,
									rules: [{
										pattern: /^[0-9]\d*$/,
										required: false,
										message: '只能输入大于等于0的整数'
									}]
								})(_react2.default.createElement(_antd.InputNumber, { placeholder: '\u8BF7\u8F93\u5165', style: { width: '600px' }, ref: function ref(node) {
										return _this3.input = node;
									}, onBlur: function onBlur(e) {
										_this3.handleUpdate("turnoverCount", e);
									} }))
							)
						)
					)
				)
			);
		}
	}]);

	return ContractItemTwo;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = ContractItemTwo;

/***/ }),

/***/ 2021:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 采购合同组件
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _download = __webpack_require__(68);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Index = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Index, _React$Component);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this.handlePreview = function () {
			var data = _this.props.data;
			var fileUrl = data.fileUrl,
			    name = data.name;

			if (fileUrl == "" || fileUrl == null) return;
			_this.store.getDocumentUrl({ url: fileUrl }).then(function (res) {
				if (res) {
					_this.setState({
						previewImage: res,
						previewVisible: true,
						name: name
					});
				}
			});
		};

		_this.downloadUrl = function () {
			var data = _this.props.data;
			var fileUrl = data.fileUrl,
			    name = data.name;

			if (fileUrl == "" || fileUrl == null) return;
			_this.info();
			(0, _download.downloadFile)(fileUrl, name);
		};

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.info = function () {
			_antd.Modal.info({
				title: '文件正在下载中，请耐心等待',
				onOk: function onOk() {}
			});
		};

		_this.store = _this.props.store;
		_this.state = {
			previewVisible: false,
			previewImage: ''
		};
		return _this;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}

		// 预览


		// 下载

	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    name = _state.name;
			var data = this.props.data;


			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement('img', { src: './images/ppt.png', alt: '', width: '85px', style: { verticalAlign: "top" } }),
				_react2.default.createElement(
					'p',
					{ style: { display: "inline-block", margin: "15px 0 0 10px" } },
					_react2.default.createElement(
						'div',
						null,
						data && data.name,
						_react2.default.createElement(
							_antd.Button,
							{ type: 'link', onClick: this.handlePreview },
							'\u9884\u89C8'
						),
						_react2.default.createElement(
							_antd.Button,
							{ type: 'link', onClick: this.downloadUrl },
							'\u4E0B\u8F7D'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt15' },
						data && data.createTime !== 0 && data.createTime !== null && data.createTime !== undefined ? (0, _moment2.default)(data.createTime).format('YYYY-MM-DD HH:mm') : '暂无',
						'\xA0\xA0\u751F\u6210'
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: name,
						width: '65%',
						style: { minHeight: '500px', minWidth: '800px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					_react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '500px' },
						frameBorder: '1' })
				)
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class;

exports.default = Index;

/***/ }),

/***/ 2022:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _numeral = __webpack_require__(1901);

var _numeral2 = _interopRequireDefault(_numeral);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _lodash = __webpack_require__(231);

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * Table组件 合同清单组件
                                                                                                                                                                                                                             * */


var Search = _antd.Input.Search;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
    var form = _ref.form,
        index = _ref.index,
        props = _objectWithoutProperties(_ref, ['form', 'index']);

    return _react2.default.createElement(
        EditableContext.Provider,
        { value: form },
        _react2.default.createElement('tr', props)
    );
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
    _inherits(EditableCell, _React$Component);

    function EditableCell() {
        var _ref2;

        var _temp, _this, _ret;

        _classCallCheck(this, EditableCell);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {
            editing: false
        }, _this.toggleEdit = function () {
            var editing = !_this.state.editing;
            _this.setState({ editing: editing }, function () {
                if (editing) {
                    _this.input.focus();
                }
            });
        }, _this.save = function (e) {
            var _this$props = _this.props,
                record = _this$props.record,
                handleSave = _this$props.handleSave;

            _this.form.validateFields(function (error, values) {
                if (error && error[e.currentTarget.id]) {
                    return;
                }
                _this.toggleEdit();
                var dataIndex = e.currentTarget.id;
                var obj = {};
                if (dataIndex == 'count') {
                    var count = values["count"] == null || values["count"] == undefined ? 0 : values["count"];
                    var prize = record["prize"] == null || record["prize"] == undefined ? 0 : record["prize"];
                    obj.total = count * prize;
                }
                if (dataIndex == 'prize') {
                    var _count = record["count"] == null || record["count"] == undefined ? 0 : record["count"];
                    var _prize = values["prize"] == null || values["prize"] == undefined ? 0 : values["prize"];
                    obj.total = _count * _prize;
                }
                handleSave(_extends({}, record, values, obj));
            });
        }, _this.renderCell = function (form) {
            _this.form = form;
            var _this$props2 = _this.props,
                children = _this$props2.children,
                dataIndex = _this$props2.dataIndex,
                record = _this$props2.record,
                title = _this$props2.title;
            var editing = _this.state.editing;


            if (dataIndex == 'count' || dataIndex == 'prize' || dataIndex == 'total') {
                // 数字金额
                console.log(record, dataIndex, record[dataIndex], 'record[dataIndex]');
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(_antd.InputNumber, { ref: function ref(node) {
                            return _this.input = node;
                        }, onPressEnter: _this.save, onBlur: _this.save }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { minHeight: '31px' },
                        onClick: _this.toggleEdit
                    },
                    children
                );
            } else {
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
                            return _this.input = node;
                        }, onPressEnter: _this.save, onBlur: _this.save }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { minHeight: '31px' },
                        onClick: _this.toggleEdit
                    },
                    children
                );
            }
        }, _temp), _possibleConstructorReturn(_this, _ret);
    }

    _createClass(EditableCell, [{
        key: 'render',
        value: function render() {
            var _props = this.props,
                editable = _props.editable,
                dataIndex = _props.dataIndex,
                title = _props.title,
                record = _props.record,
                index = _props.index,
                handleSave = _props.handleSave,
                children = _props.children,
                restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

            var isFlag = record != undefined && (record.bocdesignId != null || record.bocdesignId != undefined);
            return _react2.default.createElement(
                'td',
                restProps,
                editable && !isFlag ? _react2.default.createElement(
                    EditableContext.Consumer,
                    null,
                    this.renderCell
                ) : children
            );
        }
    }]);

    return EditableCell;
}(_react2.default.Component);

var EditableTableInventory = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
    _inherits(EditableTableInventory, _React$Component2);

    function EditableTableInventory(props) {
        _classCallCheck(this, EditableTableInventory);

        var _this2 = _possibleConstructorReturn(this, (EditableTableInventory.__proto__ || Object.getPrototypeOf(EditableTableInventory)).call(this, props));

        _this2.initKeys = function () {
            var bocdesignIds = JSON.parse(JSON.stringify(_this2.state.dataSource));
            var array = [];
            bocdesignIds.forEach(function (item) {
                if (item.bocdesignId != undefined && item.bocdesignId != null) {
                    array.push(item.bocdesignId);
                }
            });
            // 去重
            var array2 = Array.from(new Set(array));
            _this2.setState({
                checkedKeys: array2
            });
        };

        _this2.handleDelete = function (key) {
            var dataSource = [].concat(_toConsumableArray(_this2.state.dataSource));
            var data = dataSource.filter(function (item) {
                return item.key !== key;
            }).map(function (v, vindex) {
                return Object.assign(v, { key: vindex + 1 });
            });
            _this2.setState({
                dataSource: data,
                count: data.length
            });
            _this2.props.updateState(data);
            _antd.message.success("删除成功");
        };

        _this2.handleAdd = function () {
            var _this2$state = _this2.state,
                count = _this2$state.count,
                dataSource = _this2$state.dataSource;

            var newData = {
                key: count + 1,
                id: "",
                type: 1,
                taskId: "",
                supplierId: "",
                supplierTwoId: "",
                position: "",
                positionId: "",
                categoryType: "",
                categoryTypeId: "",
                productDetail: "",
                productDetailId: "",
                units: "",
                count: null,
                prize: null,
                total: null,
                remarks: "",
                specification: "",
                rate: "13%"
            };
            _this2.setState({
                dataSource: [].concat(_toConsumableArray(dataSource), [newData]),
                count: count + 1
            });
            _this2.props.updateState([].concat(_toConsumableArray(dataSource), [newData]));
        };

        _this2.handleSave = function (row) {
            var newData = [].concat(_toConsumableArray(_this2.state.dataSource));
            var index = newData.findIndex(function (item) {
                return row.key === item.key;
            });
            var item = newData[index];
            newData.splice(index, 1, _extends({}, item, row));
            _this2.setState({ dataSource: newData });
            _this2.props.updateState(newData);
        };

        _this2.handleOk = function (e) {
            var checkedKeys = JSON.parse(JSON.stringify(_this2.state.checkedKeys));
            if (checkedKeys.length == 0) {
                _antd.message.warn("请先选中任意一项");
                return false;
            }
            var params = {
                projectId: _this2.store.projectId,
                ids: checkedKeys
            };
            _this2.store.syncBocdesignByIds(params).then(function (res) {
                if (res.code == 1) {
                    _this2.props.updateState(res.supplierContractList == null ? [] : res.supplierContractList);
                    _this2.setState({
                        visible: false,
                        checkedKeys: [],
                        searchVal: "",
                        pageIndex: 1
                    });
                }
            });
        };

        _this2.handleCancel = function (e) {
            _this2.setState({
                visible: false,
                checkedKeys: [],
                searchVal: "",
                pageIndex: 1
            });
        };

        _this2.showModal = function () {
            var params = {
                name: "",
                userId: "",
                pageIndex: 1,
                pageSize: 10
            };
            _this2.store.getProjectList(params).then(function (res) {
                if (res) {
                    _this2.setState({
                        initLoading: false,
                        visible: true,
                        projectList: res.body,
                        totalCount: res.totalCount,
                        pageIndex: 1
                    });
                }
            });
        };

        _this2.onChange = function (e) {
            var _e$target = e.target,
                value = _e$target.value,
                checked = _e$target.checked;

            if (checked == true) {
                // 选中
                var checkedKeys = JSON.parse(JSON.stringify(_this2.state.checkedKeys));
                checkedKeys.push(value);
                _this2.setState({
                    checkedKeys: checkedKeys
                });
            } else {
                // 取消
                var _checkedKeys = JSON.parse(JSON.stringify(_this2.state.checkedKeys));
                _this2.setState({
                    checkedKeys: _checkedKeys.filter(function (item) {
                        return item != value;
                    })
                });
            }
        };

        _this2.onLoadMore = function () {
            _this2.setState({
                loading: true,
                pageIndex: _this2.state.pageIndex + 1
            }, function () {
                var params = {
                    name: _this2.state.searchVal,
                    userId: "",
                    pageIndex: _this2.state.pageIndex,
                    pageSize: 10
                };
                _this2.store.getProjectList(params).then(function (res) {
                    if (res) {
                        _this2.setState({
                            loading: false,
                            projectList: _this2.state.projectList.concat(res.body)
                        });
                    }
                });
            });
        };

        _this2.onSearch = function (e) {
            var val = _lodash2.default.trim(e.target.value);
            _this2.setState({
                searchVal: val,
                pageIndex: 1
            }, function () {
                var params = {
                    name: val,
                    userId: "",
                    pageIndex: 1,
                    pageSize: 10
                };
                _this2.store.getProjectList(params).then(function (res) {
                    if (res) {
                        _this2.setState({
                            projectList: Array.isArray(res.body) ? res.body : []
                        });
                    }
                });
            });
        };

        _this2.store = _this2.props.store;
        _this2.state = {
            dataSource: [],
            count: 0,
            visible: false,
            projectList: [],
            initLoading: true,
            loading: false,
            pageIndex: 1,
            totalCount: 0,
            checkedKeys: [], // 选中的keys
            searchVal: ""
        };
        return _this2;
    }

    _createClass(EditableTableInventory, [{
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps, nextContext) {
            var _this3 = this;

            if (JSON.stringify(nextProps.dataSource) != JSON.stringify(this.props.dataSource)) {
                this.setState({
                    dataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource,
                    count: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length
                }, function () {
                    // 更新数据 keys
                    _this3.initKeys();
                });
            }
        }
    }, {
        key: 'componentDidMount',
        value: function componentDidMount() {
            var _this4 = this;

            if (this.props.dataSource) {
                this.setState({
                    dataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource,
                    count: this.props.dataSource == null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length
                }, function () {
                    // 更新数据 keys
                    _this4.initKeys();
                });
            }
        }

        // 加载更多

    }, {
        key: 'render',
        value: function render() {
            var _this5 = this;

            var _state = this.state,
                dataSource = _state.dataSource,
                visible = _state.visible,
                projectList = _state.projectList,
                initLoading = _state.initLoading,
                loading = _state.loading,
                totalCount = _state.totalCount,
                checkedKeys = _state.checkedKeys,
                searchVal = _state.searchVal;

            var columnsOld = [{
                title: '操作',
                dataIndex: 'operation',
                align: "center",
                width: "70px",
                className: !this.props.disabled ? "" : "hidden",
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
                                return _this5.handleDelete(record.key);
                            } },
                        _react2.default.createElement(_antd.Icon, {
                            style: {
                                color: '#F17E7E',
                                fontSize: '18px'
                            },
                            type: 'minus-circle' })
                    );
                }
            }, {
                title: '序号',
                dataIndex: 'key',
                width: '70px',
                align: "center"
            }, {
                title: '部位',
                dataIndex: 'position',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }, {
                title: '产品类别',
                dataIndex: 'categoryType',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }, {
                title: '产品明细',
                dataIndex: 'productDetail',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }, {
                title: '规格尺寸',
                dataIndex: 'specification',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }, {
                title: '单位',
                dataIndex: 'units',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }, {
                title: '数量',
                dataIndex: 'count',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }, {
                title: '含税单价',
                dataIndex: 'prize',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%",
                render: function render(text, record) {
                    return text == null || text == 0 ? 0 : (0, _numeral2.default)(text).format('0,0');
                }
            }, {
                title: '合计金额',
                dataIndex: 'total',
                align: "center",
                width: "10%",
                render: function render(text, record) {
                    return text == null || text == 0 ? 0 : (0, _numeral2.default)(text).format('0,0');
                }
            }, {
                title: '税率',
                dataIndex: 'rate',
                align: "center",
                width: '50px'
            }, {
                title: '备注',
                dataIndex: 'remarks',
                editable: !this.props.disabled ? true : false,
                align: "center",
                width: "10%"
            }];
            var components = {
                body: {
                    row: EditableFormRow,
                    cell: EditableCell
                }
            };
            var columns = columnsOld.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this5.handleSave
                        };
                    }
                });
            });
            var disabled = this.props.disabled;

            var loadMore = !initLoading && !loading ? _react2.default.createElement(
                'div',
                {
                    style: {
                        textAlign: 'center',
                        marginTop: 12,
                        height: 32,
                        lineHeight: '32px'
                    }
                },
                _react2.default.createElement(
                    _antd.Button,
                    { onClick: this.onLoadMore },
                    '\u52A0\u8F7D\u66F4\u591A'
                )
            ) : _react2.default.createElement(
                'div',
                {
                    style: {
                        textAlign: 'center',
                        marginTop: 12
                    }
                },
                _react2.default.createElement(_antd.Spin, { tip: '\u6B63\u5728\u52A0\u8F7D,\u8BF7\u7A0D\u7B49...' })
            );
            var arrquantitynew = dataSource.map(function (itemnew) {
                return itemnew.total == null ? 0 : itemnew.total; //单个
            });
            var total = dataSource.length > 0 ? arrquantitynew.reduce(function (n, m) {
                return n + m;
            }) : 0;
            return _react2.default.createElement(
                'div',
                null,
                disabled ? null : _react2.default.createElement(
                    _antd.Button,
                    {
                        onClick: this.showModal,
                        ghost: true,
                        type: 'primary',
                        icon: 'plus-circle',
                        style: { paddingLeft: "8px", paddingRight: "8px", marginTop: "10px" }
                    },
                    '\u540C\u6B65\u62A5\u4EF7\u6E05\u5355'
                ),
                _react2.default.createElement(_antd.Table, {
                    components: components,
                    rowClassName: function rowClassName() {
                        return 'editable-row';
                    },
                    className: 'expand_table bpm_table mt10',
                    bordered: true,
                    dataSource: dataSource,
                    columns: columns,
                    pagination: false,
                    footer: function footer() {
                        return '合计: ' + (0, _numeral2.default)(total).format('0,0');
                    }
                }),
                disabled ? null : _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd, style: { margin: '16px 0', color: '#4BA4BE', fontSize: '18px' },
                    type: 'plus-circle' }),
                _react2.default.createElement(
                    _antd.Modal,
                    {
                        title: '\u9009\u62E9\u667A\u9009\u4E2D\u7684\u9879\u76EE\u65B9\u6848\u62A5\u4EF7\u6E05\u5355',
                        visible: visible,
                        onOk: this.handleOk,
                        onCancel: this.handleCancel
                    },
                    _react2.default.createElement(Search, { placeholder: '\u8F93\u5165\u65B9\u6848\u540D\u79F0', onChange: this.onSearch, style: { width: 200 }, value: searchVal }),
                    _react2.default.createElement(
                        _antd.Row,
                        { style: { marginTop: "15px", minHeight: "100px", maxHeight: "400px", overflowY: "auto" } },
                        projectList.map(function (item, index) {
                            return _react2.default.createElement(
                                _antd.Col,
                                { span: 12, key: item.id, className: 'tc' },
                                _react2.default.createElement(
                                    _antd.Checkbox,
                                    { onChange: _this5.onChange, value: item.id,
                                        checked: checkedKeys.includes(item.id) },
                                    item.name
                                ),
                                _react2.default.createElement(
                                    'p',
                                    { style: {
                                            fontSize: "12px",
                                            color: "#AAA",
                                            marginTop: "2px"
                                        } },
                                    item.createTime == null || item.createTime == 0 ? "" : (0, _moment2.default)(item.createTime).format("YYYY-MM-DD")
                                )
                            );
                        })
                    ),
                    totalCount == projectList.length || projectList.length == 0 ? null : loadMore
                )
            );
        }
    }]);

    return EditableTableInventory;
}(_react2.default.Component)) || _class2;

exports.default = EditableTableInventory;

/***/ }),

/***/ 2023:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _rcTweenOne = __webpack_require__(349);

var _api = __webpack_require__(30);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 收件人
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * */


var Option = _antd.Select.Option;

var EditableTagEmail2 = function (_React$Component) {
	_inherits(EditableTagEmail2, _React$Component);

	function EditableTagEmail2() {
		var _ref;

		var _temp, _this, _ret;

		_classCallCheck(this, EditableTagEmail2);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = EditableTagEmail2.__proto__ || Object.getPrototypeOf(EditableTagEmail2)).call.apply(_ref, [this].concat(args))), _this), _this.state = {
			inputVisible: false,
			inputValue: [], // 新增默认值
			emails: [],
			tags: []
		}, _this.init = function (value) {
			(0, _api.requestPost)('getSendUserEmails', _config2.default.journal.getSendUserEmails, _journal2.default.journal.getSendUserEmails, {
				text: value,
				type: 0
			}).then(function (res) {
				_this.setState({
					emails: res
				});
			});
		}, _this.handleClose = function (removedTag) {
			var tags = _this.state.tags.filter(function (tag) {
				return tag !== removedTag;
			});
			_this.setState({ tags: tags }, function () {
				_this.props.updateState(tags);
			});
		}, _this.showInput = function () {
			_this.setState({ inputVisible: true }, function () {
				return _this.input.focus();
			});
		}, _this.saveInputRef = function (input) {
			return _this.input = input;
		}, _this.forMap = function (tag) {
			var isLongTag = tag.length > 20;
			var tagElem = _react2.default.createElement(
				_antd.Tag,
				{
					key: tag,
					closable: true,
					onClose: function onClose(e) {
						e.preventDefault();
						_this.handleClose(tag);
					},
					style: { marginBottom: '3px' }
				},
				isLongTag ? tag.slice(0, 20) + '...' : tag
			);
			return isLongTag ? _react2.default.createElement(
				'span',
				{ title: tag, style: { display: 'inline-block' } },
				tagElem
			) : tagElem;
		}, _this.handleChange = function (value, e) {
			var val = e.map(function (item) {
				return item.key;
			});
			_this.setState({ inputValue: val });
		}, _this.handleSelectConfirm = function () {
			var inputValue = _this.state.inputValue;
			var data = _this.props.data;

			if (inputValue !== null && (typeof inputValue === 'undefined' ? 'undefined' : _typeof(inputValue)) == "object") {
				data = [].concat(_toConsumableArray(data), _toConsumableArray(inputValue));
				_this.setState({
					inputVisible: false,
					inputValue: []
				}, function () {
					_this.props.updateState(data);
				});
			}
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}

	_createClass(EditableTagEmail2, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			this.setState({
				tags: nextProps.data
			});
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			// 收件人数据
			this.init("");
		}
	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    inputVisible = _state.inputVisible,
			    inputValue = _state.inputValue,
			    emails = _state.emails,
			    tags = _state.tags;
			var title = this.props.title;

			var filteredOptions = emails.filter(function (o) {
				return !tags.includes(o);
			});
			var tagChild = tags.map(this.forMap);
			return _react2.default.createElement(
				'div',
				{ style: { display: "inline-block" } },
				_react2.default.createElement(
					'div',
					{ style: { display: "inline-block", marginBottom: '3px' } },
					_react2.default.createElement(
						_rcTweenOne.TweenOneGroup,
						{
							enter: {
								scale: 0.8,
								opacity: 0,
								type: 'from',
								duration: 100,
								onComplete: function onComplete(e) {
									e.target.style = '';
								}
							},
							leave: { opacity: 0, width: 0, scale: 0, duration: 200 },
							appear: false
						},
						tagChild
					)
				),
				inputVisible && _react2.default.createElement(
					_antd.Select,
					{ mode: 'tags',
						size: 'small',
						defaultOpen: true,
						value: inputValue,
						style: { width: '220px' },
						ref: this.saveInputRef,
						placeholder: '\u8BF7\u8F93\u5165',
						onBlur: this.handleSelectConfirm,
						onPressEnter: this.handleChange,
						onChange: this.handleChange,
						className: 'tagEmail'
					},
					filteredOptions.map(function (item) {
						return _react2.default.createElement(
							Option,
							{ key: item, title: item },
							item
						);
					})
				),
				!inputVisible && _react2.default.createElement(
					_antd.Tag,
					{ onClick: this.showInput, style: { background: '#fff', borderStyle: 'dashed' } },
					_react2.default.createElement(_antd.Icon, { type: 'plus' }),
					' ',
					title
				)
			);
		}
	}]);

	return EditableTagEmail2;
}(_react2.default.Component);

exports.default = EditableTagEmail2;

/***/ }),

/***/ 2024:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *交付管理-交接项目信息
                  *qiufh@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _OneItem = __webpack_require__(2027);

var _OneItem2 = _interopRequireDefault(_OneItem);

var _TwoItem = __webpack_require__(2032);

var _TwoItem2 = _interopRequireDefault(_TwoItem);

var _ThreeItem = __webpack_require__(2031);

var _ThreeItem2 = _interopRequireDefault(_ThreeItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var HandOver = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(HandOver, _React$Component);

	function HandOver(props) {
		_classCallCheck(this, HandOver);

		var _this = _possibleConstructorReturn(this, (HandOver.__proto__ || Object.getPrototypeOf(HandOver)).call(this, props));

		_this.getTaskIdByType = function (projectDetail, type) {
			var taskId = null;
			var stages = projectDetail.stages;

			if (stages.length > 0) {
				taskId = stages[0]['tasks'].filter(function (item) {
					return item.taskType === type;
				})[0]['id'];
			}
			return taskId;
		};

		_this.updateTask = function (id) {
			_this.store.getTaskById({ 'id': id }).then(function (res) {
				if (res) {
					_this.store.taskDetail = res;
				}
			});
		};

		_this.getDailyListPage = function () {
			var projectDetail = _this.store.projectDetail;

			_this.store.dailyParmas.projectId = mobx.toJS(projectDetail).id;
			_this.setState({ projectId: mobx.toJS(projectDetail).id });
			_this.store.getDailyListPage().then(function (res) {
				_this.store.dailyList = Object.assign([], res.body);
				_this.store.dailyParmas.pageIndex = res.pageIndex;
				_this.store.dailyParmas.pageSize = res.pageSize;
				_this.store.dailyParmas.totalCount = res.totalCount;
				if (res.body.length > 0) {
					_this.handleSelectedDaily(res.body[0], 0);
				}
			});
		};

		_this.getHandoverState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getHandoverState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this.store.handoverState = res;
				}
			});
		};

		_this.getProgressStateInfo = function (state) {
			var info = "";
			if (state === 0) {
				info = "正常";
			}
			if (state === 1) {
				info = "提前";
			}
			if (state === 2) {
				info = "延迟";
			}
			return info;
		};

		_this.handleSelectedDaily = function (item, index) {
			_this.setState({ currentItem: index });
			_this.store.getDailyById({ "id": item.id }).then(function (res) {
				_this.store.dailyDetail = Object.assign({}, res);
			});
		};

		_this.addNewLog = function () {
			_this.store.dailyPageState = 1;
		};

		_this.getTodayContentInfo = function (item) {
			if (item.contents.length >= 2) {

				return '' + item.contents[0]['position'] + item.contents[0]['productCategory'] + '\u5B8C\u6210' + item.contents[0]['actualProgress'] + '%\uFF0C' + item.contents[1]['position'] + item.contents[1]['productCategory'] + '\u5B8C\u6210' + item.contents[1]['actualProgress'] + '%';
			}
			if (item.contents.length > 0) {
				return '' + item.contents[0]['position'] + item.contents[0]['productCategory'] + '\u5B8C\u6210' + item.contents[0]['actualProgress'] + '%';
			}
		};

		_this.switchSteps = function (step) {
			_this.setState({ currentStep: step });
		};

		_this.getBuildTeamStateInfo = function (state) {
			if (state === 0) {
				return "待启动";
			}
			if (state === 1) {
				return "进行中";
			}
			if (state === 2) {
				return "已完成";
			}
		};

		_this.getBuildTeamStateIcon = function (state) {
			if (state === 0) {
				return "./images/delivery/u1055.png";
			}
			if (state === 1) {
				return "./images/delivery/u1053.png";
			}
			if (state === 2) {
				return "./images/delivery/u1232.png";
			}
		};

		_this.overCurrentStageTask = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.overHandoverStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.handoverState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.reStartHandover = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartHandover({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.handoverState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.getProjectDetail = function () {
			var search = _this.props.location.search;
			var projectId = _url2.default.parse(search, true).query.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			currentItem: 0,
			projectId: null,
			currentStep: 1,
			taskId: null
		};
		return _this;
	}

	_createClass(HandOver, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.updateTask(this.getTaskIdByType(projectDetail, "handover"));
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getHandoverState();
			this.store.getSts();
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var currentStep = this.state.currentStep;
			var handoverState = this.store.handoverState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal' },
				_react2.default.createElement(
					'div',
					{ className: 'mt20 f14' },
					_react2.default.createElement(
						'div',
						{ style: { display: "flex", justifyContent: 'center', alignItems: 'center' } },
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(handoverState).state1), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(handoverState).state1)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(1);
										}, type: currentStep === 1 ? 'primary' : 'link', className: currentStep === 1 ? 'active-button' : 'no-active-button' },
									'\u542F\u52A8\u51C6\u5907'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 1 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(handoverState).state2), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(handoverState).state2)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(2);
										}, type: currentStep === 2 ? 'primary' : 'link', className: currentStep === 2 ? 'active-button' : 'no-active-button' },
									'\u5546\u52A1\u4EA4\u63A5'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(handoverState).state3), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(handoverState).state3)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 3 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(3);
										}, type: currentStep === 3 ? 'primary' : 'link', className: currentStep === 3 ? 'active-button' : 'no-active-button' },
									'\u6280\u672F\u4EA4\u63A5'
								),
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					currentStep === 1 ? _react2.default.createElement(_OneItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 2 ? _react2.default.createElement(_TwoItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 3 ? _react2.default.createElement(_ThreeItem2.default, {
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						store: this.store }) : null
				)
			);
		}
	}]);

	return HandOver;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = HandOver;

/***/ }),

/***/ 2025:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MainProItemThree = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MainProItemThree, _React$Component);

	function MainProItemThree(props) {
		_classCallCheck(this, MainProItemThree);

		var _this = _possibleConstructorReturn(this, (MainProItemThree.__proto__ || Object.getPrototypeOf(MainProItemThree)).call(this, props));

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressTargetTimeSure", e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.handleBaseTime = function (date, datestring) {
			_this.props.updateData("progressTargetBaseTime", date.valueOf());
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, e.target.value);
		};

		_this.handleBChange = function (type, editorState) {
			// console.log(editorState.toHTML())
			if (type === 'summary') {
				_this.setState({ summary: editorState });
			}
			if (type === 'overallDescription') {
				_this.setState({ overallDescription: editorState });
			}
			if (type === 'assistance') {
				_this.setState({ assistance: editorState });
			}
		};

		_this.handleUpdate = function (type, e) {
			_this.props.updateHandOver(type, e);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0, //defalut 0
			summary: _braftEditor2.default.createEditorState(null),
			overallDescription: _braftEditor2.default.createEditorState(null)
		};
		return _this;
	}

	_createClass(MainProItemThree, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var sureState = this.state.sureState;
			var _store = this.store,
			    handoverThreeObj = _store.handoverThreeObj,
			    handoverState = _store.handoverState;

			var fields = mobx.toJS(handoverThreeObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 4 },
					md: { span: 4 },
					sm: { span: 4 }
				},
				wrapperCol: {
					xs: { span: 20 },
					md: { span: 20 },
					sm: { span: 20 }
				}
			};
			var controls = ['bold', 'text-color'];
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					handoverState.state3 === 2 ? _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								'table',
								{ className: 'suppliertable', style: { width: "100%" } },
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u4E3B\u4F53\u9879\u76EE\u7C7B\u578B'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.bodyType
									),
									_react2.default.createElement(
										'td',
										null,
										'\u5F00\u53D1\u5546'
									),
									_react2.default.createElement(
										'td',
										null,
										fields.developers
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u7533\u62A5\u5956\u9879\u60C5\u51B5'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										fields.prize
									)
								)
							)
						)
					) : _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u4E3B\u4F53\u9879\u76EE\u7C7B\u578B', className: 'w' },
								getFieldDecorator('bodyType', {
									initialValue: fields.bodyType == null ? "" : fields.bodyType,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this2.input = node;
									}, onBlur: function onBlur(e) {
										_this2.handleUpdate("bodyType", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5F00\u53D1\u5546', className: 'w' },
								getFieldDecorator('developers', {
									initialValue: fields.developers == null ? "" : fields.developers,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this2.input = node;
									}, onBlur: function onBlur(e) {
										_this2.handleUpdate("developers", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u7533\u62A5\u5956\u9879\u60C5\u51B5', className: 'w' },
								getFieldDecorator('prize', {
									initialValue: fields.prize == null ? "" : fields.prize,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
										return _this2.input = node;
									}, onBlur: function onBlur(e) {
										_this2.handleUpdate("prize", e);
									}, style: { width: '600px' }, placeholder: '\u8BF7\u8F93\u5165' }))
							)
						)
					)
				)
			);
		}
	}]);

	return MainProItemThree;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = MainProItemThree;

/***/ }),

/***/ 2026:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*
                                                                                                                                                                                                                                                                  * 大文件上传组件 antd upload 支持拖拽排序
                                                                                                                                                                                                                                                                  * dangwei
                                                                                                                                                                                                                                                                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _mobxReact = __webpack_require__(22);

var _reactSortableHoc = __webpack_require__(705);

var _UploadList = __webpack_require__(707);

var _UploadList2 = _interopRequireDefault(_UploadList);

__webpack_require__(2173);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ifcancel = false;
var abortCheckpoint = void 0;

var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT,
		timeout: 5 * 60 * 1000
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file, option) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file, option).then(function (data) {
			resolve(data);
		}).catch(function (error) {
			reject(error);
		});
	});
};

var itemStyle = {
	width: 104,
	height: 104,
	margin: 4,
	cursor: 'grab',
	zIndex: '1000'
};
var SortableItem = (0, _reactSortableHoc.SortableElement)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: itemStyle },
		_react2.default.createElement(_UploadList2.default, {
			locale: { previewFile: '预览', removeFile: '删除', downloadFile: "下载" },
			listType: params.props.listType,
			onPreview: params.onPreview,
			onDownload: params.onDownload,
			onRemove: params.onRemove,
			items: [params.item],
			showDownloadIcon: true
		})
	);
});
var listStyle = {
	display: 'flex',
	flexWrap: 'wrap',
	maxWidth: '100%'
};
var SortableList = (0, _reactSortableHoc.SortableContainer)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: listStyle },
		params.items.map(function (item, index) {
			return _react2.default.createElement(SortableItem, {
				key: '' + item.uid,
				index: index,
				item: item,
				props: params.props,
				onPreview: params.props.onPreview,
				onDownload: params.props.onDownload,
				onRemove: params.props.onRemove
			});
		}),
		_react2.default.createElement(
			_antd.Upload,
			_extends({}, params.props, {
				className: 'my_upload_normal',
				showUploadList: false
			}),
			params.uploadButton
		),
		params.cancelButton
	);
});

var MyUploadNew = (_dec = (0, _mobxReact.inject)('appStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MyUploadNew, _React$Component);

	function MyUploadNew(props) {
		var _this2 = this;

		_classCallCheck(this, MyUploadNew);

		var _this = _possibleConstructorReturn(this, (MyUploadNew.__proto__ || Object.getPrototypeOf(MyUploadNew)).call(this, props));

		_this.init = function () {
			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this.state.token));
					_this.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						}),
						expiration: str.expiration
					});
				}
			});
		};

		_this.cancelUploadFileToAliyun = function (params) {
			(0, _api.requestPost)('cancelUploadFileToAliyun', _config2.default.journal.cancelUploadFileToAliyun, _journal2.default.journal.cancelUploadFileToAliyun, { uploadId: params.uploadId, key: params.name }).then(function (res) {
				if (res == true) {
					_antd.message.success("取消上传成功");
				}
			});
		};

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				fileUrl: url,
				fileId: null,
				fileName: file.name,
				fileSize: file.size,
				fileType: file.type,
				createTime: file.lastModifiedDate,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		};

		_this.beforeUpload = function (file) {

			// 上传凭证失效，重查
			var expiration = _this.state.expiration;

			var expire = new Date(expiration).getTime();
			if (expiration != "" && expire < Date.now()) {
				_this.init();
			}

			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx, .dwg"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}

			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}

			_this.setState({
				loading: true
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = true; // 记录一次
				}
			});

			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file, {
					parallel: 4,
					partSize: 1024 * 1024,
					progress: function progress(p, cpt, res) {
						abortCheckpoint = cpt;
						//console.log(p, cpt, res, '进度');
					}
				}).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {

					if (error.name === 'abort') {
						// handle abort

					} else {
						//message.error("文件上传失败");
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});
						return false;
					}
				});
			};

			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										// 去掉url的问号
										if (filePath.indexOf("?") != -1) {
											filePath = filePath.split("?")[0];
										}
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.cancel = function () {
			ifcancel = true;
			var _abortCheckpoint = abortCheckpoint,
			    uploadId = _abortCheckpoint.uploadId,
			    name = _abortCheckpoint.name;

			client(_this).cancel();
			if (abortCheckpoint && uploadId != undefined) {
				_this.cancelUploadFileToAliyun({ name: name, uploadId: uploadId });
			}
			_this.setState({
				loading: false
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = false; // 清楚记录
				}
			});
		};

		_this.onSortEnd = function (_ref2) {
			var oldIndex = _ref2.oldIndex,
			    newIndex = _ref2.newIndex;
			var fileList = _this.state.fileList;

			_this.props.saveAttachment((0, _reactSortableHoc.arrayMove)(fileList, oldIndex, newIndex));
		};

		_this.onRemove = function (file) {
			var fileList = _this.state.fileList;

			var newFileList = fileList.filter(function (item) {
				return item.uid !== file.uid;
			});
			_this.props.saveAttachment(newFileList);
		};

		_this.store = _this.props.appStore;
		_this.state = {
			fileList: _this.props.fileList,
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0,
			expiration: "" // 过期时间
		};
		return _this;
	}

	_createClass(MyUploadNew, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			if (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {
				this.setState({
					fileList: nextProps.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}
			if (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {
				var token = JSON.parse(JSON.stringify(this.state.token));
				this.setState({
					token: Object.assign(token, {
						access_key_id: nextProps.ossData.accessKeyId, // oss的key_id
						access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret
						stsToken: nextProps.ossData.securityToken
					})
				});
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			if (this.props.journalType) {
				this.store.journal = false; // 记录一次
			}
			if (this.props.fileList) {
				this.setState({
					fileList: this.props.fileList.map(function (file) {
						if (/\.(doc|docx)$/.test(file.name)) {
							file.url = './images/word_default.png';
						} else if (/\.(xls|xlsx)$/.test(file.name)) {
							file.url = './images/exel_default.png';
						} else if (/\.(pdf)$/.test(file.name)) {
							file.url = './images/pdf.svg';
						} else if (/\.(zip|rar)$/.test(file.name)) {
							file.url = './images/zip_default.png';
						} else if (/\.(ppt|pptx)$/.test(file.name)) {
							file.url = './images/ppt.png';
						} else {
							var url = file.url;
							if (url.includes("oss-cn-beijing.aliyuncs.com")) {
								// 判断图片时oss上传的
								if (url.indexOf("?") != -1) {
									url = url.split("?")[0];
									file.url = url + '?x-oss-process=image/resize,w_500,limit_0';
								} else {
									file.url = file.url + '?x-oss-process=image/resize,w_500,limit_0';
								}
							} else {
								file.url = file.url;
							}
						}
						return file;
					})
				});
			}

			// 访问后端，获取请求上传凭证
			this.init();
		}

		// 取消阿里云上传


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx, .dwg"; // 默认值限制格式
			var props = {
				accept: accept == undefined ? acceptDefault : accept,
				name: 'file',
				multiple: multiple,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "text",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				onRemove: this.onRemove
			};
			// const uploadButton = (
			// 	<div className="pr">
			// 		<Icon type={loading ? "loading" : "plus"}/>
			// 		{loading ? <div className="ant-upload-text">上传中</div> : null}
			// 	</div>
			// );
			var uploadButton = _react2.default.createElement(
				_antd.Button,
				{ type: 'link' },
				'\u4E0A\u4F20'
			);
			var cancelButton = loading ? _react2.default.createElement(_antd.Icon, { type: 'stop',
				title: '\u53D6\u6D88\u4E0A\u4F20',
				style: {
					fontSize: '15px',
					color: '#1890ff'
				},
				onClick: this.cancel }) : null;
			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(SortableList, {
					distance: 1,
					items: fileList,
					onSortEnd: this.onSortEnd,
					axis: 'xy',
					helperClass: 'SortableHelper',
					props: props,
					uploadButton: disabled ? "" : uploadButton,
					cancelButton: cancelButton
				}),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage,
						alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this3.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUploadNew;
}(_react2.default.Component)) || _class) || _class);
exports.default = MyUploadNew;

/***/ }),

/***/ 2027:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _dec3, _class; /*
                                *项目管理
                                *qiufh@bocspace.cn
                                */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _uuid = __webpack_require__(79);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

var _BackgroundItemOne = __webpack_require__(2017);

var _BackgroundItemOne2 = _interopRequireDefault(_BackgroundItemOne);

var _EditableTableTwoItem = __webpack_require__(1877);

var _EditableTableTwoItem2 = _interopRequireDefault(_EditableTableTwoItem);

var _EditableTableThreeItemMatter = __webpack_require__(1875);

var _EditableTableThreeItemMatter2 = _interopRequireDefault(_EditableTableThreeItemMatter);

var _EditableTableThreeItemPolicy = __webpack_require__(1876);

var _EditableTableThreeItemPolicy2 = _interopRequireDefault(_EditableTableThreeItemPolicy);

var _EditableTableOneItem = __webpack_require__(1874);

var _EditableTableOneItem2 = _interopRequireDefault(_EditableTableOneItem);

var _EditableTableFourItem = __webpack_require__(1873);

var _EditableTableFourItem2 = _interopRequireDefault(_EditableTableFourItem);

var _Document = __webpack_require__(2021);

var _Document2 = _interopRequireDefault(_Document);

var _download = __webpack_require__(68);

var _SendEmail = __webpack_require__(2030);

var _SendEmail2 = _interopRequireDefault(_SendEmail);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var progressValueV4 = function progressValueV4(day1, day2, day3) {

	return ['1\u3001\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A' + day1, '2\u3001\u975E\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A' + day2, '3\u3001\u88C5\u914D\u5B8C\u6210\u65F6\u95F4\uFF1A' + day3];
};

var qualityValue = function qualityValue(label, count) {
	return [label + '\uFF1A\u2264 ' + count + '\u6B21 ' + (label === '验收次数' ? '客户确认签字' : '')];
};

var profitValue = function profitValue(label, number) {
	return [label + '\uFF1A     ' + number + '%'];
};

var costValue = function costValue(label, number) {
	return [label + '\uFF1A\u2265 ' + number + '\u5929 \u7ED9\u4F9B\u5E94\u5546\u4ED8\u6B3E'];
};

var safetyValue = function safetyValue(number1, number2) {
	return ['\u5B89\u5168\u4E8B\u6545\uFF1A\u2264 ' + number1 + '\u6B21 \u6B7B\u4EA1\u3001\u91CD\u4F24\u3001\u8F7B\u4F24', '\u5B89\u5168\u9690\u60A3\uFF1A\u2264 ' + number2 + '\u6B21 \u91CD\u5927\u4E8B\u6545\u9690\u60A3'];
};

var marketingValue = function marketingValue(flag1, flag2) {
	if (flag1 === 1 && flag2 === 1) {
		return ['1\u3001\u6311\u6218\u76EE\u6807\uFF1A\u987E\u5BA2\u6EE1\u610F\uFF0C\u53D1\u8868\u626C\u4FE1', '2\u3001\u5F62\u6210\u8BE5\u9879\u76EE\u7684\u8425\u9500\u6848\u4F8B\uFF08\u54C1\u63A7\u3001\u8D28\u91CF\u3001\u4EA4\u4ED8\u901F\u5EA6\u3001\u7535\u5546\u3001\u6807\u51C6\u5316\u3001\u5BA2\u6237\u6EE1\u610F\u5EA6\u7B49\uFF09\uFF0C\u6253\u9020\u6210\u5317\u4EAC\u533A\u57DF\u7684\u6807\u6746'];
	}
	if (flag1 === 1 && flag2 === 0) {
		return ['1\u3001\u6311\u6218\u76EE\u6807\uFF1A\u987E\u5BA2\u6EE1\u610F\uFF0C\u53D1\u8868\u626C\u4FE1'];
	}
	if (flag1 === 0 && flag2 === 1) {
		return ['1\u3001\u5F62\u6210\u8BE5\u9879\u76EE\u7684\u8425\u9500\u6848\u4F8B\uFF08\u54C1\u63A7\u3001\u8D28\u91CF\u3001\u4EA4\u4ED8\u901F\u5EA6\u3001\u7535\u5546\u3001\u6807\u51C6\u5316\u3001\u5BA2\u6237\u6EE1\u610F\u5EA6\u7B49\uFF09\uFF0C\u6253\u9020\u6210\u5317\u4EAC\u533A\u57DF\u7684\u6807\u6746'];
	}
	if (flag1 === 0 && flag2 === 0) {
		return [];
	}
};

var dateFormat = 'YYYY-MM-DD';

var OneItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = (0, _mobxReact.inject)('UserStore'), _dec3 = _antd.Form.create(), _dec(_class = _dec2(_class = _dec3(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(OneItem, _React$Component);

	function OneItem(props) {
		_classCallCheck(this, OneItem);

		var _this2 = _possibleConstructorReturn(this, (OneItem.__proto__ || Object.getPrototypeOf(OneItem)).call(this, props));

		_this2.getHandoverOne = function () {
			var taskDetail = _this2.store.taskDetail;

			_this2.store.getHandoverOne({ "taskId": taskDetail.id }).then(function (res) {
				_this2.store.handoverOneObj = res;
			});
		};

		_this2.saveHandoverOne = function (newObj) {
			var _this2$store = _this2.store,
			    handoverOneObj = _this2$store.handoverOneObj,
			    taskDetail = _this2$store.taskDetail;


			_this2.store.saveHandoverOne({ "ho": Object.assign(mobx.toJS(handoverOneObj), { "taskId": taskDetail.id }, newObj) }).then(function (res) {
				if (res) {
					_this2.getHandoverOne();
				}
			});
		};

		_this2.handleAdd = function () {
			_this2.setState({
				add: Object.assign(_this2.state.add, { visible: true })
			}, function () {
				_this2.getSearch("");
			});
		};

		_this2.onChange = function (type, e) {
			_this2.store.salesParams[type] = e.target.value;
		};

		_this2.handleChange = function (type, value) {
			if (value == undefined) {
				// 清空
				_this2.store.salesParams[type] = 10;
			} else {
				_this2.store.salesParams[type] = value;
			}
		};

		_this2.handleSearch = function () {
			_this2.store.getSalesOrderPageList();
		};

		_this2.handleOk = function () {
			var _this2$state = _this2.state,
			    id = _this2$state.id,
			    stateValue = _this2$state.stateValue;

			var params = {
				id: id,
				state: typeof stateValue == "string" ? Number(stateValue) : stateValue
			};
			_this2.store.changeSalesOrderState(params).then(function (res) {
				if (res) {
					_antd.message.success("操作成功");
					_this2.setState({
						visible: false
					});
					_this2.handleSearch();
				}
			});
		};

		_this2.handleCancel = function (e) {
			_this2.setState({
				visible: false
			});
		};

		_this2.confirm = function (id) {
			var params = {
				id: id
			};
			_this2.store.delSalesOrderState(params).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this2.store.getSalesOrderPageList();
				}
			});
		};

		_this2.delProject = function (id) {
			_this2.store.delProject({ "id": id }).then(function (res) {
				_this2.store.getProjectPageList('');
			});
		};

		_this2.getEnclosureList = function () {
			var _this2$store2 = _this2.store,
			    taskDetail = _this2$store2.taskDetail,
			    projectDetail = _this2$store2.projectDetail;

			_this2.store.getEnclosureList({ "taskId": mobx.toJS(taskDetail).id, "indexs": 1 }).then(function (res) {
				_this2.store.enclosureList = res;
				_this2.setState({ dataSource: res, enclosureList: res });
			});
		};

		_this2.updateState = function (type, data) {
			console.log(type, data);
			_this2.setState(_defineProperty({}, type, Object.assign(_this2.state[type], data)));
		};

		_this2.getSearch = function (param) {
			var projectDetail = _this2.store.projectDetail;

			var params = param;
			_this2.props.UserStore.getRoleData(params).then(function (res) {
				_this2.setState({
					add: Object.assign(_this2.state.add, { data: res.body.filter(function (item) {
							return item.id !== projectDetail.masterId;
						}).map(function (item) {
							return Object.assign(item, { selected: false });
						}) })
				});
			});
		};

		_this2.saveContents = function () {
			_this2.getEnclosureList();
		};

		_this2.saveBuildTeamOneItem = function (params) {
			_this2.store.saveBuildTeamOneItem(params).then(function (res) {
				if (res) {
					_this2.getEnclosureList();
				}
			});
		};

		_this2.getCurrentStageTasks = function () {
			var result = [];
			var _this2$store3 = _this2.store,
			    projectDetail = _this2$store3.projectDetail,
			    taskDetail = _this2$store3.taskDetail;

			var _mobx$toJS = mobx.toJS(taskDetail),
			    stageId = _mobx$toJS.stageId;

			var _mobx$toJS2 = mobx.toJS(projectDetail),
			    stages = _mobx$toJS2.stages;

			if (stages !== undefined && Array.isArray(stages)) {
				var currentStage = stages.filter(function (item) {
					return item.id === stageId;
				});
				if (currentStage.length > 0) {
					result = currentStage[0].tasks;
				}
			}

			return result;
		};

		_this2.getBuildTeamInfo = function () {
			var currentStageTasks = _this2.getCurrentStageTasks();
			if (currentStageTasks.length === 0) return;
			var buildteamTask = currentStageTasks.filter(function (item) {
				return item.taskType === 'buildTeam';
			});
			_this2.getBuildTeamTwoMain(buildteamTask[0]['id']);
			_this2.getBuildTeamThreeItemList(buildteamTask[0]['id']);
			_this2.getBuildTeamFourItemList(buildteamTask[0]['id']);
			_this2.getBuildTeamOneItemList(buildteamTask[0]['id']);
		};

		_this2.getCostValue = function (res) {
			var costTargetOne = res.costTargetOne,
			    costTargetTwo = res.costTargetTwo,
			    costTargetThree = res.costTargetThree,
			    costTargetFour = res.costTargetFour,
			    costTargetThree2 = res.costTargetThree2,
			    costTargetFour2 = res.costTargetFour2;

			var dataInfo = [{ "show": costTargetOne, "info": "分包费用: 参照合同" }, { "show": costTargetTwo, "info": "安全文明施工: 合同额≤200万，费用≤2000元; 合同额＞200万，费用≤3000元" }, { "show": costTargetThree, "info": "招待费: ≤合同额*2‰ 且 ≤2000元" }, { "show": costTargetThree2, "info": "招待费（展厅适用）: ≤合同额的2‰ 且 ≤1500元" }, { "show": costTargetFour, "info": "风险附加: ≤合同额*5‰ 且 ≤10000元" }, { "show": costTargetFour2, "info": "风险附加（展厅适用）:≤合同额的5‰ 且 ≤5000元" }];
			var result = dataInfo.filter(function (item) {
				return item.show === 1;
			});
			result = result.map(function (item) {
				return item.info;
			});
			return result;
		};

		_this2.getBuildTeamTwoMain = function (id) {
			_this2.store.getBuildTeamTwoMain({ "taskId": id }).then(function (res) {
				var targetDay1 = res.progressTargetTimeSure === 1 ? (0, _moment2.default)(res.progressTargetBaseTime).format(dateFormat) : "T";
				var targetDay2 = targetDay1 === "T" ? "T+" + res.progressTargetNostandardDay + "日历天" : (0, _moment2.default)(targetDay1).add(res.progressTargetNostandardDay, "days").format(dateFormat);
				var targetDay3 = targetDay1 === "T" ? "T+" + res.progressTargetOverDay + "日历天" : (0, _moment2.default)(targetDay1).add(res.progressTargetOverDay, "days").format(dateFormat);

				var promiseDay1 = res.progressPromiseTimeSure === 1 ? (0, _moment2.default)(res.progressPromiseBaseTime).format(dateFormat) : "T";
				var promiseDay2 = promiseDay1 === "T" ? "T+" + res.progressPromiseNostandardDay + "日历天" : (0, _moment2.default)(promiseDay1).add(res.progressPromiseNostandardDay, "days").format(dateFormat);
				var promiseDay3 = promiseDay1 === "T" ? "T+" + res.progressPromiseOverDay + "日历天" : (0, _moment2.default)(promiseDay1).add(res.progressPromiseOverDay, "days").format(dateFormat);
				var profitTargetValue = res.profitTarget === 0 ? "不亏损" : profitValue("盈利", res.profitTargetRate);
				_this2.setState({ targetTableDataSource: [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(targetDay1, targetDay2, targetDay3), "promiseValue": progressValueV4(promiseDay1, promiseDay2, promiseDay3) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", res.qualityTargetCheckCount), "promiseValue": qualityValue("质量事故", res.qualityPromiseAccidentCount) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitTargetValue, "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "成本", "targetValue": _this2.getCostValue(res), "promiseValue": "" }, { "keyIndex": 5, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "营销", "targetValue": marketingValue(res.markingTargetSatisfied, res.markingTargetStandard), "promiseValue": "" }, { "keyIndex": 6, "id": "!" + (0, _uuid.v4)(), "orders": 6, "item": "安全", "targetValue": safetyValue(res.safeTargetAccidentCount, res.safeTargetTreacherousCount), "promiseValue": safetyValue(res.safePromiseAccidentCount, res.safePromiseTreacherousCount) }] });
			});
		};

		_this2.getBuildTeamThreeItemList = function (id) {
			_this2.store.getBuildTeamThreeItemList({ "taskId": id }).then(function (res) {
				_this2.setState({ btThreeList: res.map(function (item, index) {
						return Object.assign(item, { 'keyIndex': index + 1 });
					}) });
			});
		};

		_this2.getBuildTeamFourItemList = function (id) {
			_this2.store.getBuildTeamFourItemList({ "taskId": id }).then(function (res) {
				_this2.setState({ "btFourList": res });
			});
		};

		_this2.getBuildTeamOneItemList = function (id) {

			_this2.store.getBuildTeamOneItemList({ "taskId": id }).then(function (res) {
				_this2.store.buildTeamOneItem = res;
				_this2.setState({ btOneList: res });
			});
		};

		_this2.formatDataSource = function () {
			var btOneList = _this2.state.btOneList;

			var ds = btOneList.map(function (item, index) {
				if (index === 0) {
					return Object.assign(item, { "duty": "1、全力保障项目目标完成；\n" + "2、协调内外部资源，负责项目交付进度和质量控制；\n" + "3、安排内部其他项目组成员工作，做好分工安排；\n" + "4、保障项目中各类文档按期完成；\n" + "5、定期做高层汇报，并提出管理改进建议" }, { "keyIndex": index + 1 });
				} else {
					return Object.assign(item, { "keyIndex": index + 1 });
				}
			});
			return ds;
		};

		_this2.getUserIds = function () {
			var btOneList = _this2.state.btOneList;

			var ds = btOneList.map(function (item, index) {
				return { "userId": item.userId, "userName": item.userName };
			});
			return ds;
		};

		_this2.getUserEmails = function () {
			var btOneList = _this2.state.btOneList;

			var ds = btOneList.map(function (item, index) {
				return item.email;
			});
			return ds;
		};

		_this2.updateHandOverOne = function (type, e) {
			var newObj = {};
			newObj[type] = e.target.value;
			_this2.saveHandoverOne(newObj);
		};

		_this2.overCurrentStage = function () {
			if (!_this2.checkFormRequire()) return;
			_this2.props.overCurrentStageTask();
		};

		_this2.doneAndNext = function () {
			if (!_this2.checkFormRequire()) return;
			var currentStep = _this2.props.currentStep;

			_this2.props.overCurrentStageTask();
			_this2.props.switchSteps(currentStep + 1);
		};

		_this2.checkFormRequire = function () {
			var cbi = _this2.checkBackgroundItem();
			_this2.BackgroundItemOne.checkFormValidate();
			if (!cbi.result) {
				_antd.message.warn(cbi.info);
				return false;
			}
			return true;
		};

		_this2.checkBackgroundItem = function () {
			var handoverOneObj = _this2.store.handoverOneObj;


			var hoo = mobx.toJS(handoverOneObj);

			var resultObj = { "info": "", result: true };
			if (hoo.background === "" || hoo.background === null) {
				resultObj.result = false;
				resultObj.info = "背景-基本概况，项目意义不能为空";
				return resultObj;
			}
			if (hoo.significance === "" || hoo.significance === null) {
				resultObj.result = false;
				resultObj.info = "项目意义不能为空";
				return resultObj;
			}
			if (hoo.contractSigning === -1) {
				resultObj.result = false;
				resultObj.info = "请检查甲方合同是否已签订?";
				return resultObj;
			}
			if (hoo.designSigning === -1 || hoo.id == null) {
				resultObj.result = false;
				resultObj.info = "请检查甲方设计方案是否已签订?";
				return resultObj;
			}
			return resultObj;
		};

		_this2.saveItem = function (row) {
			var dataSource = _this2.state.dataSource;
			var taskDetail = _this2.store.taskDetail;

			var em = { taskId: taskDetail.id, name: '', indexs: 1, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
			if (row.id !== undefined && row.id[0] !== "!") {
				em['id'] = row.id;
				em['orders'] = row.orders;
				em['enclosureItems'] = row.enclosureItems;
				em['templates'] = row.templates;
				em['cases'] = row.cases;
				em['name'] = row.name;
			}
			var parmas = { "em": em, taskId: taskDetail.id, indexs: 1 };
			_this2.store.saveEnclosureMain(parmas).then(function (res) {
				_this2.getEnclosureList();
			});
		};

		_this2.getReportUrl = function (id) {
			var _this = _this2;
			_this.timer22 = setInterval(function () {
				_this.store.getDocUrl2({ "id": id }).then(function (url) {
					if (url !== null && url !== "") {
						_this2.setState({ downloading: false });
						_this2.getHandoverOne();
						clearInterval(_this.timer22);
					} else {}
				});
			}, 3000);
		};

		_this2.checkBuildTeamState = function () {
			var currentStageTasks = _this2.getCurrentStageTasks();
			if (currentStageTasks.length === 0) return;
			var buildteamTask = currentStageTasks.filter(function (item) {
				return item.taskType === 'buildTeam';
			});

			return new Promise(function (resolve) {
				_this2.store.getBuildTeamState({ "taskId": buildteamTask[0]["id"] }).then(function (res) {
					if (res && res.state1 === 2 && res.state2 === 2 && res.state3 === 2 && res.state4 === 2) {
						resolve(true);
					} else {
						resolve(false);
					}
				});
			});
		};

		_this2.buildStartMeetingPpt = function () {
			var handoverOneObj = _this2.store.handoverOneObj;

			var hoo = mobx.toJS(handoverOneObj);
			_this2.checkBuildTeamState().then(function (res) {
				if (!res) {
					_antd.message.warn("请检查组建项目团队四个阶段是否都已经完成！");
					return false;
				}
				return new Promise(function (resolve) {
					var checkObj = { "info": "", result: true };
					if (hoo.background === "" || hoo.background === null) {
						checkObj = { "info": "请检查项目背景是否已经填写！", result: false };
						resolve(checkObj);
					}
					if (hoo.significance === "" || hoo.significance === null) {
						checkObj = { "info": "请检查项目意义是否已经填写！", result: false };
						resolve(checkObj);
					}
					if (hoo.contractSigning === -1) {
						checkObj = { "info": "请检查甲方合同是否已签订?", result: false };
						resolve(checkObj);
					}
					if (hoo.designSigning === -1) {
						checkObj = { "info": "请检查甲方设计方案是否已签订?", result: false };
						resolve(checkObj);
					}
					resolve(checkObj);
				}).then(function (res) {
					if (res.result) {
						_this2.store.saveStartMeetingFile({ "ho": mobx.toJS(handoverOneObj) }).then(function (res) {
							_this2.setState({
								downloading: true
							});
							_this2.getReportUrl(res);
						});
					} else {
						_antd.message.warn(res.info);
					}
				});
			});
		};

		_this2.handleContractSigning = function (e) {
			var newObj = { "contractSigning": e.target.value ? 1 : 0 };

			_this2.saveHandoverOne(newObj);
		};

		_this2.handleDesignSigning = function (e) {
			var newObj = { "designSigning": e.target.value ? 1 : 0 };
			_this2.saveHandoverOne(newObj);
		};

		_this2.store = _this2.props.DeliveryStore;
		_this2.state = {
			downloading: false,
			visible: false,
			stateValue: 0,
			id: "",
			dataSource: [],
			oneItemList: [],
			projectId: null,
			taskId: null,
			targetTableDataSource: [{ "keyIndex": 1, "id": "!" + (0, _uuid.v4)(), "orders": 1, "item": "进度", "targetValue": progressValueV4(0, 0, 0), "promiseValue": progressValueV4(0, 0, 0) }, { "keyIndex": 2, "id": "!" + (0, _uuid.v4)(), "orders": 2, "item": "质量", "targetValue": qualityValue("验收次数", 0), "promiseValue": qualityValue("质量事故", 0) }, { "keyIndex": 3, "id": "!" + (0, _uuid.v4)(), "orders": 3, "item": "利润", "targetValue": profitValue("盈利", 0), "promiseValue": "" }, { "keyIndex": 4, "id": "!" + (0, _uuid.v4)(), "orders": 4, "item": "成本", "targetValue": costValue("给甲方付款后", 5), "promiseValue": "" }, { "keyIndex": 5, "id": "!" + (0, _uuid.v4)(), "orders": 5, "item": "营销", "targetValue": marketingValue(0, 0), "promiseValue": "" }, { "keyIndex": 6, "id": "!" + (0, _uuid.v4)(), "orders": 6, "item": "安全", "targetValue": safetyValue(0, 0), "promiseValue": safetyValue(0, 0) }],
			btThreeList: [],
			btFourList: [],
			btOneList: [],
			emailUsers: []
		};
		return _this2;
	}

	_createClass(OneItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			var taskDetail = mobx.toJS(nextProps.DeliveryStore.taskDetail);
			if (projectDetail.id !== this.state.projectId /*|| taskDetail.id!==null&&taskDetail.id!==this.state.taskId*/) {
					this.setState({ projectId: projectDetail.id, taskId: taskDetail.id });
					this.getHandoverOne();
					this.getEnclosureList();
					this.getBuildTeamInfo();
				}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			this.getHandoverOne();
			this.getEnclosureList();
			this.getBuildTeamInfo();
			var taskDetail = mobx.toJS(this.props.DeliveryStore.taskDetail);
			this.store.gerDefaultEmailUsers({
				taskId: taskDetail.id,
				type: "startmeeting",
				sendType: 2
			}).then(function (res) {
				if (res) {
					_this3.setState({
						emailUsers: res
					});
				}
			});
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}

		// 添加成员


		// 列表搜索


		// 间隔3秒获取pdf地址

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _store = this.store,
			    handoverState = _store.handoverState,
			    handoverOneObj = _store.handoverOneObj;

			var hoFields = mobx.toJS(handoverOneObj);
			var isDocument = hoFields.document == null || _typeof(hoFields.document) == "object" && Object.keys(hoFields.document).length == 0 ? false : true; // 是否有采购合同
			var _state = this.state,
			    dataSource = _state.dataSource,
			    targetTableDataSource = _state.targetTableDataSource,
			    btThreeList = _state.btThreeList,
			    btFourList = _state.btFourList,
			    downloading = _state.downloading;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: { span: 12 },
				wrapperCol: { span: 12 }
			};
			return _react2.default.createElement(
				'div',
				{ style: { height: 'auto' } },
				_react2.default.createElement(
					_antd.Spin,
					{ spinning: downloading, tip: '\u6B63\u5728\u751F\u6210\u542F\u52A8\u4F1APPT,\u8BF7\u7A0D\u7B49...' },
					_react2.default.createElement(
						'div',
						{ className: 'mt20', style: { display: 'flex', justifyContent: 'space-between' } },
						_react2.default.createElement(
							'div',
							null,
							_react2.default.createElement(
								_antd.Button,
								{
									className: 'fl',
									type: 'dashed',
									icon: 'plus',
									onClick: this.handleAdd,
									style: handoverState.state1 === 2 ? { display: 'none' } : { display: 'none' }
								},
								'\u6DFB\u52A0\u7EC4\u7EC7\u6210\u5458'
							),
							_react2.default.createElement(
								_antd.Button,
								{
									className: 'fl',
									type: 'dashed',
									icon: 'delete',
									style: { display: 'none' }
								},
								'\u6279\u91CF\u5220\u9664'
							),
							_react2.default.createElement(
								_antd.Button,
								{
									ghost: true,
									className: 'fl',
									type: 'primary',
									icon: 'poweroff',
									onClick: this.props.reStartHandover,
									style: handoverState.state1 === 2 ? { display: '' } : { display: 'none' }
								},
								'\u91CD\u65B0\u542F\u52A8'
							)
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'daily_tips' },
						_react2.default.createElement(
							'p',
							null,
							_react2.default.createElement(
								'span',
								null,
								'\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u9879\u76EE\u76EE\u6807\u3001\u51B3\u7B56\u673A\u5236\u548C\u6C9F\u901A\u673A\u5236\u5982\u679C\u5DF2\u7ECF\u5728\u7EC4\u5EFA\u56E2\u961F\u8FC7\u7A0B\u4E2D\u5B8C\u6210\uFF0C\u8FD9\u91CC\u4F1A\u81EA\u52A8\u5E26\u51FA\uFF0C\u8865\u5145\u5B8C\u6210\u4EE5\u4E0B\u4FE1\u606F\u5373\u53EF\u6B63\u5F0F\u542F\u52A8\u9879\u76EE\u5566~'
							)
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ className: 'require_label mb20' },
							'\u9879\u76EE\u80CC\u666F\u53CA\u610F\u4E49:'
						),
						_react2.default.createElement(_BackgroundItemOne2.default, { onRef: function onRef(node) {
								return _this4.BackgroundItemOne = node;
							}, updateHandOverOne: this.updateHandOverOne, store: this.store })
					),
					handoverState.state1 !== 2 ? _react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							_antd.Form,
							{ layout: 'inline' },
							_react2.default.createElement(
								_antd.Row,
								null,
								_react2.default.createElement(
									_antd.Col,
									{ style: { textAlign: 'left' }, span: 12 },
									_react2.default.createElement(
										_antd.Form.Item,
										{ label: '\u7532\u65B9\u5408\u540C\u662F\u5426\u5DF2\u7B7E\u8BA2' },
										getFieldDecorator('contractSigning', {
											initialValue: hoFields.contractSigning == null ? undefined : hoFields.contractSigning,
											rules: [{ required: true, message: '此项是必填' }]
										})(_react2.default.createElement(
											_antd.Radio.Group,
											{ onChange: this.handleContractSigning },
											_react2.default.createElement(
												_antd.Radio,
												{ value: 1 },
												'\u662F'
											),
											_react2.default.createElement(
												_antd.Radio,
												{ value: 0 },
												'\u5426'
											)
										))
									)
								),
								_react2.default.createElement(
									_antd.Col,
									{ span: 12 },
									_react2.default.createElement(
										_antd.Form.Item,
										{ label: '\u7532\u65B9\u8BBE\u8BA1\u65B9\u6848\u662F\u5426\u5DF2\u7B7E\u8BA2' },
										getFieldDecorator('designSigning', {
											initialValue: hoFields.designSigning == null ? undefined : hoFields.designSigning,
											rules: [{ required: true, message: '此项是必填' }]
										})(_react2.default.createElement(
											_antd.Radio.Group,
											{ onChange: this.handleDesignSigning },
											_react2.default.createElement(
												_antd.Radio,
												{ value: 1 },
												'\u662F'
											),
											_react2.default.createElement(
												_antd.Radio,
												{ value: 0 },
												'\u5426'
											)
										))
									)
								)
							)
						)
					) : _react2.default.createElement(
						'div',
						{ className: 'mt30', style: { fontSize: "14px", color: "#000" } },
						_react2.default.createElement(
							_antd.Row,
							null,
							_react2.default.createElement(
								_antd.Col,
								{ span: 12 },
								'\u7532\u65B9\u5408\u540C\u662F\u5426\u5DF2\u7B7E\u8BA2\uFF1A',
								_react2.default.createElement(
									'span',
									{ style: hoFields.contractSigning === 1 ? { "color": "green" } : { "color": "red" } },
									hoFields.contractSigning === 1 ? "是" : "否"
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ span: 12 },
								'\u7532\u65B9\u8BBE\u8BA1\u65B9\u6848\u662F\u5426\u5DF2\u7B7E\u8BA2\uFF1A',
								_react2.default.createElement(
									'span',
									{ style: hoFields.designSigning === 1 ? { "color": "green" } : { "color": "red" } },
									hoFields.designSigning === 1 ? "是" : "否"
								)
							)
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ className: 'require_label mb20' },
							'\u9879\u76EE\u76EE\u6807:'
						),
						_react2.default.createElement(_EditableTableTwoItem2.default, {
							id: 'id',
							store: this.store,
							dataSource: targetTableDataSource,
							disabled: true,
							pid: ''
						})
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ className: 'require_label mb20' },
							'\u9879\u76EE\u8FD0\u884C\u673A\u5236:'
						),
						_react2.default.createElement(
							'div',
							{ className: 'mt20 mb10' },
							'1\u3001\u51B3\u7B56\u673A\u5236:'
						),
						_react2.default.createElement(_EditableTableThreeItemMatter2.default, {
							id: 'id',
							store: this.store,
							dataSource: btThreeList,
							disabled: true,
							pid: ''
						}),
						_react2.default.createElement(
							'div',
							{ className: 'mt20 mb10' },
							'2\u3001\u6C9F\u901A\u673A\u5236:'
						),
						_react2.default.createElement(_EditableTableFourItem2.default, {
							id: 'id',
							store: this.store,
							dataSource: btFourList.map(function (item, index) {
								var masters = [];
								if (item.userTeamName !== null && item.userTeamId !== null) masters = [{ "userName": item.userTeamName, "userId": item.userTeamId }];
								return Object.assign(item, { "keyIndex": index + 1, "masters": masters });
							}),
							disabled: true,
							pid: ''
						})
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ className: 'require_label mb20' },
							'\u9879\u76EE\u56E2\u961F\u6210\u5458\u804C\u8D23:'
						),
						_react2.default.createElement(_EditableTableOneItem2.default, {
							id: 'id',
							store: this.store,
							dataSource: this.formatDataSource(),
							disabled: true,
							pid: ''
						})
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ style: { margin: "15px 0", padding: "10px 25px" } },
							handoverState.state1 !== 2 ? _react2.default.createElement(
								_antd.Button,
								{ type: 'primary', onClick: this.buildStartMeetingPpt },
								'\u751F\u6210\u542F\u52A8\u4F1APPT'
							) : null,
							isDocument ? _react2.default.createElement(_Document2.default, {
								data: hoFields.document,
								store: this.store
							}) : null
						),
						_react2.default.createElement(_SendEmail2.default, {
							userIds: this.getUserIds(),
							emailUsers: this.state.emailUsers,
							obj: mobx.toJS(this.store.handoverOneObj),
							store: this.store
						})
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30' },
						_react2.default.createElement(
							'div',
							{ className: 'require_label mb20' },
							'\u9644\u4EF6:',
							_react2.default.createElement(
								'span',
								{ className: 'require_tips' },
								'\uFF08\u8BF7\u6309\u7167\u8981\u6C42\u4E0A\u4F20\u9644\u4EF6\u5185\u5BB9\uFF0C\u6807\u661F\u4E3A\u5FC5\u987B\u4E0A\u4F20\u9879\uFF0C\u53EF\u81EA\u7531\u6DFB\u52A0\u9644\u4EF6\u9879\u76EE\u4E2D\u4E0D\u542B\u7684\u76F8\u5173\u5185\u5BB9\uFF09'
							)
						),
						_react2.default.createElement(_EditableTableUpload2.default, {
							id: 'id',
							store: this.store,
							dataSource: dataSource.map(function (item, index) {
								return Object.assign(item, { "keyIndex": index + 1 });
							}),
							saveData: this.saveContents,
							saveItem: this.saveItem,
							disabled: handoverState.state1 === 2 ? true : false,
							pid: ''
						})
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30 mb30', style: handoverState.state1 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
						_react2.default.createElement(
							_antd.Button,
							{ onClick: this.overCurrentStage,
								ghost: true,
								type: 'primary'
							},
							' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
						),
						_react2.default.createElement(
							_antd.Button,
							{ onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
							' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30 mb30', style: handoverState.state1 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
						_react2.default.createElement(
							_antd.Button,
							{ onClick: function onClick() {
									switchSteps(currentStep + 1);
								}, style: { marginLeft: '20px' }, type: 'primary' },
							'\u4E0B\u4E00\u6B65'
						)
					)
				)
			);
		}
	}]);

	return OneItem;
}(_react2.default.Component)) || _class) || _class) || _class) || _class) || _class);
exports.default = OneItem;

/***/ }),

/***/ 2028:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _class; /*
                         *交付管理-组建项目团队
                         *qiufh@bocspace.cn
                         */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var OthersItemTwo = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec2 = _antd.Form.create(), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(OthersItemTwo, _React$Component);

	function OthersItemTwo(props) {
		_classCallCheck(this, OthersItemTwo);

		var _this = _possibleConstructorReturn(this, (OthersItemTwo.__proto__ || Object.getPrototypeOf(OthersItemTwo)).call(this, props));

		_this.getHandoverTwo = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getHandoverTwo({ "taskId": taskDetail.id }).then(function (res) {
				if (res) {
					_this.store.handoverTwoObj = res;
					_this.props.form.setFieldsValue({
						remark: res.remark == null || res.remark == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.remark),
						riskAdvice: res.riskAdvice == null || res.riskAdvice == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.riskAdvice)
					});
				}
			});
		};

		_this.handleTimeSure = function (e) {
			_this.setState({
				sureState: e.target.value
			});
			// this.props.updateData("TimeSure", e.target.value)
			_this.saveBuildTeamTwoMain("progressTargetTimeSure", e.target.value);
		};

		_this.saveBuildTeamTwoMain = function (type, value) {
			var buildTeamTwoMainObj = _this.store.buildTeamTwoMainObj;

			var obj = {};
			obj[type] = value;
			var newData = Object.assign(mobx.toJS(buildTeamTwoMainObj), obj);
			_this.store.saveBuildTeamTwoMain({ "bttm": newData }).then(function (res) {
				_this.store.buildTeamTwoMainObj = Object.assign(mobx.toJS(buildTeamTwoMainObj), res);
			});
		};

		_this.handleBaseTime = function (date, datestring) {
			_this.props.updateData("progressTargetBaseTime", date.valueOf());
		};

		_this.handleDaysChange = function (e, type) {
			// console.log(e.target.value)
			// this.props.updateData(type, e.target.value)
			_this.saveBuildTeamTwoMain(type, e.target.value);
		};

		_this.handleUpdate = function (type, e) {
			_this.props.updateHandOver(type, e);
		};

		_this.handleBChange = function (type, bfData) {
			// console.log(type, BraftEditor.createEditorState(bfData).toHTML())
			_this.props.updateHandOverBC(type, _braftEditor2.default.createEditorState(bfData).toHTML());
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			sureState: 0, //defalut 0
			remark: _braftEditor2.default.createEditorState(null),
			riskAdvice: _braftEditor2.default.createEditorState(null)
		};
		return _this;
	}

	_createClass(OthersItemTwo, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getHandoverTwo();
		}
	}, {
		key: 'componentWillMount',
		value: function componentWillMount() {}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var _state = this.state,
			    sureState = _state.sureState,
			    remark = _state.remark,
			    riskAdvice = _state.riskAdvice;
			var _store = this.store,
			    handoverTwoObj = _store.handoverTwoObj,
			    handoverState = _store.handoverState;

			var fields = mobx.toJS(handoverTwoObj); // 基本信息
			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: {
					xs: { span: 4 },
					md: { span: 4 },
					sm: { span: 4 }
				},
				wrapperCol: {
					xs: { span: 20 },
					md: { span: 20 },
					sm: { span: 20 }
				}
			};
			var controls = ['bold', 'text-color'];
			return _react2.default.createElement(
				'div',
				{ className: 'mt15' },
				_react2.default.createElement(
					_antd.Form,
					formItemLayout,
					handoverState.state2 === 2 ? _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								'table',
								{ className: 'suppliertable', style: { width: "100%" } },
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5B58\u5728\u98CE\u9669\u53CA\u5EFA\u8BAE'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										_react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: fields.riskAdvice } })
									)
								),
								_react2.default.createElement(
									'tr',
									null,
									_react2.default.createElement(
										'td',
										null,
										'\u5907\u6CE8\u4FE1\u606F'
									),
									_react2.default.createElement(
										'td',
										{ colSpan: 3 },
										_react2.default.createElement('div', { dangerouslySetInnerHTML: { __html: fields.remark } })
									)
								)
							)
						)
					) : _react2.default.createElement(
						_antd.Row,
						{ gutter: [{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24 }, 15] },
						_react2.default.createElement(
							_antd.Col,
							{ xs: 24, sm: 24, md: 24, lg: 24, xl: 24, style: { padding: 0 } },
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5B58\u5728\u98CE\u9669\u53CA\u5EFA\u8BAE', className: 'w' },
								getFieldDecorator('riskAdvice', {
									initialValue: riskAdvice,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_braftEditor2.default, {
									className: 'my-editor',
									onBlur: function onBlur(e) {
										_this2.handleBChange('riskAdvice', e);
									},
									controls: controls,
									contentStyle: {
										minHeight: 100,
										maxHeight: 100,
										overflowY: 'scroll',
										height: 'auto',
										width: '100%'
									}
								}))
							),
							_react2.default.createElement(
								_antd.Form.Item,
								{ label: '\u5907\u6CE8\u4FE1\u606F', className: 'w' },
								getFieldDecorator('remark', {
									initialValue: remark,
									rules: [{ required: false, message: '此项是必填' }]
								})(_react2.default.createElement(_braftEditor2.default, {
									className: 'my-editor',
									onBlur: function onBlur(e) {
										_this2.handleBChange('remark', e);
									},
									controls: controls,
									contentStyle: {
										minHeight: 100,
										maxHeight: 100,
										overflowY: 'scroll',
										height: 'auto',
										width: '100%'
									}
								}))
							)
						)
					)
				)
			);
		}
	}]);

	return OthersItemTwo;
}(_react2.default.Component)) || _class) || _class) || _class) || _class);
exports.default = OthersItemTwo;

/***/ }),

/***/ 2029:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员  带排序
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd = (_dec = (0, _mobxReact.inject)('UserStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd, _React$Component);

	function PersonAdd(props) {
		_classCallCheck(this, PersonAdd);

		var _this = _possibleConstructorReturn(this, (PersonAdd.__proto__ || Object.getPrototypeOf(PersonAdd)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			}, function () {

				// 右侧
				var olds = JSON.parse(JSON.stringify(_this.state.oldSelect));
				var newArray = [];
				olds.forEach(function (vitem) {
					var filterArray = arr.filter(function (v) {
						return v.id === vitem.userId;
					});
					if (filterArray.length > 0) {
						newArray.push.apply(newArray, _toConsumableArray(filterArray));
					}
				});
				_this.setState({
					rightSelect: Object.assign([], newArray)
				});
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.rightSelect));
			var users = dataArray.map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: ""
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});

			// oldSelect
			var oldS = JSON.parse(JSON.stringify(_this.state.rightSelect));
			if (!oldS.filter(function (item) {
				return item.id == param.id;
			}).length > 0) {
				// 之前已选中
				_this.setState({
					rightSelect: [].concat(_toConsumableArray(_this.state.rightSelect), [param])
				});
			}
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});

			// 右侧删除
			var rightS = JSON.parse(JSON.stringify(_this.state.rightSelect));
			var olindex = rightS.findIndex(function (item) {
				return item.id == param.id;
			});
			rightS.splice(olindex, 1);
			_this.setState({
				rightSelect: rightS
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				}, function () {
					_this.init();
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: [], // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [], // 筛选数据
			rightSelect: [] // 右侧选择
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			var _this2 = this;

			this.setState({
				oldSelect: nextProps.data
			}, function () {
				_this2.init();
			});
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var params = "";
			// 未选的全部用户
			this.props.UserStore.getRole(params).then(function (res) {
				_this3.setState({
					defaultData: res.body.map(function (item) {
						return Object.assign(item, { selected: false });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text,
			    rightSelect = _state2.rightSelect;
			var _props = this.props,
			    disabled = _props.disabled,
			    title = _props.title;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					_react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: title || "添加负责人",
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								rightSelect && rightSelect.length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								rightSelect.length > 0 && rightSelect.map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd;

/***/ }),

/***/ 2030:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 发送邮件
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _EditableTagEmail = __webpack_require__(2023);

var _EditableTagEmail2 = _interopRequireDefault(_EditableTagEmail);

var _PersonAdd = __webpack_require__(2029);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SendEmail = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(SendEmail, _React$Component);

    function SendEmail(props) {
        _classCallCheck(this, SendEmail);

        var _this2 = _possibleConstructorReturn(this, (SendEmail.__proto__ || Object.getPrototypeOf(SendEmail)).call(this, props));

        _this2.sendReport = function () {
            var _this = _this2;
            var _this$state = _this.state,
                emails = _this$state.emails,
                userIds = _this$state.userIds,
                ccEmails = _this$state.ccEmails,
                ccUserIds = _this$state.ccUserIds;

            var isemailUserIds = userIds == null ? [] : userIds;
            var isemails = emails == null ? [] : emails;
            // 选择收件人
            if (isemailUserIds.length == 0 && isemails.length == 0) {
                _antd.message.warn("请先选择邮件收件人");
                return false;
            }
            var obj = _this2.props.obj;

            var params = {
                ho: obj,
                emails: emails,
                userIds: userIds == null ? [] : userIds.map(function (item) {
                    return item.userId;
                }),
                ccEmails: ccEmails,
                ccUserIds: ccUserIds == null ? [] : ccUserIds.map(function (item) {
                    return item.userId;
                })
            };
            _this2.store.sendStartMeetingEmail(params).then(function (res) {
                if (res == true) {
                    _antd.message.success("邮件发送成功");
                    //this.reset();
                }
            });
        };

        _this2.updateState = function (type, data) {
            _this2.setState(_defineProperty({}, type, Object.assign([], data)));
        };

        _this2.reset = function () {
            _this2.setState({
                emails: [], // 邮件
                userIds: [], // 用户
                ccEmails: [], // 抄送邮件
                ccUserIds: [] // 抄送用户
            });
        };

        _this2.store = _this2.props.store;
        _this2.state = {
            emails: [], // 邮件
            userIds: _this2.props.userIds || [], // 用户
            ccEmails: [],
            ccUserIds: []
        };
        return _this2;
    }

    _createClass(SendEmail, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.reset();
        }
    }, {
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps) {
            if (nextProps.userIds != this.props.userIds) {
                this.setState({
                    userIds: nextProps.userIds
                });
            }
            if (nextProps.emailUsers != this.props.emailUsers) {
                var users = nextProps.emailUsers.map(function (item) {
                    return { "userId": item.id, "userName": item.userName };
                });
                this.setState({
                    ccUserIds: users
                });
            }
        }
    }, {
        key: 'render',
        value: function render() {
            var formItemLayoutWithOutLabel = {
                wrapperCol: {
                    xs: { span: 24, offset: 0 },
                    sm: { span: 20, offset: 3 }
                }
            };
            var _state = this.state,
                emails = _state.emails,
                userIds = _state.userIds,
                ccEmails = _state.ccEmails,
                ccUserIds = _state.ccUserIds;


            return _react2.default.createElement(
                _antd.Form,
                null,
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u5185\u5BB9\u53D1\u9001'
                ),
                _react2.default.createElement(
                    _antd.Form.Item,
                    formItemLayoutWithOutLabel,
                    _react2.default.createElement(
                        _antd.Button,
                        {
                            style: { position: 'relative', top: '4px' },
                            className: 'fl',
                            type: 'link',
                            onClick: this.sendReport },
                        '\u70B9\u51FB\u53D1\u9001\u90AE\u4EF6'
                    )
                ),
                _react2.default.createElement(
                    _antd.Form.Item,
                    formItemLayoutWithOutLabel,
                    _react2.default.createElement(
                        'div',
                        { className: 'fl mr25 ml15' },
                        _react2.default.createElement(
                            'span',
                            null,
                            '\u6536\u4EF6\u4EBA\uFF1A'
                        ),
                        _react2.default.createElement(_EditableTagEmail2.default, {
                            title: '\u6DFB\u52A0\u6536\u4EF6\u4EBA\u5730\u5740',
                            data: emails,
                            updateState: this.updateState.bind(this, 'emails')
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'fl', style: { minWidth: '80px' } },
                        _react2.default.createElement(_PersonAdd2.default, {
                            data: userIds,
                            updatePerson: this.updateState.bind(this, 'userIds'),
                            disabled: false,
                            title: '\u6DFB\u52A0\u6536\u4EF6\u4EBA'
                        })
                    )
                ),
                _react2.default.createElement(
                    _antd.Form.Item,
                    formItemLayoutWithOutLabel,
                    _react2.default.createElement(
                        'div',
                        { className: 'fl mr25 ml15' },
                        _react2.default.createElement(
                            'span',
                            null,
                            '\u6284\u9001\u4EBA\uFF1A'
                        ),
                        _react2.default.createElement(_EditableTagEmail2.default, {
                            title: '\u6DFB\u52A0\u6284\u9001\u4EBA\u5730\u5740',
                            data: ccEmails,
                            updateState: this.updateState.bind(this, 'ccEmails')
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'fl', style: { minWidth: '80px' } },
                        _react2.default.createElement(_PersonAdd2.default, {
                            data: ccUserIds,
                            updatePerson: this.updateState.bind(this, 'ccUserIds'),
                            disabled: false,
                            title: '\u6DFB\u52A0\u6284\u9001\u4EBA'
                        })
                    )
                )
            );
        }
    }]);

    return SendEmail;
}(_react2.default.Component)) || _class;

exports.default = SendEmail;

/***/ }),

/***/ 2031:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            *项目管理
            *qiufh@bocspace.cn
            */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _BaseInfoTempItemThree = __webpack_require__(2019);

var _BaseInfoTempItemThree2 = _interopRequireDefault(_BaseInfoTempItemThree);

var _MainProItemThree = __webpack_require__(2025);

var _MainProItemThree2 = _interopRequireDefault(_MainProItemThree);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ThreeItem = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ThreeItem, _React$Component);

	function ThreeItem(props) {
		_classCallCheck(this, ThreeItem);

		var _this = _possibleConstructorReturn(this, (ThreeItem.__proto__ || Object.getPrototypeOf(ThreeItem)).call(this, props));

		_this.saveContents = function (dataSource) {
			console.log("dataSource=========>", dataSource);
			_this.setState({ btThreeList: dataSource });
		};

		_this.savePolicy = function (dataSource) {};

		_this.saveDecisionItem = function (row) {
			var taskDetail = _this.store.taskDetail;
			var btThreeList = _this.state.btThreeList;

			var newItem = {
				"buildTeamThree": taskDetail.id,
				"orders": btThreeList.length + 1,
				"item": row.item,
				"level": row.level
			};
			if (typeof row.id !== "undefined") {
				newItem['id'] = row.id;
				newItem['orders'] = row.orders;
			}
			_this.saveBuildTeamThreeItem({ "btti": newItem });
			// console.log('newItem',row)
		};

		_this.getPolicyDecisonLevelByLevel = function () {
			[1, 2, 3, 4].forEach(function (level) {
				_this.getPolicyDecision(level);
			});
		};

		_this.getPolicyDecision = function (level) {
			var pDataList = _this.state.pDataList;
			var _this$store = _this.store,
			    taskDetail = _this$store.taskDetail,
			    buildTeamTwoMainObj = _this$store.buildTeamTwoMainObj;

			_this.store.getPolicyDecisionList({ "taskId": taskDetail.id, "level": level }).then(function (res) {
				var newPDataList = pDataList.map(function (item, index) {
					if (index + 1 === level) {
						return Object.assign(item, { "masters": res });
					} else {
						return item;
					}
				});
				_this.setState({ pDataList: newPDataList });
			});
		};

		_this.savePolicyDecisionByLevel = function (row) {
			var taskDetail = _this.store.taskDetail;

			console.log("row=>", row);
			var masters = row.masters;

			var userInfos = masters.map(function (item, index) {
				return Object.assign({ "id": item.userId, "userName": item.userName });
			});
			_this.store.savePolicyDecisionByLevel({ "userInfos": userInfos, "taskId": taskDetail.id, "level": row.keyIndex }).then(function (res) {});
		};

		_this.getBuildTeamThreeItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamThreeItemList({ "taskId": taskDetail.id }).then(function (res) {
				_this.setState({ btThreeList: res });
			});
		};

		_this.saveBuildTeamThreeItem = function (parmas) {
			_this.store.saveBuildTeamThreeItem(parmas).then(function (res) {
				_this.getBuildTeamThreeItemList();
			});
		};

		_this.doneAndNext = function () {
			if (!_this.checkFormRequire()) return;
			var currentStep = _this.props.currentStep;

			_this.props.overCurrentStageTask();
			_this.props.switchSteps(currentStep + 1);
		};

		_this.overCurrentStage = function () {
			if (!_this.checkFormRequire()) return;
			_this.props.overCurrentStageTask();
			_this.getHandoverThree();
			_this.getEnclosureList();
		};

		_this.checkFormRequire = function () {
			var handoverThreeObj = _this.store.handoverThreeObj;
			var dataSource = _this.state.dataSource;

			var hto = mobx.toJS(handoverThreeObj);
			if (hto.productType.length === 0 || hto.productType === null || hto.priceSensitivity === null || hto.priceSensitivity === "" || hto.cooperations === null || hto.cooperations === "" || hto.managerCount === null || hto.managerCount === "" || hto.workerCount === null || hto.workerCount === "" || hto.expectedDesignTime === null || hto.expectedDesignTime === 0 || hto.plannedArrivalTime === null || hto.plannedArrivalTime === 0 || hto.basicCondition === null || hto.basicCondition === "" || hto.powerCondition === null || hto.powerCondition === "" || hto.areaRage === null || hto.areaRage === "" || hto.boxCount === null || hto.boxCount === "") {
				_antd.message.warn("请检查必填字段是否已经全部填写");
				return false;
			}
			var dsCheck = dataSource.filter(function (item, index) {
				return item.isMust === 1 && item.enclosureItems.length === 0;
			});
			if (dsCheck.length > 0) {
				_antd.message.warn("请检查附件列表中必需上传项是否已经上传附件");
				return false;
			}
			return true;
		};

		_this.getEnclosureList = function () {
			var _this$store2 = _this.store,
			    taskDetail = _this$store2.taskDetail,
			    projectDetail = _this$store2.projectDetail;

			_this.store.getEnclosureList({ "taskId": mobx.toJS(taskDetail).id, indexs: 3 }).then(function (res) {
				_this.store.enclosureList = res;
				_this.setState({ dataSource: res, enclosureList: res });
			});
		};

		_this.saveHandoverThree = function (newObj) {
			var _this$store3 = _this.store,
			    handoverThreeObj = _this$store3.handoverThreeObj,
			    taskDetail = _this$store3.taskDetail;


			_this.store.saveHandoverThree({ "ho": Object.assign(mobx.toJS(handoverThreeObj), { "taskId": taskDetail.id }, newObj) }).then(function (res) {
				if (res) {
					_this.getHandoverThree();
				}
			});
		};

		_this.getHandoverThree = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getHandoverThree({ "taskId": taskDetail.id }).then(function (res) {
				_this.store.handoverThreeObj = res;
			});
		};

		_this.updateHandOver = function (type, e) {
			var newObj = {};
			if (type == "boxCount") {
				// 箱体数量
				newObj[type] = e.target.value == null || e.target.value == "" ? 0 : Number(e.target.value);
			} else {
				newObj[type] = e.target.value;
			}
			_this.saveHandoverThree(newObj);
		};

		_this.updateHandOverDate = function (type, date) {
			var newObj = {};
			newObj[type] = date;
			_this.saveHandoverThree(newObj);
		};

		_this.updateHandOverBC = function (type, bfData) {
			var newObj = {};
			newObj[type] = bfData;
			_this.saveHandoverThree(newObj);
		};

		_this.saveContents = function () {
			_this.getEnclosureList();
		};

		_this.saveItem = function (row) {
			var dataSource = _this.state.dataSource;
			var taskDetail = _this.store.taskDetail;

			var em = { taskId: taskDetail.id, name: '', indexs: 3, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
			if (row.id !== undefined && row.id[0] !== "!") {
				em['id'] = row.id;
				em['orders'] = row.orders;
				em['enclosureItems'] = row.enclosureItems;
				em['templates'] = row.templates;
				em['cases'] = row.cases;
				em['name'] = row.name;
			}
			var parmas = { "em": em, taskId: taskDetail.id, indexs: 3 };
			_this.store.saveEnclosureMain(parmas).then(function (res) {
				_this.getEnclosureList();
			});
		};

		_this.checkFormRequreBit = function (result) {
			_this.setState({ bitFormRequire: result });
		};

		_this.store = _this.props.store;
		_this.state = {
			visible: false,
			stateValue: 0,
			id: "",
			btThreeList: [],
			dataSource: [],
			bitFormRequire: false
		};
		return _this;
	}

	_createClass(ThreeItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getHandoverThree();
			this.getEnclosureList();
			// this.BaseInfoTempItemThree.checkFormValidate();
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var handoverState = this.store.handoverState;
			var dataSource = this.state.dataSource;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;


			return _react2.default.createElement(
				'div',
				{ style: { height: 'auto' } },
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.props.reStartHandover,
							style: handoverState.state3 === 2 ? { display: '', cursor: 'pointer' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_tips' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							null,
							'\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u6280\u672F\u4EA4\u63A5\u662F\u5E2E\u52A9\u9879\u76EE\u7ECF\u7406\u7684\u8BBE\u8BA1\u4EBA\u5458\u4E86\u89E3\u6280\u672F\u8BBE\u8BA1\u6240\u9700\u4FE1\u606F\uFF0C\u8BF7\u8BA4\u771F\u586B\u5199\u54E6~'
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u4E34\u5EFA\u57FA\u672C\u4FE1\u606F:'
					),
					_react2.default.createElement(_BaseInfoTempItemThree2.default, { onRef: function onRef(node) {
							return _this2.BaseInfoTempItemThree = node;
						}, checkFormRequre: this.checkFormRequreBit, updateHandOver: this.updateHandOver, updateHandOverDate: this.updateHandOverDate, updateHandOverBC: this.updateHandOverBC, store: this.store })
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u4E3B\u4F53\u9879\u76EE\u4FE1\u606F:'
					),
					_react2.default.createElement(_MainProItemThree2.default, { updateHandOver: this.updateHandOver, store: this.store })
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u9644\u4EF6:'
					),
					_react2.default.createElement(_EditableTableUpload2.default, {
						id: 'id',
						store: this.store,
						dataSource: dataSource.map(function (item, index) {
							return Object.assign(item, { "keyIndex": index + 1 });
						}),
						saveData: this.saveContents,
						saveItem: this.saveItem,
						disabled: handoverState.state3 === 2 ? true : false,
						pid: ''
					})
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: handoverState.state3 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStage,
							ghost: true,
							type: 'primary'
						},
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: handoverState.state3 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep - 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0A\u4E00\u6B65'
					)
				)
			);
		}
	}]);

	return ThreeItem;
}(_react2.default.Component)) || _class) || _class;

exports.default = ThreeItem;

/***/ }),

/***/ 2032:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            *项目管理
            *qiufh@bocspace.cn
            */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _uuid = __webpack_require__(79);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _download = __webpack_require__(68);

var _BaseInfoItemTwo = __webpack_require__(2018);

var _BaseInfoItemTwo2 = _interopRequireDefault(_BaseInfoItemTwo);

var _ContractItemTwo = __webpack_require__(2020);

var _ContractItemTwo2 = _interopRequireDefault(_ContractItemTwo);

var _OthersItemTwo = __webpack_require__(2028);

var _OthersItemTwo2 = _interopRequireDefault(_OthersItemTwo);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

var _EditableTableInventory = __webpack_require__(2022);

var _EditableTableInventory2 = _interopRequireDefault(_EditableTableInventory);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var InputGroup = _antd.Input.Group;
var Option = _antd.Select.Option;
var RangePicker = _antd.DatePicker.RangePicker;
var Search = _antd.Input.Search;

var TwoItem = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(TwoItem, _React$Component);

	function TwoItem(props) {
		_classCallCheck(this, TwoItem);

		var _this = _possibleConstructorReturn(this, (TwoItem.__proto__ || Object.getPrototypeOf(TwoItem)).call(this, props));

		_this.getBuildTeamTwoItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getBuildTeamTwoItemList({ "taskId": taskDetail.id }).then(function (res) {
				_this.setState({ bttiList: res });
			});
		};

		_this.saveBuildTeamTwoItem = function (params) {
			_this.store.saveBuildTeamTwoItem(params).then(function (res) {
				_this.getBuildTeamTwoItemList();
			});
		};

		_this.saveContents = function (dataSource) {
			_this.setState({ bttiList: dataSource });
		};

		_this.convertToTableData = function () {
			var _this$state = _this.state,
			    dataList = _this$state.dataList,
			    bttiList = _this$state.bttiList;


			return dataList.map(function (item, index) {
				return Object.assign(item, { "dataType": "main" });
			}).concat(bttiList.map(function (item, index) {
				return Object.assign(item, { "dataType": "item", "keyIndex": dataList.length + 1 + index });
			}));
		};

		_this.saveFormRef = function (formRef) {
			_this.formRef = formRef;
		};

		_this.overCurrentStage = function () {
			if (!_this.checkFormRequire()) return;
			_this.props.overCurrentStageTask();
			_this.getHandoverTwo();
			_this.getEnclosureList();
		};

		_this.doneAndNext = function () {
			if (!_this.checkFormRequire()) return;
			var currentStep = _this.props.currentStep;

			_this.props.overCurrentStageTask();
			_this.props.switchSteps(currentStep + 1);
		};

		_this.checkFormRequire = function () {
			var handoverTwoObj = _this.store.handoverTwoObj;
			var dataSource = _this.state.dataSource;

			var hto = mobx.toJS(handoverTwoObj);
			if (hto.companyName === null || hto.companyName === "" || hto.cooperations === null || hto.cooperations === "" || hto.glodonRelationship === null || hto.glodonRelationship === "" || hto.bocspaceRelationship === null || hto.bocspaceRelationship === "" || hto.customerExpectations === null || hto.customerExpectations === "" || hto.customerExpectations === "<p></p>" || hto.promise === null || hto.promise === "" || hto.promise === "<p></p>" || hto.purpose === null || hto.purpose === "" || hto.turnoverCount === null || hto.turnoverCount === "") {
				_antd.message.warn("请检查项目基本情况是否已经全部填写");
				return false;
			}

			if (hto.centralized === 1 && (hto.centralizeCompany === "" || hto.centralizeCompany === null)) {
				_antd.message.warn("集采单位名称是否已经填写");
				return false;
			}

			if (hto.deliverRange === null || hto.deliverRange === "" || hto.deliverNode === null || hto.deliverNode === "" || hto.requirementBeginTime === null || hto.requirementEndTime === null || hto.contractMoney === null) {
				_antd.message.warn("请检查合同解读是否已经全部填写");
				return false;
			}
			var dsCheck = dataSource.filter(function (item, index) {
				return item.isMust === 1 && item.enclosureItems.length === 0;
			});
			if (dsCheck.length > 0) {
				_antd.message.warn("请检查附件列表中必需上传项是否已经上传附件");
				return false;
			}
			return true;
		};

		_this.getEnclosureList = function () {
			var _this$store = _this.store,
			    taskDetail = _this$store.taskDetail,
			    projectDetail = _this$store.projectDetail;

			_this.store.getEnclosureList({ "taskId": mobx.toJS(taskDetail).id, indexs: 2 }).then(function (res) {
				_this.store.enclosureList = res;
				_this.setState({ dataSource: res, enclosureList: res });
			});
		};

		_this.getHandoverTwo = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getHandoverTwo({ "taskId": taskDetail.id }).then(function (res) {
				if (res) {
					_this.store.handoverTwoObj = res;
					_this.setState({
						dataSourceInventory: res.contractList == null ? [] : res.contractList.map(function (v, vindex) {
							return Object.assign(v, { rate: "13%", key: vindex + 1 });
						})
					});
				}
			});
		};

		_this.saveHandoverTwo = function (newObj) {
			var _this$store2 = _this.store,
			    handoverTwoObj = _this$store2.handoverTwoObj,
			    taskDetail = _this$store2.taskDetail;

			_this.store.saveHandoverTwo({ "ho": Object.assign(mobx.toJS(handoverTwoObj), { "taskId": taskDetail.id }, newObj) }).then(function (res) {
				if (res) {
					_this.getHandoverTwo();
				}
			});
		};

		_this.updateHandOver = function (type, e) {
			var newObj = {};
			if (type == "turnoverCount") {
				// 周转次数
				newObj[type] = e.target.value == null || e.target.value == "" ? 0 : Number(e.target.value);
			} else {
				newObj[type] = e.target.value;
			}
			_this.saveHandoverTwo(newObj);
		};

		_this.updateHandOver2 = function (type, value) {
			var newObj = {};
			newObj[type] = value;
			_this.saveHandoverTwo(newObj);
		};

		_this.updateHandOver3 = function (newObj) {
			_this.saveHandoverTwo(newObj);
		};

		_this.updateHandOverBC = function (type, bfData) {
			var newObj = {};
			newObj[type] = bfData;
			_this.saveHandoverTwo(newObj);
		};

		_this.saveContents = function () {
			_this.getEnclosureList();
		};

		_this.checkFormRequreBackground = function (result) {
			_this.setState({ baseInfoFormRequire: result });
		};

		_this.checkFormRequreContract = function (result) {
			_this.setState({ contractFormRequire: result });
		};

		_this.saveItem = function (row) {
			var dataSource = _this.state.dataSource;
			var taskDetail = _this.store.taskDetail;

			var em = { taskId: taskDetail.id, name: '', indexs: 2, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
			if (row.id !== undefined && row.id[0] !== "!") {
				em['id'] = row.id;
				em['orders'] = row.orders;
				em['enclosureItems'] = row.enclosureItems;
				em['templates'] = row.templates;
				em['cases'] = row.cases;
				em['name'] = row.name;
			}
			var parmas = { "em": em, taskId: taskDetail.id, indexs: 2 };
			_this.store.saveEnclosureMain(parmas).then(function (res) {
				_this.getEnclosureList();
			});
		};

		_this.updateState = function (type, data) {
			_this.setState(_defineProperty({}, type, Object.assign([], data)));
			var newData = JSON.parse(JSON.stringify(data));
			if (newData.length > 0) {
				newData.map(function (v) {
					if (v.key) delete v.key;
					if (v.rate) delete v.rate;
					return v;
				});
			}
			_this.updateHandOverBC("contractList", newData);
		};

		_this.store = _this.props.store;
		_this.state = {
			dataSource: [],
			bttiList: [],
			visible: false,
			stateValue: 0,
			id: "",
			baseInfoFormRequire: false,
			contractFormRequire: false,
			dataSourceInventory: []
		};
		return _this;
	}

	_createClass(TwoItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getHandoverTwo();
			this.getEnclosureList();
			// this.BaseInfoItemTwo.checkFormValidate();
			// this.ContractItemTwo.checkFormValidate();
		}

		// 通过wrappedComponentRef获取子组件的ref


		// 更新合同清单

	}, {
		key: 'render',
		value: function render() {
			var _this2 = this,
			    _React$createElement;

			var handoverState = this.store.handoverState;
			var _state = this.state,
			    dataList = _state.dataList,
			    bttiList = _state.bttiList,
			    dataSource = _state.dataSource,
			    dataSourceInventory = _state.dataSourceInventory;
			var _props = this.props,
			    currentStep = _props.currentStep,
			    switchSteps = _props.switchSteps;

			return _react2.default.createElement(
				'div',
				{ className: 'mt30' },
				_react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						_antd.Button,
						{
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.props.reStartHandover,
							style: handoverState.state2 === 2 ? { display: '', cursor: 'pointer' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'daily_tips' },
					_react2.default.createElement(
						'p',
						null,
						_react2.default.createElement(
							'span',
							null,
							'\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u5546\u52A1\u4EA4\u63A5\u53EF\u4EE5\u5E2E\u52A9\u9879\u76EE\u7ECF\u7406\u5FEB\u901F\u4E86\u89E3\u5BA2\u6237\u53CA\u9879\u76EE\u4E3B\u8981\u4FE1\u606F\uFF0C\u8BF7\u5546\u52A1\u8010\u5FC3\u7ED9\u9879\u76EE\u7ECF\u7406\u89E3\u7B54\u54E6~'
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u9879\u76EE\u57FA\u672C\u60C5\u51B5:'
					),
					_react2.default.createElement(_BaseInfoItemTwo2.default, { updateHandOver3: this.updateHandOver3, updateHandOver2: this.updateHandOver2, onRef: function onRef(node) {
							return _this2.BaseInfoItemTwo = node;
						}, checkFormRequre: this.checkFormRequreBackground, updateHandOverBC: this.updateHandOverBC, updateHandOver: this.updateHandOver, store: this.store })
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u5408\u540C\u89E3\u8BFB:'
					),
					_react2.default.createElement(_ContractItemTwo2.default, (_React$createElement = {
						updateHandOver3: this.updateHandOver3, updateHandOver2: this.updateHandOver2,
						onRef: function onRef(node) {
							return _this2.ContractItemTwo = node;
						}, checkFormRequre: this.checkFormRequreContract, updateHandOver: this.updateHandOver }, _defineProperty(_React$createElement, 'updateHandOver2', this.updateHandOver2), _defineProperty(_React$createElement, 'store', this.store), _React$createElement))
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u5408\u540C\u6E05\u5355:'
					),
					_react2.default.createElement(_EditableTableInventory2.default, {
						disabled: handoverState.state2 === 2 ? true : false,
						dataSource: dataSourceInventory,
						store: this.store,
						updateState: this.updateState.bind(this, "dataSourceInventory")
					})
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label' },
						'\u5176\u4ED6:'
					),
					_react2.default.createElement(_OthersItemTwo2.default, { updateHandOverBC: this.updateHandOverBC, updateHandOver: this.updateHandOver, store: this.store })
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					_react2.default.createElement(
						'div',
						{ className: 'require_label mb10' },
						'\u9644\u4EF6:'
					),
					_react2.default.createElement(_EditableTableUpload2.default, {
						id: 'id',
						store: this.store,
						dataSource: dataSource.map(function (item, index) {
							return Object.assign(item, { "keyIndex": index + 1 });
						}),
						saveData: this.saveContents,
						saveItem: this.saveItem,
						disabled: handoverState.state2 === 2 ? true : false,
						pid: ''
					})
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: handoverState.state2 !== 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStage,
							ghost: true,
							type: 'primary'
						},
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					),
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
						' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: handoverState.state2 === 2 ? { display: 'flex', justifyContent: 'center' } : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep + 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0B\u4E00\u6B65'
					)
				)
			);
		}
	}]);

	return TwoItem;
}(_react2.default.Component)) || _class) || _class;

exports.default = TwoItem;

/***/ }),

/***/ 2039:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _dec, _dec2, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _OrgChart = __webpack_require__(2043);

var _OrgChart2 = _interopRequireDefault(_OrgChart);

var _Document = __webpack_require__(1618);

var _Document2 = _interopRequireDefault(_Document);

var _braftEditor = __webpack_require__(339);

var _braftEditor2 = _interopRequireDefault(_braftEditor);

__webpack_require__(338);

var _MyUpload = __webpack_require__(2042);

var _MyUpload2 = _interopRequireDefault(_MyUpload);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactZmage = __webpack_require__(1522);

var _reactZmage2 = _interopRequireDefault(_reactZmage);

var _PersonAdd = __webpack_require__(1881);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * 新建
                                                                                                                                                                                                                             * dangw@glodon.com
                                                                                                                                                                                                                             * */


var Option = _antd.Select.Option;
var RangePicker = _antd.DatePicker.RangePicker;
var TextArea = _antd.Input.TextArea;

var dateFormat = 'YYYY-MM-DD';

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
    var form = _ref.form,
        index = _ref.index,
        props = _objectWithoutProperties(_ref, ['form', 'index']);

    return _react2.default.createElement(
        EditableContext.Provider,
        { value: form },
        _react2.default.createElement('tr', props)
    );
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
    _inherits(EditableCell, _React$Component);

    function EditableCell() {
        var _ref2;

        var _temp, _this2, _ret;

        _classCallCheck(this, EditableCell);

        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
        }

        return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
            editing: true //false,
        }, _this2.toggleEdit = function () {
            var editing = !_this2.state.editing;
            _this2.setState({ editing: editing }, function () {
                if (editing) {
                    _this2.input.focus();
                }
            });
        }, _this2.save = function (type, e) {
            var _this2$props = _this2.props,
                record = _this2$props.record,
                handleSave = _this2$props.handleSave;

            _this2.form.validateFields(function (error, values) {
                if (error && error[e.currentTarget.id]) {
                    return;
                }
                handleSave(_extends({}, record, _defineProperty({}, type, values[type])));
            });
        }, _this2.handDate = function (type, date, dateString) {
            var val = dateString == null || dateString == "" ? 0 : (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
            var _this2$props2 = _this2.props,
                record = _this2$props2.record,
                handleSave = _this2$props2.handleSave;

            handleSave(_extends({}, record, _defineProperty({}, type, val)));
        }, _this2.updatePerson = function (params) {
            var _this2$props3 = _this2.props,
                record = _this2$props3.record,
                handleSave = _this2$props3.handleSave;

            handleSave(_extends({}, record, {
                "buildTeamOneId": params.length == 0 ? "" : params[0].userId,
                "buildTeamName": params.length == 0 ? "" : params[0].userName
            }));
        }, _this2.onChange = function (type, value) {
            var _this2$props4 = _this2.props,
                record = _this2$props4.record,
                handleSave = _this2$props4.handleSave;

            handleSave(_extends({}, record, _defineProperty({}, type, value)));
        }, _this2.renderCell = function (form) {
            _this2.form = form;
            var _this2$props5 = _this2.props,
                children = _this2$props5.children,
                dataIndex = _this2$props5.dataIndex,
                record = _this2$props5.record,
                title = _this2$props5.title;
            var editing = _this2.state.editing;


            if (dataIndex == "enterTime") {
                // 进场日期
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex] == null || record[dataIndex] == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(record[dataIndex]).format('YYYY-MM-DD'), "YYYY-MM-DD")
                    })(_react2.default.createElement(_antd.DatePicker, {
                        allowClear: false,
                        style: { width: "100%" },
                        format: 'YYYY-MM-DD',
                        placeholder: '\u8BF7\u9009\u62E9',
                        onChange: _this2.handDate.bind(_this2, dataIndex)
                    }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            } else if (dataIndex == "enterBeginTime") {
                // 材料进场日期
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }]
                        /*initialValue: record[dataIndex]== null || record[dataIndex] == 0 ? []:
                            [
                                moment(moment(record["enterBeginTime"]).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                                moment(moment(record["enterEndTime"]).format('YYYY-MM-DD'), "YYYY-MM-DD")
                            ],*/
                    })(_react2.default.createElement(
                        'div',
                        { className: 'w' },
                        _react2.default.createElement(_antd.DatePicker, {
                            value: record["enterBeginTime"] == null || record["enterBeginTime"] == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(record["enterBeginTime"]).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                            allowClear: false,
                            style: { width: "40%" },
                            format: 'YYYY-MM-DD',
                            placeholder: '\u8BF7\u9009\u62E9',
                            onChange: _this2.handDate.bind(_this2, "enterBeginTime")
                        }),
                        _react2.default.createElement(
                            'span',
                            { style: { margin: "0 15px", display: "inline-block" } },
                            '-'
                        ),
                        _react2.default.createElement(_antd.DatePicker, {
                            value: record["enterEndTime"] == null || record["enterEndTime"] == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(record["enterEndTime"]).format('YYYY-MM-DD'), "YYYY-MM-DD"),
                            allowClear: false,
                            style: { width: "40%" },
                            format: 'YYYY-MM-DD',
                            placeholder: '\u8BF7\u9009\u62E9',
                            onChange: _this2.handDate.bind(_this2, "enterEndTime")
                        })
                    ))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            } else if (dataIndex == "buildTeamOneId") {
                // 交底人
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }]
                    })(_react2.default.createElement(_PersonAdd2.default, {
                        data: record["buildTeamOneId"] == null || record["buildTeamOneId"] == "" ? [] : [{
                            userId: record["buildTeamOneId"],
                            userName: record["buildTeamName"]
                        }],
                        updatePerson: _this2.updatePerson
                    }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            } else if (dataIndex == "type") {
                // 风险类型
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex] == null || record[dataIndex] == "" ? "" : record[dataIndex]
                    })(_react2.default.createElement(
                        _antd.Select,
                        { style: { width: 100 },
                            ref: function ref(node) {
                                return _this2.input = node;
                            },
                            onChange: _this2.onChange.bind(_this2, dataIndex)
                        },
                        _react2.default.createElement(
                            Option,
                            { value: '\u8BBE\u8BA1\u98CE\u9669' },
                            '\u8BBE\u8BA1\u98CE\u9669'
                        ),
                        _react2.default.createElement(
                            Option,
                            { value: '\u6210\u672C\u98CE\u9669' },
                            '\u6210\u672C\u98CE\u9669'
                        ),
                        _react2.default.createElement(
                            Option,
                            { value: '\u8FDB\u5EA6\u98CE\u9669' },
                            '\u8FDB\u5EA6\u98CE\u9669'
                        ),
                        _react2.default.createElement(
                            Option,
                            { value: '\u8D28\u91CF\u98CE\u9669' },
                            '\u8D28\u91CF\u98CE\u9669'
                        )
                    ))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            } else if (dataIndex == "describes" || dataIndex == "programme") {
                //
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex] == null || record[dataIndex] == "" ? "" : record[dataIndex]
                    })(_react2.default.createElement(TextArea, {
                        placeholder: '\u8BF7\u8F93\u5165',
                        onBlur: _this2.save.bind(_this2, dataIndex),
                        autoSize: { minRows: 2, maxRows: 6 }
                    }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            } else {
                return editing ? _react2.default.createElement(
                    _antd.Form.Item,
                    { style: { margin: 0 } },
                    form.getFieldDecorator(dataIndex, {
                        rules: [{
                            required: false,
                            message: title + ' is required.'
                        }],
                        initialValue: record[dataIndex]
                    })(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
                            return _this2.input = node;
                        }, onPressEnter: _this2.save.bind(_this2, dataIndex), onBlur: _this2.save.bind(_this2, dataIndex) }))
                ) : _react2.default.createElement(
                    'div',
                    {
                        className: 'editable-cell-value-wrap',
                        style: { paddingRight: 24, minHeight: "34px" },
                        onClick: _this2.toggleEdit
                    },
                    children
                );
            }
        }, _temp), _possibleConstructorReturn(_this2, _ret);
    }

    // 日期


    // 日期2
    /*handDate2 = (type, date, dateString) => {
        const {record, handleSave} = this.props;
        handleSave({...record, ...{
                 "enterBeginTime": moment(dateString[0], 'YYYY-MM-DD').valueOf(),
                 "enterEndTime": moment(dateString[1], 'YYYY-MM-DD').valueOf()
            }});
    }*/

    // 交底人


    // 风险类型


    _createClass(EditableCell, [{
        key: 'render',
        value: function render() {
            var _props = this.props,
                editable = _props.editable,
                dataIndex = _props.dataIndex,
                title = _props.title,
                record = _props.record,
                index = _props.index,
                handleSave = _props.handleSave,
                children = _props.children,
                restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

            return _react2.default.createElement(
                'td',
                restProps,
                editable ? _react2.default.createElement(
                    EditableContext.Consumer,
                    null,
                    this.renderCell
                ) : children
            );
        }
    }]);

    return EditableCell;
}(_react2.default.Component);

var Add = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = _dec2(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
    _inherits(Add, _React$Component2);

    function Add(props) {
        _classCallCheck(this, Add);

        var _this3 = _possibleConstructorReturn(this, (Add.__proto__ || Object.getPrototypeOf(Add)).call(this, props));

        _this3.getMakePlot = function () {
            var projectId = _this3.store.projectId;
            _this3.store.getMakePlot({ 'projectId': projectId }).then(function (res) {
                // console.log(res, '666')
                if (res) {
                    _this3.setState({
                        makePlotInfo: res.makePlotInfo,
                        buildTeamTwoMain: res.buildTeamTwoMain,
                        makePlotCost: res.makePlotCost,
                        makePlotPeople: Array.isArray(res.makePlotPeople) ? res.makePlotPeople.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotMachine: Array.isArray(res.makePlotMachine) ? res.makePlotMachine.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotMaterial: Array.isArray(res.makePlotMaterial) ? res.makePlotMaterial.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotQuality: Array.isArray(res.makePlotQuality) ? res.makePlotQuality.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotRisk: Array.isArray(res.makePlotRisk) ? res.makePlotRisk.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotSafe: Array.isArray(res.makePlotSafe) ? res.makePlotSafe.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : []
                    }, function () {
                        // 表单
                        _this3.props.form.setFieldsValue({
                            organizationRemark: res.makePlotInfo.organizationRemark == null || res.makePlotInfo.organizationRemark == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.makePlotInfo.organizationRemark),
                            planImageRemark: res.makePlotInfo.planImageRemark == null || res.makePlotInfo.planImageRemark == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.makePlotInfo.planImageRemark),
                            remark: res.makePlotCost.remark == null || res.makePlotCost.remark == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res.makePlotCost.remark)
                        });
                    });
                }
            });
        };

        _this3.handleBChange = function (type, bfData) {
            //console.log(type, BraftEditor.createEditorState(bfData).toHTML())
            var value = _braftEditor2.default.createEditorState(bfData).toHTML();
            var makePlotInfo = JSON.parse(JSON.stringify(_this3.state.makePlotInfo));
            makePlotInfo[type] = value;
            _this3.store.saveMakePlotInfo({ info: makePlotInfo }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this3.setState({ makePlotInfo: res }, function () {
                        // 表单
                        _this3.props.form.setFieldsValue(_defineProperty({}, type, res[type] == null || res[type] == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res[type])));
                    });
                }
            });
        };

        _this3.handleConfirmBlur = function (type, e) {
            var value = e.target.value;
            //console.log(value, '保存')

            var makePlotInfo = JSON.parse(JSON.stringify(_this3.state.makePlotInfo));
            makePlotInfo[type] = value;
            _this3.store.saveMakePlotInfo({ info: makePlotInfo }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this3.setState({ makePlotInfo: res }, function () {
                        // 表单
                        _this3.props.form.setFieldsValue(_defineProperty({}, type, res[type] == null || res[type] == "" ? "" : res[type]));
                    });
                }
            });
        };

        _this3.getBuildTeamOneItemListByProjectId = function () {
            _this3.store.getBuildTeamOneItemListByProjectId().then(function (res) {
                var tree = void 0;
                var one = res.filter(function (item) {
                    return item.positionLevel == 0;
                })[0];
                var two = res.filter(function (item) {
                    return item.positionLevel == 1;
                })[0];
                var three = res.filter(function (item) {
                    return item.positionLevel == 2;
                });
                if (one == undefined) {
                    tree = {
                        name: two.position + "\n" + two.userName,
                        value: 6,
                        symbolSize: [70, 30],
                        symbol: 'rectangle',
                        itemStyle: {
                            normal: {
                                borderWidth: 2,
                                borderColor: 'black'
                            }
                        },
                        children: three.map(function (item) {
                            return {
                                name: item.position + "\n" + item.userName,
                                value: 6,
                                symbolSize: [70, 30],
                                symbol: 'rectangle',
                                itemStyle: {
                                    normal: {
                                        borderWidth: 2,
                                        borderColor: 'black'
                                    }
                                }
                            };
                        })
                    };
                }
                if (one != undefined) {
                    tree = {
                        name: one.position + "\n" + one.userName,
                        value: 6,
                        symbolSize: [70, 30],
                        symbol: 'rectangle',
                        itemStyle: {
                            normal: {
                                borderWidth: 2,
                                borderColor: 'black'
                            }
                        },
                        children: {
                            name: two.position + "\n" + two.userName,
                            value: 6,
                            symbolSize: [70, 30],
                            symbol: 'rectangle',
                            itemStyle: {
                                normal: {
                                    borderWidth: 2,
                                    borderColor: 'black'
                                }
                            },
                            children: three.map(function (item) {
                                return {
                                    name: item.position + "\n" + item.userName,
                                    value: 6,
                                    symbolSize: [70, 30],
                                    symbol: 'rectangle',
                                    itemStyle: {
                                        normal: {
                                            borderWidth: 2,
                                            borderColor: 'black'
                                        }
                                    }
                                };
                            })
                        }
                    };
                }
                _this3.setState({
                    orgData: [tree]
                });
            });
        };

        _this3.handleAttment = function (type, param) {
            var url = param && param[0].url;
            var makePlotInfo = JSON.parse(JSON.stringify(_this3.state.makePlotInfo));
            makePlotInfo[type] = url;
            _this3.store.saveMakePlotInfo({ info: makePlotInfo }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this3.setState({ makePlotInfo: res });
                }
            });
        };

        _this3.confirm = function () {
            var makePlotInfo = JSON.parse(JSON.stringify(_this3.state.makePlotInfo));
            makePlotInfo["planImageUrl"] = "";
            _this3.store.saveMakePlotInfo({ info: makePlotInfo }).then(function (res) {
                if (res) {
                    _antd.message.success("删除成功");
                    _this3.setState({ makePlotInfo: res });
                }
            });
        };

        _this3.handleChange = function (type, value) {
            var makePlotCost = JSON.parse(JSON.stringify(_this3.state.makePlotCost));
            makePlotCost[type] = value;
            _this3.store.saveMakePlotCost({ cost: makePlotCost }).then(function (res) {
                if (res) {
                    _antd.message.success("操作成功");
                    _this3.setState({
                        makePlotCost: res
                    });
                }
            });
        };

        _this3.handleChange2 = function (type, max, value) {
            // console.log(type, max, value, '金额')
            var makePlotCost = JSON.parse(JSON.stringify(_this3.state.makePlotCost));
            if (value > max) {
                _antd.message.warn("超出最大值");
                return false;
            } else {
                makePlotCost[type] = value == "" || value == null ? 0 : value;
                _this3.store.saveMakePlotCost({ cost: makePlotCost }).then(function (res) {
                    if (res) {
                        _antd.message.success("操作成功");
                        _this3.setState({
                            makePlotCost: res
                        });
                    }
                });
            }
        };

        _this3.handleChangeItems = function (type, index, value) {
            var makePlotCost = JSON.parse(JSON.stringify(_this3.state.makePlotCost));
            makePlotCost[type][index].isActive = value;
            _this3.store.saveMakePlotCost({ cost: makePlotCost }).then(function (res) {
                if (res) {
                    _antd.message.success("操作成功");
                    _this3.setState({
                        makePlotCost: res
                    });
                }
            });
        };

        _this3.handleBChange2 = function (type, bfData) {
            //console.log(type, BraftEditor.createEditorState(bfData).toHTML())
            var value = _braftEditor2.default.createEditorState(bfData).toHTML();
            var makePlotCost = JSON.parse(JSON.stringify(_this3.state.makePlotCost));
            makePlotCost[type] = value;
            _this3.store.saveMakePlotCost({ cost: makePlotCost }).then(function (res) {
                if (res) {
                    _antd.message.success("保存成功");
                    _this3.setState({ makePlotCost: res }, function () {
                        // 表单
                        _this3.props.form.setFieldsValue(_defineProperty({}, type, res[type] == null || res[type] == "" ? _braftEditor2.default.createEditorState(null) : _braftEditor2.default.createEditorState(res[type])));
                    });
                }
            });
        };

        _this3.handleAdd = function () {
            var makePlotPeople = _this3.state.makePlotPeople;

            var count = makePlotPeople.length;

            // 校验
            if (count > 0) {
                var param = makePlotPeople[count - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("分项是必填项");
                    return false;
                }
                if (param.count == null || param.count == "") {
                    _antd.message.warn("人员数量是必填项");
                    return false;
                }
                if (param.enterTime == null || param.enterTime == "" || param.enterTime == 0) {
                    _antd.message.warn("进场日期是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                taskId: mobx.toJS(taskDetail).id,
                projectId: _this3.store.projectId,
                name: "",
                count: "",
                enterTime: 0,
                remark: ""
            };

            // 单行保存
            _this3.store.saveMakePlotPeople({ people: newData }).then(function (res) {
                if (res) {
                    _this3.setState({
                        makePlotPeople: [].concat(_toConsumableArray(makePlotPeople), [Object.assign(res, { key: count + 1 })])
                    });
                }
            });
        };

        _this3.handleDelete = function (type, record) {
            var dataSource = [].concat(_toConsumableArray(_this3.state[type]));
            var newData = dataSource.filter(function (item) {
                return item.key !== record.key;
            }).map(function (vitem, vindex) {
                return Object.assign(vitem, { key: vindex + 1 });
            });
            _this3.setState(_defineProperty({}, type, newData));
            if (record.id != "" && record.id != null) {
                // 单行保存
                if (type == "makePlotPeople") {
                    _this3.store.delMakePlotPeople({ id: record.id }).then(function (res) {
                        if (res) {
                            _antd.message.success("删除成功");
                        }
                    });
                } else if (type == "makePlotMachine") {
                    _this3.store.delMakePlotMachine({ id: record.id }).then(function (res) {
                        if (res) {
                            _antd.message.success("删除成功");
                        }
                    });
                } else if (type == "makePlotMaterial") {
                    _this3.store.delMakePlotMaterial({ id: record.id }).then(function (res) {
                        if (res) {
                            _antd.message.success("删除成功");
                        }
                    });
                } else if (type == "makePlotQuality") {
                    _this3.store.delMakePlotQualitySafe({ id: record.id }).then(function (res) {
                        if (res) {
                            _antd.message.success("删除成功");
                        }
                    });
                } else if (type == "makePlotSafe") {
                    _this3.store.delMakePlotQualitySafe({ id: record.id }).then(function (res) {
                        if (res) {
                            _antd.message.success("删除成功");
                        }
                    });
                } else if (type == "makePlotRisk") {
                    _this3.store.delMakePlotRisk({ id: record.id }).then(function (res) {
                        if (res) {
                            _antd.message.success("删除成功");
                        }
                    });
                }
            }
        };

        _this3.handleSave = function (type, row) {
            var newData = [].concat(_toConsumableArray(_this3.state[type]));
            var index = newData.findIndex(function (item) {
                return row.key === item.key;
            });
            var item = newData[index];
            newData.splice(index, 1, _extends({}, item, row));
            _this3.setState(_defineProperty({}, type, newData));

            var param = JSON.parse(JSON.stringify(row));
            delete param.key;

            // 单行保存
            if (type == "makePlotPeople") {
                _this3.store.saveMakePlotPeople({ people: param }); /*.then((res) => {if (res) {message.success("保存成功")}});*/
            } else if (type == "makePlotMachine") {
                _this3.store.saveMakePlotMachine({ item: param });
            } else if (type == "makePlotMaterial") {
                _this3.store.saveMakePlotMaterial({ item: param });
            } else if (type == "makePlotQuality") {
                _this3.store.saveMakeQualitySafe({ item: param });
            } else if (type == "makePlotSafe") {
                _this3.store.saveMakeQualitySafe({ item: param });
            } else if (type == "makePlotRisk") {
                _this3.store.saveMakeRisk({ item: param });
            }
        };

        _this3.handleAdd2 = function () {
            var makePlotMachine = _this3.state.makePlotMachine;

            var count = makePlotMachine.length;

            // 校验
            if (count > 0) {
                var param = makePlotMachine[count - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("设备名称是必填项");
                    return false;
                }
                if (param.specs == null || param.specs == "") {
                    _antd.message.warn("规格型号是必填项");
                    return false;
                }
                if (param.count == null || param.count == "") {
                    _antd.message.warn("设备数量（台）是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                taskId: mobx.toJS(taskDetail).id,
                projectId: _this3.store.projectId,
                name: "",
                count: "",
                specs: "",
                remark: ""
            };

            // 单行保存
            _this3.store.saveMakePlotMachine({ item: newData }).then(function (res) {
                if (res) {
                    _this3.setState({
                        makePlotMachine: [].concat(_toConsumableArray(makePlotMachine), [Object.assign(res, { key: count + 1 })])
                    });
                }
            });
        };

        _this3.handleAdd3 = function () {
            var makePlotMaterial = _this3.state.makePlotMaterial;

            var count = makePlotMaterial.length;

            // 校验
            if (count > 0) {
                var param = makePlotMaterial[count - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("材料名称是必填项");
                    return false;
                }
                if (param.enterBeginTime == null || param.enterBeginTime == "" || param.enterBeginTime == 0 || param.enterEndTime == null || param.enterEndTime == "" || param.enterEndTime == 0) {
                    _antd.message.warn("进场日期是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                taskId: mobx.toJS(taskDetail).id,
                projectId: _this3.store.projectId,
                name: "",
                enterBeginTime: 0,
                enterEndTime: 0,
                remark: ""
            };

            // 单行保存
            _this3.store.saveMakePlotMaterial({ item: newData }).then(function (res) {
                if (res) {
                    _this3.setState({
                        makePlotMaterial: [].concat(_toConsumableArray(makePlotMaterial), [Object.assign(res, { key: count + 1 })])
                    });
                }
            });
        };

        _this3.handleAdd4 = function () {
            var makePlotQuality = _this3.state.makePlotQuality;

            var count = makePlotQuality.length;

            // 校验
            if (count > 0) {
                var param = makePlotQuality[count - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("质量技术交底内容是必填项");
                    return false;
                }
                if (param.buildTeamOneId == null || param.buildTeamOneId == "") {
                    _antd.message.warn("交底人是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                taskId: mobx.toJS(taskDetail).id,
                projectId: _this3.store.projectId,
                name: "",
                remark: "",
                buildTeamOneId: "",
                buildTeamName: "",
                type: 1
            };

            // 单行保存
            _this3.store.saveMakeQualitySafe({ item: newData }).then(function (res) {
                if (res) {
                    _this3.setState({
                        makePlotQuality: [].concat(_toConsumableArray(makePlotQuality), [Object.assign(res, { key: count + 1 })])
                    });
                }
            });
        };

        _this3.handleAdd5 = function () {
            var makePlotSafe = _this3.state.makePlotSafe;

            var count = makePlotSafe.length;

            // 校验
            if (count > 0) {
                var param = makePlotSafe[count - 1];
                if (param.name == null || param.name == "") {
                    _antd.message.warn("安全生产教育交底内容是必填项");
                    return false;
                }
                if (param.buildTeamOneId == null || param.buildTeamOneId == "") {
                    _antd.message.warn("交底人是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                taskId: mobx.toJS(taskDetail).id,
                projectId: _this3.store.projectId,
                name: "",
                remark: "",
                buildTeamOneId: "",
                buildTeamName: "",
                type: 2
            };

            // 单行保存
            _this3.store.saveMakeQualitySafe({ item: newData }).then(function (res) {
                if (res) {
                    _this3.setState({
                        makePlotSafe: [].concat(_toConsumableArray(makePlotSafe), [Object.assign(res, { key: count + 1 })])
                    });
                }
            });
        };

        _this3.handleAdd6 = function () {
            var makePlotRisk = _this3.state.makePlotRisk;

            var count = makePlotRisk.length;

            // 校验
            if (count > 0) {
                var param = makePlotRisk[count - 1];
                if (param.type == null || param.type == "") {
                    _antd.message.warn("风险类型是必填项");
                    return false;
                }
                if (param.describes == null || param.describes == "") {
                    _antd.message.warn("风险描述是必填项");
                    return false;
                }
                if (param.programme == null || param.programme == "") {
                    _antd.message.warn("应对方案是必填项");
                    return false;
                }
            }

            var taskDetail = _this3.store.taskDetail;

            var newData = {
                id: "",
                taskId: mobx.toJS(taskDetail).id,
                projectId: _this3.store.projectId,
                type: "",
                describes: "",
                programme: ""
            };

            // 单行保存
            _this3.store.saveMakeRisk({ item: newData }).then(function (res) {
                if (res) {
                    _this3.setState({
                        makePlotRisk: [].concat(_toConsumableArray(makePlotRisk), [Object.assign(res, { key: count + 1 })])
                    });
                }
            });
        };

        _this3.buildWord = function () {
            // 生成去掉校验
            // this.checkFunction(()=>{
            var makePlotInfo = JSON.parse(JSON.stringify(_this3.state.makePlotInfo));
            if (makePlotInfo["orgImageUrl"] == null || makePlotInfo["orgImageUrl"] == "") {
                // 生成组织图
                _this3.supplierRef.uploadImg().then(function (res) {
                    makePlotInfo["orgImageUrl"] = res;
                    _this3.store.saveMakePlotInfo({ info: makePlotInfo }).then(function (res) {
                        if (res) {
                            _this3.setState({ makePlotInfo: res }, function () {
                                _this3.init2();
                            });
                        }
                    });
                });
            } else {
                _this3.init2();
            }
            //});
        };

        _this3.init2 = function (callback) {
            var _this3$state = _this3.state,
                makePlotInfo = _this3$state.makePlotInfo,
                buildTeamTwoMain = _this3$state.buildTeamTwoMain,
                makePlotCost = _this3$state.makePlotCost,
                makePlotPeople = _this3$state.makePlotPeople,
                makePlotMachine = _this3$state.makePlotMachine,
                makePlotMaterial = _this3$state.makePlotMaterial,
                makePlotQuality = _this3$state.makePlotQuality,
                makePlotRisk = _this3$state.makePlotRisk,
                makePlotSafe = _this3$state.makePlotSafe;

            var People = JSON.parse(JSON.stringify(makePlotPeople));
            var Machine = JSON.parse(JSON.stringify(makePlotMachine));
            var Material = JSON.parse(JSON.stringify(makePlotMaterial));
            var Quality = JSON.parse(JSON.stringify(makePlotQuality));
            var Risk = JSON.parse(JSON.stringify(makePlotRisk));
            var Safe = JSON.parse(JSON.stringify(makePlotSafe));

            var params = {
                makePlotInfo: makePlotInfo,
                buildTeamTwoMain: buildTeamTwoMain,
                makePlotCost: makePlotCost,
                makePlotPeople: People.map(function (item) {
                    if (item.key) delete item.key;
                    return item;
                }),
                makePlotMachine: Machine.map(function (item) {
                    if (item.key) delete item.key;
                    return item;
                }),
                makePlotMaterial: Material.map(function (item) {
                    if (item.key) delete item.key;
                    return item;
                }),
                makePlotQuality: Quality.map(function (item) {
                    if (item.key) delete item.key;
                    return item;
                }),
                makePlotRisk: Risk.map(function (item) {
                    if (item.key) delete item.key;
                    return item;
                }),
                makePlotSafe: Safe.map(function (item) {
                    if (item.key) delete item.key;
                    return item;
                })
            };
            _this3.store.buildMakePlotDoc({ makePlot: params }).then(function (res) {
                _this3.setState({
                    downloading: true
                });
                _this3.getReportUrl({ "id": res }, callback);
            });
        };

        _this3.getReportUrl = function (id, callback) {
            var _this = _this3;
            _this.timer22 = setInterval(function () {
                _this.store.getMakePlotDownloadUrl(id).then(function (url) {
                    if (url !== null && url !== "") {
                        _this.setState({ downloading: false });
                        // 重新保存任务
                        _this.getMakePlot();
                        if (typeof callback == "function") {
                            callback();
                        }
                        clearInterval(_this.timer22);
                    } else {}
                });
            }, 3000);
        };

        _this3.saveNow = function () {
            var _this = _this3;
            _this3.checkFunction(function () {
                // 校验
                var makePlotInfo = JSON.parse(JSON.stringify(_this.state.makePlotInfo));
                if (makePlotInfo["orgImageUrl"] == null || makePlotInfo["orgImageUrl"] == "") {
                    // 生成组织图
                    _this.supplierRef.uploadImg().then(function (res) {
                        makePlotInfo["orgImageUrl"] = res;
                        _this.store.saveMakePlotInfo({ info: makePlotInfo }).then(function (res) {
                            if (res) {
                                _this.setState({ makePlotInfo: res }, function () {

                                    // 是否重新生成策划书
                                    var fields = res;
                                    var isDocument = fields.document == null; // 是否有采购合同
                                    if (isDocument) {
                                        _this.init2(function () {
                                            _this.props.overCurrentStageTask();
                                        });
                                    } else {
                                        _this.props.overCurrentStageTask();
                                    }
                                });
                            }
                        });
                    });
                } else {
                    // 是否重新生成策划书
                    var fields = JSON.parse(JSON.stringify(_this.state.makePlotInfo));
                    var isDocument = fields.document == null; // 是否有采购合同
                    if (isDocument) {
                        _this.init2(function () {
                            _this.props.overCurrentStageTask();
                        });
                    } else {
                        _this.props.overCurrentStageTask();
                    }
                }
            });
        };

        _this3.checkFunction = function (callback) {
            var _this3$state2 = _this3.state,
                makePlotCost = _this3$state2.makePlotCost,
                makePlotPeople = _this3$state2.makePlotPeople,
                makePlotMachine = _this3$state2.makePlotMachine,
                makePlotMaterial = _this3$state2.makePlotMaterial,
                makePlotQuality = _this3$state2.makePlotQuality,
                makePlotRisk = _this3$state2.makePlotRisk,
                makePlotSafe = _this3$state2.makePlotSafe;

            var count = makePlotPeople.length;
            var count2 = makePlotMachine.length;
            var count3 = makePlotMaterial.length;
            var count4 = makePlotQuality.length;
            var count6 = makePlotRisk.length;
            var count5 = makePlotSafe.length;

            var firstContractState = makePlotCost.firstContractState,
                civilizedConstructionState = makePlotCost.civilizedConstructionState,
                hospitalityState = makePlotCost.hospitalityState,
                hospitalityValue = makePlotCost.hospitalityValue,
                additionalRiskState = makePlotCost.additionalRiskState,
                additionalRiskValue = makePlotCost.additionalRiskValue,
                civilizedConstructionValue = makePlotCost.civilizedConstructionValue,
                confirmSupplierTwoItems = makePlotCost.confirmSupplierTwoItems;

            if (firstContractState == null || firstContractState == 0 || civilizedConstructionState == null || civilizedConstructionState == 0 || hospitalityState == null || hospitalityState == 0 || additionalRiskState == null || additionalRiskState == 0
            // hospitalityValue==""||
            // additionalRiskValue==""||
            //   civilizedConstructionValue==""
            ) {
                    _antd.message.warn("请完善成本策划必填信息");
                    return false;
                }
            if (confirmSupplierTwoItems.length > 0 && confirmSupplierTwoItems.some(function (item) {
                return item.isActive == 0 || item.isActive == null;
            })) {
                _antd.message.warn("请完善成本策划必填信息");
                return false;
            }
            // 校验
            if (count > 0) {
                var param = makePlotPeople[count - 1];
                if (param.name == null || param.name == "" || param.count == null || param.count == "" || param.enterTime == null || param.enterTime == "" || param.enterTime == 0) {
                    _antd.message.warn("请完善工人进场计划必填信息");
                    return false;
                }
            }
            if (count2 > 0) {
                var _param = makePlotMachine[count2 - 1];
                if (_param.name == null || _param.name == "" || _param.specs == null || _param.specs == "" || _param.count == null || _param.count == "") {
                    _antd.message.warn("请完善机械设备需求计划必填信息");
                    return false;
                }
            }
            if (count3 > 0) {
                var _param2 = makePlotMaterial[count3 - 1];
                if (_param2.name == null || _param2.name == "" || _param2.enterBeginTime == null || _param2.enterBeginTime == "" || _param2.enterBeginTime == 0 || _param2.enterEndTime == null || _param2.enterEndTime == "" || _param2.enterEndTime == 0) {
                    _antd.message.warn("请完善主要材料需求计划必填信息");
                    return false;
                }
            }
            if (count4 > 0) {
                var _param3 = makePlotQuality[count4 - 1];
                if (_param3.name == null || _param3.name == "" || _param3.buildTeamOneId == null || _param3.buildTeamOneId == "") {
                    _antd.message.warn("请完善质量策划必填信息");
                    return false;
                }
            }
            if (count5 > 0) {
                var _param4 = makePlotSafe[count5 - 1];
                if (_param4.name == null || _param4.name == "" || _param4.buildTeamOneId == null || _param4.buildTeamOneId == "") {
                    _antd.message.warn("请完善安全文明施工策划必填信息");
                    return false;
                }
            }
            if (count6 > 0) {
                var _param5 = makePlotRisk[count6 - 1];
                if (_param5.type == null || _param5.type == "" || _param5.describes == null || _param5.describes == "" || _param5.programme == null || _param5.programme == "") {
                    _antd.message.warn("请完善重点与难点分析必填信息");
                    return false;
                }
            }

            return callback();
        };

        _this3.store = _this3.props.DeliveryStore;
        _this3.state = {
            makePlotInfo: {}, // 工程概况
            buildTeamTwoMain: {}, //
            makePlotCost: {},
            makePlotPeople: [],
            makePlotMachine: [],
            makePlotMaterial: [],
            makePlotQuality: [],
            makePlotRisk: [],
            makePlotSafe: [],
            organizationRemark: _braftEditor2.default.createEditorState(null),
            planImageRemark: _braftEditor2.default.createEditorState(null),
            remark: _braftEditor2.default.createEditorState(null),
            orgData: [],
            dataSource2: [], // 成本策划
            downloading: false
        };
        return _this3;
    }

    _createClass(Add, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.getMakePlot();
            this.getBuildTeamOneItemListByProjectId();
        }

        // 离开保存


        // 预览图


        // 删除预览图


        // 成本策划保存


        // 分包


        // 成本策划


        // 新增


        // 删除


        // 新增


        // 新增


        // 新增


        // 新增


        // 新增


        // 生成采购合同


        // 间隔3秒获取pdf地址


        // 完成


        // 统一校验方法

    }, {
        key: 'render',
        value: function render() {
            var _this4 = this;

            var _state = this.state,
                makePlotInfo = _state.makePlotInfo,
                buildTeamTwoMain = _state.buildTeamTwoMain,
                makePlotCost = _state.makePlotCost,
                makePlotPeople = _state.makePlotPeople,
                makePlotMachine = _state.makePlotMachine,
                makePlotMaterial = _state.makePlotMaterial,
                makePlotQuality = _state.makePlotQuality,
                makePlotRisk = _state.makePlotRisk,
                makePlotSafe = _state.makePlotSafe,
                organizationRemark = _state.organizationRemark,
                planImageRemark = _state.planImageRemark,
                remark = _state.remark,
                orgData = _state.orgData,
                downloading = _state.downloading;
            var getFieldDecorator = this.props.form.getFieldDecorator;

            var formItemLayout = {
                labelCol: { span: 6 },
                wrapperCol: { span: 14 }
            };
            var formItemLayout2 = {
                labelCol: { span: 1 },
                wrapperCol: { span: 23 }
            };
            var fields = makePlotInfo;
            var columns1 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: '目标项',
                dataIndex: 'age',
                key: 'age',
                align: 'center'
            }, {
                title: '内控目标值',
                dataIndex: 'address',
                key: 'address',
                align: 'left',
                render: function render(text, record) {
                    if (record.age == "进度") {
                        var progressValueV4 = function progressValueV4(day1, day2, day3) {
                            return [_react2.default.createElement(
                                'p',
                                null,
                                '1\u3001\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A',
                                day1
                            ), _react2.default.createElement(
                                'p',
                                null,
                                '2\u3001\u975E\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A',
                                day2
                            ), _react2.default.createElement(
                                'p',
                                null,
                                '3\u3001\u88C5\u914D\u5B8C\u6210\u65F6\u95F4\uFF1A',
                                day3
                            )];
                        };
                        var targetDay1 = buildTeamTwoMain.progressTargetTimeSure === 1 ? (0, _moment2.default)(buildTeamTwoMain.progressTargetBaseTime).format(dateFormat) : "T";
                        var targetDay2 = targetDay1 === "T" ? "T+" + buildTeamTwoMain.progressTargetNostandardDay + "日历天" : (0, _moment2.default)(targetDay1).add(buildTeamTwoMain.progressTargetNostandardDay, "days").format(dateFormat);
                        var targetDay3 = targetDay1 === "T" ? "T+" + buildTeamTwoMain.progressTargetOverDay + "日历天" : (0, _moment2.default)(targetDay1).add(buildTeamTwoMain.progressTargetOverDay, "days").format(dateFormat);
                        return _react2.default.createElement(
                            'div',
                            null,
                            progressValueV4(targetDay1, targetDay2, targetDay3)
                        );
                    } else if (record.age == "质量") {
                        return _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u9A8C\u6536\u6B21\u6570\uFF1A \u2264 ',
                                buildTeamTwoMain.qualityTargetCheckCount,
                                ' \u6B21 \u5BA2\u6237\u786E\u8BA4\u7B7E\u5B57'
                            )
                        );
                    } else if (record.age == "利润") {
                        return _react2.default.createElement(
                            'div',
                            null,
                            buildTeamTwoMain.profitTargetRate == null || buildTeamTwoMain.profitTargetRate == 0 ? _react2.default.createElement(
                                'p',
                                null,
                                '\u4E0D\u4E8F\u635F'
                            ) : _react2.default.createElement(
                                'p',
                                null,
                                '\u76C8\u5229\uFF1A',
                                buildTeamTwoMain.profitTargetRate,
                                '%'
                            )
                        );
                    } else if (record.age == "营销") {
                        return _react2.default.createElement(
                            'div',
                            null,
                            buildTeamTwoMain.markingTargetStandard == 1 ? _react2.default.createElement(
                                'p',
                                null,
                                '\u6253\u9020\u6210\u4E3A\u6807\u6746\u9879\u76EE\uFF0C\u5F62\u6210\u8425\u9500\u6848\u4F8B'
                            ) : null,
                            buildTeamTwoMain.markingTargetSatisfied == 1 ? _react2.default.createElement(
                                'p',
                                null,
                                '\u987E\u5BA2\u6EE1\u610F\uFF0C\u80FD\u591F\u7ED9\u6211\u4EEC\u53D1\u8868\u626C\u4FE1'
                            ) : null
                        );
                    } else if (record.age == "安全") {
                        return _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u5B89\u5168\u4E8B\u6545\uFF1A \u2264 ',
                                buildTeamTwoMain.safeTargetAccidentCount,
                                ' \u6B21 \u6B7B\u4EA1\u3001\u91CD\u4F24\u3001\u8F7B\u4F24'
                            ),
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u5B89\u5168\u9690\u60A3\uFF1A \u2264 ',
                                buildTeamTwoMain.safeTargetTreacherousCount,
                                ' \u6B21 \u91CD\u5927\u4E8B\u6545\u9690\u60A3'
                            )
                        );
                    }
                }
            }];

            var dataSource1 = (buildTeamTwoMain.markingTargetStandard == null || buildTeamTwoMain.markingTargetStandard == 0) && (buildTeamTwoMain.markingTargetSatisfied == 0 || buildTeamTwoMain.markingTargetSatisfied == null) ? [{
                key: '1',
                age: '进度',
                address: '西湖区湖底公园1号'
            }, {
                key: '2',
                age: '质量',
                address: '西湖区湖底公园1号'
            }, {
                key: '3',
                age: '利润',
                address: '西湖区湖底公园1号'
            }, {
                key: '4',
                age: '安全',
                address: '西湖区湖底公园1号'
            }] : [{
                key: '1',
                age: '进度',
                address: '西湖区湖底公园1号'
            }, {
                key: '2',
                age: '质量',
                address: '西湖区湖底公园1号'
            }, {
                key: '3',
                age: '利润',
                address: '西湖区湖底公园1号'
            }, {
                key: '4',
                age: '营销',
                address: '西湖区湖底公园1号'
            }, {
                key: '5',
                age: '安全',
                address: '西湖区湖底公园1号'
            }];

            var columns3 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u8BBE\u5907\u540D\u79F0'
                ),
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u89C4\u683C\u578B\u53F7'
                ),
                dataIndex: 'specs',
                key: 'specs',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u8BBE\u5907\u6570\u91CF\uFF08\u53F0\uFF09'
                ),
                dataIndex: 'count',
                key: 'count',
                align: 'center',
                editable: true
            }, {
                title: '备注',
                dataIndex: 'remark',
                key: 'remark',
                align: 'center',
                editable: true
            }, {
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
                            onConfirm: function onConfirm() {
                                return _this4.handleDelete("makePlotMachine", record);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }];

            var columns4 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u6750\u6599\u540D\u79F0'
                ),
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u8FDB\u573A\u65E5\u671F'
                ),
                dataIndex: 'enterBeginTime',
                key: 'enterBeginTime',
                align: 'center',
                editable: true
            }, {
                title: '备注',
                dataIndex: 'remark',
                key: 'remark',
                align: 'center',
                editable: true
            }, {
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
                            onConfirm: function onConfirm() {
                                return _this4.handleDelete("makePlotMaterial", record);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }];
            var columns5 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u8D28\u91CF\u6280\u672F\u4EA4\u5E95\u5185\u5BB9'
                ),
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u4EA4\u5E95\u4EBA'
                ),
                dataIndex: 'buildTeamOneId',
                key: 'buildTeamOneId',
                align: 'center',
                editable: true
            }, {
                title: '备注',
                dataIndex: 'remark',
                key: 'remark',
                align: 'center',
                editable: true
            }, {
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
                            onConfirm: function onConfirm() {
                                return _this4.handleDelete("makePlotQuality", record);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }];
            var columns6 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u5B89\u5168\u751F\u4EA7\u6559\u80B2\u4EA4\u5E95\u5185\u5BB9'
                ),
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u4EA4\u5E95\u4EBA'
                ),
                dataIndex: 'buildTeamOneId',
                key: 'buildTeamOneId',
                align: 'center',
                editable: true
            }, {
                title: '备注',
                dataIndex: 'remark',
                key: 'remark',
                align: 'center',
                editable: true
            }, {
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
                            onConfirm: function onConfirm() {
                                return _this4.handleDelete("makePlotSafe", record);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }];

            var columns7 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u98CE\u9669\u7C7B\u578B'
                ),
                dataIndex: 'type',
                key: 'type',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u98CE\u9669\u63CF\u8FF0'
                ),
                dataIndex: 'describes',
                key: 'describes',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u5E94\u5BF9\u65B9\u6848'
                ),
                dataIndex: 'programme',
                key: 'programme',
                align: 'center',
                editable: true
            }, {
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
                            onConfirm: function onConfirm() {
                                return _this4.handleDelete("makePlotRisk", record);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }];

            var columnPerson = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u5206\u9879'
                ),
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u4EBA\u5458\u6570\u91CF'
                ),
                dataIndex: 'count',
                key: 'count',
                align: 'center',
                editable: true
            }, {
                title: _react2.default.createElement(
                    'div',
                    null,
                    _react2.default.createElement(
                        'span',
                        { style: {
                                fontWeight: "400",
                                marginRight: "4px",
                                color: "#f5222d",
                                fontSize: "14px",
                                fontFamily: "SimSun, sans-serif"
                            } },
                        '*'
                    ),
                    '\u8FDB\u573A\u65E5\u671F'
                ),
                dataIndex: 'enterTime',
                key: 'enterTime',
                align: 'center',
                editable: true
            }, {
                title: "备注",
                dataIndex: 'remark',
                key: 'remark',
                align: 'center',
                editable: true
            }, {
                title: '操作',
                dataIndex: 'opater',
                width: '80px',
                align: 'center',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        _antd.Popconfirm,
                        { title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
                            onConfirm: function onConfirm() {
                                return _this4.handleDelete("makePlotPeople", record);
                            } },
                        _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
                    );
                }
            }];
            var components = {
                body: {
                    row: EditableFormRow,
                    cell: EditableCell
                }
            };
            var person = columnPerson.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this4.handleSave.bind(_this4, "makePlotPeople")
                        };
                    }
                });
            });
            var machine = columns3.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this4.handleSave.bind(_this4, "makePlotMachine")
                        };
                    }
                });
            });
            var material = columns4.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this4.handleSave.bind(_this4, "makePlotMaterial")
                        };
                    }
                });
            });
            var quality = columns5.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this4.handleSave.bind(_this4, "makePlotQuality")
                        };
                    }
                });
            });
            var safe = columns6.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this4.handleSave.bind(_this4, "makePlotSafe")
                        };
                    }
                });
            });
            var risk = columns7.map(function (col) {
                if (!col.editable) {
                    return col;
                }
                return _extends({}, col, {
                    onCell: function onCell(record) {
                        return {
                            record: record,
                            editable: col.editable,
                            dataIndex: col.dataIndex,
                            title: col.title,
                            handleSave: _this4.handleSave.bind(_this4, "makePlotRisk")
                        };
                    }
                });
            });
            var isDocument = fields.document == null || _typeof(fields.document) == "object" && Object.keys(fields.document).length == 0 ? false : true; // 是否有采购合同
            var controls = ['bold', 'text-color'];

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    _antd.Spin,
                    { className: 'fixed-spin', spinning: downloading, tip: '\u6B63\u5728\u751F\u6210\u9879\u76EE\u7B56\u5212\u4E66,\u8BF7\u7A0D\u7B49...' },
                    _react2.default.createElement(
                        'div',
                        { className: 'daily_tips' },
                        _react2.default.createElement(
                            'p',
                            null,
                            _react2.default.createElement(
                                'span',
                                null,
                                '\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u586B\u5199\u6807\u8BB0\u4E3A\u5FC5\u586B\u7684\u4FE1\u606F\u540E\uFF0C\u53EF\u76F4\u63A5\u751F\u6210\u9879\u76EE\u7B56\u5212\u4E66\uFF0C\u9879\u76EE\u7B56\u5212\u4E66\u4E5F\u53EF\u4EE5\u5728\u7EBF\u9884\u89C8\u548C\u4E0B\u8F7D\u54E6~'
                            )
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20' },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 15px", fontWeight: 700, fontSize: "14px" } },
                            '\u4E00\u3001\u5DE5\u7A0B\u6982\u51B5'
                        ),
                        _react2.default.createElement(
                            _antd.Form,
                            _extends({ layout: 'inline' }, formItemLayout),
                            _react2.default.createElement(
                                _antd.Row,
                                { gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15], style: { margin: "0" } },
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u5DE5\u7A0B\u540D\u79F0', className: 'w' },
                                        getFieldDecorator('name', {
                                            initialValue: fields.name || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u5DE5\u7A0B\u5730\u70B9', className: 'w' },
                                        getFieldDecorator('address', {
                                            initialValue: fields.address || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u5EFA\u8BBE\u5355\u4F4D', className: 'w' },
                                        getFieldDecorator('partyUnits', {
                                            initialValue: fields.partyUnits || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, {
                                            onBlur: this.handleConfirmBlur.bind(this, "partyUnits"),
                                            onPressEnter: this.handleConfirmBlur.bind(this, "partyUnits"),
                                            placeholder: '\u8BF7\u8F93\u5165' }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u65BD\u5DE5\u5355\u4F4D', className: 'w' },
                                        getFieldDecorator('buildUnits', {
                                            initialValue: fields.buildUnits || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, {
                                            onBlur: this.handleConfirmBlur.bind(this, "buildUnits"),
                                            onPressEnter: this.handleConfirmBlur.bind(this, "buildUnits"),
                                            placeholder: '\u8BF7\u8F93\u5165' }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u4E3B\u8981\u4F9B\u5E94\u5546', className: 'w' },
                                        getFieldDecorator('supplier', {
                                            initialValue: fields.supplier == null ? "" : fields.supplier.map(function (item) {
                                                return item.name;
                                            }).join("、"),
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u5DE5\u7A0B\u7C7B\u578B', className: 'w' },
                                        getFieldDecorator('projectConstructionType', {
                                            initialValue: fields.projectConstructionType || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, {
                                            onBlur: this.handleConfirmBlur.bind(this, "projectConstructionType"),
                                            onPressEnter: this.handleConfirmBlur.bind(this, "projectConstructionType"),
                                            placeholder: '\u8BF7\u8F93\u5165' }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u5EFA\u7B51\u9762\u79EF\uFF08m2\uFF09', className: 'w' },
                                        getFieldDecorator('buildArea', {
                                            initialValue: fields.buildArea || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u623F\u95F4\u7EC4\u6210\uFF08\u95F4\uFF09', className: 'w' },
                                        getFieldDecorator('roomComposition', {
                                            initialValue: fields.roomComposition == null ? "" : fields.roomComposition,
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u8FDB\u573A\u6761\u4EF6', className: 'w' },
                                        getFieldDecorator('enterCondition', {
                                            initialValue: fields.enterCondition || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(TextArea, {
                                            onBlur: this.handleConfirmBlur.bind(this, "enterCondition"),
                                            onPressEnter: this.handleConfirmBlur.bind(this, "enterCondition"),
                                            rows: 4,
                                            placeholder: '\u8BF7\u8F93\u5165' }))
                                    )
                                ),
                                _react2.default.createElement(
                                    _antd.Col,
                                    { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                    _react2.default.createElement(
                                        _antd.Form.Item,
                                        { label: '\u627F\u63A5\u5185\u5BB9', className: 'w' },
                                        getFieldDecorator('productType', {
                                            initialValue: fields.productType || "",
                                            rules: [{ required: false, message: '此项是必填' }]
                                        })(_react2.default.createElement(TextArea, {
                                            disabled: true,
                                            rows: 4,
                                            placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09' }))
                                    )
                                )
                            )
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u4E8C\u3001\u7BA1\u7406\u76EE\u6807'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            className: 'digital_table agenda_nohover',
                            pagination: false,
                            bordered: true,
                            dataSource: dataSource1,
                            columns: columns1 })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u4E09\u3001\u7EC4\u7EC7\u67B6\u6784'
                        ),
                        _react2.default.createElement(_OrgChart2.default, {
                            orgData: orgData,
                            onRef: function onRef(input) {
                                _this4.supplierRef = input;
                            }
                        }),
                        _react2.default.createElement(
                            _antd.Form.Item,
                            _extends({ label: '\u5907\u6CE8', className: 'w' }, formItemLayout2),
                            getFieldDecorator('organizationRemark', {
                                initialValue: organizationRemark,
                                rules: [{ required: false, message: '此项是必填' }]
                            })(_react2.default.createElement(_braftEditor2.default, {
                                className: 'my-editor',
                                onBlur: function onBlur(e) {
                                    _this4.handleBChange('organizationRemark', e);
                                },
                                controls: controls,
                                contentStyle: {
                                    minHeight: 100,
                                    maxHeight: 100,
                                    overflowY: 'scroll',
                                    height: 'auto',
                                    width: '100%'
                                }
                            }))
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u56DB\u3001\u6210\u672C\u7B56\u5212'
                        ),
                        _react2.default.createElement(
                            'table',
                            { className: 'makeplotTable' },
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5E8F\u53F7'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5206\u9879'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    '\u5185\u5BB9'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u72B6\u6001'
                                ),
                                _react2.default.createElement(
                                    'th',
                                    null,
                                    _react2.default.createElement(
                                        'span',
                                        { style: {
                                                fontWeight: "400",
                                                marginRight: "4px",
                                                color: "#f5222d",
                                                fontSize: "14px",
                                                fontFamily: "SimSun, sans-serif"
                                            } },
                                        '*'
                                    ),
                                    '\u91D1\u989D\uFF08\u5143\uFF09'
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '1'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u7532\u65B9\u5408\u540C'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    fields.companyName
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: makePlotCost.firstContractState,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "firstContractState") },
                                        _react2.default.createElement(
                                            Option,
                                            { value: 0 },
                                            '\u8BF7\u9009\u62E9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 1 },
                                            '\u672A\u7B7E\u8BA2'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 2 },
                                            '\u5DF2\u7B7E\u8BA2'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    makePlotCost.firstContractValue
                                )
                            ),
                            makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.map(function (item, index) {
                                return _react2.default.createElement(
                                    'tr',
                                    { key: item.id },
                                    _react2.default.createElement(
                                        'td',
                                        null,
                                        index + 2
                                    ),
                                    _react2.default.createElement(
                                        'td',
                                        null,
                                        '\u5206\u5305\u5408\u540C'
                                    ),
                                    _react2.default.createElement(
                                        'td',
                                        null,
                                        item.supplierName
                                    ),
                                    _react2.default.createElement(
                                        'td',
                                        null,
                                        _react2.default.createElement(
                                            _antd.Select,
                                            {
                                                value: item.isActive,
                                                style: { width: 120 },
                                                onChange: _this4.handleChangeItems.bind(_this4, "confirmSupplierTwoItems", index)
                                            },
                                            _react2.default.createElement(
                                                Option,
                                                { value: 0 },
                                                '\u8BF7\u9009\u62E9'
                                            ),
                                            _react2.default.createElement(
                                                Option,
                                                { value: 1 },
                                                '\u672A\u7B7E\u8BA2'
                                            ),
                                            _react2.default.createElement(
                                                Option,
                                                { value: 2 },
                                                '\u5DF2\u7B7E\u8BA2'
                                            )
                                        )
                                    ),
                                    _react2.default.createElement(
                                        'td',
                                        null,
                                        item.contractMoney
                                    )
                                );
                            }),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 2
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6587\u660E\u65BD\u5DE5'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u4E94\u724C\u4E00\u56FE\u3001\u9A6C\u7532\u3001\u8B66\u793A\u6807\u8BED\u3001\u8B66\u793A\u5E26\u3001\u5DE5\u4EBA\u6170\u95EE\u7B49'
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: makePlotCost.civilizedConstructionState,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "civilizedConstructionState")
                                        },
                                        _react2.default.createElement(
                                            Option,
                                            { value: 0 },
                                            '\u8BF7\u9009\u62E9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 1 },
                                            '\u672A\u53D1\u751F'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 2 },
                                            '\u5DF2\u53D1\u751F'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.InputNumber, {
                                        min: 0,
                                        max: makePlotCost.civilizedConstructionMaxValue
                                        //onBlur={this.handleChange.bind(this, "civilizedConstructionValue")}
                                        , onChange: this.handleChange2.bind(this, "civilizedConstructionValue", makePlotCost.civilizedConstructionMaxValue),
                                        value: makePlotCost.civilizedConstructionValue,
                                        placeholder: '\u81EA\u52A8\u8BA1\u7B97\uFF0C\u53EF\u66F4\u6539' })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 3
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u62DB\u5F85\u8D39'
                                ),
                                _react2.default.createElement('td', null),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: makePlotCost.hospitalityState,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "hospitalityState")
                                        },
                                        _react2.default.createElement(
                                            Option,
                                            { value: 0 },
                                            '\u8BF7\u9009\u62E9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 1 },
                                            '\u672A\u53D1\u751F'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 2 },
                                            '\u5DF2\u53D1\u751F'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.InputNumber, {
                                        min: 0,
                                        max: makePlotCost.hospitalityMaxValue
                                        //onBlur={this.handleChange.bind(this, "hospitalityValue")}
                                        , onChange: this.handleChange2.bind(this, "hospitalityValue", makePlotCost.hospitalityMaxValue),
                                        value: makePlotCost.hospitalityValue,
                                        placeholder: '\u81EA\u52A8\u8BA1\u7B97\uFF0C\u53EF\u66F4\u6539' })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 4
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u98CE\u9669\u9644\u52A0'
                                ),
                                _react2.default.createElement('td', null),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(
                                        _antd.Select,
                                        {
                                            value: makePlotCost.additionalRiskState,
                                            style: { width: 120 },
                                            onChange: this.handleChange.bind(this, "additionalRiskState")
                                        },
                                        _react2.default.createElement(
                                            Option,
                                            { value: 0 },
                                            '\u8BF7\u9009\u62E9'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 1 },
                                            '\u672A\u53D1\u751F'
                                        ),
                                        _react2.default.createElement(
                                            Option,
                                            { value: 2 },
                                            '\u5DF2\u53D1\u751F'
                                        )
                                    )
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    _react2.default.createElement(_antd.InputNumber, {
                                        min: 0,
                                        max: makePlotCost.additionalRiskMaxValue
                                        //onBlur={this.handleChange.bind(this, "additionalRiskValue")}
                                        , onChange: this.handleChange2.bind(this, "additionalRiskValue", makePlotCost.additionalRiskMaxValue),
                                        value: makePlotCost.additionalRiskValue,
                                        placeholder: '\u81EA\u52A8\u8BA1\u7B97\uFF0C\u53EF\u66F4\u6539' })
                                )
                            ),
                            _react2.default.createElement(
                                'tr',
                                null,
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 5
                                ),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    '\u6BDB\u5229\u6DA6'
                                ),
                                _react2.default.createElement('td', null),
                                _react2.default.createElement('td', null),
                                _react2.default.createElement(
                                    'td',
                                    null,
                                    makePlotCost.yields
                                )
                            )
                        ),
                        _react2.default.createElement(
                            _antd.Form.Item,
                            _extends({ label: '\u5907\u6CE8', className: 'w mt20' }, formItemLayout2),
                            getFieldDecorator('remark', {
                                initialValue: remark,
                                rules: [{ required: false, message: '此项是必填' }]
                            })(_react2.default.createElement(_braftEditor2.default, {
                                className: 'my-editor',
                                onBlur: function onBlur(e) {
                                    _this4.handleBChange2('remark', e);
                                },
                                controls: controls,
                                contentStyle: {
                                    minHeight: 100,
                                    maxHeight: 100,
                                    overflowY: 'scroll',
                                    height: 'auto',
                                    width: '100%'
                                }
                            }))
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u4E94\u3001\u8FDB\u5EA6\u7B56\u5212'
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20' },
                            '1\u3001\u5DE5\u671F\u63A7\u5236\u76EE\u6807'
                        ),
                        _react2.default.createElement(
                            _antd.Row,
                            { gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15], style: { margin: "0" } },
                            _react2.default.createElement(
                                _antd.Col,
                                { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    _extends({ label: '\u7532\u65B9\u5408\u540C\u5DE5\u671F', className: 'w' }, formItemLayout),
                                    getFieldDecorator('firstPartyTimeRange', {
                                        initialValue: makePlotCost.firstPartyTimeRange || "",
                                        rules: [{ required: false, message: '此项是必填' }]
                                    })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Col,
                                { xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
                                _react2.default.createElement(
                                    _antd.Form.Item,
                                    _extends({ label: '\u4F9B\u5E94\u5546\u5408\u540C\u5DE5\u671F', className: 'w' }, formItemLayout),
                                    getFieldDecorator('supplierTimeRange', {
                                        initialValue: makePlotCost.supplierTimeRange || "",
                                        rules: [{ required: false, message: '此项是必填' }]
                                    })(_react2.default.createElement(_antd.Input, { placeholder: '\u81EA\u52A8\u5E26\u51FA\uFF08\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
                                )
                            )
                        ),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20' },
                            ' 2\u3001\u5DE5\u4EBA\u8FDB\u573A\u8BA1\u5212'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            pagination: false,
                            bordered: true,
                            components: components,
                            className: 'digital_table',
                            rowClassName: function rowClassName() {
                                return 'editable-row';
                            },
                            dataSource: makePlotPeople,
                            columns: person }),
                        _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd,
                            className: "mt20",
                            type: 'plus-circle', style: {
                                position: "relative",
                                left: "28px",
                                fontSize: "18px",
                                color: "#609AF1",
                                cursor: "pointer"
                            } }),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20' },
                            ' 3\u3001\u673A\u68B0\u8BBE\u5907\u9700\u6C42\u8BA1\u5212'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            pagination: false,
                            bordered: true,
                            components: components,
                            className: 'digital_table',
                            rowClassName: function rowClassName() {
                                return 'editable-row';
                            },
                            dataSource: makePlotMachine,
                            columns: machine }),
                        _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd2,
                            className: "mt20",
                            type: 'plus-circle', style: {
                                position: "relative",
                                left: "28px",
                                fontSize: "18px",
                                color: "#609AF1",
                                cursor: "pointer"
                            } }),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20' },
                            ' 4\u3001\u4E3B\u8981\u6750\u6599\u9700\u6C42\u8BA1\u5212'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            pagination: false,
                            bordered: true,
                            dataSource: makePlotMaterial,
                            components: components,
                            className: 'digital_table',
                            rowClassName: function rowClassName() {
                                return 'editable-row';
                            },
                            columns: material
                        }),
                        _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd3,
                            className: "mt20",
                            type: 'plus-circle', style: {
                                position: "relative",
                                left: "28px",
                                fontSize: "18px",
                                color: "#609AF1",
                                cursor: "pointer"
                            } }),
                        _react2.default.createElement(
                            'div',
                            { className: 'mt20 mb20' },
                            '5\u3001\u65BD\u5DE5\u8FDB\u5EA6\u8BA1\u5212\u56FE',
                            fields.planImageUrl == "" || fields.planImageUrl == null ? null : _react2.default.createElement(
                                _antd.Popconfirm,
                                {
                                    onConfirm: this.confirm,
                                    title: '\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F' },
                                _react2.default.createElement(
                                    'a',
                                    { href: '#', className: 'ml20' },
                                    '\u5220\u9664'
                                )
                            )
                        ),
                        fields.planImageUrl == "" || fields.planImageUrl == null ? _react2.default.createElement(
                            'div',
                            { className: 'dib',
                                style: {
                                    verticalAlign: "top",
                                    marginLeft: "15px"
                                } },
                            _react2.default.createElement(_MyUpload2.default, {
                                className: 'bc-upload',
                                saveAttachment: this.handleAttment.bind(this, 'planImageUrl'),
                                disabled: false,
                                multiple: false,
                                listType: 'picture-card',
                                fileList: [],
                                journalType: 'journal'
                            })
                        ) : _react2.default.createElement(
                            'div',
                            { className: 'w',
                                style: { textAlign: "center", padding: "15px 0" } },
                            _react2.default.createElement(_reactZmage2.default, {
                                style: {
                                    maxWidth: "75%",
                                    height: "auto"
                                },
                                src: fields.planImageUrl })
                        ),
                        _react2.default.createElement(
                            _antd.Form.Item,
                            _extends({ label: '\u5907\u6CE8', className: 'w mt20' }, formItemLayout2),
                            getFieldDecorator('planImageRemark', {
                                initialValue: planImageRemark,
                                rules: [{ required: false, message: '此项是必填' }]
                            })(_react2.default.createElement(_braftEditor2.default, {
                                className: 'my-editor',
                                onBlur: function onBlur(e) {
                                    _this4.handleBChange('planImageRemark', e);
                                },
                                controls: controls,
                                contentStyle: {
                                    minHeight: 100,
                                    maxHeight: 100,
                                    overflowY: 'scroll',
                                    height: 'auto',
                                    width: '100%'
                                }
                            }))
                        )
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u516D\u3001\u8D28\u91CF\u7B56\u5212'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            pagination: false,
                            bordered: true,
                            dataSource: makePlotQuality,
                            components: components,
                            className: 'digital_table',
                            rowClassName: function rowClassName() {
                                return 'editable-row';
                            },
                            columns: quality
                        }),
                        _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd4,
                            className: "mt20",
                            type: 'plus-circle', style: {
                                position: "relative",
                                left: "28px",
                                fontSize: "18px",
                                color: "#609AF1",
                                cursor: "pointer"
                            } })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u4E03\u3001\u5B89\u5168\u6587\u660E\u65BD\u5DE5\u7B56\u5212'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            pagination: false,
                            bordered: true,
                            dataSource: makePlotSafe,
                            components: components,
                            className: 'digital_table',
                            rowClassName: function rowClassName() {
                                return 'editable-row';
                            },
                            columns: safe
                        }),
                        _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd5,
                            className: "mt20",
                            type: 'plus-circle', style: {
                                position: "relative",
                                left: "28px",
                                fontSize: "18px",
                                color: "#609AF1",
                                cursor: "pointer"
                            } })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt20', style: { padding: "0 15px" } },
                        _react2.default.createElement(
                            'h1',
                            { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                            '\u516B\u3001\u91CD\u70B9\u4E0E\u96BE\u70B9\u5206\u6790'
                        ),
                        _react2.default.createElement(_antd.Table, {
                            pagination: false,
                            bordered: true,
                            dataSource: makePlotRisk,
                            components: components,
                            className: 'digital_table',
                            rowClassName: function rowClassName() {
                                return 'editable-row';
                            },
                            columns: risk
                        }),
                        _react2.default.createElement(_antd.Icon, { onClick: this.handleAdd6,
                            className: "mt20",
                            type: 'plus-circle', style: {
                                position: "relative",
                                left: "28px",
                                fontSize: "18px",
                                color: "#609AF1",
                                cursor: "pointer"
                            } })
                    ),
                    _react2.default.createElement(
                        'div',
                        { style: { margin: "15px 0", padding: "10px 25px" } },
                        _react2.default.createElement(
                            _antd.Button,
                            { type: 'primary', onClick: this.buildWord },
                            '\u751F\u6210\u9879\u76EE\u7B56\u5212\u4E66'
                        ),
                        isDocument ? _react2.default.createElement(_Document2.default, {
                            data: fields.document,
                            store: this.store
                        }) : null
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'mt30 mb30', style: {
                                display: 'flex',
                                justifyContent: 'center'
                            } },
                        _react2.default.createElement(
                            _antd.Button,
                            { onClick: this.saveNow,
                                ghost: true,
                                type: 'primary'
                            },
                            ' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
                        )
                    )
                )
            );
        }
    }]);

    return Add;
}(_react2.default.Component)) || _class2) || _class2) || _class2);
exports.default = Add;

/***/ }),

/***/ 2040:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _rcTweenOne = __webpack_require__(349);

var _api = __webpack_require__(30);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * 收件人
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               * */


var Option = _antd.Select.Option;

var EditableTagEmail2 = function (_React$Component) {
	_inherits(EditableTagEmail2, _React$Component);

	function EditableTagEmail2() {
		var _ref;

		var _temp, _this, _ret;

		_classCallCheck(this, EditableTagEmail2);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = EditableTagEmail2.__proto__ || Object.getPrototypeOf(EditableTagEmail2)).call.apply(_ref, [this].concat(args))), _this), _this.state = {
			inputVisible: false,
			inputValue: [], // 新增默认值
			emails: [],
			tags: []
		}, _this.init = function (value) {
			(0, _api.requestPost)('getSendUserEmails', _config2.default.journal.getSendUserEmails, _journal2.default.journal.getSendUserEmails, {
				text: value,
				type: 0
			}).then(function (res) {
				_this.setState({
					emails: res
				});
			});
		}, _this.handleClose = function (removedTag) {
			var tags = _this.state.tags.filter(function (tag) {
				return tag !== removedTag;
			});
			_this.setState({ tags: tags }, function () {
				_this.props.updateState(tags);
			});
		}, _this.showInput = function () {
			_this.setState({ inputVisible: true }, function () {
				return _this.input.focus();
			});
		}, _this.saveInputRef = function (input) {
			return _this.input = input;
		}, _this.forMap = function (tag) {
			var isLongTag = tag.length > 20;
			var tagElem = _react2.default.createElement(
				_antd.Tag,
				{
					key: tag,
					closable: true,
					onClose: function onClose(e) {
						e.preventDefault();
						_this.handleClose(tag);
					},
					style: { marginBottom: '3px' }
				},
				isLongTag ? tag.slice(0, 20) + '...' : tag
			);
			return isLongTag ? _react2.default.createElement(
				'span',
				{ title: tag, style: { display: 'inline-block' } },
				tagElem
			) : tagElem;
		}, _this.handleChange = function (value, e) {
			var val = e.map(function (item) {
				return item.key;
			});
			_this.setState({ inputValue: val });
		}, _this.handleSelectConfirm = function () {
			var inputValue = _this.state.inputValue;
			var data = _this.props.data;

			if (inputValue !== null && (typeof inputValue === 'undefined' ? 'undefined' : _typeof(inputValue)) == "object") {
				data = [].concat(_toConsumableArray(data), _toConsumableArray(inputValue));
				_this.setState({
					inputVisible: false,
					inputValue: []
				}, function () {
					_this.props.updateState(data);
				});
			}
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}

	_createClass(EditableTagEmail2, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			this.setState({
				tags: nextProps.data
			});
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			// 收件人数据
			this.init("");
		}
	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    inputVisible = _state.inputVisible,
			    inputValue = _state.inputValue,
			    emails = _state.emails,
			    tags = _state.tags;
			var title = this.props.title;

			var filteredOptions = emails.filter(function (o) {
				return !tags.includes(o);
			});
			var tagChild = tags.map(this.forMap);
			return _react2.default.createElement(
				'div',
				{ style: { display: "inline-block" } },
				_react2.default.createElement(
					'div',
					{ style: { display: "inline-block", marginBottom: '3px' } },
					_react2.default.createElement(
						_rcTweenOne.TweenOneGroup,
						{
							enter: {
								scale: 0.8,
								opacity: 0,
								type: 'from',
								duration: 100,
								onComplete: function onComplete(e) {
									e.target.style = '';
								}
							},
							leave: { opacity: 0, width: 0, scale: 0, duration: 200 },
							appear: false
						},
						tagChild
					)
				),
				inputVisible && _react2.default.createElement(
					_antd.Select,
					{ mode: 'tags',
						size: 'small',
						defaultOpen: true,
						value: inputValue,
						style: { width: '220px' },
						ref: this.saveInputRef,
						placeholder: '\u8BF7\u8F93\u5165',
						onBlur: this.handleSelectConfirm,
						onPressEnter: this.handleChange,
						onChange: this.handleChange,
						className: 'tagEmail'
					},
					filteredOptions.map(function (item) {
						return _react2.default.createElement(
							Option,
							{ key: item, title: item },
							item
						);
					})
				),
				!inputVisible && _react2.default.createElement(
					_antd.Tag,
					{ onClick: this.showInput, style: { background: '#fff', borderStyle: 'dashed' } },
					_react2.default.createElement(_antd.Icon, { type: 'plus' }),
					' ',
					title
				)
			);
		}
	}]);

	return EditableTagEmail2;
}(_react2.default.Component);

exports.default = EditableTagEmail2;

/***/ }),

/***/ 2041:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _Add = __webpack_require__(2039);

var _Add2 = _interopRequireDefault(_Add);

var _View = __webpack_require__(2046);

var _View2 = _interopRequireDefault(_View);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

3; /*
   * 制定项目策划书
   * dangw@glodon.com
   * */
var MakePlot = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MakePlot, _React$Component);

	function MakePlot(props) {
		_classCallCheck(this, MakePlot);

		var _this = _possibleConstructorReturn(this, (MakePlot.__proto__ || Object.getPrototypeOf(MakePlot)).call(this, props));

		_this.getConfirmSupplierState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getTaskStepState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this.store.plotState = res;
				}
			});
		};

		_this.overCurrentStageTask = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.overTaskStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.plotState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.reStartHandover = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartTaskStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.plotState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.getProjectDetail = function () {
			var projectId = _this.store.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			projectId: null,
			currentStep: 1
		};
		return _this;
	}

	_createClass(MakePlot, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.getConfirmSupplierState();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var projectDetail = this.store.projectDetail;

			this.setState({ projectId: mobx.toJS(projectDetail).id });
			this.getConfirmSupplierState();
		}
	}, {
		key: 'render',
		value: function render() {
			var plotState = this.store.plotState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal', style: {
						paddingBottom: "50px",
						overflowX: "hidden"
					} },
				plotState.state1 == 2 ? _react2.default.createElement(_View2.default, {
					reStartHandover: this.reStartHandover
				}) : null,
				plotState.state1 == 0 || plotState.state1 == 1 ? _react2.default.createElement(_Add2.default, { overCurrentStageTask: this.overCurrentStageTask }) : null
			);
		}
	}]);

	return MakePlot;
}(_react2.default.Component)) || _class) || _class);
exports.default = MakePlot;

/***/ }),

/***/ 2042:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /*
                                                                                                                                                                                                                                                                  * 大文件上传组件 antd upload 支持拖拽排序
                                                                                                                                                                                                                                                                  * dangwei
                                                                                                                                                                                                                                                                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactViewer = __webpack_require__(337);

var _reactViewer2 = _interopRequireDefault(_reactViewer);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _journal = __webpack_require__(93);

var _journal2 = _interopRequireDefault(_journal);

var _download = __webpack_require__(68);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _mobxReact = __webpack_require__(22);

var _reactSortableHoc = __webpack_require__(705);

var _UploadList = __webpack_require__(707);

var _UploadList2 = _interopRequireDefault(_UploadList);

__webpack_require__(2174);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ifcancel = false;
var abortCheckpoint = void 0;

var client = function client(self) {
	var token = self.state.token;
	// ali-oss v6.x版本的写法

	return new _aliOss2.default({
		accessKeyId: token.access_key_id,
		accessKeySecret: token.access_key_secret,
		stsToken: token.stsToken,
		region: token.region, //
		bucket: token.bucket, //
		endpoint: token.OSS_ENDPOINT,
		timeout: 5 * 60 * 1000
	});
};

var uploadPath = function uploadPath(path, file) {
	// 上传文件的路径，使用日期命名文件目录
	return (0, _moment2.default)().format('YYYYMMDD') + '/' + file.uid + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file, option) {
	var url = uploadPath(path, file);
	return new Promise(function (resolve, reject) {
		client(self).multipartUpload(url, file, option).then(function (data) {
			resolve(data);
		}).catch(function (error) {
			reject(error);
		});
	});
};

var itemStyle = {
	width: 104,
	height: 104,
	margin: 4,
	cursor: 'grab',
	zIndex: '1000'
};
var SortableItem = (0, _reactSortableHoc.SortableElement)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: itemStyle, className: 'affairs_upload' },
		_react2.default.createElement(_UploadList2.default
		// locale={{previewFile: '预览', removeFile: '删除', downloadFile: "下载"}}
		, { locale: { previewFile: '预览', removeFile: '删除' },
			listType: params.props.listType,
			onPreview: params.onPreview,
			onDownload: params.onDownload,
			onRemove: params.onRemove,
			items: [params.item],
			showDownloadIcon: false,
			showPreviewIcon: false

		})
	);
});
var listStyle = {
	display: 'flex',
	flexWrap: 'wrap',
	maxWidth: '100%'
};
var SortableList = (0, _reactSortableHoc.SortableContainer)(function (params) {
	return _react2.default.createElement(
		'div',
		{ style: listStyle },
		params.items.map(function (item, index) {
			return _react2.default.createElement(SortableItem, {
				key: '' + item.uid,
				index: index,
				item: item,
				props: params.props,
				onPreview: params.props.onPreview,
				onDownload: params.props.onDownload,
				onRemove: params.props.onRemove
			});
		}),
		_react2.default.createElement(
			_antd.Upload,
			_extends({}, params.props, {
				className: 'affairs_upload_normal',
				showUploadList: false
			}),
			params.uploadButton
		),
		params.cancelButton
	);
});

var MyUpload4Affairs = (_dec = (0, _mobxReact.inject)('appStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(MyUpload4Affairs, _React$Component);

	function MyUpload4Affairs(props) {
		var _this2 = this;

		_classCallCheck(this, MyUpload4Affairs);

		var _this = _possibleConstructorReturn(this, (MyUpload4Affairs.__proto__ || Object.getPrototypeOf(MyUpload4Affairs)).call(this, props));

		_this.init = function () {
			// 阿里云上传参数
			(0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
				var str = typeof res == "string" ? JSON.parse(res) : res;
				if (str) {
					var token = JSON.parse(JSON.stringify(_this.state.token));
					_this.setState({
						token: Object.assign(token, {
							access_key_id: str.accessKeyId,
							access_key_secret: str.accessKeySecret,
							stsToken: str.securityToken
						}),
						expiration: str.expiration
					});
				}
			});
		};

		_this.cancelUploadFileToAliyun = function (params) {
			(0, _api.requestPost)('cancelUploadFileToAliyun', _config2.default.journal.cancelUploadFileToAliyun, _journal2.default.journal.cancelUploadFileToAliyun, { uploadId: params.uploadId, key: params.name }).then(function (res) {
				if (res == true) {
					_antd.message.success("取消上传成功");
				}
			});
		};

		_this.getDocumentUrl = function (url) {
			return (0, _api.requestPost)('getDocumentUrl', _config2.default.journal.getDocumentUrl, _journal2.default.journal.getDocumentUrl, { url: url });
		};

		_this.changeSrc = function (res, file) {
			var _this$state = _this.state,
			    fileList = _this$state.fileList,
			    host = _this$state.host;

			var oldFileList = JSON.parse(JSON.stringify(fileList));

			var url = host + uploadPath('path', file);
			var obj = Object.assign({}, {
				uid: file.uid,
				name: file.name,
				status: "done",
				url: url,
				fileId: null,
				fileName: file.name,
				filePath: url,
				id: ""
			});
			var newFileList = [obj];

			// 处理附件
			var array = JSON.parse(JSON.stringify([].concat(_toConsumableArray(oldFileList), newFileList)));
			_this.props.saveAttachment(array);
		};

		_this.beforeUpload = function (file) {

			// 上传凭证失效，重查
			var expiration = _this.state.expiration;

			var expire = new Date(expiration).getTime();
			if (expiration != "" && expire < Date.now()) {
				_this.init();
			}

			var accept = _this.props.accept;

			var acceptDefault = ".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx"; // 默认值限制格式
			if (accept == undefined) {
				// 没有传参数
				var type = file.type.split("/")[1];
				if (!acceptDefault.includes(type)) {
					//message.warn("格式不对");
					//return false;
				}
			} else {
				// 外部传参数
				var _type = file.type.split("/")[1];
				if (!accept.includes(_type)) {
					_antd.message.warn("格式不对, 只允许上传图片");
					return false;
				}
			}

			var isLt2M = file.size / 1024 / 1024 < 2000;
			if (!isLt2M) {
				_antd.message.error('Image must smaller than 2MB!');
			}

			_this.setState({
				loading: true
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = true; // 记录一次
				}
			});

			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onloadend = function () {
				// 使用ossupload覆盖默认的上传方法
				UploadToOss(_this, '上传路径oss配置信息', file, {
					parallel: 4,
					partSize: 1024 * 1024,
					progress: function progress(p, cpt, res) {
						abortCheckpoint = cpt;
						//console.log(p, cpt, res, '进度');
					}
				}).then(function (data) {
					return data;
				}).then(function (data) {
					// 处理地址
					var res = data.res;

					if (res.status && res.status == 200) {
						// 单个文件上传成功
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});

						_this.changeSrc(res, file);
					}
				}).catch(function (error) {

					if (error.name === 'abort') {
						// handle abort

					} else {
						//message.error("文件上传失败");
						_this.setState({
							loading: false
						}, function () {
							if (_this.props.journalType) {
								_this.store.journal = false; // 记录一次
							}
						});
						return false;
					}
				});
			};

			return false; // 不调用默认的上传方法
		};

		_this.handlePreview = function () {
			var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(file) {
				var isAssetTypeAnImage, getExt, fileList, imageArray;
				return regeneratorRuntime.wrap(function _callee$(_context) {
					while (1) {
						switch (_context.prev = _context.next) {
							case 0:
								// 文档
								if (/\.(doc|docx)$/.test(file.name) || /\.(xls|xlsx)$/.test(file.name) || /\.(pdf)$/.test(file.name) || /\.(zip|rar)$/.test(file.name) || /\.(ppt|pptx)$/.test(file.name)) {
									_this.getDocumentUrl(file.filePath).then(function (res) {
										_this.setState({
											previewImage: res,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									});
								} else {
									// 图片、音频
									// 文件类型判断
									isAssetTypeAnImage = function isAssetTypeAnImage(ext) {
										return ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;
									};

									//获取后缀


									getExt = function getExt(filePath) {
										//获取最后一个.的位置
										var index = filePath.lastIndexOf(".");
										//获取后缀
										var ext = filePath.substr(index + 1);
										return ext;
									};

									if (isAssetTypeAnImage(getExt(file.filePath))) {
										// 判断是图片
										fileList = JSON.parse(JSON.stringify(_this.state.fileList));
										imageArray = void 0;

										imageArray = fileList.filter(function (item) {
											return isAssetTypeAnImage(getExt(item.filePath));
										}).map(function (item) {
											return Object.assign({}, {
												src: item.filePath,
												alt: item.name,
												downloadUrl: item.filePath
											});
										});
										_this.setState({
											visible: true,
											imageArray: Object.assign([], imageArray),
											activeIndex: imageArray.findIndex(function (item) {
												return item.src == file.filePath;
											})
										});
									} else {
										// 音频
										_this.setState({
											previewImage: file.filePath,
											previewVisible: true,
											name: file.name,
											filePath: file.filePath
										});
									}
								}

							case 1:
							case 'end':
								return _context.stop();
						}
					}
				}, _callee, _this2);
			}));

			return function (_x) {
				return _ref.apply(this, arguments);
			};
		}();

		_this.handleCancel = function (type) {
			return _this.setState(_defineProperty({}, type, false));
		};

		_this.downloadUrl = function () {
			var _this$state2 = _this.state,
			    filePath = _this$state2.filePath,
			    name = _this$state2.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.onDownload = function (file) {
			var filePath = file.filePath,
			    name = file.name;

			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			if (isImage) {
				(0, _download.downloadFile)(filePath, name); // 直接下载pdf
			} else {
				_this.downloadImage(filePath, name);
			}
		};

		_this.downloadImage = function (filePath, name) {
			//获取最后一个.的位置
			var index = filePath.lastIndexOf(".");
			//获取后缀
			var ext = filePath.substr(index + 1);

			// 直接下载图片
			var x = new XMLHttpRequest();
			x.open("GET", filePath, true);
			x.responseType = 'blob';
			x.onload = function (e) {
				(0, _download.download)(x.response, name, "image/" + ext);
			};
			x.send();
		};

		_this.cancel = function () {
			ifcancel = true;
			var _abortCheckpoint = abortCheckpoint,
			    uploadId = _abortCheckpoint.uploadId,
			    name = _abortCheckpoint.name;

			client(_this).cancel();
			if (abortCheckpoint && uploadId != undefined) {
				_this.cancelUploadFileToAliyun({ name: name, uploadId: uploadId });
			}
			_this.setState({
				loading: false
			}, function () {
				if (_this.props.journalType) {
					_this.store.journal = false; // 清楚记录
				}
			});
		};

		_this.onSortEnd = function (_ref2) {
			var oldIndex = _ref2.oldIndex,
			    newIndex = _ref2.newIndex;
			var fileList = _this.state.fileList;

			_this.props.saveAttachment((0, _reactSortableHoc.arrayMove)(fileList, oldIndex, newIndex));
		};

		_this.onRemove = function (file) {
			var fileList = _this.state.fileList;

			var newFileList = fileList.filter(function (item) {
				return item.uid !== file.uid;
			});
			_this.props.saveAttachment(newFileList);
		};

		_this.store = _this.props.appStore;
		_this.state = {
			fileList: _this.props.fileList,
			loading: false,
			token: {
				access_key_id: '', // oss的key_id
				access_key_secret: '', // oss的secret
				stsToken: '',
				region: 'oss-cn-beijing', // oss的region
				bucket: 'xinlj', // oss的bucket
				OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
			},
			host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host
			previewVisible: false,
			previewImage: '',
			name: "",
			filePath: "",
			visible: false,
			imageArray: [], // 图片预览
			activeIndex: 0,
			expiration: "" // 过期时间
		};
		return _this;
	}

	_createClass(MyUpload4Affairs, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			// 访问后端，获取请求上传凭证
			this.init();
		}

		// 取消阿里云上传


		// 更新url


		// 手动下载


		// 预览下载


		// 直接下载


		// 取消上传

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    previewVisible = _state.previewVisible,
			    previewImage = _state.previewImage,
			    fileList = _state.fileList,
			    name = _state.name,
			    loading = _state.loading,
			    visible = _state.visible,
			    imageArray = _state.imageArray,
			    activeIndex = _state.activeIndex;
			var _props = this.props,
			    multiple = _props.multiple,
			    disabled = _props.disabled,
			    accept = _props.accept;

			var acceptDefault = ".jpg,.jpeg,.png"; // 默认值限制格式
			var props = {
				accept: acceptDefault,
				name: 'file',
				multiple: multiple,
				beforeUpload: this.beforeUpload,
				disabled: disabled,
				listType: "picture-card",
				onPreview: this.handlePreview,
				onDownload: this.onDownload,
				onRemove: this.onRemove

			};
			var uploadButton = _react2.default.createElement(
				'div',
				{ className: 'pr' },
				_react2.default.createElement(_antd.Icon, { type: loading ? "loading" : "plus" }),
				loading ? _react2.default.createElement(
					'div',
					{ className: 'ant-upload-text' },
					'\u4E0A\u4F20\u4E2D'
				) : null
			);
			var cancelButton = loading ? _react2.default.createElement(_antd.Icon, { type: 'stop',
				title: '\u53D6\u6D88\u4E0A\u4F20',
				style: {
					fontSize: '15px',
					color: '#1890ff'
				},
				onClick: this.cancel }) : null;
			var isImage = /\.(doc|docx)$/.test(name) || /\.(xls|xlsx)$/.test(name) || /\.(pdf)$/.test(name) || /\.(zip|rar)$/.test(name) || /\.(ppt|pptx)$/.test(name);
			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(SortableList, {
					distance: 1,
					items: fileList,
					onSortEnd: this.onSortEnd,
					axis: 'xy',
					helperClass: 'SortableHelper',
					props: props,
					uploadButton: disabled ? "" : uploadButton,
					cancelButton: cancelButton
				}),
				_react2.default.createElement(
					_antd.Modal,
					{
						title: _react2.default.createElement(
							'div',
							null,
							name,
							_react2.default.createElement(
								'a',
								{ href: 'javascript:;', onClick: this.downloadUrl },
								'\u4E0B\u8F7D'
							)
						),
						width: '50%',
						style: { minHeight: '450px' },
						visible: previewVisible,
						footer: null,
						onCancel: this.handleCancel.bind(this, 'previewVisible') },
					isImage ? _react2.default.createElement('iframe', {
						src: previewImage,
						width: '100%',
						height: '100%',
						style: { minHeight: '450px' },
						frameBorder: '1' }) : _react2.default.createElement('img', { style: { backgroundSize: 'conver', width: '100%', maxHeight: '400px' }, src: previewImage,
						alt: '' })
				),
				_react2.default.createElement(_reactViewer2.default, {
					visible: visible,
					onClose: this.handleCancel.bind(this, 'visible'),
					images: imageArray,
					activeIndex: activeIndex,
					downloadable: true,
					customToolbar: function customToolbar(toolbars) {
						return toolbars.filter(function (item) {
							return item.key !== "download";
						}).concat([{
							key: "download",
							render: _react2.default.createElement(
								'div',
								null,
								_react2.default.createElement('i', { className: 'react-viewer-icon react-viewer-icon-download' })
							),
							onClick: function onClick(activeImage) {
								var src = activeImage.src,
								    alt = activeImage.alt;

								_this3.downloadImage(src, alt);
							}
						}]);
					}
				})
			);
		}
	}]);

	return MyUpload4Affairs;
}(_react2.default.Component)) || _class) || _class);
exports.default = MyUpload4Affairs;

/***/ }),

/***/ 2043:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 组织架构图
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _echartsForReact = __webpack_require__(234);

var _echartsForReact2 = _interopRequireDefault(_echartsForReact);

var _aliOss = __webpack_require__(232);

var _aliOss2 = _interopRequireDefault(_aliOss);

var _bpm = __webpack_require__(41);

var _bpm2 = _interopRequireDefault(_bpm);

var _config = __webpack_require__(26);

var _config2 = _interopRequireDefault(_config);

var _api = __webpack_require__(30);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var client = function client(self) {
    var token = self.state.token;
    // ali-oss v6.x版本的写法

    return new _aliOss2.default({
        accessKeyId: token.access_key_id,
        accessKeySecret: token.access_key_secret,
        stsToken: token.stsToken,
        region: token.region,
        bucket: token.bucket,
        endpoint: token.OSS_ENDPOINT
    });
};

var uploadPath = function uploadPath(path, file) {
    // 上传文件的路径，使用日期命名文件目录
    return (0, _moment2.default)().format('YYYYMMDDHHmmss') + '/' + file.name;
};

var UploadToOss = function UploadToOss(self, path, file) {
    var url = uploadPath(path, file);
    return new Promise(function (resolve, reject) {
        client(self).multipartUpload(url, file).then(function (data) {
            resolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了
        }).catch(function (error) {
            reject(error);
        });
    });
};

var OrgChart = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(OrgChart, _React$Component);

    function OrgChart(props) {
        _classCallCheck(this, OrgChart);

        var _this2 = _possibleConstructorReturn(this, (OrgChart.__proto__ || Object.getPrototypeOf(OrgChart)).call(this, props));

        _this2.init = function () {
            // 阿里云上传参数
            (0, _api.requestPost)('getSts', _config2.default.bpm.getSts, _bpm2.default.bpm.getSts, {}).then(function (res) {
                var str = typeof res == "string" ? JSON.parse(res) : res;
                if (str) {
                    var token = JSON.parse(JSON.stringify(_this2.state.token));
                    _this2.setState({
                        token: Object.assign(token, {
                            access_key_id: str.accessKeyId,
                            access_key_secret: str.accessKeySecret,
                            stsToken: str.securityToken
                        })
                    });
                }
            });
        };

        _this2.uploadImg = function () {
            var _this = _this2;
            var echarts_instance = _this2.echarts_react.getEchartsInstance();
            var base64 = echarts_instance.getDataURL();

            //将base64转换为文件对象
            var dataURLtoFile = function dataURLtoFile(dataurl, filename) {
                var arr = dataurl.split(',');
                var mime = arr[0].match(/:(.*?);/)[1];
                var bstr = atob(arr[1]);
                var n = bstr.length;
                var u8arr = new Uint8Array(n);
                while (n--) {
                    u8arr[n] = bstr.charCodeAt(n);
                }
                //转换成file对象
                return new File([u8arr], filename, { type: mime });
            };

            return new Promise(function (resove) {
                var myfile2 = dataURLtoFile(base64, '组织架构图.png');
                var formData2 = new FormData();
                formData2.append('newFile', myfile2);
                var reader2 = new FileReader();
                reader2.readAsDataURL(myfile2);
                reader2.onloadend = function () {
                    // 使用ossupload覆盖默认的上传方法
                    UploadToOss(_this2, '上传路径oss配置信息', myfile2).then(function (data) {
                        var host = _this.state.host;

                        var url = host + data.name;
                        console.log(url, 'url');
                        resove(url);
                    });
                };
            });
        };

        _this2.state = {
            token: {
                access_key_id: '', // oss的key_id
                access_key_secret: '', // oss的secret
                stsToken: '',
                region: 'oss-cn-beijing', // oss的region
                bucket: 'xinlj', // oss的bucket
                OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com' // 自己oss服务器的配置信息
            },
            host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/' // 阿里云host
        };
        return _this2;
    }

    _createClass(OrgChart, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            // 访问后端，获取请求上传凭证
            this.init();
            this.props.onRef(this);
        }

        // 上传图片

    }, {
        key: 'render',
        value: function render() {
            var _this3 = this;

            var option = {
                tooltip: {
                    show: false,
                    trigger: 'item',
                    formatter: "{b}: {c}"
                },
                toolbox: {
                    show: false,
                    feature: {
                        mark: { show: true },
                        dataView: { show: true, readOnly: false },
                        restore: { show: true },
                        saveAsImage: { show: true }
                    }
                },
                calculable: false,
                series: [{
                    name: '树图',
                    type: 'tree',
                    orient: 'vertical',
                    rootLocation: { x: '50%', y: '15%' },
                    nodePadding: 20,
                    layerPadding: 40,
                    symbol: 'rectangle',
                    borderColor: 'black',
                    itemStyle: {
                        normal: {
                            color: '#fff',
                            label: {
                                show: true,
                                position: 'inside',
                                textStyle: {
                                    color: 'black',
                                    fontSize: 14
                                }
                            },
                            lineStyle: {
                                color: '#000',
                                width: 1,
                                type: 'solid' // 'curve'|'broken'|'solid'|'dotted'|'dashed'
                            }
                        },
                        emphasis: {
                            label: {
                                show: false
                            }
                        }
                    },
                    data: this.props.orgData
                    /*[
                        {
                            name: '董事会',
                            value: 6,
                            symbolSize: [70, 30],
                            symbol: 'rectangle',
                            itemStyle: {
                                normal: {
                                    borderWidth: 2,
                                    borderColor: 'black'
                                }
                            },
                            children: [
                                {
                                    name: '总经理',
                                    value: 6,
                                    symbolSize: [70, 30],
                                    symbol: 'rectangle',
                                    itemStyle: {
                                        normal: {
                                            borderWidth: 2,
                                            borderColor: 'black'
                                        }
                                    },
                                    children: [
                                        {
                                            name: '营销中心',
                                            value: 4,
                                            symbolSize: [70, 30],
                                            symbol: 'rectangle',
                                            itemStyle: {
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        position: 'inside'
                                                    },
                                                    borderWidth: 2,
                                                    borderColor: 'black'
                                                }
                                            }
                                        },
                                        {
                                            name: '项目中心',
                                            value: 4,
                                            symbolSize: [70, 30],
                                            symbol: 'rectangle',
                                            itemStyle: {
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        position: 'inside'
                                                    },
                                                    borderWidth: 2,
                                                    borderColor: 'black'
                                                }
                                            }
                                        },
                                        {
                                            name: '技术中心',
                                            value: 4,
                                            symbolSize: [70, 30],
                                            symbol: 'rectangle',
                                            itemStyle: {
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        position: 'inside'
                                                    },
                                                    borderWidth: 2,
                                                    borderColor: 'black'
                                                }
                                            }
                                        },
                                        {
                                            name: '行政部',
                                            value: 4,
                                            symbolSize: [70, 30],
                                            symbol: 'rectangle',
                                            itemStyle: {
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        position: 'inside'
                                                    },
                                                    borderWidth: 2,
                                                    borderColor: 'black'
                                                }
                                            }
                                        },
                                        {
                                            name: '财务部',
                                            value: 4,
                                            symbolSize: [70, 30],
                                            symbol: 'rectangle',
                                            itemStyle: {
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        position: 'inside'
                                                    },
                                                    borderWidth: 2,
                                                    borderColor: 'black'
                                                }
                                            }
                                        },
                                        {
                                            name: '其他分支',
                                            value: 4,
                                            symbolSize: [70, 30],
                                            symbol: 'rectangle',
                                            itemStyle: {
                                                normal: {
                                                    label: {
                                                        show: true,
                                                        position: 'inside'
                                                    },
                                                    borderWidth: 2,
                                                    borderColor: 'black'
                                                }
                                            }
                                        },
                                    ]
                                }]
                        }
                    ]*/
                }]
            };

            return _react2.default.createElement(_echartsForReact2.default, { option: option,
                notMerge: true,
                ref: function ref(e) {
                    _this3.echarts_react = e;
                },
                lazyUpdate: true,
                style: { height: '240px' } });
        }
    }]);

    return OrgChart;
}(_react2.default.Component)) || _class;

exports.default = OrgChart;

/***/ }),

/***/ 2044:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 添加成员  带排序
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _lodash = __webpack_require__(231);

var _ = _interopRequireWildcard(_lodash);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色

var PersonAdd = (_dec = (0, _mobxReact.inject)('UserStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(PersonAdd, _React$Component);

	function PersonAdd(props) {
		_classCallCheck(this, PersonAdd);

		var _this = _possibleConstructorReturn(this, (PersonAdd.__proto__ || Object.getPrototypeOf(PersonAdd)).call(this, props));

		_this.init = function () {
			var defaultDatas = JSON.parse(JSON.stringify(_this.state.defaultData));
			//  将已选定的用户做标记
			var arr = defaultDatas.map(function (item) {
				var obj = {};
				if ([].concat(_toConsumableArray(_this.state.oldSelect)).some(function (v) {
					return v.userId === item.id;
				})) {
					obj = Object.assign(item, { selected: true });
				} else {
					obj = Object.assign(item, { selected: false });
				}
				return obj;
			});
			_this.setState({
				data: Object.assign([], arr)
			}, function () {

				// 右侧
				var olds = JSON.parse(JSON.stringify(_this.state.oldSelect));
				var newArray = [];
				olds.forEach(function (vitem) {
					var filterArray = arr.filter(function (v) {
						return v.id === vitem.userId;
					});
					if (filterArray.length > 0) {
						newArray.push.apply(newArray, _toConsumableArray(filterArray));
					}
				});
				_this.setState({
					rightSelect: Object.assign([], newArray)
				});
			});
		};

		_this.handleOk = function () {
			var dataArray = JSON.parse(JSON.stringify(_this.state.rightSelect));
			var users = dataArray.map(function (item, index) {
				return { userId: item.id, userName: item.realname };
			});
			_this.handleCancel();
			_this.props.updatePerson(users);
		};

		_this.handleCancel = function () {
			_this.setState({
				visible: false,
				text: ""
			});
		};

		_this.handClick = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.setState({
				data: Object.assign([], dataArray)
			});

			// oldSelect
			var oldS = JSON.parse(JSON.stringify(_this.state.rightSelect));
			if (!oldS.filter(function (item) {
				return item.id == param.id;
			}).length > 0) {
				// 之前已选中
				_this.setState({
					rightSelect: [].concat(_toConsumableArray(_this.state.rightSelect), [param])
				});
			}
		};

		_this.handClickDel = function (param) {
			var dataArray = JSON.parse(JSON.stringify(_this.state.data));
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: false }));
			_this.setState({
				data: Object.assign([], dataArray)
			});

			// 右侧删除
			var rightS = JSON.parse(JSON.stringify(_this.state.rightSelect));
			var olindex = rightS.findIndex(function (item) {
				return item.id == param.id;
			});
			rightS.splice(olindex, 1);
			_this.setState({
				rightSelect: rightS
			});
		};

		_this.onChange = function (e) {
			_this.setState({
				text: _.trim(e.target.value)
			});
			_this.handleClickDebounce();
		};

		_this.handleAdd = function () {
			if (_this.props.updateTip) {
				if (_this.props.updateTip() == false) {
					_antd.message.warn("请先输入产品价格");
					return false;
				} else {
					_this.setState({
						visible: true,
						text: ""
					});
				}
			} else {
				_this.setState({
					visible: true,
					text: ""
				}, function () {
					_this.init();
				});
			}
		};

		_this.handleClose = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this.state.oldSelect));
			_this.setState({
				oldSelect: dataSource.filter(function (item) {
					return item.userId !== record.userId;
				})
			}, function () {
				_this.props.updatePerson(_this.state.oldSelect);
			});
		};

		_this.state = {
			text: '',
			visible: false,
			oldSelect: [], // 已选择的人员,
			defaultData: [], // 默认数据
			data: [], // 已选择标记的数据
			filterData: [], // 筛选数据
			rightSelect: [] // 右侧选择
		};
		_this.getData = _this.getData.bind(_this);
		_this.handleClickDebounce = _.debounce(_this.getData, 500, { 'maxWait': 1000 });
		return _this;
	}

	_createClass(PersonAdd, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps) {
			var _this2 = this;

			this.setState({
				oldSelect: nextProps.data
			}, function () {
				_this2.init();
			});
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this3 = this;

			var params = "";
			// 未选的全部用户
			this.props.UserStore.getRole(params).then(function (res) {
				_this3.setState({
					defaultData: res.body.map(function (item) {
						return Object.assign(item, { selected: false });
					})
				}, function () {
					_this3.init();
				});
			});
		}

		// 初始化

	}, {
		key: 'componentWillUnmount',
		value: function componentWillUnmount() {
			this.handleClickDebounce.cancel();
		}

		// 提交


		// 取消


		// 点击列表选中


		// 点击列表删除


		// 模糊搜索

	}, {
		key: 'getData',
		value: function getData() {
			var _state = this.state,
			    text = _state.text,
			    data = _state.data;

			var dataArray = JSON.parse(JSON.stringify(data));
			var filterData = dataArray.filter(function (item) {
				return item.realname.indexOf(text) > -1 || item.phone.indexOf(text) > -1;
			});
			this.setState({
				filterData: filterData
			});
		}

		// 新增


		// 删除

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var _state2 = this.state,
			    visible = _state2.visible,
			    data = _state2.data,
			    oldSelect = _state2.oldSelect,
			    filterData = _state2.filterData,
			    text = _state2.text,
			    rightSelect = _state2.rightSelect;
			var _props = this.props,
			    disabled = _props.disabled,
			    title = _props.title;

			var isFilter = text == "" || text == null;
			var activeData = isFilter ? data : filterData; // 当前数据

			return _react2.default.createElement(
				'div',
				{ style: { display: 'inline-block' } },
				_react2.default.createElement(
					'div',
					null,
					oldSelect.map(function (item, index) {
						return _react2.default.createElement(
							'span',
							null,
							_react2.default.createElement(
								'span',
								{ className: 'person_add2' },
								item.userName,
								_react2.default.createElement('img', {
									onClick: _this4.handleClose.bind(_this4, item),
									className: disabled ? "hidden" : "person_close",
									width: '16px',
									height: '16px',
									src: './images/closed.png' })
							),
							index == oldSelect.length - 1 ? null : "、"
						);
					}),
					_react2.default.createElement(_antd.Button, { type: 'primary',
						ghost: true,
						shape: 'circle',
						style: { cursor: 'pointer', marginLeft: '10px', fontSize: '16px' },
						onClick: this.handleAdd,
						disabled: disabled,
						icon: 'usergroup-add' })
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						zIndex: '1099',
						maskClosable: false,
						closable: false,
						okText: '提交',
						title: title || "添加负责人",
						visible: visible,
						onOk: this.handleOk,
						onCancel: this.handleCancel
					},
					_react2.default.createElement(
						_antd.Row,
						{ type: 'flex', justify: 'space-between', className: '' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'pr20' },
							_react2.default.createElement(_antd.Input, {
								value: text,
								placeholder: '\u8F93\u5165\u59D3\u540D/\u624B\u673A\u53F7',
								suffix: _react2.default.createElement(_antd.Icon, { type: 'search' }),
								onChange: this.onChange
							}),
							_react2.default.createElement(
								_reactCustomScrollbars.Scrollbars,
								{
									autoHide: true,
									autoHideTimeout: 1000,
									autoHideDuration: 200,
									autoHeight: true,
									autoHeightMin: 0,
									autoHeightMax: 350,
									thumbMinSize: 30,
									universal: true
								},
								_react2.default.createElement(
									'ul',
									{ className: 'userlist_ul' },
									activeData.length > 0 && activeData.map(function (item, index) {
										return _react2.default.createElement(
											'li',
											{
												key: index,
												className: 'pr',
												onClick: _this4.handClick.bind(_this4, item) },
											_react2.default.createElement(
												'div',
												{ className: 'ul_name' },
												item.realname
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_station' },
												item.station
											),
											_react2.default.createElement(
												'div',
												{ className: 'ul_email' },
												item.email
											),
											_react2.default.createElement(_antd.Icon, {
												style: {
													position: 'absolute',
													top: '10px',
													right: '15px',
													fontSize: '16px',
													color: 'rgba(75,164,190,1)'
												},
												className: item.selected ? "active" : "hidden", type: 'check' })
										);
									})
								)
							),
							activeData.length == 0 ? _react2.default.createElement(_antd.Empty, {
								image: 'https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original',
								imageStyle: {
									height: 60,
									marginTop: "30px"
								},
								description: "暂无匹配"
							}) : null
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 12, className: 'tl', style: {
									minHeight: '350px',
									borderLeft: '1px solid #e6e6e6'
								} },
							_react2.default.createElement(
								'p',
								{ className: 'pl20' },
								'\u5DF2\u9009\u6210\u5458(',
								rightSelect && rightSelect.length,
								')'
							),
							_react2.default.createElement(
								'ul',
								{ className: 'userlist_ul_del' },
								rightSelect.length > 0 && rightSelect.map(function (item, index) {
									return _react2.default.createElement(
										'li',
										{
											key: index,
											className: 'pr',
											onClick: _this4.handClickDel.bind(_this4, item) },
										_react2.default.createElement(
											_antd.Avatar,
											{
												style: {
													display: 'inlineBlock',
													backgroundColor: colorList[index % 10],
													verticalAlign: 'middle'
												}, size: 'small' },
											item.realname.slice(0, 1)
										),
										' ',
										_react2.default.createElement(
											'span',
											{ className: 'ul_name' },
											item.realname
										),
										_react2.default.createElement(_antd.Icon, {
											style: {
												position: 'absolute',
												top: '13px',
												right: '15px',
												fontSize: '16px',
												color: 'rgba(184,80,74,1)',
												cursor: 'pointer'
											},
											className: 'userlist_ul_icon',
											type: 'close' })
									);
								})
							)
						)
					)
				)
			);
		}
	}]);

	return PersonAdd;
}(_react2.default.Component)) || _class) || _class);
exports.default = PersonAdd;

/***/ }),

/***/ 2045:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 发送邮件
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _EditableTagEmail = __webpack_require__(2040);

var _EditableTagEmail2 = _interopRequireDefault(_EditableTagEmail);

var _PersonAdd = __webpack_require__(2044);

var _PersonAdd2 = _interopRequireDefault(_PersonAdd);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SendEmail = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(SendEmail, _React$Component);

    function SendEmail(props) {
        _classCallCheck(this, SendEmail);

        var _this2 = _possibleConstructorReturn(this, (SendEmail.__proto__ || Object.getPrototypeOf(SendEmail)).call(this, props));

        _this2.sendReport = function () {
            var _this = _this2;
            var _this$state = _this.state,
                emails = _this$state.emails,
                userIds = _this$state.userIds,
                ccEmails = _this$state.ccEmails,
                ccUserIds = _this$state.ccUserIds;

            var isemailUserIds = userIds == null ? [] : userIds;
            var isemails = emails == null ? [] : emails;
            // 选择收件人
            if (isemailUserIds.length == 0 && isemails.length == 0) {
                _antd.message.warn("请先选择邮件收件人");
                return false;
            }
            var obj = _this2.props.obj;

            var params = {
                makePlot: obj,
                emails: emails,
                userIds: userIds == null ? [] : userIds.map(function (item) {
                    return item.userId;
                }),
                ccEmails: ccEmails,
                ccUserIds: ccUserIds == null ? [] : ccUserIds.map(function (item) {
                    return item.userId;
                })
            };
            _this2.store.sendMakePlotEmail(params).then(function (res) {
                if (res == true) {
                    _antd.message.success("邮件发送成功");
                    _this2.reset();
                }
            });
        };

        _this2.updateState = function (type, data) {
            _this2.setState(_defineProperty({}, type, Object.assign([], data)));
        };

        _this2.reset = function () {
            _this2.setState({
                emails: [], // 邮件
                userIds: [], // 用户
                ccEmails: [], // 抄送邮件
                ccUserIds: [] // 抄送用户
            });
        };

        _this2.store = _this2.props.store;
        _this2.state = {
            emails: [], // 邮件
            userIds: [], // 用户
            ccEmails: [],
            ccUserIds: []
        };
        return _this2;
    }

    _createClass(SendEmail, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.reset();
        }
    }, {
        key: 'render',
        value: function render() {
            var formItemLayoutWithOutLabel = {
                wrapperCol: {
                    xs: { span: 24, offset: 0 },
                    sm: { span: 20, offset: 3 }
                }
            };
            var _state = this.state,
                emails = _state.emails,
                userIds = _state.userIds,
                ccEmails = _state.ccEmails,
                ccUserIds = _state.ccUserIds;


            return _react2.default.createElement(
                _antd.Form,
                null,
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u5185\u5BB9\u53D1\u9001'
                ),
                _react2.default.createElement(
                    _antd.Form.Item,
                    formItemLayoutWithOutLabel,
                    _react2.default.createElement(
                        _antd.Button,
                        {
                            style: { position: 'relative', top: '4px' },
                            className: 'fl',
                            type: 'link',
                            onClick: this.sendReport },
                        '\u70B9\u51FB\u53D1\u9001\u90AE\u4EF6'
                    )
                ),
                _react2.default.createElement(
                    _antd.Form.Item,
                    formItemLayoutWithOutLabel,
                    _react2.default.createElement(
                        'div',
                        { className: 'fl mr25 ml15' },
                        _react2.default.createElement(
                            'span',
                            null,
                            '\u6536\u4EF6\u4EBA\uFF1A'
                        ),
                        _react2.default.createElement(_EditableTagEmail2.default, {
                            title: '\u6DFB\u52A0\u6536\u4EF6\u4EBA\u5730\u5740',
                            data: emails,
                            updateState: this.updateState.bind(this, 'emails')
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'fl', style: { minWidth: '80px' } },
                        _react2.default.createElement(_PersonAdd2.default, {
                            data: userIds,
                            updatePerson: this.updateState.bind(this, 'userIds'),
                            disabled: false,
                            title: '\u6DFB\u52A0\u6536\u4EF6\u4EBA'
                        })
                    )
                ),
                _react2.default.createElement(
                    _antd.Form.Item,
                    formItemLayoutWithOutLabel,
                    _react2.default.createElement(
                        'div',
                        { className: 'fl mr25 ml15' },
                        _react2.default.createElement(
                            'span',
                            null,
                            '\u6284\u9001\u4EBA\uFF1A'
                        ),
                        _react2.default.createElement(_EditableTagEmail2.default, {
                            title: '\u6DFB\u52A0\u6284\u9001\u4EBA\u5730\u5740',
                            data: ccEmails,
                            updateState: this.updateState.bind(this, 'ccEmails')
                        })
                    ),
                    _react2.default.createElement(
                        'div',
                        { className: 'fl', style: { minWidth: '80px' } },
                        _react2.default.createElement(_PersonAdd2.default, {
                            data: ccUserIds,
                            updatePerson: this.updateState.bind(this, 'ccUserIds'),
                            disabled: false,
                            title: '\u6DFB\u52A0\u6284\u9001\u4EBA'
                        })
                    )
                )
            );
        }
    }]);

    return SendEmail;
}(_react2.default.Component)) || _class;

exports.default = SendEmail;

/***/ }),

/***/ 2046:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 详情页
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _Document = __webpack_require__(1618);

var _Document2 = _interopRequireDefault(_Document);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _reactZmage = __webpack_require__(1522);

var _reactZmage2 = _interopRequireDefault(_reactZmage);

var _SendEmail = __webpack_require__(2045);

var _SendEmail2 = _interopRequireDefault(_SendEmail);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var dateFormat = 'YYYY-MM-DD';

var View = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(View, _React$Component);

    function View(props) {
        _classCallCheck(this, View);

        var _this = _possibleConstructorReturn(this, (View.__proto__ || Object.getPrototypeOf(View)).call(this, props));

        _this.getMakePlot = function () {
            var projectId = _this.store.projectId;
            _this.store.getMakePlot({ 'projectId': projectId }).then(function (mres) {
                if (mres) {
                    var res = JSON.parse(JSON.stringify(mres));
                    _this.setState({
                        obj: mres,
                        makePlotInfo: res.makePlotInfo,
                        buildTeamTwoMain: res.buildTeamTwoMain,
                        makePlotCost: res.makePlotCost,
                        makePlotPeople: Array.isArray(res.makePlotPeople) ? res.makePlotPeople.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotMachine: Array.isArray(res.makePlotMachine) ? res.makePlotMachine.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotMaterial: Array.isArray(res.makePlotMaterial) ? res.makePlotMaterial.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotQuality: Array.isArray(res.makePlotQuality) ? res.makePlotQuality.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotRisk: Array.isArray(res.makePlotRisk) ? res.makePlotRisk.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : [],
                        makePlotSafe: Array.isArray(res.makePlotSafe) ? res.makePlotSafe.map(function (item, index) {
                            return Object.assign(item, { key: index + 1 });
                        }) : []
                    });
                }
            });
        };

        _this.store = _this.props.DeliveryStore;
        _this.state = {
            makePlotInfo: {}, // 工程概况
            buildTeamTwoMain: {}, //
            makePlotCost: {},
            makePlotPeople: [],
            makePlotMachine: [],
            makePlotMaterial: [],
            makePlotQuality: [],
            makePlotRisk: [],
            makePlotSafe: [],
            obj: {}
        };
        return _this;
    }

    _createClass(View, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            this.getMakePlot();
        }
    }, {
        key: 'render',
        value: function render() {
            var _state = this.state,
                makePlotInfo = _state.makePlotInfo,
                buildTeamTwoMain = _state.buildTeamTwoMain,
                makePlotCost = _state.makePlotCost,
                makePlotPeople = _state.makePlotPeople,
                makePlotMachine = _state.makePlotMachine,
                makePlotMaterial = _state.makePlotMaterial,
                makePlotQuality = _state.makePlotQuality,
                makePlotRisk = _state.makePlotRisk,
                makePlotSafe = _state.makePlotSafe,
                obj = _state.obj;

            var columns1 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center'
            }, {
                title: '目标项',
                dataIndex: 'age',
                key: 'age',
                align: 'center'
            }, {
                title: '内控目标值',
                dataIndex: 'address',
                key: 'address',
                align: 'left',
                render: function render(text, record) {
                    if (record.key == 1) {
                        var progressValueV4 = function progressValueV4(day1, day2, day3) {
                            return [_react2.default.createElement(
                                'p',
                                null,
                                '1\u3001\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A',
                                day1
                            ), _react2.default.createElement(
                                'p',
                                null,
                                '2\u3001\u975E\u6807\u7BB1\u8FDB\u573A\u65F6\u95F4\uFF1A',
                                day2
                            ), _react2.default.createElement(
                                'p',
                                null,
                                '3\u3001\u88C5\u914D\u5B8C\u6210\u65F6\u95F4\uFF1A',
                                day3
                            )];
                        };
                        var targetDay1 = buildTeamTwoMain.progressTargetTimeSure === 1 ? (0, _moment2.default)(buildTeamTwoMain.progressTargetBaseTime).format(dateFormat) : "T";
                        var targetDay2 = targetDay1 === "T" ? "T+" + buildTeamTwoMain.progressTargetNostandardDay + "日历天" : (0, _moment2.default)(targetDay1).add(buildTeamTwoMain.progressTargetNostandardDay, "days").format(dateFormat);
                        var targetDay3 = targetDay1 === "T" ? "T+" + buildTeamTwoMain.progressTargetOverDay + "日历天" : (0, _moment2.default)(targetDay1).add(buildTeamTwoMain.progressTargetOverDay, "days").format(dateFormat);
                        return _react2.default.createElement(
                            'div',
                            null,
                            progressValueV4(targetDay1, targetDay2, targetDay3)
                        );
                    } else if (record.key == 2) {
                        return _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u9A8C\u6536\u6B21\u6570\uFF1A \u2264 ',
                                buildTeamTwoMain.qualityTargetCheckCount,
                                ' \u6B21 \u5BA2\u6237\u786E\u8BA4\u7B7E\u5B57'
                            )
                        );
                    } else if (record.key == 3) {
                        return _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u76C8\u5229\uFF1A',
                                buildTeamTwoMain.profitTargetRate,
                                '%'
                            )
                        );
                    } else if (record.key == 4) {
                        return _react2.default.createElement(
                            'div',
                            null,
                            buildTeamTwoMain.markingTargetStandard == 1 ? _react2.default.createElement(
                                'p',
                                null,
                                '\u6253\u9020\u6210\u4E3A\u6807\u6746\u9879\u76EE\uFF0C\u5F62\u6210\u8425\u9500\u6848\u4F8B'
                            ) : null,
                            buildTeamTwoMain.markingTargetSatisfied == 1 ? _react2.default.createElement(
                                'p',
                                null,
                                '\u987E\u5BA2\u6EE1\u610F\uFF0C\u80FD\u591F\u7ED9\u6211\u4EEC\u53D1\u8868\u626C\u4FE1'
                            ) : null
                        );
                    } else if (record.key == 5) {
                        return _react2.default.createElement(
                            'div',
                            null,
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u5B89\u5168\u4E8B\u6545\uFF1A \u2264 ',
                                buildTeamTwoMain.safeTargetAccidentCount,
                                ' \u6B21 \u6B7B\u4EA1\u3001\u91CD\u4F24\u3001\u8F7B\u4F24'
                            ),
                            _react2.default.createElement(
                                'p',
                                null,
                                '\u5B89\u5168\u9690\u60A3\uFF1A \u2264 ',
                                buildTeamTwoMain.safeTargetTreacherousCount,
                                ' \u6B21 \u91CD\u5927\u4E8B\u6545\u9690\u60A3'
                            )
                        );
                    }
                }
            }];

            var dataSource1 = [{
                key: '1',
                age: '进度',
                address: '西湖区湖底公园1号'
            }, {
                key: '2',
                age: '质量',
                address: '西湖区湖底公园1号'
            }, {
                key: '3',
                age: '利润',
                address: '西湖区湖底公园1号'
            }, {
                key: '4',
                age: '营销',
                address: '西湖区湖底公园1号'
            }, {
                key: '5',
                age: '安全',
                address: '西湖区湖底公园1号'
            }];

            var columns2 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center',
                className: 'vam'
            }, {
                title: "分项",
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true,
                className: 'vam'
            }, {
                title: "人员数量",
                dataIndex: 'count',
                key: 'count',
                align: 'center',
                className: 'vam'
            }, {
                title: "进场时间",
                dataIndex: 'enterTime',
                key: 'enterTime',
                align: 'center',
                className: 'vam',
                render: function render(text, record) {
                    return text == 0 || text == null ? "" : (0, _moment2.default)(text).format('YYYY-MM-DD');
                }
            }, {
                title: "备注",
                dataIndex: 'remark',
                key: 'remark',
                align: 'left',
                width: "30%",
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }
            }];

            var columns3 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center',
                className: 'vam'
            }, {
                title: "设备名称",
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true,
                className: 'vam'
            }, {
                title: "规格型号",
                dataIndex: 'specs',
                key: 'specs',
                align: 'center',
                className: 'vam'
            }, {
                title: "设备数量（台）",
                dataIndex: 'specs',
                key: 'specs',
                align: 'center',
                className: 'vam'
            }, {
                title: "备注",
                dataIndex: 'remark',
                key: 'remark',
                align: 'left',
                width: "30%",
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }
            }];

            var columns4 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center',
                className: 'vam'
            }, {
                title: "材料名称",
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true,
                className: 'vam'
            }, {
                title: "进场日期",
                dataIndex: 'enterBeginTime',
                key: 'enterBeginTime',
                align: 'center',
                className: 'vam',
                render: function render(text, record) {
                    return text == 0 || text == null ? "" : (0, _moment2.default)(record["enterBeginTime"]).format('YYYY-MM-DD') + "至" + (0, _moment2.default)(record["enterEndTime"]).format('YYYY-MM-DD');
                }
            }, {
                title: "备注",
                dataIndex: 'remark',
                key: 'remark',
                align: 'left',
                width: "30%",
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }
            }];
            var columns5 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center',
                className: 'vam'
            }, {
                title: "质量技术交底内容",
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true,
                className: 'vam'
            }, {
                title: "交底人",
                dataIndex: 'buildTeamName',
                key: 'buildTeamName',
                align: 'center',
                className: 'vam'
            }, {
                title: "备注",
                dataIndex: 'remark',
                key: 'remark',
                align: 'left',
                width: "30%",
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }
            }];
            var columns6 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center',
                className: 'vam'
            }, {
                title: "安全生产教育交底内容",
                dataIndex: 'name',
                key: 'name',
                align: 'center',
                editable: true,
                className: 'vam'
            }, {
                title: "交底人",
                dataIndex: 'buildTeamName',
                key: 'buildTeamName',
                align: 'center',
                className: 'vam'
            }, {
                title: "备注",
                dataIndex: 'remark',
                key: 'remark',
                align: 'left',
                width: "30%",
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }

            }];
            var columns7 = [{
                title: '序号',
                dataIndex: 'key',
                key: 'key',
                align: 'center',
                className: 'vam'
            }, {
                title: "风险类型",
                dataIndex: 'type',
                key: 'type',
                align: 'center',
                className: 'vam',
                editable: true,
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            style: { verticalAlign: "middle" } },
                        text
                    );
                }
            }, {
                title: "风险描述",
                dataIndex: 'describes',
                key: 'describes',
                align: 'left',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }
            }, {
                title: "应对方案",
                dataIndex: 'programme',
                key: 'programme',
                align: 'left',
                render: function render(text, record) {
                    return _react2.default.createElement(
                        'div',
                        {
                            id: '' + record.id,
                            style: { width: '100%', lineHeight: '150%', wordBreak: 'break-all', whiteSpace: 'pre-wrap' },
                            className: 'pr' },
                        text
                    );
                }
            }];

            var state1 = { 0: "", 1: "未签订", 2: "已签订" };
            var state2 = { 0: "", 1: "未发生", 2: "已发生" };

            var isDocument = makePlotInfo.document == null || _typeof(makePlotInfo.document) == "object" && Object.keys(makePlotInfo.document).length == 0 ? false : true; // 是否有采购合同


            return _react2.default.createElement(
                'div',
                { style: { padding: "0 15px" } },
                _react2.default.createElement(
                    _antd.Button,
                    {
                        ghost: true,
                        type: 'primary',
                        icon: 'poweroff',
                        onClick: this.props.reStartHandover
                    },
                    '\u91CD\u65B0\u542F\u52A8'
                ),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u4E00\u3001\u5DE5\u7A0B\u6982\u51B5'
                ),
                _react2.default.createElement(
                    'table',
                    { className: 'suppliertable', style: { width: '100%' } },
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u5DE5\u7A0B\u540D\u79F0'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.name
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u5DE5\u7A0B\u5730\u70B9'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.address
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u5EFA\u8BBE\u5355\u4F4D'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.partyUnits
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u65BD\u5DE5\u5355\u4F4D'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.buildUnits
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u4E3B\u8981\u4F9B\u5E94\u5546'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.supplier == null ? "" : makePlotInfo.supplier.map(function (item) {
                                return item.name;
                            }).join("，")
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u5DE5\u7A0B\u7C7B\u578B'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.projectConstructionType
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u5EFA\u7B51\u9762\u79EF\uFF08m2\uFF09'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.buildArea
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u623F\u95F4\u7EC4\u6210\uFF08\u95F4\uFF09'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.roomComposition
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u8FDB\u573A\u6761\u4EF6'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.enterCondition
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u627F\u63A5\u5185\u5BB9'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.productType
                        )
                    )
                ),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u4E8C\u3001\u7BA1\u7406\u76EE\u6807'
                ),
                _react2.default.createElement(_antd.Table, {
                    className: 'digital_table agenda_nohover',
                    pagination: false,
                    bordered: true,
                    dataSource: dataSource1,
                    columns: columns1 }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u4E09\u3001\u7EC4\u7EC7\u67B6\u6784'
                ),
                _react2.default.createElement(
                    'div',
                    { className: 'w', style: { textAlign: "center", padding: "15px 0" } },
                    _react2.default.createElement(_reactZmage2.default, {
                        style: { width: "80%",
                            height: "350px" },
                        src: makePlotInfo.orgImageUrl })
                ),
                _react2.default.createElement('div', { className: 'deaft_content_detail mt20', style: { paddingLeft: '14px' },
                    dangerouslySetInnerHTML: { __html: makePlotInfo.organizationRemark } }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u56DB\u3001\u6210\u672C\u7B56\u5212'
                ),
                _react2.default.createElement(
                    'table',
                    { className: 'makeplotTable' },
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'th',
                            null,
                            '\u5E8F\u53F7'
                        ),
                        _react2.default.createElement(
                            'th',
                            null,
                            '\u5206\u9879'
                        ),
                        _react2.default.createElement(
                            'th',
                            null,
                            '\u5185\u5BB9'
                        ),
                        _react2.default.createElement(
                            'th',
                            null,
                            '\u72B6\u6001'
                        ),
                        _react2.default.createElement(
                            'th',
                            null,
                            '\u91D1\u989D\uFF08\u5143\uFF09'
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '1'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u7532\u65B9\u5408\u540C'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotInfo.partyUnit
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            state1[makePlotCost.firstContractState]
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.firstContractValue
                        )
                    ),
                    makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.map(function (item, index) {
                        return _react2.default.createElement(
                            'tr',
                            { key: item.id },
                            _react2.default.createElement(
                                'td',
                                null,
                                index + 2
                            ),
                            _react2.default.createElement(
                                'td',
                                null,
                                '\u5206\u5305\u5408\u540C'
                            ),
                            _react2.default.createElement(
                                'td',
                                null,
                                item.supplierName
                            ),
                            _react2.default.createElement(
                                'td',
                                null,
                                state1[item.isActive]
                            ),
                            _react2.default.createElement(
                                'td',
                                null,
                                item.contractMoney
                            )
                        );
                    }),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 2
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u6587\u660E\u65BD\u5DE5'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u4E94\u724C\u4E00\u56FE\u3001\u9A6C\u7532\u3001\u8B66\u793A\u6807\u8BED\u3001\u8B66\u793A\u5E26\u3001\u5DE5\u4EBA\u6170\u95EE\u7B49'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            state2[makePlotCost.civilizedConstructionState]
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.civilizedConstructionValue
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 3
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u62DB\u5F85\u8D39'
                        ),
                        _react2.default.createElement('td', null),
                        _react2.default.createElement(
                            'td',
                            null,
                            state2[makePlotCost.hospitalityState]
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.hospitalityValue
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 4
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u98CE\u9669\u9644\u52A0'
                        ),
                        _react2.default.createElement('td', null),
                        _react2.default.createElement(
                            'td',
                            null,
                            state2[makePlotCost.additionalRiskState]
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.additionalRiskValue
                        )
                    ),
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost && makePlotCost.confirmSupplierTwoItems && makePlotCost.confirmSupplierTwoItems.length + 5
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u6BDB\u5229\u6DA6'
                        ),
                        _react2.default.createElement('td', null),
                        _react2.default.createElement('td', null),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.yields
                        )
                    )
                ),
                _react2.default.createElement('div', { className: 'deaft_content_detail mt20', style: { paddingLeft: '14px' },
                    dangerouslySetInnerHTML: { __html: makePlotCost.remark } }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    ' \u4E94\u3001\u8FDB\u5EA6\u7B56\u5212'
                ),
                _react2.default.createElement(
                    'p',
                    { className: 'mt15 mb15' },
                    '1\u3001\u5DE5\u671F\u63A7\u5236\u76EE\u6807'
                ),
                _react2.default.createElement(
                    'table',
                    { className: 'suppliertable', style: { width: '100%' } },
                    _react2.default.createElement(
                        'tr',
                        null,
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u7532\u65B9\u5408\u540C\u5DE5\u671F'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.firstPartyTimeRange
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            '\u4F9B\u5E94\u5546\u5408\u540C\u5DE5\u671F'
                        ),
                        _react2.default.createElement(
                            'td',
                            null,
                            makePlotCost.supplierTimeRange
                        )
                    )
                ),
                _react2.default.createElement(
                    'p',
                    { className: 'mt15 mb15' },
                    '2\u3001\u5DE5\u4EBA\u8FDB\u573A\u8BA1\u5212'
                ),
                _react2.default.createElement(_antd.Table, {
                    pagination: false,
                    bordered: true,
                    dataSource: makePlotPeople,
                    columns: columns2 }),
                _react2.default.createElement(
                    'p',
                    { className: 'mt15 mb15' },
                    '3\u3001\u673A\u68B0\u8BBE\u5907\u9700\u6C42\u8BA1\u5212'
                ),
                _react2.default.createElement(_antd.Table, {
                    pagination: false,
                    bordered: true,
                    dataSource: makePlotMachine,
                    columns: columns3 }),
                _react2.default.createElement(
                    'p',
                    { className: 'mt15 mb15' },
                    '4\u3001\u4E3B\u8981\u6750\u6599\u9700\u6C42\u8BA1\u5212'
                ),
                _react2.default.createElement(_antd.Table, {
                    pagination: false,
                    bordered: true,
                    dataSource: makePlotMaterial,
                    columns: columns4 }),
                _react2.default.createElement(
                    'p',
                    { className: 'mt15 mb15' },
                    '5\u3001\u65BD\u5DE5\u8FDB\u5EA6\u8BA1\u5212\u56FE'
                ),
                _react2.default.createElement(
                    'div',
                    { className: 'w', style: { textAlign: "center", padding: "15px 0" } },
                    _react2.default.createElement(_reactZmage2.default, {
                        style: {
                            maxWidth: "75%",
                            height: "auto"
                        },
                        src: makePlotInfo.planImageUrl })
                ),
                _react2.default.createElement('div', { className: 'deaft_content_detail mt20', style: { paddingLeft: '14px' },
                    dangerouslySetInnerHTML: { __html: makePlotInfo.planImageRemark } }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u516D\u3001\u8D28\u91CF\u7B56\u5212'
                ),
                _react2.default.createElement(_antd.Table, {
                    pagination: false,
                    bordered: true,
                    dataSource: makePlotQuality,
                    columns: columns5 }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u4E03\u3001\u5B89\u5168\u6587\u660E\u65BD\u5DE5\u7B56\u5212'
                ),
                _react2.default.createElement(_antd.Table, {
                    pagination: false,
                    bordered: true,
                    dataSource: makePlotSafe,
                    columns: columns6 }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u516B\u3001\u91CD\u70B9\u4E0E\u96BE\u70B9\u5206\u6790'
                ),
                _react2.default.createElement(_antd.Table, {
                    pagination: false,
                    bordered: true,
                    dataSource: makePlotRisk,
                    columns: columns7 }),
                _react2.default.createElement(
                    'h1',
                    { style: { padding: "10px 0", fontWeight: 700, fontSize: "14px" } },
                    '\u751F\u6210\u7684\u65B9\u6848\u7B56\u5212\u4E66'
                ),
                isDocument ? _react2.default.createElement(_Document2.default, {
                    data: makePlotInfo.document,
                    store: this.store
                }) : null,
                _react2.default.createElement(_SendEmail2.default, {
                    obj: obj,
                    store: this.store
                })
            );
        }
    }]);

    return View;
}(_react2.default.Component)) || _class) || _class);
exports.default = View;

/***/ }),

/***/ 2047:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _dec2, _dec3, _class; /*
                                * 房屋铭牌
                                *dangw@bocspace.cn
                                */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _reactRouterDom = __webpack_require__(32);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _download = __webpack_require__(68);

var _SendMailModal = __webpack_require__(1562);

var _SendMailModal2 = _interopRequireDefault(_SendMailModal);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var NamePlate = (_dec = _antd.Form.create(), _dec2 = (0, _mobxReact.inject)('AffairsStore'), _dec3 = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = _dec2(_class = _dec3(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(NamePlate, _React$Component);

	function NamePlate(props) {
		_classCallCheck(this, NamePlate);

		var _this2 = _possibleConstructorReturn(this, (NamePlate.__proto__ || Object.getPrototypeOf(NamePlate)).call(this, props));

		_this2.state = {
			modal1Visible: false,
			modal2Visible: false,
			modal3Visible: false,
			modal4Visible: false,
			fileList: [],
			loading: false,
			isCallSuccess: false,
			downloading: false

			//显示发送邮件对话框
		};

		_this2.showSendMailModal = function () {
			_this2.setState({ modal3Visible: true });
		};

		_this2.sendMakeFile = function () {};

		_this2.inter3sRun = function () {
			var projectDetail = mobx.toJS(_this2.deliveryStore.projectDetail);
			var ratingplate = { code: projectDetail.number, name: projectDetail.name };
			_this2.setState({ isCallSuccess: false, downloading: true });
			_this2.store.saveNameplateFile({ 'n': ratingplate }).then(function (res) {
				if (res) {
					_this2.getReportUrl({ "id": res });
				}
			});
		};

		_this2.info = function () {
			_antd.Modal.info({
				title: '文件正在下载中，请耐心等待',
				onOk: function onOk() {}
			});
		};

		_this2.getReportUrl = function (id) {
			var _this = _this2;
			_this.timer22 = setInterval(function () {
				_this.store.getDocUrl2(id).then(function (url) {
					if (url !== null && url !== "") {
						var ratingplate = mobx.toJS(_this2.deliveryStore.projectDetail);
						_this2.setState({ isCallSuccess: true, downloading: false });
						(0, _download.downloadFile)(url, ratingplate.name + '\u94ED\u724C');
						// 提示，手动关闭
						_this2.info();
						clearInterval(_this.timer22);
					} else {}
				});
			}, 3000);
		};

		_this2.handleCancel = function (modalVisible) {
			_this2.setState(modalVisible);
		};

		_this2.handleAfterSend = function () {
			_this2.setState({ modal3Visible: false });
			_this2.setState({ modal4Visible: true });
		};

		_this2.store = _this2.props.AffairsStore;
		_this2.deliveryStore = _this2.props.DeliveryStore;
		return _this2;
	}

	//发送制作文件


	// 间隔3秒获取pdf地址


	_createClass(NamePlate, [{
		key: 'render',
		value: function render() {
			var _this3 = this;

			var _state = this.state,
			    modal1Visible = _state.modal1Visible,
			    downloading = _state.downloading,
			    modal3Visible = _state.modal3Visible,
			    modal4Visible = _state.modal4Visible;

			var projectDetail = mobx.toJS(this.deliveryStore.projectDetail);
			var nameplateUrl = projectDetail.nameplateUrl;


			return _react2.default.createElement(
				'div',
				{ style: { padding: "10px 30px" }, className: 'pr' },
				_react2.default.createElement(
					_antd.Spin,
					{ spinning: downloading, tip: '\u6B63\u5728\u4E0B\u8F7D,\u8BF7\u7A0D\u7B49...' },
					_react2.default.createElement(
						_antd.Row,
						null,
						_react2.default.createElement(
							_antd.Col,
							{ span: 24 },
							_react2.default.createElement(
								'div',
								{ className: 'daily_tips' },
								_react2.default.createElement(
									'p',
									null,
									_react2.default.createElement(
										'span',
										{ style: { fontSize: 12 } },
										'\u5C0F\u4EA4\u6E29\u99A8\u63D0\u9192\uFF1A\u8BF7\u5728\u5DE5\u7A0B\u63A5\u8FD1\u5B8C\u5DE5\u65F6\uFF0C\u6839\u636E\u623F\u5C4B\u6570\u91CF\uFF0C\u6253\u5370\u623F\u5C4B\u94ED\u724C\uFF0C\u8D34\u5728\u5982\u56FE\u6240\u793A\u4F4D\u7F6E\uFF0C\u65B9\u4FBF\u7528\u6237\u626B\u7801\u62A5\u4FEE\u54E6~'
									)
								)
							)
						)
					),
					_react2.default.createElement(
						_antd.Row,
						{ className: 'mt30' },
						_react2.default.createElement(
							_antd.Col,
							{ span: 8 },
							_react2.default.createElement(
								'div',
								{ className: 'nameplate-title' },
								_react2.default.createElement(
									'p',
									null,
									'\u3010\u6253\u5370\u8981\u6C42\u3011'
								),
								_react2.default.createElement(
									'p',
									{ className: 'nameplate-content' },
									'1\u3001\u5C3A\u5BF8\uFF1A210*130*0.8mm\uFF1B'
								),
								_react2.default.createElement(
									'p',
									{ className: 'nameplate-content' },
									'2\u3001\u5DE5\u827A\uFF1A\u94DD\u677F\u8150\u8680\u586B\u6F06\uFF0C\u56DB\u8272\uFF1B'
								),
								_react2.default.createElement(
									'p',
									{ className: 'nameplate-content' },
									'3\u3001\u5176\u4ED6\uFF1A\u5706\u89D2\u3001\u8D34\u80CC\u80F6\u3002'
								)
							),
							_react2.default.createElement('img', {
								style: { marginTop: "40px" },
								width: '348',
								height: '215',
								src: nameplateUrl == null || nameplateUrl == "" ? "https://bocspace.oss-cn-beijing.aliyuncs.com/ci/nameplate_img.png" : nameplateUrl, alt: '' }),
							_react2.default.createElement(
								'div',
								{
									style: {
										marginTop: '30px',
										textAlign: 'center'
									}
								},
								_react2.default.createElement(
									_antd.Button,
									{
										onClick: this.showSendMailModal,
										icon: 'mail',
										shape: 'round',
										type: 'primary' },
									'\u53D1\u9001\u5236\u4F5C\u6587\u4EF6'
								),
								_react2.default.createElement(_antd.Divider, { type: 'vertical' }),
								_react2.default.createElement(
									_antd.Button,
									{
										onClick: this.inter3sRun,
										shape: 'round' },
									'\u4FDD\u5B58\u81F3\u672C\u5730'
								)
							)
						),
						_react2.default.createElement(
							_antd.Col,
							{ span: 16, className: 'tc' },
							_react2.default.createElement('img', {
								width: '100%',
								height: '477',
								style: { minWidth: "730px", maxWidth: "730px" },
								src: 'https://bocspace.oss-cn-beijing.aliyuncs.com/ci/nameplate.png', alt: '' })
						)
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						visible: modal1Visible,
						title: '',
						onCancel: function onCancel() {
							_this3.handleCancel({ modal1Visible: false });
						},
						footer: null,
						width: 940,
						bodyStyle: { textAlign: 'center', height: '600px', verticalAlign: 'middle' }
					},
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '100px' } },
						_react2.default.createElement('img', {
							width: '116px',
							height: '116px',
							src: './images/u192.png' })
					),
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '35px', fontSize: '24px', fontWeight: 'bold' } },
						_react2.default.createElement(
							'h1',
							null,
							'\u540D\u7247\u7533\u8BF7\u6210\u529F'
						)
					),
					_react2.default.createElement(
						'p',
						{ style: { marginTop: '35px' } },
						'\u540D\u7247\u9884\u8BA12\u4E2A\u5DE5\u4F5C\u65E5\u5185\u53EF\u6253\u5370\u5B8C\u6BD5\uFF0C\u6253\u5370\u5B8C\u6210\u540E\u5C06\u7535\u8BDD\u6216\u90AE\u4EF6\u901A\u77E5\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85\u3002'
					)
				),
				_react2.default.createElement(
					_antd.Modal,
					{
						visible: modal4Visible,
						title: '',
						onCancel: function onCancel() {
							_this3.handleCancel({ modal4Visible: false });
						},
						footer: null,
						width: 300,
						bodyStyle: { textAlign: 'center', height: '300px', verticalAlign: 'middle' }
					},
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '30px' } },
						_react2.default.createElement('img', {
							width: '80px',
							height: '80px',
							src: './images/u380.svg' })
					),
					_react2.default.createElement(
						'div',
						{ style: { marginTop: '10px', fontSize: '24px', fontWeight: 'bold' } },
						_react2.default.createElement(
							'h1',
							null,
							'\u53D1\u9001\u6210\u529F'
						)
					),
					_react2.default.createElement(
						'div',
						{
							style: {
								marginTop: '15px',
								right: 0,
								bottom: 0,
								width: '100%',
								padding: '10px 16px',
								background: '#fff',
								textAlign: 'center',
								zIndex: 9999
							}
						},
						_react2.default.createElement(
							_antd.Button,
							{
								style: { marginRight: 8 },
								shape: 'round',
								onClick: function onClick() {
									_this3.handleCancel({ modal4Visible: false });
								},
								type: 'primary' },
							'\u5173\u95ED'
						)
					)
				),
				_react2.default.createElement(_SendMailModal2.default, {
					type: 'ratingplate',
					visible: modal3Visible,
					sendBuildBusinessEmail: this.sendMakeFile,
					closeModal: function closeModal() {
						_this3.handleCancel({ modal3Visible: false });
					},
					afterSend: this.handleAfterSend,
					store: this.store
				})
			);
		}
	}]);

	return NamePlate;
}(_react2.default.Component)) || _class) || _class) || _class) || _class) || _class);
exports.default = NamePlate;

/***/ }),

/***/ 2065:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *项目看板
                  *dangw@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _url = __webpack_require__(230);

var _url2 = _interopRequireDefault(_url);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _echartsForReact = __webpack_require__(234);

var _echartsForReact2 = _interopRequireDefault(_echartsForReact);

var _fine = __webpack_require__(2179);

var _fine2 = _interopRequireDefault(_fine);

var _fog = __webpack_require__(2180);

var _fog2 = _interopRequireDefault(_fog);

var _rain = __webpack_require__(2181);

var _rain2 = _interopRequireDefault(_rain);

var _snow = __webpack_require__(2182);

var _snow2 = _interopRequireDefault(_snow);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Signboard = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
    _inherits(Signboard, _React$Component);

    function Signboard(props) {
        _classCallCheck(this, Signboard);

        var _this = _possibleConstructorReturn(this, (Signboard.__proto__ || Object.getPrototypeOf(Signboard)).call(this, props));

        _this.transName = function (type) {
            switch (type) {
                case type.includes("雨"):
                    return _rain2.default;
                    break;
                case type.includes("雪"):
                    return _snow2.default;
                    break;
                case type.includes("雾"):
                    return _fog2.default;
                    break;
                case type.includes("晴"):
                    return _fine2.default;
                    break;
                default:
                    return _fine2.default;
            }
        };

        _this.store = _this.props.DeliveryStore;
        _this.state = {
            weatherData: {},
            daily: {},
            photos: [],
            detailData: {}
        };
        return _this;
    }

    _createClass(Signboard, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            var _this2 = this;

            var projectDetail = this.store.projectDetail;

            var projectId = mobx.toJS(projectDetail).id;
            this.store.getWeatherByProjectId({ "projectId": projectId }).then(function (res) {
                _this2.setState({
                    weatherData: res
                });
            });
            this.store.getSignboardInfo({ "projectId": projectId }).then(function (res) {
                var str = JSON.parse(res);
                _this2.setState({
                    daily: str.daily,
                    photos: str.photos,
                    detailData: str.project
                });
            });
        }
    }, {
        key: 'componentWillMount',
        value: function componentWillMount() {}
    }, {
        key: 'render',
        value: function render() {
            var _state = this.state,
                weatherData = _state.weatherData,
                daily = _state.daily,
                photos = _state.photos,
                detailData = _state.detailData;

            var progessData = { 1: "正常", 2: "提前", 3: "延后" };
            var option4 = {
                title: {
                    text: detailData.projectImplementation == null || detailData.projectImplementation.currentRate == "" ? "0%" : detailData.projectImplementation.currentRate + "%",
                    textStyle: {
                        color: '#2096FF',
                        fontSize: 30,
                        fontWeight: '400'
                    },
                    subtext: '进度正常',
                    subtextStyle: {
                        color: '#FFF',
                        fontSize: 12,
                        fontWeight: '400'
                    },
                    itemGap: -4,
                    left: 'center',
                    top: 'center'
                },
                angleAxis: {
                    max: 100,
                    clockwise: false,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    }
                },
                radiusAxis: {
                    type: 'category',
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    }
                },
                polar: {
                    center: ['50%', '50%'],
                    radius: '100%'
                },
                series: [{
                    type: 'bar',
                    data: [{
                        name: detailData.projectImplementation == null || detailData.projectImplementation.currentRate == "" ? 0 : detailData.projectImplementation.currentRate + '\n' + '{a|' + '进度' + detailData.projectImplementation == null ? "正常" : progessData[detailData.projectImplementation.progress],
                        value: detailData.projectImplementation == null || detailData.projectImplementation.currentRate == "" ? 0.01 : detailData.projectImplementation.currentRate,
                        itemStyle: {
                            normal: {
                                color: '#2096FF'
                            }
                        }
                    }],
                    coordinateSystem: 'polar',
                    roundCap: true,
                    barWidth: 10,
                    barGap: '-100%',
                    z: 2
                }, {
                    type: 'bar',
                    data: [{
                        value: 100,
                        itemStyle: {
                            color: 'rgba(30,69,101, 0.8)',
                            shadowColor: 'rgba(0, 0, 0, 0.2)',
                            shadowBlur: 5,
                            shadowOffsetY: 2
                        }
                    }],
                    coordinateSystem: 'polar',
                    roundCap: true,
                    barWidth: 5,
                    barGap: '-70%',
                    z: 1
                }]
            };
            var colorList = ['#2096FF', '#3CFFC4', '#0057DC', '#4B6BFD'];
            var option5 = {
                tooltip: {
                    trigger: 'item'
                },
                color: colorList,
                series: [{
                    type: 'pie',
                    center: ['50%', '50%'],
                    radius: ['50%', '65%'],
                    minAngle: 10,
                    avoidLabelOverlap: true,
                    roseType: 'radius',
                    hoverOffset: 15,
                    itemStyle: {
                        color: function color(params) {
                            return colorList[params.dataIndex];
                        }
                    },
                    label: {
                        show: true,
                        position: 'outer',
                        width: 0,
                        height: 0,
                        lineHeight: 0,
                        backgroundColor: 'auto',
                        padding: [2, -2, 2, -2],
                        borderRadius: 2,
                        distanceToLabelLine: 0,
                        formatter: '{top|{b}}\n{bottom|{c}}',
                        align: 'center',
                        rich: {
                            top: {
                                verticalAlign: 'bottom',
                                padding: [10, 10, 0, 10],
                                align: 'center'
                            },
                            bottom: {
                                padding: [0, 10, 10, 10],
                                verticalAlign: 'top',
                                align: 'center'
                            }
                        }
                    },
                    data: [{
                        name: '待安装',
                        value: daily == null ? 0 : daily.onWayCount + daily.arrivalCount - daily.installCount
                    }, {
                        name: '在途',
                        value: daily.onWayCount == null ? 0 : daily.onWayCount
                    }, {
                        name: '已安装',
                        value: daily.installCount == null ? 0 : daily.installCount
                    }, {
                        name: '进场',
                        value: daily.arrivalCount == null ? 0 : daily.arrivalCount
                    }]
                }]
            };

            return _react2.default.createElement(
                'div',
                {
                    className: 'w',
                    style: {
                        height: "calc(100vh - 90px)",
                        margin: 0,
                        padding: '0',
                        marginTop: "-13px",
                        background: '#15589A'
                    } },
                _react2.default.createElement(
                    _antd.Row,
                    { style: { height: '100%', padding: "0 10px" } },
                    _react2.default.createElement(
                        _antd.Col,
                        { span: 5, className: 'h' },
                        _react2.default.createElement(
                            _antd.Row,
                            { className: 'h' },
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 24, style: { height: '33%', padding: '10px 5px 5px' } },
                                _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily pr' },
                                    _react2.default.createElement(
                                        'div',
                                        { className: 'pr w' },
                                        _react2.default.createElement(
                                            'span',
                                            { className: 'title ellsis w60', title: detailData.name },
                                            detailData.name
                                        ),
                                        _react2.default.createElement(
                                            'span',
                                            { className: 'title-city' },
                                            detailData && detailData.region && JSON.parse(detailData.region)[1]
                                        )
                                    ),
                                    _react2.default.createElement(
                                        'div',
                                        { style: {
                                                display: "flex",
                                                justifyContent: "center",
                                                alignItems: "center",
                                                marginTop: "15px"
                                            } },
                                        _react2.default.createElement('img', { src: weatherData.weatherName && this.transName(weatherData.weatherName), className: 'title-img' }),
                                        _react2.default.createElement(
                                            'div',
                                            { className: 'title-weather' },
                                            _react2.default.createElement(
                                                'div',
                                                { className: 'tl mt10' },
                                                weatherData.weatherName,
                                                ' ',
                                                _react2.default.createElement(
                                                    'span',
                                                    { style: { marginLeft: "15px" } },
                                                    ' ',
                                                    weatherData.minTemp,
                                                    ' - ',
                                                    weatherData.maxTemp,
                                                    ' \u2103'
                                                )
                                            ),
                                            _react2.default.createElement(
                                                'div',
                                                { className: 'tl mt10' },
                                                weatherData.windDirection == null ? "风力 " : weatherData.windDirection,
                                                ' ',
                                                _react2.default.createElement(
                                                    'span',
                                                    { style: { marginLeft: "15px" } },
                                                    weatherData.windPower
                                                )
                                            )
                                        )
                                    ),
                                    _react2.default.createElement(
                                        'div',
                                        { className: 'title2' },
                                        '\u6700\u8FD1\u66F4\u65B0\u65F6\u95F4\uFF1A',
                                        weatherData.projectUpdateTime == 0 || weatherData.projectUpdateTime == null || weatherData.projectUpdateTime == "" ? "无" : (0, _moment2.default)(weatherData.projectUpdateTime).format("YYYY.MM.DD HH:mm:ss")
                                    )
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 24, style: { height: '66%', padding: '5px' } },
                                photos.length > 0 && _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily' },
                                    _react2.default.createElement(
                                        'div',
                                        { className: 'title' },
                                        photos == null ? "" : photos[0].place
                                    ),
                                    _react2.default.createElement('img', {
                                        style: {
                                            width: '100%',
                                            maxWidth: '100%',
                                            height: 'calc(100% - 36px)'
                                        },
                                        src: photos == null ? "" : photos[0].imageDocs[0].fileUrl,
                                        alt: '' })
                                )
                            )
                        )
                    ),
                    _react2.default.createElement(
                        _antd.Col,
                        { span: 15, className: 'h' },
                        _react2.default.createElement(
                            _antd.Row,
                            { style: { height: '50%' } },
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 10, style: { padding: '10px 5px 5px 5px', height: '100%' } },
                                _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily tl h' },
                                    _react2.default.createElement(
                                        'p',
                                        { className: 'title', style: { display: "block" } },
                                        _react2.default.createElement(
                                            'span',
                                            null,
                                            '\u8FDB\u573A\u65F6\u95F4\uFF1A'
                                        ),
                                        _react2.default.createElement(
                                            'span',
                                            { style: { fontWeight: "400" } },
                                            detailData.projectImplementation == null || detailData.projectImplementation.beginTime == 0 || detailData.projectImplementation.beginTime == null || detailData.projectImplementation.beginTime == "" ? "无" : (0, _moment2.default)(detailData.projectImplementation.beginTime).format("YYYY年MM月DD日")
                                        )
                                    ),
                                    _react2.default.createElement(
                                        'p',
                                        { className: 'title', style: { display: "block", marginTop: '-10px' } },
                                        _react2.default.createElement(
                                            'span',
                                            null,
                                            '\u5B8C\u5DE5\u65F6\u95F4\uFF1A'
                                        ),
                                        _react2.default.createElement(
                                            'span',
                                            { style: { fontWeight: "400" } },
                                            detailData.projectImplementation == null || detailData.projectImplementation.endTime == 0 || detailData.projectImplementation.endTime == null || detailData.projectImplementation.endTime == "" ? "无" : (0, _moment2.default)(detailData.projectImplementation.endTime).format("YYYY年MM月DD日")
                                        )
                                    ),
                                    _react2.default.createElement(_echartsForReact2.default, {
                                        height: "calc(100% - 150px)",
                                        option: option4,
                                        notMerge: true,
                                        lazyUpdate: true
                                    })
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 14, style: { padding: '10px 5px 5px 5px', height: '100%' } },
                                _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily tc h' },
                                    _react2.default.createElement(
                                        'p',
                                        { className: 'title', style: { display: "block" } },
                                        '\u7BB1\u623F\u603B\u91CF\uFF1A',
                                        _react2.default.createElement(
                                            'span',
                                            {
                                                style: { fontWeight: "400" } },
                                            ' ',
                                            detailData.boxCount ? detailData.boxCount : 0,
                                            '\u95F4'
                                        )
                                    ),
                                    _react2.default.createElement(
                                        'p',
                                        { className: 'title', style: { display: "block", marginTop: '-10px' } },
                                        '\u5230\u573A\u6570\u91CF\uFF1A',
                                        _react2.default.createElement(
                                            'span',
                                            {
                                                style: { fontWeight: "400" } },
                                            daily.arrivalCount == null ? 0 : daily.arrivalCount,
                                            '\u95F4'
                                        )
                                    ),
                                    _react2.default.createElement(_echartsForReact2.default, {
                                        height: "calc(100% - 150px)",
                                        option: option5,
                                        notMerge: true,
                                        lazyUpdate: true
                                    })
                                )
                            )
                        ),
                        _react2.default.createElement(
                            _antd.Row,
                            { style: { height: '50%' } },
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 24, style: { height: "100%", padding: '5px 5px 10px' } },
                                photos.length > 0 && _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily' },
                                    _react2.default.createElement(
                                        'div',
                                        {
                                            className: 'title' },
                                        photos == null ? "" : photos[1].place
                                    ),
                                    _react2.default.createElement('img', {
                                        style: {
                                            width: '100%',
                                            maxWidth: '100%',
                                            height: 'calc(100% - 36px)'
                                        },
                                        src: photos == null ? "" : photos[1].imageDocs[0].fileUrl,
                                        alt: '' })
                                )
                            )
                        )
                    ),
                    _react2.default.createElement(
                        _antd.Col,
                        { span: 4, className: 'h' },
                        _react2.default.createElement(
                            _antd.Row,
                            { className: 'h' },
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 24, style: { height: '66%', padding: '10px 5px 5px 5px' } },
                                photos.length > 0 && _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily' },
                                    _react2.default.createElement(
                                        'div',
                                        {
                                            className: 'title' },
                                        ' ',
                                        photos == null ? "" : photos[2].place
                                    ),
                                    _react2.default.createElement('img', {
                                        style: {
                                            width: '100%',
                                            maxWidth: '100%',
                                            height: 'calc(100% - 36px)'
                                        },
                                        src: photos == null ? "" : photos[2].imageDocs[0].fileUrl,
                                        alt: '' })
                                )
                            ),
                            _react2.default.createElement(
                                _antd.Col,
                                { span: 24, style: { height: '33%', padding: '5px' } },
                                photos.length > 0 && _react2.default.createElement(
                                    'div',
                                    { className: 'bigScreen-daily' },
                                    _react2.default.createElement(
                                        'div',
                                        {
                                            className: 'title' },
                                        photos == null ? "" : photos[3].place
                                    ),
                                    _react2.default.createElement('img', {
                                        style: {
                                            width: '100%',
                                            maxWidth: '100%',
                                            height: 'calc(100% - 36px)'
                                        },
                                        src: photos == null ? "" : photos[3].imageDocs[0].fileUrl,
                                        alt: '' })
                                )
                            )
                        )
                    )
                )
            );
        }
    }]);

    return Signboard;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = Signboard;

/***/ }),

/***/ 2066:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 附件
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//@inject('DeliveryStore')
var StakeholdeFile = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(StakeholdeFile, _React$Component);

	function StakeholdeFile(props) {
		_classCallCheck(this, StakeholdeFile);

		var _this = _possibleConstructorReturn(this, (StakeholdeFile.__proto__ || Object.getPrototypeOf(StakeholdeFile)).call(this, props));

		_this.saveContents = function () {
			_this.getEnclosureList();
		};

		_this.saveItem = function (row) {
			var dataSource = _this.state.dataSource;
			var taskDetail = _this.store.taskDetail;

			var em = { taskId: taskDetail.id, name: '', indexs: 1, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
			if (row.id !== undefined && row.id[0] !== "!") {
				em['id'] = row.id;
				em['orders'] = row.orders;
				em['enclosureItems'] = row.enclosureItems;
				em['templates'] = row.templates;
				em['cases'] = row.cases;
				em['name'] = row.name;
			}
			var parmas = { "em": em, taskId: taskDetail.id, indexs: 1 };
			_this.store.saveEnclosureMain(parmas).then(function (res) {
				_this.getEnclosureList();
			});
		};

		_this.getEnclosureList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getEnclosureList({ "taskId": mobx.toJS(taskDetail).id, "indexs": 0 }).then(function (res) {
				_this.store.enclosureList = res;
				_this.setState({ dataSource: res, enclosureList: res });
			});
		};

		_this.handleBack = function () {
			_this.props.changeVis("2");
		};

		_this.store = _this.props.store;
		_this.state = {
			dataSource: []
		};
		return _this;
	}

	_createClass(StakeholdeFile, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getEnclosureList();
		}
	}, {
		key: 'render',
		value: function render() {
			var dataSource = this.state.dataSource;


			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					'div',
					{ className: 'daily_list_op mb30' },
					_react2.default.createElement(
						'span',
						{ onClick: this.handleBack, className: 'pointer' },
						_react2.default.createElement(_antd.Icon, { type: 'left-circle', style: { color: "#57ACFF", fontSize: "18px", marginRight: "5px" } }),
						'\u8FD4\u56DE\u5E72\u7CFB\u4EBA\u5217\u8868',
						_react2.default.createElement(
							_antd.Button,
							{ className: 'title', type: 'link' },
							_react2.default.createElement('img', { src: './images/delivery/u3771.png', style: { width: '23px', height: '23px' } }),
							'\u9644\u4EF6'
						)
					),
					_react2.default.createElement(_antd.Divider, { type: 'vertical' }),
					_react2.default.createElement(
						'span',
						{ style: { color: "#333", fontSize: '12px' } },
						'\u8BF7\u6309\u7167\u8981\u6C42\u4E0A\u4F20\u9644\u4EF6\u5185\u5BB9\uFF0C\u6807\u661F\u4E3A\u5FC5\u987B\u4E0A\u4F20\u9879\uFF0C\u53EF\u81EA\u7531\u6DFB\u52A0\u9644\u4EF6\u9879\u76EE\u4E2D\u4E0D\u542B\u7684\u76F8\u5173\u5185\u5BB9'
					)
				),
				_react2.default.createElement(_EditableTableUpload2.default, {
					id: 'id',
					store: this.store,
					dataSource: dataSource.map(function (item, index) {
						return Object.assign(item, { "keyIndex": index + 1 });
					}),
					saveData: this.saveContents,
					saveItem: this.saveItem,
					disabled: false,
					pid: ''
				})
			);
		}
	}]);

	return StakeholdeFile;
}(_react2.default.Component)) || _class;

exports.default = StakeholdeFile;

/***/ }),

/***/ 2067:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 详情页
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//@inject('DeliveryStore')
var StakeholdeView = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(StakeholdeView, _React$Component);

	function StakeholdeView(props) {
		_classCallCheck(this, StakeholdeView);

		var _this = _possibleConstructorReturn(this, (StakeholdeView.__proto__ || Object.getPrototypeOf(StakeholdeView)).call(this, props));

		_this.editDaily = function () {
			_this.store.stakeState = true;
			var fields = mobx.toJS(_this.store.stakeObj) || {};
			var communicatorId = fields.communicatorId,
			    communicatorName = fields.communicatorName;


			if (communicatorName != "" && communicatorId != "") {
				var communicator = [{ userId: communicatorId, userName: communicatorName }];
				_this.store.stakeObj = Object.assign(fields, {
					communicator: communicator
				});
			}
		};

		_this.delDaily = function (id) {
			_this.store.delStakeholder({ id: id }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this.props.getTable();
				}
			});
		};

		_this.transLeft = function () {
			var fields = mobx.toJS(_this.store.stakeObj) || {};
			var _fields$phone = fields.phone,
			    phone = _fields$phone === undefined ? "" : _fields$phone,
			    _fields$position = fields.position,
			    position = _fields$position === undefined ? "" : _fields$position,
			    _fields$sex = fields.sex,
			    sex = _fields$sex === undefined ? "" : _fields$sex,
			    _fields$age = fields.age,
			    age = _fields$age === undefined ? "" : _fields$age,
			    _fields$appellation = fields.appellation,
			    appellation = _fields$appellation === undefined ? "" : _fields$appellation,
			    _fields$email = fields.email,
			    email = _fields$email === undefined ? "" : _fields$email,
			    _fields$maritalStatus = fields.maritalStatus,
			    maritalStatus = _fields$maritalStatus === undefined ? "" : _fields$maritalStatus,
			    _fields$monthlyIncome = fields.monthlyIncome,
			    monthlyIncome = _fields$monthlyIncome === undefined ? "" : _fields$monthlyIncome,
			    _fields$wechat = fields.wechat,
			    wechat = _fields$wechat === undefined ? "" : _fields$wechat;

			var array = [{ name: "手机", value: phone }, { name: "职位", value: position }, { name: "性别", value: sex }, { name: "年龄", value: age }, { name: "称谓", value: appellation }, { name: "微信号", value: wechat }, { name: "邮箱", value: email }, { name: "婚姻状况", value: maritalStatus }, { name: "月收入", value: monthlyIncome }];
			//拓展数组去空值的方法
			Array.prototype.removeEmpty = function () {
				for (var i = 0; i < this.length; i++) {
					if (this[i].value == "" || typeof this[i].value == "undefind") {
						this.splice(i, 1);
						i--;
					}
				}
				return this;
			};
			var arr2 = array.removeEmpty();
			return arr2;
		};

		_this.transRight = function () {
			var fields = mobx.toJS(_this.store.stakeObj) || {};
			var _fields$hobby = fields.hobby,
			    hobby = _fields$hobby === undefined ? "" : _fields$hobby,
			    _fields$profile = fields.profile,
			    profile = _fields$profile === undefined ? "" : _fields$profile;

			var array = [{ name: "兴趣爱好", value: hobby }, { name: "个人简介", value: profile }];
			//拓展数组去空值的方法
			Array.prototype.removeEmpty = function () {
				for (var i = 0; i < this.length; i++) {
					if (this[i].value == "" || typeof this[i].value == "undefind") {
						this.splice(i, 1);
						i--;
					}
				}
				return this;
			};
			var arr2 = array.removeEmpty();
			return arr2;
		};

		_this.store = _this.props.store;
		_this.state = {};
		return _this;
	}

	// 编辑


	// 删除


	_createClass(StakeholdeView, [{
		key: 'render',
		value: function render() {
			var fields = mobx.toJS(this.store.stakeObj) || {};

			return _react2.default.createElement(
				'div',
				null,
				_react2.default.createElement(
					'div',
					{ className: 'daily_view_head' },
					_react2.default.createElement(
						'div',
						{ className: 'title_info' },
						_react2.default.createElement(
							'div',
							{ className: 'daily_view_title' },
							fields.name,
							' - ',
							fields.copingStrategy
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'buttons_zone' },
						_react2.default.createElement(
							_antd.Button,
							{ className: 'title', type: 'link', onClick: this.editDaily },
							_react2.default.createElement('img', {
								src: './images/delivery/u1479.png', style: { width: '16px', height: '16px' } }),
							'\u7F16\u8F91'
						),
						_react2.default.createElement(
							'span',
							{ className: 'gap' },
							' '
						),
						_react2.default.createElement(
							_antd.Popconfirm,
							{ title: '\u786E\u5B9A\u5220\u9664?', onConfirm: this.delDaily.bind(this, fields.id) },
							_react2.default.createElement(
								_antd.Button,
								{ className: 'title', type: 'link' },
								_react2.default.createElement('img', { src: './images/delivery/u1480.png', style: {
										width: '16px',
										height: '16px'
									} }),
								'\u5220\u9664'
							)
						)
					)
				),
				_react2.default.createElement(
					_antd.Row,
					{ style: { marginTop: "50px" } },
					_react2.default.createElement(
						_antd.Col,
						{ span: 15 },
						_react2.default.createElement(
							'div',
							{ className: 'center-point' },
							_react2.default.createElement(
								'div',
								{ className: 'center-left' },
								this.transLeft().map(function (item, index) {
									return _react2.default.createElement(
										'div',
										{ key: "left" + index },
										_react2.default.createElement(
											'span',
											{ className: 'center-circle' },
											item.name,
											' : ',
											item.value
										)
									);
								})
							),
							fields.photo !== null && fields.photo !== "" ? _react2.default.createElement('img', { src: fields.photo, style: {
									width: '172px',
									height: '166px',
									borderRadius: "50%"
								} }) : _react2.default.createElement(
								'div',
								{ style: {
										width: '172px',
										height: '166px',
										lineHeight: "166px",
										textAlign: "center",
										background: "#4AA9F8",
										color: "#FFF",
										fontSize: "16px",
										fontWeight: "700",
										borderRadius: "50%"
									} },
								fields.name.slice(-2)
							),
							_react2.default.createElement(
								'div',
								{ className: 'center-right' },
								this.transRight().map(function (item, index) {
									return _react2.default.createElement(
										'div',
										{ key: "right" + index },
										_react2.default.createElement(
											'span',
											{ className: 'center-circle' },
											item.name,
											' : ',
											item.value
										)
									);
								})
							)
						)
					),
					_react2.default.createElement(
						_antd.Col,
						{ span: 9 },
						_react2.default.createElement(
							'table',
							{ style: { marginTop: "60px" }, className: 'staketable w' },
							_react2.default.createElement(
								'tr',
								{ style: { height: "50px", lineHeight: "50px" } },
								_react2.default.createElement(
									'td',
									{ style: { background: "#F6FCFE", fontWeight: "600", width: '150px' } },
									'\u4E3B\u8981\u5BF9\u63A5\u4EBA'
								),
								_react2.default.createElement(
									'td',
									null,
									fields.communicatorName
								)
							),
							_react2.default.createElement(
								'tr',
								null,
								_react2.default.createElement(
									'td',
									{ style: { background: "#F6FCFE", fontWeight: "600", width: '150px', height: "100px", lineHeight: "100px" } },
									'\u6C9F\u901A\u65B9\u5F0F'
								),
								_react2.default.createElement(
									'td',
									null,
									fields.communicationMode != null && fields.communicationMode.map(function (item) {
										return _react2.default.createElement(
											'p',
											{ key: item.id },
											item.rule,
											' ',
											item.frequency == null || item.frequency == "" ? null : " - " + item.frequency
										);
									})
								)
							),
							_react2.default.createElement(
								'tr',
								null,
								_react2.default.createElement(
									'td',
									{ style: { background: "#F6FCFE", fontWeight: "600", width: '150px', height: "150px", lineHeight: "150px" } },
									'\u5907\u6CE8'
								),
								_react2.default.createElement(
									'td',
									null,
									fields.remark
								)
							)
						)
					)
				)
			);
		}
	}]);

	return StakeholdeView;
}(_react2.default.Component)) || _class;

exports.default = StakeholdeView;

/***/ }),

/***/ 2068:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 确认供应商
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _OneItem = __webpack_require__(2069);

var _OneItem2 = _interopRequireDefault(_OneItem);

var _TwoItem = __webpack_require__(2075);

var _TwoItem2 = _interopRequireDefault(_TwoItem);

var _ThreeItem = __webpack_require__(2074);

var _ThreeItem2 = _interopRequireDefault(_ThreeItem);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ConfirmSupplier = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(ConfirmSupplier, _React$Component);

	function ConfirmSupplier(props) {
		_classCallCheck(this, ConfirmSupplier);

		var _this = _possibleConstructorReturn(this, (ConfirmSupplier.__proto__ || Object.getPrototypeOf(ConfirmSupplier)).call(this, props));

		_this.getConfirmSupplierState = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getConfirmSupplierState({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					_this.store.supplierState = res;
				}
			});
		};

		_this.getBuildTeamStateInfo = function (state) {
			if (state === 0) {
				return "待启动";
			}
			if (state === 1) {
				return "进行中";
			}
			if (state === 2) {
				return "已完成";
			}
		};

		_this.getBuildTeamStateIcon = function (state) {
			if (state === 0) {
				return "./images/delivery/u1055.png";
			}
			if (state === 1) {
				return "./images/delivery/u1053.png";
			}
			if (state === 2) {
				return "./images/delivery/u1232.png";
			}
		};

		_this.overCurrentStageTask = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.overConfirmSupplierStep({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.supplierState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.reStartHandover = function () {
			var currentStep = _this.state.currentStep;
			var taskDetail = _this.store.taskDetail;

			_this.store.reStartConfirmSupplier({ "taskId": taskDetail.id, "index": currentStep }).then(function (res) {
				if (res) {
					_this.store.supplierState = res;
					_this.getProjectDetail();
				}
			});
		};

		_this.getProjectDetail = function () {
			var projectId = _this.store.projectId;
			_this.store.getProjectDetail({ 'id': projectId }).then(function (res) {
				_this.store.projectDetail = res;
			});
		};

		_this.switchSteps = function (step) {
			_this.setState({ currentStep: step });
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			currentItem: 0,
			projectId: null,
			currentStep: 1,
			taskId: null
		};
		return _this;
	}

	_createClass(ConfirmSupplier, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.getConfirmSupplierState();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var projectDetail = this.store.projectDetail;

			this.setState({ projectId: mobx.toJS(projectDetail).id });
			this.getConfirmSupplierState();
			this.store.getSts();
		}
	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var currentStep = this.state.currentStep;
			var supplierState = this.store.supplierState;


			return _react2.default.createElement(
				'div',
				{ className: 'dailyModal' },
				_react2.default.createElement(
					'div',
					{ className: 'mt20 f14', style: { borderBottom: "1px dashed #e6e6e6", paddingBottom: "30px" } },
					_react2.default.createElement(
						'div',
						{ style: { display: "flex", justifyContent: 'center', alignItems: 'center' } },
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(supplierState).state1), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(supplierState).state1)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(1);
										}, type: currentStep === 1 ? 'primary' : 'link', className: currentStep === 1 ? 'active-button' : 'no-active-button' },
									'\u9009\u62E9\u4F9B\u5E94\u5546'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 1 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(supplierState).state2), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(supplierState).state2)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(2);
										}, type: currentStep === 2 ? 'primary' : 'link', className: currentStep === 2 ? 'active-button' : 'no-active-button' },
									'\u7B7E\u8BA2\u5408\u540C'
								),
								_react2.default.createElement(
									'div',
									{ className: currentStep === 2 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								)
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { display: "flex", flexDirection: "column", alignItems: 'center' } },
							_react2.default.createElement(
								'div',
								{ className: 'mb5' },
								_react2.default.createElement('img', { src: this.getBuildTeamStateIcon(mobx.toJS(supplierState).state3), style: { width: '15px', height: '15px', marginRight: "5px" } }),
								this.getBuildTeamStateInfo(mobx.toJS(supplierState).state3)
							),
							_react2.default.createElement(
								'div',
								{ style: { display: "flex", alignItems: 'center' } },
								_react2.default.createElement(
									'div',
									{ className: currentStep === 3 ? 'build-team-line-green' : 'build-team-line-gray' },
									' '
								),
								_react2.default.createElement(
									_antd.Button,
									{ onClick: function onClick() {
											_this2.switchSteps(3);
										}, type: currentStep === 3 ? 'primary' : 'link', className: currentStep === 3 ? 'active-button' : 'no-active-button' },
									'\u586B\u5199\u7528\u5DE5\u4FE1\u606F'
								),
								_react2.default.createElement(
									'div',
									{ className: 'build-team-line-white' },
									' '
								)
							)
						)
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30' },
					currentStep === 1 ? _react2.default.createElement(_OneItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 2 ? _react2.default.createElement(_TwoItem2.default, {
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						store: this.store }) : currentStep === 3 ? _react2.default.createElement(_ThreeItem2.default, {
						switchSteps: this.switchSteps,
						currentStep: currentStep,
						overCurrentStageTask: this.overCurrentStageTask,
						reStartHandover: this.reStartHandover,
						store: this.store }) : null
				)
			);
		}
	}]);

	return ConfirmSupplier;
}(_react2.default.Component)) || _class) || _class);
exports.default = ConfirmSupplier;

/***/ }),

/***/ 2069:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _dec, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _SupplierSelect = __webpack_require__(2071);

var _SupplierSelect2 = _interopRequireDefault(_SupplierSelect);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             *选择供应商
                                                                                                                                                                                                                             *dangw@bocspace.cn
                                                                                                                                                                                                                             */


var Paragraph = _antd.Typography.Paragraph;


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this), _this.state = {
			editing: true //false,
		}, _this.toggleEdit = function () {
			var editing = !_this.state.editing;
			_this.setState({ editing: editing }, function () {
				if (editing) {
					_this.input.focus();
				}
			});
		}, _this.save = function (e) {
			var _this$props = _this.props,
			    record = _this$props.record,
			    handleSave = _this$props.handleSave;

			_this.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				if (values.hasOwnProperty('otherReason')) {
					handleSave(_extends({}, record, { "otherReason": values["otherReason"] }));
				} else {
					handleSave(_extends({}, record, values));
				}
			});
		}, _this.onChange = function (value) {
			var _this$props2 = _this.props,
			    record = _this$props2.record,
			    handleSave = _this$props2.handleSave;

			_this.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('selectReason')) {
					values["selectReason"] = value;
					handleSave(_extends({}, record, { "selectReason": value }));
				}
			});
		}, _this.onSupplierChange = function (param) {
			var _this$props3 = _this.props,
			    record = _this$props3.record,
			    handleSave = _this$props3.handleSave;

			_this.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('name')) {
					values["name"] = param.name;
					values["supplierId"] = param.id;
					values["supplier"] = Object.assign({}, param);
				}
				handleSave(_extends({}, record, values));
			});
		}, _this.renderCell = function (form) {
			_this.form = form;
			var _this$props4 = _this.props,
			    children = _this$props4.children,
			    dataIndex = _this$props4.dataIndex,
			    record = _this$props4.record,
			    title = _this$props4.title,
			    dataSource = _this$props4.dataSource;
			var editing = _this.state.editing;


			if (dataIndex == "name") {
				// 名称
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ ref: function ref(node) {
								return _this.input = node;
							}, style: { width: "180px" } },
						_react2.default.createElement(_SupplierSelect2.default, {
							value: record["name"],
							onSupplierChange: _this.onSupplierChange
							//onBlur={this.toggleEdit}
							, dataSource: dataSource
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this.toggleEdit
					},
					children
				);
			} else if (dataIndex == "selectReason") {
				// 选择原因
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex] == null || record[dataIndex] == "" ? [] : record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{ style: { width: 100 },
							mode: 'multiple',
							ref: function ref(node) {
								return _this.input = node;
							},
							onChange: _this.onChange
							// onBlur={this.toggleEdit}
						},
						_react2.default.createElement(
							Option,
							{ value: '\u4EF7\u683C\u6700\u4F4E' },
							'\u4EF7\u683C\u6700\u4F4E'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u4EA7\u80FD\u4FDD\u8BC1' },
							'\u4EA7\u80FD\u4FDD\u8BC1'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u8D28\u91CF\u6700\u597D' },
							'\u8D28\u91CF\u6700\u597D'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u914D\u5408\u5EA6\u9AD8' },
							'\u914D\u5408\u5EA6\u9AD8'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u8DDD\u79BB\u6700\u8FD1' },
							'\u8DDD\u79BB\u6700\u8FD1'
						)
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this.toggleEdit
					},
					record[dataIndex] == null || record[dataIndex] == "" ? null : record[dataIndex].join("、")
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
							return _this.input = node;
						}, onPressEnter: _this.save, onBlur: _this.save }))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this.toggleEdit
					},
					children
				);
			}
		}, _temp), _possibleConstructorReturn(_this, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    dataSource = _props.dataSource,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children', 'dataSource']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

var OneItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = (0, _reactRouterDom.withRouter)(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(OneItem, _React$Component2);

	function OneItem(props) {
		_classCallCheck(this, OneItem);

		var _this2 = _possibleConstructorReturn(this, (OneItem.__proto__ || Object.getPrototypeOf(OneItem)).call(this, props));

		_this2.getConfirmSupplierOneItemList = function () {
			var taskDetail = _this2.store.taskDetail;

			_this2.store.getConfirmSupplierOneItemList({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				_this2.setState({
					dataSource: Array.isArray(res) ? res.map(function (item, index) {
						return Object.assign(item, { key: index + 1 });
					}) : [],
					count: Array.isArray(res) ? res.length : 0
				});
			});
		};

		_this2.handleAdd = function () {
			var _this2$state = _this2.state,
			    count = _this2$state.count,
			    dataSource = _this2$state.dataSource;

			// 校验

			if (count > 0) {
				var param = dataSource[count - 1];
				if (param.name == null || param.name == "") {
					_antd.message.warn("供应商名称是必填项");
					return false;
				}
				if (param.selectReason == null || Array.isArray(param.selectReason) && param.selectReason.length == 0) {
					_antd.message.warn("选择原因是必填项");
					return false;
				}
			}

			var taskDetail = _this2.store.taskDetail;

			var newData = {
				id: "",
				taskId: mobx.toJS(taskDetail).id,
				name: "",
				supplierId: "",
				selectReason: [],
				otherReason: "",
				supplier: {
					name: "",
					contacts: "",
					phone: "",
					type: "",
					cases: ""
				}
			};

			// 单行保存
			_this2.store.saveConfirmSupplierOneItem({ csoi: newData }).then(function (res) {
				if (res && res.id) {
					_this2.setState({
						dataSource: [].concat(_toConsumableArray(dataSource), [Object.assign(res, { key: count + 1 })]),
						count: count + 1
					});
				}
			});
		};

		_this2.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this2.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this2.setState({ dataSource: newData });

			var param = JSON.parse(JSON.stringify(row));
			delete param.key;

			// 单行保存
			_this2.store.saveConfirmSupplierOneItem({ csoi: param });
		};

		_this2.handleDelete = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this2.state.dataSource));
			var newData = dataSource.filter(function (item) {
				return item.key !== record.key;
			}).map(function (vitem, vindex) {
				return Object.assign(vitem, { key: vindex + 1 });
			});
			_this2.setState({
				dataSource: newData, record: record,
				count: newData.length
			});
			if (record.id != "" && record.id != null) {
				_this2.store.delConfirmSupplierOneItem({ id: record.id }).then(function (res) {
					if (res) {
						_antd.message.success("删除成功");
					}
				});
			}
		};

		_this2.overCurrentStage = function () {
			var _this2$state2 = _this2.state,
			    count = _this2$state2.count,
			    dataSource = _this2$state2.dataSource;

			if (count == 0) {
				_antd.message.warn("请完善必填信息");
				return false;
			}

			// 校验
			if (count > 0) {
				var param = dataSource[count - 1];
				if (param.name == null || param.name == "") {
					_antd.message.warn("供应商名称是必填项");
					return false;
				}
				if (param.selectReason == null || Array.isArray(param.selectReason) && param.selectReason.length == 0) {
					_antd.message.warn("选择原因是必填项");
					return false;
				}
			}
			_this2.props.overCurrentStageTask();
		};

		_this2.doneAndNext = function () {
			var _this2$state3 = _this2.state,
			    count = _this2$state3.count,
			    dataSource = _this2$state3.dataSource;

			if (count == 0) {
				_antd.message.warn("请完善必填信息");
				return false;
			}

			// 校验
			if (count > 0) {
				var param = dataSource[count - 1];
				if (param.name == null || param.name == "") {
					_antd.message.warn("供应商名称是必填项");
					return false;
				}
				if (param.selectReason == null || Array.isArray(param.selectReason) && param.selectReason.length == 0) {
					_antd.message.warn("选择原因是必填项");
					return false;
				}
			}
			var currentStep = _this2.props.currentStep;

			_this2.props.overCurrentStageTask();
			_this2.props.switchSteps(currentStep + 1);
		};

		_this2.store = _this2.props.DeliveryStore;
		_this2.state = {
			dataSource: [],
			count: 0,
			projectId: null
		};
		return _this2;
	}

	_createClass(OneItem, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {
			var projectDetail = mobx.toJS(nextProps.DeliveryStore.projectDetail);
			if (projectDetail.id !== this.state.projectId) {
				this.setState({ projectId: projectDetail.id });
				this.getConfirmSupplierOneItemList();
			}
		}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getConfirmSupplierOneItemList();
		}

		// 获取列表


		// 新增


		// 保存


		// 删除


		// 完成该阶段


		// 完成并进入下一步

	}, {
		key: 'render',
		value: function render() {
			var _this3 = this;

			var supplierState = this.store.supplierState;
			var dataSource = this.state.dataSource;
			var _props2 = this.props,
			    currentStep = _props2.currentStep,
			    switchSteps = _props2.switchSteps;

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columns = [{
				title: '操作',
				dataIndex: 'opater',
				width: '80px',
				align: 'center',
				className: supplierState.state1 == 2 ? "hidden" : "",
				render: function render(text, record) {
					return _react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return _this3.handleDelete(record);
							} },
						record.key == "1" ? null : _react2.default.createElement(_antd.Icon, { type: 'minus-circle', style: { fontSize: "18px", color: "#E9796B", cursor: "pointer" } })
					);
				}
			}, {
				title: '序号',
				dataIndex: 'key',
				width: '80px',
				align: 'center'
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u4F9B\u5E94\u5546\u540D\u79F0'
				),
				dataIndex: 'name',
				width: '200px',
				align: 'center',
				editable: supplierState.state1 === 2 ? false : true
			}, {
				title: '供应商类型',
				dataIndex: 'supplier.type',
				width: '150',
				align: 'center'
			}, {
				title: '联系人',
				dataIndex: 'supplier.contacts',
				width: '150',
				align: 'center'
			}, {
				title: '联系方式',
				dataIndex: 'supplier.phone',
				width: 150,
				align: 'center'
			}, {
				title: '合作案例',
				dataIndex: 'supplier.cases',
				width: "300px",
				align: 'center',
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						{
							style: {
								width: '300px',
								lineHeight: '30px',
								wordBreak: 'break-all',
								whiteSpace: 'pre-wrap',
								textAlign: 'left'
							} },
						_react2.default.createElement(
							_antd.Popover,
							{ content: _react2.default.createElement(
									'div',
									{ style: {
											width: '320px',
											lineHeight: '30px',
											wordBreak: 'break-all',
											whiteSpace: 'pre-wrap',
											textAlign: 'left'
										} },
									text
								), placement: 'left' },
							_react2.default.createElement(
								Paragraph,
								{ ellipsis: { rows: 3 } },
								text
							)
						)
					);
				}
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u9009\u62E9\u539F\u56E0'
				),
				dataIndex: 'selectReason',
				width: 100,
				align: 'center',
				editable: supplierState.state1 === 2 ? false : true,
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						null,
						text == null || text == "" ? "" : text.join("、")
					);
				}
			}, {
				title: '特殊原因',
				dataIndex: 'otherReason',
				width: 100,
				align: 'center',
				editable: supplierState.state1 === 2 ? false : true
			}];
			var column = columns.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this3.handleSave,
							dataSource: dataSource
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				{ style: {
						overflowX: "hidden"
					} },
				_react2.default.createElement(
					_antd.Button,
					{
						className: 'mb10',
						ghost: true,
						type: 'primary',
						icon: 'poweroff',
						onClick: this.props.reStartHandover,
						style: supplierState.state1 === 2 ? { display: '' } : { display: 'none' }
					},
					'\u91CD\u65B0\u542F\u52A8'
				),
				_react2.default.createElement(_antd.Table, {
					components: components,
					className: 'digital_table',
					rowClassName: function rowClassName() {
						return 'editable-row';
					},
					dataSource: dataSource,
					columns: column,
					pagination: false,
					bordered: true
				}),
				_react2.default.createElement(_antd.Icon, { onClick: this.handleAdd,
					className: supplierState.state1 == 2 ? "hidden" : "mt20",
					type: 'plus-circle', style: {
						position: "relative",
						left: "28px",
						fontSize: "18px",
						color: "#609AF1",
						cursor: "pointer"
					} }),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: supplierState.state1 !== 2 ? {
							display: 'flex',
							justifyContent: 'center'
						} : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: this.overCurrentStage,
							ghost: true,
							type: 'primary'
						},
						' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
					),
					_react2.default.createElement(
						_antd.Button,
						{
							onClick: this.doneAndNext, style: { marginLeft: '20px' }, type: 'primary' },
						' \u5B8C\u6210\u5E76\u8FDB\u5165\u4E0B\u4E00\u6B65'
					)
				),
				_react2.default.createElement(
					'div',
					{ className: 'mt30 mb30', style: supplierState.state1 === 2 ? {
							display: 'flex',
							justifyContent: 'center'
						} : { display: 'none' } },
					_react2.default.createElement(
						_antd.Button,
						{ onClick: function onClick() {
								switchSteps(currentStep + 1);
							}, style: { marginLeft: '20px' }, type: 'primary' },
						'\u4E0B\u4E00\u6B65'
					)
				)
			);
		}
	}]);

	return OneItem;
}(_react2.default.Component)) || _class2) || _class2) || _class2);
exports.default = OneItem;

/***/ }),

/***/ 2070:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _dec, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

var _Document = __webpack_require__(1618);

var _Document2 = _interopRequireDefault(_Document);

var _EditableTableInventory = __webpack_require__(1882);

var _EditableTableInventory2 = _interopRequireDefault(_EditableTableInventory);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             * 供应商编辑组件
                                                                                                                                                                                                                             * dangw@glodon.com
                                                                                                                                                                                                                             * */


var Option = _antd.Select.Option;

var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (type, e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				handleSave(_extends({}, record, _defineProperty({}, type, values[type])));
			});
		}, _this2.onChange = function (type, value) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			handleSave(_extends({}, record, _defineProperty({}, type, value)));
		}, _this2.handDate = function (type, date, dateString) {
			var val = dateString == null || dateString == "" ? 0 : (0, _moment2.default)(dateString, 'YYYY-MM-DD').valueOf();
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			handleSave(_extends({}, record, _defineProperty({}, type, val)));
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props4 = _this2.props,
			    children = _this2$props4.children,
			    dataIndex = _this2$props4.dataIndex,
			    record = _this2$props4.record,
			    title = _this2$props4.title;
			var editing = _this2.state.editing;


			if (dataIndex == "nodeName") {
				// 名称
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{ style: { width: "200px" },
							ref: function ref(node) {
								return _this2.input = node;
							},
							onChange: _this2.onChange.bind(_this2, dataIndex)
						},
						_react2.default.createElement(
							Option,
							{ value: '\u9884\u4ED8\u6B3E-\u6309\u5408\u540C\u989D' },
							'\u9884\u4ED8\u6B3E-\u6309\u5408\u540C\u989D'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u5408\u540C\u7B7E\u8BA2\u540E-\u6309\u5408\u540C\u989D' },
							'\u5408\u540C\u7B7E\u8BA2\u540E-\u6309\u5408\u540C\u989D'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u6750\u6599\u8FDB\u573A-\u6309\u5408\u540C\u989D' },
							'\u6750\u6599\u8FDB\u573A-\u6309\u5408\u540C\u989D'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u7AE3\u5DE5\u9A8C\u6536-\u6309\u7ED3\u7B97\u91D1\u989D' },
							'\u7AE3\u5DE5\u9A8C\u6536-\u6309\u7ED3\u7B97\u91D1\u989D'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u8D28\u4FDD\u671F-\u6309\u7ED3\u7B97\u91D1\u989D' },
							'\u8D28\u4FDD\u671F-\u6309\u7ED3\u7B97\u91D1\u989D'
						)
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" }
						//onClick={this.toggleEdit}
					},
					children
				);
			} /*else if (dataIndex == "dateTime") {   // 时间
     return editing ? (
     record["isSelected"]==1?
     	<Form.Item style={{margin: 0}}>
     	{form.getFieldDecorator(dataIndex, {
     		rules: [
     			{
     				required: false,
     				message: `${title} is required.`,
     			},
     		],
     		initialValue: record[dataIndex]== null || record[dataIndex] == 0 ? "":moment(moment(record[dataIndex]).format('YYYY-MM-DD'), "YYYY-MM-DD")
     	})(<DatePicker
     			value={record[dataIndex]== null || record[dataIndex] == 0 ? "":moment(moment(record[dataIndex]).format('YYYY-MM-DD'), "YYYY-MM-DD")}
     			allowClear={false}
     			style={{width: "150px"}}
     			format="YYYY-MM-DD"
     			placeholder="请选择"
     			onChange={this.handDate.bind(this, "dateTime")}
     		/>)}
     </Form.Item>:null
     ) : (
     <div
     	className="editable-cell-value-wrap"
     	style={{paddingRight: 24, minHeight: "34px"}}
     	//onClick={this.toggleEdit}
     >
     	{record[dataIndex] == null || record[dataIndex] == "" ? null : record[dataIndex].join("、")}
     </div>
     );
     }*/else if (dataIndex == "payRate") {
					// 比例
					return editing ? record["isSelected"] == 1 ? _react2.default.createElement(
						_antd.Form.Item,
						{ style: { margin: 0 } },
						form.getFieldDecorator(dataIndex, {
							rules: [{
								required: false,
								message: title + ' is required.'
							}],
							initialValue: record[dataIndex] == null || record[dataIndex] == "" ? [] : record[dataIndex]
						})(_react2.default.createElement(_antd.InputNumber, {
							style: { width: "200px" },
							onBlur: _this2.save.bind(_this2, "payRate")
							//onChange={this.handleChange2.bind(this, "civilizedConstructionValue",makePlotCost.civilizedConstructionMaxValue)}
							, placeholder: '\u8BF7\u8F93\u5165' }))
					) : null : _react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: { paddingRight: 24, minHeight: "34px" }
							//onClick={this.toggleEdit}
						},
						record[dataIndex] == null || record[dataIndex] == "" ? null : record[dataIndex].join("、")
					);
				} else {
					return editing ? record["isSelected"] == 1 ? _react2.default.createElement(
						_antd.Form.Item,
						{ style: { margin: 0 } },
						form.getFieldDecorator(dataIndex, {
							rules: [{
								required: false,
								message: title + ' is required.'
							}],
							initialValue: record[dataIndex]
						})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', style: { width: "150px" }, ref: function ref(node) {
								return _this2.input = node;
							}, onPressEnter: _this2.save.bind(_this2, dataIndex), onBlur: _this2.save.bind(_this2, dataIndex) }))
					) : null : _react2.default.createElement(
						'div',
						{
							className: 'editable-cell-value-wrap',
							style: { paddingRight: 24, minHeight: "34px" }
							//onClick={this.toggleEdit}
						},
						children
					);
				}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	// 日期


	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

var Index = (_dec = _antd.Form.create(), _dec(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(Index, _React$Component2);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this3 = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this3.init = function () {
			var supplierTwoItem = _this3.store.supplierTwoItem;

			var obj = JSON.parse(JSON.stringify(supplierTwoItem));
			var _obj$projectAddress = obj.projectAddress,
			    projectAddress = _obj$projectAddress === undefined ? "" : _obj$projectAddress,
			    _obj$partySecondManag = obj.partySecondManager,
			    partySecondManager = _obj$partySecondManag === undefined ? "" : _obj$partySecondManag,
			    _obj$partySecondPhone = obj.partySecondPhone,
			    partySecondPhone = _obj$partySecondPhone === undefined ? "" : _obj$partySecondPhone,
			    _obj$partySecondIdCar = obj.partySecondIdCard,
			    partySecondIdCard = _obj$partySecondIdCar === undefined ? "" : _obj$partySecondIdCar,
			    _obj$partySecondSafer = obj.partySecondSafer,
			    partySecondSafer = _obj$partySecondSafer === undefined ? "" : _obj$partySecondSafer,
			    _obj$contractMoney = obj.contractMoney,
			    contractMoney = _obj$contractMoney === undefined ? "" : _obj$contractMoney,
			    workBeginTime = obj.workBeginTime,
			    wordEndTime = obj.wordEndTime,
			    contractAwardTime = obj.contractAwardTime,
			    _obj$partySecondBankN = obj.partySecondBankName,
			    partySecondBankName = _obj$partySecondBankN === undefined ? "" : _obj$partySecondBankN,
			    _obj$partySecondBankN2 = obj.partySecondBankNumber,
			    partySecondBankNumber = _obj$partySecondBankN2 === undefined ? "" : _obj$partySecondBankN2,
			    _obj$partySecondBank = obj.partySecondBank,
			    partySecondBank = _obj$partySecondBank === undefined ? "" : _obj$partySecondBank,
			    _obj$partyFirstCompan = obj.partyFirstCompanyId,
			    partyFirstCompanyId = _obj$partyFirstCompan === undefined ? "" : _obj$partyFirstCompan,
			    code = obj.code,
			    partySecond = obj.partySecond,
			    projectName = obj.projectName,
			    partyFirstManager = obj.partyFirstManager,
			    partyFirstPhone = obj.partyFirstPhone,
			    contractMoneyBig = obj.contractMoneyBig,
			    contractDays = obj.contractDays,
			    supplierPayNode = obj.supplierPayNode;

			_this3.props.form.setFieldsValue({
				projectAddress: projectAddress,
				partySecondManager: partySecondManager,
				partySecondPhone: partySecondPhone,
				partySecondIdCard: partySecondIdCard,
				partySecondSafer: partySecondSafer,
				contractMoney: contractMoney == null || contractMoney == "" ? "" : contractMoney,
				workBeginTime: workBeginTime == null || workBeginTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(workBeginTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
				wordEndTime: wordEndTime == null || wordEndTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(wordEndTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
				contractAwardTime: contractAwardTime == null || contractAwardTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(contractAwardTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
				partySecondBankName: partySecondBankName,
				partySecondBankNumber: partySecondBankNumber,
				partySecondBank: partySecondBank,
				partyFirstCompanyId: partyFirstCompanyId,
				code: code, partySecond: partySecond, projectName: projectName, partyFirstManager: partyFirstManager, partyFirstPhone: partyFirstPhone, contractMoneyBig: contractMoneyBig, contractDays: contractDays
			});
			_this3.setState({
				supplierPayNode: Object.assign([], supplierPayNode),
				selectedRowKeys: supplierPayNode.filter(function (item) {
					return item.isSelected == 1;
				}).map(function (v) {
					return v.id;
				})
			}, function () {

				//console.log(supplierPayNode, this.state.supplierPayNode, 'supplierPayNode')

			});
		};

		_this3.handleSave = function () {
			_this3.props.form.validateFields(function (err, values) {
				if (err) {
					_antd.message.warn("请完善信息后再提交");
					return false;
				} else {
					var _this3$state = _this3.state,
					    dataSource = _this3$state.dataSource,
					    supplierPayNode = _this3$state.supplierPayNode;
					// 校验付款节点

					var supplier = JSON.parse(JSON.stringify(supplierPayNode)).filter(function (item) {
						return item.isSelected == 1;
					});
					if (supplier.length > 0 && supplier.some(function (v) {
						return v.dateTime == "" || v.dateTime == null || v.payRate == null || v.payRate == "";
					})) {
						_antd.message.warn("请完善付款节点中的必填信息");
						return false;
					}
					// 校验附件
					var dsCheck = dataSource.filter(function (item) {
						return item.isMust === 1 && item.enclosureItems.length === 0;
					});
					if (dsCheck.length > 0) {
						_antd.message.warn("请检查附件列表中必需上传项是否已经上传附件");
						return false;
					}

					var _values$projectAddres = values.projectAddress,
					    projectAddress = _values$projectAddres === undefined ? "" : _values$projectAddres,
					    _values$partySecondMa = values.partySecondManager,
					    partySecondManager = _values$partySecondMa === undefined ? "" : _values$partySecondMa,
					    _values$partySecondPh = values.partySecondPhone,
					    partySecondPhone = _values$partySecondPh === undefined ? "" : _values$partySecondPh,
					    _values$partySecondId = values.partySecondIdCard,
					    partySecondIdCard = _values$partySecondId === undefined ? "" : _values$partySecondId,
					    _values$partySecondSa = values.partySecondSafer,
					    partySecondSafer = _values$partySecondSa === undefined ? "" : _values$partySecondSa,
					    _values$contractMoney = values.contractMoney,
					    contractMoney = _values$contractMoney === undefined ? "" : _values$contractMoney,
					    workBeginTime = values.workBeginTime,
					    wordEndTime = values.wordEndTime,
					    contractAwardTime = values.contractAwardTime,
					    _values$partySecondBa = values.partySecondBankName,
					    partySecondBankName = _values$partySecondBa === undefined ? "" : _values$partySecondBa,
					    _values$partySecondBa2 = values.partySecondBankNumber,
					    partySecondBankNumber = _values$partySecondBa2 === undefined ? "" : _values$partySecondBa2,
					    _values$partySecondBa3 = values.partySecondBank,
					    partySecondBank = _values$partySecondBa3 === undefined ? "" : _values$partySecondBa3,
					    _values$partyFirstCom = values.partyFirstCompanyId,
					    partyFirstCompanyId = _values$partyFirstCom === undefined ? "" : _values$partyFirstCom;
					var supplierTwoItem = _this3.store.supplierTwoItem;

					var obj = JSON.parse(JSON.stringify(supplierTwoItem));
					delete obj.selected;
					var params = Object.assign(obj, {
						projectAddress: projectAddress,
						partySecondManager: partySecondManager,
						partySecondPhone: partySecondPhone,
						partySecondIdCard: partySecondIdCard,
						partySecondSafer: partySecondSafer,
						contractMoney: contractMoney,
						workBeginTime: workBeginTime == null || workBeginTime == "" ? 0 : (0, _moment2.default)(workBeginTime, 'YYYY-MM-DD').valueOf(),
						wordEndTime: wordEndTime == null || wordEndTime == "" ? 0 : (0, _moment2.default)(wordEndTime, 'YYYY-MM-DD').valueOf(),
						contractAwardTime: contractAwardTime == null || contractAwardTime == "" ? 0 : (0, _moment2.default)(contractAwardTime, 'YYYY-MM-DD').valueOf(),
						partySecondBankName: partySecondBankName,
						partySecondBankNumber: partySecondBankNumber,
						partySecondBank: partySecondBank,
						partyFirstCompanyId: partyFirstCompanyId,
						supplierPayNode: JSON.parse(JSON.stringify(_this3.state.supplierPayNode)),
						isSave: 2

					});
					//console.log(params, '保存')
					// 保存
					_this3.store.saveConfirmSupplierTwoItem({ csti: params }).then(function (res) {
						if (res) {
							_antd.message.success("保存成功");
							_this3.store.supplierTwoItem = Object.assign({}, res);

							// 更改列表的数据
							var param = res;
							var stakeholderList = JSON.parse(JSON.stringify(_this3.store.supplierTwoItemList));
							if (param.isMain == 1) {
								// 主合同
								var dataArray = stakeholderList.map(function (item) {
									return Object.assign(item, { selected: false });
								});
								var dindex = dataArray.findIndex(function (item) {
									return item.id == param.id;
								});
								dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
								_this3.store.supplierTwoItemList = Object.assign([], dataArray);
							}

							// 如果全部完成时，更改该阶段的状态
							var isFlag = stakeholderList.some(function (computer) {
								return computer.isSave != 2;
							});
							if (!isFlag) {
								_this3.props.nextStep();
							}

							// 点击完成时是否生成合同
							var isDocument = res.document == null || _typeof(res.document) == "object" && Object.keys(res.document).length == 0 ? false : true; // 是否有采购合同
							if (true) {
								//此处条件先改成true
								_this3.buildWord(function () {
									_this3.store.suState = true;
								});
							} else {
								// 切换状态
								_this3.store.suState = true;
							}
						}
					});
				}
			});
		};

		_this3.buildWord = function (callback) {
			_this3.props.form.validateFields(function (err, values) {
				if (err) {
					_antd.message.warn("请完善信息后再提交");
					return false;
				} else {
					var _values$projectAddres2 = values.projectAddress,
					    projectAddress = _values$projectAddres2 === undefined ? "" : _values$projectAddres2,
					    _values$partySecondMa2 = values.partySecondManager,
					    partySecondManager = _values$partySecondMa2 === undefined ? "" : _values$partySecondMa2,
					    _values$partySecondPh2 = values.partySecondPhone,
					    partySecondPhone = _values$partySecondPh2 === undefined ? "" : _values$partySecondPh2,
					    _values$partySecondId2 = values.partySecondIdCard,
					    partySecondIdCard = _values$partySecondId2 === undefined ? "" : _values$partySecondId2,
					    _values$partySecondSa2 = values.partySecondSafer,
					    partySecondSafer = _values$partySecondSa2 === undefined ? "" : _values$partySecondSa2,
					    _values$contractMoney2 = values.contractMoney,
					    contractMoney = _values$contractMoney2 === undefined ? "" : _values$contractMoney2,
					    workBeginTime = values.workBeginTime,
					    wordEndTime = values.wordEndTime,
					    contractAwardTime = values.contractAwardTime,
					    _values$partySecondBa4 = values.partySecondBankName,
					    partySecondBankName = _values$partySecondBa4 === undefined ? "" : _values$partySecondBa4,
					    _values$partySecondBa5 = values.partySecondBankNumber,
					    partySecondBankNumber = _values$partySecondBa5 === undefined ? "" : _values$partySecondBa5,
					    _values$partySecondBa6 = values.partySecondBank,
					    partySecondBank = _values$partySecondBa6 === undefined ? "" : _values$partySecondBa6,
					    _values$partyFirstCom2 = values.partyFirstCompanyId,
					    partyFirstCompanyId = _values$partyFirstCom2 === undefined ? "" : _values$partyFirstCom2;
					var supplierTwoItem = _this3.store.supplierTwoItem;

					var obj = JSON.parse(JSON.stringify(supplierTwoItem));
					var supplierContractList = obj.supplierContractList == null ? [] : obj.supplierContractList;
					if (supplierContractList.length > 0) {
						supplierContractList.map(function (v) {
							delete v.key;
							delete v.rate;
							return v;
						});
					}
					delete obj.selected;
					var params = Object.assign(obj, {
						projectAddress: projectAddress,
						partySecondManager: partySecondManager,
						partySecondPhone: partySecondPhone,
						partySecondIdCard: partySecondIdCard,
						partySecondSafer: partySecondSafer,
						contractMoney: contractMoney,
						workBeginTime: workBeginTime == null || workBeginTime == "" ? 0 : (0, _moment2.default)(workBeginTime, 'YYYY-MM-DD').valueOf(),
						wordEndTime: wordEndTime == null || wordEndTime == "" ? 0 : (0, _moment2.default)(wordEndTime, 'YYYY-MM-DD').valueOf(),
						contractAwardTime: contractAwardTime == null || contractAwardTime == "" ? 0 : (0, _moment2.default)(contractAwardTime, 'YYYY-MM-DD').valueOf(),
						partySecondBankName: partySecondBankName,
						partySecondBankNumber: partySecondBankNumber,
						partySecondBank: partySecondBank,
						partyFirstCompanyId: partyFirstCompanyId,
						supplierPayNode: JSON.parse(JSON.stringify(_this3.state.supplierPayNode)),
						supplierContractList: supplierContractList
					});

					_this3.store.buildContractDoc({ csti: params }).then(function (res) {
						_this3.setState({
							downloading: true
						});
						_this3.getReportUrl({ "id": res }, callback);
					});
				}
			});
		};

		_this3.buildWord2 = function (callback) {
			var supplierTwoItem = _this3.store.supplierTwoItem;

			var obj = JSON.parse(JSON.stringify(supplierTwoItem));
			var _obj$projectAddress2 = obj.projectAddress,
			    projectAddress = _obj$projectAddress2 === undefined ? "" : _obj$projectAddress2,
			    _obj$partySecondManag2 = obj.partySecondManager,
			    partySecondManager = _obj$partySecondManag2 === undefined ? "" : _obj$partySecondManag2,
			    _obj$partySecondPhone2 = obj.partySecondPhone,
			    partySecondPhone = _obj$partySecondPhone2 === undefined ? "" : _obj$partySecondPhone2,
			    _obj$partySecondIdCar2 = obj.partySecondIdCard,
			    partySecondIdCard = _obj$partySecondIdCar2 === undefined ? "" : _obj$partySecondIdCar2,
			    _obj$partySecondSafer2 = obj.partySecondSafer,
			    partySecondSafer = _obj$partySecondSafer2 === undefined ? "" : _obj$partySecondSafer2,
			    _obj$contractMoney2 = obj.contractMoney,
			    contractMoney = _obj$contractMoney2 === undefined ? "" : _obj$contractMoney2,
			    workBeginTime = obj.workBeginTime,
			    wordEndTime = obj.wordEndTime,
			    contractAwardTime = obj.contractAwardTime,
			    _obj$partySecondBankN3 = obj.partySecondBankName,
			    partySecondBankName = _obj$partySecondBankN3 === undefined ? "" : _obj$partySecondBankN3,
			    _obj$partySecondBankN4 = obj.partySecondBankNumber,
			    partySecondBankNumber = _obj$partySecondBankN4 === undefined ? "" : _obj$partySecondBankN4,
			    _obj$partySecondBank2 = obj.partySecondBank,
			    partySecondBank = _obj$partySecondBank2 === undefined ? "" : _obj$partySecondBank2,
			    _obj$partyFirstCompan2 = obj.partyFirstCompanyId,
			    partyFirstCompanyId = _obj$partyFirstCompan2 === undefined ? "" : _obj$partyFirstCompan2;

			var supplierContractList = obj.supplierContractList == null ? [] : obj.supplierContractList;
			if (supplierContractList.length > 0) {
				supplierContractList.map(function (v) {
					delete v.key;
					delete v.rate;
					return v;
				});
			}
			delete obj.selected;
			var params = Object.assign(obj, {
				projectAddress: projectAddress,
				partySecondManager: partySecondManager,
				partySecondPhone: partySecondPhone,
				partySecondIdCard: partySecondIdCard,
				partySecondSafer: partySecondSafer,
				contractMoney: contractMoney,
				workBeginTime: workBeginTime == null || workBeginTime == "" ? 0 : (0, _moment2.default)(workBeginTime, 'YYYY-MM-DD').valueOf(),
				wordEndTime: wordEndTime == null || wordEndTime == "" ? 0 : (0, _moment2.default)(wordEndTime, 'YYYY-MM-DD').valueOf(),
				contractAwardTime: contractAwardTime == null || contractAwardTime == "" ? 0 : (0, _moment2.default)(contractAwardTime, 'YYYY-MM-DD').valueOf(),
				partySecondBankName: partySecondBankName,
				partySecondBankNumber: partySecondBankNumber,
				partySecondBank: partySecondBank,
				partyFirstCompanyId: partyFirstCompanyId,
				supplierPayNode: JSON.parse(JSON.stringify(_this3.state.supplierPayNode)),
				supplierContractList: supplierContractList
			});

			_this3.store.buildContractDoc({ csti: params }).then(function (res) {
				_this3.setState({
					downloading: true
				});
				_this3.getReportUrl({ "id": res }, callback);
			});
		};

		_this3.getReportUrl = function (id, callback) {
			var _this = _this3;
			_this.timer22 = setInterval(function () {
				_this.store.getDownloadUrl(id).then(function (url) {
					if (url !== null && url !== "") {
						_this.setState({ downloading: false });
						// 重新保存任务
						_this.reSave();
						if (typeof callback == "function") {
							callback();
						}
						clearInterval(_this.timer22);
					} else {}
				});
			}, 3000);
		};

		_this3.saveContents = function () {
			_this3.getEnclosureList();
		};

		_this3.saveItem = function (row) {
			var dataSource = _this3.state.dataSource;
			var taskDetail = _this3.store.taskDetail;

			var em = { taskId: taskDetail.id, name: '', indexs: 1, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
			if (row.id !== undefined && row.id[0] !== "!") {
				em['id'] = row.id;
				em['orders'] = row.orders;
				em['enclosureItems'] = row.enclosureItems;
				em['templates'] = row.templates;
				em['cases'] = row.cases;
				em['name'] = row.name;
			}
			var parmas = { "em": em, taskId: taskDetail.id, indexs: 1 };
			_this3.store.saveEnclosureMain(parmas).then(function (res) {
				_this3.getEnclosureList();
			});
		};

		_this3.getEnclosureList = function () {
			var _this3$store = _this3.store,
			    taskDetail = _this3$store.taskDetail,
			    supplierTwoItem = _this3$store.supplierTwoItem;

			if (mobx.toJS(supplierTwoItem).id == undefined || mobx.toJS(supplierTwoItem).id == null || mobx.toJS(supplierTwoItem).id == "") {
				return false;
			}
			_this3.store.getEnclosureListByItemId({ "taskId": mobx.toJS(taskDetail).id, "indexs": 0, itemId: mobx.toJS(supplierTwoItem).id }).then(function (res) {
				_this3.store.enclosureList = Object.assign([], res);
				_this3.setState({
					dataSource: Object.assign([], res),
					enclosureList: Object.assign([], res) });
			});
		};

		_this3.reSave = function () {
			var _this3$props$form$get = _this3.props.form.getFieldsValue(),
			    _this3$props$form$get2 = _this3$props$form$get.projectAddress,
			    projectAddress = _this3$props$form$get2 === undefined ? "" : _this3$props$form$get2,
			    _this3$props$form$get3 = _this3$props$form$get.partySecondManager,
			    partySecondManager = _this3$props$form$get3 === undefined ? "" : _this3$props$form$get3,
			    _this3$props$form$get4 = _this3$props$form$get.partySecondPhone,
			    partySecondPhone = _this3$props$form$get4 === undefined ? "" : _this3$props$form$get4,
			    _this3$props$form$get5 = _this3$props$form$get.partySecondIdCard,
			    partySecondIdCard = _this3$props$form$get5 === undefined ? "" : _this3$props$form$get5,
			    _this3$props$form$get6 = _this3$props$form$get.partySecondSafer,
			    partySecondSafer = _this3$props$form$get6 === undefined ? "" : _this3$props$form$get6,
			    _this3$props$form$get7 = _this3$props$form$get.contractMoney,
			    contractMoney = _this3$props$form$get7 === undefined ? "" : _this3$props$form$get7,
			    workBeginTime = _this3$props$form$get.workBeginTime,
			    wordEndTime = _this3$props$form$get.wordEndTime,
			    contractAwardTime = _this3$props$form$get.contractAwardTime,
			    _this3$props$form$get8 = _this3$props$form$get.partySecondBankName,
			    partySecondBankName = _this3$props$form$get8 === undefined ? "" : _this3$props$form$get8,
			    _this3$props$form$get9 = _this3$props$form$get.partySecondBankNumber,
			    partySecondBankNumber = _this3$props$form$get9 === undefined ? "" : _this3$props$form$get9,
			    _this3$props$form$get10 = _this3$props$form$get.partySecondBank,
			    partySecondBank = _this3$props$form$get10 === undefined ? "" : _this3$props$form$get10,
			    _this3$props$form$get11 = _this3$props$form$get.partyFirstCompanyId,
			    partyFirstCompanyId = _this3$props$form$get11 === undefined ? "" : _this3$props$form$get11;

			var supplierTwoItem = _this3.store.supplierTwoItem;

			var obj = JSON.parse(JSON.stringify(supplierTwoItem));
			var supplierContractList = obj.supplierContractList == null ? [] : obj.supplierContractList;
			if (supplierContractList.length > 0) {
				supplierContractList.map(function (v) {
					delete v.key;
					delete v.rate;
					return v;
				});
			}
			delete obj.selected;
			var params = Object.assign(obj, {
				projectAddress: projectAddress,
				partySecondManager: partySecondManager,
				partySecondPhone: partySecondPhone,
				partySecondIdCard: partySecondIdCard,
				partySecondSafer: partySecondSafer,
				contractMoney: contractMoney,
				workBeginTime: workBeginTime == null || workBeginTime == "" ? 0 : (0, _moment2.default)(workBeginTime, 'YYYY-MM-DD').valueOf(),
				wordEndTime: wordEndTime == null || wordEndTime == "" ? 0 : (0, _moment2.default)(wordEndTime, 'YYYY-MM-DD').valueOf(),
				contractAwardTime: contractAwardTime == null || contractAwardTime == "" ? 0 : (0, _moment2.default)(contractAwardTime, 'YYYY-MM-DD').valueOf(),
				partySecondBankName: partySecondBankName,
				partySecondBankNumber: partySecondBankNumber,
				partySecondBank: partySecondBank,
				partyFirstCompanyId: partyFirstCompanyId,
				supplierPayNode: JSON.parse(JSON.stringify(_this3.state.supplierPayNode)),
				supplierContractList: supplierContractList
			});
			// 保存
			_this3.store.saveConfirmSupplierTwoItem({ csti: params }).then(function (res) {
				if (res) {
					_this3.store.supplierTwoItem = Object.assign({}, res);

					// 重置
					_this3.init();

					// 更改列表的数据
					var param = res;
					if (param.isMain == 1) {
						// 主合同
						var stakeholderList = JSON.parse(JSON.stringify(_this3.store.supplierTwoItemList));
						var dataArray = stakeholderList.map(function (item) {
							return Object.assign(item, { selected: false });
						});
						var dindex = dataArray.findIndex(function (item) {
							return item.id == param.id;
						});
						dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
						_this3.store.supplierTwoItemList = Object.assign([], dataArray);
					}
				}
			});
		};

		_this3.handleSaveOne = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.supplierPayNode));
			var index = newData.findIndex(function (item) {
				return row.id === item.id;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ supplierPayNode: newData }, function () {
				_antd.message.success("保存成功");
				_this3.reSave();
			});
		};

		_this3.onSelectChange = function (selectedRowKeys) {
			//console.log('selectedRowKeys changed: ', selectedRowKeys);
			_this3.setState({ selectedRowKeys: selectedRowKeys }, function () {
				var newData = [].concat(_toConsumableArray(_this3.state.supplierPayNode));
				var dataSource = newData.map(function (item) {
					if (selectedRowKeys.includes(item.id)) {
						return Object.assign(item, { isSelected: 1 });
					} else {
						return Object.assign(item, { isSelected: 0 });
					}
				});
				_this3.setState({ supplierPayNode: dataSource }, function () {
					_antd.message.success("保存成功");
					_this3.reSave();
				});
			});
		};

		_this3.updateState = function (type, data) {
			var newData = JSON.parse(JSON.stringify(data));
			_this3.store.supplierTwoItem[type] = Object.assign([], newData);
			_this3.reSave();
		};

		_this3.handleDelete = function (param) {
			_this3.store.delConfirmSupplierSupplementById({ id: param }).then(function (res) {
				if (res == true) {
					_antd.message.success("删除成功");
					// 重新初始化数据,初始化到主合同
					_this3.props.autosaveData();
				}
			});
		};

		_this3.store = _this3.props.store;
		_this3.state = {
			downloading: false,
			dataSource: [],
			supplierPayNode: [],
			selectedRowKeys: []
		};
		return _this3;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			//this.getEnclosureList();
			this.props.onRef(this);
		}

		// 编辑态初始化数据


		// 完成


		// 生成采购合同


		// 自动生成合同


		// 间隔3秒获取pdf地址


		// 保存


		// 更新合同清单


		// 删除合同

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var getFieldDecorator = this.props.form.getFieldDecorator;

			var formItemLayout = {
				labelCol: { span: 8 },
				wrapperCol: { span: 15 }
			};
			var fields = mobx.toJS(this.store.supplierTwoItem) || {};
			var companyList = this.store.companyList;
			var _state = this.state,
			    downloading = _state.downloading,
			    dataSource = _state.dataSource,
			    supplierPayNode = _state.supplierPayNode,
			    selectedRowKeys = _state.selectedRowKeys;

			var rowSelection = {
				selectedRowKeys: selectedRowKeys,
				onChange: this.onSelectChange
			};

			var isDocument = fields.document == null || _typeof(fields.document) == "object" && Object.keys(fields.document).length == 0 ? false : true; // 是否有采购合同

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columns = [{
				title: '序号',
				dataIndex: 'dictId',
				width: '50px',
				align: 'center'
			}, {
				title: '节点',
				dataIndex: 'nodeName',
				width: '200px',
				align: 'center',
				editable: true
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u65F6\u95F4'
				),
				dataIndex: 'dateTime',
				width: '150px',
				align: 'center',
				editable: true
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u652F\u4ED8\u5230\u6BD4\u4F8B\uFF08%\uFF09'
				),
				dataIndex: 'payRate',
				width: '200px',
				align: 'center',
				editable: true
			}, {
				title: '备注',
				dataIndex: 'remark',
				width: '200px',
				align: 'center',
				editable: true
			}];
			var column = columns.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSaveOne
						};
					}
				});
			});

			return _react2.default.createElement(
				'div',
				{ className: fields.isSave != 2 ? "" : "hidden" },
				_react2.default.createElement(
					_antd.Spin,
					{ spinning: downloading, tip: '\u6B63\u5728\u751F\u6210\u91C7\u8D2D\u5408\u540C,\u8BF7\u7A0D\u7B49...' },
					_react2.default.createElement(
						_antd.Form,
						_extends({ layout: 'inline' }, formItemLayout),
						_react2.default.createElement(
							'div',
							{ className: 'fr' },
							_react2.default.createElement(
								_antd.Button,
								{ type: 'primary', onClick: this.handleSave },
								'\u5B8C\u6210\u5408\u540C'
							),
							fields.isMain == 1 ? null : _react2.default.createElement(
								_antd.Popconfirm,
								{
									title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
									onConfirm: this.handleDelete.bind(this, fields.id),
									onCancel: function onCancel() {},
									okText: '\u662F',
									cancelText: '\u5426'
								},
								_react2.default.createElement(
									_antd.Button,
									{ className: 'ml15', type: 'dashed' },
									'\u5220\u9664\u5408\u540C'
								)
							)
						),
						_react2.default.createElement(
							'h1',
							{ style: { padding: "10px 25px", fontWeight: 700, fontSize: "14px" } },
							'\u5408\u540C\u57FA\u672C\u4FE1\u606F'
						),
						_react2.default.createElement(
							_antd.Row,
							{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15], style: { margin: "0" } },
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5408\u540C\u7F16\u53F7', className: 'w' },
									getFieldDecorator('code', {
										initialValue: fields.code || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u4FDD\u5B58\u540E\u81EA\u52A8\u751F\u6210\uFF08\u4E0D\u53EF\u4FEE\u6539', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5408\u540C\u4E59\u65B9', className: 'w' },
									getFieldDecorator('partySecond', {
										initialValue: fields.partySecond || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u9879\u76EE\u540D\u79F0', className: 'w' },
									getFieldDecorator('projectName', {
										initialValue: fields.projectName || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u9879\u76EE\u5730\u5740', className: 'w' },
									getFieldDecorator('projectAddress', {
										initialValue: fields.projectAddress || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u7532\u65B9\u9879\u76EE\u7ECF\u7406', className: 'w' },
									getFieldDecorator('partyFirstManager', {
										initialValue: fields.partyFirstManager || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u7532\u65B9\u8054\u7CFB\u65B9\u5F0F', className: 'w' },
									getFieldDecorator('partyFirstPhone', {
										initialValue: fields.partyFirstPhone || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u9879\u76EE\u7ECF\u7406', className: 'w' },
									getFieldDecorator('partySecondManager', {
										initialValue: fields.partySecondManager || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u8054\u7CFB\u65B9\u5F0F', className: 'w' },
									getFieldDecorator('partySecondPhone', {
										initialValue: fields.partySecondPhone || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u8EAB\u4EFD\u8BC1\u53F7', className: 'w' },
									getFieldDecorator('partySecondIdCard', {
										initialValue: fields.partySecondIdCard || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u5B89\u5168\u8D1F\u8D23\u4EBA', className: 'w' },
									getFieldDecorator('partySecondSafer', {
										initialValue: fields.partySecondSafer || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09', className: 'w' },
									getFieldDecorator('contractMoney', {
										initialValue: fields.contractMoney || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.InputNumber, { placeholder: '\u8BF7\u8F93\u5165\u6570\u5B57', onBlur: this.reSave, className: 'w' }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5927\u5199\u91D1\u989D\uFF08\u5143\uFF09', className: 'w' },
									getFieldDecorator('contractMoneyBig', {
										initialValue: fields.contractMoneyBig || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u9884\u89C8\u65F6\u53EF\u81EA\u52A8\u751F\u6210(\u4E0D\u53EF\u4FEE\u6539)', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5F00\u5DE5\u65E5\u671F', className: 'w' },
									getFieldDecorator('workBeginTime', {
										initialValue: fields.workBeginTime == null || fields.workBeginTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.workBeginTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.DatePicker, { format: 'YYYY-MM-DD', placeholder: '\u8BF7\u9009\u62E9', className: 'w', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u7AE3\u5DE5\u65E5\u671F', className: 'w' },
									getFieldDecorator('wordEndTime', {
										initialValue: fields.wordEndTime == null || fields.wordEndTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.wordEndTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.DatePicker, { format: 'YYYY-MM-DD', placeholder: '\u8BF7\u9009\u62E9', className: 'w', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5408\u540C\u5DE5\u671F\uFF08\u5929\uFF09', className: 'w' },
									getFieldDecorator('contractDays', {
										initialValue: fields.contractDays || "",
										rules: [{ required: false, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u7AE3\u5DE5-\u5F00\u5DE5+1\uFF08\u81EA\u52A8\u8BA1\u7B97\uFF0C\u4E0D\u53EF\u66F4\u6539\uFF09', disabled: true }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u5408\u540C\u7B7E\u8BA2\u65E5\u671F', className: 'w' },
									getFieldDecorator('contractAwardTime', {
										initialValue: fields.contractAwardTime == null || fields.contractAwardTime == 0 ? "" : (0, _moment2.default)((0, _moment2.default)(fields.contractAwardTime).format('YYYY-MM-DD'), "YYYY-MM-DD"),
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.DatePicker, { format: 'YYYY-MM-DD', placeholder: '\u8BF7\u9009\u62E9', className: 'w', onBlur: this.reSave }))
								)
							)
						),
						_react2.default.createElement(
							'h1',
							{ style: { margin: "15px 0", padding: "10px 25px", fontWeight: 700, fontSize: "14px" } },
							'\u4ED8\u6B3E\u8282\u70B9',
							_react2.default.createElement(
								'span',
								{ className: 'daily_tips' },
								'\uFF08\u8BF7\u9488\u5BF9\u9700\u8981\u7684\u4ED8\u6B3E\u8282\u70B9\u6253\u52FE\u786E\u8BA4\uFF09'
							)
						),
						_react2.default.createElement(
							'div',
							{ style: { padding: "0 25px" } },
							_react2.default.createElement(_antd.Table, {
								components: components,
								className: 'digital_table',
								rowClassName: function rowClassName() {
									return 'editable-row';
								},
								dataSource: supplierPayNode,
								columns: column,
								pagination: false,
								bordered: true,
								rowSelection: rowSelection,
								rowKey: function rowKey(record) {
									return record.id;
								}
							})
						),
						_react2.default.createElement(
							'h1',
							{ style: { margin: "15px 0", padding: "10px 25px", fontWeight: 700, fontSize: "14px" } },
							'\u7532\u4E59\u65B9\u8D26\u6237\u4FE1\u606F'
						),
						_react2.default.createElement(
							_antd.Row,
							{ gutter: [{ xs: 24, sm: 24, md: 18, lg: 12, xl: 8 }, 15], style: { margin: "0" } },
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u5F00\u6237\u540D\u79F0', className: 'w' },
									getFieldDecorator('partySecondBankName', {
										initialValue: fields.partySecondBankName || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { placeholder: '\u8BF7\u8F93\u5165', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u5F00\u6237\u884C', className: 'w' },
									getFieldDecorator('partySecondBank', {
										initialValue: fields.partySecondBank || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { disabled: fields.partySecondBank === null ? true : false, placeholder: '\u8BF7\u53BB\u4F9B\u5E94\u5546\u5E93\u5B8C\u5584\u4FE1\u606F', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u4E59\u65B9\u8D26\u53F7', className: 'w' },
									getFieldDecorator('partySecondBankNumber', {
										initialValue: fields.partySecondBankNumber || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(_antd.Input, { disabled: fields.partySecondBankNumber === null ? true : false, placeholder: '\u8BF7\u53BB\u4F9B\u5E94\u5546\u5E93\u5B8C\u5584\u4FE1\u606F', onBlur: this.reSave }))
								)
							),
							_react2.default.createElement(
								_antd.Col,
								{ xs: 24, sm: 24, md: 18, lg: 12, xl: 12 },
								_react2.default.createElement(
									_antd.Form.Item,
									{ label: '\u7532\u65B9\u5F00\u7968\u4FE1\u606F', className: 'w' },
									getFieldDecorator('partyFirstCompanyId', {
										initialValue: fields.partyFirstCompanyId || "",
										rules: [{ required: true, message: '此项是必填' }]
									})(_react2.default.createElement(
										_antd.Select,
										{ style: { width: '100%' }, placeholder: '\u8BF7\u9009\u62E9', onBlur: this.reSave },
										mobx.toJS(companyList).map(function (item) {
											return _react2.default.createElement(
												Option,
												{ value: item.id },
												item.simpleName
											);
										})
									))
								)
							)
						),
						_react2.default.createElement(
							'h1',
							{ style: { padding: "10px 25px", fontWeight: 700, fontSize: "14px" } },
							'\u5408\u540C\u6E05\u5355'
						),
						_react2.default.createElement(
							'div',
							{ style: { padding: "0 25px" } },
							_react2.default.createElement(_EditableTableInventory2.default, {
								fields: fields,
								disabled: false,
								dataSource: fields.supplierContractList == null ? [] : fields.supplierContractList,
								store: this.store,
								updateState: this.updateState.bind(this, "supplierContractList")
							})
						),
						_react2.default.createElement(
							'div',
							{ style: { margin: "15px 0", padding: "10px 25px" } },
							_react2.default.createElement(
								_antd.Button,
								{ type: 'primary', onClick: this.buildWord },
								'\u751F\u6210\u91C7\u8D2D\u5408\u540C'
							),
							isDocument ? _react2.default.createElement(_Document2.default, {
								data: fields.document,
								store: this.store
							}) : null
						),
						_react2.default.createElement(
							'div',
							{ style: { padding: "10px 25px" } },
							_react2.default.createElement(
								'h1',
								{ style: {
										display: "inline-block",
										fontSize: "14px",
										fontWeight: "700"
									} },
								'\u9644\u4EF6'
							),
							'\uFF08\u8BF7\u6309\u7167\u8981\u6C42\u4E0A\u4F20\u9644\u4EF6\u5185\u5BB9\uFF0C\u6807\u661F\u4E3A\u5FC5\u987B\u4E0A\u4F20\u9879\uFF0C\u53EF\u81EA\u7531\u6DFB\u52A0\u9644\u4EF6\u9879\u76EE\u4E2D\u4E0D\u542B\u7684\u76F8\u5173\u5185\u5BB9\uFF09'
						),
						_react2.default.createElement(
							'div',
							{ style: { padding: "10px 25px" } },
							_react2.default.createElement(_EditableTableUpload2.default, {
								id: 'id',
								store: this.store,
								dataSource: dataSource.map(function (item, index) {
									return Object.assign(item, { "keyIndex": index + 1 });
								}),
								saveData: this.saveContents,
								saveItem: this.saveItem,
								disabled: false,
								pid: ''
							})
						)
					)
				)
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class2) || _class2);
exports.default = Index;

/***/ }),

/***/ 2071:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 选择供应商组件
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobxReact = __webpack_require__(22);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var Index = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Index, _React$Component);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this.fetchCompany = function (value) {
			_this.setState({ companyData: [], fetching: true, text: value }, function () {
				_this.getCompanyList(); // 关键字模糊查询api
			});
		};

		_this.getCompanyList = function () {
			var text = _this.state.text;

			var params = {
				text: text
			};
			_this.store.getSupplierList(params).then(function (res) {
				_this.setState({
					companyData: Object.assign([], Array.isArray(res) ? res : [])
				});
			});
		};

		_this.setCheckNum = function (val, e) {
			var item = e.props.val || {};
			_this.props.onSupplierChange(item);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			fetching: false,
			text: "", //关键字
			companyData: []
		};
		return _this;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this2 = this;

			this.setState({
				text: "" //关键字
			}, function () {
				_this2.getCompanyList(); // 调用api方法
			});
		}
	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    companyData = _state.companyData,
			    fetching = _state.fetching;
			var _props = this.props,
			    _props$dataSource = _props.dataSource,
			    dataSource = _props$dataSource === undefined ? [] : _props$dataSource,
			    value = _props.value;

			var olds = dataSource.map(function (i) {
				return i.supplierId;
			});
			var filterData = companyData.filter(function (item) {
				return !olds.includes(item.id);
			});

			return _react2.default.createElement(
				_antd.Select,
				{
					onBlur: this.props.onBlur,
					style: { width: '100%' },
					showSearch: true,
					placeholder: '\u8BF7\u9009\u62E9',
					notFoundContent: fetching ? _react2.default.createElement(_antd.Spin, { size: 'small' }) : null,
					onSearch: this.fetchCompany,
					onChange: this.setCheckNum,
					filterOption: false,
					value: value
				},
				filterData && filterData.map(function (item) {
					return _react2.default.createElement(
						Option,
						{ value: item.id, key: item.id, title: item.name, val: item },
						item.name
					);
				})
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class) || _class);
exports.default = Index;

/***/ }),

/***/ 2072:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  * 选择供应商组件 第三个表
                  * dangw@glodon.com
                  * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Option = _antd.Select.Option;
var Index = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Index, _React$Component);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this.fetchCompany = function (value) {
			_this.setState({ companyData: [], fetching: true, text: value }, function () {
				_this.getCompanyList(); // 关键字模糊查询api
			});
		};

		_this.getCompanyList = function () {
			//const {text} = this.state;
			var taskDetail = _this.store.taskDetail;

			_this.store.getConfirmSupplierOneItemList({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				_this.setState({
					companyData: Object.assign([], Array.isArray(res) ? res : [])
				});
			});
		};

		_this.setCheckNum = function (val, e) {
			var item = e.props.val || {};
			_this.props.onSupplierChange(item);
		};

		_this.store = _this.props.DeliveryStore;
		_this.state = {
			fetching: false,
			text: "", //关键字
			companyData: []
		};
		return _this;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			var _this2 = this;

			this.setState({
				text: "" //关键字
			}, function () {
				_this2.getCompanyList(); // 调用api方法
			});
		}
	}, {
		key: 'render',
		value: function render() {
			var _state = this.state,
			    companyData = _state.companyData,
			    fetching = _state.fetching;
			var value = this.props.value;


			return _react2.default.createElement(
				_antd.Select,
				{
					onBlur: this.props.onBlur,
					style: { width: '100%' },
					showSearch: true,
					placeholder: '\u8BF7\u9009\u62E9',
					notFoundContent: fetching ? _react2.default.createElement(_antd.Spin, { size: 'small' }) : null,
					onSearch: this.fetchCompany,
					onChange: this.setCheckNum,
					filterOption: false,
					value: value
				},
				companyData && companyData.map(function (item) {
					return _react2.default.createElement(
						Option,
						{ value: item.id, key: item.id, title: item.name, val: item },
						item.name
					);
				})
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class) || _class);
exports.default = Index;

/***/ }),

/***/ 2073:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _class; /*
            * 供应商编辑组件
            * dangw@glodon.com
            * */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _antd = __webpack_require__(17);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _EditableTableUpload = __webpack_require__(1546);

var _EditableTableUpload2 = _interopRequireDefault(_EditableTableUpload);

var _Document = __webpack_require__(1618);

var _Document2 = _interopRequireDefault(_Document);

var _EditableTableInventory = __webpack_require__(1882);

var _EditableTableInventory2 = _interopRequireDefault(_EditableTableInventory);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Index = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(Index, _React$Component);

	function Index(props) {
		_classCallCheck(this, Index);

		var _this = _possibleConstructorReturn(this, (Index.__proto__ || Object.getPrototypeOf(Index)).call(this, props));

		_this.handleEdit = function () {
			_this.store.suState = false;
			_this.props.reStartHandover();
			//
			var supplierTwoItem = _this.store.supplierTwoItem;

			var obj = JSON.parse(JSON.stringify(supplierTwoItem));
			delete obj.selected;
			var params = Object.assign(obj, {
				isSave: 1
			});
			// 保存
			_this.store.saveConfirmSupplierTwoItem({ csti: params }).then(function (res) {
				if (res) {
					// 更改列表的数据
					var param = res;
					_this.store.supplierTwoItem = Object.assign({}, res);
					_this.props.updateData();
					if (param.isMain == 1) {
						// 主合同
						var stakeholderList = JSON.parse(JSON.stringify(_this.store.supplierTwoItemList));
						var dataArray = stakeholderList.map(function (item) {
							return Object.assign(item, { selected: false });
						});
						var dindex = dataArray.findIndex(function (item) {
							return item.id == param.id;
						});
						dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
						_this.store.supplierTwoItemList = Object.assign([], dataArray);
					}
				}
			});
		};

		_this.saveContents = function () {
			_this.getEnclosureList();
		};

		_this.saveItem = function (row) {
			var dataSource = _this.state.dataSource;
			var taskDetail = _this.store.taskDetail;

			var em = { taskId: taskDetail.id, name: '', indexs: 1, orders: dataSource.length + 1, canDel: 1, enclosureItems: [], templates: [], cases: [] };
			if (row.id !== undefined && row.id[0] !== "!") {
				em['id'] = row.id;
				em['orders'] = row.orders;
				em['enclosureItems'] = row.enclosureItems;
				em['templates'] = row.templates;
				em['cases'] = row.cases;
				em['name'] = row.name;
			}
			var parmas = { "em": em, taskId: taskDetail.id, indexs: 1 };
			_this.store.saveEnclosureMain(parmas).then(function (res) {
				_this.getEnclosureList();
			});
		};

		_this.getEnclosureList = function () {
			var _this$store = _this.store,
			    taskDetail = _this$store.taskDetail,
			    supplierTwoItem = _this$store.supplierTwoItem;

			_this.store.getEnclosureListByItemId({ "taskId": mobx.toJS(taskDetail).id, "indexs": 0, itemId: mobx.toJS(supplierTwoItem).id }).then(function (res) {
				_this.store.enclosureList = res;
				_this.setState({ dataSource: res, enclosureList: res });
			});
		};

		_this.handleDelete = function (param) {
			_this.store.delConfirmSupplierSupplementById({ id: param }).then(function (res) {
				if (res == true) {
					_antd.message.success("删除成功");
					// 重新初始化数据,初始化到主合同
					_this.props.autosaveData();
				}
			});
		};

		_this.store = _this.props.store;
		_this.state = {
			dataSource: []
		};
		return _this;
	}

	_createClass(Index, [{
		key: 'componentWillReceiveProps',
		value: function componentWillReceiveProps(nextProps, nextContext) {}
	}, {
		key: 'componentDidMount',
		value: function componentDidMount() {
			//this.getEnclosureList();
			this.props.onRef(this);
		}

		// 删除合同

	}, {
		key: 'render',
		value: function render() {
			var fields = mobx.toJS(this.store.supplierTwoItem) || {};
			var company = mobx.toJS(this.store.companyList) || [];
			var _fields$projectAddres = fields.projectAddress,
			    projectAddress = _fields$projectAddres === undefined ? "" : _fields$projectAddres,
			    _fields$partySecondMa = fields.partySecondManager,
			    partySecondManager = _fields$partySecondMa === undefined ? "" : _fields$partySecondMa,
			    _fields$partySecondPh = fields.partySecondPhone,
			    partySecondPhone = _fields$partySecondPh === undefined ? "" : _fields$partySecondPh,
			    _fields$partySecondId = fields.partySecondIdCard,
			    partySecondIdCard = _fields$partySecondId === undefined ? "" : _fields$partySecondId,
			    _fields$partySecondSa = fields.partySecondSafer,
			    partySecondSafer = _fields$partySecondSa === undefined ? "" : _fields$partySecondSa,
			    _fields$contractMoney = fields.contractMoney,
			    contractMoney = _fields$contractMoney === undefined ? "" : _fields$contractMoney,
			    workBeginTime = fields.workBeginTime,
			    wordEndTime = fields.wordEndTime,
			    contractAwardTime = fields.contractAwardTime,
			    _fields$partySecondBa = fields.partySecondBankName,
			    partySecondBankName = _fields$partySecondBa === undefined ? "" : _fields$partySecondBa,
			    _fields$partySecondBa2 = fields.partySecondBankNumber,
			    partySecondBankNumber = _fields$partySecondBa2 === undefined ? "" : _fields$partySecondBa2,
			    _fields$partySecondBa3 = fields.partySecondBank,
			    partySecondBank = _fields$partySecondBa3 === undefined ? "" : _fields$partySecondBa3,
			    _fields$partyFirstCom = fields.partyFirstCompanyId,
			    partyFirstCompanyId = _fields$partyFirstCom === undefined ? "" : _fields$partyFirstCom,
			    _fields$code = fields.code,
			    code = _fields$code === undefined ? "" : _fields$code,
			    _fields$partySecond = fields.partySecond,
			    partySecond = _fields$partySecond === undefined ? "" : _fields$partySecond,
			    _fields$projectName = fields.projectName,
			    projectName = _fields$projectName === undefined ? "" : _fields$projectName,
			    _fields$partyFirstMan = fields.partyFirstManager,
			    partyFirstManager = _fields$partyFirstMan === undefined ? "" : _fields$partyFirstMan,
			    _fields$partyFirstPho = fields.partyFirstPhone,
			    partyFirstPhone = _fields$partyFirstPho === undefined ? "" : _fields$partyFirstPho,
			    _fields$contractMoney2 = fields.contractMoneyBig,
			    contractMoneyBig = _fields$contractMoney2 === undefined ? "" : _fields$contractMoney2,
			    _fields$contractDays = fields.contractDays,
			    contractDays = _fields$contractDays === undefined ? "" : _fields$contractDays,
			    document = fields.document,
			    supplierPayNode = fields.supplierPayNode,
			    supplierContractList = fields.supplierContractList;

			var active = company.filter(function (item) {
				return item.id == partyFirstCompanyId;
			})[0] || {};
			var dataSource = this.state.dataSource;

			var isDocument = document == null || (typeof document === 'undefined' ? 'undefined' : _typeof(document)) == "object" && Object.keys(document).length == 0 ? false : true; // 是否有采购合同
			var columns = [{
				title: '序号',
				dataIndex: 'dictId',
				width: '50px',
				align: 'center'
			}, {
				title: '节点',
				dataIndex: 'nodeName',
				width: '200px',
				align: 'center'
			}, {
				title: '时间',
				dataIndex: 'dateTime',
				width: '150px',
				align: 'center'
				/*render: (text, record)=> {
    	return text==0||text==null?"":moment(text).format('YYYY-MM-DD')
    }*/
			}, {
				title: "支付到比例（%）",
				dataIndex: 'payRate',
				width: '200px',
				align: 'center'
			}, {
				title: '备注',
				dataIndex: 'remark',
				width: '200px',
				align: 'center'
			}];

			return _react2.default.createElement(
				'div',
				{ className: fields.isSave == 2 ? "w" : "hidden" },
				_react2.default.createElement(
					'div',
					{ className: 'fr', style: { padding: "0 35px" } },
					_react2.default.createElement(
						_antd.Button,
						{ type: 'primary', onClick: this.handleEdit },
						'\u7F16\u8F91\u5408\u540C'
					),
					fields.isMain == 1 ? null : _react2.default.createElement(
						_antd.Popconfirm,
						{
							title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?',
							onConfirm: this.handleDelete.bind(this, fields.id),
							onCancel: function onCancel() {},
							okText: '\u662F',
							cancelText: '\u5426'
						},
						_react2.default.createElement(
							_antd.Button,
							{ className: 'ml15', type: 'dashed' },
							'\u5220\u9664\u5408\u540C'
						)
					)
				),
				_react2.default.createElement(
					'h1',
					{ style: { padding: "10px 35px", fontWeight: 700, fontSize: "14px" } },
					'\u5408\u540C\u57FA\u672C\u4FE1\u606F'
				),
				_react2.default.createElement(
					'table',
					{ className: 'suppliertable' },
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u5408\u540C\u7F16\u53F7'
						),
						_react2.default.createElement(
							'td',
							null,
							code
						),
						_react2.default.createElement(
							'td',
							null,
							'\u5408\u540C\u4E59\u65B9'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecond
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u9879\u76EE\u540D\u79F0'
						),
						_react2.default.createElement(
							'td',
							null,
							projectName
						),
						_react2.default.createElement(
							'td',
							null,
							'\u9879\u76EE\u5730\u5740'
						),
						_react2.default.createElement(
							'td',
							null,
							projectAddress
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u7532\u65B9\u9879\u76EE\u7ECF\u7406'
						),
						_react2.default.createElement(
							'td',
							null,
							partyFirstManager
						),
						_react2.default.createElement(
							'td',
							null,
							'\u7532\u65B9\u8054\u7CFB\u65B9\u5F0F'
						),
						_react2.default.createElement(
							'td',
							null,
							partyFirstPhone
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u9879\u76EE\u7ECF\u7406'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondManager
						),
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u8054\u7CFB\u65B9\u5F0F'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondPhone
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u8EAB\u4EFD\u8BC1\u53F7'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondIdCard
						),
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u5B89\u5168\u8D1F\u8D23\u4EBA'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondSafer
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09'
						),
						_react2.default.createElement(
							'td',
							null,
							contractMoney
						),
						_react2.default.createElement(
							'td',
							null,
							'\u5927\u5199\u91D1\u989D\uFF08\u5143\uFF09'
						),
						_react2.default.createElement(
							'td',
							null,
							contractMoneyBig
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u5F00\u5DE5\u65E5\u671F'
						),
						_react2.default.createElement(
							'td',
							null,
							workBeginTime !== 0 && workBeginTime !== null ? (0, _moment2.default)(workBeginTime).format('YYYY年MM月DD日') : ''
						),
						_react2.default.createElement(
							'td',
							null,
							'\u7AE3\u5DE5\u65E5\u671F'
						),
						_react2.default.createElement(
							'td',
							null,
							wordEndTime !== 0 && wordEndTime !== null ? (0, _moment2.default)(wordEndTime).format('YYYY年MM月DD日') : ''
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u5408\u540C\u5DE5\u671F'
						),
						_react2.default.createElement(
							'td',
							null,
							contractDays,
							'\u5929'
						),
						_react2.default.createElement(
							'td',
							null,
							'\u5408\u540C\u7B7E\u8BA2\u65E5\u671F'
						),
						_react2.default.createElement(
							'td',
							null,
							contractAwardTime !== 0 && contractAwardTime !== null ? (0, _moment2.default)(contractAwardTime).format('YYYY年MM月DD日') : ''
						)
					)
				),
				_react2.default.createElement(
					'h1',
					{ style: { padding: "10px 35px", fontWeight: 700, fontSize: "14px" } },
					'\u7532\u4E59\u65B9\u8D26\u6237\u4FE1\u606F'
				),
				_react2.default.createElement(
					'table',
					{ className: 'suppliertable' },
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u5F00\u6237\u540D\u79F0'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondBankName
						),
						_react2.default.createElement(
							'td',
							null,
							'\u5F00\u7968\u516C\u53F8\u540D\u79F0'
						),
						_react2.default.createElement(
							'td',
							null,
							active.name || ""
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u5F00\u6237\u884C'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondBank
						),
						_react2.default.createElement(
							'td',
							null,
							'\u7EB3\u7A0E\u4EBA\u8BC6\u522B\u53F7'
						),
						_react2.default.createElement(
							'td',
							null,
							active.sh || ""
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement(
							'td',
							null,
							'\u4E59\u65B9\u8D26\u53F7'
						),
						_react2.default.createElement(
							'td',
							null,
							partySecondBankNumber
						),
						_react2.default.createElement(
							'td',
							null,
							'\u5730\u5740'
						),
						_react2.default.createElement(
							'td',
							null,
							active.address || ""
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement('td', { style: { borderColor: "#FFF", background: "#FFF" } }),
						_react2.default.createElement('td', { style: { borderColor: "#FFF", borderRightColor: "#e6e6e6", background: "#FFF" } }),
						_react2.default.createElement(
							'td',
							null,
							'\u5F00\u6237\u884C'
						),
						_react2.default.createElement(
							'td',
							null,
							active.bank || ""
						)
					),
					_react2.default.createElement(
						'tr',
						null,
						_react2.default.createElement('td', { style: { borderColor: "#FFF", background: "#FFF" } }),
						_react2.default.createElement('td', { style: { borderColor: "#FFF", borderRightColor: "#e6e6e6", background: "#FFF" } }),
						_react2.default.createElement(
							'td',
							null,
							'\u8D26\u53F7'
						),
						_react2.default.createElement(
							'td',
							null,
							active.bankCard || ""
						)
					)
				),
				_react2.default.createElement(
					'h1',
					{ style: { padding: "10px 35px", fontWeight: 700, fontSize: "14px" } },
					'\u4ED8\u6B3E\u8282\u70B9'
				),
				_react2.default.createElement(
					'div',
					{ style: { padding: "0 35px" } },
					_react2.default.createElement(_antd.Table, {
						className: 'digital_table',
						rowClassName: function rowClassName() {
							return 'editable-row';
						},
						dataSource: supplierPayNode && supplierPayNode.filter(function (i) {
							return i.isSelected == 1;
						}).map(function (v, vindex) {
							return Object.assign(v, { dictId: vindex + 1 });
						}) || [],
						columns: columns,
						pagination: false,
						bordered: true
					})
				),
				_react2.default.createElement(
					'h1',
					{ style: { padding: "10px 35px", fontWeight: 700, fontSize: "14px" } },
					'\u5408\u540C\u6E05\u5355'
				),
				_react2.default.createElement(
					'div',
					{ style: { padding: "0 35px" } },
					_react2.default.createElement(_EditableTableInventory2.default, {
						disabled: true,
						dataSource: supplierContractList == null ? [] : supplierContractList,
						store: this.store
					})
				),
				_react2.default.createElement(
					'h1',
					{ style: { padding: "10px 35px", fontWeight: 700, fontSize: "14px" } },
					'\u751F\u6210\u7684\u91C7\u8D2D\u5408\u540C'
				),
				_react2.default.createElement(
					'div',
					{ style: { padding: "10px 35px" } },
					isDocument ? _react2.default.createElement(_Document2.default, {
						data: document,
						store: this.store
					}) : null
				),
				_react2.default.createElement(
					'h1',
					{ style: { padding: "10px 35px", fontWeight: 700, fontSize: "14px" } },
					'\u9644\u4EF6'
				),
				_react2.default.createElement(
					'div',
					{ style: { padding: "10px 35px" } },
					_react2.default.createElement(_EditableTableUpload2.default, {
						id: 'id',
						store: this.store,
						dataSource: dataSource.map(function (item, index) {
							return Object.assign(item, { "keyIndex": index + 1 });
						}),
						saveData: this.saveContents,
						saveItem: this.saveItem,
						disabled: true,
						pid: ''
					})
				)
			);
		}
	}]);

	return Index;
}(_react2.default.Component)) || _class;

exports.default = Index;

/***/ }),

/***/ 2074:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _dec, _class2;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _SupplierSelectThree = __webpack_require__(2072);

var _SupplierSelectThree2 = _interopRequireDefault(_SupplierSelectThree);

var _download = __webpack_require__(68);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; } /*
                                                                                                                                                                                                                             *填写用工信息
                                                                                                                                                                                                                             *dangw@bocspace.cn
                                                                                                                                                                                                                             */


var EditableContext = _react2.default.createContext();
var EditableRow = function EditableRow(_ref) {
	var form = _ref.form,
	    index = _ref.index,
	    props = _objectWithoutProperties(_ref, ['form', 'index']);

	return _react2.default.createElement(
		EditableContext.Provider,
		{ value: form },
		_react2.default.createElement('tr', props)
	);
};
var EditableFormRow = _antd.Form.create()(EditableRow);

var EditableCell = function (_React$Component) {
	_inherits(EditableCell, _React$Component);

	function EditableCell() {
		var _ref2;

		var _temp, _this2, _ret;

		_classCallCheck(this, EditableCell);

		for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
			args[_key] = arguments[_key];
		}

		return _ret = (_temp = (_this2 = _possibleConstructorReturn(this, (_ref2 = EditableCell.__proto__ || Object.getPrototypeOf(EditableCell)).call.apply(_ref2, [this].concat(args))), _this2), _this2.state = {
			editing: true
		}, _this2.toggleEdit = function () {
			var editing = !_this2.state.editing;
			_this2.setState({ editing: editing }, function () {
				if (editing) {
					_this2.input.focus();
				}
			});
		}, _this2.save = function (type, e) {
			var _this2$props = _this2.props,
			    record = _this2$props.record,
			    handleSave = _this2$props.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (error && error[e.currentTarget.id]) {
					return;
				}
				//this.toggleEdit();
				handleSave(_extends({}, record, _defineProperty({}, type, values[type])));
			});
		}, _this2.onChange = function (value) {
			var _this2$props2 = _this2.props,
			    record = _this2$props2.record,
			    handleSave = _this2$props2.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('sex')) {
					values["sex"] = value;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this2.onSupplierChange = function (param) {
			var _this2$props3 = _this2.props,
			    record = _this2$props3.record,
			    handleSave = _this2$props3.handleSave;

			_this2.form.validateFields(function (error, values) {
				if (values.hasOwnProperty('supplierId')) {
					values["supplierName"] = param.name;
					values["supplierId"] = param.id;
				}
				handleSave(_extends({}, record, values));
			});
		}, _this2.renderCell = function (form) {
			_this2.form = form;
			var _this2$props4 = _this2.props,
			    children = _this2$props4.children,
			    dataIndex = _this2$props4.dataIndex,
			    record = _this2$props4.record,
			    title = _this2$props4.title;
			var editing = _this2.state.editing;


			if (dataIndex == "supplierId") {
				// 供应商名称
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						'div',
						{ ref: function ref(node) {
								return _this2.input = node;
							} },
						_react2.default.createElement(_SupplierSelectThree2.default, {
							onSupplierChange: _this2.onSupplierChange,
							value: record["supplierName"]
							//onBlur={this.toggleEdit}
						})
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this2.toggleEdit
					},
					record["supplierName"]
				);
			} else if (dataIndex == "sex") {
				// 性别
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(
						_antd.Select,
						{ style: { width: 60 }, ref: function ref(node) {
								return _this2.input = node;
							}, onChange: _this2.onChange
							//onBlur={this.toggleEdit}
						},
						_react2.default.createElement(
							Option,
							{ value: '\u7537' },
							'\u7537'
						),
						_react2.default.createElement(
							Option,
							{ value: '\u5973' },
							'\u5973'
						)
					))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this2.toggleEdit
					},
					children
				);
			} else {
				return editing ? _react2.default.createElement(
					_antd.Form.Item,
					{ style: { margin: 0 } },
					form.getFieldDecorator(dataIndex, {
						rules: [{
							required: false,
							message: title + ' is required.'
						}],
						initialValue: record[dataIndex]
					})(_react2.default.createElement(_antd.Input, { ref: function ref(node) {
							return _this2.input = node;
						}, onPressEnter: _this2.save.bind(_this2, dataIndex), onBlur: _this2.save.bind(_this2, dataIndex) }))
				) : _react2.default.createElement(
					'div',
					{
						className: 'editable-cell-value-wrap',
						style: { paddingRight: 24, minHeight: "34px" },
						onClick: _this2.toggleEdit
					},
					children
				);
			}
		}, _temp), _possibleConstructorReturn(_this2, _ret);
	}

	_createClass(EditableCell, [{
		key: 'render',
		value: function render() {
			var _props = this.props,
			    editable = _props.editable,
			    dataIndex = _props.dataIndex,
			    title = _props.title,
			    record = _props.record,
			    index = _props.index,
			    handleSave = _props.handleSave,
			    children = _props.children,
			    restProps = _objectWithoutProperties(_props, ['editable', 'dataIndex', 'title', 'record', 'index', 'handleSave', 'children']);

			return _react2.default.createElement(
				'td',
				restProps,
				editable ? _react2.default.createElement(
					EditableContext.Consumer,
					null,
					this.renderCell
				) : children
			);
		}
	}]);

	return EditableCell;
}(_react2.default.Component);

var ThreeItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class2 = (0, _reactRouterDom.withRouter)(_class2 = (0, _mobxReact.observer)(_class2 = function (_React$Component2) {
	_inherits(ThreeItem, _React$Component2);

	function ThreeItem(props) {
		_classCallCheck(this, ThreeItem);

		var _this3 = _possibleConstructorReturn(this, (ThreeItem.__proto__ || Object.getPrototypeOf(ThreeItem)).call(this, props));

		_this3.getConfirmSupplierOneItemList = function () {
			var taskDetail = _this3.store.taskDetail;

			_this3.store.getConfirmSupplierThreeItemList({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				_this3.setState({
					dataSource: Array.isArray(res) ? res.map(function (item, index) {
						return Object.assign(item, { key: index + 1 });
					}) : [],
					count: Array.isArray(res) ? res.length : 0
				});
			});
		};

		_this3.handleAdd = function () {
			var _this3$state = _this3.state,
			    count = _this3$state.count,
			    dataSource = _this3$state.dataSource;
			// 校验

			if (count > 0) {
				var param = dataSource[count - 1];
				if (param.name == null || param.name == "") {
					_antd.message.warn("姓名是必填项");
					return false;
				}
				if (param.idCard == null || param.idCard == "") {
					_antd.message.warn("身份证号是必填项");
					return false;
				}
				if (param.phone == null || param.phone == "") {
					_antd.message.warn("手机号是必填项");
					return false;
				}
				if (param.supplierName == null || param.supplierName == "") {
					_antd.message.warn("所属供应商是必填项");
					return false;
				}
			}

			var taskDetail = _this3.store.taskDetail;

			var newData = {
				id: "",
				taskId: mobx.toJS(taskDetail).id,
				name: "",
				supplierId: "",
				idCard: "",
				phone: "",
				sex: "",
				age: "",
				workType: "",
				supplierName: ""
			};
			// 单行保存
			_this3.store.saveConfirmSupplierThreeItem({ csti: newData }).then(function (res) {
				if (res && res.id) {
					_this3.setState({
						dataSource: [].concat(_toConsumableArray(dataSource), [Object.assign(res, { key: count + 1 })]),
						count: count + 1
					});
				}
			});
		};

		_this3.handleSave = function (row) {
			var newData = [].concat(_toConsumableArray(_this3.state.dataSource));
			var index = newData.findIndex(function (item) {
				return row.key === item.key;
			});
			var item = newData[index];
			newData.splice(index, 1, _extends({}, item, row));
			_this3.setState({ dataSource: newData });

			var param = JSON.parse(JSON.stringify(row));
			delete param.key;

			// 单行保存
			_this3.store.saveConfirmSupplierThreeItem({ csti: param });
		};

		_this3.handleDelete = function (record) {
			var dataSource = [].concat(_toConsumableArray(_this3.state.dataSource));
			var newData = dataSource.filter(function (item) {
				return item.key !== record.key;
			}).map(function (vitem, vindex) {
				return Object.assign(vitem, { key: vindex + 1 });
			});
			_this3.setState({
				dataSource: newData, record: record,
				count: newData.length
			});
			if (record.id != "" && record.id != null) {
				_this3.store.delConfirmSupplierThreeItem({ id: record.id }).then(function (res) {
					if (res) {
						_antd.message.success("删除成功");
					}
				});
			}
		};

		_this3.overCurrentStage = function () {
			var _this3$state2 = _this3.state,
			    count = _this3$state2.count,
			    dataSource = _this3$state2.dataSource;

			if (count == 0) {
				_antd.message.warn("请完善必填信息");
				return false;
			}
			// 校验
			if (count > 0) {
				var param = dataSource[count - 1];
				if (param.name == null || param.name == "") {
					_antd.message.warn("姓名是必填项");
					return false;
				}
				if (param.idCard == null || param.idCard == "") {
					_antd.message.warn("身份证号是必填项");
					return false;
				}
				if (param.phone == null || param.phone == "") {
					_antd.message.warn("手机号是必填项");
					return false;
				}
				if (param.supplierName == null || param.supplierName == "") {
					_antd.message.warn("所属供应商是必填项");
					return false;
				}
			}
			_this3.props.overCurrentStageTask();
		};

		_this3.onSelectChange = function (selectedRowKeys) {
			_this3.setState({ selectedRowKeys: selectedRowKeys });
		};

		_this3.checkAllDel = function () {
			var selectedRowKeys = _this3.state.selectedRowKeys;

			if (selectedRowKeys.length == 0) {
				_antd.message.warn("请先选择要删除的信息");
				return false;
			}
			_this3.store.delConfirmSupplierThreeItemList({ ids: selectedRowKeys }).then(function (res) {
				if (res) {
					_antd.message.success("删除成功");
					_this3.setState({
						selectedRowKeys: []
					});
					_this3.getConfirmSupplierOneItemList();
				}
			});
		};

		_this3.buildExcel = function () {
			var _this3$state3 = _this3.state,
			    count = _this3$state3.count,
			    dataSource = _this3$state3.dataSource;
			var supplierState = _this3.store.supplierState;


			if (count == 0 && mobx.toJS(supplierState).state3 != 2) {
				_antd.message.warn("请完善必填信息");
				return false;
			}
			// 校验
			if (count > 0 && mobx.toJS(supplierState).state3 != 2) {
				var param = dataSource[count - 1];
				if (param.name == null || param.name == "") {
					_antd.message.warn("姓名是必填项");
					return false;
				}
				if (param.idCard == null || param.idCard == "") {
					_antd.message.warn("身份证号是必填项");
					return false;
				}
				if (param.phone == null || param.phone == "") {
					_antd.message.warn("手机号是必填项");
					return false;
				}
				if (param.supplierName == null || param.supplierName == "") {
					_antd.message.warn("所属供应商是必填项");
					return false;
				}
			}

			var data = JSON.parse(JSON.stringify(dataSource));
			var cstis = data.map(function (item) {
				if (item.key) delete item.key;
				return item;
			});
			_this3.store.buildConfirmSupplierThreeExcel({ cstis: cstis }).then(function (res) {
				if (res) {
					_this3.setState({
						downloading: true
					});
					_this3.getReportUrl({ "id": res });
				}
			});
		};

		_this3.getReportUrl = function (id) {
			var _this = _this3;
			_this.timer22 = setInterval(function () {
				_this.store.getDownloadUrl(id).then(function (url) {
					if (url !== null && url !== "") {
						_this.setState({ downloading: false });
						(0, _download.downloadFile)(url, "用工信息");
						clearInterval(_this.timer22);
					} else {}
				});
			}, 3000);
		};

		_this3.store = _this3.props.DeliveryStore;
		_this3.state = {
			dataSource: [],
			count: 0,
			selectedRowKeys: [],
			downloading: false
		};
		return _this3;
	}

	_createClass(ThreeItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getConfirmSupplierOneItemList();
		}

		// 获取列表


		// 新增


		// 保存


		// 删除


		// 批量删除


		// 导出Excel


		// 间隔3秒获取pdf地址

	}, {
		key: 'render',
		value: function render() {
			var _this4 = this;

			var supplierState = this.store.supplierState;
			var _state = this.state,
			    dataSource = _state.dataSource,
			    selectedRowKeys = _state.selectedRowKeys,
			    downloading = _state.downloading;
			var _props2 = this.props,
			    currentStep = _props2.currentStep,
			    switchSteps = _props2.switchSteps;

			var components = {
				body: {
					row: EditableFormRow,
					cell: EditableCell
				}
			};
			var columns = [{
				title: '序号',
				dataIndex: 'key',
				width: '80px',
				align: 'center'
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u59D3\u540D'
				),
				dataIndex: 'name',
				width: 100,
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u8EAB\u4EFD\u8BC1\u53F7'
				),
				dataIndex: 'idCard',
				width: '200px',
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u624B\u673A\u53F7'
				),
				dataIndex: 'phone',
				width: '120px',
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true
			}, {
				title: '性别',
				dataIndex: 'sex',
				width: 100,
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true
			}, {
				title: '年龄',
				dataIndex: 'age',
				width: 100,
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true
			}, {
				title: '工种',
				dataIndex: 'workType',
				width: 100,
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true
			}, {
				title: _react2.default.createElement(
					'div',
					null,
					_react2.default.createElement(
						'span',
						{ style: {
								fontWeight: "400",
								marginRight: "4px",
								color: "#f5222d",
								fontSize: "14px",
								fontFamily: "SimSun, sans-serif"
							} },
						'*'
					),
					'\u6240\u5C5E\u4F9B\u5E94\u5546'
				),
				dataIndex: 'supplierId',
				width: 200,
				align: 'center',
				editable: supplierState.state3 === 2 ? false : true,
				render: function render(text, record) {
					return _react2.default.createElement(
						'div',
						null,
						text == null || text == "" ? "" : record["supplierName"]
					);
				}
			}, {
				title: '操作',
				dataIndex: 'opater',
				width: '60px',
				align: 'center',
				className: supplierState.state3 === 2 ? "hidden" : "",
				render: function render(text, record) {
					return _react2.default.createElement(
						_antd.Popconfirm,
						{ title: '\u786E\u5B9A\u8981\u5220\u9664\u5417?', onConfirm: function onConfirm() {
								return _this4.handleDelete(record);
							} },
						_react2.default.createElement(
							'span',
							{ style: { fontSize: "14px", color: "#57ACFF", cursor: "pointer" } },
							'\u5220\u9664'
						)
					);
				}
			}];
			var column = columns.map(function (col) {
				if (!col.editable) {
					return col;
				}
				return _extends({}, col, {
					onCell: function onCell(record) {
						return {
							record: record,
							editable: col.editable,
							dataIndex: col.dataIndex,
							title: col.title,
							handleSave: _this4.handleSave,
							dataSource: dataSource
						};
					}
				});
			});

			var rowSelection = {
				selectedRowKeys: selectedRowKeys,
				onChange: this.onSelectChange
			};

			return _react2.default.createElement(
				'div',
				{ style: {
						overflowX: "hidden"
					} },
				_react2.default.createElement(
					_antd.Spin,
					{ spinning: downloading, tip: '\u6B63\u5728\u4E0B\u8F7D\u4E2D,\u8BF7\u7A0D\u7B49...' },
					_react2.default.createElement(
						_antd.Button,
						{
							className: 'mb10',
							ghost: true,
							type: 'primary',
							icon: 'poweroff',
							onClick: this.props.reStartHandover,
							style: supplierState.state3 === 2 ? { display: '' } : { display: 'none' }
						},
						'\u91CD\u65B0\u542F\u52A8'
					),
					_react2.default.createElement(
						_antd.Button,
						{
							className: 'mb10',
							type: 'primary',
							icon: 'delete',
							ghost: true,
							onClick: this.checkAllDel,
							style: supplierState.state3 === 2 ? { display: 'none' } : { display: '' }
						},
						'\u6279\u91CF\u5220\u9664'
					),
					_react2.default.createElement(_antd.Table, {
						rowSelection: supplierState.state3 === 2 ? null : rowSelection,
						components: components,
						className: 'digital_table',
						rowClassName: function rowClassName() {
							return 'editable-row';
						},
						dataSource: dataSource,
						columns: column,
						pagination: false,
						bordered: supplierState.state3 === 2 ? true : false,
						rowKey: function rowKey(record) {
							return record.id;
						}
					}),
					_react2.default.createElement(_antd.Icon, { onClick: this.handleAdd,
						className: supplierState.state3 === 2 ? "hidden" : "mt20",
						type: 'plus-circle', style: {
							position: "relative",
							left: "28px",
							fontSize: "18px",
							color: "#609AF1",
							cursor: "pointer"
						} }),
					_react2.default.createElement(
						'div',
						{ className: 'mt30 mb30', style: supplierState.state3 !== 2 ? {
								display: 'flex',
								justifyContent: 'center'
							} : { display: 'none' } },
						_react2.default.createElement(
							_antd.Button,
							{ style: { marginRight: '20px' },
								ghost: true,
								type: 'primary',
								onClick: this.buildExcel },
							'\u5BFC\u51FAExcel'
						),
						_react2.default.createElement(
							_antd.Button,
							{ onClick: this.overCurrentStage, type: 'primary' },
							' \u5B8C\u6210\u8BE5\u9636\u6BB5\u4EFB\u52A1'
						)
					),
					_react2.default.createElement(
						'div',
						{ className: 'mt30 mb30', style: supplierState.state3 === 2 ? {
								display: 'flex',
								justifyContent: 'center'
							} : { display: 'none' } },
						_react2.default.createElement(
							_antd.Button,
							{ style: { marginRight: '20px' },
								ghost: true,
								type: 'primary',
								onClick: this.buildExcel },
							'\u5BFC\u51FAExcel'
						),
						_react2.default.createElement(
							_antd.Button,
							{ onClick: function onClick() {
									switchSteps(currentStep - 1);
								}, style: { marginLeft: '20px' }, type: 'primary' },
							'\u4E0A\u4E00\u6B65'
						)
					)
				)
			);
		}
	}]);

	return ThreeItem;
}(_react2.default.Component)) || _class2) || _class2) || _class2);
exports.default = ThreeItem;

/***/ }),

/***/ 2075:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _dec, _class; /*
                  *签订合同
                  *dangw@bocspace.cn
                  */


var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _mobxReact = __webpack_require__(22);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _mobx = __webpack_require__(12);

var mobx = _interopRequireWildcard(_mobx);

var _reactRouterDom = __webpack_require__(32);

var _antd = __webpack_require__(17);

var _reactCustomScrollbars = __webpack_require__(336);

var _SupplierEdit = __webpack_require__(2070);

var _SupplierEdit2 = _interopRequireDefault(_SupplierEdit);

var _SupplierView = __webpack_require__(2073);

var _SupplierView2 = _interopRequireDefault(_SupplierView);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TabPane = _antd.Tabs.TabPane;
var TwoItem = (_dec = (0, _mobxReact.inject)('DeliveryStore'), _dec(_class = (0, _reactRouterDom.withRouter)(_class = (0, _mobxReact.observer)(_class = function (_React$Component) {
	_inherits(TwoItem, _React$Component);

	function TwoItem(props) {
		_classCallCheck(this, TwoItem);

		var _this = _possibleConstructorReturn(this, (TwoItem.__proto__ || Object.getPrototypeOf(TwoItem)).call(this, props));

		_this.onChange = function (activeKey) {
			if (activeKey == "add") {
				_this.add();
			} else {
				_this.setState({ activeKey: activeKey }, function () {
					var panes = _this.state.panes;

					var content = panes.filter(function (item) {
						return item.key == activeKey;
					})[0].content;
					// 主合同
					if (activeKey == "main") {
						_this.store.getConfirmSupplierTwoItemById({ id: content.id }).then(function (res) {
							var active = res;
							// 获取当前展示的数据
							_this.store.supplierTwoItem = Object.assign({}, active);
							_this.store.suState = active.isSave == 2 ? true : false;
							// 编辑重新刷新数据
							if (active.isSave != 2) {
								_this.supplierRef2.init();
								_this.supplierRef2.getEnclosureList();
							}
							if (active.isSave == 2) {
								// 详情
								_this.supplierRef.getEnclosureList();
							}
						});
					} else {
						// 补充协议
						_this.store.getConfirmSupplierSupplementByMainId().then(function (res) {
							if (res) {
								var array = res;
								var filterObj = array.filter(function (item) {
									return item.id == content.id;
								})[0];
								// 获取当前展示的数据
								_this.store.supplierTwoItem = Object.assign({}, filterObj);
								_this.store.suState = filterObj.isSave == 2 ? true : false;
								// 编辑重新刷新数据
								if (filterObj.isSave != 2) {
									_this.supplierRef2.init();
									_this.supplierRef2.getEnclosureList();
								}
								if (filterObj.isSave == 2) {
									// 详情
									_this.supplierRef.getEnclosureList();
								}
							}
						});
					}
				});
			}
		};

		_this.onEdit = function (targetKey, action) {
			_this[action](targetKey);
		};

		_this.add = function () {
			_this.store.addConfirmSupplierSupplement().then(function (res) {
				var content = res;
				var panes = _this.state.panes;

				var activeKey = panes.length == 2 ? 1 : ++_this.newTabIndex;

				var obj = { title: '补充协议-' + activeKey, content: content, key: activeKey.toString(), closable: false };
				panes.splice(panes.length - 1, 0, obj);
				//console.log(panes, content, '新增补充协议')
				// 获取当前展示的数据
				_this.store.supplierTwoItem = Object.assign({}, content);
				_this.store.suState = content.isSave == 2 ? true : false;

				_this.setState({ panes: panes, activeKey: activeKey.toString() }, function () {
					// 编辑重新刷新数据
					if (content.isSave != 2) {
						_this.supplierRef2.init();
						_this.supplierRef2.getEnclosureList();
					}
					if (content.isSave == 2) {
						// 详情
						_this.supplierRef.getEnclosureList();
					}
				});
			});
		};

		_this.getConfirmSupplierTwoItemList = function () {
			var taskDetail = _this.store.taskDetail;

			_this.store.getConfirmSupplierTwoItemList({ "taskId": mobx.toJS(taskDetail).id }).then(function (res) {
				if (res) {
					if (Array.isArray(res) && res.length > 0) {
						// 初始化默认值，列表第一项
						var param = res[0];
						var dataArray = res.map(function (item) {
							return Object.assign(item, { selected: false });
						});
						var dindex = dataArray.findIndex(function (item) {
							return item.id == param.id;
						});
						dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
						_this.store.supplierTwoItemList = Object.assign([], dataArray);
						_this.store.supplierTwoItem = Object.assign({}, param);
						_this.store.suState = param.isSave == 2 ? true : false;

						// 补充协议
						_this.setState({
							mainObj: param,
							activeKey: "main"
						});
						_this.store.mainId = param.id;
						_this.getConfirmSupplierSupplementByMainId(param);

						// 编辑重新刷新数据
						if (param.isSave != 2) {
							_this.supplierRef2.init();
							_this.supplierRef2.getEnclosureList();
						}
						if (param.isSave == 2) {
							// 详情
							_this.supplierRef.getEnclosureList();
						}
					} else {
						_this.store.supplierTwoItemList = Object.assign([]);
						_this.store.supplierTwoItem = Object.assign({});
						_this.store.suState = false;
					}
				}
			});
		};

		_this.getConfirmSupplierSupplementByMainId = function (param) {
			_this.store.getConfirmSupplierSupplementByMainId().then(function (res) {
				// 主合同的数据
				var obj = { title: '主合同', content: param, closable: false, key: "main" };
				var addObj = { title: '+', content: ' ', key: 'add', closable: false };
				var newArray = res.length > 0 ? res.map(function (item, index) {
					var activeKey = index + 1;
					return { title: '补充协议-' + activeKey, content: item, key: activeKey.toString(), closable: false };
				}) : [];
				var array = [obj].concat(_toConsumableArray(newArray), [addObj]); // 拼接数据
				_this.newTabIndex = res.length > 0 ? res.length : 1;
				_this.setState({
					panes: array
				});
			});
		};

		_this.autosaveData = function () {
			var mainObj = _this.state.mainObj;

			_this.getConfirmSupplierSupplementByMainId(mainObj);
			_this.store.supplierTwoItem = Object.assign({}, mainObj);
			_this.store.suState = mainObj.isSave == 2 ? true : false;
			_this.setState({
				activeKey: "main"
			});
		};

		_this.handleSelectedDaily = function (item, index) {
			var param = item;
			var stakeholderList = JSON.parse(JSON.stringify(_this.store.supplierTwoItemList));
			var dataArray = stakeholderList.map(function (item) {
				return Object.assign(item, { selected: false });
			});
			var dindex = dataArray.findIndex(function (item) {
				return item.id == param.id;
			});
			dataArray.splice(dindex, 1, Object.assign(param, { selected: true }));
			_this.store.supplierTwoItemList = Object.assign([], dataArray);
			_this.store.supplierTwoItem = Object.assign({}, param);
			_this.store.suState = param.isSave == 2 ? true : false;

			// 补充协议
			_this.setState({
				mainObj: param,
				activeKey: "main"
			});
			_this.store.mainId = param.id;
			_this.getConfirmSupplierSupplementByMainId(param);

			// 编辑重新刷新数据
			if (param.isSave != 2) {
				_this.supplierRef2.init();
				_this.supplierRef2.getEnclosureList();
			}
			if (param.isSave == 2) {
				// 详情
				_this.supplierRef.getEnclosureList();
			}
		};

		_this.nextStep = function () {
			/*let stakeholderList = JSON.parse(JSON.stringify(this.store.supplierTwoItemList));
   let isFlag = stakeholderList.some(function(computer){
   	return computer.isSave != 2;
   });
   if(isFlag) {
   	message.warn("请先填写完整该阶段的任务信息");
   	return false;
   }*/
			var _this$props = _this.props,
			    currentStep = _this$props.currentStep,
			    switchSteps = _this$props.switchSteps;

			switchSteps(currentStep + 1);
			//this.props.overCurrentStageTask();
		};

		_this.transColor = function (type) {
			switch (type) {
				case 1:
					return "#F59A23";
					break;
				case 2:
					return "rgba(26, 188, 156, 1)";
					break;
				default:
					return "#555555";
					break;
			}
		};

		_this.updateData = function () {
			_this.supplierRef2.init();
			_this.supplierRef2.getEnclosureList();
		};

		_this.handleChangeTabs = function (key) {
			_this.setState({ activeKey: key });
		};

		_this.store = _this.props.DeliveryStore;
		_this.newTabIndex = 1;
		_this.state = {
			activeKey: "main",
			panes: [],
			mainObj: {} //记录主合同的信息
		};
		return _this;
	}

	_createClass(TwoItem, [{
		key: 'componentDidMount',
		value: function componentDidMount() {
			this.getConfirmSupplierTwoItemList();
			this.store.getCompanyList();
		}

		// 初始化数据


		// 返回补充协议列表


		// 删除补充协议后同步数据


		// 下一步

	}, {
		key: 'render',
		value: function render() {
			var _this2 = this;

			var _store = this.store,
			    supplierTwoItemList = _store.supplierTwoItemList,
			    suState = _store.suState;
			var activeKey = this.state.activeKey;

			var obj = { 0: "待启动", 1: "进行中", 2: "已完成" };

			return _react2.default.createElement(
				'div',
				{ style: { marginLeft: "-30px", marginRight: "-30px" } },
				_react2.default.createElement(
					'div',
					{ className: "fl",
						style: { paddingRight: '0', width: '230px', borderRight: '1px solid #EBEBEB' } },
					_react2.default.createElement(
						_reactCustomScrollbars.Scrollbars,
						{
							style: {
								height: "calc(100vh - 230px)"
							},
							autoHide: true },
						mobx.toJS(supplierTwoItemList).length === 0 ? _react2.default.createElement(
							'div',
							{ className: 'empty_daily_list' },
							_react2.default.createElement('img', { src: './images/delivery/u2030.png', style: { width: '191px', height: '187px' } })
						) : mobx.toJS(supplierTwoItemList).map(function (item, index) {
							return _react2.default.createElement(
								'div',
								{ onClick: function onClick() {
										_this2.handleSelectedDaily(item, index);
									},
									className: item.selected == true ? "daily_item daily_active_item" : "daily_item" },
								_react2.default.createElement(
									'div',
									{ className: 'label_info' },
									_react2.default.createElement(
										'div',
										null,
										_react2.default.createElement(
											'div',
											{ className: 'title' },
											item.supplierName
										),
										_react2.default.createElement(
											'div',
											{ className: 'desc_info mt15' },
											'\u7B7E\u7EA6\u65F6\u95F4\uFF1A',
											item.contractAwardTime !== 0 && item.contractAwardTime !== null ? (0, _moment2.default)(item.contractAwardTime).format('YYYY.MM.DD') : '暂无'
										)
									)
								),
								_react2.default.createElement(
									'div',
									{ className: 'author_progress', style: { "paddingLeft": "10px" } },
									_react2.default.createElement(
										'div',
										{ className: 'author_date' },
										'\u72B6\u6001:',
										_react2.default.createElement(
											'span',
											{ style: {
													color: _this2.transColor(item.state),
													marginLeft: "8px"
												} },
											obj[item.state]
										)
									)
								),
								_react2.default.createElement(
									'div',
									{ className: 'author_progress', style: { "paddingLeft": "10px" } },
									_react2.default.createElement(
										'div',
										{ className: 'author_date' },
										'\u7C7B\u578B:',
										_react2.default.createElement(
											'span',
											{ style: {
													marginLeft: "8px"
												} },
											item.supplierType
										)
									)
								)
							);
						})
					)
				),
				_react2.default.createElement(
					'div',
					{ className: "fl",
						style: {
							width: 'calc(100% - 240px)',
							overflowX: "hidden",
							padding: '0 15px 30px 0'
						} },
					mobx.toJS(supplierTwoItemList).length === 0 ? _react2.default.createElement(
						'div',
						{ className: 'empty_daily_content', style: {} },
						_react2.default.createElement('img', { src: './images/delivery/u2033.png ', style: { width: '336px', height: '336px' } })
					) : null,
					_react2.default.createElement(
						_antd.Tabs,
						{
							hideAdd: true,
							tabBarGutter: 10,
							className: 'cc-tabs mt20',
							onChange: this.onChange,
							activeKey: activeKey,
							type: 'editable-card',
							onEdit: this.onEdit
						},
						this.state.panes.map(function (pane) {
							return _react2.default.createElement(TabPane, { tab: pane.title, key: pane.key, closable: pane.closable });
						})
					),
					mobx.toJS(supplierTwoItemList).length != 0 && _react2.default.createElement(_SupplierView2.default, {
						onRef: function onRef(input) {
							_this2.supplierRef = input;
						},
						updateData: this.updateData,
						autosaveData: this.autosaveData,
						store: this.store,
						reStartHandover: this.props.reStartHandover }),
					mobx.toJS(supplierTwoItemList).length != 0 && _react2.default.createElement(_SupplierEdit2.default, { store: this.store,
						onRef: function onRef(input) {
							_this2.supplierRef2 = input;
						},
						autosaveData: this.autosaveData,
						nextStep: this.props.overCurrentStageTask })
				)
			);
		}
	}]);

	return TwoItem;
}(_react2.default.Component)) || _class) || _class) || _class);
exports.default = TwoItem;

/***/ }),

/***/ 2076:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(20);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _VerticalSpliter = __webpack_require__(2082);

var _VerticalSpliter2 = _interopRequireDefault(_VerticalSpliter);

var _Headers = __webpack_require__(2078);

var _Headers2 = _interopRequireDefault(_Headers);

var _DataViewPort = __webpack_require__(2084);

var _DataViewPort2 = _interopRequireDefault(_DataViewPort);

var _LinkViewPort = __webpack_require__(2080);

var _LinkViewPort2 = _interopRequireDefault(_LinkViewPort);

var _TaskList = __webpack_require__(2081);

var _TaskList2 = _interopRequireDefault(_TaskList);

var _Registry = __webpack_require__(1884);

var _Registry2 = _interopRequireDefault(_Registry);

var _Const = __webpack_require__(1619);

var _DataController = __webpack_require__(2085);

var _DataController2 = _interopRequireDefault(_DataController);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

var _DateHelper = __webpack_require__(1585);

var _DateHelper2 = _interopRequireDefault(_DateHelper);

__webpack_require__(2175);

var _antd = __webpack_require__(17);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var TimeLine = function (_Component) {
  _inherits(TimeLine, _Component);

  function TimeLine(props) {
    _classCallCheck(this, TimeLine);

    var _this = _possibleConstructorReturn(this, (TimeLine.__proto__ || Object.getPrototypeOf(TimeLine)).call(this, props));

    _this.onSize = function (size) {
      //If size has changed
      _this.calculateVerticalScrollVariables(size);
      if (!_this.initialise) {
        _this.dc.initialise(_this.state.scrollLeft + _this.state.nowposition, _this.state.scrollLeft + _this.state.nowposition + size.width, _this.state.nowposition, _this.state.dayWidth);
        _this.initialise = true;
      }
      _this.setStartEnd();
      var newNumVisibleRows = Math.ceil(size.height / _this.props.itemheight);
      var newNumVisibleDays = _this.calcNumVisibleDays(size);
      var rowInfo = _this.calculateStartEndRows(newNumVisibleRows, _this.props.data, _this.state.scrollTop);
      _this.setState({
        numVisibleRows: newNumVisibleRows,
        numVisibleDays: newNumVisibleDays,
        startRow: rowInfo.start,
        endRow: rowInfo.end,
        size: size
      });
    };

    _this.verticalChange = function (scrollTop) {
      if (scrollTop == _this.state.scrollTop) return;
      //Check if we have scrolling rows
      var rowInfo = _this.calculateStartEndRows(_this.state.numVisibleRows, _this.props.data, scrollTop);
      if (rowInfo.start !== _this.state.start) {
        _this.setState({
          scrollTop: scrollTop,
          startRow: rowInfo.start,
          endRow: rowInfo.end
        });
      }
    };

    _this.calculateStartEndRows = function (numVisibleRows, data, scrollTop) {
      var new_start = Math.trunc(scrollTop / _this.props.itemheight);
      var new_end = new_start + numVisibleRows >= data.length ? data.length : new_start + numVisibleRows;
      return { start: new_start, end: new_end };
    };

    _this.setStartEnd = function () {
      _this.dc.setStartEnd(_this.state.scrollLeft, _this.state.scrollLeft + _this.state.size.width, _this.state.nowposition, _this.state.dayWidth);
    };

    _this.horizontalChange = function (newScrollLeft) {
      var new_nowposition = _this.state.nowposition;
      var new_left = -1;
      var headerData = _this.state.headerData;
      var new_startRow = _this.state.startRow;
      var new_endRow = _this.state.endRow;

      //Calculating if we need to roll up the scroll
      if (newScrollLeft > _this.pxToScroll) {
        //ContenLegnth-viewportLengt
        new_nowposition = _this.state.nowposition - _this.pxToScroll;
        new_left = 0;
      } else {
        if (newScrollLeft <= 0) {
          //ContenLegnth-viewportLengt
          new_nowposition = _this.state.nowposition + _this.pxToScroll;
          new_left = _this.pxToScroll;
        } else {
          new_left = newScrollLeft;
        }
      }

      //Get the day of the left position
      var currentIndx = Math.trunc((newScrollLeft - _this.state.nowposition) / _this.state.dayWidth);

      //Calculate rows to render
      new_startRow = Math.trunc(_this.state.scrollTop / _this.props.itemheight);
      new_endRow = new_startRow + _this.state.numVisibleRows >= _this.props.data.length ? _this.props.data.length - 1 : new_startRow + _this.state.numVisibleRows;
      //If we need updates then change the state and the scroll position
      //Got you
      _this.setStartEnd();
      _this.setState({
        currentday: currentIndx,
        nowposition: new_nowposition,
        headerData: headerData,
        scrollLeft: new_left,
        startRow: new_startRow,
        endRow: new_endRow
      });
    };

    _this.calculateVerticalScrollVariables = function (size) {
      //The pixel to scroll verically is equal to the pecentage of what the viewport represent in the context multiply by the context width
      _this.pxToScroll = (1 - size.width / _Const.DATA_CONTAINER_WIDTH) * _Const.DATA_CONTAINER_WIDTH - 1;
    };

    _this.onHorizonChange = function (lowerLimit, upLimit) {
      if (_this.props.onHorizonChange) _this.props.onHorizonChange(lowerLimit, upLimit);
    };

    _this.doMouseDown = function (e) {
      _this.dragging = true;
      _this.draggingPosition = e.clientX;
    };

    _this.doMouseMove = function (e) {
      if (_this.dragging) {
        var delta = _this.draggingPosition - e.clientX;

        if (delta !== 0) {
          _this.draggingPosition = e.clientX;
          _this.horizontalChange(_this.state.scrollLeft + delta);
        }
      }
    };

    _this.doMouseUp = function (e) {
      _this.dragging = false;
    };

    _this.doMouseLeave = function (e) {
      // if (!e.relatedTarget.nodeName)
      //     this.dragging=false;
      _this.dragging = false;
    };

    _this.doTouchStart = function (e) {
      _this.dragging = true;
      _this.draggingPosition = e.touches[0].clientX;
    };

    _this.doTouchEnd = function (e) {
      _this.dragging = false;
    };

    _this.doTouchMove = function (e) {
      if (_this.dragging) {
        var delta = _this.draggingPosition - e.touches[0].clientX;

        if (delta !== 0) {
          _this.draggingPosition = e.touches[0].clientX;
          _this.horizontalChange(_this.state.scrollLeft + delta);
        }
      }
    };

    _this.doTouchCancel = function (e) {
      _this.dragging = false;
    };

    _this.doMouseLeave = function (e) {
      // if (!e.relatedTarget.nodeName)
      //     this.dragging=false;
      _this.dragging = false;
    };

    _this.onTaskListSizing = function (delta) {
      _this.setState(function (prevState) {
        var result = _extends({}, prevState);
        result.sideStyle = { width: result.sideStyle.width - delta };
        return result;
      });
    };

    _this.onSelectItem = function (item) {
      if (_this.props.onSelectItem && item != _this.props.selectedItem) _this.props.onSelectItem(item);
    };

    _this.onStartCreateLink = function (task, position) {
      console.log('Start Link ' + task);
      _this.setState({
        interactiveMode: true,
        taskToCreate: { task: task, position: position }
      });
    };

    _this.onFinishCreateLink = function (task, position) {
      console.log('End Link ' + task);
      if (_this.props.onCreateLink && task && _this.state.taskToCreate && _this.state.taskToCreate.task.id != task.id) {
        _this.props.onCreateLink({
          start: _this.state.taskToCreate,
          end: { task: task, position: position }
        });
      }
      _this.setState({
        interactiveMode: false,
        taskToCreate: null
      });
    };

    _this.onTaskChanging = function (changingTask) {
      _this.setState({
        changingTask: changingTask
      });
    };

    _this.calcNumVisibleDays = function (size) {
      return Math.ceil(size.width / _this.state.dayWidth) + _Const.BUFFER_DAYS;
    };

    _this.checkNeeeData = function () {
      if (_this.props.data != _this.state.data) {
        _this.state.data = _this.props.data;
        var rowInfo = _this.calculateStartEndRows(_this.state.numVisibleRows, _this.props.data, _this.state.scrollTop);
        _this.state.startRow = rowInfo.start;
        _this.state.endRow = rowInfo.end;
        _Registry2.default.registerData(_this.state.data);
      }
      if (_this.props.links != _this.state.links) {
        _this.state.links = _this.props.links;
        _Registry2.default.registerLinks(_this.props.links);
      }
    };

    _this.dragging = false;
    _this.draggingPosition = 0;
    _this.dc = new _DataController2.default();
    _this.dc.onHorizonChange = _this.onHorizonChange;
    _this.initialise = false;
    //This variable define the number of pixels the viewport can scroll till arrive to the end of the context
    _this.pxToScroll = 1900;

    var dayWidth = _this.getDayWidth(_this.props.mode);
    _Config2.default.load(_this.props.config);
    //Initialising state
    _this.state = {
      currentday: 0, //Day that is in the 0px horizontal
      //nowposition is the reference position, this variable support the infinit scrolling by accumulatning scroll times and redefining the 0 position
      // if we accumulat 2 scroll to the left nowposition will be 2* DATA_CONTAINER_WIDTH
      nowposition: _this.props.nowposition ? _this.props.nowposition : 0,
      startRow: 0, //
      endRow: 10,
      sideStyle: { width: 200 },
      scrollLeft: 0,
      scrollTop: 0,
      numVisibleRows: 40,
      numVisibleDays: 60,
      dayWidth: dayWidth,
      interactiveMode: false,
      taskToCreate: null,
      links: [],
      mode: _this.props.mode ? _this.props.mode : _Const.VIEW_MODE_MONTH,
      size: { width: 1, height: 1 },
      changingTask: null
    };
    return _this;
  }

  ////////////////////
  //     ON MODE    //
  ////////////////////

  _createClass(TimeLine, [{
    key: 'getDayWidth',
    value: function getDayWidth(mode) {
      switch (mode) {
        case _Const.VIEW_MODE_DAY:
          return _Const.DAY_DAY_MODE;
        case _Const.VIEW_MODE_WEEK:
          return _Const.DAY_WEEK_MODE;
        case _Const.VIEW_MODE_MONTH:
          return _Const.DAY_MONTH_MODE;
        case _Const.VIEW_MODE_YEAR:
          return _Const.DAY_YEAR_MODE;
        default:
          return _Const.DAY_MONTH_MODE;
      }
    }

    ////////////////////
    //     ON SIZE    //
    ////////////////////

    /////////////////////////
    //   VIEWPORT CHANGES  //
    /////////////////////////

    /////////////////////
    //   MOUSE EVENTS  //
    /////////////////////

    //Child communicating states


    /////////////////////
    //   ITEMS EVENTS  //
    /////////////////////

  }, {
    key: 'checkMode',
    value: function checkMode() {
      if (this.props.mode != this.state.mode && this.props.mode) {
        this.state.mode = this.props.mode;
        var newDayWidth = this.getDayWidth(this.state.mode);
        this.state.dayWidth = newDayWidth;
        this.state.numVisibleDays = this.calcNumVisibleDays(this.state.size);
        //to recalculate the now position we have to see how mwny scroll has happen
        //to do so we calculate the diff of days between current day and now
        //And we calculate how many times we have scroll
        var scrollTime = Math.ceil(-this.state.currentday * this.state.dayWidth / this.pxToScroll);
        //We readjust now postion to the new number of scrolls
        this.state.nowposition = scrollTime * this.pxToScroll;
        var scrollLeft = (this.state.currentday * this.state.dayWidth + this.state.nowposition) % this.pxToScroll;
        // we recalculate the new scroll Left value
        this.state.scrollLeft = scrollLeft;
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this,
          _React$createElement;

      this.checkMode();
      this.checkNeeeData();
      // console.log('On render')
      if (!this.state.size) {
        console.log(this.state);
      }
      return _react2.default.createElement(
        'div',
        { className: 'timeLine' },
        _react2.default.createElement(
          'div',
          { className: 'timeLine-side-main', style: this.state.sideStyle },
          _react2.default.createElement(_TaskList2.default, {
            parentContainer: this.props.parentContainer,
            ref: 'taskViewPort',
            itemheight: this.props.itemheight,
            startRow: this.state.startRow,
            endRow: this.state.endRow,
            data: this.props.data,
            selectedItem: this.props.selectedItem,
            onSelectItem: this.onSelectItem,
            onUpdateTask: this.props.onUpdateTask,
            onScroll: this.verticalChange,
            nonEditable: this.props.nonEditableName
          })
        ),
        _react2.default.createElement(
          'div',
          { className: 'timeLine-main' },
          _react2.default.createElement(
            _antd.Affix,
            { target: function target() {
                return _this2.props.parentContainer;
              } },
            _react2.default.createElement(_Headers2.default, {
              headerData: this.state.headerData,
              numVisibleDays: this.state.numVisibleDays,
              currentday: this.state.currentday,
              nowposition: this.state.nowposition,
              dayWidth: this.state.dayWidth,
              mode: this.state.mode,
              scrollLeft: this.state.scrollLeft
            })
          ),
          _react2.default.createElement(_DataViewPort2.default, {
            ref: 'dataViewPort',
            scrollLeft: this.state.scrollLeft,
            scrollTop: this.state.scrollTop,
            itemheight: this.props.itemheight,
            nowposition: this.state.nowposition,
            startRow: this.state.startRow,
            endRow: this.state.endRow,
            data: this.props.data,
            selectedItem: this.props.selectedItem,
            dayWidth: this.state.dayWidth,
            onScroll: this.scrollData,
            onMouseDown: this.doMouseDown,
            onMouseMove: this.doMouseMove,
            onMouseUp: this.doMouseUp,
            onMouseLeave: this.doMouseLeave,
            onTouchStart: this.doTouchStart,
            onTouchMove: this.doTouchMove,
            onTouchEnd: this.doTouchEnd,
            onTouchCancel: this.doTouchCancel,
            onSelectItem: this.onSelectItem,
            onUpdateTask: this.props.onUpdateTask,
            onTaskChanging: this.onTaskChanging,
            onStartCreateLink: this.onStartCreateLink,
            onFinishCreateLink: this.onFinishCreateLink,
            boundaries: {
              lower: this.state.scrollLeft,
              upper: this.state.scrollLeft + this.state.size.width
            },
            onSize: this.onSize
          }),
          _react2.default.createElement(_LinkViewPort2.default, (_React$createElement = {
            scrollLeft: this.state.scrollLeft,
            scrollTop: this.state.scrollTop,
            startRow: this.state.startRow,
            endRow: this.state.endRow,
            data: this.props.data,
            nowposition: this.state.nowposition,
            dayWidth: this.state.dayWidth,
            interactiveMode: this.state.interactiveMode,
            taskToCreate: this.state.taskToCreate,
            onFinishCreateLink: this.onFinishCreateLink,
            changingTask: this.state.changingTask,
            selectedItem: this.props.selectedItem,
            onSelectItem: this.onSelectItem,
            itemheight: this.props.itemheight
          }, _defineProperty(_React$createElement, 'onSelectItem', this.onSelectItem), _defineProperty(_React$createElement, 'links', this.props.links), _React$createElement))
        )
      );
    }
  }]);

  return TimeLine;
}(_react.Component);

TimeLine.propTypes = {
  itemheight: _propTypes2.default.number.isRequired,
  dayWidth: _propTypes2.default.number.isRequired,
  nonEditableName: _propTypes2.default.bool
};

TimeLine.defaultProps = {
  itemheight: 20,
  dayWidth: 24,
  nonEditableName: false
};

exports.default = TimeLine;

/***/ }),

/***/ 2077:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ContentEditable = function (_Component) {
  _inherits(ContentEditable, _Component);

  function ContentEditable(props) {
    _classCallCheck(this, ContentEditable);

    var _this = _possibleConstructorReturn(this, (ContentEditable.__proto__ || Object.getPrototypeOf(ContentEditable)).call(this, props));

    _this.onFocus = function () {
      _this.setState({ editing: true });
    };

    _this.onBlur = function () {
      _this.finishEditing();
    };

    _this.handleKey = function (e) {
      var keyCode = e.keyCode || e.which;
      if (keyCode === 13) {
        _this.finishEditing();
      }
    };

    _this.finishEditing = function () {
      _this.isFocus = false;
      _this.setState({ editing: false });
      if (_this.props.onChange) _this.props.onChange(_this.state.value);
    };

    _this.handleChange = function (e) {
      _this.setState({ value: e.target.value });
    };

    _this.renderDiv = function () {
      return _react2.default.createElement(
        'div',
        { tabIndex: _this.props.index, onClick: _this.onFocus, onFocus: _this.onFocus, style: { width: '100%' } },
        ' ',
        _this.state.value
      );
    };

    _this.renderEditor = function () {
      return _react2.default.createElement('input', {
        ref: 'textInput',
        onBlur: _this.onBlur,
        style: { width: '100%', outlineColor: 'black', outlineStyle: 'oinset' },
        type: 'text',
        name: 'name',
        value: _this.state.value,
        onKeyUp: _this.handleKey,
        onChange: _this.handleChange
      });
    };

    _this.isFocus = false;
    _this.state = {
      editing: false,
      value: _this.props.value
    };
    return _this;
  }

  _createClass(ContentEditable, [{
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevProps, prevState) {
      if (this.refs.textInput && !this.isFocus) {
        this.refs.textInput.focus();
        this.isFocus = true;
      }
    }
  }, {
    key: 'shouldComponentUpdate',
    value: function shouldComponentUpdate(nextProps, nextState) {
      if (nextProps.value != this.props.value) {
        this.state.value = nextProps.value;
      }
      return true;
    }
  }, {
    key: 'render',
    value: function render() {
      return this.state.editing ? this.renderEditor() : this.renderDiv();
    }
  }]);

  return ContentEditable;
}(_react.Component);

exports.default = ContentEditable;

/***/ }),

/***/ 2078:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.HeaderItem = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _moment = __webpack_require__(35);

var _moment2 = _interopRequireDefault(_moment);

var _Const = __webpack_require__(1619);

var _Const2 = __webpack_require__(1619);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

var _DateHelper = __webpack_require__(1585);

var _DateHelper2 = _interopRequireDefault(_DateHelper);

__webpack_require__(2176);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var HeaderItem = exports.HeaderItem = function (_PureComponent) {
  _inherits(HeaderItem, _PureComponent);

  function HeaderItem(props) {
    _classCallCheck(this, HeaderItem);

    return _possibleConstructorReturn(this, (HeaderItem.__proto__ || Object.getPrototypeOf(HeaderItem)).call(this, props));
  }

  _createClass(HeaderItem, [{
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        {
          style: {
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            borderLeft: 'solid 1px white',
            position: 'absolute',
            height: 20,
            left: this.props.left,
            width: this.props.width
          }
        },
        _react2.default.createElement(
          'div',
          null,
          this.props.label
        )
      );
    }
  }]);

  return HeaderItem;
}(_react.PureComponent);

var Header = function (_PureComponent2) {
  _inherits(Header, _PureComponent2);

  function Header(props) {
    _classCallCheck(this, Header);

    var _this2 = _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).call(this, props));

    _this2.getStartDate = function (date, mode) {
      var year = null;
      switch (mode) {
        case 'year':
          year = date.year();
          return (0, _moment2.default)([year, 0, 1]);
        case 'month':
          year = date.year();
          var month = date.month();
          return (0, _moment2.default)([year, month, 1]);
        case 'week':
          return date.subtract(date.day(), 'days');
        default:
          return date;
      }
    };

    _this2.renderTime = function (left, width, mode, key) {
      var result = [];
      var hourWidth = width / 24;
      var iterLeft = 0;
      for (var i = 0; i < 24; i++) {
        result.push(_react2.default.createElement(HeaderItem, { key: i, left: iterLeft, width: hourWidth, label: mode == 'shorttime' ? i : i + ':00' }));
        iterLeft = iterLeft + hourWidth;
      }
      return _react2.default.createElement(
        'div',
        { key: key, style: { position: 'absolute', height: 20, left: left, width: width } },
        ' ',
        result
      );
    };

    _this2.renderHeaderRows = function (top, middle, bottom) {
      var result = { top: [], middle: [], bottom: [] };
      var lastLeft = {};
      var currentTop = '';
      var currentMiddle = '';
      var currentBottom = '';
      var currentDate = null;
      var box = null;

      var start = _this2.props.currentday;
      var end = _this2.props.currentday + _this2.props.numVisibleDays;

      for (var i = start - _Const.BUFFER_DAYS; i < end + _Const.BUFFER_DAYS; i++) {
        //The unit of iteration is day
        currentDate = (0, _moment2.default)().add(i, 'days');
        if (currentTop != currentDate.format(_this2.getFormat(top, 'top'))) {
          currentTop = currentDate.format(_this2.getFormat(top, 'top'));
          box = _this2.getBox(currentDate, top, lastLeft.top);
          lastLeft.top = box.left + box.width;
          result.top.push(_react2.default.createElement(HeaderItem, { key: i, left: box.left, width: box.width, label: currentTop }));
        }

        if (currentMiddle != currentDate.format(_this2.getFormat(middle))) {
          currentMiddle = currentDate.format(_this2.getFormat(middle));
          box = _this2.getBox(currentDate, middle, lastLeft.middle);
          lastLeft.middle = box.left + box.width;
          result.middle.push(_react2.default.createElement(HeaderItem, { key: i, left: box.left, width: box.width, label: currentMiddle }));
        }

        if (currentBottom != currentDate.format(_this2.getFormat(bottom))) {
          currentBottom = currentDate.format(_this2.getFormat(bottom));
          box = _this2.getBox(currentDate, bottom, lastLeft.bottom);
          lastLeft.bottom = box.left + box.width;
          if (bottom == 'shorttime' || bottom == 'fulltime') {
            result.bottom.push(_this2.renderTime(box.left, box.width, bottom, i));
          } else {
            result.bottom.push(_react2.default.createElement(HeaderItem, { key: i, left: box.left, width: box.width, label: currentBottom }));
          }
        }
      }

      return _react2.default.createElement(
        'div',
        { className: 'timeLine-main-header-container', style: { width: _Const.DATA_CONTAINER_WIDTH, maxWidth: _Const.DATA_CONTAINER_WIDTH } },
        _react2.default.createElement(
          'div',
          { className: 'header-top', style: _extends({}, _Config2.default.values.header.top.style) },
          result.top
        ),
        _react2.default.createElement(
          'div',
          { className: 'header-middle', style: _extends({}, _Config2.default.values.header.middle.style) },
          result.middle
        ),
        _react2.default.createElement(
          'div',
          { className: 'header-bottom', style: _extends({}, _Config2.default.values.header.bottom.style) },
          result.bottom
        )
      );
    };

    _this2.renderHeader = function () {
      switch (_this2.props.mode) {
        case _Const2.VIEW_MODE_DAY:
          return _this2.renderHeaderRows('week', 'dayweek', 'fulltime');
        case _Const2.VIEW_MODE_WEEK:
          return _this2.renderHeaderRows('week', 'dayweek', 'shorttime');
        case _Const2.VIEW_MODE_MONTH:
          return _this2.renderHeaderRows('month', 'dayweek', 'daymonth');
        case _Const2.VIEW_MODE_YEAR:
          return _this2.renderHeaderRows('year', 'month', 'week');
      }
    };

    _this2.setBoundaries = function () {
      _this2.start = _this2.props.currentday - _Const.BUFFER_DAYS;
      _this2.end = _this2.props.currentday + _this2.props.numVisibleDays + _Const.BUFFER_DAYS;
    };

    _this2.needToRender = function () {
      return _this2.props.currentday < _this2.start || _this2.props.currentday + _this2.props.numVisibleDays > _this2.end;
    };

    _this2.setBoundaries();
    return _this2;
  }

  _createClass(Header, [{
    key: 'getFormat',
    value: function getFormat(mode, position) {
      switch (mode) {
        case 'year':
          return 'YYYY';
        case 'month':
          if (position == 'top') return 'MMMM YYYY';else return 'MMMM';
        case 'week':
          if (position == 'top') return 'ww MMMM YYYY';else return 'ww';
        case 'dayweek':
          return 'dd';
        case 'daymonth':
          return 'D';
      }
    }
  }, {
    key: 'getModeIncrement',
    value: function getModeIncrement(date, mode) {
      switch (mode) {
        case 'year':
          return _DateHelper2.default.daysInYear(date.year());
        case 'month':
          return date.daysInMonth();
        case 'week':
          return 7;
        default:
          return 1;
      }
    }
  }, {
    key: 'getBox',
    value: function getBox(date, mode, lastLeft) {
      var increment = this.getModeIncrement(date, mode) * this.props.dayWidth;
      if (!lastLeft) {
        var starDate = this.getStartDate(date, mode);
        starDate = starDate.startOf('day');
        var now = (0, _moment2.default)().startOf('day');
        var daysInBetween = starDate.diff(now, 'days');
        lastLeft = _DateHelper2.default.dayToPosition(daysInBetween, this.props.nowposition, this.props.dayWidth);
      }

      return { left: lastLeft, width: increment };
    }
  }, {
    key: 'render',
    value: function render() {
      if (this.refs.Header) this.refs.Header.scrollLeft = this.props.scrollLeft;
      //Check boundaries to see if wee need to recalcualte header
      // if (this.needToRender()|| !this.cache){
      //     this.cache=this.renderHeader();
      //     this.setBoundaries();
      // }
      return _react2.default.createElement(
        'div',
        { id: 'timeline-header', ref: 'Header', className: 'timeLine-main-header-viewPort' },
        this.renderHeader()
      );
    }
  }]);

  return Header;
}(_react.PureComponent);

exports.default = Header;

/***/ }),

/***/ 2079:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _Link = __webpack_require__(1883);

var _Link2 = _interopRequireDefault(_Link);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CreateLink = function (_Component) {
  _inherits(CreateLink, _Component);

  function CreateLink(props) {
    _classCallCheck(this, CreateLink);

    var _this = _possibleConstructorReturn(this, (CreateLink.__proto__ || Object.getPrototypeOf(CreateLink)).call(this, props));

    _this.doMouseMove = function (e) {
      if (!_this.init) {
        _this.lastX = e.clientX;
        _this.lastY = e.clientY;
        _this.init = true;
      }
      var newX = _this.state.x + (e.clientX - _this.lastX);
      var newY = _this.state.y + (e.clientY - _this.lastY);
      _this.lastX = e.clientX;
      _this.lastY = e.clientY;
      _this.setState({ x: newX, y: newY });
    };

    _this.doMouseUp = function (e) {
      _this.props.onFinishCreateLink();
    };

    _this.state = { x: _this.props.start.x, y: _this.props.start.y };
    _this.init = false;
    _this.lastX = -1;
    _this.lastY = -1;
    return _this;
  }

  _createClass(CreateLink, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      document.addEventListener('mousemove', this.doMouseMove);
      document.addEventListener('mouseup', this.doMouseUp);
    }
  }, {
    key: 'componentWillUnmount',
    value: function componentWillUnmount() {
      document.removeEventListener('mousemove', this.doMouseMove);
      document.removeEventListener('mouseup', this.doMouseUp);
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(_Link2.default, { key: -1, start: { x: this.props.start.x, y: this.props.start.y }, end: { x: this.state.x, y: this.state.y } });
    }
  }]);

  return CreateLink;
}(_react.Component);

exports.default = CreateLink;

/***/ }),

/***/ 2080:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _Registry = __webpack_require__(1884);

var _Registry2 = _interopRequireDefault(_Registry);

var _Link = __webpack_require__(1883);

var _Link2 = _interopRequireDefault(_Link);

var _CreateLink = __webpack_require__(2079);

var _CreateLink2 = _interopRequireDefault(_CreateLink);

var _DateHelper = __webpack_require__(1585);

var _DateHelper2 = _interopRequireDefault(_DateHelper);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LinkViewPort = function (_Component) {
  _inherits(LinkViewPort, _Component);

  function LinkViewPort(props) {
    _classCallCheck(this, LinkViewPort);

    var _this = _possibleConstructorReturn(this, (LinkViewPort.__proto__ || Object.getPrototypeOf(LinkViewPort)).call(this, props));

    _this.getItemPosition = function (index, date) {
      var x = _DateHelper2.default.dateToPixel(date, 0, _this.props.dayWidth);
      var y = index * _this.props.itemheight + _this.props.itemheight / 2;
      return { x: x, y: y };
    };

    _this.renderCreateLink = function () {
      if (_this.props.interactiveMode) {
        var record = _Registry2.default.getTask(_this.props.taskToCreate.task.id);
        var position = _this.getItemPosition(record.index, record.item.end);
        return _react2.default.createElement(_CreateLink2.default, { start: position, onFinishCreateLink: _this.props.onFinishCreateLink });
      }
    };

    _this.renderChangingTaskLinks = function () {
      if (_this.props.changingTask != _this.state.changingTask) {
        _this.state.changingTask = _this.props.changingTask;
        //Get Links from task
        var links = _Registry2.default.getLinks(_this.state.changingTask.item.id);
        if (!links) return;
        var item = null;
        var startItem = null;
        var endItem = null;
        var startPosition = {};
        var endPosition = {};
        for (var i = 0; i < links.length; i++) {
          item = links[i];
          startItem = _Registry2.default.getTask(item.link.start);
          if (!startItem) continue;
          endItem = _Registry2.default.getTask(item.link.end);
          if (!endItem) continue;
          startPosition = _this.getItemPosition(startItem.index, startItem.item.end);
          if (_this.state.changingTask.item.id == item.link.start) startPosition.x = _this.state.changingTask.position.end;
          endPosition = _this.getItemPosition(endItem.index, endItem.item.start);
          if (_this.state.changingTask.item.id == item.link.end) endPosition.x = _this.state.changingTask.position.start;

          _this.cache[item.index] = _react2.default.createElement(_Link2.default, {
            key: -i - 1,
            item: item,
            start: { x: startPosition.x, y: startPosition.y },
            end: { x: endPosition.x, y: endPosition.y },
            isSelected: _this.props.selectedItem == item,
            onSelectItem: _this.props.onSelectItem
          });
          _this.cache = [].concat(_toConsumableArray(_this.cache));
        }
      }
    };

    _this.cache = [];
    _this.state = { links: [], data: [], selectedItem: null };
    return _this;
  }

  _createClass(LinkViewPort, [{
    key: 'renderLink',
    value: function renderLink(startItem, endItem, link, key) {
      var startPosition = this.getItemPosition(startItem.index, startItem.item.end);
      var endPosition = this.getItemPosition(endItem.index, endItem.item.start);
      return _react2.default.createElement(_Link2.default, {
        key: key,
        item: link,
        start: { x: startPosition.x, y: startPosition.y },
        end: { x: endPosition.x, y: endPosition.y },
        isSelected: this.props.selectedItem == link,
        onSelectItem: this.props.onSelectItem
      });
    }
  }, {
    key: 'renderLinks',
    value: function renderLinks() {
      this.cache = [];
      var renderLinks = {};
      var startItem = void 0,
          endItem = {};
      if (this.state.data.length == 0) return;
      for (var i = 0; i < this.state.links.length; i++) {
        var link = this.state.links[i];
        if (!link) if (renderLinks[link.id]) continue;
        startItem = _Registry2.default.getTask(link.start);
        if (!startItem) {
          this.cache.push(null);
          continue;
        }
        endItem = _Registry2.default.getTask(link.end);
        if (!endItem) {
          this.cache.push(null);
          continue;
        }

        this.cache.push(this.renderLink(startItem, endItem, link, i));
        renderLinks[link.id] = '';
      }
    }
  }, {
    key: 'refreshData',
    value: function refreshData() {
      if (this.props.links != this.state.links || this.props.data != this.state.data || this.props.dayWidth != this.state.dayWidth || this.props.selectedItem != this.state.selectedItem) {
        this.state.selectedItem = this.props.selectedItem;
        this.state.dayWidth = this.props.dayWidth;
        this.state.links = this.props.links;
        this.state.data = this.props.data;
        if (this.state.links && this.state.data) this.renderLinks();
      }
    }
  }, {
    key: 'render',
    value: function render() {
      this.refreshData();
      this.renderChangingTaskLinks();
      return _react2.default.createElement(
        'svg',
        { x: 0, y: 0, width: '100%', pointerEvents: 'none', style: { position: 'absolute', top: 60, userSelect: 'none', height: '100%' } },
        _react2.default.createElement(
          'defs',
          null,
          _react2.default.createElement(
            'marker',
            { id: 'arrow', viewBox: '0 0 10 10', refX: '5', refY: '5', markerWidth: '9', markerHeight: '9', orient: 'auto-start-reverse' },
            _react2.default.createElement('path', { d: 'M 0 0 L 10 5 L 0 10 z', strokeLinejoin: 'round' })
          )
        ),
        _react2.default.createElement(
          'g',
          { transform: 'matrix(1,0,0,1,' + -(this.props.scrollLeft - this.props.nowposition) + ',' + -this.props.scrollTop + ')' },
          this.cache,
          this.renderCreateLink()
        )
      );
    }
  }]);

  return LinkViewPort;
}(_react.Component);

exports.default = LinkViewPort;

/***/ }),

/***/ 2081:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.TaskRow = exports.VerticalLine = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

var _ContentEditable = __webpack_require__(2077);

var _ContentEditable2 = _interopRequireDefault(_ContentEditable);

var _antd = __webpack_require__(17);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VerticalLine = exports.VerticalLine = function (_Component) {
  _inherits(VerticalLine, _Component);

  function VerticalLine(props) {
    _classCallCheck(this, VerticalLine);

    return _possibleConstructorReturn(this, (VerticalLine.__proto__ || Object.getPrototypeOf(VerticalLine)).call(this, props));
  }

  _createClass(VerticalLine, [{
    key: 'render',
    value: function render() {
      return _react2.default.createElement('div', { className: 'timeLine-main-data-verticalLine', style: { left: this.props.left } });
    }
  }]);

  return VerticalLine;
}(_react.Component);

var TaskRow = exports.TaskRow = function (_Component2) {
  _inherits(TaskRow, _Component2);

  function TaskRow(props) {
    _classCallCheck(this, TaskRow);

    var _this2 = _possibleConstructorReturn(this, (TaskRow.__proto__ || Object.getPrototypeOf(TaskRow)).call(this, props));

    _this2.onChange = function (value) {
      if (_this2.props.onUpdateTask) {
        _this2.props.onUpdateTask(_this2.props.item, { name: value });
      }
    };

    return _this2;
  }

  _createClass(TaskRow, [{
    key: 'render',
    value: function render() {
      var _this3 = this;

      return _react2.default.createElement(
        'div',
        {
          className: 'timeLine-side-task-row',
          style: _extends({}, _Config2.default.values.taskList.task.style, {
            top: this.props.top,
            height: this.props.itemheight
          }),
          onClick: function onClick(e) {
            return _this3.props.onSelectItem(_this3.props.item);
          }
        },
        this.props.nonEditable ? _react2.default.createElement(
          'div',
          { tabIndex: this.props.index, style: { width: '100%' } },
          this.props.label
        ) : _react2.default.createElement(_ContentEditable2.default, { value: this.props.label, index: this.props.index, onChange: this.onChange })
      );
    }
  }]);

  return TaskRow;
}(_react.Component);

var TaskList = function (_Component3) {
  _inherits(TaskList, _Component3);

  function TaskList(props) {
    _classCallCheck(this, TaskList);

    var _this4 = _possibleConstructorReturn(this, (TaskList.__proto__ || Object.getPrototypeOf(TaskList)).call(this, props));

    _this4.doScroll = function () {
      _this4.props.onScroll(_this4.refs.taskViewPort.scrollTop);
    };

    return _this4;
  }

  _createClass(TaskList, [{
    key: 'getContainerStyle',
    value: function getContainerStyle(rows) {
      var new_height = rows > 0 ? rows * this.props.itemheight : 10;
      return { height: new_height };
    }
  }, {
    key: 'renderTaskRow',
    value: function renderTaskRow(data) {
      var result = [];
      for (var i = this.props.startRow; i < this.props.endRow + 1; i++) {
        var item = data[i];
        if (!item) break;
        result.push(_react2.default.createElement(TaskRow, {
          key: i,
          index: i,
          item: item,
          label: item.name,
          top: i * this.props.itemheight,
          itemheight: this.props.itemheight,
          isSelected: this.props.selectedItem == item,
          onUpdateTask: this.props.onUpdateTask,
          onSelectItem: this.props.onSelectItem,
          nonEditable: this.props.nonEditable
        }));
      }
      return result;
    }
  }, {
    key: 'render',
    value: function render() {
      var _this5 = this;

      var data = this.props.data ? this.props.data : [];
      this.containerStyle = this.getContainerStyle(data.length);
      return _react2.default.createElement(
        'div',
        { className: 'timeLine-side' },
        _react2.default.createElement(
          _antd.Affix,
          { target: function target() {
              return _this5.props.parentContainer;
            } },
          _react2.default.createElement(
            'div',
            { className: 'timeLine-side-title', style: _Config2.default.values.taskList.title.style },
            _react2.default.createElement(
              'div',
              null,
              _Config2.default.values.taskList.title.label
            )
          )
        ),
        _react2.default.createElement(
          'div',
          { ref: 'taskViewPort', className: 'timeLine-side-task-viewPort', onScroll: this.doScroll },
          _react2.default.createElement(
            'div',
            { className: 'timeLine-side-task-container', style: this.containerStyle },
            this.renderTaskRow(data)
          )
        )
      );
    }
  }]);

  return TaskList;
}(_react.Component);

exports.default = TaskList;

/***/ }),

/***/ 2082:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VerticalSpliter = function (_Component) {
  _inherits(VerticalSpliter, _Component);

  function VerticalSpliter(props) {
    _classCallCheck(this, VerticalSpliter);

    var _this = _possibleConstructorReturn(this, (VerticalSpliter.__proto__ || Object.getPrototypeOf(VerticalSpliter)).call(this, props));

    _this.doMouseMove = _this.doMouseMove.bind(_this);
    _this.doMouseDown = _this.doMouseDown.bind(_this);
    _this.doMouseUp = _this.doMouseUp.bind(_this);
    _this.state = { dragging: false };
    return _this;
  }

  _createClass(VerticalSpliter, [{
    key: 'doMouseDown',
    value: function doMouseDown(e) {
      if (e.button === 0) {
        this.draggingPosition = e.clientX;
        this.setState({ dragging: true });
      }
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate(props, state) {
      if (this.state.dragging && !state.dragging) {
        document.addEventListener('mousemove', this.doMouseMove);
        document.addEventListener('mouseup', this.doMouseUp);
      } else if (!this.state.dragging && state.dragging) {
        document.removeEventListener('mousemove', this.doMouseMove);
        document.removeEventListener('mouseup', this.doMouseUp);
      }
    }
  }, {
    key: 'doMouseMove',
    value: function doMouseMove(e) {
      if (this.state.dragging) {
        e.stopPropagation();
        var delta = this.draggingPosition - e.clientX;
        this.draggingPosition = e.clientX;
        this.props.onTaskListSizing(delta);
      }
    }
  }, {
    key: 'doMouseUp',
    value: function doMouseUp(e) {
      this.setState({ dragging: false });
    }
  }, {
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        { className: 'verticalResizer', style: _Config2.default.values.taskList.verticalSeparator.style, onMouseDown: this.doMouseDown },
        _react2.default.createElement('div', { className: 'squareGrip', style: _Config2.default.values.taskList.verticalSeparator.grip.style }),
        _react2.default.createElement('div', { className: 'squareGrip', style: _Config2.default.values.taskList.verticalSeparator.grip.style }),
        _react2.default.createElement('div', { className: 'squareGrip', style: _Config2.default.values.taskList.verticalSeparator.grip.style }),
        _react2.default.createElement('div', { className: 'squareGrip', style: _Config2.default.values.taskList.verticalSeparator.grip.style })
      );
    }
  }]);

  return VerticalSpliter;
}(_react.Component);

exports.default = VerticalSpliter;

/***/ }),

/***/ 2083:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _DateHelper = __webpack_require__(1585);

var _DateHelper2 = _interopRequireDefault(_DateHelper);

var _Const = __webpack_require__(1619);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DataTask = function (_Component) {
  _inherits(DataTask, _Component);

  function DataTask(props) {
    _classCallCheck(this, DataTask);

    var _this = _possibleConstructorReturn(this, (DataTask.__proto__ || Object.getPrototypeOf(DataTask)).call(this, props));

    _this.onCreateLinkMouseDown = function (e, position) {
      if (e.button === 0) {
        e.stopPropagation();
        _this.props.onStartCreateLink(_this.props.item, position);
      }
    };

    _this.onCreateLinkMouseUp = function (e, position) {
      e.stopPropagation();
      _this.props.onFinishCreateLink(_this.props.item, position);
    };

    _this.onCreateLinkTouchStart = function (e, position) {
      e.stopPropagation();
      _this.props.onStartCreateLink(_this.props.item, position);
    };

    _this.onCreateLinkTouchEnd = function (e, position) {
      e.stopPropagation();
      _this.props.onFinishCreateLink(_this.props.item, position);
    };

    _this.doMouseDown = function (e, mode) {
      if (!_this.props.onUpdateTask) return;
      if (e.button === 0) {
        e.stopPropagation();
        _this.dragStart(e.clientX, mode);
      }
    };

    _this.doMouseMove = function (e) {
      if (_this.state.dragging) {
        e.stopPropagation();
        _this.dragProcess(e.clientX);
      }
    };

    _this.doMouseUp = function () {
      _this.dragEnd();
    };

    _this.doTouchStart = function (e, mode) {
      if (!_this.props.onUpdateTask) return;
      console.log('start');
      e.stopPropagation();
      _this.dragStart(e.touches[0].clientX, mode);
    };

    _this.doTouchMove = function (e) {
      if (_this.state.dragging) {
        console.log('move');
        e.stopPropagation();
        _this.dragProcess(e.changedTouches[0].clientX);
      }
    };

    _this.doTouchEnd = function (e) {
      console.log('end');
      _this.dragEnd();
    };

    _this.calculateStyle = _this.calculateStyle.bind(_this);
    _this.state = { dragging: false, left: _this.props.left, width: _this.props.width, mode: _Const.MODE_NONE };
    return _this;
  }

  _createClass(DataTask, [{
    key: 'componentDidUpdate',
    value: function componentDidUpdate(props, state) {
      if (this.state.dragging && !state.dragging) {
        document.addEventListener('mousemove', this.doMouseMove);
        document.addEventListener('mouseup', this.doMouseUp);
        document.addEventListener('touchmove', this.doTouchMove);
        document.addEventListener('touchend', this.doTouchEnd);
      } else if (!this.state.dragging && state.dragging) {
        document.removeEventListener('mousemove', this.doMouseMove);
        document.removeEventListener('mouseup', this.doMouseUp);
        document.removeEventListener('touchmove', this.doTouchMove);
        document.removeEventListener('touchend', this.doTouchEnd);
      }
    }
  }, {
    key: 'dragStart',
    value: function dragStart(x, mode) {
      this.props.onChildDrag(true);
      this.draggingPosition = x;
      this.setState({
        dragging: true,
        mode: mode,
        left: this.props.left,
        width: this.props.width
      });
    }
  }, {
    key: 'dragProcess',
    value: function dragProcess(x) {
      var delta = this.draggingPosition - x;
      var newLeft = this.state.left;
      var newWidth = this.state.width;

      switch (this.state.mode) {
        case _Const.MODE_MOVE:
          newLeft = this.state.left - delta;
          break;
        case _Const.MOVE_RESIZE_LEFT:
          newLeft = this.state.left - delta;
          newWidth = this.state.width + delta;
          break;
        case _Const.MOVE_RESIZE_RIGHT:
          newWidth = this.state.width - delta;
          break;
      }
      //the coordinates need to be global
      var changeObj = {
        item: this.props.item,
        position: { start: newLeft - this.props.nowposition, end: newLeft + newWidth - this.props.nowposition }
      };
      this.props.onTaskChanging(changeObj);
      this.setState({ left: newLeft, width: newWidth });
      this.draggingPosition = x;
    }
  }, {
    key: 'dragEnd',
    value: function dragEnd() {
      this.props.onChildDrag(false);
      var new_start_date = _DateHelper2.default.pixelToDate(this.state.left, this.props.nowposition, this.props.dayWidth);
      var new_end_date = _DateHelper2.default.pixelToDate(this.state.left + this.state.width, this.props.nowposition, this.props.dayWidth);
      this.props.onUpdateTask(this.props.item, { start: new_start_date, end: new_end_date });
      this.setState({ dragging: false, mode: _Const.MODE_NONE });
    }
  }, {
    key: 'calculateStyle',
    value: function calculateStyle() {
      var configStyle = this.props.isSelected ? _Config2.default.values.dataViewPort.task.selectedStyle : _Config2.default.values.dataViewPort.task.style;
      var backgroundColor = this.props.color ? this.props.color : configStyle.backgroundColor;

      if (this.state.dragging) {
        return _extends({}, configStyle, {
          backgroundColor: backgroundColor,
          left: this.state.left,
          width: this.state.width,
          height: this.props.height - 5,
          top: 2
        });
      } else {
        return _extends({}, configStyle, { backgroundColor: backgroundColor, left: this.props.left, width: this.props.width, height: this.props.height - 5, top: 2 });
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this2 = this;

      var style = this.calculateStyle();
      return _react2.default.createElement(
        'div',
        {
          onMouseDown: function onMouseDown(e) {
            return _this2.doMouseDown(e, _Const.MODE_MOVE);
          },
          onTouchStart: function onTouchStart(e) {
            return _this2.doTouchStart(e, _Const.MODE_MOVE);
          },
          onClick: function onClick(e) {
            _this2.props.onSelectItem(_this2.props.item);
          },
          style: style
        },
        _react2.default.createElement(
          'div',
          {
            className: 'timeLine-main-data-task-side',
            style: { top: 0, left: -4, height: style.height },
            onMouseDown: function onMouseDown(e) {
              return _this2.doMouseDown(e, _Const.MOVE_RESIZE_LEFT);
            },
            onTouchStart: function onTouchStart(e) {
              return _this2.doTouchStart(e, _Const.MOVE_RESIZE_LEFT);
            }
          },
          _react2.default.createElement('div', {
            className: 'timeLine-main-data-task-side-linker',
            onMouseUp: function onMouseUp(e) {
              return _this2.onCreateLinkMouseUp(e, _Const.LINK_POS_LEFT);
            },
            onTouchEnd: function onTouchEnd(e) {
              return _this2.onCreateLinkTouchEnd(e, _Const.LINK_POS_LEFT);
            }
          })
        ),
        _react2.default.createElement(
          'div',
          { style: { overflow: 'hidden' } },
          _Config2.default.values.dataViewPort.task.showLabel ? this.props.item.name : ''
        ),
        _react2.default.createElement(
          'div',
          {
            className: 'timeLine-main-data-task-side',
            style: { top: 0, left: style.width - 3, height: style.height },
            onMouseDown: function onMouseDown(e) {
              return _this2.doMouseDown(e, _Const.MOVE_RESIZE_RIGHT);
            },
            onTouchStart: function onTouchStart(e) {
              return _this2.doTouchStart(e, _Const.MOVE_RESIZE_RIGHT);
            }
          },
          _react2.default.createElement('div', {
            className: 'timeLine-main-data-task-side-linker',
            onMouseDown: function onMouseDown(e) {
              return _this2.onCreateLinkMouseDown(e, _Const.LINK_POS_RIGHT);
            },
            onTouchStart: function onTouchStart(e) {
              return _this2.onCreateLinkTouchStart(e, _Const.LINK_POS_RIGHT);
            }
          })
        )
      );
    }
  }]);

  return DataTask;
}(_react.Component);

exports.default = DataTask;

/***/ }),

/***/ 2084:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DataViewPort = exports.DataRow = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _Const = __webpack_require__(1619);

var _DataTask = __webpack_require__(2083);

var _DataTask2 = _interopRequireDefault(_DataTask);

var _DateHelper = __webpack_require__(1585);

var _DateHelper2 = _interopRequireDefault(_DateHelper);

var _reactSizeme = __webpack_require__(2236);

var _reactSizeme2 = _interopRequireDefault(_reactSizeme);

var _Config = __webpack_require__(1575);

var _Config2 = _interopRequireDefault(_Config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DataRow = exports.DataRow = function (_Component) {
  _inherits(DataRow, _Component);

  function DataRow(props) {
    _classCallCheck(this, DataRow);

    return _possibleConstructorReturn(this, (DataRow.__proto__ || Object.getPrototypeOf(DataRow)).call(this, props));
  }

  _createClass(DataRow, [{
    key: 'render',
    value: function render() {
      return _react2.default.createElement(
        'div',
        {
          className: 'timeLine-main-data-row',
          style: _extends({}, _Config2.default.values.dataViewPort.rows.style, { top: this.props.top, height: this.props.itemheight })
        },
        this.props.children
      );
    }
  }]);

  return DataRow;
}(_react.Component);

var DataViewPort = exports.DataViewPort = function (_Component2) {
  _inherits(DataViewPort, _Component2);

  function DataViewPort(props) {
    _classCallCheck(this, DataViewPort);

    var _this2 = _possibleConstructorReturn(this, (DataViewPort.__proto__ || Object.getPrototypeOf(DataViewPort)).call(this, props));

    _this2.onChildDrag = function (dragging) {
      _this2.childDragging = dragging;
    };

    _this2.renderRows = function () {
      var result = [];
      for (var i = _this2.props.startRow; i < _this2.props.endRow + 1; i++) {
        var item = _this2.props.data[i];
        if (!item) break;
        //FIXME PAINT IN BOUNDARIES

        var new_position = _DateHelper2.default.dateToPixel(item.start, _this2.props.nowposition, _this2.props.dayWidth);
        var new_width = _DateHelper2.default.dateToPixel(item.end, _this2.props.nowposition, _this2.props.dayWidth) - new_position;
        result.push(_react2.default.createElement(
          DataRow,
          { key: i, label: item.name, top: i * _this2.props.itemheight, left: 20, itemheight: _this2.props.itemheight },
          _react2.default.createElement(
            _DataTask2.default,
            {
              item: item,
              label: item.name,
              nowposition: _this2.props.nowposition,
              dayWidth: _this2.props.dayWidth,
              color: item.color,
              left: new_position,
              width: new_width,
              height: _this2.props.itemheight,
              onChildDrag: _this2.onChildDrag,
              isSelected: _this2.props.selectedItem == item,
              onSelectItem: _this2.props.onSelectItem,
              onStartCreateLink: _this2.props.onStartCreateLink,
              onFinishCreateLink: _this2.props.onFinishCreateLink,
              onTaskChanging: _this2.props.onTaskChanging,
              onUpdateTask: _this2.props.onUpdateTask
            },
            ' '
          )
        ));
      }
      return result;
    };

    _this2.doMouseDown = function (e) {
      if (e.button === 0 && !_this2.childDragging) {
        _this2.props.onMouseDown(e);
      }
    };

    _this2.doMouseMove = function (e) {
      _this2.props.onMouseMove(e, _this2.refs.dataViewPort);
    };

    _this2.doTouchStart = function (e) {
      if (!_this2.childDragging) {
        _this2.props.onTouchStart(e);
      }
    };

    _this2.doTouchMove = function (e) {
      _this2.props.onTouchMove(e, _this2.refs.dataViewPort);
    };

    _this2.childDragging = false;
    return _this2;
  }

  _createClass(DataViewPort, [{
    key: 'getContainerHeight',
    value: function getContainerHeight(rows) {
      var new_height = rows > 0 ? rows * this.props.itemheight : 10;
      return new_height;
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      this.refs.dataViewPort.scrollLeft = 0;
    }
  }, {
    key: 'render',
    value: function render() {
      if (this.refs.dataViewPort) {
        this.refs.dataViewPort.scrollLeft = this.props.scrollLeft;
        this.refs.dataViewPort.scrollTop = this.props.scrollTop;
      }

      var height = this.getContainerHeight(this.props.data.length);
      return _react2.default.createElement(
        'div',
        {
          ref: 'dataViewPort',
          id: 'timeLinedataViewPort',
          className: 'timeLine-main-data-viewPort',
          onMouseDown: this.doMouseDown,
          onMouseMove: this.doMouseMove,
          onMouseUp: this.props.onMouseUp,
          onMouseLeave: this.props.onMouseLeave,
          onTouchStart: this.doTouchStart,
          onTouchMove: this.doTouchMove,
          onTouchEnd: this.props.onTouchEnd,
          onTouchCancel: this.props.onTouchCancel
        },
        _react2.default.createElement(
          'div',
          {
            className: 'timeLine-main-data-container',
            style: { height: height, width: _Const.DATA_CONTAINER_WIDTH, maxWidth: _Const.DATA_CONTAINER_WIDTH }
          },
          this.renderRows()
        )
      );
    }
  }]);

  return DataViewPort;
}(_react.Component);

exports.default = (0, _reactSizeme2.default)({ monitorWidth: true, monitorHeight: true })(DataViewPort);

/***/ }),

/***/ 2085:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = undefined;

var _DateHelper = __webpack_require__(1585);

var _DateHelper2 = _interopRequireDefault(_DateHelper);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HORIZON_BUFFER = 1000;
var HORIZON_BUFFER_ALERT = 750;

var DataController = function DataController() {
  var _this = this;

  _classCallCheck(this, DataController);

  this.initialise = function (start, end, nowposition, daywidth) {
    _this.nowposition = nowposition;
    _this.daywidth = daywidth;
    _this.setLimits(start, end, nowposition, daywidth);
    _this.loadDataHorizon();
  };

  this.setStartEnd = function (start, end, nowposition, daywidth) {
    _this.nowposition = nowposition;
    _this.daywidth = daywidth;
    if (_this.needData(start, end)) {
      _this.setLimits(start, end);
      _this.loadDataHorizon();
    }
  };

  this.needData = function (start, end) {
    return start < _this.lower_data_limit || end > _this.upper_data_limit;
  };

  this.setLimits = function (start, end) {
    _this.lower_limit = start - HORIZON_BUFFER;
    _this.lower_data_limit = start - HORIZON_BUFFER_ALERT;
    _this.upper_limit = end + HORIZON_BUFFER;
    _this.upper_data_limit = end + HORIZON_BUFFER_ALERT;
  };

  this.loadDataHorizon = function () {
    var lowerLimit = _DateHelper2.default.pixelToDate(_this.lower_limit, _this.nowposition, _this.daywidth);
    var upLimit = _DateHelper2.default.pixelToDate(_this.upper_limit, _this.nowposition, _this.daywidth);
    _this.onHorizonChange(lowerLimit, upLimit);
  };

  this.lower_limit = 0;
  this.upper_limit = 0;
  this._dataToRender = [];
}

//OnScroll


//OnScroll
;

exports.default = DataController;

/***/ }),

/***/ 2117:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(2118);

module.exports = function batchProcessorMaker(options) {
    options             = options || {};
    var reporter        = options.reporter;
    var asyncProcess    = utils.getOption(options, "async", true);
    var autoProcess     = utils.getOption(options, "auto", true);

    if(autoProcess && !asyncProcess) {
        reporter && reporter.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true.");
        asyncProcess = true;
    }

    var batch = Batch();
    var asyncFrameHandler;
    var isProcessing = false;

    function addFunction(level, fn) {
        if(!isProcessing && autoProcess && asyncProcess && batch.size() === 0) {
            // Since this is async, it is guaranteed to be executed after that the fn is added to the batch.
            // This needs to be done before, since we're checking the size of the batch to be 0.
            processBatchAsync();
        }

        batch.add(level, fn);
    }

    function processBatch() {
        // Save the current batch, and create a new batch so that incoming functions are not added into the currently processing batch.
        // Continue processing until the top-level batch is empty (functions may be added to the new batch while processing, and so on).
        isProcessing = true;
        while (batch.size()) {
            var processingBatch = batch;
            batch = Batch();
            processingBatch.process();
        }
        isProcessing = false;
    }

    function forceProcessBatch(localAsyncProcess) {
        if (isProcessing) {
            return;
        }

        if(localAsyncProcess === undefined) {
            localAsyncProcess = asyncProcess;
        }

        if(asyncFrameHandler) {
            cancelFrame(asyncFrameHandler);
            asyncFrameHandler = null;
        }

        if(localAsyncProcess) {
            processBatchAsync();
        } else {
            processBatch();
        }
    }

    function processBatchAsync() {
        asyncFrameHandler = requestFrame(processBatch);
    }

    function clearBatch() {
        batch           = {};
        batchSize       = 0;
        topLevel        = 0;
        bottomLevel     = 0;
    }

    function cancelFrame(listener) {
        // var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout;
        var cancel = clearTimeout;
        return cancel(listener);
    }

    function requestFrame(callback) {
        // var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function(fn) { return window.setTimeout(fn, 20); };
        var raf = function(fn) { return setTimeout(fn, 0); };
        return raf(callback);
    }

    return {
        add: addFunction,
        force: forceProcessBatch
    };
};

function Batch() {
    var batch       = {};
    var size        = 0;
    var topLevel    = 0;
    var bottomLevel = 0;

    function add(level, fn) {
        if(!fn) {
            fn = level;
            level = 0;
        }

        if(level > topLevel) {
            topLevel = level;
        } else if(level < bottomLevel) {
            bottomLevel = level;
        }

        if(!batch[level]) {
            batch[level] = [];
        }

        batch[level].push(fn);
        size++;
    }

    function process() {
        for(var level = bottomLevel; level <= topLevel; level++) {
            var fns = batch[level];

            for(var i = 0; i < fns.length; i++) {
                var fn = fns[i];
                fn();
            }
        }
    }

    function getSize() {
        return size;
    }

    return {
        add: add,
        process: process,
        size: getSize
    };
}


/***/ }),

/***/ 2118:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = module.exports = {};

utils.getOption = getOption;

function getOption(options, name, defaultValue) {
    var value = options[name];

    if((value === undefined || value === null) && defaultValue !== undefined) {
        return defaultValue;
    }

    return value;
}


/***/ }),

/***/ 2143:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _react = __webpack_require__(0);

var _react2 = _interopRequireDefault(_react);

var _propTypes = __webpack_require__(20);

var _propTypes2 = _interopRequireDefault(_propTypes);

var _gud = __webpack_require__(2256);

var _gud2 = _interopRequireDefault(_gud);

var _warning = __webpack_require__(2178);

var _warning2 = _interopRequireDefault(_warning);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MAX_SIGNED_31_BIT_INT = 1073741823;

// Inlined Object.is polyfill.
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
function objectIs(x, y) {
  if (x === y) {
    return x !== 0 || 1 / x === 1 / y;
  } else {
    return x !== x && y !== y;
  }
}

function createEventEmitter(value) {
  var handlers = [];
  return {
    on: function on(handler) {
      handlers.push(handler);
    },
    off: function off(handler) {
      handlers = handlers.filter(function (h) {
        return h !== handler;
      });
    },
    get: function get() {
      return value;
    },
    set: function set(newValue, changedBits) {
      value = newValue;
      handlers.forEach(function (handler) {
        return handler(value, changedBits);
      });
    }
  };
}

function onlyChild(children) {
  return Array.isArray(children) ? children[0] : children;
}

function createReactContext(defaultValue, calculateChangedBits) {
  var _Provider$childContex, _Consumer$contextType;

  var contextProp = '__create-react-context-' + (0, _gud2.default)() + '__';

  var Provider = function (_Component) {
    _inherits(Provider, _Component);

    function Provider() {
      var _temp, _this, _ret;

      _classCallCheck(this, Provider);

      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.emitter = createEventEmitter(_this.props.value), _temp), _possibleConstructorReturn(_this, _ret);
    }

    Provider.prototype.getChildContext = function getChildContext() {
      var _ref;

      return _ref = {}, _ref[contextProp] = this.emitter, _ref;
    };

    Provider.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
      if (this.props.value !== nextProps.value) {
        var oldValue = this.props.value;
        var newValue = nextProps.value;
        var changedBits = void 0;

        if (objectIs(oldValue, newValue)) {
          changedBits = 0; // No change
        } else {
          changedBits = typeof calculateChangedBits === 'function' ? calculateChangedBits(oldValue, newValue) : MAX_SIGNED_31_BIT_INT;
          if (false) {
            (0, _warning2.default)((changedBits & MAX_SIGNED_31_BIT_INT) === changedBits, 'calculateChangedBits: Expected the return value to be a ' + '31-bit integer. Instead received: %s', changedBits);
          }

          changedBits |= 0;

          if (changedBits !== 0) {
            this.emitter.set(nextProps.value, changedBits);
          }
        }
      }
    };

    Provider.prototype.render = function render() {
      return this.props.children;
    };

    return Provider;
  }(_react.Component);

  Provider.childContextTypes = (_Provider$childContex = {}, _Provider$childContex[contextProp] = _propTypes2.default.object.isRequired, _Provider$childContex);

  var Consumer = function (_Component2) {
    _inherits(Consumer, _Component2);

    function Consumer() {
      var _temp2, _this2, _ret2;

      _classCallCheck(this, Consumer);

      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      return _ret2 = (_temp2 = (_this2 = _possibleConstructorReturn(this, _Component2.call.apply(_Component2, [this].concat(args))), _this2), _this2.state = {
        value: _this2.getValue()
      }, _this2.onUpdate = function (newValue, changedBits) {
        var observedBits = _this2.observedBits | 0;
        if ((observedBits & changedBits) !== 0) {
          _this2.setState({ value: _this2.getValue() });
        }
      }, _temp2), _possibleConstructorReturn(_this2, _ret2);
    }

    Consumer.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
      var observedBits = nextProps.observedBits;

      this.observedBits = observedBits === undefined || observedBits === null ? MAX_SIGNED_31_BIT_INT // Subscribe to all changes by default
      : observedBits;
    };

    Consumer.prototype.componentDidMount = function componentDidMount() {
      if (this.context[contextProp]) {
        this.context[contextProp].on(this.onUpdate);
      }
      var observedBits = this.props.observedBits;

      this.observedBits = observedBits === undefined || observedBits === null ? MAX_SIGNED_31_BIT_INT // Subscribe to all changes by default
      : observedBits;
    };

    Consumer.prototype.componentWillUnmount = function componentWillUnmount() {
      if (this.context[contextProp]) {
        this.context[contextProp].off(this.onUpdate);
      }
    };

    Consumer.prototype.getValue = function getValue() {
      if (this.context[contextProp]) {
        return this.context[contextProp].get();
      } else {
        return defaultValue;
      }
    };

    Consumer.prototype.render = function render() {
      return onlyChild(this.props.children)(this.state.value);
    };

    return Consumer;
  }(_react.Component);

  Consumer.contextTypes = (_Consumer$contextType = {}, _Consumer$contextType[contextProp] = _propTypes2.default.object, _Consumer$contextType);


  return {
    Provider: Provider,
    Consumer: Consumer
  };
}

exports.default = createReactContext;
module.exports = exports['default'];

/***/ }),

/***/ 2144:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, ".react-calendar-timeline * {\n  box-sizing: border-box; }\n\n.react-calendar-timeline .rct-outer {\n  display: block;\n  overflow: hidden;\n  white-space: nowrap; }\n\n.react-calendar-timeline .rct-scroll {\n  display: inline-block;\n  white-space: normal;\n  vertical-align: top;\n  overflow-x: scroll;\n  overflow-y: hidden;\n  -ms-touch-action: none;\n  touch-action: none; }\n\n.react-calendar-timeline .rct-item:hover {\n  z-index: 88; }\n\n.react-calendar-timeline .rct-item .rct-item-content {\n  position: sticky;\n  position: -webkit-sticky;\n  left: 0px;\n  overflow: hidden;\n  display: inline-block;\n  border-radius: 2px;\n  padding: 0 6px;\n  height: 100%; }\n\n.react-calendar-timeline .rct-sidebar {\n  overflow: hidden;\n  white-space: normal;\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  box-sizing: border-box;\n  border-right: 1px solid #bbb; }\n  .react-calendar-timeline .rct-sidebar.rct-sidebar-right {\n    border-right: 0;\n    border-left: 1px solid #bbb; }\n  .react-calendar-timeline .rct-sidebar .rct-sidebar-row {\n    padding: 0 4px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    box-sizing: border-box;\n    margin: 0;\n    border-bottom: 1px solid #bbb; }\n    .react-calendar-timeline .rct-sidebar .rct-sidebar-row.rct-sidebar-row-odd {\n      background: rgba(0, 0, 0, 0.05); }\n    .react-calendar-timeline .rct-sidebar .rct-sidebar-row.rct-sidebar-row-even {\n      background: transparent; }\n\n.react-calendar-timeline .rct-vertical-lines .rct-vl {\n  position: absolute;\n  border-left: 1px solid #bbb;\n  z-index: 30; }\n  .react-calendar-timeline .rct-vertical-lines .rct-vl.rct-vl-first {\n    border-left-width: 2px; }\n  .react-calendar-timeline .rct-vertical-lines .rct-vl.rct-day-6, .react-calendar-timeline .rct-vertical-lines .rct-vl.rct-day-0 {\n    background: rgba(250, 246, 225, 0.5); }\n\n.react-calendar-timeline .rct-horizontal-lines {\n  -webkit-user-select: none;\n  -moz-user-select: -moz-none;\n  -ms-user-select: none;\n  user-select: none; }\n  .react-calendar-timeline .rct-horizontal-lines .rct-hl-even,\n  .react-calendar-timeline .rct-horizontal-lines .rct-hl-odd {\n    border-bottom: 1px solid #bbb;\n    box-sizing: border-box;\n    z-index: 40; }\n  .react-calendar-timeline .rct-horizontal-lines .rct-hl-odd {\n    background: rgba(0, 0, 0, 0.05); }\n  .react-calendar-timeline .rct-horizontal-lines .rct-hl-even {\n    background: transparent; }\n\n.react-calendar-timeline .rct-cursor-line {\n  position: absolute;\n  width: 2px;\n  background: #2196f3;\n  z-index: 51; }\n\n.react-calendar-timeline .rct-dateHeader {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  border-bottom: 1px solid #bbb;\n  cursor: pointer;\n  font-size: 14px;\n  background-color: #f0f0f0;\n  border-left: 2px solid #bbb; }\n\n.react-calendar-timeline .rct-dateHeader-primary {\n  background-color: initial;\n  border-left: 1px solid #bbb;\n  border-right: 1px solid #bbb;\n  color: #fff; }\n\n.react-calendar-timeline .rct-header-root {\n  background: #c52020;\n  border-bottom: 1px solid #bbb; }\n\n.react-calendar-timeline .rct-calendar-header {\n  border: 1px solid #bbb; }\n", ""]);

// exports


/***/ }),

/***/ 2147:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, "/* 拖动的时候的样式 */\r\n.SortableHelper {\r\n  box-shadow: rgba(0, 0, 0, 0.075) 0 1px 6px, rgba(0, 0, 0, 0.075) 0 1px 4px;\r\n  background-color: lightgreen;\r\n}\r\n", ""]);

// exports


/***/ }),

/***/ 2153:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, "/* 拖动的时候的样式 */\r\n.SortableHelper {\r\n  box-shadow: rgba(0, 0, 0, 0.075) 0 1px 6px, rgba(0, 0, 0, 0.075) 0 1px 4px;\r\n  background-color: lightgreen;\r\n}\r\n", ""]);

// exports


/***/ }),

/***/ 2154:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, "/* 拖动的时候的样式 */\r\n.SortableHelper {\r\n  box-shadow: rgba(0, 0, 0, 0.075) 0 1px 6px, rgba(0, 0, 0, 0.075) 0 1px 4px;\r\n  background-color: lightgreen;\r\n}\r\n", ""]);

// exports


/***/ }),

/***/ 2155:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, ".timeLine {\r\n  display: flex;\r\n  flex-direction: row;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: solid 1px rgb(207, 207, 205);\r\n  font-size: 12px;\r\n  user-select: none;\r\n  -moz-user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n}\r\n\r\n/* Main Area */\r\n\r\n.timeLine-main {\r\n  flex: 1 1 100%;\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow-y: hidden;\r\n}\r\n/* Main Area Header*/\r\n\r\n.timeLine-main-header-viewPort {\r\n  flex: 0 0 60px;\r\n  position: relative;\r\n  height: 60px;\r\n  width: 100%;\r\n  background-color: rgb(112, 112, 112);\r\n  overflow: hidden;\r\n}\r\n\r\n.timeLine-main-header-container {\r\n  flex: 0 0 60px;\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #333333;\r\n  overflow: hidden;\r\n  user-select: none;\r\n}\r\n\r\n.timeLine-main-header-day-item {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  background-color: rgb(112, 112, 112);\r\n  font-size: 10px;\r\n  text-align: center;\r\n  border-right: solid 1px;\r\n  border-top: solid 1px;\r\n  border-bottom: solid 1px;\r\n  top: 20px;\r\n  height: 40px;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.timeLine-main-header-top-item {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  border-right: solid 1px white;\r\n  height: 20px;\r\n  z-index: 91;\r\n}\r\n\r\n.timeLine-main-header-day-week {\r\n  flex: 0 0 12px;\r\n  padding: 4px;\r\n  z-index: 90;\r\n}\r\n\r\n.timeLine-main-header-day-month {\r\n  top: 0px;\r\n  position: sticky;\r\n  flex: 0 0 15px;\r\n  padding: 5px;\r\n  z-index: 90;\r\n}\r\n\r\n.timeLine-main-header-time {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: stretch;\r\n  height: 22px;\r\n  justify-content: stretch;\r\n}\r\n\r\n.timeLine-main-header-time-item {\r\n  border-left: solid 1px silver;\r\n  border-bottom: solid 1px silver;\r\n  border-top: solid 1px silver;\r\n  text-align: center;\r\n  padding-top: 5px;\r\n}\r\n/* Main Area Data*/\r\n\r\n.timeLine-main-data-viewPort {\r\n  flex: 1 1 auto;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background-color: #fbf9f9;\r\n}\r\n.timeLine-main-data-container {\r\n  position: relative;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  background-color: rgb(255, 255, 255);\r\n}\r\n\r\n.timeLine-main-data-row {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 50px;\r\n}\r\n\r\n.timeLine-main-data-task {\r\n  position: absolute;\r\n  background-color: darkorchid;\r\n  border-radius: 14px;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.timeLine-main-data-task-side {\r\n  position: absolute;\r\n  width: 10px;\r\n  cursor: col-resize;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.timeLine-main-data-task-side-linker {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 4px;\r\n  cursor: default;\r\n  z-index: 100;\r\n}\r\n.timeLine-main-data-task-side-linker:hover {\r\n  background-color: black;\r\n  border: solid 0.5px grey;\r\n}\r\n/* .timeLine-main-data-task:hover {\r\n    background-color:chocolate;\r\n    border:solid 2px darkorchid;\r\n    cursor: move;\r\n} */\r\n\r\n.timeLine-main-data-verticalLine {\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  width: 24px;\r\n  background-color: white;\r\n  border-left-width: 0.5px;\r\n  border-left-color: rgb(207, 207, 205);\r\n  border-left-style: dashed;\r\n}\r\n\r\n/* Side Area */\r\n\r\n.timeLine-side-main {\r\n  flex: 0 0 auto;\r\n  width: 108px;\r\n  min-width: 108px;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.timeLine-side {\r\n  flex: 1 0 100px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-right: solid 1px rgb(207, 207, 205);\r\n}\r\n\r\n.verticalResizer {\r\n  flex: 0 0 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: col-resize;\r\n  border-right: solid 1px rgb(207, 207, 205);\r\n  height: 100%;\r\n}\r\n.squareGrip {\r\n  flex: 0 0 auto;\r\n\r\n  border-radius: 50%;\r\n  height: 5px;\r\n  width: 5px;\r\n  margin: 3px 0;\r\n}\r\n\r\n.timeLine-side-title {\r\n  flex: 0 0 60px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.timeLine-side-task-viewPort {\r\n  position: relative;\r\n  flex: 1 1 auto;\r\n  height: 100%;\r\n  background-color: #fbf9f9;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n}\r\n\r\n.timeLine-side-task-container {\r\n  position: relative;\r\n  overflow-x: hidden;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.timeLine-side-task-row {\r\n  position: absolute;\r\n  width: 100%;\r\n  background-color: rgb(112, 112, 112);\r\n  border-bottom-width: 0.5px;\r\n  border-bottom-color: rgb(207, 207, 205);\r\n  border-bottom-style: solid;\r\n  height: 30px;\r\n  color: grey;\r\n  text-align: center;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  outline: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n}\r\n", ""]);

// exports


/***/ }),

/***/ 2156:
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(1459)(false);
// imports


// module
exports.push([module.i, ".header-top {\r\n  height: 20px;\r\n\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n\r\n.header-middle {\r\n  height: 20px;\r\n  background-color: chocolate;\r\n  color: white;\r\n  font-size: 10px;\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n.header-bottom {\r\n  height: 20px;\r\n  font-size: 10px;\r\n  border-bottom: solid 0.5px silver;\r\n}\r\n", ""]);

// exports


/***/ }),

/***/ 2157:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Resize detection strategy that injects objects to elements in order to detect resize events.
 * Heavily inspired by: http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/
 */



var browserDetector = __webpack_require__(1897);

module.exports = function(options) {
    options             = options || {};
    var reporter        = options.reporter;
    var batchProcessor  = options.batchProcessor;
    var getState        = options.stateHandler.getState;

    if(!reporter) {
        throw new Error("Missing required dependency: reporter.");
    }

    /**
     * Adds a resize event listener to the element.
     * @public
     * @param {element} element The element that should have the listener added.
     * @param {function} listener The listener callback to be called for each resize event of the element. The element will be given as a parameter to the listener callback.
     */
    function addListener(element, listener) {
        function listenerProxy() {
            listener(element);
        }

        if(browserDetector.isIE(8)) {
            //IE 8 does not support object, but supports the resize event directly on elements.
            getState(element).object = {
                proxy: listenerProxy
            };
            element.attachEvent("onresize", listenerProxy);
        } else {
            var object = getObject(element);

            if(!object) {
                throw new Error("Element is not detectable by this strategy.");
            }

            object.contentDocument.defaultView.addEventListener("resize", listenerProxy);
        }
    }

    function buildCssTextString(rules) {
        var seperator = options.important ? " !important; " : "; ";

        return (rules.join(seperator) + seperator).trim();
    }

    /**
     * Makes an element detectable and ready to be listened for resize events. Will call the callback when the element is ready to be listened for resize changes.
     * @private
     * @param {object} options Optional options object.
     * @param {element} element The element to make detectable
     * @param {function} callback The callback to be called when the element is ready to be listened for resize changes. Will be called with the element as first parameter.
     */
    function makeDetectable(options, element, callback) {
        if (!callback) {
            callback = element;
            element = options;
            options = null;
        }

        options = options || {};
        var debug = options.debug;

        function injectObject(element, callback) {
            var OBJECT_STYLE = buildCssTextString(["display: block", "position: absolute", "top: 0", "left: 0", "width: 100%", "height: 100%", "border: none", "padding: 0", "margin: 0", "opacity: 0", "z-index: -1000", "pointer-events: none", "visibility: hidden"]);

            //The target element needs to be positioned (everything except static) so the absolute positioned object will be positioned relative to the target element.

            // Position altering may be performed directly or on object load, depending on if style resolution is possible directly or not.
            var positionCheckPerformed = false;

            // The element may not yet be attached to the DOM, and therefore the style object may be empty in some browsers.
            // Since the style object is a reference, it will be updated as soon as the element is attached to the DOM.
            var style = window.getComputedStyle(element);
            var width = element.offsetWidth;
            var height = element.offsetHeight;

            getState(element).startSize = {
                width: width,
                height: height
            };

            function mutateDom() {
                function alterPositionStyles() {
                    if(style.position === "static") {
                        element.style.setProperty("position", "relative", options.important ? "important" : "");

                        var removeRelativeStyles = function(reporter, element, style, property) {
                            function getNumericalValue(value) {
                                return value.replace(/[^-\d\.]/g, "");
                            }

                            var value = style[property];

                            if(value !== "auto" && getNumericalValue(value) !== "0") {
                                reporter.warn("An element that is positioned static has style." + property + "=" + value + " which is ignored due to the static positioning. The element will need to be positioned relative, so the style." + property + " will be set to 0. Element: ", element);
                                element.style.setProperty(property, "0", options.important ? "important" : "");
                            }
                        };

                        //Check so that there are no accidental styles that will make the element styled differently now that is is relative.
                        //If there are any, set them to 0 (this should be okay with the user since the style properties did nothing before [since the element was positioned static] anyway).
                        removeRelativeStyles(reporter, element, style, "top");
                        removeRelativeStyles(reporter, element, style, "right");
                        removeRelativeStyles(reporter, element, style, "bottom");
                        removeRelativeStyles(reporter, element, style, "left");
                    }
                }

                function onObjectLoad() {
                    // The object has been loaded, which means that the element now is guaranteed to be attached to the DOM.
                    if (!positionCheckPerformed) {
                        alterPositionStyles();
                    }

                    /*jshint validthis: true */

                    function getDocument(element, callback) {
                        //Opera 12 seem to call the object.onload before the actual document has been created.
                        //So if it is not present, poll it with an timeout until it is present.
                        //TODO: Could maybe be handled better with object.onreadystatechange or similar.
                        if(!element.contentDocument) {
                            var state = getState(element);
                            if (state.checkForObjectDocumentTimeoutId) {
                                window.clearTimeout(state.checkForObjectDocumentTimeoutId);
                            }
                            state.checkForObjectDocumentTimeoutId = setTimeout(function checkForObjectDocument() {
                                state.checkForObjectDocumentTimeoutId = 0;
                                getDocument(element, callback);
                            }, 100);

                            return;
                        }

                        callback(element.contentDocument);
                    }

                    //Mutating the object element here seems to fire another load event.
                    //Mutating the inner document of the object element is fine though.
                    var objectElement = this;

                    //Create the style element to be added to the object.
                    getDocument(objectElement, function onObjectDocumentReady(objectDocument) {
                        //Notify that the element is ready to be listened to.
                        callback(element);
                    });
                }

                // The element may be detached from the DOM, and some browsers does not support style resolving of detached elements.
                // The alterPositionStyles needs to be delayed until we know the element has been attached to the DOM (which we are sure of when the onObjectLoad has been fired), if style resolution is not possible.
                if (style.position !== "") {
                    alterPositionStyles(style);
                    positionCheckPerformed = true;
                }

                //Add an object element as a child to the target element that will be listened to for resize events.
                var object = document.createElement("object");
                object.style.cssText = OBJECT_STYLE;
                object.tabIndex = -1;
                object.type = "text/html";
                object.setAttribute("aria-hidden", "true");
                object.onload = onObjectLoad;

                //Safari: This must occur before adding the object to the DOM.
                //IE: Does not like that this happens before, even if it is also added after.
                if(!browserDetector.isIE()) {
                    object.data = "about:blank";
                }

                if (!getState(element)) {
                    // The element has been uninstalled before the actual loading happened.
                    return;
                }

                element.appendChild(object);
                getState(element).object = object;

                //IE: This must occur after adding the object to the DOM.
                if(browserDetector.isIE()) {
                    object.data = "about:blank";
                }
            }

            if(batchProcessor) {
                batchProcessor.add(mutateDom);
            } else {
                mutateDom();
            }
        }

        if(browserDetector.isIE(8)) {
            //IE 8 does not support objects properly. Luckily they do support the resize event.
            //So do not inject the object and notify that the element is already ready to be listened to.
            //The event handler for the resize event is attached in the utils.addListener instead.
            callback(element);
        } else {
            injectObject(element, callback);
        }
    }

    /**
     * Returns the child object of the target element.
     * @private
     * @param {element} element The target element.
     * @returns The object element of the target.
     */
    function getObject(element) {
        return getState(element).object;
    }

    function uninstall(element) {
        if (!getState(element)) {
            return;
        }

        var object = getObject(element);

        if (!object) {
            return;
        }

        if (browserDetector.isIE(8)) {
            element.detachEvent("onresize", object.proxy);
        } else {
            element.removeChild(object);
        }

        if (getState(element).checkForObjectDocumentTimeoutId) {
            window.clearTimeout(getState(element).checkForObjectDocumentTimeoutId);
        }

        delete getState(element).object;
    }

    return {
        makeDetectable: makeDetectable,
        addListener: addListener,
        uninstall: uninstall
    };
};


/***/ }),

/***/ 2158:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Resize detection strategy that injects divs to elements in order to detect resize events on scroll events.
 * Heavily inspired by: https://github.com/marcj/css-element-queries/blob/master/src/ResizeSensor.js
 */



var forEach = __webpack_require__(1898).forEach;

module.exports = function(options) {
    options             = options || {};
    var reporter        = options.reporter;
    var batchProcessor  = options.batchProcessor;
    var getState        = options.stateHandler.getState;
    var hasState        = options.stateHandler.hasState;
    var idHandler       = options.idHandler;

    if (!batchProcessor) {
        throw new Error("Missing required dependency: batchProcessor");
    }

    if (!reporter) {
        throw new Error("Missing required dependency: reporter.");
    }

    //TODO: Could this perhaps be done at installation time?
    var scrollbarSizes = getScrollbarSizes();

    var styleId = "erd_scroll_detection_scrollbar_style";
    var detectionContainerClass = "erd_scroll_detection_container";

    function initDocument(targetDocument) {
        // Inject the scrollbar styling that prevents them from appearing sometimes in Chrome.
        // The injected container needs to have a class, so that it may be styled with CSS (pseudo elements).
        injectScrollStyle(targetDocument, styleId, detectionContainerClass);
    }

    initDocument(window.document);

    function buildCssTextString(rules) {
        var seperator = options.important ? " !important; " : "; ";

        return (rules.join(seperator) + seperator).trim();
    }

    function getScrollbarSizes() {
        var width = 500;
        var height = 500;

        var child = document.createElement("div");
        child.style.cssText = buildCssTextString(["position: absolute", "width: " + width*2 + "px", "height: " + height*2 + "px", "visibility: hidden", "margin: 0", "padding: 0"]);

        var container = document.createElement("div");
        container.style.cssText = buildCssTextString(["position: absolute", "width: " + width + "px", "height: " + height + "px", "overflow: scroll", "visibility: none", "top: " + -width*3 + "px", "left: " + -height*3 + "px", "visibility: hidden", "margin: 0", "padding: 0"]);

        container.appendChild(child);

        document.body.insertBefore(container, document.body.firstChild);

        var widthSize = width - container.clientWidth;
        var heightSize = height - container.clientHeight;

        document.body.removeChild(container);

        return {
            width: widthSize,
            height: heightSize
        };
    }

    function injectScrollStyle(targetDocument, styleId, containerClass) {
        function injectStyle(style, method) {
            method = method || function (element) {
                targetDocument.head.appendChild(element);
            };

            var styleElement = targetDocument.createElement("style");
            styleElement.innerHTML = style;
            styleElement.id = styleId;
            method(styleElement);
            return styleElement;
        }

        if (!targetDocument.getElementById(styleId)) {
            var containerAnimationClass = containerClass + "_animation";
            var containerAnimationActiveClass = containerClass + "_animation_active";
            var style = "/* Created by the element-resize-detector library. */\n";
            style += "." + containerClass + " > div::-webkit-scrollbar { " + buildCssTextString(["display: none"]) + " }\n\n";
            style += "." + containerAnimationActiveClass + " { " + buildCssTextString(["-webkit-animation-duration: 0.1s", "animation-duration: 0.1s", "-webkit-animation-name: " + containerAnimationClass, "animation-name: " + containerAnimationClass]) + " }\n";
            style += "@-webkit-keyframes " + containerAnimationClass +  " { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n";
            style += "@keyframes " + containerAnimationClass +          " { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }";
            injectStyle(style);
        }
    }

    function addAnimationClass(element) {
        element.className += " " + detectionContainerClass + "_animation_active";
    }

    function addEvent(el, name, cb) {
        if (el.addEventListener) {
            el.addEventListener(name, cb);
        } else if(el.attachEvent) {
            el.attachEvent("on" + name, cb);
        } else {
            return reporter.error("[scroll] Don't know how to add event listeners.");
        }
    }

    function removeEvent(el, name, cb) {
        if (el.removeEventListener) {
            el.removeEventListener(name, cb);
        } else if(el.detachEvent) {
            el.detachEvent("on" + name, cb);
        } else {
            return reporter.error("[scroll] Don't know how to remove event listeners.");
        }
    }

    function getExpandElement(element) {
        return getState(element).container.childNodes[0].childNodes[0].childNodes[0];
    }

    function getShrinkElement(element) {
        return getState(element).container.childNodes[0].childNodes[0].childNodes[1];
    }

    /**
     * Adds a resize event listener to the element.
     * @public
     * @param {element} element The element that should have the listener added.
     * @param {function} listener The listener callback to be called for each resize event of the element. The element will be given as a parameter to the listener callback.
     */
    function addListener(element, listener) {
        var listeners = getState(element).listeners;

        if (!listeners.push) {
            throw new Error("Cannot add listener to an element that is not detectable.");
        }

        getState(element).listeners.push(listener);
    }

    /**
     * Makes an element detectable and ready to be listened for resize events. Will call the callback when the element is ready to be listened for resize changes.
     * @private
     * @param {object} options Optional options object.
     * @param {element} element The element to make detectable
     * @param {function} callback The callback to be called when the element is ready to be listened for resize changes. Will be called with the element as first parameter.
     */
    function makeDetectable(options, element, callback) {
        if (!callback) {
            callback = element;
            element = options;
            options = null;
        }

        options = options || {};

        function debug() {
            if (options.debug) {
                var args = Array.prototype.slice.call(arguments);
                args.unshift(idHandler.get(element), "Scroll: ");
                if (reporter.log.apply) {
                    reporter.log.apply(null, args);
                } else {
                    for (var i = 0; i < args.length; i++) {
                        reporter.log(args[i]);
                    }
                }
            }
        }

        function isDetached(element) {
            function isInDocument(element) {
                var isInShadowRoot = element.getRootNode && element.getRootNode().contains(element);
                return element === element.ownerDocument.body || element.ownerDocument.body.contains(element) || isInShadowRoot;
            }

            if (!isInDocument(element)) {
                return true;
            }

            // FireFox returns null style in hidden iframes. See https://github.com/wnr/element-resize-detector/issues/68 and https://bugzilla.mozilla.org/show_bug.cgi?id=795520
            if (window.getComputedStyle(element) === null) {
                return true;
            }

            return false;
        }

        function isUnrendered(element) {
            // Check the absolute positioned container since the top level container is display: inline.
            var container = getState(element).container.childNodes[0];
            var style = window.getComputedStyle(container);
            return !style.width || style.width.indexOf("px") === -1; //Can only compute pixel value when rendered.
        }

        function getStyle() {
            // Some browsers only force layouts when actually reading the style properties of the style object, so make sure that they are all read here,
            // so that the user of the function can be sure that it will perform the layout here, instead of later (important for batching).
            var elementStyle            = window.getComputedStyle(element);
            var style                   = {};
            style.position              = elementStyle.position;
            style.width                 = element.offsetWidth;
            style.height                = element.offsetHeight;
            style.top                   = elementStyle.top;
            style.right                 = elementStyle.right;
            style.bottom                = elementStyle.bottom;
            style.left                  = elementStyle.left;
            style.widthCSS              = elementStyle.width;
            style.heightCSS             = elementStyle.height;
            return style;
        }

        function storeStartSize() {
            var style = getStyle();
            getState(element).startSize = {
                width: style.width,
                height: style.height
            };
            debug("Element start size", getState(element).startSize);
        }

        function initListeners() {
            getState(element).listeners = [];
        }

        function storeStyle() {
            debug("storeStyle invoked.");
            if (!getState(element)) {
                debug("Aborting because element has been uninstalled");
                return;
            }

            var style = getStyle();
            getState(element).style = style;
        }

        function storeCurrentSize(element, width, height) {
            getState(element).lastWidth = width;
            getState(element).lastHeight  = height;
        }

        function getExpandChildElement(element) {
            return getExpandElement(element).childNodes[0];
        }

        function getWidthOffset() {
            return 2 * scrollbarSizes.width + 1;
        }

        function getHeightOffset() {
            return 2 * scrollbarSizes.height + 1;
        }

        function getExpandWidth(width) {
            return width + 10 + getWidthOffset();
        }

        function getExpandHeight(height) {
            return height + 10 + getHeightOffset();
        }

        function getShrinkWidth(width) {
            return width * 2 + getWidthOffset();
        }

        function getShrinkHeight(height) {
            return height * 2 + getHeightOffset();
        }

        function positionScrollbars(element, width, height) {
            var expand          = getExpandElement(element);
            var shrink          = getShrinkElement(element);
            var expandWidth     = getExpandWidth(width);
            var expandHeight    = getExpandHeight(height);
            var shrinkWidth     = getShrinkWidth(width);
            var shrinkHeight    = getShrinkHeight(height);
            expand.scrollLeft   = expandWidth;
            expand.scrollTop    = expandHeight;
            shrink.scrollLeft   = shrinkWidth;
            shrink.scrollTop    = shrinkHeight;
        }

        function injectContainerElement() {
            var container = getState(element).container;

            if (!container) {
                container                   = document.createElement("div");
                container.className         = detectionContainerClass;
                container.style.cssText     = buildCssTextString(["visibility: hidden", "display: inline", "width: 0px", "height: 0px", "z-index: -1", "overflow: hidden", "margin: 0", "padding: 0"]);
                getState(element).container = container;
                addAnimationClass(container);
                element.appendChild(container);

                var onAnimationStart = function () {
                    getState(element).onRendered && getState(element).onRendered();
                };

                addEvent(container, "animationstart", onAnimationStart);

                // Store the event handler here so that they may be removed when uninstall is called.
                // See uninstall function for an explanation why it is needed.
                getState(element).onAnimationStart = onAnimationStart;
            }

            return container;
        }

        function injectScrollElements() {
            function alterPositionStyles() {
                var style = getState(element).style;

                if(style.position === "static") {
                    element.style.setProperty("position", "relative",options.important ? "important" : "");

                    var removeRelativeStyles = function(reporter, element, style, property) {
                        function getNumericalValue(value) {
                            return value.replace(/[^-\d\.]/g, "");
                        }

                        var value = style[property];

                        if(value !== "auto" && getNumericalValue(value) !== "0") {
                            reporter.warn("An element that is positioned static has style." + property + "=" + value + " which is ignored due to the static positioning. The element will need to be positioned relative, so the style." + property + " will be set to 0. Element: ", element);
                            element.style[property] = 0;
                        }
                    };

                    //Check so that there are no accidental styles that will make the element styled differently now that is is relative.
                    //If there are any, set them to 0 (this should be okay with the user since the style properties did nothing before [since the element was positioned static] anyway).
                    removeRelativeStyles(reporter, element, style, "top");
                    removeRelativeStyles(reporter, element, style, "right");
                    removeRelativeStyles(reporter, element, style, "bottom");
                    removeRelativeStyles(reporter, element, style, "left");
                }
            }

            function getLeftTopBottomRightCssText(left, top, bottom, right) {
                left = (!left ? "0" : (left + "px"));
                top = (!top ? "0" : (top + "px"));
                bottom = (!bottom ? "0" : (bottom + "px"));
                right = (!right ? "0" : (right + "px"));

                return ["left: " + left, "top: " + top, "right: " + right, "bottom: " + bottom];
            }

            debug("Injecting elements");

            if (!getState(element)) {
                debug("Aborting because element has been uninstalled");
                return;
            }

            alterPositionStyles();

            var rootContainer = getState(element).container;

            if (!rootContainer) {
                rootContainer = injectContainerElement();
            }

            // Due to this WebKit bug https://bugs.webkit.org/show_bug.cgi?id=80808 (currently fixed in Blink, but still present in WebKit browsers such as Safari),
            // we need to inject two containers, one that is width/height 100% and another that is left/top -1px so that the final container always is 1x1 pixels bigger than
            // the targeted element.
            // When the bug is resolved, "containerContainer" may be removed.

            // The outer container can occasionally be less wide than the targeted when inside inline elements element in WebKit (see https://bugs.webkit.org/show_bug.cgi?id=152980).
            // This should be no problem since the inner container either way makes sure the injected scroll elements are at least 1x1 px.

            var scrollbarWidth          = scrollbarSizes.width;
            var scrollbarHeight         = scrollbarSizes.height;
            var containerContainerStyle = buildCssTextString(["position: absolute", "flex: none", "overflow: hidden", "z-index: -1", "visibility: hidden", "width: 100%", "height: 100%", "left: 0px", "top: 0px"]);
            var containerStyle          = buildCssTextString(["position: absolute", "flex: none", "overflow: hidden", "z-index: -1", "visibility: hidden"].concat(getLeftTopBottomRightCssText(-(1 + scrollbarWidth), -(1 + scrollbarHeight), -scrollbarHeight, -scrollbarWidth)));
            var expandStyle             = buildCssTextString(["position: absolute", "flex: none", "overflow: scroll", "z-index: -1", "visibility: hidden", "width: 100%", "height: 100%"]);
            var shrinkStyle             = buildCssTextString(["position: absolute", "flex: none", "overflow: scroll", "z-index: -1", "visibility: hidden", "width: 100%", "height: 100%"]);
            var expandChildStyle        = buildCssTextString(["position: absolute", "left: 0", "top: 0"]);
            var shrinkChildStyle        = buildCssTextString(["position: absolute", "width: 200%", "height: 200%"]);

            var containerContainer      = document.createElement("div");
            var container               = document.createElement("div");
            var expand                  = document.createElement("div");
            var expandChild             = document.createElement("div");
            var shrink                  = document.createElement("div");
            var shrinkChild             = document.createElement("div");

            // Some browsers choke on the resize system being rtl, so force it to ltr. https://github.com/wnr/element-resize-detector/issues/56
            // However, dir should not be set on the top level container as it alters the dimensions of the target element in some browsers.
            containerContainer.dir              = "ltr";

            containerContainer.style.cssText    = containerContainerStyle;
            containerContainer.className        = detectionContainerClass;
            container.className                 = detectionContainerClass;
            container.style.cssText             = containerStyle;
            expand.style.cssText                = expandStyle;
            expandChild.style.cssText           = expandChildStyle;
            shrink.style.cssText                = shrinkStyle;
            shrinkChild.style.cssText           = shrinkChildStyle;

            expand.appendChild(expandChild);
            shrink.appendChild(shrinkChild);
            container.appendChild(expand);
            container.appendChild(shrink);
            containerContainer.appendChild(container);
            rootContainer.appendChild(containerContainer);

            function onExpandScroll() {
                getState(element).onExpand && getState(element).onExpand();
            }

            function onShrinkScroll() {
                getState(element).onShrink && getState(element).onShrink();
            }

            addEvent(expand, "scroll", onExpandScroll);
            addEvent(shrink, "scroll", onShrinkScroll);

            // Store the event handlers here so that they may be removed when uninstall is called.
            // See uninstall function for an explanation why it is needed.
            getState(element).onExpandScroll = onExpandScroll;
            getState(element).onShrinkScroll = onShrinkScroll;
        }

        function registerListenersAndPositionElements() {
            function updateChildSizes(element, width, height) {
                var expandChild             = getExpandChildElement(element);
                var expandWidth             = getExpandWidth(width);
                var expandHeight            = getExpandHeight(height);
                expandChild.style.setProperty("width", expandWidth + "px", options.important ? "important" : "");
                expandChild.style.setProperty("height", expandHeight + "px", options.important ? "important" : "");
            }

            function updateDetectorElements(done) {
                var width           = element.offsetWidth;
                var height          = element.offsetHeight;

                // Check whether the size has actually changed since last time the algorithm ran. If not, some steps may be skipped.
                var sizeChanged = width !== getState(element).lastWidth || height !== getState(element).lastHeight;

                debug("Storing current size", width, height);

                // Store the size of the element sync here, so that multiple scroll events may be ignored in the event listeners.
                // Otherwise the if-check in handleScroll is useless.
                storeCurrentSize(element, width, height);

                // Since we delay the processing of the batch, there is a risk that uninstall has been called before the batch gets to execute.
                // Since there is no way to cancel the fn executions, we need to add an uninstall guard to all fns of the batch.

                batchProcessor.add(0, function performUpdateChildSizes() {
                    if (!sizeChanged) {
                        return;
                    }

                    if (!getState(element)) {
                        debug("Aborting because element has been uninstalled");
                        return;
                    }

                    if (!areElementsInjected()) {
                        debug("Aborting because element container has not been initialized");
                        return;
                    }

                    if (options.debug) {
                        var w = element.offsetWidth;
                        var h = element.offsetHeight;

                        if (w !== width || h !== height) {
                            reporter.warn(idHandler.get(element), "Scroll: Size changed before updating detector elements.");
                        }
                    }

                    updateChildSizes(element, width, height);
                });

                batchProcessor.add(1, function updateScrollbars() {
                    // This function needs to be invoked event though the size is unchanged. The element could have been resized very quickly and then
                    // been restored to the original size, which will have changed the scrollbar positions.

                    if (!getState(element)) {
                        debug("Aborting because element has been uninstalled");
                        return;
                    }

                    if (!areElementsInjected()) {
                        debug("Aborting because element container has not been initialized");
                        return;
                    }

                    positionScrollbars(element, width, height);
                });

                if (sizeChanged && done) {
                    batchProcessor.add(2, function () {
                        if (!getState(element)) {
                            debug("Aborting because element has been uninstalled");
                            return;
                        }

                        if (!areElementsInjected()) {
                          debug("Aborting because element container has not been initialized");
                          return;
                        }

                        done();
                    });
                }
            }

            function areElementsInjected() {
                return !!getState(element).container;
            }

            function notifyListenersIfNeeded() {
                function isFirstNotify() {
                    return getState(element).lastNotifiedWidth === undefined;
                }

                debug("notifyListenersIfNeeded invoked");

                var state = getState(element);

                // Don't notify if the current size is the start size, and this is the first notification.
                if (isFirstNotify() && state.lastWidth === state.startSize.width && state.lastHeight === state.startSize.height) {
                    return debug("Not notifying: Size is the same as the start size, and there has been no notification yet.");
                }

                // Don't notify if the size already has been notified.
                if (state.lastWidth === state.lastNotifiedWidth && state.lastHeight === state.lastNotifiedHeight) {
                    return debug("Not notifying: Size already notified");
                }


                debug("Current size not notified, notifying...");
                state.lastNotifiedWidth = state.lastWidth;
                state.lastNotifiedHeight = state.lastHeight;
                forEach(getState(element).listeners, function (listener) {
                    listener(element);
                });
            }

            function handleRender() {
                debug("startanimation triggered.");

                if (isUnrendered(element)) {
                    debug("Ignoring since element is still unrendered...");
                    return;
                }

                debug("Element rendered.");
                var expand = getExpandElement(element);
                var shrink = getShrinkElement(element);
                if (expand.scrollLeft === 0 || expand.scrollTop === 0 || shrink.scrollLeft === 0 || shrink.scrollTop === 0) {
                    debug("Scrollbars out of sync. Updating detector elements...");
                    updateDetectorElements(notifyListenersIfNeeded);
                }
            }

            function handleScroll() {
                debug("Scroll detected.");

                if (isUnrendered(element)) {
                    // Element is still unrendered. Skip this scroll event.
                    debug("Scroll event fired while unrendered. Ignoring...");
                    return;
                }

                updateDetectorElements(notifyListenersIfNeeded);
            }

            debug("registerListenersAndPositionElements invoked.");

            if (!getState(element)) {
                debug("Aborting because element has been uninstalled");
                return;
            }

            getState(element).onRendered = handleRender;
            getState(element).onExpand = handleScroll;
            getState(element).onShrink = handleScroll;

            var style = getState(element).style;
            updateChildSizes(element, style.width, style.height);
        }

        function finalizeDomMutation() {
            debug("finalizeDomMutation invoked.");

            if (!getState(element)) {
                debug("Aborting because element has been uninstalled");
                return;
            }

            var style = getState(element).style;
            storeCurrentSize(element, style.width, style.height);
            positionScrollbars(element, style.width, style.height);
        }

        function ready() {
            callback(element);
        }

        function install() {
            debug("Installing...");
            initListeners();
            storeStartSize();

            batchProcessor.add(0, storeStyle);
            batchProcessor.add(1, injectScrollElements);
            batchProcessor.add(2, registerListenersAndPositionElements);
            batchProcessor.add(3, finalizeDomMutation);
            batchProcessor.add(4, ready);
        }

        debug("Making detectable...");

        if (isDetached(element)) {
            debug("Element is detached");

            injectContainerElement();

            debug("Waiting until element is attached...");

            getState(element).onRendered = function () {
                debug("Element is now attached");
                install();
            };
        } else {
            install();
        }
    }

    function uninstall(element) {
        var state = getState(element);

        if (!state) {
            // Uninstall has been called on a non-erd element.
            return;
        }

        // Uninstall may have been called in the following scenarios:
        // (1) Right between the sync code and async batch (here state.busy = true, but nothing have been registered or injected).
        // (2) In the ready callback of the last level of the batch by another element (here, state.busy = true, but all the stuff has been injected).
        // (3) After the installation process (here, state.busy = false and all the stuff has been injected).
        // So to be on the safe side, let's check for each thing before removing.

        // We need to remove the event listeners, because otherwise the event might fire on an uninstall element which results in an error when trying to get the state of the element.
        state.onExpandScroll && removeEvent(getExpandElement(element), "scroll", state.onExpandScroll);
        state.onShrinkScroll && removeEvent(getShrinkElement(element), "scroll", state.onShrinkScroll);
        state.onAnimationStart && removeEvent(state.container, "animationstart", state.onAnimationStart);

        state.container && element.removeChild(state.container);
    }

    return {
        makeDetectable: makeDetectable,
        addListener: addListener,
        uninstall: uninstall,
        initDocument: initDocument
    };
};


/***/ }),

/***/ 2159:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var forEach                 = __webpack_require__(1898).forEach;
var elementUtilsMaker       = __webpack_require__(2160);
var listenerHandlerMaker    = __webpack_require__(2163);
var idGeneratorMaker        = __webpack_require__(2161);
var idHandlerMaker          = __webpack_require__(2162);
var reporterMaker           = __webpack_require__(2164);
var browserDetector         = __webpack_require__(1897);
var batchProcessorMaker     = __webpack_require__(2117);
var stateHandler            = __webpack_require__(2165);

//Detection strategies.
var objectStrategyMaker     = __webpack_require__(2157);
var scrollStrategyMaker     = __webpack_require__(2158);

function isCollection(obj) {
    return Array.isArray(obj) || obj.length !== undefined;
}

function toArray(collection) {
    if (!Array.isArray(collection)) {
        var array = [];
        forEach(collection, function (obj) {
            array.push(obj);
        });
        return array;
    } else {
        return collection;
    }
}

function isElement(obj) {
    return obj && obj.nodeType === 1;
}

/**
 * @typedef idHandler
 * @type {object}
 * @property {function} get Gets the resize detector id of the element.
 * @property {function} set Generate and sets the resize detector id of the element.
 */

/**
 * @typedef Options
 * @type {object}
 * @property {boolean} callOnAdd    Determines if listeners should be called when they are getting added.
                                    Default is true. If true, the listener is guaranteed to be called when it has been added.
                                    If false, the listener will not be guarenteed to be called when it has been added (does not prevent it from being called).
 * @property {idHandler} idHandler  A custom id handler that is responsible for generating, setting and retrieving id's for elements.
                                    If not provided, a default id handler will be used.
 * @property {reporter} reporter    A custom reporter that handles reporting logs, warnings and errors.
                                    If not provided, a default id handler will be used.
                                    If set to false, then nothing will be reported.
 * @property {boolean} debug        If set to true, the the system will report debug messages as default for the listenTo method.
 */

/**
 * Creates an element resize detector instance.
 * @public
 * @param {Options?} options Optional global options object that will decide how this instance will work.
 */
module.exports = function(options) {
    options = options || {};

    //idHandler is currently not an option to the listenTo function, so it should not be added to globalOptions.
    var idHandler;

    if (options.idHandler) {
        // To maintain compatability with idHandler.get(element, readonly), make sure to wrap the given idHandler
        // so that readonly flag always is true when it's used here. This may be removed next major version bump.
        idHandler = {
            get: function (element) { return options.idHandler.get(element, true); },
            set: options.idHandler.set
        };
    } else {
        var idGenerator = idGeneratorMaker();
        var defaultIdHandler = idHandlerMaker({
            idGenerator: idGenerator,
            stateHandler: stateHandler
        });
        idHandler = defaultIdHandler;
    }

    //reporter is currently not an option to the listenTo function, so it should not be added to globalOptions.
    var reporter = options.reporter;

    if(!reporter) {
        //If options.reporter is false, then the reporter should be quiet.
        var quiet = reporter === false;
        reporter = reporterMaker(quiet);
    }

    //batchProcessor is currently not an option to the listenTo function, so it should not be added to globalOptions.
    var batchProcessor = getOption(options, "batchProcessor", batchProcessorMaker({ reporter: reporter }));

    //Options to be used as default for the listenTo function.
    var globalOptions = {};
    globalOptions.callOnAdd     = !!getOption(options, "callOnAdd", true);
    globalOptions.debug         = !!getOption(options, "debug", false);

    var eventListenerHandler    = listenerHandlerMaker(idHandler);
    var elementUtils            = elementUtilsMaker({
        stateHandler: stateHandler
    });

    //The detection strategy to be used.
    var detectionStrategy;
    var desiredStrategy = getOption(options, "strategy", "object");
    var importantCssRules = getOption(options, "important", false);
    var strategyOptions = {
        reporter: reporter,
        batchProcessor: batchProcessor,
        stateHandler: stateHandler,
        idHandler: idHandler,
        important: importantCssRules
    };

    if(desiredStrategy === "scroll") {
        if (browserDetector.isLegacyOpera()) {
            reporter.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy.");
            desiredStrategy = "object";
        } else if (browserDetector.isIE(9)) {
            reporter.warn("Scroll strategy is not supported on IE9. Changing to object strategy.");
            desiredStrategy = "object";
        }
    }

    if(desiredStrategy === "scroll") {
        detectionStrategy = scrollStrategyMaker(strategyOptions);
    } else if(desiredStrategy === "object") {
        detectionStrategy = objectStrategyMaker(strategyOptions);
    } else {
        throw new Error("Invalid strategy name: " + desiredStrategy);
    }

    //Calls can be made to listenTo with elements that are still being installed.
    //Also, same elements can occur in the elements list in the listenTo function.
    //With this map, the ready callbacks can be synchronized between the calls
    //so that the ready callback can always be called when an element is ready - even if
    //it wasn't installed from the function itself.
    var onReadyCallbacks = {};

    /**
     * Makes the given elements resize-detectable and starts listening to resize events on the elements. Calls the event callback for each event for each element.
     * @public
     * @param {Options?} options Optional options object. These options will override the global options. Some options may not be overriden, such as idHandler.
     * @param {element[]|element} elements The given array of elements to detect resize events of. Single element is also valid.
     * @param {function} listener The callback to be executed for each resize event for each element.
     */
    function listenTo(options, elements, listener) {
        function onResizeCallback(element) {
            var listeners = eventListenerHandler.get(element);
            forEach(listeners, function callListenerProxy(listener) {
                listener(element);
            });
        }

        function addListener(callOnAdd, element, listener) {
            eventListenerHandler.add(element, listener);

            if(callOnAdd) {
                listener(element);
            }
        }

        //Options object may be omitted.
        if(!listener) {
            listener = elements;
            elements = options;
            options = {};
        }

        if(!elements) {
            throw new Error("At least one element required.");
        }

        if(!listener) {
            throw new Error("Listener required.");
        }

        if (isElement(elements)) {
            // A single element has been passed in.
            elements = [elements];
        } else if (isCollection(elements)) {
            // Convert collection to array for plugins.
            // TODO: May want to check so that all the elements in the collection are valid elements.
            elements = toArray(elements);
        } else {
            return reporter.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");
        }

        var elementsReady = 0;

        var callOnAdd = getOption(options, "callOnAdd", globalOptions.callOnAdd);
        var onReadyCallback = getOption(options, "onReady", function noop() {});
        var debug = getOption(options, "debug", globalOptions.debug);

        forEach(elements, function attachListenerToElement(element) {
            if (!stateHandler.getState(element)) {
                stateHandler.initState(element);
                idHandler.set(element);
            }

            var id = idHandler.get(element);

            debug && reporter.log("Attaching listener to element", id, element);

            if(!elementUtils.isDetectable(element)) {
                debug && reporter.log(id, "Not detectable.");
                if(elementUtils.isBusy(element)) {
                    debug && reporter.log(id, "System busy making it detectable");

                    //The element is being prepared to be detectable. Do not make it detectable.
                    //Just add the listener, because the element will soon be detectable.
                    addListener(callOnAdd, element, listener);
                    onReadyCallbacks[id] = onReadyCallbacks[id] || [];
                    onReadyCallbacks[id].push(function onReady() {
                        elementsReady++;

                        if(elementsReady === elements.length) {
                            onReadyCallback();
                        }
                    });
                    return;
                }

                debug && reporter.log(id, "Making detectable...");
                //The element is not prepared to be detectable, so do prepare it and add a listener to it.
                elementUtils.markBusy(element, true);
                return detectionStrategy.makeDetectable({ debug: debug, important: importantCssRules }, element, function onElementDetectable(element) {
                    debug && reporter.log(id, "onElementDetectable");

                    if (stateHandler.getState(element)) {
                        elementUtils.markAsDetectable(element);
                        elementUtils.markBusy(element, false);
                        detectionStrategy.addListener(element, onResizeCallback);
                        addListener(callOnAdd, element, listener);

                        // Since the element size might have changed since the call to "listenTo", we need to check for this change,
                        // so that a resize event may be emitted.
                        // Having the startSize object is optional (since it does not make sense in some cases such as unrendered elements), so check for its existance before.
                        // Also, check the state existance before since the element may have been uninstalled in the installation process.
                        var state = stateHandler.getState(element);
                        if (state && state.startSize) {
                            var width = element.offsetWidth;
                            var height = element.offsetHeight;
                            if (state.startSize.width !== width || state.startSize.height !== height) {
                                onResizeCallback(element);
                            }
                        }

                        if(onReadyCallbacks[id]) {
                            forEach(onReadyCallbacks[id], function(callback) {
                                callback();
                            });
                        }
                    } else {
                        // The element has been unisntalled before being detectable.
                        debug && reporter.log(id, "Element uninstalled before being detectable.");
                    }

                    delete onReadyCallbacks[id];

                    elementsReady++;
                    if(elementsReady === elements.length) {
                        onReadyCallback();
                    }
                });
            }

            debug && reporter.log(id, "Already detecable, adding listener.");

            //The element has been prepared to be detectable and is ready to be listened to.
            addListener(callOnAdd, element, listener);
            elementsReady++;
        });

        if(elementsReady === elements.length) {
            onReadyCallback();
        }
    }

    function uninstall(elements) {
        if(!elements) {
            return reporter.error("At least one element is required.");
        }

        if (isElement(elements)) {
            // A single element has been passed in.
            elements = [elements];
        } else if (isCollection(elements)) {
            // Convert collection to array for plugins.
            // TODO: May want to check so that all the elements in the collection are valid elements.
            elements = toArray(elements);
        } else {
            return reporter.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");
        }

        forEach(elements, function (element) {
            eventListenerHandler.removeAllListeners(element);
            detectionStrategy.uninstall(element);
            stateHandler.cleanState(element);
        });
    }

    function initDocument(targetDocument) {
        detectionStrategy.initDocument && detectionStrategy.initDocument(targetDocument);
    }

    return {
        listenTo: listenTo,
        removeListener: eventListenerHandler.removeListener,
        removeAllListeners: eventListenerHandler.removeAllListeners,
        uninstall: uninstall,
        initDocument: initDocument
    };
};

function getOption(options, name, defaultValue) {
    var value = options[name];

    if((value === undefined || value === null) && defaultValue !== undefined) {
        return defaultValue;
    }

    return value;
}


/***/ }),

/***/ 2160:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function(options) {
    var getState = options.stateHandler.getState;

    /**
     * Tells if the element has been made detectable and ready to be listened for resize events.
     * @public
     * @param {element} The element to check.
     * @returns {boolean} True or false depending on if the element is detectable or not.
     */
    function isDetectable(element) {
        var state = getState(element);
        return state && !!state.isDetectable;
    }

    /**
     * Marks the element that it has been made detectable and ready to be listened for resize events.
     * @public
     * @param {element} The element to mark.
     */
    function markAsDetectable(element) {
        getState(element).isDetectable = true;
    }

    /**
     * Tells if the element is busy or not.
     * @public
     * @param {element} The element to check.
     * @returns {boolean} True or false depending on if the element is busy or not.
     */
    function isBusy(element) {
        return !!getState(element).busy;
    }

    /**
     * Marks the object is busy and should not be made detectable.
     * @public
     * @param {element} element The element to mark.
     * @param {boolean} busy If the element is busy or not.
     */
    function markBusy(element, busy) {
        getState(element).busy = !!busy;
    }

    return {
        isDetectable: isDetectable,
        markAsDetectable: markAsDetectable,
        isBusy: isBusy,
        markBusy: markBusy
    };
};


/***/ }),

/***/ 2161:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function() {
    var idCount = 1;

    /**
     * Generates a new unique id in the context.
     * @public
     * @returns {number} A unique id in the context.
     */
    function generate() {
        return idCount++;
    }

    return {
        generate: generate
    };
};


/***/ }),

/***/ 2162:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function(options) {
    var idGenerator     = options.idGenerator;
    var getState        = options.stateHandler.getState;

    /**
     * Gets the resize detector id of the element.
     * @public
     * @param {element} element The target element to get the id of.
     * @returns {string|number|null} The id of the element. Null if it has no id.
     */
    function getId(element) {
        var state = getState(element);

        if (state && state.id !== undefined) {
            return state.id;
        }

        return null;
    }

    /**
     * Sets the resize detector id of the element. Requires the element to have a resize detector state initialized.
     * @public
     * @param {element} element The target element to set the id of.
     * @returns {string|number|null} The id of the element.
     */
    function setId(element) {
        var state = getState(element);

        if (!state) {
            throw new Error("setId required the element to have a resize detection state.");
        }

        var id = idGenerator.generate();

        state.id = id;

        return id;
    }

    return {
        get: getId,
        set: setId
    };
};


/***/ }),

/***/ 2163:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function(idHandler) {
    var eventListeners = {};

    /**
     * Gets all listeners for the given element.
     * @public
     * @param {element} element The element to get all listeners for.
     * @returns All listeners for the given element.
     */
    function getListeners(element) {
        var id = idHandler.get(element);

        if (id === undefined) {
            return [];
        }

        return eventListeners[id] || [];
    }

    /**
     * Stores the given listener for the given element. Will not actually add the listener to the element.
     * @public
     * @param {element} element The element that should have the listener added.
     * @param {function} listener The callback that the element has added.
     */
    function addListener(element, listener) {
        var id = idHandler.get(element);

        if(!eventListeners[id]) {
            eventListeners[id] = [];
        }

        eventListeners[id].push(listener);
    }

    function removeListener(element, listener) {
        var listeners = getListeners(element);
        for (var i = 0, len = listeners.length; i < len; ++i) {
            if (listeners[i] === listener) {
              listeners.splice(i, 1);
              break;
            }
        }
    }

    function removeAllListeners(element) {
      var listeners = getListeners(element);
      if (!listeners) { return; }
      listeners.length = 0;
    }

    return {
        get: getListeners,
        add: addListener,
        removeListener: removeListener,
        removeAllListeners: removeAllListeners
    };
};


/***/ }),

/***/ 2164:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* global console: false */

/**
 * Reporter that handles the reporting of logs, warnings and errors.
 * @public
 * @param {boolean} quiet Tells if the reporter should be quiet or not.
 */
module.exports = function(quiet) {
    function noop() {
        //Does nothing.
    }

    var reporter = {
        log: noop,
        warn: noop,
        error: noop
    };

    if(!quiet && window.console) {
        var attachFunction = function(reporter, name) {
            //The proxy is needed to be able to call the method with the console context,
            //since we cannot use bind.
            reporter[name] = function reporterProxy() {
                var f = console[name];
                if (f.apply) { //IE9 does not support console.log.apply :)
                    f.apply(console, arguments);
                } else {
                    for (var i = 0; i < arguments.length; i++) {
                        f(arguments[i]);
                    }
                }
            };
        };

        attachFunction(reporter, "log");
        attachFunction(reporter, "warn");
        attachFunction(reporter, "error");
    }

    return reporter;
};

/***/ }),

/***/ 2165:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var prop = "_erd";

function initState(element) {
    element[prop] = {};
    return getState(element);
}

function getState(element) {
    return element[prop];
}

function cleanState(element) {
    delete element[prop];
}

module.exports = {
    initState: initState,
    getState: getState,
    cleanState: cleanState
};


/***/ }),

/***/ 2166:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(2144);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../css-loader/index.js!./Timeline.css", function() {
			var newContent = require("!!../../css-loader/index.js!./Timeline.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 2169:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(2147);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./pictureGrid.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./pictureGrid.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 2173:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(2153);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./pictureGrid.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./pictureGrid.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 2174:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(2154);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./pictureGrid.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./pictureGrid.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 2175:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(2155);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../node_modules/css-loader/index.js!./TimeLine.css", function() {
			var newContent = require("!!../../../node_modules/css-loader/index.js!./TimeLine.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 2176:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(2156);
if(typeof content === 'string') content = [[module.i, content, '']];
// add the styles to the DOM
var update = __webpack_require__(1460)(content, {});
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../../../../node_modules/css-loader/index.js!./Header.css", function() {
			var newContent = require("!!../../../../../node_modules/css-loader/index.js!./Header.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ 2178:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */



var emptyFunction = __webpack_require__(2258);

/**
 * Similar to invariant but only logs a warning if the condition is not met.
 * This can be used to log issues in development environments in critical
 * paths. Removing the logging code for production environments will keep the
 * same logic and follow the same code paths.
 */

var warning = emptyFunction;

if (false) {
  var printWarning = function printWarning(format) {
    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    var argIndex = 0;
    var message = 'Warning: ' + format.replace(/%s/g, function () {
      return args[argIndex++];
    });
    if (typeof console !== 'undefined') {
      console.error(message);
    }
    try {
      // --- Welcome to debugging React ---
      // This error was thrown as a convenience so that you can use this stack
      // to find the callsite that caused this warning to fire.
      throw new Error(message);
    } catch (x) {}
  };

  warning = function warning(condition, format) {
    if (format === undefined) {
      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');
    }

    if (format.indexOf('Failed Composite propType: ') === 0) {
      return; // Ignore CompositeComponent proptype check.
    }

    if (!condition) {
      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {
        args[_key2 - 2] = arguments[_key2];
      }

      printWarning.apply(undefined, [format].concat(args));
    }
  };
}

module.exports = warning;

/***/ }),

/***/ 2179:
/***/ (function(module, exports) {

module.exports = "./images/fine-0a1bf1a751bea958480097f40b90ff48.png";

/***/ }),

/***/ 2180:
/***/ (function(module, exports) {

module.exports = "./images/fog-abb3d4eca9bd741daff30127bbc8ca21.png";

/***/ }),

/***/ 2181:
/***/ (function(module, exports) {

module.exports = "./images/rain-761396ace54bb00a28e6522ad02f4351.png";

/***/ }),

/***/ 2182:
/***/ (function(module, exports) {

module.exports = "./images/snow-513a34cd298bad9c8aef5cb9c7a46817.png";

/***/ }),

/***/ 2186:
/***/ (function(module, exports, __webpack_require__) {

var require;var require;/**
 * interact.js v1.3.4
 *
 * Copyright (c) 2012-2018 Taye Adeyemi <dev@taye.me>
 * Released under the MIT License.
 * https://raw.github.com/taye/interact.js/master/LICENSE
 */
(function(f){if(true){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.interact = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

/*
 * In a (windowless) server environment this file exports a factory function
 * that takes the window to use.
 *
 *     var interact = require('interact.js')(windowObject);
 *
 * See https://github.com/taye/interact.js/issues/187
 */
if (typeof window === 'undefined') {
  module.exports = function (window) {
    require('./src/utils/window').init(window);

    return require('./src/index');
  };
} else {
  module.exports = require('./src/index');
}

},{"./src/index":19,"./src/utils/window":52}],2:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var extend = require('./utils/extend.js');

function fireUntilImmediateStopped(event, listeners) {
  for (var _i = 0; _i < listeners.length; _i++) {
    var _ref;

    _ref = listeners[_i];
    var listener = _ref;

    if (event.immediatePropagationStopped) {
      break;
    }

    listener(event);
  }
}

var Eventable = function () {
  function Eventable(options) {
    _classCallCheck(this, Eventable);

    this.options = extend({}, options || {});
  }

  Eventable.prototype.fire = function fire(event) {
    var listeners = void 0;
    var onEvent = 'on' + event.type;
    var global = this.global;

    // Interactable#on() listeners
    if (listeners = this[event.type]) {
      fireUntilImmediateStopped(event, listeners);
    }

    // interactable.onevent listener
    if (this[onEvent]) {
      this[onEvent](event);
    }

    // interact.on() listeners
    if (!event.propagationStopped && global && (listeners = global[event.type])) {
      fireUntilImmediateStopped(event, listeners);
    }
  };

  Eventable.prototype.on = function on(eventType, listener) {
    // if this type of event was never bound
    if (this[eventType]) {
      this[eventType].push(listener);
    } else {
      this[eventType] = [listener];
    }
  };

  Eventable.prototype.off = function off(eventType, listener) {
    // if it is an action event type
    var eventList = this[eventType];
    var index = eventList ? eventList.indexOf(listener) : -1;

    if (index !== -1) {
      eventList.splice(index, 1);
    }

    if (eventList && eventList.length === 0 || !listener) {
      this[eventType] = undefined;
    }
  };

  return Eventable;
}();

module.exports = Eventable;

},{"./utils/extend.js":41}],3:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var extend = require('./utils/extend');
var getOriginXY = require('./utils/getOriginXY');
var defaults = require('./defaultOptions');
var signals = require('./utils/Signals').new();

var InteractEvent = function () {
  /** */
  function InteractEvent(interaction, event, action, phase, element, related) {
    var preEnd = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;

    _classCallCheck(this, InteractEvent);

    var target = interaction.target;
    var deltaSource = (target && target.options || defaults).deltaSource;
    var origin = getOriginXY(target, element, action);
    var starting = phase === 'start';
    var ending = phase === 'end';
    var coords = starting ? interaction.startCoords : interaction.curCoords;
    var prevEvent = interaction.prevEvent;

    element = element || interaction.element;

    var page = extend({}, coords.page);
    var client = extend({}, coords.client);

    page.x -= origin.x;
    page.y -= origin.y;

    client.x -= origin.x;
    client.y -= origin.y;

    this.ctrlKey = event.ctrlKey;
    this.altKey = event.altKey;
    this.shiftKey = event.shiftKey;
    this.metaKey = event.metaKey;
    this.button = event.button;
    this.buttons = event.buttons;
    this.target = element;
    this.currentTarget = element;
    this.relatedTarget = related || null;
    this.preEnd = preEnd;
    this.type = action + (phase || '');
    this.interaction = interaction;
    this.interactable = target;

    this.t0 = starting ? interaction.downTimes[interaction.downTimes.length - 1] : prevEvent.t0;

    var signalArg = {
      interaction: interaction,
      event: event,
      action: action,
      phase: phase,
      element: element,
      related: related,
      page: page,
      client: client,
      coords: coords,
      starting: starting,
      ending: ending,
      deltaSource: deltaSource,
      iEvent: this
    };

    signals.fire('set-xy', signalArg);

    if (ending) {
      // use previous coords when ending
      this.pageX = prevEvent.pageX;
      this.pageY = prevEvent.pageY;
      this.clientX = prevEvent.clientX;
      this.clientY = prevEvent.clientY;
    } else {
      this.pageX = page.x;
      this.pageY = page.y;
      this.clientX = client.x;
      this.clientY = client.y;
    }

    this.x0 = interaction.startCoords.page.x - origin.x;
    this.y0 = interaction.startCoords.page.y - origin.y;
    this.clientX0 = interaction.startCoords.client.x - origin.x;
    this.clientY0 = interaction.startCoords.client.y - origin.y;

    signals.fire('set-delta', signalArg);

    this.timeStamp = coords.timeStamp;
    this.dt = interaction.pointerDelta.timeStamp;
    this.duration = this.timeStamp - this.t0;

    // speed and velocity in pixels per second
    this.speed = interaction.pointerDelta[deltaSource].speed;
    this.velocityX = interaction.pointerDelta[deltaSource].vx;
    this.velocityY = interaction.pointerDelta[deltaSource].vy;

    this.swipe = ending || phase === 'inertiastart' ? this.getSwipe() : null;

    signals.fire('new', signalArg);
  }

  InteractEvent.prototype.getSwipe = function getSwipe() {
    var interaction = this.interaction;

    if (interaction.prevEvent.speed < 600 || this.timeStamp - interaction.prevEvent.timeStamp > 150) {
      return null;
    }

    var angle = 180 * Math.atan2(interaction.prevEvent.velocityY, interaction.prevEvent.velocityX) / Math.PI;
    var overlap = 22.5;

    if (angle < 0) {
      angle += 360;
    }

    var left = 135 - overlap <= angle && angle < 225 + overlap;
    var up = 225 - overlap <= angle && angle < 315 + overlap;

    var right = !left && (315 - overlap <= angle || angle < 45 + overlap);
    var down = !up && 45 - overlap <= angle && angle < 135 + overlap;

    return {
      up: up,
      down: down,
      left: left,
      right: right,
      angle: angle,
      speed: interaction.prevEvent.speed,
      velocity: {
        x: interaction.prevEvent.velocityX,
        y: interaction.prevEvent.velocityY
      }
    };
  };

  InteractEvent.prototype.preventDefault = function preventDefault() {};

  /** */


  InteractEvent.prototype.stopImmediatePropagation = function stopImmediatePropagation() {
    this.immediatePropagationStopped = this.propagationStopped = true;
  };

  /** */


  InteractEvent.prototype.stopPropagation = function stopPropagation() {
    this.propagationStopped = true;
  };

  return InteractEvent;
}();

signals.on('set-delta', function (_ref) {
  var iEvent = _ref.iEvent,
      interaction = _ref.interaction,
      starting = _ref.starting,
      deltaSource = _ref.deltaSource;

  var prevEvent = starting ? iEvent : interaction.prevEvent;

  if (deltaSource === 'client') {
    iEvent.dx = iEvent.clientX - prevEvent.clientX;
    iEvent.dy = iEvent.clientY - prevEvent.clientY;
  } else {
    iEvent.dx = iEvent.pageX - prevEvent.pageX;
    iEvent.dy = iEvent.pageY - prevEvent.pageY;
  }
});

InteractEvent.signals = signals;

module.exports = InteractEvent;

},{"./defaultOptions":18,"./utils/Signals":34,"./utils/extend":41,"./utils/getOriginXY":42}],4:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var clone = require('./utils/clone');
var is = require('./utils/is');
var events = require('./utils/events');
var extend = require('./utils/extend');
var actions = require('./actions/base');
var scope = require('./scope');
var Eventable = require('./Eventable');
var defaults = require('./defaultOptions');
var signals = require('./utils/Signals').new();

var _require = require('./utils/domUtils'),
    getElementRect = _require.getElementRect,
    nodeContains = _require.nodeContains,
    trySelector = _require.trySelector,
    matchesSelector = _require.matchesSelector;

var _require2 = require('./utils/window'),
    getWindow = _require2.getWindow;

var _require3 = require('./utils/arr'),
    contains = _require3.contains;

var _require4 = require('./utils/browser'),
    wheelEvent = _require4.wheelEvent;

// all set interactables


scope.interactables = [];

var Interactable = function () {
  /** */
  function Interactable(target, options) {
    _classCallCheck(this, Interactable);

    options = options || {};

    this.target = target;
    this.events = new Eventable();
    this._context = options.context || scope.document;
    this._win = getWindow(trySelector(target) ? this._context : target);
    this._doc = this._win.document;

    signals.fire('new', {
      target: target,
      options: options,
      interactable: this,
      win: this._win
    });

    scope.addDocument(this._doc, this._win);

    scope.interactables.push(this);

    this.set(options);
  }

  Interactable.prototype.setOnEvents = function setOnEvents(action, phases) {
    var onAction = 'on' + action;

    if (is.function(phases.onstart)) {
      this.events[onAction + 'start'] = phases.onstart;
    }
    if (is.function(phases.onmove)) {
      this.events[onAction + 'move'] = phases.onmove;
    }
    if (is.function(phases.onend)) {
      this.events[onAction + 'end'] = phases.onend;
    }
    if (is.function(phases.oninertiastart)) {
      this.events[onAction + 'inertiastart'] = phases.oninertiastart;
    }

    return this;
  };

  Interactable.prototype.setPerAction = function setPerAction(action, options) {
    // for all the default per-action options
    for (var option in options) {
      // if this option exists for this action
      if (option in defaults[action]) {
        // if the option in the options arg is an object value
        if (is.object(options[option])) {
          // duplicate the object and merge
          this.options[action][option] = clone(this.options[action][option] || {});
          extend(this.options[action][option], options[option]);

          if (is.object(defaults.perAction[option]) && 'enabled' in defaults.perAction[option]) {
            this.options[action][option].enabled = options[option].enabled === false ? false : true;
          }
        } else if (is.bool(options[option]) && is.object(defaults.perAction[option])) {
          this.options[action][option].enabled = options[option];
        } else if (options[option] !== undefined) {
          // or if it's not undefined, do a plain assignment
          this.options[action][option] = options[option];
        }
      }
    }
  };

  /**
   * The default function to get an Interactables bounding rect. Can be
   * overridden using {@link Interactable.rectChecker}.
   *
   * @param {Element} [element] The element to measure.
   * @return {object} The object's bounding rectangle.
   */


  Interactable.prototype.getRect = function getRect(element) {
    element = element || this.target;

    if (is.string(this.target) && !is.element(element)) {
      element = this._context.querySelector(this.target);
    }

    return getElementRect(element);
  };

  /**
   * Returns or sets the function used to calculate the interactable's
   * element's rectangle
   *
   * @param {function} [checker] A function which returns this Interactable's
   * bounding rectangle. See {@link Interactable.getRect}
   * @return {function | object} The checker function or this Interactable
   */


  Interactable.prototype.rectChecker = function rectChecker(checker) {
    if (is.function(checker)) {
      this.getRect = checker;

      return this;
    }

    if (checker === null) {
      delete this.options.getRect;

      return this;
    }

    return this.getRect;
  };

  Interactable.prototype._backCompatOption = function _backCompatOption(optionName, newValue) {
    if (trySelector(newValue) || is.object(newValue)) {
      this.options[optionName] = newValue;

      for (var _i = 0; _i < actions.names.length; _i++) {
        var _ref;

        _ref = actions.names[_i];
        var action = _ref;

        this.options[action][optionName] = newValue;
      }

      return this;
    }

    return this.options[optionName];
  };

  /**
   * Gets or sets the origin of the Interactable's element.  The x and y
   * of the origin will be subtracted from action event coordinates.
   *
   * @param {Element | object | string} [origin] An HTML or SVG Element whose
   * rect will be used, an object eg. { x: 0, y: 0 } or string 'parent', 'self'
   * or any CSS selector
   *
   * @return {object} The current origin or this Interactable
   */


  Interactable.prototype.origin = function origin(newValue) {
    return this._backCompatOption('origin', newValue);
  };

  /**
   * Returns or sets the mouse coordinate types used to calculate the
   * movement of the pointer.
   *
   * @param {string} [newValue] Use 'client' if you will be scrolling while
   * interacting; Use 'page' if you want autoScroll to work
   * @return {string | object} The current deltaSource or this Interactable
   */


  Interactable.prototype.deltaSource = function deltaSource(newValue) {
    if (newValue === 'page' || newValue === 'client') {
      this.options.deltaSource = newValue;

      return this;
    }

    return this.options.deltaSource;
  };

  /**
   * Gets the selector context Node of the Interactable. The default is
   * `window.document`.
   *
   * @return {Node} The context Node of this Interactable
   */


  Interactable.prototype.context = function context() {
    return this._context;
  };

  Interactable.prototype.inContext = function inContext(element) {
    return this._context === element.ownerDocument || nodeContains(this._context, element);
  };

  /**
   * Calls listeners for the given InteractEvent type bound globally
   * and directly to this Interactable
   *
   * @param {InteractEvent} iEvent The InteractEvent object to be fired on this
   * Interactable
   * @return {Interactable} this Interactable
   */


  Interactable.prototype.fire = function fire(iEvent) {
    this.events.fire(iEvent);

    return this;
  };

  Interactable.prototype._onOffMultiple = function _onOffMultiple(method, eventType, listener, options) {
    if (is.string(eventType) && eventType.search(' ') !== -1) {
      eventType = eventType.trim().split(/ +/);
    }

    if (is.array(eventType)) {
      for (var _i2 = 0; _i2 < eventType.length; _i2++) {
        var _ref2;

        _ref2 = eventType[_i2];
        var type = _ref2;

        this[method](type, listener, options);
      }

      return true;
    }

    if (is.object(eventType)) {
      for (var prop in eventType) {
        this[method](prop, eventType[prop], listener);
      }

      return true;
    }
  };

  /**
   * Binds a listener for an InteractEvent, pointerEvent or DOM event.
   *
   * @param {string | array | object} eventType  The types of events to listen
   * for
   * @param {function} listener   The function event (s)
   * @param {object | boolean} [options]    options object or useCapture flag
   * for addEventListener
   * @return {object} This Interactable
   */


  Interactable.prototype.on = function on(eventType, listener, options) {
    if (this._onOffMultiple('on', eventType, listener, options)) {
      return this;
    }

    if (eventType === 'wheel') {
      eventType = wheelEvent;
    }

    if (contains(Interactable.eventTypes, eventType)) {
      this.events.on(eventType, listener);
    }
    // delegated event for selector
    else if (is.string(this.target)) {
        events.addDelegate(this.target, this._context, eventType, listener, options);
      } else {
        events.add(this.target, eventType, listener, options);
      }

    return this;
  };

  /**
   * Removes an InteractEvent, pointerEvent or DOM event listener
   *
   * @param {string | array | object} eventType The types of events that were
   * listened for
   * @param {function} listener The listener function to be removed
   * @param {object | boolean} [options] options object or useCapture flag for
   * removeEventListener
   * @return {object} This Interactable
   */


  Interactable.prototype.off = function off(eventType, listener, options) {
    if (this._onOffMultiple('off', eventType, listener, options)) {
      return this;
    }

    if (eventType === 'wheel') {
      eventType = wheelEvent;
    }

    // if it is an action event type
    if (contains(Interactable.eventTypes, eventType)) {
      this.events.off(eventType, listener);
    }
    // delegated event
    else if (is.string(this.target)) {
        events.removeDelegate(this.target, this._context, eventType, listener, options);
      }
      // remove listener from this Interatable's element
      else {
          events.remove(this.target, eventType, listener, options);
        }

    return this;
  };

  /**
   * Reset the options of this Interactable
   *
   * @param {object} options The new settings to apply
   * @return {object} This Interactable
   */


  Interactable.prototype.set = function set(options) {
    if (!is.object(options)) {
      options = {};
    }

    this.options = clone(defaults.base);

    var perActions = clone(defaults.perAction);

    for (var actionName in actions.methodDict) {
      var methodName = actions.methodDict[actionName];

      this.options[actionName] = clone(defaults[actionName]);

      this.setPerAction(actionName, perActions);

      this[methodName](options[actionName]);
    }

    for (var _i3 = 0; _i3 < Interactable.settingsMethods.length; _i3++) {
      var _ref3;

      _ref3 = Interactable.settingsMethods[_i3];
      var setting = _ref3;

      this.options[setting] = defaults.base[setting];

      if (setting in options) {
        this[setting](options[setting]);
      }
    }

    signals.fire('set', {
      options: options,
      interactable: this
    });

    return this;
  };

  /**
   * Remove this interactable from the list of interactables and remove it's
   * action capabilities and event listeners
   *
   * @return {interact}
   */


  Interactable.prototype.unset = function unset() {
    events.remove(this.target, 'all');

    if (is.string(this.target)) {
      // remove delegated events
      for (var type in events.delegatedEvents) {
        var delegated = events.delegatedEvents[type];

        if (delegated.selectors[0] === this.target && delegated.contexts[0] === this._context) {

          delegated.selectors.splice(0, 1);
          delegated.contexts.splice(0, 1);
          delegated.listeners.splice(0, 1);

          // remove the arrays if they are empty
          if (!delegated.selectors.length) {
            delegated[type] = null;
          }
        }

        events.remove(this._context, type, events.delegateListener);
        events.remove(this._context, type, events.delegateUseCapture, true);
      }
    } else {
      events.remove(this, 'all');
    }

    signals.fire('unset', { interactable: this });

    scope.interactables.splice(scope.interactables.indexOf(this), 1);

    // Stop related interactions when an Interactable is unset
    for (var _i4 = 0; _i4 < (scope.interactions || []).length; _i4++) {
      var _ref4;

      _ref4 = (scope.interactions || [])[_i4];
      var interaction = _ref4;

      if (interaction.target === this && interaction.interacting() && !interaction._ending) {
        interaction.stop();
      }
    }

    return scope.interact;
  };

  return Interactable;
}();

scope.interactables.indexOfElement = function indexOfElement(target, context) {
  context = context || scope.document;

  for (var i = 0; i < this.length; i++) {
    var interactable = this[i];

    if (interactable.target === target && interactable._context === context) {
      return i;
    }
  }
  return -1;
};

scope.interactables.get = function interactableGet(element, options, dontCheckInContext) {
  var ret = this[this.indexOfElement(element, options && options.context)];

  return ret && (is.string(element) || dontCheckInContext || ret.inContext(element)) ? ret : null;
};

scope.interactables.forEachMatch = function (element, callback) {
  for (var _i5 = 0; _i5 < this.length; _i5++) {
    var _ref5;

    _ref5 = this[_i5];
    var interactable = _ref5;

    var ret = void 0;

    if ((is.string(interactable.target)
    // target is a selector and the element matches
    ? is.element(element) && matchesSelector(element, interactable.target) :
    // target is the element
    element === interactable.target) &&
    // the element is in context
    interactable.inContext(element)) {
      ret = callback(interactable);
    }

    if (ret !== undefined) {
      return ret;
    }
  }
};

// all interact.js eventTypes
Interactable.eventTypes = scope.eventTypes = [];

Interactable.signals = signals;

Interactable.settingsMethods = ['deltaSource', 'origin', 'preventDefault', 'rectChecker'];

module.exports = Interactable;

},{"./Eventable":2,"./actions/base":6,"./defaultOptions":18,"./scope":33,"./utils/Signals":34,"./utils/arr":35,"./utils/browser":36,"./utils/clone":37,"./utils/domUtils":39,"./utils/events":40,"./utils/extend":41,"./utils/is":46,"./utils/window":52}],5:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var scope = require('./scope');
var utils = require('./utils');
var events = require('./utils/events');
var browser = require('./utils/browser');
var domObjects = require('./utils/domObjects');
var finder = require('./utils/interactionFinder');
var signals = require('./utils/Signals').new();

var listeners = {};
var methodNames = ['pointerDown', 'pointerMove', 'pointerUp', 'updatePointer', 'removePointer'];

// for ignoring browser's simulated mouse events
var prevTouchTime = 0;

// all active and idle interactions
scope.interactions = [];

var Interaction = function () {
  /** */
  function Interaction(_ref) {
    var pointerType = _ref.pointerType;

    _classCallCheck(this, Interaction);

    this.target = null; // current interactable being interacted with
    this.element = null; // the target element of the interactable

    this.prepared = { // action that's ready to be fired on next move event
      name: null,
      axis: null,
      edges: null
    };

    // keep track of added pointers
    this.pointers = [];
    this.pointerIds = [];
    this.downTargets = [];
    this.downTimes = [];

    // Previous native pointer move event coordinates
    this.prevCoords = {
      page: { x: 0, y: 0 },
      client: { x: 0, y: 0 },
      timeStamp: 0
    };
    // current native pointer move event coordinates
    this.curCoords = {
      page: { x: 0, y: 0 },
      client: { x: 0, y: 0 },
      timeStamp: 0
    };

    // Starting InteractEvent pointer coordinates
    this.startCoords = {
      page: { x: 0, y: 0 },
      client: { x: 0, y: 0 },
      timeStamp: 0
    };

    // Change in coordinates and time of the pointer
    this.pointerDelta = {
      page: { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },
      client: { x: 0, y: 0, vx: 0, vy: 0, speed: 0 },
      timeStamp: 0
    };

    this.downEvent = null; // pointerdown/mousedown/touchstart event
    this.downPointer = {};

    this._eventTarget = null;
    this._curEventTarget = null;

    this.prevEvent = null; // previous action event

    this.pointerIsDown = false;
    this.pointerWasMoved = false;
    this._interacting = false;
    this._ending = false;

    this.pointerType = pointerType;

    signals.fire('new', this);

    scope.interactions.push(this);
  }

  Interaction.prototype.pointerDown = function pointerDown(pointer, event, eventTarget) {
    var pointerIndex = this.updatePointer(pointer, event, true);

    signals.fire('down', {
      pointer: pointer,
      event: event,
      eventTarget: eventTarget,
      pointerIndex: pointerIndex,
      interaction: this
    });
  };

  /**
   * ```js
   * interact(target)
   *   .draggable({
   *     // disable the default drag start by down->move
   *     manualStart: true
   *   })
   *   // start dragging after the user holds the pointer down
   *   .on('hold', function (event) {
   *     var interaction = event.interaction;
   *
   *     if (!interaction.interacting()) {
   *       interaction.start({ name: 'drag' },
   *                         event.interactable,
   *                         event.currentTarget);
   *     }
   * });
   * ```
   *
   * Start an action with the given Interactable and Element as tartgets. The
   * action must be enabled for the target Interactable and an appropriate
   * number of pointers must be held down - 1 for drag/resize, 2 for gesture.
   *
   * Use it with `interactable.<action>able({ manualStart: false })` to always
   * [start actions manually](https://github.com/taye/interact.js/issues/114)
   *
   * @param {object} action   The action to be performed - drag, resize, etc.
   * @param {Interactable} target  The Interactable to target
   * @param {Element} element The DOM Element to target
   * @return {object} interact
   */


  Interaction.prototype.start = function start(action, target, element) {
    if (this.interacting() || !this.pointerIsDown || this.pointerIds.length < (action.name === 'gesture' ? 2 : 1)) {
      return;
    }

    // if this interaction had been removed after stopping
    // add it back
    if (scope.interactions.indexOf(this) === -1) {
      scope.interactions.push(this);
    }

    utils.copyAction(this.prepared, action);
    this.target = target;
    this.element = element;

    signals.fire('action-start', {
      interaction: this,
      event: this.downEvent
    });
  };

  Interaction.prototype.pointerMove = function pointerMove(pointer, event, eventTarget) {
    if (!this.simulation) {
      this.updatePointer(pointer);
      utils.setCoords(this.curCoords, this.pointers);
    }

    var duplicateMove = this.curCoords.page.x === this.prevCoords.page.x && this.curCoords.page.y === this.prevCoords.page.y && this.curCoords.client.x === this.prevCoords.client.x && this.curCoords.client.y === this.prevCoords.client.y;

    var dx = void 0;
    var dy = void 0;

    // register movement greater than pointerMoveTolerance
    if (this.pointerIsDown && !this.pointerWasMoved) {
      dx = this.curCoords.client.x - this.startCoords.client.x;
      dy = this.curCoords.client.y - this.startCoords.client.y;

      this.pointerWasMoved = utils.hypot(dx, dy) > Interaction.pointerMoveTolerance;
    }

    var signalArg = {
      pointer: pointer,
      pointerIndex: this.getPointerIndex(pointer),
      event: event,
      eventTarget: eventTarget,
      dx: dx,
      dy: dy,
      duplicate: duplicateMove,
      interaction: this,
      interactingBeforeMove: this.interacting()
    };

    if (!duplicateMove) {
      // set pointer coordinate, time changes and speeds
      utils.setCoordDeltas(this.pointerDelta, this.prevCoords, this.curCoords);
    }

    signals.fire('move', signalArg);

    if (!duplicateMove) {
      // if interacting, fire an 'action-move' signal etc
      if (this.interacting()) {
        this.doMove(signalArg);
      }

      if (this.pointerWasMoved) {
        utils.copyCoords(this.prevCoords, this.curCoords);
      }
    }
  };

  /**
   * ```js
   * interact(target)
   *   .draggable(true)
   *   .on('dragmove', function (event) {
   *     if (someCondition) {
   *       // change the snap settings
   *       event.interactable.draggable({ snap: { targets: [] }});
   *       // fire another move event with re-calculated snap
   *       event.interaction.doMove();
   *     }
   *   });
   * ```
   *
   * Force a move of the current action at the same coordinates. Useful if
   * snap/restrict has been changed and you want a movement with the new
   * settings.
   */


  Interaction.prototype.doMove = function doMove(signalArg) {
    signalArg = utils.extend({
      pointer: this.pointers[0],
      event: this.prevEvent,
      eventTarget: this._eventTarget,
      interaction: this
    }, signalArg || {});

    signals.fire('before-action-move', signalArg);

    if (!this._dontFireMove) {
      signals.fire('action-move', signalArg);
    }

    this._dontFireMove = false;
  };

  // End interact move events and stop auto-scroll unless simulation is running


  Interaction.prototype.pointerUp = function pointerUp(pointer, event, eventTarget, curEventTarget) {
    var pointerIndex = this.getPointerIndex(pointer);

    signals.fire(/cancel$/i.test(event.type) ? 'cancel' : 'up', {
      pointer: pointer,
      pointerIndex: pointerIndex,
      event: event,
      eventTarget: eventTarget,
      curEventTarget: curEventTarget,
      interaction: this
    });

    if (!this.simulation) {
      this.end(event);
    }

    this.pointerIsDown = false;
    this.removePointer(pointer, event);
  };

  /**
   * ```js
   * interact(target)
   *   .draggable(true)
   *   .on('move', function (event) {
   *     if (event.pageX > 1000) {
   *       // end the current action
   *       event.interaction.end();
   *       // stop all further listeners from being called
   *       event.stopImmediatePropagation();
   *     }
   *   });
   * ```
   *
   * Stop the current action and fire an end event. Inertial movement does
   * not happen.
   *
   * @param {PointerEvent} [event]
   */


  Interaction.prototype.end = function end(event) {
    this._ending = true;

    event = event || this.prevEvent;

    if (this.interacting()) {
      signals.fire('action-end', {
        event: event,
        interaction: this
      });
    }

    this.stop();
    this._ending = false;
  };

  Interaction.prototype.currentAction = function currentAction() {
    return this._interacting ? this.prepared.name : null;
  };

  Interaction.prototype.interacting = function interacting() {
    return this._interacting;
  };

  /** */


  Interaction.prototype.stop = function stop() {
    signals.fire('stop', { interaction: this });

    if (this._interacting) {
      signals.fire('stop-active', { interaction: this });
      signals.fire('stop-' + this.prepared.name, { interaction: this });
    }

    this.target = this.element = null;

    this._interacting = false;
    this.prepared.name = this.prevEvent = null;
  };

  Interaction.prototype.getPointerIndex = function getPointerIndex(pointer) {
    // mouse and pen interactions may have only one pointer
    if (this.pointerType === 'mouse' || this.pointerType === 'pen') {
      return 0;
    }

    return this.pointerIds.indexOf(utils.getPointerId(pointer));
  };

  Interaction.prototype.updatePointer = function updatePointer(pointer, event) {
    var down = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : event && /(down|start)$/i.test(event.type);

    var id = utils.getPointerId(pointer);
    var index = this.getPointerIndex(pointer);

    if (index === -1) {
      index = this.pointerIds.length;
      this.pointerIds[index] = id;
    }

    if (down) {
      signals.fire('update-pointer-down', {
        pointer: pointer,
        event: event,
        down: down,
        pointerId: id,
        pointerIndex: index,
        interaction: this
      });
    }

    this.pointers[index] = pointer;

    return index;
  };

  Interaction.prototype.removePointer = function removePointer(pointer, event) {
    var index = this.getPointerIndex(pointer);

    if (index === -1) {
      return;
    }

    signals.fire('remove-pointer', {
      pointer: pointer,
      event: event,
      pointerIndex: index,
      interaction: this
    });

    this.pointers.splice(index, 1);
    this.pointerIds.splice(index, 1);
    this.downTargets.splice(index, 1);
    this.downTimes.splice(index, 1);
  };

  Interaction.prototype._updateEventTargets = function _updateEventTargets(target, currentTarget) {
    this._eventTarget = target;
    this._curEventTarget = currentTarget;
  };

  return Interaction;
}();

for (var _i = 0; _i < methodNames.length; _i++) {
  var method = methodNames[_i];
  listeners[method] = doOnInteractions(method);
}

function doOnInteractions(method) {
  return function (event) {
    var pointerType = utils.getPointerType(event);

    var _utils$getEventTarget = utils.getEventTargets(event),
        eventTarget = _utils$getEventTarget[0],
        curEventTarget = _utils$getEventTarget[1];

    var matches = []; // [ [pointer, interaction], ...]

    if (browser.supportsTouch && /touch/.test(event.type)) {
      prevTouchTime = new Date().getTime();

      for (var _i2 = 0; _i2 < event.changedTouches.length; _i2++) {
        var _ref2;

        _ref2 = event.changedTouches[_i2];
        var changedTouch = _ref2;

        var pointer = changedTouch;
        var interaction = finder.search(pointer, event.type, eventTarget);

        matches.push([pointer, interaction || new Interaction({ pointerType: pointerType })]);
      }
    } else {
      var invalidPointer = false;

      if (!browser.supportsPointerEvent && /mouse/.test(event.type)) {
        // ignore mouse events while touch interactions are active
        for (var i = 0; i < scope.interactions.length && !invalidPointer; i++) {
          invalidPointer = scope.interactions[i].pointerType !== 'mouse' && scope.interactions[i].pointerIsDown;
        }

        // try to ignore mouse events that are simulated by the browser
        // after a touch event
        invalidPointer = invalidPointer || new Date().getTime() - prevTouchTime < 500
        // on iOS and Firefox Mobile, MouseEvent.timeStamp is zero if simulated
        || event.timeStamp === 0;
      }

      if (!invalidPointer) {
        var _interaction = finder.search(event, event.type, eventTarget);

        if (!_interaction) {
          _interaction = new Interaction({ pointerType: pointerType });
        }

        matches.push([event, _interaction]);
      }
    }

    for (var _i3 = 0; _i3 < matches.length; _i3++) {
      var _ref3 = matches[_i3];
      var _pointer = _ref3[0];
      var _interaction2 = _ref3[1];

      _interaction2._updateEventTargets(eventTarget, curEventTarget);
      _interaction2[method](_pointer, event, eventTarget, curEventTarget);
    }
  };
}

function endAll(event) {
  for (var _i4 = 0; _i4 < scope.interactions.length; _i4++) {
    var _ref4;

    _ref4 = scope.interactions[_i4];
    var interaction = _ref4;

    interaction.end(event);
    signals.fire('endall', { event: event, interaction: interaction });
  }
}

var docEvents = {/* 'eventType': listenerFunc */};
var pEventTypes = browser.pEventTypes;

if (domObjects.PointerEvent) {
  docEvents[pEventTypes.down] = listeners.pointerDown;
  docEvents[pEventTypes.move] = listeners.pointerMove;
  docEvents[pEventTypes.up] = listeners.pointerUp;
  docEvents[pEventTypes.cancel] = listeners.pointerUp;
} else {
  docEvents.mousedown = listeners.pointerDown;
  docEvents.mousemove = listeners.pointerMove;
  docEvents.mouseup = listeners.pointerUp;

  docEvents.touchstart = listeners.pointerDown;
  docEvents.touchmove = listeners.pointerMove;
  docEvents.touchend = listeners.pointerUp;
  docEvents.touchcancel = listeners.pointerUp;
}

docEvents.blur = endAll;

function onDocSignal(_ref5, signalName) {
  var doc = _ref5.doc;

  var eventMethod = signalName.indexOf('add') === 0 ? events.add : events.remove;

  // delegate event listener
  for (var eventType in scope.delegatedEvents) {
    eventMethod(doc, eventType, events.delegateListener);
    eventMethod(doc, eventType, events.delegateUseCapture, true);
  }

  for (var _eventType in docEvents) {
    eventMethod(doc, _eventType, docEvents[_eventType], browser.isIOS ? { passive: false } : undefined);
  }
}

signals.on('update-pointer-down', function (_ref6) {
  var interaction = _ref6.interaction,
      pointer = _ref6.pointer,
      pointerId = _ref6.pointerId,
      pointerIndex = _ref6.pointerIndex,
      event = _ref6.event,
      eventTarget = _ref6.eventTarget,
      down = _ref6.down;

  interaction.pointerIds[pointerIndex] = pointerId;
  interaction.pointers[pointerIndex] = pointer;

  if (down) {
    interaction.pointerIsDown = true;
  }

  if (!interaction.interacting()) {
    utils.setCoords(interaction.startCoords, interaction.pointers);

    utils.copyCoords(interaction.curCoords, interaction.startCoords);
    utils.copyCoords(interaction.prevCoords, interaction.startCoords);

    interaction.downEvent = event;
    interaction.downTimes[pointerIndex] = interaction.curCoords.timeStamp;
    interaction.downTargets[pointerIndex] = eventTarget || event && utils.getEventTargets(event)[0];
    interaction.pointerWasMoved = false;

    utils.pointerExtend(interaction.downPointer, pointer);
  }
});

scope.signals.on('add-document', onDocSignal);
scope.signals.on('remove-document', onDocSignal);

Interaction.pointerMoveTolerance = 1;
Interaction.doOnInteractions = doOnInteractions;
Interaction.endAll = endAll;
Interaction.signals = signals;
Interaction.docEvents = docEvents;

scope.endAllInteractions = endAll;

module.exports = Interaction;

},{"./scope":33,"./utils":44,"./utils/Signals":34,"./utils/browser":36,"./utils/domObjects":38,"./utils/events":40,"./utils/interactionFinder":45}],6:[function(require,module,exports){
'use strict';

var Interaction = require('../Interaction');
var InteractEvent = require('../InteractEvent');

var actions = {
  firePrepared: firePrepared,
  names: [],
  methodDict: {}
};

Interaction.signals.on('action-start', function (_ref) {
  var interaction = _ref.interaction,
      event = _ref.event;

  interaction._interacting = true;
  firePrepared(interaction, event, 'start');
});

Interaction.signals.on('action-move', function (_ref2) {
  var interaction = _ref2.interaction,
      event = _ref2.event,
      preEnd = _ref2.preEnd;

  firePrepared(interaction, event, 'move', preEnd);

  // if the action was ended in a listener
  if (!interaction.interacting()) {
    return false;
  }
});

Interaction.signals.on('action-end', function (_ref3) {
  var interaction = _ref3.interaction,
      event = _ref3.event;

  firePrepared(interaction, event, 'end');
});

function firePrepared(interaction, event, phase, preEnd) {
  var actionName = interaction.prepared.name;

  var newEvent = new InteractEvent(interaction, event, actionName, phase, interaction.element, null, preEnd);

  interaction.target.fire(newEvent);
  interaction.prevEvent = newEvent;
}

module.exports = actions;

},{"../InteractEvent":3,"../Interaction":5}],7:[function(require,module,exports){
'use strict';

var actions = require('./base');
var utils = require('../utils');
var InteractEvent = require('../InteractEvent');
/** @lends Interactable */
var Interactable = require('../Interactable');
var Interaction = require('../Interaction');
var defaultOptions = require('../defaultOptions');

var drag = {
  defaults: {
    enabled: false,
    mouseButtons: null,

    origin: null,
    snap: null,
    restrict: null,
    inertia: null,
    autoScroll: null,

    startAxis: 'xy',
    lockAxis: 'xy'
  },

  checker: function checker(pointer, event, interactable) {
    var dragOptions = interactable.options.drag;

    return dragOptions.enabled ? { name: 'drag', axis: dragOptions.lockAxis === 'start' ? dragOptions.startAxis : dragOptions.lockAxis } : null;
  },

  getCursor: function getCursor() {
    return 'move';
  }
};

Interaction.signals.on('before-action-move', function (_ref) {
  var interaction = _ref.interaction;

  if (interaction.prepared.name !== 'drag') {
    return;
  }

  var axis = interaction.prepared.axis;

  if (axis === 'x') {
    interaction.curCoords.page.y = interaction.startCoords.page.y;
    interaction.curCoords.client.y = interaction.startCoords.client.y;

    interaction.pointerDelta.page.speed = Math.abs(interaction.pointerDelta.page.vx);
    interaction.pointerDelta.client.speed = Math.abs(interaction.pointerDelta.client.vx);
    interaction.pointerDelta.client.vy = 0;
    interaction.pointerDelta.page.vy = 0;
  } else if (axis === 'y') {
    interaction.curCoords.page.x = interaction.startCoords.page.x;
    interaction.curCoords.client.x = interaction.startCoords.client.x;

    interaction.pointerDelta.page.speed = Math.abs(interaction.pointerDelta.page.vy);
    interaction.pointerDelta.client.speed = Math.abs(interaction.pointerDelta.client.vy);
    interaction.pointerDelta.client.vx = 0;
    interaction.pointerDelta.page.vx = 0;
  }
});

// dragmove
InteractEvent.signals.on('new', function (_ref2) {
  var iEvent = _ref2.iEvent,
      interaction = _ref2.interaction;

  if (iEvent.type !== 'dragmove') {
    return;
  }

  var axis = interaction.prepared.axis;

  if (axis === 'x') {
    iEvent.pageY = interaction.startCoords.page.y;
    iEvent.clientY = interaction.startCoords.client.y;
    iEvent.dy = 0;
  } else if (axis === 'y') {
    iEvent.pageX = interaction.startCoords.page.x;
    iEvent.clientX = interaction.startCoords.client.x;
    iEvent.dx = 0;
  }
});

/**
 * ```js
 * interact(element).draggable({
 *     onstart: function (event) {},
 *     onmove : function (event) {},
 *     onend  : function (event) {},
 *
 *     // the axis in which the first movement must be
 *     // for the drag sequence to start
 *     // 'xy' by default - any direction
 *     startAxis: 'x' || 'y' || 'xy',
 *
 *     // 'xy' by default - don't restrict to one axis (move in any direction)
 *     // 'x' or 'y' to restrict movement to either axis
 *     // 'start' to restrict movement to the axis the drag started in
 *     lockAxis: 'x' || 'y' || 'xy' || 'start',
 *
 *     // max number of drags that can happen concurrently
 *     // with elements of this Interactable. Infinity by default
 *     max: Infinity,
 *
 *     // max number of drags that can target the same element+Interactable
 *     // 1 by default
 *     maxPerElement: 2
 * });
 *
 * var isDraggable = interact('element').draggable(); // true
 * ```
 *
 * Get or set whether drag actions can be performed on the target
 *
 * @param {boolean | object} [options] true/false or An object with event
 * listeners to be fired on drag events (object makes the Interactable
 * draggable)
 * @return {boolean | Interactable} boolean indicating if this can be the
 * target of drag events, or this Interctable
 */
Interactable.prototype.draggable = function (options) {
  if (utils.is.object(options)) {
    this.options.drag.enabled = options.enabled === false ? false : true;
    this.setPerAction('drag', options);
    this.setOnEvents('drag', options);

    if (/^(xy|x|y|start)$/.test(options.lockAxis)) {
      this.options.drag.lockAxis = options.lockAxis;
    }
    if (/^(xy|x|y)$/.test(options.startAxis)) {
      this.options.drag.startAxis = options.startAxis;
    }

    return this;
  }

  if (utils.is.bool(options)) {
    this.options.drag.enabled = options;

    if (!options) {
      this.ondragstart = this.ondragstart = this.ondragend = null;
    }

    return this;
  }

  return this.options.drag;
};

actions.drag = drag;
actions.names.push('drag');
utils.merge(Interactable.eventTypes, ['dragstart', 'dragmove', 'draginertiastart', 'draginertiaresume', 'dragend']);
actions.methodDict.drag = 'draggable';

defaultOptions.drag = drag.defaults;

module.exports = drag;

},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],8:[function(require,module,exports){
'use strict';

var actions = require('./base');
var utils = require('../utils');
var scope = require('../scope');
/** @lends module:interact */
var interact = require('../interact');
var InteractEvent = require('../InteractEvent');
/** @lends Interactable */
var Interactable = require('../Interactable');
var Interaction = require('../Interaction');
var defaultOptions = require('../defaultOptions');

var drop = {
  defaults: {
    enabled: false,
    accept: null,
    overlap: 'pointer'
  }
};

var dynamicDrop = false;

Interaction.signals.on('action-start', function (_ref) {
  var interaction = _ref.interaction,
      event = _ref.event;

  if (interaction.prepared.name !== 'drag') {
    return;
  }

  // reset active dropzones
  interaction.activeDrops.dropzones = [];
  interaction.activeDrops.elements = [];
  interaction.activeDrops.rects = [];

  interaction.dropEvents = null;

  if (!interaction.dynamicDrop) {
    setActiveDrops(interaction.activeDrops, interaction.element);
  }

  var dragEvent = interaction.prevEvent;
  var dropEvents = getDropEvents(interaction, event, dragEvent);

  if (dropEvents.activate) {
    fireActiveDrops(interaction.activeDrops, dropEvents.activate);
  }
});

InteractEvent.signals.on('new', function (_ref2) {
  var interaction = _ref2.interaction,
      iEvent = _ref2.iEvent,
      event = _ref2.event;

  if (iEvent.type !== 'dragmove' && iEvent.type !== 'dragend') {
    return;
  }

  var draggableElement = interaction.element;
  var dragEvent = iEvent;
  var dropResult = getDrop(dragEvent, event, draggableElement);

  interaction.dropTarget = dropResult.dropzone;
  interaction.dropElement = dropResult.element;

  interaction.dropEvents = getDropEvents(interaction, event, dragEvent);
});

Interaction.signals.on('action-move', function (_ref3) {
  var interaction = _ref3.interaction;

  if (interaction.prepared.name !== 'drag') {
    return;
  }

  fireDropEvents(interaction, interaction.dropEvents);
});

Interaction.signals.on('action-end', function (_ref4) {
  var interaction = _ref4.interaction;

  if (interaction.prepared.name === 'drag') {
    fireDropEvents(interaction, interaction.dropEvents);
  }
});

Interaction.signals.on('stop-drag', function (_ref5) {
  var interaction = _ref5.interaction;

  interaction.activeDrops = {
    dropzones: null,
    elements: null,
    rects: null
  };

  interaction.dropEvents = null;
});

function collectDrops(activeDrops, element) {
  var drops = [];
  var elements = [];

  // collect all dropzones and their elements which qualify for a drop
  for (var _i = 0; _i < scope.interactables.length; _i++) {
    var _ref6;

    _ref6 = scope.interactables[_i];
    var current = _ref6;

    if (!current.options.drop.enabled) {
      continue;
    }

    var accept = current.options.drop.accept;

    // test the draggable element against the dropzone's accept setting
    if (utils.is.element(accept) && accept !== element || utils.is.string(accept) && !utils.matchesSelector(element, accept)) {

      continue;
    }

    // query for new elements if necessary
    var dropElements = utils.is.string(current.target) ? current._context.querySelectorAll(current.target) : [current.target];

    for (var _i2 = 0; _i2 < dropElements.length; _i2++) {
      var _ref7;

      _ref7 = dropElements[_i2];
      var currentElement = _ref7;

      if (currentElement !== element) {
        drops.push(current);
        elements.push(currentElement);
      }
    }
  }

  return {
    elements: elements,
    dropzones: drops
  };
}

function fireActiveDrops(activeDrops, event) {
  var prevElement = void 0;

  // loop through all active dropzones and trigger event
  for (var i = 0; i < activeDrops.dropzones.length; i++) {
    var current = activeDrops.dropzones[i];
    var currentElement = activeDrops.elements[i];

    // prevent trigger of duplicate events on same element
    if (currentElement !== prevElement) {
      // set current element as event target
      event.target = currentElement;
      current.fire(event);
    }
    prevElement = currentElement;
  }
}

// Collect a new set of possible drops and save them in activeDrops.
// setActiveDrops should always be called when a drag has just started or a
// drag event happens while dynamicDrop is true
function setActiveDrops(activeDrops, dragElement) {
  // get dropzones and their elements that could receive the draggable
  var possibleDrops = collectDrops(activeDrops, dragElement);

  activeDrops.dropzones = possibleDrops.dropzones;
  activeDrops.elements = possibleDrops.elements;
  activeDrops.rects = [];

  for (var i = 0; i < activeDrops.dropzones.length; i++) {
    activeDrops.rects[i] = activeDrops.dropzones[i].getRect(activeDrops.elements[i]);
  }
}

function getDrop(dragEvent, event, dragElement) {
  var interaction = dragEvent.interaction;
  var validDrops = [];

  if (dynamicDrop) {
    setActiveDrops(interaction.activeDrops, dragElement);
  }

  // collect all dropzones and their elements which qualify for a drop
  for (var j = 0; j < interaction.activeDrops.dropzones.length; j++) {
    var current = interaction.activeDrops.dropzones[j];
    var currentElement = interaction.activeDrops.elements[j];
    var rect = interaction.activeDrops.rects[j];

    validDrops.push(current.dropCheck(dragEvent, event, interaction.target, dragElement, currentElement, rect) ? currentElement : null);
  }

  // get the most appropriate dropzone based on DOM depth and order
  var dropIndex = utils.indexOfDeepestElement(validDrops);

  return {
    dropzone: interaction.activeDrops.dropzones[dropIndex] || null,
    element: interaction.activeDrops.elements[dropIndex] || null
  };
}

function getDropEvents(interaction, pointerEvent, dragEvent) {
  var dropEvents = {
    enter: null,
    leave: null,
    activate: null,
    deactivate: null,
    move: null,
    drop: null
  };

  var tmpl = {
    dragEvent: dragEvent,
    interaction: interaction,
    target: interaction.dropElement,
    dropzone: interaction.dropTarget,
    relatedTarget: dragEvent.target,
    draggable: dragEvent.interactable,
    timeStamp: dragEvent.timeStamp
  };

  if (interaction.dropElement !== interaction.prevDropElement) {
    // if there was a prevDropTarget, create a dragleave event
    if (interaction.prevDropTarget) {
      dropEvents.leave = utils.extend({ type: 'dragleave' }, tmpl);

      dragEvent.dragLeave = dropEvents.leave.target = interaction.prevDropElement;
      dragEvent.prevDropzone = dropEvents.leave.dropzone = interaction.prevDropTarget;
    }
    // if the dropTarget is not null, create a dragenter event
    if (interaction.dropTarget) {
      dropEvents.enter = {
        dragEvent: dragEvent,
        interaction: interaction,
        target: interaction.dropElement,
        dropzone: interaction.dropTarget,
        relatedTarget: dragEvent.target,
        draggable: dragEvent.interactable,
        timeStamp: dragEvent.timeStamp,
        type: 'dragenter'
      };

      dragEvent.dragEnter = interaction.dropElement;
      dragEvent.dropzone = interaction.dropTarget;
    }
  }

  if (dragEvent.type === 'dragend' && interaction.dropTarget) {
    dropEvents.drop = utils.extend({ type: 'drop' }, tmpl);

    dragEvent.dropzone = interaction.dropTarget;
    dragEvent.relatedTarget = interaction.dropElement;
  }
  if (dragEvent.type === 'dragstart') {
    dropEvents.activate = utils.extend({ type: 'dropactivate' }, tmpl);

    dropEvents.activate.target = null;
    dropEvents.activate.dropzone = null;
  }
  if (dragEvent.type === 'dragend') {
    dropEvents.deactivate = utils.extend({ type: 'dropdeactivate' }, tmpl);

    dropEvents.deactivate.target = null;
    dropEvents.deactivate.dropzone = null;
  }
  if (dragEvent.type === 'dragmove' && interaction.dropTarget) {
    dropEvents.move = utils.extend({
      dragmove: dragEvent,
      type: 'dropmove'
    }, tmpl);

    dragEvent.dropzone = interaction.dropTarget;
  }

  return dropEvents;
}

function fireDropEvents(interaction, dropEvents) {
  var activeDrops = interaction.activeDrops,
      prevDropTarget = interaction.prevDropTarget,
      dropTarget = interaction.dropTarget,
      dropElement = interaction.dropElement;


  if (dropEvents.leave) {
    prevDropTarget.fire(dropEvents.leave);
  }
  if (dropEvents.move) {
    dropTarget.fire(dropEvents.move);
  }
  if (dropEvents.enter) {
    dropTarget.fire(dropEvents.enter);
  }
  if (dropEvents.drop) {
    dropTarget.fire(dropEvents.drop);
  }
  if (dropEvents.deactivate) {
    fireActiveDrops(activeDrops, dropEvents.deactivate);
  }

  interaction.prevDropTarget = dropTarget;
  interaction.prevDropElement = dropElement;
}

/**
 * ```js
 * interact(target)
 * .dropChecker(function(dragEvent,         // related dragmove or dragend event
 *                       event,             // TouchEvent/PointerEvent/MouseEvent
 *                       dropped,           // bool result of the default checker
 *                       dropzone,          // dropzone Interactable
 *                       dropElement,       // dropzone elemnt
 *                       draggable,         // draggable Interactable
 *                       draggableElement) {// draggable element
 *
 *   return dropped && event.target.hasAttribute('allow-drop');
 * }
 * ```
 *
 * ```js
 * interact('.drop').dropzone({
 *   accept: '.can-drop' || document.getElementById('single-drop'),
 *   overlap: 'pointer' || 'center' || zeroToOne
 * }
 * ```
 *
 * Returns or sets whether draggables can be dropped onto this target to
 * trigger drop events
 *
 * Dropzones can receive the following events:
 *  - `dropactivate` and `dropdeactivate` when an acceptable drag starts and ends
 *  - `dragenter` and `dragleave` when a draggable enters and leaves the dropzone
 *  - `dragmove` when a draggable that has entered the dropzone is moved
 *  - `drop` when a draggable is dropped into this dropzone
 *
 * Use the `accept` option to allow only elements that match the given CSS
 * selector or element. The value can be:
 *
 *  - **an Element** - only that element can be dropped into this dropzone.
 *  - **a string**, - the element being dragged must match it as a CSS selector.
 *  - **`null`** - accept options is cleared - it accepts any element.
 *
 * Use the `overlap` option to set how drops are checked for. The allowed
 * values are:
 *
 *   - `'pointer'`, the pointer must be over the dropzone (default)
 *   - `'center'`, the draggable element's center must be over the dropzone
 *   - a number from 0-1 which is the `(intersection area) / (draggable area)`.
 *   e.g. `0.5` for drop to happen when half of the area of the draggable is
 *   over the dropzone
 *
 * Use the `checker` option to specify a function to check if a dragged element
 * is over this Interactable.
 *
 * @param {boolean | object | null} [options] The new options to be set.
 * @return {boolean | Interactable} The current setting or this Interactable
 */
Interactable.prototype.dropzone = function (options) {
  if (utils.is.object(options)) {
    this.options.drop.enabled = options.enabled === false ? false : true;

    if (utils.is.function(options.ondrop)) {
      this.events.ondrop = options.ondrop;
    }
    if (utils.is.function(options.ondropactivate)) {
      this.events.ondropactivate = options.ondropactivate;
    }
    if (utils.is.function(options.ondropdeactivate)) {
      this.events.ondropdeactivate = options.ondropdeactivate;
    }
    if (utils.is.function(options.ondragenter)) {
      this.events.ondragenter = options.ondragenter;
    }
    if (utils.is.function(options.ondragleave)) {
      this.events.ondragleave = options.ondragleave;
    }
    if (utils.is.function(options.ondropmove)) {
      this.events.ondropmove = options.ondropmove;
    }

    if (/^(pointer|center)$/.test(options.overlap)) {
      this.options.drop.overlap = options.overlap;
    } else if (utils.is.number(options.overlap)) {
      this.options.drop.overlap = Math.max(Math.min(1, options.overlap), 0);
    }
    if ('accept' in options) {
      this.options.drop.accept = options.accept;
    }
    if ('checker' in options) {
      this.options.drop.checker = options.checker;
    }

    return this;
  }

  if (utils.is.bool(options)) {
    this.options.drop.enabled = options;

    if (!options) {
      this.ondragenter = this.ondragleave = this.ondrop = this.ondropactivate = this.ondropdeactivate = null;
    }

    return this;
  }

  return this.options.drop;
};

Interactable.prototype.dropCheck = function (dragEvent, event, draggable, draggableElement, dropElement, rect) {
  var dropped = false;

  // if the dropzone has no rect (eg. display: none)
  // call the custom dropChecker or just return false
  if (!(rect = rect || this.getRect(dropElement))) {
    return this.options.drop.checker ? this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement) : false;
  }

  var dropOverlap = this.options.drop.overlap;

  if (dropOverlap === 'pointer') {
    var origin = utils.getOriginXY(draggable, draggableElement, 'drag');
    var page = utils.getPageXY(dragEvent);

    page.x += origin.x;
    page.y += origin.y;

    var horizontal = page.x > rect.left && page.x < rect.right;
    var vertical = page.y > rect.top && page.y < rect.bottom;

    dropped = horizontal && vertical;
  }

  var dragRect = draggable.getRect(draggableElement);

  if (dragRect && dropOverlap === 'center') {
    var cx = dragRect.left + dragRect.width / 2;
    var cy = dragRect.top + dragRect.height / 2;

    dropped = cx >= rect.left && cx <= rect.right && cy >= rect.top && cy <= rect.bottom;
  }

  if (dragRect && utils.is.number(dropOverlap)) {
    var overlapArea = Math.max(0, Math.min(rect.right, dragRect.right) - Math.max(rect.left, dragRect.left)) * Math.max(0, Math.min(rect.bottom, dragRect.bottom) - Math.max(rect.top, dragRect.top));

    var overlapRatio = overlapArea / (dragRect.width * dragRect.height);

    dropped = overlapRatio >= dropOverlap;
  }

  if (this.options.drop.checker) {
    dropped = this.options.drop.checker(dragEvent, event, dropped, this, dropElement, draggable, draggableElement);
  }

  return dropped;
};

Interactable.signals.on('unset', function (_ref8) {
  var interactable = _ref8.interactable;

  interactable.dropzone(false);
});

Interactable.settingsMethods.push('dropChecker');

Interaction.signals.on('new', function (interaction) {
  interaction.dropTarget = null; // the dropzone a drag target might be dropped into
  interaction.dropElement = null; // the element at the time of checking
  interaction.prevDropTarget = null; // the dropzone that was recently dragged away from
  interaction.prevDropElement = null; // the element at the time of checking
  interaction.dropEvents = null; // the dropEvents related to the current drag event

  interaction.activeDrops = {
    dropzones: [], // the dropzones that are mentioned below
    elements: [], // elements of dropzones that accept the target draggable
    rects: [] // the rects of the elements mentioned above
  };
});

Interaction.signals.on('stop', function (_ref9) {
  var interaction = _ref9.interaction;

  interaction.dropTarget = interaction.dropElement = interaction.prevDropTarget = interaction.prevDropElement = null;
});

/**
 * Returns or sets whether the dimensions of dropzone elements are calculated
 * on every dragmove or only on dragstart for the default dropChecker
 *
 * @param {boolean} [newValue] True to check on each move. False to check only
 * before start
 * @return {boolean | interact} The current setting or interact
 */
interact.dynamicDrop = function (newValue) {
  if (utils.is.bool(newValue)) {
    //if (dragging && dynamicDrop !== newValue && !newValue) {
    //calcRects(dropzones);
    //}

    dynamicDrop = newValue;

    return interact;
  }
  return dynamicDrop;
};

utils.merge(Interactable.eventTypes, ['dragenter', 'dragleave', 'dropactivate', 'dropdeactivate', 'dropmove', 'drop']);
actions.methodDict.drop = 'dropzone';

defaultOptions.drop = drop.defaults;

module.exports = drop;

},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"./base":6}],9:[function(require,module,exports){
'use strict';

var actions = require('./base');
var utils = require('../utils');
var InteractEvent = require('../InteractEvent');
var Interactable = require('../Interactable');
var Interaction = require('../Interaction');
var defaultOptions = require('../defaultOptions');

var gesture = {
  defaults: {
    enabled: false,
    origin: null,
    restrict: null
  },

  checker: function checker(pointer, event, interactable, element, interaction) {
    if (interaction.pointerIds.length >= 2) {
      return { name: 'gesture' };
    }

    return null;
  },

  getCursor: function getCursor() {
    return '';
  }
};

InteractEvent.signals.on('new', function (_ref) {
  var iEvent = _ref.iEvent,
      interaction = _ref.interaction;

  if (iEvent.type !== 'gesturestart') {
    return;
  }
  iEvent.ds = 0;

  interaction.gesture.startDistance = interaction.gesture.prevDistance = iEvent.distance;
  interaction.gesture.startAngle = interaction.gesture.prevAngle = iEvent.angle;
  interaction.gesture.scale = 1;
});

InteractEvent.signals.on('new', function (_ref2) {
  var iEvent = _ref2.iEvent,
      interaction = _ref2.interaction;

  if (iEvent.type !== 'gesturemove') {
    return;
  }

  iEvent.ds = iEvent.scale - interaction.gesture.scale;

  interaction.target.fire(iEvent);

  interaction.gesture.prevAngle = iEvent.angle;
  interaction.gesture.prevDistance = iEvent.distance;

  if (iEvent.scale !== Infinity && iEvent.scale !== null && iEvent.scale !== undefined && !isNaN(iEvent.scale)) {

    interaction.gesture.scale = iEvent.scale;
  }
});

/**
 * ```js
 * interact(element).gesturable({
 *     onstart: function (event) {},
 *     onmove : function (event) {},
 *     onend  : function (event) {},
 *
 *     // limit multiple gestures.
 *     // See the explanation in {@link Interactable.draggable} example
 *     max: Infinity,
 *     maxPerElement: 1,
 * });
 *
 * var isGestureable = interact(element).gesturable();
 * ```
 *
 * Gets or sets whether multitouch gestures can be performed on the target
 *
 * @param {boolean | object} [options] true/false or An object with event
 * listeners to be fired on gesture events (makes the Interactable gesturable)
 * @return {boolean | Interactable} A boolean indicating if this can be the
 * target of gesture events, or this Interactable
 */
Interactable.prototype.gesturable = function (options) {
  if (utils.is.object(options)) {
    this.options.gesture.enabled = options.enabled === false ? false : true;
    this.setPerAction('gesture', options);
    this.setOnEvents('gesture', options);

    return this;
  }

  if (utils.is.bool(options)) {
    this.options.gesture.enabled = options;

    if (!options) {
      this.ongesturestart = this.ongesturestart = this.ongestureend = null;
    }

    return this;
  }

  return this.options.gesture;
};

InteractEvent.signals.on('set-delta', function (_ref3) {
  var interaction = _ref3.interaction,
      iEvent = _ref3.iEvent,
      action = _ref3.action,
      event = _ref3.event,
      starting = _ref3.starting,
      ending = _ref3.ending,
      deltaSource = _ref3.deltaSource;

  if (action !== 'gesture') {
    return;
  }

  var pointers = interaction.pointers;

  iEvent.touches = [pointers[0], pointers[1]];

  if (starting) {
    iEvent.distance = utils.touchDistance(pointers, deltaSource);
    iEvent.box = utils.touchBBox(pointers);
    iEvent.scale = 1;
    iEvent.ds = 0;
    iEvent.angle = utils.touchAngle(pointers, undefined, deltaSource);
    iEvent.da = 0;
  } else if (ending || event instanceof InteractEvent) {
    iEvent.distance = interaction.prevEvent.distance;
    iEvent.box = interaction.prevEvent.box;
    iEvent.scale = interaction.prevEvent.scale;
    iEvent.ds = iEvent.scale - 1;
    iEvent.angle = interaction.prevEvent.angle;
    iEvent.da = iEvent.angle - interaction.gesture.startAngle;
  } else {
    iEvent.distance = utils.touchDistance(pointers, deltaSource);
    iEvent.box = utils.touchBBox(pointers);
    iEvent.scale = iEvent.distance / interaction.gesture.startDistance;
    iEvent.angle = utils.touchAngle(pointers, interaction.gesture.prevAngle, deltaSource);

    iEvent.ds = iEvent.scale - interaction.gesture.prevScale;
    iEvent.da = iEvent.angle - interaction.gesture.prevAngle;
  }
});

Interaction.signals.on('new', function (interaction) {
  interaction.gesture = {
    start: { x: 0, y: 0 },

    startDistance: 0, // distance between two touches of touchStart
    prevDistance: 0,
    distance: 0,

    scale: 1, // gesture.distance / gesture.startDistance

    startAngle: 0, // angle of line joining two touches
    prevAngle: 0 // angle of the previous gesture event
  };
});

actions.gesture = gesture;
actions.names.push('gesture');
utils.merge(Interactable.eventTypes, ['gesturestart', 'gesturemove', 'gestureend']);
actions.methodDict.gesture = 'gesturable';

defaultOptions.gesture = gesture.defaults;

module.exports = gesture;

},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"./base":6}],10:[function(require,module,exports){
'use strict';

var actions = require('./base');
var utils = require('../utils');
var browser = require('../utils/browser');
var InteractEvent = require('../InteractEvent');
/** @lends Interactable */
var Interactable = require('../Interactable');
var Interaction = require('../Interaction');
var defaultOptions = require('../defaultOptions');

// Less Precision with touch input
var defaultMargin = browser.supportsTouch || browser.supportsPointerEvent ? 20 : 10;

var resize = {
  defaults: {
    enabled: false,
    mouseButtons: null,

    origin: null,
    snap: null,
    restrict: null,
    inertia: null,
    autoScroll: null,

    square: false,
    preserveAspectRatio: false,
    axis: 'xy',

    // use default margin
    margin: NaN,

    // object with props left, right, top, bottom which are
    // true/false values to resize when the pointer is over that edge,
    // CSS selectors to match the handles for each direction
    // or the Elements for each handle
    edges: null,

    // a value of 'none' will limit the resize rect to a minimum of 0x0
    // 'negate' will alow the rect to have negative width/height
    // 'reposition' will keep the width/height positive by swapping
    // the top and bottom edges and/or swapping the left and right edges
    invert: 'none'
  },

  checker: function checker(pointer, event, interactable, element, interaction, rect) {
    if (!rect) {
      return null;
    }

    var page = utils.extend({}, interaction.curCoords.page);
    var options = interactable.options;

    if (options.resize.enabled) {
      var resizeOptions = options.resize;
      var resizeEdges = { left: false, right: false, top: false, bottom: false };

      // if using resize.edges
      if (utils.is.object(resizeOptions.edges)) {
        for (var edge in resizeEdges) {
          resizeEdges[edge] = checkResizeEdge(edge, resizeOptions.edges[edge], page, interaction._eventTarget, element, rect, resizeOptions.margin || defaultMargin);
        }

        resizeEdges.left = resizeEdges.left && !resizeEdges.right;
        resizeEdges.top = resizeEdges.top && !resizeEdges.bottom;

        if (resizeEdges.left || resizeEdges.right || resizeEdges.top || resizeEdges.bottom) {
          return {
            name: 'resize',
            edges: resizeEdges
          };
        }
      } else {
        var right = options.resize.axis !== 'y' && page.x > rect.right - defaultMargin;
        var bottom = options.resize.axis !== 'x' && page.y > rect.bottom - defaultMargin;

        if (right || bottom) {
          return {
            name: 'resize',
            axes: (right ? 'x' : '') + (bottom ? 'y' : '')
          };
        }
      }
    }

    return null;
  },

  cursors: browser.isIe9 ? {
    x: 'e-resize',
    y: 's-resize',
    xy: 'se-resize',

    top: 'n-resize',
    left: 'w-resize',
    bottom: 's-resize',
    right: 'e-resize',
    topleft: 'se-resize',
    bottomright: 'se-resize',
    topright: 'ne-resize',
    bottomleft: 'ne-resize'
  } : {
    x: 'ew-resize',
    y: 'ns-resize',
    xy: 'nwse-resize',

    top: 'ns-resize',
    left: 'ew-resize',
    bottom: 'ns-resize',
    right: 'ew-resize',
    topleft: 'nwse-resize',
    bottomright: 'nwse-resize',
    topright: 'nesw-resize',
    bottomleft: 'nesw-resize'
  },

  getCursor: function getCursor(action) {
    if (action.axis) {
      return resize.cursors[action.name + action.axis];
    } else if (action.edges) {
      var cursorKey = '';
      var edgeNames = ['top', 'bottom', 'left', 'right'];

      for (var i = 0; i < 4; i++) {
        if (action.edges[edgeNames[i]]) {
          cursorKey += edgeNames[i];
        }
      }

      return resize.cursors[cursorKey];
    }
  }
};

// resizestart
InteractEvent.signals.on('new', function (_ref) {
  var iEvent = _ref.iEvent,
      interaction = _ref.interaction;

  if (iEvent.type !== 'resizestart' || !interaction.prepared.edges) {
    return;
  }

  var startRect = interaction.target.getRect(interaction.element);
  var resizeOptions = interaction.target.options.resize;

  /*
   * When using the `resizable.square` or `resizable.preserveAspectRatio` options, resizing from one edge
   * will affect another. E.g. with `resizable.square`, resizing to make the right edge larger will make
   * the bottom edge larger by the same amount. We call these 'linked' edges. Any linked edges will depend
   * on the active edges and the edge being interacted with.
   */
  if (resizeOptions.square || resizeOptions.preserveAspectRatio) {
    var linkedEdges = utils.extend({}, interaction.prepared.edges);

    linkedEdges.top = linkedEdges.top || linkedEdges.left && !linkedEdges.bottom;
    linkedEdges.left = linkedEdges.left || linkedEdges.top && !linkedEdges.right;
    linkedEdges.bottom = linkedEdges.bottom || linkedEdges.right && !linkedEdges.top;
    linkedEdges.right = linkedEdges.right || linkedEdges.bottom && !linkedEdges.left;

    interaction.prepared._linkedEdges = linkedEdges;
  } else {
    interaction.prepared._linkedEdges = null;
  }

  // if using `resizable.preserveAspectRatio` option, record aspect ratio at the start of the resize
  if (resizeOptions.preserveAspectRatio) {
    interaction.resizeStartAspectRatio = startRect.width / startRect.height;
  }

  interaction.resizeRects = {
    start: startRect,
    current: utils.extend({}, startRect),
    inverted: utils.extend({}, startRect),
    previous: utils.extend({}, startRect),
    delta: {
      left: 0, right: 0, width: 0,
      top: 0, bottom: 0, height: 0
    }
  };

  iEvent.rect = interaction.resizeRects.inverted;
  iEvent.deltaRect = interaction.resizeRects.delta;
});

// resizemove
InteractEvent.signals.on('new', function (_ref2) {
  var iEvent = _ref2.iEvent,
      phase = _ref2.phase,
      interaction = _ref2.interaction;

  if (phase !== 'move' || !interaction.prepared.edges) {
    return;
  }

  var resizeOptions = interaction.target.options.resize;
  var invert = resizeOptions.invert;
  var invertible = invert === 'reposition' || invert === 'negate';

  var edges = interaction.prepared.edges;

  var start = interaction.resizeRects.start;
  var current = interaction.resizeRects.current;
  var inverted = interaction.resizeRects.inverted;
  var delta = interaction.resizeRects.delta;
  var previous = utils.extend(interaction.resizeRects.previous, inverted);
  var originalEdges = edges;

  var dx = iEvent.dx;
  var dy = iEvent.dy;

  if (resizeOptions.preserveAspectRatio || resizeOptions.square) {
    // `resize.preserveAspectRatio` takes precedence over `resize.square`
    var startAspectRatio = resizeOptions.preserveAspectRatio ? interaction.resizeStartAspectRatio : 1;

    edges = interaction.prepared._linkedEdges;

    if (originalEdges.left && originalEdges.bottom || originalEdges.right && originalEdges.top) {
      dy = -dx / startAspectRatio;
    } else if (originalEdges.left || originalEdges.right) {
      dy = dx / startAspectRatio;
    } else if (originalEdges.top || originalEdges.bottom) {
      dx = dy * startAspectRatio;
    }
  }

  // update the 'current' rect without modifications
  if (edges.top) {
    current.top += dy;
  }
  if (edges.bottom) {
    current.bottom += dy;
  }
  if (edges.left) {
    current.left += dx;
  }
  if (edges.right) {
    current.right += dx;
  }

  if (invertible) {
    // if invertible, copy the current rect
    utils.extend(inverted, current);

    if (invert === 'reposition') {
      // swap edge values if necessary to keep width/height positive
      var swap = void 0;

      if (inverted.top > inverted.bottom) {
        swap = inverted.top;

        inverted.top = inverted.bottom;
        inverted.bottom = swap;
      }
      if (inverted.left > inverted.right) {
        swap = inverted.left;

        inverted.left = inverted.right;
        inverted.right = swap;
      }
    }
  } else {
    // if not invertible, restrict to minimum of 0x0 rect
    inverted.top = Math.min(current.top, start.bottom);
    inverted.bottom = Math.max(current.bottom, start.top);
    inverted.left = Math.min(current.left, start.right);
    inverted.right = Math.max(current.right, start.left);
  }

  inverted.width = inverted.right - inverted.left;
  inverted.height = inverted.bottom - inverted.top;

  for (var edge in inverted) {
    delta[edge] = inverted[edge] - previous[edge];
  }

  iEvent.edges = interaction.prepared.edges;
  iEvent.rect = inverted;
  iEvent.deltaRect = delta;
});

/**
 * ```js
 * interact(element).resizable({
 *   onstart: function (event) {},
 *   onmove : function (event) {},
 *   onend  : function (event) {},
 *
 *   edges: {
 *     top   : true,       // Use pointer coords to check for resize.
 *     left  : false,      // Disable resizing from left edge.
 *     bottom: '.resize-s',// Resize if pointer target matches selector
 *     right : handleEl    // Resize if pointer target is the given Element
 *   },
 *
 *     // Width and height can be adjusted independently. When `true`, width and
 *     // height are adjusted at a 1:1 ratio.
 *     square: false,
 *
 *     // Width and height can be adjusted independently. When `true`, width and
 *     // height maintain the aspect ratio they had when resizing started.
 *     preserveAspectRatio: false,
 *
 *   // a value of 'none' will limit the resize rect to a minimum of 0x0
 *   // 'negate' will allow the rect to have negative width/height
 *   // 'reposition' will keep the width/height positive by swapping
 *   // the top and bottom edges and/or swapping the left and right edges
 *   invert: 'none' || 'negate' || 'reposition'
 *
 *   // limit multiple resizes.
 *   // See the explanation in the {@link Interactable.draggable} example
 *   max: Infinity,
 *   maxPerElement: 1,
 * });
 *
 * var isResizeable = interact(element).resizable();
 * ```
 *
 * Gets or sets whether resize actions can be performed on the target
 *
 * @param {boolean | object} [options] true/false or An object with event
 * listeners to be fired on resize events (object makes the Interactable
 * resizable)
 * @return {boolean | Interactable} A boolean indicating if this can be the
 * target of resize elements, or this Interactable
 */
Interactable.prototype.resizable = function (options) {
  if (utils.is.object(options)) {
    this.options.resize.enabled = options.enabled === false ? false : true;
    this.setPerAction('resize', options);
    this.setOnEvents('resize', options);

    if (/^x$|^y$|^xy$/.test(options.axis)) {
      this.options.resize.axis = options.axis;
    } else if (options.axis === null) {
      this.options.resize.axis = defaultOptions.resize.axis;
    }

    if (utils.is.bool(options.preserveAspectRatio)) {
      this.options.resize.preserveAspectRatio = options.preserveAspectRatio;
    } else if (utils.is.bool(options.square)) {
      this.options.resize.square = options.square;
    }

    return this;
  }
  if (utils.is.bool(options)) {
    this.options.resize.enabled = options;

    if (!options) {
      this.onresizestart = this.onresizestart = this.onresizeend = null;
    }

    return this;
  }
  return this.options.resize;
};

function checkResizeEdge(name, value, page, element, interactableElement, rect, margin) {
  // false, '', undefined, null
  if (!value) {
    return false;
  }

  // true value, use pointer coords and element rect
  if (value === true) {
    // if dimensions are negative, "switch" edges
    var width = utils.is.number(rect.width) ? rect.width : rect.right - rect.left;
    var height = utils.is.number(rect.height) ? rect.height : rect.bottom - rect.top;

    if (width < 0) {
      if (name === 'left') {
        name = 'right';
      } else if (name === 'right') {
        name = 'left';
      }
    }
    if (height < 0) {
      if (name === 'top') {
        name = 'bottom';
      } else if (name === 'bottom') {
        name = 'top';
      }
    }

    if (name === 'left') {
      return page.x < (width >= 0 ? rect.left : rect.right) + margin;
    }
    if (name === 'top') {
      return page.y < (height >= 0 ? rect.top : rect.bottom) + margin;
    }

    if (name === 'right') {
      return page.x > (width >= 0 ? rect.right : rect.left) - margin;
    }
    if (name === 'bottom') {
      return page.y > (height >= 0 ? rect.bottom : rect.top) - margin;
    }
  }

  // the remaining checks require an element
  if (!utils.is.element(element)) {
    return false;
  }

  return utils.is.element(value)
  // the value is an element to use as a resize handle
  ? value === element
  // otherwise check if element matches value as selector
  : utils.matchesUpTo(element, value, interactableElement);
}

Interaction.signals.on('new', function (interaction) {
  interaction.resizeAxes = 'xy';
});

InteractEvent.signals.on('set-delta', function (_ref3) {
  var interaction = _ref3.interaction,
      iEvent = _ref3.iEvent,
      action = _ref3.action;

  if (action !== 'resize' || !interaction.resizeAxes) {
    return;
  }

  var options = interaction.target.options;

  if (options.resize.square) {
    if (interaction.resizeAxes === 'y') {
      iEvent.dx = iEvent.dy;
    } else {
      iEvent.dy = iEvent.dx;
    }
    iEvent.axes = 'xy';
  } else {
    iEvent.axes = interaction.resizeAxes;

    if (interaction.resizeAxes === 'x') {
      iEvent.dy = 0;
    } else if (interaction.resizeAxes === 'y') {
      iEvent.dx = 0;
    }
  }
});

actions.resize = resize;
actions.names.push('resize');
utils.merge(Interactable.eventTypes, ['resizestart', 'resizemove', 'resizeinertiastart', 'resizeinertiaresume', 'resizeend']);
actions.methodDict.resize = 'resizable';

defaultOptions.resize = resize.defaults;

module.exports = resize;

},{"../InteractEvent":3,"../Interactable":4,"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/browser":36,"./base":6}],11:[function(require,module,exports){
'use strict';

var raf = require('./utils/raf');
var getWindow = require('./utils/window').getWindow;
var is = require('./utils/is');
var domUtils = require('./utils/domUtils');
var Interaction = require('./Interaction');
var defaultOptions = require('./defaultOptions');

var autoScroll = {
  defaults: {
    enabled: false,
    container: null, // the item that is scrolled (Window or HTMLElement)
    margin: 60,
    speed: 300 // the scroll speed in pixels per second
  },

  interaction: null,
  i: null, // the handle returned by window.setInterval
  x: 0, y: 0, // Direction each pulse is to scroll in

  isScrolling: false,
  prevTime: 0,

  start: function start(interaction) {
    autoScroll.isScrolling = true;
    raf.cancel(autoScroll.i);

    autoScroll.interaction = interaction;
    autoScroll.prevTime = new Date().getTime();
    autoScroll.i = raf.request(autoScroll.scroll);
  },

  stop: function stop() {
    autoScroll.isScrolling = false;
    raf.cancel(autoScroll.i);
  },

  // scroll the window by the values in scroll.x/y
  scroll: function scroll() {
    var options = autoScroll.interaction.target.options[autoScroll.interaction.prepared.name].autoScroll;
    var container = options.container || getWindow(autoScroll.interaction.element);
    var now = new Date().getTime();
    // change in time in seconds
    var dt = (now - autoScroll.prevTime) / 1000;
    // displacement
    var s = options.speed * dt;

    if (s >= 1) {
      if (is.window(container)) {
        container.scrollBy(autoScroll.x * s, autoScroll.y * s);
      } else if (container) {
        container.scrollLeft += autoScroll.x * s;
        container.scrollTop += autoScroll.y * s;
      }

      autoScroll.prevTime = now;
    }

    if (autoScroll.isScrolling) {
      raf.cancel(autoScroll.i);
      autoScroll.i = raf.request(autoScroll.scroll);
    }
  },
  check: function check(interactable, actionName) {
    var options = interactable.options;

    return options[actionName].autoScroll && options[actionName].autoScroll.enabled;
  },
  onInteractionMove: function onInteractionMove(_ref) {
    var interaction = _ref.interaction,
        pointer = _ref.pointer;

    if (!(interaction.interacting() && autoScroll.check(interaction.target, interaction.prepared.name))) {
      return;
    }

    if (interaction.simulation) {
      autoScroll.x = autoScroll.y = 0;
      return;
    }

    var top = void 0;
    var right = void 0;
    var bottom = void 0;
    var left = void 0;

    var options = interaction.target.options[interaction.prepared.name].autoScroll;
    var container = options.container || getWindow(interaction.element);

    if (is.window(container)) {
      left = pointer.clientX < autoScroll.margin;
      top = pointer.clientY < autoScroll.margin;
      right = pointer.clientX > container.innerWidth - autoScroll.margin;
      bottom = pointer.clientY > container.innerHeight - autoScroll.margin;
    } else {
      var rect = domUtils.getElementClientRect(container);

      left = pointer.clientX < rect.left + autoScroll.margin;
      top = pointer.clientY < rect.top + autoScroll.margin;
      right = pointer.clientX > rect.right - autoScroll.margin;
      bottom = pointer.clientY > rect.bottom - autoScroll.margin;
    }

    autoScroll.x = right ? 1 : left ? -1 : 0;
    autoScroll.y = bottom ? 1 : top ? -1 : 0;

    if (!autoScroll.isScrolling) {
      // set the autoScroll properties to those of the target
      autoScroll.margin = options.margin;
      autoScroll.speed = options.speed;

      autoScroll.start(interaction);
    }
  }
};

Interaction.signals.on('stop-active', function () {
  autoScroll.stop();
});

Interaction.signals.on('action-move', autoScroll.onInteractionMove);

defaultOptions.perAction.autoScroll = autoScroll.defaults;

module.exports = autoScroll;

},{"./Interaction":5,"./defaultOptions":18,"./utils/domUtils":39,"./utils/is":46,"./utils/raf":50,"./utils/window":52}],12:[function(require,module,exports){
'use strict';

/** @lends Interactable */
var Interactable = require('../Interactable');
var actions = require('../actions/base');
var is = require('../utils/is');
var domUtils = require('../utils/domUtils');

var _require = require('../utils'),
    warnOnce = _require.warnOnce;

Interactable.prototype.getAction = function (pointer, event, interaction, element) {
  var action = this.defaultActionChecker(pointer, event, interaction, element);

  if (this.options.actionChecker) {
    return this.options.actionChecker(pointer, event, action, this, element, interaction);
  }

  return action;
};

/**
 * ```js
 * interact(element, { ignoreFrom: document.getElementById('no-action') });
 * // or
 * interact(element).ignoreFrom('input, textarea, a');
 * ```
 * @deprecated
 * If the target of the `mousedown`, `pointerdown` or `touchstart` event or any
 * of it's parents match the given CSS selector or Element, no
 * drag/resize/gesture is started.
 *
 * Don't use this method. Instead set the `ignoreFrom` option for each action
 * or for `pointerEvents`
 *
 * @example
 * interact(targett)
 *   .draggable({
 *     ignoreFrom: 'input, textarea, a[href]'',
 *   })
 *   .pointerEvents({
 *     ignoreFrom: '[no-pointer]',
 *   });
 *
 * @param {string | Element | null} [newValue] a CSS selector string, an
 * Element or `null` to not ignore any elements
 * @return {string | Element | object} The current ignoreFrom value or this
 * Interactable
 */
Interactable.prototype.ignoreFrom = warnOnce(function (newValue) {
  return this._backCompatOption('ignoreFrom', newValue);
}, 'Interactable.ignoreForm() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue}).');

/**
 * ```js
 *
 * @deprecated
 * A drag/resize/gesture is started only If the target of the `mousedown`,
 * `pointerdown` or `touchstart` event or any of it's parents match the given
 * CSS selector or Element.
 *
 * Don't use this method. Instead set the `allowFrom` option for each action
 * or for `pointerEvents`
 *
 * @example
 * interact(targett)
 *   .resizable({
 *     allowFrom: '.resize-handle',
 *   .pointerEvents({
 *     allowFrom: '.handle',,
 *   });
 *
 * @param {string | Element | null} [newValue] a CSS selector string, an
 * Element or `null` to allow from any element
 * @return {string | Element | object} The current allowFrom value or this
 * Interactable
 */
Interactable.prototype.allowFrom = warnOnce(function (newValue) {
  return this._backCompatOption('allowFrom', newValue);
}, 'Interactable.allowForm() has been deprecated. Use Interactble.draggable({allowFrom: newValue}).');

Interactable.prototype.testIgnore = function (ignoreFrom, interactableElement, element) {
  if (!ignoreFrom || !is.element(element)) {
    return false;
  }

  if (is.string(ignoreFrom)) {
    return domUtils.matchesUpTo(element, ignoreFrom, interactableElement);
  } else if (is.element(ignoreFrom)) {
    return domUtils.nodeContains(ignoreFrom, element);
  }

  return false;
};

Interactable.prototype.testAllow = function (allowFrom, interactableElement, element) {
  if (!allowFrom) {
    return true;
  }

  if (!is.element(element)) {
    return false;
  }

  if (is.string(allowFrom)) {
    return domUtils.matchesUpTo(element, allowFrom, interactableElement);
  } else if (is.element(allowFrom)) {
    return domUtils.nodeContains(allowFrom, element);
  }

  return false;
};

Interactable.prototype.testIgnoreAllow = function (options, interactableElement, eventTarget) {
  return !this.testIgnore(options.ignoreFrom, interactableElement, eventTarget) && this.testAllow(options.allowFrom, interactableElement, eventTarget);
};

/**
 * ```js
 * interact('.resize-drag')
 *   .resizable(true)
 *   .draggable(true)
 *   .actionChecker(function (pointer, event, action, interactable, element, interaction) {
 *
 *   if (interact.matchesSelector(event.target, '.drag-handle') {
 *     // force drag with handle target
 *     action.name = drag;
 *   }
 *   else {
 *     // resize from the top and right edges
 *     action.name  = 'resize';
 *     action.edges = { top: true, right: true };
 *   }
 *
 *   return action;
 * });
 * ```
 *
 * Gets or sets the function used to check action to be performed on
 * pointerDown
 *
 * @param {function | null} [checker] A function which takes a pointer event,
 * defaultAction string, interactable, element and interaction as parameters
 * and returns an object with name property 'drag' 'resize' or 'gesture' and
 * optionally an `edges` object with boolean 'top', 'left', 'bottom' and right
 * props.
 * @return {Function | Interactable} The checker function or this Interactable
 */
Interactable.prototype.actionChecker = function (checker) {
  if (is.function(checker)) {
    this.options.actionChecker = checker;

    return this;
  }

  if (checker === null) {
    delete this.options.actionChecker;

    return this;
  }

  return this.options.actionChecker;
};

/**
 * Returns or sets whether the the cursor should be changed depending on the
 * action that would be performed if the mouse were pressed and dragged.
 *
 * @param {boolean} [newValue]
 * @return {boolean | Interactable} The current setting or this Interactable
 */
Interactable.prototype.styleCursor = function (newValue) {
  if (is.bool(newValue)) {
    this.options.styleCursor = newValue;

    return this;
  }

  if (newValue === null) {
    delete this.options.styleCursor;

    return this;
  }

  return this.options.styleCursor;
};

Interactable.prototype.defaultActionChecker = function (pointer, event, interaction, element) {
  var rect = this.getRect(element);
  var buttons = event.buttons || {
    0: 1,
    1: 4,
    3: 8,
    4: 16
  }[event.button];
  var action = null;

  for (var _i = 0; _i < actions.names.length; _i++) {
    var _ref;

    _ref = actions.names[_i];
    var actionName = _ref;

    // check mouseButton setting if the pointer is down
    if (interaction.pointerIsDown && /mouse|pointer/.test(interaction.pointerType) && (buttons & this.options[actionName].mouseButtons) === 0) {
      continue;
    }

    action = actions[actionName].checker(pointer, event, this, element, interaction, rect);

    if (action) {
      return action;
    }
  }
};

},{"../Interactable":4,"../actions/base":6,"../utils":44,"../utils/domUtils":39,"../utils/is":46}],13:[function(require,module,exports){
'use strict';

var interact = require('../interact');
var Interactable = require('../Interactable');
var Interaction = require('../Interaction');
var actions = require('../actions/base');
var defaultOptions = require('../defaultOptions');
var scope = require('../scope');
var utils = require('../utils');
var signals = require('../utils/Signals').new();

require('./InteractableMethods');

var autoStart = {
  signals: signals,
  withinInteractionLimit: withinInteractionLimit,
  // Allow this many interactions to happen simultaneously
  maxInteractions: Infinity,
  defaults: {
    perAction: {
      manualStart: false,
      max: Infinity,
      maxPerElement: 1,
      allowFrom: null,
      ignoreFrom: null,

      // only allow left button by default
      // see https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons#Return_value
      mouseButtons: 1
    }
  },
  setActionDefaults: function setActionDefaults(action) {
    utils.extend(action.defaults, autoStart.defaults.perAction);
  },
  validateAction: validateAction
};

// set cursor style on mousedown
Interaction.signals.on('down', function (_ref) {
  var interaction = _ref.interaction,
      pointer = _ref.pointer,
      event = _ref.event,
      eventTarget = _ref.eventTarget;

  if (interaction.interacting()) {
    return;
  }

  var actionInfo = getActionInfo(interaction, pointer, event, eventTarget);
  prepare(interaction, actionInfo);
});

// set cursor style on mousemove
Interaction.signals.on('move', function (_ref2) {
  var interaction = _ref2.interaction,
      pointer = _ref2.pointer,
      event = _ref2.event,
      eventTarget = _ref2.eventTarget;

  if (interaction.pointerType !== 'mouse' || interaction.pointerIsDown || interaction.interacting()) {
    return;
  }

  var actionInfo = getActionInfo(interaction, pointer, event, eventTarget);
  prepare(interaction, actionInfo);
});

Interaction.signals.on('move', function (arg) {
  var interaction = arg.interaction,
      event = arg.event;


  if (!interaction.pointerIsDown || interaction.interacting() || !interaction.pointerWasMoved || !interaction.prepared.name) {
    return;
  }

  signals.fire('before-start', arg);

  var target = interaction.target;

  if (interaction.prepared.name && target) {
    // check manualStart and interaction limit
    if (target.options[interaction.prepared.name].manualStart || !withinInteractionLimit(target, interaction.element, interaction.prepared)) {
      interaction.stop(event);
    } else {
      interaction.start(interaction.prepared, target, interaction.element);
    }
  }
});

// Check if the current target supports the action.
// If so, return the validated action. Otherwise, return null
function validateAction(action, interactable, element, eventTarget) {
  if (utils.is.object(action) && interactable.testIgnoreAllow(interactable.options[action.name], element, eventTarget) && interactable.options[action.name].enabled && withinInteractionLimit(interactable, element, action)) {
    return action;
  }

  return null;
}

function validateSelector(interaction, pointer, event, matches, matchElements, eventTarget) {
  for (var i = 0, len = matches.length; i < len; i++) {
    var match = matches[i];
    var matchElement = matchElements[i];
    var action = validateAction(match.getAction(pointer, event, interaction, matchElement), match, matchElement, eventTarget);

    if (action) {
      return {
        action: action,
        target: match,
        element: matchElement
      };
    }
  }

  return {};
}

function getActionInfo(interaction, pointer, event, eventTarget) {
  var matches = [];
  var matchElements = [];

  var element = eventTarget;

  function pushMatches(interactable) {
    matches.push(interactable);
    matchElements.push(element);
  }

  while (utils.is.element(element)) {
    matches = [];
    matchElements = [];

    scope.interactables.forEachMatch(element, pushMatches);

    var actionInfo = validateSelector(interaction, pointer, event, matches, matchElements, eventTarget);

    if (actionInfo.action && !actionInfo.target.options[actionInfo.action.name].manualStart) {
      return actionInfo;
    }

    element = utils.parentNode(element);
  }

  return {};
}

function prepare(interaction, _ref3) {
  var action = _ref3.action,
      target = _ref3.target,
      element = _ref3.element;

  action = action || {};

  if (interaction.target && interaction.target.options.styleCursor) {
    interaction.target._doc.documentElement.style.cursor = '';
  }

  interaction.target = target;
  interaction.element = element;
  utils.copyAction(interaction.prepared, action);

  if (target && target.options.styleCursor) {
    var cursor = action ? actions[action.name].getCursor(action) : '';
    interaction.target._doc.documentElement.style.cursor = cursor;
  }

  signals.fire('prepared', { interaction: interaction });
}

Interaction.signals.on('stop', function (_ref4) {
  var interaction = _ref4.interaction;

  var target = interaction.target;

  if (target && target.options.styleCursor) {
    target._doc.documentElement.style.cursor = '';
  }
});

function withinInteractionLimit(interactable, element, action) {
  var options = interactable.options;
  var maxActions = options[action.name].max;
  var maxPerElement = options[action.name].maxPerElement;
  var activeInteractions = 0;
  var targetCount = 0;
  var targetElementCount = 0;

  // no actions if any of these values == 0
  if (!(maxActions && maxPerElement && autoStart.maxInteractions)) {
    return;
  }

  for (var _i = 0; _i < scope.interactions.length; _i++) {
    var _ref5;

    _ref5 = scope.interactions[_i];
    var interaction = _ref5;

    var otherAction = interaction.prepared.name;

    if (!interaction.interacting()) {
      continue;
    }

    activeInteractions++;

    if (activeInteractions >= autoStart.maxInteractions) {
      return false;
    }

    if (interaction.target !== interactable) {
      continue;
    }

    targetCount += otherAction === action.name | 0;

    if (targetCount >= maxActions) {
      return false;
    }

    if (interaction.element === element) {
      targetElementCount++;

      if (otherAction !== action.name || targetElementCount >= maxPerElement) {
        return false;
      }
    }
  }

  return autoStart.maxInteractions > 0;
}

/**
 * Returns or sets the maximum number of concurrent interactions allowed.  By
 * default only 1 interaction is allowed at a time (for backwards
 * compatibility). To allow multiple interactions on the same Interactables and
 * elements, you need to enable it in the draggable, resizable and gesturable
 * `'max'` and `'maxPerElement'` options.
 *
 * @alias module:interact.maxInteractions
 *
 * @param {number} [newValue] Any number. newValue <= 0 means no interactions.
 */
interact.maxInteractions = function (newValue) {
  if (utils.is.number(newValue)) {
    autoStart.maxInteractions = newValue;

    return interact;
  }

  return autoStart.maxInteractions;
};

Interactable.settingsMethods.push('styleCursor');
Interactable.settingsMethods.push('actionChecker');
Interactable.settingsMethods.push('ignoreFrom');
Interactable.settingsMethods.push('allowFrom');

defaultOptions.base.actionChecker = null;
defaultOptions.base.styleCursor = true;

utils.extend(defaultOptions.perAction, autoStart.defaults.perAction);

module.exports = autoStart;

},{"../Interactable":4,"../Interaction":5,"../actions/base":6,"../defaultOptions":18,"../interact":21,"../scope":33,"../utils":44,"../utils/Signals":34,"./InteractableMethods":12}],14:[function(require,module,exports){
'use strict';

var autoStart = require('./base');
var scope = require('../scope');
var is = require('../utils/is');

var _require = require('../utils/domUtils'),
    parentNode = _require.parentNode;

autoStart.setActionDefaults(require('../actions/drag'));

autoStart.signals.on('before-start', function (_ref) {
  var interaction = _ref.interaction,
      eventTarget = _ref.eventTarget,
      dx = _ref.dx,
      dy = _ref.dy;

  if (interaction.prepared.name !== 'drag') {
    return;
  }

  // check if a drag is in the correct axis
  var absX = Math.abs(dx);
  var absY = Math.abs(dy);
  var targetOptions = interaction.target.options.drag;
  var startAxis = targetOptions.startAxis;
  var currentAxis = absX > absY ? 'x' : absX < absY ? 'y' : 'xy';

  interaction.prepared.axis = targetOptions.lockAxis === 'start' ? currentAxis[0] // always lock to one axis even if currentAxis === 'xy'
  : targetOptions.lockAxis;

  // if the movement isn't in the startAxis of the interactable
  if (currentAxis !== 'xy' && startAxis !== 'xy' && startAxis !== currentAxis) {
    // cancel the prepared action
    interaction.prepared.name = null;

    // then try to get a drag from another ineractable
    var element = eventTarget;

    var getDraggable = function getDraggable(interactable) {
      if (interactable === interaction.target) {
        return;
      }

      var options = interaction.target.options.drag;

      if (!options.manualStart && interactable.testIgnoreAllow(options, element, eventTarget)) {

        var action = interactable.getAction(interaction.downPointer, interaction.downEvent, interaction, element);

        if (action && action.name === 'drag' && checkStartAxis(currentAxis, interactable) && autoStart.validateAction(action, interactable, element, eventTarget)) {

          return interactable;
        }
      }
    };

    // check all interactables
    while (is.element(element)) {
      var interactable = scope.interactables.forEachMatch(element, getDraggable);

      if (interactable) {
        interaction.prepared.name = 'drag';
        interaction.target = interactable;
        interaction.element = element;
        break;
      }

      element = parentNode(element);
    }
  }
});

function checkStartAxis(startAxis, interactable) {
  if (!interactable) {
    return false;
  }

  var thisAxis = interactable.options.drag.startAxis;

  return startAxis === 'xy' || thisAxis === 'xy' || thisAxis === startAxis;
}

},{"../actions/drag":7,"../scope":33,"../utils/domUtils":39,"../utils/is":46,"./base":13}],15:[function(require,module,exports){
'use strict';

require('./base').setActionDefaults(require('../actions/gesture'));

},{"../actions/gesture":9,"./base":13}],16:[function(require,module,exports){
'use strict';

var autoStart = require('./base');
var Interaction = require('../Interaction');

autoStart.defaults.perAction.hold = 0;
autoStart.defaults.perAction.delay = 0;

Interaction.signals.on('new', function (interaction) {
  interaction.autoStartHoldTimer = null;
});

autoStart.signals.on('prepared', function (_ref) {
  var interaction = _ref.interaction;

  var hold = getHoldDuration(interaction);

  if (hold > 0) {
    interaction.autoStartHoldTimer = setTimeout(function () {
      interaction.start(interaction.prepared, interaction.target, interaction.element);
    }, hold);
  }
});

Interaction.signals.on('move', function (_ref2) {
  var interaction = _ref2.interaction,
      duplicate = _ref2.duplicate;

  if (interaction.pointerWasMoved && !duplicate) {
    clearTimeout(interaction.autoStartHoldTimer);
  }
});

// prevent regular down->move autoStart
autoStart.signals.on('before-start', function (_ref3) {
  var interaction = _ref3.interaction;

  var hold = getHoldDuration(interaction);

  if (hold > 0) {
    interaction.prepared.name = null;
  }
});

function getHoldDuration(interaction) {
  var actionName = interaction.prepared && interaction.prepared.name;

  if (!actionName) {
    return null;
  }

  var options = interaction.target.options;

  return options[actionName].hold || options[actionName].delay;
}

module.exports = {
  getHoldDuration: getHoldDuration
};

},{"../Interaction":5,"./base":13}],17:[function(require,module,exports){
'use strict';

require('./base').setActionDefaults(require('../actions/resize'));

},{"../actions/resize":10,"./base":13}],18:[function(require,module,exports){
'use strict';

module.exports = {
  base: {
    accept: null,
    preventDefault: 'auto',
    deltaSource: 'page'
  },

  perAction: {
    origin: { x: 0, y: 0 },

    inertia: {
      enabled: false,
      resistance: 10, // the lambda in exponential decay
      minSpeed: 100, // target speed must be above this for inertia to start
      endSpeed: 10, // the speed at which inertia is slow enough to stop
      allowResume: true, // allow resuming an action in inertia phase
      smoothEndDuration: 300 // animate to snap/restrict endOnly if there's no inertia
    }
  }
};

},{}],19:[function(require,module,exports){
'use strict';

/* browser entry point */

// inertia
require('./inertia');

// modifiers
require('./modifiers/snap');
require('./modifiers/restrict');

// pointerEvents
require('./pointerEvents/base');
require('./pointerEvents/holdRepeat');
require('./pointerEvents/interactableTargets');

// autoStart hold
require('./autoStart/hold');

// actions
require('./actions/gesture');
require('./actions/resize');
require('./actions/drag');
require('./actions/drop');

// load these modifiers after resize is loaded
require('./modifiers/snapSize');
require('./modifiers/restrictEdges');
require('./modifiers/restrictSize');

// autoStart actions
require('./autoStart/gesture');
require('./autoStart/resize');
require('./autoStart/drag');

// Interactable preventDefault setting
require('./interactablePreventDefault.js');

// autoScroll
require('./autoScroll');

// export interact
module.exports = require('./interact');

},{"./actions/drag":7,"./actions/drop":8,"./actions/gesture":9,"./actions/resize":10,"./autoScroll":11,"./autoStart/drag":14,"./autoStart/gesture":15,"./autoStart/hold":16,"./autoStart/resize":17,"./inertia":20,"./interact":21,"./interactablePreventDefault.js":22,"./modifiers/restrict":24,"./modifiers/restrictEdges":25,"./modifiers/restrictSize":26,"./modifiers/snap":27,"./modifiers/snapSize":28,"./pointerEvents/base":30,"./pointerEvents/holdRepeat":31,"./pointerEvents/interactableTargets":32}],20:[function(require,module,exports){
'use strict';

var InteractEvent = require('./InteractEvent');
var Interaction = require('./Interaction');
var modifiers = require('./modifiers/base');
var utils = require('./utils');
var animationFrame = require('./utils/raf');

Interaction.signals.on('new', function (interaction) {
  interaction.inertiaStatus = {
    active: false,
    smoothEnd: false,
    allowResume: false,

    startEvent: null,
    upCoords: {},

    xe: 0, ye: 0,
    sx: 0, sy: 0,

    t0: 0,
    vx0: 0, vys: 0,
    duration: 0,

    lambda_v0: 0,
    one_ve_v0: 0,
    i: null
  };

  interaction.boundInertiaFrame = function () {
    return inertiaFrame.apply(interaction);
  };
  interaction.boundSmoothEndFrame = function () {
    return smoothEndFrame.apply(interaction);
  };
});

Interaction.signals.on('down', function (_ref) {
  var interaction = _ref.interaction,
      event = _ref.event,
      pointer = _ref.pointer,
      eventTarget = _ref.eventTarget;

  var status = interaction.inertiaStatus;

  // Check if the down event hits the current inertia target
  if (status.active) {
    var element = eventTarget;

    // climb up the DOM tree from the event target
    while (utils.is.element(element)) {

      // if interaction element is the current inertia target element
      if (element === interaction.element) {
        // stop inertia
        animationFrame.cancel(status.i);
        status.active = false;
        interaction.simulation = null;

        // update pointers to the down event's coordinates
        interaction.updatePointer(pointer);
        utils.setCoords(interaction.curCoords, interaction.pointers);

        // fire appropriate signals
        var signalArg = { interaction: interaction };
        Interaction.signals.fire('before-action-move', signalArg);
        Interaction.signals.fire('action-resume', signalArg);

        // fire a reume event
        var resumeEvent = new InteractEvent(interaction, event, interaction.prepared.name, 'inertiaresume', interaction.element);

        interaction.target.fire(resumeEvent);
        interaction.prevEvent = resumeEvent;
        modifiers.resetStatuses(interaction.modifierStatuses);

        utils.copyCoords(interaction.prevCoords, interaction.curCoords);
        break;
      }

      element = utils.parentNode(element);
    }
  }
});

Interaction.signals.on('up', function (_ref2) {
  var interaction = _ref2.interaction,
      event = _ref2.event;

  var status = interaction.inertiaStatus;

  if (!interaction.interacting() || status.active) {
    return;
  }

  var target = interaction.target;
  var options = target && target.options;
  var inertiaOptions = options && interaction.prepared.name && options[interaction.prepared.name].inertia;

  var now = new Date().getTime();
  var statuses = {};
  var page = utils.extend({}, interaction.curCoords.page);
  var pointerSpeed = interaction.pointerDelta.client.speed;

  var smoothEnd = false;
  var modifierResult = void 0;

  // check if inertia should be started
  var inertiaPossible = inertiaOptions && inertiaOptions.enabled && interaction.prepared.name !== 'gesture' && event !== status.startEvent;

  var inertia = inertiaPossible && now - interaction.curCoords.timeStamp < 50 && pointerSpeed > inertiaOptions.minSpeed && pointerSpeed > inertiaOptions.endSpeed;

  var modifierArg = {
    interaction: interaction,
    pageCoords: page,
    statuses: statuses,
    preEnd: true,
    requireEndOnly: true
  };

  // smoothEnd
  if (inertiaPossible && !inertia) {
    modifiers.resetStatuses(statuses);

    modifierResult = modifiers.setAll(modifierArg);

    if (modifierResult.shouldMove && modifierResult.locked) {
      smoothEnd = true;
    }
  }

  if (!(inertia || smoothEnd)) {
    return;
  }

  utils.copyCoords(status.upCoords, interaction.curCoords);

  interaction.pointers[0] = status.startEvent = new InteractEvent(interaction, event, interaction.prepared.name, 'inertiastart', interaction.element);

  status.t0 = now;

  status.active = true;
  status.allowResume = inertiaOptions.allowResume;
  interaction.simulation = status;

  target.fire(status.startEvent);

  if (inertia) {
    status.vx0 = interaction.pointerDelta.client.vx;
    status.vy0 = interaction.pointerDelta.client.vy;
    status.v0 = pointerSpeed;

    calcInertia(interaction, status);

    utils.extend(page, interaction.curCoords.page);

    page.x += status.xe;
    page.y += status.ye;

    modifiers.resetStatuses(statuses);

    modifierResult = modifiers.setAll(modifierArg);

    status.modifiedXe += modifierResult.dx;
    status.modifiedYe += modifierResult.dy;

    status.i = animationFrame.request(interaction.boundInertiaFrame);
  } else {
    status.smoothEnd = true;
    status.xe = modifierResult.dx;
    status.ye = modifierResult.dy;

    status.sx = status.sy = 0;

    status.i = animationFrame.request(interaction.boundSmoothEndFrame);
  }
});

Interaction.signals.on('stop-active', function (_ref3) {
  var interaction = _ref3.interaction;

  var status = interaction.inertiaStatus;

  if (status.active) {
    animationFrame.cancel(status.i);
    status.active = false;
    interaction.simulation = null;
  }
});

function calcInertia(interaction, status) {
  var inertiaOptions = interaction.target.options[interaction.prepared.name].inertia;
  var lambda = inertiaOptions.resistance;
  var inertiaDur = -Math.log(inertiaOptions.endSpeed / status.v0) / lambda;

  status.x0 = interaction.prevEvent.pageX;
  status.y0 = interaction.prevEvent.pageY;
  status.t0 = status.startEvent.timeStamp / 1000;
  status.sx = status.sy = 0;

  status.modifiedXe = status.xe = (status.vx0 - inertiaDur) / lambda;
  status.modifiedYe = status.ye = (status.vy0 - inertiaDur) / lambda;
  status.te = inertiaDur;

  status.lambda_v0 = lambda / status.v0;
  status.one_ve_v0 = 1 - inertiaOptions.endSpeed / status.v0;
}

function inertiaFrame() {
  updateInertiaCoords(this);
  utils.setCoordDeltas(this.pointerDelta, this.prevCoords, this.curCoords);

  var status = this.inertiaStatus;
  var options = this.target.options[this.prepared.name].inertia;
  var lambda = options.resistance;
  var t = new Date().getTime() / 1000 - status.t0;

  if (t < status.te) {

    var progress = 1 - (Math.exp(-lambda * t) - status.lambda_v0) / status.one_ve_v0;

    if (status.modifiedXe === status.xe && status.modifiedYe === status.ye) {
      status.sx = status.xe * progress;
      status.sy = status.ye * progress;
    } else {
      var quadPoint = utils.getQuadraticCurvePoint(0, 0, status.xe, status.ye, status.modifiedXe, status.modifiedYe, progress);

      status.sx = quadPoint.x;
      status.sy = quadPoint.y;
    }

    this.doMove();

    status.i = animationFrame.request(this.boundInertiaFrame);
  } else {
    status.sx = status.modifiedXe;
    status.sy = status.modifiedYe;

    this.doMove();
    this.end(status.startEvent);
    status.active = false;
    this.simulation = null;
  }

  utils.copyCoords(this.prevCoords, this.curCoords);
}

function smoothEndFrame() {
  updateInertiaCoords(this);

  var status = this.inertiaStatus;
  var t = new Date().getTime() - status.t0;
  var duration = this.target.options[this.prepared.name].inertia.smoothEndDuration;

  if (t < duration) {
    status.sx = utils.easeOutQuad(t, 0, status.xe, duration);
    status.sy = utils.easeOutQuad(t, 0, status.ye, duration);

    this.pointerMove(status.startEvent, status.startEvent);

    status.i = animationFrame.request(this.boundSmoothEndFrame);
  } else {
    status.sx = status.xe;
    status.sy = status.ye;

    this.pointerMove(status.startEvent, status.startEvent);
    this.end(status.startEvent);

    status.smoothEnd = status.active = false;
    this.simulation = null;
  }
}

function updateInertiaCoords(interaction) {
  var status = interaction.inertiaStatus;

  // return if inertia isn't running
  if (!status.active) {
    return;
  }

  var pageUp = status.upCoords.page;
  var clientUp = status.upCoords.client;

  utils.setCoords(interaction.curCoords, [{
    pageX: pageUp.x + status.sx,
    pageY: pageUp.y + status.sy,
    clientX: clientUp.x + status.sx,
    clientY: clientUp.y + status.sy
  }]);
}

},{"./InteractEvent":3,"./Interaction":5,"./modifiers/base":23,"./utils":44,"./utils/raf":50}],21:[function(require,module,exports){
'use strict';

/** @module interact */

var browser = require('./utils/browser');
var events = require('./utils/events');
var utils = require('./utils');
var scope = require('./scope');
var Interactable = require('./Interactable');
var Interaction = require('./Interaction');

var globalEvents = {};

/**
 * ```js
 * interact('#draggable').draggable(true);
 *
 * var rectables = interact('rect');
 * rectables
 *   .gesturable(true)
 *   .on('gesturemove', function (event) {
 *       // ...
 *   });
 * ```
 *
 * The methods of this variable can be used to set elements as interactables
 * and also to change various default settings.
 *
 * Calling it as a function and passing an element or a valid CSS selector
 * string returns an Interactable object which has various methods to configure
 * it.
 *
 * @global
 *
 * @param {Element | string} element The HTML or SVG Element to interact with
 * or CSS selector
 * @return {Interactable}
 */
function interact(element, options) {
  var interactable = scope.interactables.get(element, options);

  if (!interactable) {
    interactable = new Interactable(element, options);
    interactable.events.global = globalEvents;
  }

  return interactable;
}

/**
 * Check if an element or selector has been set with the {@link interact}
 * function
 *
 * @alias module:interact.isSet
 *
 * @param {Element} element The Element being searched for
 * @return {boolean} Indicates if the element or CSS selector was previously
 * passed to interact
*/
interact.isSet = function (element, options) {
  return scope.interactables.indexOfElement(element, options && options.context) !== -1;
};

/**
 * Add a global listener for an InteractEvent or adds a DOM event to `document`
 *
 * @alias module:interact.on
 *
 * @param {string | array | object} type The types of events to listen for
 * @param {function} listener The function event (s)
 * @param {object | boolean} [options] object or useCapture flag for
 * addEventListener
 * @return {object} interact
 */
interact.on = function (type, listener, options) {
  if (utils.is.string(type) && type.search(' ') !== -1) {
    type = type.trim().split(/ +/);
  }

  if (utils.is.array(type)) {
    for (var _i = 0; _i < type.length; _i++) {
      var _ref;

      _ref = type[_i];
      var eventType = _ref;

      interact.on(eventType, listener, options);
    }

    return interact;
  }

  if (utils.is.object(type)) {
    for (var prop in type) {
      interact.on(prop, type[prop], listener);
    }

    return interact;
  }

  // if it is an InteractEvent type, add listener to globalEvents
  if (utils.contains(Interactable.eventTypes, type)) {
    // if this type of event was never bound
    if (!globalEvents[type]) {
      globalEvents[type] = [listener];
    } else {
      globalEvents[type].push(listener);
    }
  }
  // If non InteractEvent type, addEventListener to document
  else {
      events.add(scope.document, type, listener, { options: options });
    }

  return interact;
};

/**
 * Removes a global InteractEvent listener or DOM event from `document`
 *
 * @alias module:interact.off
 *
 * @param {string | array | object} type The types of events that were listened
 * for
 * @param {function} listener The listener function to be removed
 * @param {object | boolean} options [options] object or useCapture flag for
 * removeEventListener
 * @return {object} interact
 */
interact.off = function (type, listener, options) {
  if (utils.is.string(type) && type.search(' ') !== -1) {
    type = type.trim().split(/ +/);
  }

  if (utils.is.array(type)) {
    for (var _i2 = 0; _i2 < type.length; _i2++) {
      var _ref2;

      _ref2 = type[_i2];
      var eventType = _ref2;

      interact.off(eventType, listener, options);
    }

    return interact;
  }

  if (utils.is.object(type)) {
    for (var prop in type) {
      interact.off(prop, type[prop], listener);
    }

    return interact;
  }

  if (!utils.contains(Interactable.eventTypes, type)) {
    events.remove(scope.document, type, listener, options);
  } else {
    var index = void 0;

    if (type in globalEvents && (index = globalEvents[type].indexOf(listener)) !== -1) {
      globalEvents[type].splice(index, 1);
    }
  }

  return interact;
};

/**
 * Returns an object which exposes internal data

 * @alias module:interact.debug
 *
 * @return {object} An object with properties that outline the current state
 * and expose internal functions and variables
 */
interact.debug = function () {
  return scope;
};

// expose the functions used to calculate multi-touch properties
interact.getPointerAverage = utils.pointerAverage;
interact.getTouchBBox = utils.touchBBox;
interact.getTouchDistance = utils.touchDistance;
interact.getTouchAngle = utils.touchAngle;

interact.getElementRect = utils.getElementRect;
interact.getElementClientRect = utils.getElementClientRect;
interact.matchesSelector = utils.matchesSelector;
interact.closest = utils.closest;

/**
 * @alias module:interact.supportsTouch
 *
 * @return {boolean} Whether or not the browser supports touch input
 */
interact.supportsTouch = function () {
  return browser.supportsTouch;
};

/**
 * @alias module:interact.supportsPointerEvent
 *
 * @return {boolean} Whether or not the browser supports PointerEvents
 */
interact.supportsPointerEvent = function () {
  return browser.supportsPointerEvent;
};

/**
 * Cancels all interactions (end events are not fired)
 *
 * @alias module:interact.stop
 *
 * @param {Event} event An event on which to call preventDefault()
 * @return {object} interact
 */
interact.stop = function (event) {
  for (var i = scope.interactions.length - 1; i >= 0; i--) {
    scope.interactions[i].stop(event);
  }

  return interact;
};

/**
 * Returns or sets the distance the pointer must be moved before an action
 * sequence occurs. This also affects tolerance for tap events.
 *
 * @alias module:interact.pointerMoveTolerance
 *
 * @param {number} [newValue] The movement from the start position must be greater than this value
 * @return {interact | number}
 */
interact.pointerMoveTolerance = function (newValue) {
  if (utils.is.number(newValue)) {
    Interaction.pointerMoveTolerance = newValue;

    return interact;
  }

  return Interaction.pointerMoveTolerance;
};

interact.addDocument = scope.addDocument;
interact.removeDocument = scope.removeDocument;

scope.interact = interact;

module.exports = interact;

},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils":44,"./utils/browser":36,"./utils/events":40}],22:[function(require,module,exports){
'use strict';

var Interactable = require('./Interactable');
var Interaction = require('./Interaction');
var scope = require('./scope');
var is = require('./utils/is');
var events = require('./utils/events');
var browser = require('./utils/browser');

var _require = require('./utils/domUtils'),
    nodeContains = _require.nodeContains,
    matchesSelector = _require.matchesSelector;

/**
 * Returns or sets whether to prevent the browser's default behaviour in
 * response to pointer events. Can be set to:
 *  - `'always'` to always prevent
 *  - `'never'` to never prevent
 *  - `'auto'` to let interact.js try to determine what would be best
 *
 * @param {string} [newValue] `true`, `false` or `'auto'`
 * @return {string | Interactable} The current setting or this Interactable
 */


Interactable.prototype.preventDefault = function (newValue) {
  if (/^(always|never|auto)$/.test(newValue)) {
    this.options.preventDefault = newValue;
    return this;
  }

  if (is.bool(newValue)) {
    this.options.preventDefault = newValue ? 'always' : 'never';
    return this;
  }

  return this.options.preventDefault;
};

Interactable.prototype.checkAndPreventDefault = function (event) {
  var setting = this.options.preventDefault;

  if (setting === 'never') {
    return;
  }

  if (setting === 'always') {
    event.preventDefault();
    return;
  }

  // setting === 'auto'

  // don't preventDefault of touch{start,move} events if the browser supports passive
  // events listeners. CSS touch-action and user-selecct should be used instead
  if (events.supportsPassive && /^touch(start|move)$/.test(event.type) && !browser.isIOS) {
    return;
  }

  // don't preventDefault of pointerdown events
  if (/^(mouse|pointer|touch)*(down|start)/i.test(event.type)) {
    return;
  }

  // don't preventDefault on editable elements
  if (is.element(event.target) && matchesSelector(event.target, 'input,select,textarea,[contenteditable=true],[contenteditable=true] *')) {
    return;
  }

  event.preventDefault();
};

function onInteractionEvent(_ref) {
  var interaction = _ref.interaction,
      event = _ref.event;

  if (interaction.target) {
    interaction.target.checkAndPreventDefault(event);
  }
}

var _arr = ['down', 'move', 'up', 'cancel'];
for (var _i = 0; _i < _arr.length; _i++) {
  var eventSignal = _arr[_i];
  Interaction.signals.on(eventSignal, onInteractionEvent);
}

// prevent native HTML5 drag on interact.js target elements
Interaction.docEvents.dragstart = function preventNativeDrag(event) {
  for (var _i2 = 0; _i2 < scope.interactions.length; _i2++) {
    var _ref2;

    _ref2 = scope.interactions[_i2];
    var interaction = _ref2;


    if (interaction.element && (interaction.element === event.target || nodeContains(interaction.element, event.target))) {

      interaction.target.checkAndPreventDefault(event);
      return;
    }
  }
};

},{"./Interactable":4,"./Interaction":5,"./scope":33,"./utils/browser":36,"./utils/domUtils":39,"./utils/events":40,"./utils/is":46}],23:[function(require,module,exports){
'use strict';

var InteractEvent = require('../InteractEvent');
var Interaction = require('../Interaction');
var extend = require('../utils/extend');

var modifiers = {
  names: [],

  setOffsets: function setOffsets(arg) {
    var interaction = arg.interaction,
        page = arg.pageCoords;
    var target = interaction.target,
        element = interaction.element,
        startOffset = interaction.startOffset;

    var rect = target.getRect(element);

    if (rect) {
      startOffset.left = page.x - rect.left;
      startOffset.top = page.y - rect.top;

      startOffset.right = rect.right - page.x;
      startOffset.bottom = rect.bottom - page.y;

      if (!('width' in rect)) {
        rect.width = rect.right - rect.left;
      }
      if (!('height' in rect)) {
        rect.height = rect.bottom - rect.top;
      }
    } else {
      startOffset.left = startOffset.top = startOffset.right = startOffset.bottom = 0;
    }

    arg.rect = rect;
    arg.interactable = target;
    arg.element = element;

    for (var _i = 0; _i < modifiers.names.length; _i++) {
      var _ref;

      _ref = modifiers.names[_i];
      var modifierName = _ref;

      arg.options = target.options[interaction.prepared.name][modifierName];

      if (!arg.options) {
        continue;
      }

      interaction.modifierOffsets[modifierName] = modifiers[modifierName].setOffset(arg);
    }
  },

  setAll: function setAll(arg) {
    var interaction = arg.interaction,
        statuses = arg.statuses,
        preEnd = arg.preEnd,
        requireEndOnly = arg.requireEndOnly;

    var result = {
      dx: 0,
      dy: 0,
      changed: false,
      locked: false,
      shouldMove: true
    };

    arg.modifiedCoords = extend({}, arg.pageCoords);

    for (var _i2 = 0; _i2 < modifiers.names.length; _i2++) {
      var _ref2;

      _ref2 = modifiers.names[_i2];
      var modifierName = _ref2;

      var modifier = modifiers[modifierName];
      var options = interaction.target.options[interaction.prepared.name][modifierName];

      if (!shouldDo(options, preEnd, requireEndOnly)) {
        continue;
      }

      arg.status = arg.status = statuses[modifierName];
      arg.options = options;
      arg.offset = arg.interaction.modifierOffsets[modifierName];

      modifier.set(arg);

      if (arg.status.locked) {
        arg.modifiedCoords.x += arg.status.dx;
        arg.modifiedCoords.y += arg.status.dy;

        result.dx += arg.status.dx;
        result.dy += arg.status.dy;

        result.locked = true;
      }
    }

    // a move should be fired if:
    //  - there are no modifiers enabled,
    //  - no modifiers are "locked" i.e. have changed the pointer's coordinates, or
    //  - the locked coords have changed since the last pointer move
    result.shouldMove = !arg.status || !result.locked || arg.status.changed;

    return result;
  },

  resetStatuses: function resetStatuses(statuses) {
    for (var _i3 = 0; _i3 < modifiers.names.length; _i3++) {
      var _ref3;

      _ref3 = modifiers.names[_i3];
      var modifierName = _ref3;

      var status = statuses[modifierName] || {};

      status.dx = status.dy = 0;
      status.modifiedX = status.modifiedY = NaN;
      status.locked = false;
      status.changed = true;

      statuses[modifierName] = status;
    }

    return statuses;
  },

  start: function start(_ref4, signalName) {
    var interaction = _ref4.interaction;

    var arg = {
      interaction: interaction,
      pageCoords: (signalName === 'action-resume' ? interaction.curCoords : interaction.startCoords).page,
      startOffset: interaction.startOffset,
      statuses: interaction.modifierStatuses,
      preEnd: false,
      requireEndOnly: false
    };

    modifiers.setOffsets(arg);
    modifiers.resetStatuses(arg.statuses);

    arg.pageCoords = extend({}, interaction.startCoords.page);
    interaction.modifierResult = modifiers.setAll(arg);
  },

  beforeMove: function beforeMove(_ref5) {
    var interaction = _ref5.interaction,
        preEnd = _ref5.preEnd,
        interactingBeforeMove = _ref5.interactingBeforeMove;

    var modifierResult = modifiers.setAll({
      interaction: interaction,
      preEnd: preEnd,
      pageCoords: interaction.curCoords.page,
      statuses: interaction.modifierStatuses,
      requireEndOnly: false
    });

    // don't fire an action move if a modifier would keep the event in the same
    // cordinates as before
    if (!modifierResult.shouldMove && interactingBeforeMove) {
      interaction._dontFireMove = true;
    }

    interaction.modifierResult = modifierResult;
  },

  end: function end(_ref6) {
    var interaction = _ref6.interaction,
        event = _ref6.event;

    for (var _i4 = 0; _i4 < modifiers.names.length; _i4++) {
      var _ref7;

      _ref7 = modifiers.names[_i4];
      var modifierName = _ref7;

      var options = interaction.target.options[interaction.prepared.name][modifierName];

      // if the endOnly option is true for any modifier
      if (shouldDo(options, true, true)) {
        // fire a move event at the modified coordinates
        interaction.doMove({ event: event, preEnd: true });
        break;
      }
    }
  },

  setXY: function setXY(arg) {
    var iEvent = arg.iEvent,
        interaction = arg.interaction;

    var modifierArg = extend({}, arg);

    for (var i = 0; i < modifiers.names.length; i++) {
      var modifierName = modifiers.names[i];
      modifierArg.options = interaction.target.options[interaction.prepared.name][modifierName];

      if (!modifierArg.options) {
        continue;
      }

      var modifier = modifiers[modifierName];

      modifierArg.status = interaction.modifierStatuses[modifierName];

      iEvent[modifierName] = modifier.modifyCoords(modifierArg);
    }
  }
};

Interaction.signals.on('new', function (interaction) {
  interaction.startOffset = { left: 0, right: 0, top: 0, bottom: 0 };
  interaction.modifierOffsets = {};
  interaction.modifierStatuses = modifiers.resetStatuses({});
  interaction.modifierResult = null;
});

Interaction.signals.on('action-start', modifiers.start);
Interaction.signals.on('action-resume', modifiers.start);
Interaction.signals.on('before-action-move', modifiers.beforeMove);
Interaction.signals.on('action-end', modifiers.end);

InteractEvent.signals.on('set-xy', modifiers.setXY);

function shouldDo(options, preEnd, requireEndOnly) {
  return options && options.enabled && (preEnd || !options.endOnly) && (!requireEndOnly || options.endOnly);
}

module.exports = modifiers;

},{"../InteractEvent":3,"../Interaction":5,"../utils/extend":41}],24:[function(require,module,exports){
'use strict';

var modifiers = require('./base');
var utils = require('../utils');
var defaultOptions = require('../defaultOptions');

var restrict = {
  defaults: {
    enabled: false,
    endOnly: false,
    restriction: null,
    elementRect: null
  },

  setOffset: function setOffset(_ref) {
    var rect = _ref.rect,
        startOffset = _ref.startOffset,
        options = _ref.options;

    var elementRect = options && options.elementRect;
    var offset = {};

    if (rect && elementRect) {
      offset.left = startOffset.left - rect.width * elementRect.left;
      offset.top = startOffset.top - rect.height * elementRect.top;

      offset.right = startOffset.right - rect.width * (1 - elementRect.right);
      offset.bottom = startOffset.bottom - rect.height * (1 - elementRect.bottom);
    } else {
      offset.left = offset.top = offset.right = offset.bottom = 0;
    }

    return offset;
  },

  set: function set(_ref2) {
    var modifiedCoords = _ref2.modifiedCoords,
        interaction = _ref2.interaction,
        status = _ref2.status,
        options = _ref2.options;

    if (!options) {
      return status;
    }

    var page = status.useStatusXY ? { x: status.x, y: status.y } : utils.extend({}, modifiedCoords);

    var restriction = getRestrictionRect(options.restriction, interaction, page);

    if (!restriction) {
      return status;
    }

    status.dx = 0;
    status.dy = 0;
    status.locked = false;

    var rect = restriction;
    var modifiedX = page.x;
    var modifiedY = page.y;

    var offset = interaction.modifierOffsets.restrict;

    // object is assumed to have
    // x, y, width, height or
    // left, top, right, bottom
    if ('x' in restriction && 'y' in restriction) {
      modifiedX = Math.max(Math.min(rect.x + rect.width - offset.right, page.x), rect.x + offset.left);
      modifiedY = Math.max(Math.min(rect.y + rect.height - offset.bottom, page.y), rect.y + offset.top);
    } else {
      modifiedX = Math.max(Math.min(rect.right - offset.right, page.x), rect.left + offset.left);
      modifiedY = Math.max(Math.min(rect.bottom - offset.bottom, page.y), rect.top + offset.top);
    }

    status.dx = modifiedX - page.x;
    status.dy = modifiedY - page.y;

    status.changed = status.modifiedX !== modifiedX || status.modifiedY !== modifiedY;
    status.locked = !!(status.dx || status.dy);

    status.modifiedX = modifiedX;
    status.modifiedY = modifiedY;
  },

  modifyCoords: function modifyCoords(_ref3) {
    var page = _ref3.page,
        client = _ref3.client,
        status = _ref3.status,
        phase = _ref3.phase,
        options = _ref3.options;

    var elementRect = options && options.elementRect;

    if (options && options.enabled && !(phase === 'start' && elementRect && status.locked)) {

      if (status.locked) {
        page.x += status.dx;
        page.y += status.dy;
        client.x += status.dx;
        client.y += status.dy;

        return {
          dx: status.dx,
          dy: status.dy
        };
      }
    }
  },

  getRestrictionRect: getRestrictionRect
};

function getRestrictionRect(value, interaction, page) {
  if (utils.is.function(value)) {
    return utils.resolveRectLike(value, interaction.target, interaction.element, [page.x, page.y, interaction]);
  } else {
    return utils.resolveRectLike(value, interaction.target, interaction.element);
  }
}

modifiers.restrict = restrict;
modifiers.names.push('restrict');

defaultOptions.perAction.restrict = restrict.defaults;

module.exports = restrict;

},{"../defaultOptions":18,"../utils":44,"./base":23}],25:[function(require,module,exports){
'use strict';

// This module adds the options.resize.restrictEdges setting which sets min and
// max for the top, left, bottom and right edges of the target being resized.
//
// interact(target).resize({
//   edges: { top: true, left: true },
//   restrictEdges: {
//     inner: { top: 200, left: 200, right: 400, bottom: 400 },
//     outer: { top:   0, left:   0, right: 600, bottom: 600 },
//   },
// });

var modifiers = require('./base');
var utils = require('../utils');
var rectUtils = require('../utils/rect');
var defaultOptions = require('../defaultOptions');
var resize = require('../actions/resize');

var _require = require('./restrict'),
    getRestrictionRect = _require.getRestrictionRect;

var noInner = { top: +Infinity, left: +Infinity, bottom: -Infinity, right: -Infinity };
var noOuter = { top: -Infinity, left: -Infinity, bottom: +Infinity, right: +Infinity };

var restrictEdges = {
  defaults: {
    enabled: false,
    endOnly: false,
    min: null,
    max: null,
    offset: null
  },

  setOffset: function setOffset(_ref) {
    var interaction = _ref.interaction,
        startOffset = _ref.startOffset,
        options = _ref.options;

    if (!options) {
      return utils.extend({}, startOffset);
    }

    var offset = getRestrictionRect(options.offset, interaction, interaction.startCoords.page);

    if (offset) {
      return {
        top: startOffset.top + offset.y,
        left: startOffset.left + offset.x,
        bottom: startOffset.bottom + offset.y,
        right: startOffset.right + offset.x
      };
    }

    return startOffset;
  },

  set: function set(_ref2) {
    var modifiedCoords = _ref2.modifiedCoords,
        interaction = _ref2.interaction,
        status = _ref2.status,
        offset = _ref2.offset,
        options = _ref2.options;

    var edges = interaction.prepared.linkedEdges || interaction.prepared.edges;

    if (!interaction.interacting() || !edges) {
      return;
    }

    var page = status.useStatusXY ? { x: status.x, y: status.y } : utils.extend({}, modifiedCoords);
    var inner = rectUtils.xywhToTlbr(getRestrictionRect(options.inner, interaction, page)) || noInner;
    var outer = rectUtils.xywhToTlbr(getRestrictionRect(options.outer, interaction, page)) || noOuter;

    var modifiedX = page.x;
    var modifiedY = page.y;

    status.dx = 0;
    status.dy = 0;
    status.locked = false;

    if (edges.top) {
      modifiedY = Math.min(Math.max(outer.top + offset.top, page.y), inner.top + offset.top);
    } else if (edges.bottom) {
      modifiedY = Math.max(Math.min(outer.bottom - offset.bottom, page.y), inner.bottom - offset.bottom);
    }
    if (edges.left) {
      modifiedX = Math.min(Math.max(outer.left + offset.left, page.x), inner.left + offset.left);
    } else if (edges.right) {
      modifiedX = Math.max(Math.min(outer.right - offset.right, page.x), inner.right - offset.right);
    }

    status.dx = modifiedX - page.x;
    status.dy = modifiedY - page.y;

    status.changed = status.modifiedX !== modifiedX || status.modifiedY !== modifiedY;
    status.locked = !!(status.dx || status.dy);

    status.modifiedX = modifiedX;
    status.modifiedY = modifiedY;
  },

  modifyCoords: function modifyCoords(_ref3) {
    var page = _ref3.page,
        client = _ref3.client,
        status = _ref3.status,
        phase = _ref3.phase,
        options = _ref3.options;

    if (options && options.enabled && !(phase === 'start' && status.locked)) {

      if (status.locked) {
        page.x += status.dx;
        page.y += status.dy;
        client.x += status.dx;
        client.y += status.dy;

        return {
          dx: status.dx,
          dy: status.dy
        };
      }
    }
  },

  noInner: noInner,
  noOuter: noOuter,
  getRestrictionRect: getRestrictionRect
};

modifiers.restrictEdges = restrictEdges;
modifiers.names.push('restrictEdges');

defaultOptions.perAction.restrictEdges = restrictEdges.defaults;
resize.defaults.restrictEdges = restrictEdges.defaults;

module.exports = restrictEdges;

},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrict":24}],26:[function(require,module,exports){
'use strict';

// This module adds the options.resize.restrictSize setting which sets min and
// max width and height for the target being resized.
//
// interact(target).resize({
//   edges: { top: true, left: true },
//   restrictSize: {
//     min: { width: -600, height: -600 },
//     max: { width:  600, height:  600 },
//   },
// });

var modifiers = require('./base');
var restrictEdges = require('./restrictEdges');
var utils = require('../utils');
var rectUtils = require('../utils/rect');
var defaultOptions = require('../defaultOptions');
var resize = require('../actions/resize');

var noMin = { width: -Infinity, height: -Infinity };
var noMax = { width: +Infinity, height: +Infinity };

var restrictSize = {
  defaults: {
    enabled: false,
    endOnly: false,
    min: null,
    max: null
  },

  setOffset: function setOffset(_ref) {
    var interaction = _ref.interaction;

    return interaction.startOffset;
  },

  set: function set(arg) {
    var interaction = arg.interaction,
        options = arg.options;

    var edges = interaction.prepared.linkedEdges || interaction.prepared.edges;

    if (!interaction.interacting() || !edges) {
      return;
    }

    var rect = rectUtils.xywhToTlbr(interaction.resizeRects.inverted);

    var minSize = rectUtils.tlbrToXywh(restrictEdges.getRestrictionRect(options.min, interaction)) || noMin;
    var maxSize = rectUtils.tlbrToXywh(restrictEdges.getRestrictionRect(options.max, interaction)) || noMax;

    arg.options = {
      enabled: options.enabled,
      endOnly: options.endOnly,
      inner: utils.extend({}, restrictEdges.noInner),
      outer: utils.extend({}, restrictEdges.noOuter)
    };

    if (edges.top) {
      arg.options.inner.top = rect.bottom - minSize.height;
      arg.options.outer.top = rect.bottom - maxSize.height;
    } else if (edges.bottom) {
      arg.options.inner.bottom = rect.top + minSize.height;
      arg.options.outer.bottom = rect.top + maxSize.height;
    }
    if (edges.left) {
      arg.options.inner.left = rect.right - minSize.width;
      arg.options.outer.left = rect.right - maxSize.width;
    } else if (edges.right) {
      arg.options.inner.right = rect.left + minSize.width;
      arg.options.outer.right = rect.left + maxSize.width;
    }

    restrictEdges.set(arg);
  },

  modifyCoords: restrictEdges.modifyCoords
};

modifiers.restrictSize = restrictSize;
modifiers.names.push('restrictSize');

defaultOptions.perAction.restrictSize = restrictSize.defaults;
resize.defaults.restrictSize = restrictSize.defaults;

module.exports = restrictSize;

},{"../actions/resize":10,"../defaultOptions":18,"../utils":44,"../utils/rect":51,"./base":23,"./restrictEdges":25}],27:[function(require,module,exports){
'use strict';

var modifiers = require('./base');
var interact = require('../interact');
var utils = require('../utils');
var defaultOptions = require('../defaultOptions');

var snap = {
  defaults: {
    enabled: false,
    endOnly: false,
    range: Infinity,
    targets: null,
    offsets: null,

    relativePoints: null
  },

  setOffset: function setOffset(_ref) {
    var interaction = _ref.interaction,
        interactable = _ref.interactable,
        element = _ref.element,
        rect = _ref.rect,
        startOffset = _ref.startOffset,
        options = _ref.options;

    var offsets = [];
    var optionsOrigin = utils.rectToXY(utils.resolveRectLike(options.origin));
    var origin = optionsOrigin || utils.getOriginXY(interactable, element, interaction.prepared.name);
    options = options || interactable.options[interaction.prepared.name].snap || {};

    var snapOffset = void 0;

    if (options.offset === 'startCoords') {
      snapOffset = {
        x: interaction.startCoords.page.x - origin.x,
        y: interaction.startCoords.page.y - origin.y
      };
    } else {
      var offsetRect = utils.resolveRectLike(options.offset, interactable, element, [interaction]);

      snapOffset = utils.rectToXY(offsetRect) || { x: 0, y: 0 };
    }

    if (rect && options.relativePoints && options.relativePoints.length) {
      for (var _i = 0; _i < options.relativePoints.length; _i++) {
        var _ref3;

        _ref3 = options.relativePoints[_i];
        var _ref2 = _ref3;
        var relativeX = _ref2.x;
        var relativeY = _ref2.y;

        offsets.push({
          x: startOffset.left - rect.width * relativeX + snapOffset.x,
          y: startOffset.top - rect.height * relativeY + snapOffset.y
        });
      }
    } else {
      offsets.push(snapOffset);
    }

    return offsets;
  },

  set: function set(_ref4) {
    var interaction = _ref4.interaction,
        modifiedCoords = _ref4.modifiedCoords,
        status = _ref4.status,
        options = _ref4.options,
        offsets = _ref4.offset;

    var targets = [];
    var target = void 0;
    var page = void 0;
    var i = void 0;

    if (status.useStatusXY) {
      page = { x: status.x, y: status.y };
    } else {
      var origin = utils.getOriginXY(interaction.target, interaction.element, interaction.prepared.name);

      page = utils.extend({}, modifiedCoords);

      page.x -= origin.x;
      page.y -= origin.y;
    }

    status.realX = page.x;
    status.realY = page.y;

    var len = options.targets ? options.targets.length : 0;

    for (var _i2 = 0; _i2 < offsets.length; _i2++) {
      var _ref6;

      _ref6 = offsets[_i2];
      var _ref5 = _ref6;
      var offsetX = _ref5.x;
      var offsetY = _ref5.y;

      var relativeX = page.x - offsetX;
      var relativeY = page.y - offsetY;

      for (var _i3 = 0; _i3 < (options.targets || []).length; _i3++) {
        var _ref7;

        _ref7 = (options.targets || [])[_i3];
        var snapTarget = _ref7;

        if (utils.is.function(snapTarget)) {
          target = snapTarget(relativeX, relativeY, interaction);
        } else {
          target = snapTarget;
        }

        if (!target) {
          continue;
        }

        targets.push({
          x: utils.is.number(target.x) ? target.x + offsetX : relativeX,
          y: utils.is.number(target.y) ? target.y + offsetY : relativeY,

          range: utils.is.number(target.range) ? target.range : options.range
        });
      }
    }

    var closest = {
      target: null,
      inRange: false,
      distance: 0,
      range: 0,
      dx: 0,
      dy: 0
    };

    for (i = 0, len = targets.length; i < len; i++) {
      target = targets[i];

      var range = target.range;
      var dx = target.x - page.x;
      var dy = target.y - page.y;
      var distance = utils.hypot(dx, dy);
      var inRange = distance <= range;

      // Infinite targets count as being out of range
      // compared to non infinite ones that are in range
      if (range === Infinity && closest.inRange && closest.range !== Infinity) {
        inRange = false;
      }

      if (!closest.target || (inRange
      // is the closest target in range?
      ? closest.inRange && range !== Infinity
      // the pointer is relatively deeper in this target
      ? distance / range < closest.distance / closest.range
      // this target has Infinite range and the closest doesn't
      : range === Infinity && closest.range !== Infinity ||
      // OR this target is closer that the previous closest
      distance < closest.distance :
      // The other is not in range and the pointer is closer to this target
      !closest.inRange && distance < closest.distance)) {

        closest.target = target;
        closest.distance = distance;
        closest.range = range;
        closest.inRange = inRange;
        closest.dx = dx;
        closest.dy = dy;

        status.range = range;
      }
    }

    var snapChanged = void 0;

    if (closest.target) {
      snapChanged = status.modifiedX !== closest.target.x || status.modifiedY !== closest.target.y;

      status.modifiedX = closest.target.x;
      status.modifiedY = closest.target.y;
    } else {
      snapChanged = true;

      status.modifiedX = NaN;
      status.modifiedY = NaN;
    }

    status.dx = closest.dx;
    status.dy = closest.dy;

    status.changed = snapChanged || closest.inRange && !status.locked;
    status.locked = closest.inRange;
  },

  modifyCoords: function modifyCoords(_ref8) {
    var page = _ref8.page,
        client = _ref8.client,
        status = _ref8.status,
        phase = _ref8.phase,
        options = _ref8.options;

    var relativePoints = options && options.relativePoints;

    if (options && options.enabled && !(phase === 'start' && relativePoints && relativePoints.length)) {

      if (status.locked) {
        page.x += status.dx;
        page.y += status.dy;
        client.x += status.dx;
        client.y += status.dy;
      }

      return {
        range: status.range,
        locked: status.locked,
        x: status.modifiedX,
        y: status.modifiedY,
        realX: status.realX,
        realY: status.realY,
        dx: status.dx,
        dy: status.dy
      };
    }
  }
};

interact.createSnapGrid = function (grid) {
  return function (x, y) {
    var limits = grid.limits || {
      left: -Infinity,
      right: Infinity,
      top: -Infinity,
      bottom: Infinity
    };
    var offsetX = 0;
    var offsetY = 0;

    if (utils.is.object(grid.offset)) {
      offsetX = grid.offset.x;
      offsetY = grid.offset.y;
    }

    var gridx = Math.round((x - offsetX) / grid.x);
    var gridy = Math.round((y - offsetY) / grid.y);

    var newX = Math.max(limits.left, Math.min(limits.right, gridx * grid.x + offsetX));
    var newY = Math.max(limits.top, Math.min(limits.bottom, gridy * grid.y + offsetY));

    return {
      x: newX,
      y: newY,
      range: grid.range
    };
  };
};

modifiers.snap = snap;
modifiers.names.push('snap');

defaultOptions.perAction.snap = snap.defaults;

module.exports = snap;

},{"../defaultOptions":18,"../interact":21,"../utils":44,"./base":23}],28:[function(require,module,exports){
'use strict';

// This module allows snapping of the size of targets during resize
// interactions.

var modifiers = require('./base');
var snap = require('./snap');
var defaultOptions = require('../defaultOptions');
var resize = require('../actions/resize');
var utils = require('../utils/');

var snapSize = {
  defaults: {
    enabled: false,
    endOnly: false,
    range: Infinity,
    targets: null,
    offsets: null
  },

  setOffset: function setOffset(arg) {
    var interaction = arg.interaction,
        options = arg.options;

    var edges = interaction.prepared.edges;

    if (!edges) {
      return;
    }

    arg.options = {
      relativePoints: [{
        x: edges.left ? 0 : 1,
        y: edges.top ? 0 : 1
      }],
      origin: { x: 0, y: 0 },
      offset: 'self',
      range: options.range
    };

    var offsets = snap.setOffset(arg);
    arg.options = options;

    return offsets;
  },

  set: function set(arg) {
    var interaction = arg.interaction,
        options = arg.options,
        offset = arg.offset,
        modifiedCoords = arg.modifiedCoords;

    var page = utils.extend({}, modifiedCoords);
    var relativeX = page.x - offset[0].x;
    var relativeY = page.y - offset[0].y;

    arg.options = utils.extend({}, options);
    arg.options.targets = [];

    for (var _i = 0; _i < (options.targets || []).length; _i++) {
      var _ref;

      _ref = (options.targets || [])[_i];
      var snapTarget = _ref;

      var target = void 0;

      if (utils.is.function(snapTarget)) {
        target = snapTarget(relativeX, relativeY, interaction);
      } else {
        target = snapTarget;
      }

      if (!target) {
        continue;
      }

      if ('width' in target && 'height' in target) {
        target.x = target.width;
        target.y = target.height;
      }

      arg.options.targets.push(target);
    }

    snap.set(arg);
  },

  modifyCoords: function modifyCoords(arg) {
    var options = arg.options;


    arg.options = utils.extend({}, options);
    arg.options.enabled = options.enabled;
    arg.options.relativePoints = [null];

    snap.modifyCoords(arg);
  }
};

modifiers.snapSize = snapSize;
modifiers.names.push('snapSize');

defaultOptions.perAction.snapSize = snapSize.defaults;
resize.defaults.snapSize = snapSize.defaults;

module.exports = snapSize;

},{"../actions/resize":10,"../defaultOptions":18,"../utils/":44,"./base":23,"./snap":27}],29:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var pointerUtils = require('../utils/pointerUtils');

module.exports = function () {
  /** */
  function PointerEvent(type, pointer, event, eventTarget, interaction) {
    _classCallCheck(this, PointerEvent);

    pointerUtils.pointerExtend(this, event);

    if (event !== pointer) {
      pointerUtils.pointerExtend(this, pointer);
    }

    this.interaction = interaction;

    this.timeStamp = new Date().getTime();
    this.originalEvent = event;
    this.type = type;
    this.pointerId = pointerUtils.getPointerId(pointer);
    this.pointerType = pointerUtils.getPointerType(pointer);
    this.target = eventTarget;
    this.currentTarget = null;

    if (type === 'tap') {
      var pointerIndex = interaction.getPointerIndex(pointer);
      this.dt = this.timeStamp - interaction.downTimes[pointerIndex];

      var interval = this.timeStamp - interaction.tapTime;

      this.double = !!(interaction.prevTap && interaction.prevTap.type !== 'doubletap' && interaction.prevTap.target === this.target && interval < 500);
    } else if (type === 'doubletap') {
      this.dt = pointer.timeStamp - interaction.tapTime;
    }
  }

  PointerEvent.prototype.subtractOrigin = function subtractOrigin(_ref) {
    var originX = _ref.x,
        originY = _ref.y;

    this.pageX -= originX;
    this.pageY -= originY;
    this.clientX -= originX;
    this.clientY -= originY;

    return this;
  };

  PointerEvent.prototype.addOrigin = function addOrigin(_ref2) {
    var originX = _ref2.x,
        originY = _ref2.y;

    this.pageX += originX;
    this.pageY += originY;
    this.clientX += originX;
    this.clientY += originY;

    return this;
  };

  /** */


  PointerEvent.prototype.preventDefault = function preventDefault() {
    this.originalEvent.preventDefault();
  };

  /** */


  PointerEvent.prototype.stopPropagation = function stopPropagation() {
    this.propagationStopped = true;
  };

  /** */


  PointerEvent.prototype.stopImmediatePropagation = function stopImmediatePropagation() {
    this.immediatePropagationStopped = this.propagationStopped = true;
  };

  return PointerEvent;
}();

},{"../utils/pointerUtils":49}],30:[function(require,module,exports){
'use strict';

var PointerEvent = require('./PointerEvent');
var Interaction = require('../Interaction');
var utils = require('../utils');
var defaults = require('../defaultOptions');
var signals = require('../utils/Signals').new();

var simpleSignals = ['down', 'up', 'cancel'];
var simpleEvents = ['down', 'up', 'cancel'];

var pointerEvents = {
  PointerEvent: PointerEvent,
  fire: fire,
  collectEventTargets: collectEventTargets,
  signals: signals,
  defaults: {
    holdDuration: 600,
    ignoreFrom: null,
    allowFrom: null,
    origin: { x: 0, y: 0 }
  },
  types: ['down', 'move', 'up', 'cancel', 'tap', 'doubletap', 'hold']
};

function fire(arg) {
  var interaction = arg.interaction,
      pointer = arg.pointer,
      event = arg.event,
      eventTarget = arg.eventTarget,
      _arg$type = arg.type,
      type = _arg$type === undefined ? arg.pointerEvent.type : _arg$type,
      _arg$targets = arg.targets,
      targets = _arg$targets === undefined ? collectEventTargets(arg) : _arg$targets,
      _arg$pointerEvent = arg.pointerEvent,
      pointerEvent = _arg$pointerEvent === undefined ? new PointerEvent(type, pointer, event, eventTarget, interaction) : _arg$pointerEvent;


  var signalArg = {
    interaction: interaction,
    pointer: pointer,
    event: event,
    eventTarget: eventTarget,
    targets: targets,
    type: type,
    pointerEvent: pointerEvent
  };

  for (var i = 0; i < targets.length; i++) {
    var target = targets[i];

    for (var prop in target.props || {}) {
      pointerEvent[prop] = target.props[prop];
    }

    var origin = utils.getOriginXY(target.eventable, target.element);

    pointerEvent.subtractOrigin(origin);
    pointerEvent.eventable = target.eventable;
    pointerEvent.currentTarget = target.element;

    target.eventable.fire(pointerEvent);

    pointerEvent.addOrigin(origin);

    if (pointerEvent.immediatePropagationStopped || pointerEvent.propagationStopped && i + 1 < targets.length && targets[i + 1].element !== pointerEvent.currentTarget) {
      break;
    }
  }

  signals.fire('fired', signalArg);

  if (type === 'tap') {
    // if pointerEvent should make a double tap, create and fire a doubletap
    // PointerEvent and use that as the prevTap
    var prevTap = pointerEvent.double ? fire({
      interaction: interaction, pointer: pointer, event: event, eventTarget: eventTarget,
      type: 'doubletap'
    }) : pointerEvent;

    interaction.prevTap = prevTap;
    interaction.tapTime = prevTap.timeStamp;
  }

  return pointerEvent;
}

function collectEventTargets(_ref) {
  var interaction = _ref.interaction,
      pointer = _ref.pointer,
      event = _ref.event,
      eventTarget = _ref.eventTarget,
      type = _ref.type;

  var pointerIndex = interaction.getPointerIndex(pointer);

  // do not fire a tap event if the pointer was moved before being lifted
  if (type === 'tap' && (interaction.pointerWasMoved
  // or if the pointerup target is different to the pointerdown target
  || !(interaction.downTargets[pointerIndex] && interaction.downTargets[pointerIndex] === eventTarget))) {
    return [];
  }

  var path = utils.getPath(eventTarget);
  var signalArg = {
    interaction: interaction,
    pointer: pointer,
    event: event,
    eventTarget: eventTarget,
    type: type,
    path: path,
    targets: [],
    element: null
  };

  for (var _i = 0; _i < path.length; _i++) {
    var _ref2;

    _ref2 = path[_i];
    var element = _ref2;

    signalArg.element = element;

    signals.fire('collect-targets', signalArg);
  }

  if (type === 'hold') {
    signalArg.targets = signalArg.targets.filter(function (target) {
      return target.eventable.options.holdDuration === interaction.holdTimers[pointerIndex].duration;
    });
  }

  return signalArg.targets;
}

Interaction.signals.on('update-pointer-down', function (_ref3) {
  var interaction = _ref3.interaction,
      pointerIndex = _ref3.pointerIndex;

  interaction.holdTimers[pointerIndex] = { duration: Infinity, timeout: null };
});

Interaction.signals.on('remove-pointer', function (_ref4) {
  var interaction = _ref4.interaction,
      pointerIndex = _ref4.pointerIndex;

  interaction.holdTimers.splice(pointerIndex, 1);
});

Interaction.signals.on('move', function (_ref5) {
  var interaction = _ref5.interaction,
      pointer = _ref5.pointer,
      event = _ref5.event,
      eventTarget = _ref5.eventTarget,
      duplicateMove = _ref5.duplicateMove;

  var pointerIndex = interaction.getPointerIndex(pointer);

  if (!duplicateMove && (!interaction.pointerIsDown || interaction.pointerWasMoved)) {
    if (interaction.pointerIsDown) {
      clearTimeout(interaction.holdTimers[pointerIndex].timeout);
    }

    fire({
      interaction: interaction, pointer: pointer, event: event, eventTarget: eventTarget,
      type: 'move'
    });
  }
});

Interaction.signals.on('down', function (_ref6) {
  var interaction = _ref6.interaction,
      pointer = _ref6.pointer,
      event = _ref6.event,
      eventTarget = _ref6.eventTarget,
      pointerIndex = _ref6.pointerIndex;

  var timer = interaction.holdTimers[pointerIndex];
  var path = utils.getPath(eventTarget);
  var signalArg = {
    interaction: interaction,
    pointer: pointer,
    event: event,
    eventTarget: eventTarget,
    type: 'hold',
    targets: [],
    path: path,
    element: null
  };

  for (var _i2 = 0; _i2 < path.length; _i2++) {
    var _ref7;

    _ref7 = path[_i2];
    var element = _ref7;

    signalArg.element = element;

    signals.fire('collect-targets', signalArg);
  }

  if (!signalArg.targets.length) {
    return;
  }

  var minDuration = Infinity;

  for (var _i3 = 0; _i3 < signalArg.targets.length; _i3++) {
    var _ref8;

    _ref8 = signalArg.targets[_i3];
    var target = _ref8;

    var holdDuration = target.eventable.options.holdDuration;

    if (holdDuration < minDuration) {
      minDuration = holdDuration;
    }
  }

  timer.duration = minDuration;
  timer.timeout = setTimeout(function () {
    fire({
      interaction: interaction,
      eventTarget: eventTarget,
      pointer: pointer,
      event: event,
      type: 'hold'
    });
  }, minDuration);
});

Interaction.signals.on('up', function (_ref9) {
  var interaction = _ref9.interaction,
      pointer = _ref9.pointer,
      event = _ref9.event,
      eventTarget = _ref9.eventTarget;

  if (!interaction.pointerWasMoved) {
    fire({ interaction: interaction, eventTarget: eventTarget, pointer: pointer, event: event, type: 'tap' });
  }
});

var _arr = ['up', 'cancel'];
for (var _i4 = 0; _i4 < _arr.length; _i4++) {
  var signalName = _arr[_i4];
  Interaction.signals.on(signalName, function (_ref11) {
    var interaction = _ref11.interaction,
        pointerIndex = _ref11.pointerIndex;

    if (interaction.holdTimers[pointerIndex]) {
      clearTimeout(interaction.holdTimers[pointerIndex].timeout);
    }
  });
}

function createSignalListener(type) {
  return function (_ref10) {
    var interaction = _ref10.interaction,
        pointer = _ref10.pointer,
        event = _ref10.event,
        eventTarget = _ref10.eventTarget;

    fire({ interaction: interaction, eventTarget: eventTarget, pointer: pointer, event: event, type: type });
  };
}

for (var i = 0; i < simpleSignals.length; i++) {
  Interaction.signals.on(simpleSignals[i], createSignalListener(simpleEvents[i]));
}

Interaction.signals.on('new', function (interaction) {
  interaction.prevTap = null; // the most recent tap event on this interaction
  interaction.tapTime = 0; // time of the most recent tap event
  interaction.holdTimers = []; // [{ duration, timeout }]
});

defaults.pointerEvents = pointerEvents.defaults;
module.exports = pointerEvents;

},{"../Interaction":5,"../defaultOptions":18,"../utils":44,"../utils/Signals":34,"./PointerEvent":29}],31:[function(require,module,exports){
'use strict';

var pointerEvents = require('./base');
var Interaction = require('../Interaction');

pointerEvents.signals.on('new', onNew);
pointerEvents.signals.on('fired', onFired);

var _arr = ['move', 'up', 'cancel', 'endall'];
for (var _i = 0; _i < _arr.length; _i++) {
  var signal = _arr[_i];
  Interaction.signals.on(signal, endHoldRepeat);
}

function onNew(_ref) {
  var pointerEvent = _ref.pointerEvent;

  if (pointerEvent.type !== 'hold') {
    return;
  }

  pointerEvent.count = (pointerEvent.count || 0) + 1;
}

function onFired(_ref2) {
  var interaction = _ref2.interaction,
      pointerEvent = _ref2.pointerEvent,
      eventTarget = _ref2.eventTarget,
      targets = _ref2.targets;

  if (pointerEvent.type !== 'hold' || !targets.length) {
    return;
  }

  // get the repeat interval from the first eventable
  var interval = targets[0].eventable.options.holdRepeatInterval;

  // don't repeat if the interval is 0 or less
  if (interval <= 0) {
    return;
  }

  // set a timeout to fire the holdrepeat event
  interaction.holdIntervalHandle = setTimeout(function () {
    pointerEvents.fire({
      interaction: interaction,
      eventTarget: eventTarget,
      type: 'hold',
      pointer: pointerEvent,
      event: pointerEvent
    });
  }, interval);
}

function endHoldRepeat(_ref3) {
  var interaction = _ref3.interaction;

  // set the interaction's holdStopTime property
  // to stop further holdRepeat events
  if (interaction.holdIntervalHandle) {
    clearInterval(interaction.holdIntervalHandle);
    interaction.holdIntervalHandle = null;
  }
}

// don't repeat by default
pointerEvents.defaults.holdRepeatInterval = 0;
pointerEvents.types.push('holdrepeat');

module.exports = {
  onNew: onNew,
  onFired: onFired,
  endHoldRepeat: endHoldRepeat
};

},{"../Interaction":5,"./base":30}],32:[function(require,module,exports){
'use strict';

var pointerEvents = require('./base');
var Interactable = require('../Interactable');
var is = require('../utils/is');
var scope = require('../scope');
var extend = require('../utils/extend');

var _require = require('../utils/arr'),
    merge = _require.merge;

pointerEvents.signals.on('collect-targets', function (_ref) {
  var targets = _ref.targets,
      element = _ref.element,
      type = _ref.type,
      eventTarget = _ref.eventTarget;

  scope.interactables.forEachMatch(element, function (interactable) {
    var eventable = interactable.events;
    var options = eventable.options;

    if (eventable[type] && is.element(element) && interactable.testIgnoreAllow(options, element, eventTarget)) {

      targets.push({
        element: element,
        eventable: eventable,
        props: { interactable: interactable }
      });
    }
  });
});

Interactable.signals.on('new', function (_ref2) {
  var interactable = _ref2.interactable;

  interactable.events.getRect = function (element) {
    return interactable.getRect(element);
  };
});

Interactable.signals.on('set', function (_ref3) {
  var interactable = _ref3.interactable,
      options = _ref3.options;

  extend(interactable.events.options, pointerEvents.defaults);
  extend(interactable.events.options, options);
});

merge(Interactable.eventTypes, pointerEvents.types);

Interactable.prototype.pointerEvents = function (options) {
  extend(this.events.options, options);

  return this;
};

var __backCompatOption = Interactable.prototype._backCompatOption;

Interactable.prototype._backCompatOption = function (optionName, newValue) {
  var ret = __backCompatOption.call(this, optionName, newValue);

  if (ret === this) {
    this.events.options[optionName] = newValue;
  }

  return ret;
};

Interactable.settingsMethods.push('pointerEvents');

},{"../Interactable":4,"../scope":33,"../utils/arr":35,"../utils/extend":41,"../utils/is":46,"./base":30}],33:[function(require,module,exports){
'use strict';

var utils = require('./utils');
var events = require('./utils/events');
var signals = require('./utils/Signals').new();

var _require = require('./utils/window'),
    getWindow = _require.getWindow;

var scope = {
  signals: signals,
  events: events,
  utils: utils,

  // main document
  document: require('./utils/domObjects').document,
  // all documents being listened to
  documents: [],

  addDocument: function addDocument(doc, win) {
    // do nothing if document is already known
    if (utils.contains(scope.documents, doc)) {
      return false;
    }

    win = win || getWindow(doc);

    scope.documents.push(doc);
    events.documents.push(doc);

    // don't add an unload event for the main document
    // so that the page may be cached in browser history
    if (doc !== scope.document) {
      events.add(win, 'unload', scope.onWindowUnload);
    }

    signals.fire('add-document', { doc: doc, win: win });
  },

  removeDocument: function removeDocument(doc, win) {
    var index = scope.documents.indexOf(doc);

    win = win || getWindow(doc);

    events.remove(win, 'unload', scope.onWindowUnload);

    scope.documents.splice(index, 1);
    events.documents.splice(index, 1);

    signals.fire('remove-document', { win: win, doc: doc });
  },

  onWindowUnload: function onWindowUnload() {
    scope.removeDocument(this.document, this);
  }
};

module.exports = scope;

},{"./utils":44,"./utils/Signals":34,"./utils/domObjects":38,"./utils/events":40,"./utils/window":52}],34:[function(require,module,exports){
"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Signals = function () {
  function Signals() {
    _classCallCheck(this, Signals);

    this.listeners = {
      // signalName: [listeners],
    };
  }

  Signals.prototype.on = function on(name, listener) {
    if (!this.listeners[name]) {
      this.listeners[name] = [listener];
      return;
    }

    this.listeners[name].push(listener);
  };

  Signals.prototype.off = function off(name, listener) {
    if (!this.listeners[name]) {
      return;
    }

    var index = this.listeners[name].indexOf(listener);

    if (index !== -1) {
      this.listeners[name].splice(index, 1);
    }
  };

  Signals.prototype.fire = function fire(name, arg) {
    var targetListeners = this.listeners[name];

    if (!targetListeners) {
      return;
    }

    for (var _i = 0; _i < targetListeners.length; _i++) {
      var _ref;

      _ref = targetListeners[_i];
      var listener = _ref;

      if (listener(arg, name) === false) {
        return;
      }
    }
  };

  return Signals;
}();

Signals.new = function () {
  return new Signals();
};

module.exports = Signals;

},{}],35:[function(require,module,exports){
"use strict";

function contains(array, target) {
  return array.indexOf(target) !== -1;
}

function merge(target, source) {
  for (var _i = 0; _i < source.length; _i++) {
    var _ref;

    _ref = source[_i];
    var item = _ref;

    target.push(item);
  }

  return target;
}

module.exports = {
  contains: contains,
  merge: merge
};

},{}],36:[function(require,module,exports){
'use strict';

var _require = require('./window'),
    window = _require.window;

var is = require('./is');
var domObjects = require('./domObjects');

var Element = domObjects.Element;
var navigator = window.navigator;

var browser = {
  // Does the browser support touch input?
  supportsTouch: !!('ontouchstart' in window || is.function(window.DocumentTouch) && domObjects.document instanceof window.DocumentTouch),

  // Does the browser support PointerEvents
  supportsPointerEvent: !!domObjects.PointerEvent,

  isIOS: /iP(hone|od|ad)/.test(navigator.platform),

  // scrolling doesn't change the result of getClientRects on iOS 7
  isIOS7: /iP(hone|od|ad)/.test(navigator.platform) && /OS 7[^\d]/.test(navigator.appVersion),

  isIe9: /MSIE 9/.test(navigator.userAgent),

  // prefix matchesSelector
  prefixedMatchesSelector: 'matches' in Element.prototype ? 'matches' : 'webkitMatchesSelector' in Element.prototype ? 'webkitMatchesSelector' : 'mozMatchesSelector' in Element.prototype ? 'mozMatchesSelector' : 'oMatchesSelector' in Element.prototype ? 'oMatchesSelector' : 'msMatchesSelector',

  pEventTypes: domObjects.PointerEvent ? domObjects.PointerEvent === window.MSPointerEvent ? {
    up: 'MSPointerUp',
    down: 'MSPointerDown',
    over: 'mouseover',
    out: 'mouseout',
    move: 'MSPointerMove',
    cancel: 'MSPointerCancel'
  } : {
    up: 'pointerup',
    down: 'pointerdown',
    over: 'pointerover',
    out: 'pointerout',
    move: 'pointermove',
    cancel: 'pointercancel'
  } : null,

  // because Webkit and Opera still use 'mousewheel' event type
  wheelEvent: 'onmousewheel' in domObjects.document ? 'mousewheel' : 'wheel'

};

// Opera Mobile must be handled differently
browser.isOperaMobile = navigator.appName === 'Opera' && browser.supportsTouch && navigator.userAgent.match('Presto');

module.exports = browser;

},{"./domObjects":38,"./is":46,"./window":52}],37:[function(require,module,exports){
'use strict';

var is = require('./is');

module.exports = function clone(source) {
  var dest = {};
  for (var prop in source) {
    if (is.plainObject(source[prop])) {
      dest[prop] = clone(source[prop]);
    } else {
      dest[prop] = source[prop];
    }
  }
  return dest;
};

},{"./is":46}],38:[function(require,module,exports){
'use strict';

var domObjects = {};
var win = require('./window').window;

function blank() {}

domObjects.document = win.document;
domObjects.DocumentFragment = win.DocumentFragment || blank;
domObjects.SVGElement = win.SVGElement || blank;
domObjects.SVGSVGElement = win.SVGSVGElement || blank;
domObjects.SVGElementInstance = win.SVGElementInstance || blank;
domObjects.Element = win.Element || blank;
domObjects.HTMLElement = win.HTMLElement || domObjects.Element;

domObjects.Event = win.Event;
domObjects.Touch = win.Touch || blank;
domObjects.PointerEvent = win.PointerEvent || win.MSPointerEvent;

module.exports = domObjects;

},{"./window":52}],39:[function(require,module,exports){
'use strict';

var win = require('./window');
var browser = require('./browser');
var is = require('./is');
var domObjects = require('./domObjects');

var domUtils = {
  nodeContains: function nodeContains(parent, child) {
    while (child) {
      if (child === parent) {
        return true;
      }

      child = child.parentNode;
    }

    return false;
  },

  closest: function closest(element, selector) {
    while (is.element(element)) {
      if (domUtils.matchesSelector(element, selector)) {
        return element;
      }

      element = domUtils.parentNode(element);
    }

    return null;
  },

  parentNode: function parentNode(node) {
    var parent = node.parentNode;

    if (is.docFrag(parent)) {
      // skip past #shado-root fragments
      while ((parent = parent.host) && is.docFrag(parent)) {
        continue;
      }

      return parent;
    }

    return parent;
  },

  matchesSelector: function matchesSelector(element, selector) {
    // remove /deep/ from selectors if shadowDOM polyfill is used
    if (win.window !== win.realWindow) {
      selector = selector.replace(/\/deep\//g, ' ');
    }

    return element[browser.prefixedMatchesSelector](selector);
  },

  // Test for the element that's "above" all other qualifiers
  indexOfDeepestElement: function indexOfDeepestElement(elements) {
    var deepestZoneParents = [];
    var dropzoneParents = [];
    var dropzone = void 0;
    var deepestZone = elements[0];
    var index = deepestZone ? 0 : -1;
    var parent = void 0;
    var child = void 0;
    var i = void 0;
    var n = void 0;

    for (i = 1; i < elements.length; i++) {
      dropzone = elements[i];

      // an element might belong to multiple selector dropzones
      if (!dropzone || dropzone === deepestZone) {
        continue;
      }

      if (!deepestZone) {
        deepestZone = dropzone;
        index = i;
        continue;
      }

      // check if the deepest or current are document.documentElement or document.rootElement
      // - if the current dropzone is, do nothing and continue
      if (dropzone.parentNode === dropzone.ownerDocument) {
        continue;
      }
      // - if deepest is, update with the current dropzone and continue to next
      else if (deepestZone.parentNode === dropzone.ownerDocument) {
          deepestZone = dropzone;
          index = i;
          continue;
        }

      if (!deepestZoneParents.length) {
        parent = deepestZone;
        while (parent.parentNode && parent.parentNode !== parent.ownerDocument) {
          deepestZoneParents.unshift(parent);
          parent = parent.parentNode;
        }
      }

      // if this element is an svg element and the current deepest is
      // an HTMLElement
      if (deepestZone instanceof domObjects.HTMLElement && dropzone instanceof domObjects.SVGElement && !(dropzone instanceof domObjects.SVGSVGElement)) {

        if (dropzone === deepestZone.parentNode) {
          continue;
        }

        parent = dropzone.ownerSVGElement;
      } else {
        parent = dropzone;
      }

      dropzoneParents = [];

      while (parent.parentNode !== parent.ownerDocument) {
        dropzoneParents.unshift(parent);
        parent = parent.parentNode;
      }

      n = 0;

      // get (position of last common ancestor) + 1
      while (dropzoneParents[n] && dropzoneParents[n] === deepestZoneParents[n]) {
        n++;
      }

      var parents = [dropzoneParents[n - 1], dropzoneParents[n], deepestZoneParents[n]];

      child = parents[0].lastChild;

      while (child) {
        if (child === parents[1]) {
          deepestZone = dropzone;
          index = i;
          deepestZoneParents = [];

          break;
        } else if (child === parents[2]) {
          break;
        }

        child = child.previousSibling;
      }
    }

    return index;
  },

  matchesUpTo: function matchesUpTo(element, selector, limit) {
    while (is.element(element)) {
      if (domUtils.matchesSelector(element, selector)) {
        return true;
      }

      element = domUtils.parentNode(element);

      if (element === limit) {
        return domUtils.matchesSelector(element, selector);
      }
    }

    return false;
  },

  getActualElement: function getActualElement(element) {
    return element instanceof domObjects.SVGElementInstance ? element.correspondingUseElement : element;
  },

  getScrollXY: function getScrollXY(relevantWindow) {
    relevantWindow = relevantWindow || win.window;
    return {
      x: relevantWindow.scrollX || relevantWindow.document.documentElement.scrollLeft,
      y: relevantWindow.scrollY || relevantWindow.document.documentElement.scrollTop
    };
  },

  getElementClientRect: function getElementClientRect(element) {
    var clientRect = element instanceof domObjects.SVGElement ? element.getBoundingClientRect() : element.getClientRects()[0];

    return clientRect && {
      left: clientRect.left,
      right: clientRect.right,
      top: clientRect.top,
      bottom: clientRect.bottom,
      width: clientRect.width || clientRect.right - clientRect.left,
      height: clientRect.height || clientRect.bottom - clientRect.top
    };
  },

  getElementRect: function getElementRect(element) {
    var clientRect = domUtils.getElementClientRect(element);

    if (!browser.isIOS7 && clientRect) {
      var scroll = domUtils.getScrollXY(win.getWindow(element));

      clientRect.left += scroll.x;
      clientRect.right += scroll.x;
      clientRect.top += scroll.y;
      clientRect.bottom += scroll.y;
    }

    return clientRect;
  },

  getPath: function getPath(element) {
    var path = [];

    while (element) {
      path.push(element);
      element = domUtils.parentNode(element);
    }

    return path;
  },

  trySelector: function trySelector(value) {
    if (!is.string(value)) {
      return false;
    }

    // an exception will be raised if it is invalid
    domObjects.document.querySelector(value);
    return true;
  }
};

module.exports = domUtils;

},{"./browser":36,"./domObjects":38,"./is":46,"./window":52}],40:[function(require,module,exports){
'use strict';

var is = require('./is');
var domUtils = require('./domUtils');
var pointerUtils = require('./pointerUtils');
var pExtend = require('./pointerExtend');

var _require = require('./window'),
    window = _require.window;

var _require2 = require('./arr'),
    contains = _require2.contains;

var elements = [];
var targets = [];

// {
//   type: {
//     selectors: ['selector', ...],
//     contexts : [document, ...],
//     listeners: [[listener, capture, passive], ...]
//   }
//  }
var delegatedEvents = {};
var documents = [];

var supportsOptions = function () {
  var supported = false;

  window.document.createElement('div').addEventListener('test', null, {
    get capture() {
      supported = true;
    }
  });

  return supported;
}();

function add(element, type, listener, optionalArg) {
  var options = getOptions(optionalArg);
  var elementIndex = elements.indexOf(element);
  var target = targets[elementIndex];

  if (!target) {
    target = {
      events: {},
      typeCount: 0
    };

    elementIndex = elements.push(element) - 1;
    targets.push(target);
  }

  if (!target.events[type]) {
    target.events[type] = [];
    target.typeCount++;
  }

  if (!contains(target.events[type], listener)) {
    element.addEventListener(type, listener, supportsOptions ? options : !!options.capture);
    target.events[type].push(listener);
  }
}

function remove(element, type, listener, optionalArg) {
  var options = getOptions(optionalArg);
  var elementIndex = elements.indexOf(element);
  var target = targets[elementIndex];

  if (!target || !target.events) {
    return;
  }

  if (type === 'all') {
    for (type in target.events) {
      if (target.events.hasOwnProperty(type)) {
        remove(element, type, 'all');
      }
    }
    return;
  }

  if (target.events[type]) {
    var len = target.events[type].length;

    if (listener === 'all') {
      for (var i = 0; i < len; i++) {
        remove(element, type, target.events[type][i], options);
      }
      return;
    } else {
      for (var _i = 0; _i < len; _i++) {
        if (target.events[type][_i] === listener) {
          element.removeEventListener('on' + type, listener, supportsOptions ? options : !!options.capture);
          target.events[type].splice(_i, 1);

          break;
        }
      }
    }

    if (target.events[type] && target.events[type].length === 0) {
      target.events[type] = null;
      target.typeCount--;
    }
  }

  if (!target.typeCount) {
    targets.splice(elementIndex, 1);
    elements.splice(elementIndex, 1);
  }
}

function addDelegate(selector, context, type, listener, optionalArg) {
  var options = getOptions(optionalArg);
  if (!delegatedEvents[type]) {
    delegatedEvents[type] = {
      selectors: [],
      contexts: [],
      listeners: []
    };

    // add delegate listener functions
    for (var _i2 = 0; _i2 < documents.length; _i2++) {
      var doc = documents[_i2];
      add(doc, type, delegateListener);
      add(doc, type, delegateUseCapture, true);
    }
  }

  var delegated = delegatedEvents[type];
  var index = void 0;

  for (index = delegated.selectors.length - 1; index >= 0; index--) {
    if (delegated.selectors[index] === selector && delegated.contexts[index] === context) {
      break;
    }
  }

  if (index === -1) {
    index = delegated.selectors.length;

    delegated.selectors.push(selector);
    delegated.contexts.push(context);
    delegated.listeners.push([]);
  }

  // keep listener and capture and passive flags
  delegated.listeners[index].push([listener, !!options.capture, options.passive]);
}

function removeDelegate(selector, context, type, listener, optionalArg) {
  var options = getOptions(optionalArg);
  var delegated = delegatedEvents[type];
  var matchFound = false;
  var index = void 0;

  if (!delegated) {
    return;
  }

  // count from last index of delegated to 0
  for (index = delegated.selectors.length - 1; index >= 0; index--) {
    // look for matching selector and context Node
    if (delegated.selectors[index] === selector && delegated.contexts[index] === context) {

      var listeners = delegated.listeners[index];

      // each item of the listeners array is an array: [function, capture, passive]
      for (var i = listeners.length - 1; i >= 0; i--) {
        var _listeners$i = listeners[i],
            fn = _listeners$i[0],
            capture = _listeners$i[1],
            passive = _listeners$i[2];

        // check if the listener functions and capture and passive flags match

        if (fn === listener && capture === !!options.capture && passive === options.passive) {
          // remove the listener from the array of listeners
          listeners.splice(i, 1);

          // if all listeners for this interactable have been removed
          // remove the interactable from the delegated arrays
          if (!listeners.length) {
            delegated.selectors.splice(index, 1);
            delegated.contexts.splice(index, 1);
            delegated.listeners.splice(index, 1);

            // remove delegate function from context
            remove(context, type, delegateListener);
            remove(context, type, delegateUseCapture, true);

            // remove the arrays if they are empty
            if (!delegated.selectors.length) {
              delegatedEvents[type] = null;
            }
          }

          // only remove one listener
          matchFound = true;
          break;
        }
      }

      if (matchFound) {
        break;
      }
    }
  }
}

// bound to the interactable context when a DOM event
// listener is added to a selector interactable
function delegateListener(event, optionalArg) {
  var options = getOptions(optionalArg);
  var fakeEvent = {};
  var delegated = delegatedEvents[event.type];

  var _pointerUtils$getEven = pointerUtils.getEventTargets(event),
      eventTarget = _pointerUtils$getEven[0];

  var element = eventTarget;

  // duplicate the event so that currentTarget can be changed
  pExtend(fakeEvent, event);

  fakeEvent.originalEvent = event;
  fakeEvent.preventDefault = preventOriginalDefault;

  // climb up document tree looking for selector matches
  while (is.element(element)) {
    for (var i = 0; i < delegated.selectors.length; i++) {
      var selector = delegated.selectors[i];
      var context = delegated.contexts[i];

      if (domUtils.matchesSelector(element, selector) && domUtils.nodeContains(context, eventTarget) && domUtils.nodeContains(context, element)) {

        var listeners = delegated.listeners[i];

        fakeEvent.currentTarget = element;

        for (var j = 0; j < listeners.length; j++) {
          var _listeners$j = listeners[j],
              fn = _listeners$j[0],
              capture = _listeners$j[1],
              passive = _listeners$j[2];


          if (capture === !!options.capture && passive === options.passive) {
            fn(fakeEvent);
          }
        }
      }
    }

    element = domUtils.parentNode(element);
  }
}

function delegateUseCapture(event) {
  return delegateListener.call(this, event, true);
}

function preventOriginalDefault() {
  this.originalEvent.preventDefault();
}

function getOptions(param) {
  return is.object(param) ? param : { capture: param };
}

module.exports = {
  add: add,
  remove: remove,

  addDelegate: addDelegate,
  removeDelegate: removeDelegate,

  delegateListener: delegateListener,
  delegateUseCapture: delegateUseCapture,
  delegatedEvents: delegatedEvents,
  documents: documents,

  supportsOptions: supportsOptions,

  _elements: elements,
  _targets: targets
};

},{"./arr":35,"./domUtils":39,"./is":46,"./pointerExtend":48,"./pointerUtils":49,"./window":52}],41:[function(require,module,exports){
"use strict";

module.exports = function extend(dest, source) {
  for (var prop in source) {
    dest[prop] = source[prop];
  }
  return dest;
};

},{}],42:[function(require,module,exports){
'use strict';

var _require = require('./rect'),
    resolveRectLike = _require.resolveRectLike,
    rectToXY = _require.rectToXY;

module.exports = function (target, element, action) {
  var actionOptions = target.options[action];
  var actionOrigin = actionOptions && actionOptions.origin;
  var origin = actionOrigin || target.options.origin;

  var originRect = resolveRectLike(origin, target, element, [target && element]);

  return rectToXY(originRect) || { x: 0, y: 0 };
};

},{"./rect":51}],43:[function(require,module,exports){
"use strict";

module.exports = function (x, y) {
  return Math.sqrt(x * x + y * y);
};

},{}],44:[function(require,module,exports){
'use strict';

var extend = require('./extend');
var win = require('./window');

var utils = {
  warnOnce: function warnOnce(method, message) {
    var warned = false;

    return function () {
      if (!warned) {
        win.window.console.warn(message);
        warned = true;
      }

      return method.apply(this, arguments);
    };
  },

  // http://stackoverflow.com/a/5634528/2280888
  _getQBezierValue: function _getQBezierValue(t, p1, p2, p3) {
    var iT = 1 - t;
    return iT * iT * p1 + 2 * iT * t * p2 + t * t * p3;
  },

  getQuadraticCurvePoint: function getQuadraticCurvePoint(startX, startY, cpX, cpY, endX, endY, position) {
    return {
      x: utils._getQBezierValue(position, startX, cpX, endX),
      y: utils._getQBezierValue(position, startY, cpY, endY)
    };
  },

  // http://gizma.com/easing/
  easeOutQuad: function easeOutQuad(t, b, c, d) {
    t /= d;
    return -c * t * (t - 2) + b;
  },

  copyAction: function copyAction(dest, src) {
    dest.name = src.name;
    dest.axis = src.axis;
    dest.edges = src.edges;

    return dest;
  },

  is: require('./is'),
  extend: extend,
  hypot: require('./hypot'),
  getOriginXY: require('./getOriginXY')
};

extend(utils, require('./arr'));
extend(utils, require('./domUtils'));
extend(utils, require('./pointerUtils'));
extend(utils, require('./rect'));

module.exports = utils;

},{"./arr":35,"./domUtils":39,"./extend":41,"./getOriginXY":42,"./hypot":43,"./is":46,"./pointerUtils":49,"./rect":51,"./window":52}],45:[function(require,module,exports){
'use strict';

var scope = require('../scope');
var utils = require('./index');

var finder = {
  methodOrder: ['simulationResume', 'mouseOrPen', 'hasPointer', 'idle'],

  search: function search(pointer, eventType, eventTarget) {
    var pointerType = utils.getPointerType(pointer);
    var pointerId = utils.getPointerId(pointer);
    var details = { pointer: pointer, pointerId: pointerId, pointerType: pointerType, eventType: eventType, eventTarget: eventTarget };

    for (var _i = 0; _i < finder.methodOrder.length; _i++) {
      var _ref;

      _ref = finder.methodOrder[_i];
      var method = _ref;

      var interaction = finder[method](details);

      if (interaction) {
        return interaction;
      }
    }
  },

  // try to resume simulation with a new pointer
  simulationResume: function simulationResume(_ref2) {
    var pointerType = _ref2.pointerType,
        eventType = _ref2.eventType,
        eventTarget = _ref2.eventTarget;

    if (!/down|start/i.test(eventType)) {
      return null;
    }

    for (var _i2 = 0; _i2 < scope.interactions.length; _i2++) {
      var _ref3;

      _ref3 = scope.interactions[_i2];
      var interaction = _ref3;

      var element = eventTarget;

      if (interaction.simulation && interaction.simulation.allowResume && interaction.pointerType === pointerType) {
        while (element) {
          // if the element is the interaction element
          if (element === interaction.element) {
            return interaction;
          }
          element = utils.parentNode(element);
        }
      }
    }

    return null;
  },

  // if it's a mouse or pen interaction
  mouseOrPen: function mouseOrPen(_ref4) {
    var pointerId = _ref4.pointerId,
        pointerType = _ref4.pointerType,
        eventType = _ref4.eventType;

    if (pointerType !== 'mouse' && pointerType !== 'pen') {
      return null;
    }

    var firstNonActive = void 0;

    for (var _i3 = 0; _i3 < scope.interactions.length; _i3++) {
      var _ref5;

      _ref5 = scope.interactions[_i3];
      var interaction = _ref5;

      if (interaction.pointerType === pointerType) {
        // if it's a down event, skip interactions with running simulations
        if (interaction.simulation && !utils.contains(interaction.pointerIds, pointerId)) {
          continue;
        }

        // if the interaction is active, return it immediately
        if (interaction.interacting()) {
          return interaction;
        }
        // otherwise save it and look for another active interaction
        else if (!firstNonActive) {
            firstNonActive = interaction;
          }
      }
    }

    // if no active mouse interaction was found use the first inactive mouse
    // interaction
    if (firstNonActive) {
      return firstNonActive;
    }

    // find any mouse or pen interaction.
    // ignore the interaction if the eventType is a *down, and a simulation
    // is active
    for (var _i4 = 0; _i4 < scope.interactions.length; _i4++) {
      var _ref6;

      _ref6 = scope.interactions[_i4];
      var _interaction = _ref6;

      if (_interaction.pointerType === pointerType && !(/down/i.test(eventType) && _interaction.simulation)) {
        return _interaction;
      }
    }

    return null;
  },

  // get interaction that has this pointer
  hasPointer: function hasPointer(_ref7) {
    var pointerId = _ref7.pointerId;

    for (var _i5 = 0; _i5 < scope.interactions.length; _i5++) {
      var _ref8;

      _ref8 = scope.interactions[_i5];
      var interaction = _ref8;

      if (utils.contains(interaction.pointerIds, pointerId)) {
        return interaction;
      }
    }
  },

  // get first idle interaction with a matching pointerType
  idle: function idle(_ref9) {
    var pointerType = _ref9.pointerType;

    for (var _i6 = 0; _i6 < scope.interactions.length; _i6++) {
      var _ref10;

      _ref10 = scope.interactions[_i6];
      var interaction = _ref10;

      // if there's already a pointer held down
      if (interaction.pointerIds.length === 1) {
        var target = interaction.target;
        // don't add this pointer if there is a target interactable and it
        // isn't gesturable
        if (target && !target.options.gesture.enabled) {
          continue;
        }
      }
      // maximum of 2 pointers per interaction
      else if (interaction.pointerIds.length >= 2) {
          continue;
        }

      if (!interaction.interacting() && pointerType === interaction.pointerType) {
        return interaction;
      }
    }

    return null;
  }
};

module.exports = finder;

},{"../scope":33,"./index":44}],46:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var win = require('./window');
var isWindow = require('./isWindow');

var is = {
  array: function array() {},

  window: function window(thing) {
    return thing === win.window || isWindow(thing);
  },

  docFrag: function docFrag(thing) {
    return is.object(thing) && thing.nodeType === 11;
  },

  object: function object(thing) {
    return !!thing && (typeof thing === 'undefined' ? 'undefined' : _typeof(thing)) === 'object';
  },

  function: function _function(thing) {
    return typeof thing === 'function';
  },

  number: function number(thing) {
    return typeof thing === 'number';
  },

  bool: function bool(thing) {
    return typeof thing === 'boolean';
  },

  string: function string(thing) {
    return typeof thing === 'string';
  },

  element: function element(thing) {
    if (!thing || (typeof thing === 'undefined' ? 'undefined' : _typeof(thing)) !== 'object') {
      return false;
    }

    var _window = win.getWindow(thing) || win.window;

    return (/object|function/.test(_typeof(_window.Element)) ? thing instanceof _window.Element //DOM2
      : thing.nodeType === 1 && typeof thing.nodeName === 'string'
    );
  },

  plainObject: function plainObject(thing) {
    return is.object(thing) && thing.constructor.name === 'Object';
  }
};

is.array = function (thing) {
  return is.object(thing) && typeof thing.length !== 'undefined' && is.function(thing.splice);
};

module.exports = is;

},{"./isWindow":47,"./window":52}],47:[function(require,module,exports){
"use strict";

module.exports = function (thing) {
  return !!(thing && thing.Window) && thing instanceof thing.Window;
};

},{}],48:[function(require,module,exports){
'use strict';

function pointerExtend(dest, source) {
  for (var prop in source) {
    var prefixedPropREs = module.exports.prefixedPropREs;
    var deprecated = false;

    // skip deprecated prefixed properties
    for (var vendor in prefixedPropREs) {
      if (prop.indexOf(vendor) === 0 && prefixedPropREs[vendor].test(prop)) {
        deprecated = true;
        break;
      }
    }

    if (!deprecated && typeof source[prop] !== 'function') {
      dest[prop] = source[prop];
    }
  }
  return dest;
}

pointerExtend.prefixedPropREs = {
  webkit: /(Movement[XY]|Radius[XY]|RotationAngle|Force)$/
};

module.exports = pointerExtend;

},{}],49:[function(require,module,exports){
'use strict';

var hypot = require('./hypot');
var browser = require('./browser');
var dom = require('./domObjects');
var domUtils = require('./domUtils');
var domObjects = require('./domObjects');
var is = require('./is');
var pointerExtend = require('./pointerExtend');

var pointerUtils = {
  copyCoords: function copyCoords(dest, src) {
    dest.page = dest.page || {};
    dest.page.x = src.page.x;
    dest.page.y = src.page.y;

    dest.client = dest.client || {};
    dest.client.x = src.client.x;
    dest.client.y = src.client.y;

    dest.timeStamp = src.timeStamp;
  },

  setCoordDeltas: function setCoordDeltas(targetObj, prev, cur) {
    targetObj.page.x = cur.page.x - prev.page.x;
    targetObj.page.y = cur.page.y - prev.page.y;
    targetObj.client.x = cur.client.x - prev.client.x;
    targetObj.client.y = cur.client.y - prev.client.y;
    targetObj.timeStamp = cur.timeStamp - prev.timeStamp;

    // set pointer velocity
    var dt = Math.max(targetObj.timeStamp / 1000, 0.001);

    targetObj.page.speed = hypot(targetObj.page.x, targetObj.page.y) / dt;
    targetObj.page.vx = targetObj.page.x / dt;
    targetObj.page.vy = targetObj.page.y / dt;

    targetObj.client.speed = hypot(targetObj.client.x, targetObj.page.y) / dt;
    targetObj.client.vx = targetObj.client.x / dt;
    targetObj.client.vy = targetObj.client.y / dt;
  },

  isNativePointer: function isNativePointer(pointer) {
    return pointer instanceof dom.Event || pointer instanceof dom.Touch;
  },

  // Get specified X/Y coords for mouse or event.touches[0]
  getXY: function getXY(type, pointer, xy) {
    xy = xy || {};
    type = type || 'page';

    xy.x = pointer[type + 'X'];
    xy.y = pointer[type + 'Y'];

    return xy;
  },

  getPageXY: function getPageXY(pointer, page) {
    page = page || {};

    // Opera Mobile handles the viewport and scrolling oddly
    if (browser.isOperaMobile && pointerUtils.isNativePointer(pointer)) {
      pointerUtils.getXY('screen', pointer, page);

      page.x += window.scrollX;
      page.y += window.scrollY;
    } else {
      pointerUtils.getXY('page', pointer, page);
    }

    return page;
  },

  getClientXY: function getClientXY(pointer, client) {
    client = client || {};

    if (browser.isOperaMobile && pointerUtils.isNativePointer(pointer)) {
      // Opera Mobile handles the viewport and scrolling oddly
      pointerUtils.getXY('screen', pointer, client);
    } else {
      pointerUtils.getXY('client', pointer, client);
    }

    return client;
  },

  getPointerId: function getPointerId(pointer) {
    return is.number(pointer.pointerId) ? pointer.pointerId : pointer.identifier;
  },

  setCoords: function setCoords(targetObj, pointers, timeStamp) {
    var pointer = pointers.length > 1 ? pointerUtils.pointerAverage(pointers) : pointers[0];

    var tmpXY = {};

    pointerUtils.getPageXY(pointer, tmpXY);
    targetObj.page.x = tmpXY.x;
    targetObj.page.y = tmpXY.y;

    pointerUtils.getClientXY(pointer, tmpXY);
    targetObj.client.x = tmpXY.x;
    targetObj.client.y = tmpXY.y;

    targetObj.timeStamp = is.number(timeStamp) ? timeStamp : new Date().getTime();
  },

  pointerExtend: pointerExtend,

  getTouchPair: function getTouchPair(event) {
    var touches = [];

    // array of touches is supplied
    if (is.array(event)) {
      touches[0] = event[0];
      touches[1] = event[1];
    }
    // an event
    else {
        if (event.type === 'touchend') {
          if (event.touches.length === 1) {
            touches[0] = event.touches[0];
            touches[1] = event.changedTouches[0];
          } else if (event.touches.length === 0) {
            touches[0] = event.changedTouches[0];
            touches[1] = event.changedTouches[1];
          }
        } else {
          touches[0] = event.touches[0];
          touches[1] = event.touches[1];
        }
      }

    return touches;
  },

  pointerAverage: function pointerAverage(pointers) {
    var average = {
      pageX: 0,
      pageY: 0,
      clientX: 0,
      clientY: 0,
      screenX: 0,
      screenY: 0
    };

    for (var _i = 0; _i < pointers.length; _i++) {
      var _ref;

      _ref = pointers[_i];
      var pointer = _ref;

      for (var _prop in average) {
        average[_prop] += pointer[_prop];
      }
    }
    for (var prop in average) {
      average[prop] /= pointers.length;
    }

    return average;
  },

  touchBBox: function touchBBox(event) {
    if (!event.length && !(event.touches && event.touches.length > 1)) {
      return;
    }

    var touches = pointerUtils.getTouchPair(event);
    var minX = Math.min(touches[0].pageX, touches[1].pageX);
    var minY = Math.min(touches[0].pageY, touches[1].pageY);
    var maxX = Math.max(touches[0].pageX, touches[1].pageX);
    var maxY = Math.max(touches[0].pageY, touches[1].pageY);

    return {
      x: minX,
      y: minY,
      left: minX,
      top: minY,
      width: maxX - minX,
      height: maxY - minY
    };
  },

  touchDistance: function touchDistance(event, deltaSource) {
    var sourceX = deltaSource + 'X';
    var sourceY = deltaSource + 'Y';
    var touches = pointerUtils.getTouchPair(event);

    var dx = touches[0][sourceX] - touches[1][sourceX];
    var dy = touches[0][sourceY] - touches[1][sourceY];

    return hypot(dx, dy);
  },

  touchAngle: function touchAngle(event, prevAngle, deltaSource) {
    var sourceX = deltaSource + 'X';
    var sourceY = deltaSource + 'Y';
    var touches = pointerUtils.getTouchPair(event);
    var dx = touches[1][sourceX] - touches[0][sourceX];
    var dy = touches[1][sourceY] - touches[0][sourceY];
    var angle = 180 * Math.atan2(dy, dx) / Math.PI;

    return angle;
  },

  getPointerType: function getPointerType(pointer) {
    return is.string(pointer.pointerType) ? pointer.pointerType : is.number(pointer.pointerType) ? [undefined, undefined, 'touch', 'pen', 'mouse'][pointer.pointerType]
    // if the PointerEvent API isn't available, then the "pointer" must
    // be either a MouseEvent, TouchEvent, or Touch object
    : /touch/.test(pointer.type) || pointer instanceof domObjects.Touch ? 'touch' : 'mouse';
  },

  // [ event.target, event.currentTarget ]
  getEventTargets: function getEventTargets(event) {
    var path = is.function(event.composedPath) ? event.composedPath() : event.path;

    return [domUtils.getActualElement(path ? path[0] : event.target), domUtils.getActualElement(event.currentTarget)];
  }
};

module.exports = pointerUtils;

},{"./browser":36,"./domObjects":38,"./domUtils":39,"./hypot":43,"./is":46,"./pointerExtend":48}],50:[function(require,module,exports){
'use strict';

var _require = require('./window'),
    window = _require.window;

var vendors = ['ms', 'moz', 'webkit', 'o'];
var lastTime = 0;
var request = void 0;
var cancel = void 0;

for (var x = 0; x < vendors.length && !window.requestAnimationFrame; x++) {
  request = window[vendors[x] + 'RequestAnimationFrame'];
  cancel = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
}

if (!request) {
  request = function request(callback) {
    var currTime = new Date().getTime();
    var timeToCall = Math.max(0, 16 - (currTime - lastTime));
    var id = setTimeout(function () {
      callback(currTime + timeToCall);
    }, timeToCall);

    lastTime = currTime + timeToCall;
    return id;
  };
}

if (!cancel) {
  cancel = function cancel(id) {
    clearTimeout(id);
  };
}

module.exports = {
  request: request,
  cancel: cancel
};

},{"./window":52}],51:[function(require,module,exports){
'use strict';

var extend = require('./extend');
var is = require('./is');

var _require = require('./domUtils'),
    closest = _require.closest,
    parentNode = _require.parentNode,
    getElementRect = _require.getElementRect;

var rectUtils = {
  getStringOptionResult: function getStringOptionResult(value, interactable, element) {
    if (!is.string(value)) {
      return null;
    }

    if (value === 'parent') {
      value = parentNode(element);
    } else if (value === 'self') {
      value = interactable.getRect(element);
    } else {
      value = closest(element, value);
    }

    return value;
  },

  resolveRectLike: function resolveRectLike(value, interactable, element, functionArgs) {
    value = rectUtils.getStringOptionResult(value, interactable, element) || value;

    if (is.function(value)) {
      value = value.apply(null, functionArgs);
    }

    if (is.element(value)) {
      value = getElementRect(value);
    }

    return value;
  },

  rectToXY: function rectToXY(rect) {
    return rect && {
      x: 'x' in rect ? rect.x : rect.left,
      y: 'y' in rect ? rect.y : rect.top
    };
  },

  xywhToTlbr: function xywhToTlbr(rect) {
    if (rect && !('left' in rect && 'top' in rect)) {
      rect = extend({}, rect);

      rect.left = rect.x || 0;
      rect.top = rect.y || 0;
      rect.right = rect.right || rect.left + rect.width;
      rect.bottom = rect.bottom || rect.top + rect.height;
    }

    return rect;
  },

  tlbrToXywh: function tlbrToXywh(rect) {
    if (rect && !('x' in rect && 'y' in rect)) {
      rect = extend({}, rect);

      rect.x = rect.left || 0;
      rect.top = rect.top || 0;
      rect.width = rect.width || rect.right - rect.x;
      rect.height = rect.height || rect.bottom - rect.y;
    }

    return rect;
  }
};

module.exports = rectUtils;

},{"./domUtils":39,"./extend":41,"./is":46}],52:[function(require,module,exports){
'use strict';

var win = module.exports;
var isWindow = require('./isWindow');

function init(window) {
  // get wrapped window if using Shadow DOM polyfill

  win.realWindow = window;

  // create a TextNode
  var el = window.document.createTextNode('');

  // check if it's wrapped by a polyfill
  if (el.ownerDocument !== window.document && typeof window.wrap === 'function' && window.wrap(el) === el) {
    // use wrapped window
    window = window.wrap(window);
  }

  win.window = window;
}

if (typeof window === 'undefined') {
  win.window = undefined;
  win.realWindow = undefined;
} else {
  init(window);
}

win.getWindow = function getWindow(node) {
  if (isWindow(node)) {
    return node;
  }

  var rootNode = node.ownerDocument || node;

  return rootNode.defaultView || rootNode.parentWindow || win.window;
};

win.init = init;

},{"./isWindow":47}]},{},[1])(1)
});


//# sourceMappingURL=interact.js.map


/***/ }),

/***/ 2190:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
var safeIsNaN = Number.isNaN ||
    function ponyfill(value) {
        return typeof value === 'number' && value !== value;
    };
function isEqual(first, second) {
    if (first === second) {
        return true;
    }
    if (safeIsNaN(first) && safeIsNaN(second)) {
        return true;
    }
    return false;
}
function areInputsEqual(newInputs, lastInputs) {
    if (newInputs.length !== lastInputs.length) {
        return false;
    }
    for (var i = 0; i < newInputs.length; i++) {
        if (!isEqual(newInputs[i], lastInputs[i])) {
            return false;
        }
    }
    return true;
}

function memoizeOne(resultFn, isEqual) {
    if (isEqual === void 0) { isEqual = areInputsEqual; }
    var lastThis;
    var lastArgs = [];
    var lastResult;
    var calledOnce = false;
    function memoized() {
        var newArgs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            newArgs[_i] = arguments[_i];
        }
        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {
            return lastResult;
        }
        lastResult = resultFn.apply(this, newArgs);
        calledOnce = true;
        lastThis = this;
        lastArgs = newArgs;
        return lastResult;
    }
    return memoized;
}

/* harmony default export */ __webpack_exports__["default"] = (memoizeOne);


/***/ }),

/***/ 2192:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(2196);


/***/ }),

/***/ 2193:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * @providesModule ExecutionEnvironment
 */

/*jslint evil: true */



var canUseDOM = !!(
  typeof window !== 'undefined' &&
  window.document &&
  window.document.createElement
);

/**
 * Simple, lightweight module assisting with the detection and context of
 * Worker. Helps avoid circular dependencies and allows code to reason about
 * whether or not they are in a Worker, even if they never include the main
 * `ReactWorker` dependency.
 */
var ExecutionEnvironment = {

  canUseDOM: canUseDOM,

  canUseWorkers: typeof Worker !== 'undefined',

  canUseEventListeners:
    canUseDOM && !!(window.addEventListener || window.attachEvent),

  canUseViewport: canUseDOM && !!window.screen,

  isInWorker: !canUseDOM // For now, this is true - might change in the future.

};

module.exports = ExecutionEnvironment;


/***/ }),

/***/ 2194:
/***/ (function(module, exports) {

/**
 * Copyright 2004-present Facebook. All Rights Reserved.
 *
 * @providesModule UserAgent_DEPRECATED
 */

/**
 *  Provides entirely client-side User Agent and OS detection. You should prefer
 *  the non-deprecated UserAgent module when possible, which exposes our
 *  authoritative server-side PHP-based detection to the client.
 *
 *  Usage is straightforward:
 *
 *    if (UserAgent_DEPRECATED.ie()) {
 *      //  IE
 *    }
 *
 *  You can also do version checks:
 *
 *    if (UserAgent_DEPRECATED.ie() >= 7) {
 *      //  IE7 or better
 *    }
 *
 *  The browser functions will return NaN if the browser does not match, so
 *  you can also do version compares the other way:
 *
 *    if (UserAgent_DEPRECATED.ie() < 7) {
 *      //  IE6 or worse
 *    }
 *
 *  Note that the version is a float and may include a minor version number,
 *  so you should always use range operators to perform comparisons, not
 *  strict equality.
 *
 *  **Note:** You should **strongly** prefer capability detection to browser
 *  version detection where it's reasonable:
 *
 *    http://www.quirksmode.org/js/support.html
 *
 *  Further, we have a large number of mature wrapper functions and classes
 *  which abstract away many browser irregularities. Check the documentation,
 *  grep for things, or ask on javascript@lists.facebook.com before writing yet
 *  another copy of "event || window.event".
 *
 */

var _populated = false;

// Browsers
var _ie, _firefox, _opera, _webkit, _chrome;

// Actual IE browser for compatibility mode
var _ie_real_version;

// Platforms
var _osx, _windows, _linux, _android;

// Architectures
var _win64;

// Devices
var _iphone, _ipad, _native;

var _mobile;

function _populate() {
  if (_populated) {
    return;
  }

  _populated = true;

  // To work around buggy JS libraries that can't handle multi-digit
  // version numbers, Opera 10's user agent string claims it's Opera
  // 9, then later includes a Version/X.Y field:
  //
  // Opera/9.80 (foo) Presto/2.2.15 Version/10.10
  var uas = navigator.userAgent;
  var agent = /(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(uas);
  var os    = /(Mac OS X)|(Windows)|(Linux)/.exec(uas);

  _iphone = /\b(iPhone|iP[ao]d)/.exec(uas);
  _ipad = /\b(iP[ao]d)/.exec(uas);
  _android = /Android/i.exec(uas);
  _native = /FBAN\/\w+;/i.exec(uas);
  _mobile = /Mobile/i.exec(uas);

  // Note that the IE team blog would have you believe you should be checking
  // for 'Win64; x64'.  But MSDN then reveals that you can actually be coming
  // from either x64 or ia64;  so ultimately, you should just check for Win64
  // as in indicator of whether you're in 64-bit IE.  32-bit IE on 64-bit
  // Windows will send 'WOW64' instead.
  _win64 = !!(/Win64/.exec(uas));

  if (agent) {
    _ie = agent[1] ? parseFloat(agent[1]) : (
          agent[5] ? parseFloat(agent[5]) : NaN);
    // IE compatibility mode
    if (_ie && document && document.documentMode) {
      _ie = document.documentMode;
    }
    // grab the "true" ie version from the trident token if available
    var trident = /(?:Trident\/(\d+.\d+))/.exec(uas);
    _ie_real_version = trident ? parseFloat(trident[1]) + 4 : _ie;

    _firefox = agent[2] ? parseFloat(agent[2]) : NaN;
    _opera   = agent[3] ? parseFloat(agent[3]) : NaN;
    _webkit  = agent[4] ? parseFloat(agent[4]) : NaN;
    if (_webkit) {
      // We do not add the regexp to the above test, because it will always
      // match 'safari' only since 'AppleWebKit' appears before 'Chrome' in
      // the userAgent string.
      agent = /(?:Chrome\/(\d+\.\d+))/.exec(uas);
      _chrome = agent && agent[1] ? parseFloat(agent[1]) : NaN;
    } else {
      _chrome = NaN;
    }
  } else {
    _ie = _firefox = _opera = _chrome = _webkit = NaN;
  }

  if (os) {
    if (os[1]) {
      // Detect OS X version.  If no version number matches, set _osx to true.
      // Version examples:  10, 10_6_1, 10.7
      // Parses version number as a float, taking only first two sets of
      // digits.  If only one set of digits is found, returns just the major
      // version number.
      var ver = /(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(uas);

      _osx = ver ? parseFloat(ver[1].replace('_', '.')) : true;
    } else {
      _osx = false;
    }
    _windows = !!os[2];
    _linux   = !!os[3];
  } else {
    _osx = _windows = _linux = false;
  }
}

var UserAgent_DEPRECATED = {

  /**
   *  Check if the UA is Internet Explorer.
   *
   *
   *  @return float|NaN Version number (if match) or NaN.
   */
  ie: function() {
    return _populate() || _ie;
  },

  /**
   * Check if we're in Internet Explorer compatibility mode.
   *
   * @return bool true if in compatibility mode, false if
   * not compatibility mode or not ie
   */
  ieCompatibilityMode: function() {
    return _populate() || (_ie_real_version > _ie);
  },


  /**
   * Whether the browser is 64-bit IE.  Really, this is kind of weak sauce;  we
   * only need this because Skype can't handle 64-bit IE yet.  We need to remove
   * this when we don't need it -- tracked by #601957.
   */
  ie64: function() {
    return UserAgent_DEPRECATED.ie() && _win64;
  },

  /**
   *  Check if the UA is Firefox.
   *
   *
   *  @return float|NaN Version number (if match) or NaN.
   */
  firefox: function() {
    return _populate() || _firefox;
  },


  /**
   *  Check if the UA is Opera.
   *
   *
   *  @return float|NaN Version number (if match) or NaN.
   */
  opera: function() {
    return _populate() || _opera;
  },


  /**
   *  Check if the UA is WebKit.
   *
   *
   *  @return float|NaN Version number (if match) or NaN.
   */
  webkit: function() {
    return _populate() || _webkit;
  },

  /**
   *  For Push
   *  WILL BE REMOVED VERY SOON. Use UserAgent_DEPRECATED.webkit
   */
  safari: function() {
    return UserAgent_DEPRECATED.webkit();
  },

  /**
   *  Check if the UA is a Chrome browser.
   *
   *
   *  @return float|NaN Version number (if match) or NaN.
   */
  chrome : function() {
    return _populate() || _chrome;
  },


  /**
   *  Check if the user is running Windows.
   *
   *  @return bool `true' if the user's OS is Windows.
   */
  windows: function() {
    return _populate() || _windows;
  },


  /**
   *  Check if the user is running Mac OS X.
   *
   *  @return float|bool   Returns a float if a version number is detected,
   *                       otherwise true/false.
   */
  osx: function() {
    return _populate() || _osx;
  },

  /**
   * Check if the user is running Linux.
   *
   * @return bool `true' if the user's OS is some flavor of Linux.
   */
  linux: function() {
    return _populate() || _linux;
  },

  /**
   * Check if the user is running on an iPhone or iPod platform.
   *
   * @return bool `true' if the user is running some flavor of the
   *    iPhone OS.
   */
  iphone: function() {
    return _populate() || _iphone;
  },

  mobile: function() {
    return _populate() || (_iphone || _ipad || _android || _mobile);
  },

  nativeApp: function() {
    // webviews inside of the native apps
    return _populate() || _native;
  },

  android: function() {
    return _populate() || _android;
  },

  ipad: function() {
    return _populate() || _ipad;
  }
};

module.exports = UserAgent_DEPRECATED;


/***/ }),

/***/ 2195:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright 2013-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * @providesModule isEventSupported
 */



var ExecutionEnvironment = __webpack_require__(2193);

var useHasFeature;
if (ExecutionEnvironment.canUseDOM) {
  useHasFeature =
    document.implementation &&
    document.implementation.hasFeature &&
    // always returns true in newer browsers as per the standard.
    // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature
    document.implementation.hasFeature('', '') !== true;
}

/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function isEventSupported(eventNameSuffix, capture) {
  if (!ExecutionEnvironment.canUseDOM ||
      capture && !('addEventListener' in document)) {
    return false;
  }

  var eventName = 'on' + eventNameSuffix;
  var isSupported = eventName in document;

  if (!isSupported) {
    var element = document.createElement('div');
    element.setAttribute(eventName, 'return;');
    isSupported = typeof element[eventName] === 'function';
  }

  if (!isSupported && useHasFeature && eventNameSuffix === 'wheel') {
    // This is the only way to test support for the `wheel` event in IE9+.
    isSupported = document.implementation.hasFeature('Events.wheel', '3.0');
  }

  return isSupported;
}

module.exports = isEventSupported;


/***/ }),

/***/ 2196:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
 * Copyright (c) 2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * @providesModule normalizeWheel
 * @typechecks
 */



var UserAgent_DEPRECATED = __webpack_require__(2194);

var isEventSupported = __webpack_require__(2195);


// Reasonable defaults
var PIXEL_STEP  = 10;
var LINE_HEIGHT = 40;
var PAGE_HEIGHT = 800;

/**
 * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is
 * complicated, thus this doc is long and (hopefully) detailed enough to answer
 * your questions.
 *
 * If you need to react to the mouse wheel in a predictable way, this code is
 * like your bestest friend. * hugs *
 *
 * As of today, there are 4 DOM event types you can listen to:
 *
 *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)
 *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari
 *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!
 *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003
 *
 * So what to do?  The is the best:
 *
 *   normalizeWheel.getEventType();
 *
 * In your event callback, use this code to get sane interpretation of the
 * deltas.  This code will return an object with properties:
 *
 *   spinX   -- normalized spin speed (use for zoom) - x plane
 *   spinY   -- " - y plane
 *   pixelX  -- normalized distance (to pixels) - x plane
 *   pixelY  -- " - y plane
 *
 * Wheel values are provided by the browser assuming you are using the wheel to
 * scroll a web page by a number of lines or pixels (or pages).  Values can vary
 * significantly on different platforms and browsers, forgetting that you can
 * scroll at different speeds.  Some devices (like trackpads) emit more events
 * at smaller increments with fine granularity, and some emit massive jumps with
 * linear speed or acceleration.
 *
 * This code does its best to normalize the deltas for you:
 *
 *   - spin is trying to normalize how far the wheel was spun (or trackpad
 *     dragged).  This is super useful for zoom support where you want to
 *     throw away the chunky scroll steps on the PC and make those equal to
 *     the slow and smooth tiny steps on the Mac. Key data: This code tries to
 *     resolve a single slow step on a wheel to 1.
 *
 *   - pixel is normalizing the desired scroll delta in pixel units.  You'll
 *     get the crazy differences between browsers, but at least it'll be in
 *     pixels!
 *
 *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This
 *     should translate to positive value zooming IN, negative zooming OUT.
 *     This matches the newer 'wheel' event.
 *
 * Why are there spinX, spinY (or pixels)?
 *
 *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn
 *     with a mouse.  It results in side-scrolling in the browser by default.
 *
 *   - spinY is what you expect -- it's the classic axis of a mouse wheel.
 *
 *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and
 *     probably is by browsers in conjunction with fancy 3D controllers .. but
 *     you know.
 *
 * Implementation info:
 *
 * Examples of 'wheel' event if you scroll slowly (down) by one step with an
 * average mouse:
 *
 *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)
 *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)
 *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)
 *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)
 *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)
 *
 * On the trackpad:
 *
 *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)
 *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)
 *
 * On other/older browsers.. it's more complicated as there can be multiple and
 * also missing delta values.
 *
 * The 'wheel' event is more standard:
 *
 * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents
 *
 * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and
 * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain
 * backward compatibility with older events.  Those other values help us
 * better normalize spin speed.  Example of what the browsers provide:
 *
 *                          | event.wheelDelta | event.detail
 *        ------------------+------------------+--------------
 *          Safari v5/OS X  |       -120       |       0
 *          Safari v5/Win7  |       -120       |       0
 *         Chrome v17/OS X  |       -120       |       0
 *         Chrome v17/Win7  |       -120       |       0
 *                IE9/Win7  |       -120       |   undefined
 *         Firefox v4/OS X  |     undefined    |       1
 *         Firefox v4/Win7  |     undefined    |       3
 *
 */
function normalizeWheel(/*object*/ event) /*object*/ {
  var sX = 0, sY = 0,       // spinX, spinY
      pX = 0, pY = 0;       // pixelX, pixelY

  // Legacy
  if ('detail'      in event) { sY = event.detail; }
  if ('wheelDelta'  in event) { sY = -event.wheelDelta / 120; }
  if ('wheelDeltaY' in event) { sY = -event.wheelDeltaY / 120; }
  if ('wheelDeltaX' in event) { sX = -event.wheelDeltaX / 120; }

  // side scrolling on FF with DOMMouseScroll
  if ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {
    sX = sY;
    sY = 0;
  }

  pX = sX * PIXEL_STEP;
  pY = sY * PIXEL_STEP;

  if ('deltaY' in event) { pY = event.deltaY; }
  if ('deltaX' in event) { pX = event.deltaX; }

  if ((pX || pY) && event.deltaMode) {
    if (event.deltaMode == 1) {          // delta in LINE units
      pX *= LINE_HEIGHT;
      pY *= LINE_HEIGHT;
    } else {                             // delta in PAGE units
      pX *= PAGE_HEIGHT;
      pY *= PAGE_HEIGHT;
    }
  }

  // Fall-back if spin cannot be determined
  if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }
  if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }

  return { spinX  : sX,
           spinY  : sY,
           pixelX : pX,
           pixelY : pY };
}


/**
 * The best combination if you prefer spinX + spinY normalization.  It favors
 * the older DOMMouseScroll for Firefox, as FF does not include wheelDelta with
 * 'wheel' event, making spin speed determination impossible.
 */
normalizeWheel.getEventType = function() /*string*/ {
  return (UserAgent_DEPRECATED.firefox())
           ? 'DOMMouseScroll'
           : (isEventSupported('wheel'))
               ? 'wheel'
               : 'mousewheel';
};

module.exports = normalizeWheel;


/***/ }),

/***/ 2201:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "TimelineMarkers", {
  enumerable: true,
  get: function get() {
    return _TimelineMarkers["default"];
  }
});
Object.defineProperty(exports, "TodayMarker", {
  enumerable: true,
  get: function get() {
    return _TodayMarker["default"];
  }
});
Object.defineProperty(exports, "CustomMarker", {
  enumerable: true,
  get: function get() {
    return _CustomMarker["default"];
  }
});
Object.defineProperty(exports, "CursorMarker", {
  enumerable: true,
  get: function get() {
    return _CursorMarker["default"];
  }
});
Object.defineProperty(exports, "TimelineHeaders", {
  enumerable: true,
  get: function get() {
    return _TimelineHeaders["default"];
  }
});
Object.defineProperty(exports, "SidebarHeader", {
  enumerable: true,
  get: function get() {
    return _SidebarHeader["default"];
  }
});
Object.defineProperty(exports, "CustomHeader", {
  enumerable: true,
  get: function get() {
    return _CustomHeader["default"];
  }
});
Object.defineProperty(exports, "DateHeader", {
  enumerable: true,
  get: function get() {
    return _DateHeader["default"];
  }
});
exports["default"] = void 0;

var _Timeline = _interopRequireDefault(__webpack_require__(2202));

var _TimelineMarkers = _interopRequireDefault(__webpack_require__(2219));

var _TodayMarker = _interopRequireDefault(__webpack_require__(2220));

var _CustomMarker = _interopRequireDefault(__webpack_require__(2218));

var _CursorMarker = _interopRequireDefault(__webpack_require__(2217));

var _TimelineHeaders = _interopRequireDefault(__webpack_require__(1905));

var _SidebarHeader = _interopRequireDefault(__webpack_require__(1833));

var _CustomHeader = _interopRequireDefault(__webpack_require__(1903));

var _DateHeader = _interopRequireDefault(__webpack_require__(1904));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _default = _Timeline["default"];
exports["default"] = _default;

/***/ }),

/***/ 2202:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _react = _interopRequireWildcard(__webpack_require__(0));

var _moment = _interopRequireDefault(__webpack_require__(35));

var _Items = _interopRequireDefault(__webpack_require__(2208));

var _Sidebar = _interopRequireDefault(__webpack_require__(2211));

var _Columns = _interopRequireDefault(__webpack_require__(2203));

var _GroupRows = _interopRequireDefault(__webpack_require__(2222));

var _ScrollElement = _interopRequireDefault(__webpack_require__(2223));

var _MarkerCanvas = _interopRequireDefault(__webpack_require__(2212));

var _window = _interopRequireDefault(__webpack_require__(2224));

var _calendar = __webpack_require__(1549);

var _generic = __webpack_require__(1583);

var _defaultConfig = __webpack_require__(1902);

var _TimelineStateContext = __webpack_require__(1589);

var _TimelineMarkersContext = __webpack_require__(1648);

var _HeadersContext = __webpack_require__(1663);

var _TimelineHeaders = _interopRequireDefault(__webpack_require__(1905));

var _DateHeader = _interopRequireDefault(__webpack_require__(1904));

var _SidebarHeader = _interopRequireDefault(__webpack_require__(1833));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var ReactCalendarTimeline =
/*#__PURE__*/
function (_Component) {
  _inherits(ReactCalendarTimeline, _Component);

  _createClass(ReactCalendarTimeline, [{
    key: "getChildContext",
    value: function getChildContext() {
      var _this2 = this;

      return {
        getTimelineContext: function getTimelineContext() {
          return _this2.getTimelineContext();
        }
      };
    }
  }]);

  function ReactCalendarTimeline(_props) {
    var _this;

    _classCallCheck(this, ReactCalendarTimeline);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactCalendarTimeline).call(this, _props));

    _defineProperty(_assertThisInitialized(_this), "getTimelineContext", function () {
      var _this$state = _this.state,
          width = _this$state.width,
          visibleTimeStart = _this$state.visibleTimeStart,
          visibleTimeEnd = _this$state.visibleTimeEnd,
          canvasTimeStart = _this$state.canvasTimeStart,
          canvasTimeEnd = _this$state.canvasTimeEnd;
      return {
        timelineWidth: width,
        visibleTimeStart: visibleTimeStart,
        visibleTimeEnd: visibleTimeEnd,
        canvasTimeStart: canvasTimeStart,
        canvasTimeEnd: canvasTimeEnd
      };
    });

    _defineProperty(_assertThisInitialized(_this), "resize", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props;

      var _this$container$getBo = _this.container.getBoundingClientRect(),
          containerWidth = _this$container$getBo.width;

      var width = containerWidth - props.sidebarWidth - props.rightSidebarWidth;
      var canvasWidth = (0, _calendar.getCanvasWidth)(width);

      var _stackTimelineItems = (0, _calendar.stackTimelineItems)(props.items, props.groups, canvasWidth, _this.state.canvasTimeStart, _this.state.canvasTimeEnd, props.keys, props.lineHeight, props.itemHeightRatio, props.stackItems, _this.state.draggingItem, _this.state.resizingItem, _this.state.dragTime, _this.state.resizingEdge, _this.state.resizeTime, _this.state.newGroupOrder),
          dimensionItems = _stackTimelineItems.dimensionItems,
          height = _stackTimelineItems.height,
          groupHeights = _stackTimelineItems.groupHeights,
          groupTops = _stackTimelineItems.groupTops; // this is needed by dragItem since it uses pageY from the drag events
      // if this was in the context of the scrollElement, this would not be necessary


      _this.setState({
        width: width,
        dimensionItems: dimensionItems,
        height: height,
        groupHeights: groupHeights,
        groupTops: groupTops
      });

      _this.scrollComponent.scrollLeft = width;
      _this.scrollHeaderRef.scrollLeft = width;
    });

    _defineProperty(_assertThisInitialized(_this), "onScroll", function (scrollX) {
      var width = _this.state.width;
      var canvasTimeStart = _this.state.canvasTimeStart;
      var zoom = _this.state.visibleTimeEnd - _this.state.visibleTimeStart;
      var visibleTimeStart = canvasTimeStart + zoom * scrollX / width;

      if (_this.state.visibleTimeStart !== visibleTimeStart || _this.state.visibleTimeEnd !== visibleTimeStart + zoom) {
        _this.props.onTimeChange(visibleTimeStart, visibleTimeStart + zoom, _this.updateScrollCanvas);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "updateScrollCanvas", function (visibleTimeStart, visibleTimeEnd, forceUpdateDimensions) {
      var items = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _this.props.items;
      var groups = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _this.props.groups;

      _this.setState((0, _calendar.calculateScrollCanvas)(visibleTimeStart, visibleTimeEnd, forceUpdateDimensions, items, groups, _this.props, _this.state));
    });

    _defineProperty(_assertThisInitialized(_this), "handleWheelZoom", function (speed, xPosition, deltaY) {
      _this.changeZoom(1.0 + speed * deltaY / 500, xPosition / _this.state.width);
    });

    _defineProperty(_assertThisInitialized(_this), "changeZoom", function (scale) {
      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.5;
      var _this$props = _this.props,
          minZoom = _this$props.minZoom,
          maxZoom = _this$props.maxZoom;
      var oldZoom = _this.state.visibleTimeEnd - _this.state.visibleTimeStart;
      var newZoom = Math.min(Math.max(Math.round(oldZoom * scale), minZoom), maxZoom); // min 1 min, max 20 years

      var newVisibleTimeStart = Math.round(_this.state.visibleTimeStart + (oldZoom - newZoom) * offset);

      _this.props.onTimeChange(newVisibleTimeStart, newVisibleTimeStart + newZoom, _this.updateScrollCanvas);
    });

    _defineProperty(_assertThisInitialized(_this), "showPeriod", function (from, to) {
      var visibleTimeStart = from.valueOf();
      var visibleTimeEnd = to.valueOf();
      var zoom = visibleTimeEnd - visibleTimeStart; // can't zoom in more than to show one hour

      if (zoom < 360000) {
        return;
      }

      _this.props.onTimeChange(visibleTimeStart, visibleTimeStart + zoom, _this.updateScrollCanvas);
    });

    _defineProperty(_assertThisInitialized(_this), "selectItem", function (item, clickType, e) {
      if (_this.isItemSelected(item) || _this.props.itemTouchSendsClick && clickType === 'touch') {
        if (item && _this.props.onItemClick) {
          var time = _this.timeFromItemEvent(e);

          _this.props.onItemClick(item, e, time);
        }
      } else {
        _this.setState({
          selectedItem: item
        });

        if (item && _this.props.onItemSelect) {
          var _time = _this.timeFromItemEvent(e);

          _this.props.onItemSelect(item, e, _time);
        } else if (item === null && _this.props.onItemDeselect) {
          _this.props.onItemDeselect(e); // this isnt in the docs. Is this function even used?

        }
      }
    });

    _defineProperty(_assertThisInitialized(_this), "doubleClickItem", function (item, e) {
      if (_this.props.onItemDoubleClick) {
        var time = _this.timeFromItemEvent(e);

        _this.props.onItemDoubleClick(item, e, time);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "contextMenuClickItem", function (item, e) {
      if (_this.props.onItemContextMenu) {
        var time = _this.timeFromItemEvent(e);

        _this.props.onItemContextMenu(item, e, time);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "getTimeFromRowClickEvent", function (e) {
      var dragSnap = _this.props.dragSnap;
      var _this$state2 = _this.state,
          width = _this$state2.width,
          canvasTimeStart = _this$state2.canvasTimeStart,
          canvasTimeEnd = _this$state2.canvasTimeEnd; // this gives us distance from left of row element, so event is in
      // context of the row element, not client or page

      var offsetX = e.nativeEvent.offsetX;
      var time = (0, _calendar.calculateTimeForXPosition)(canvasTimeStart, canvasTimeEnd, (0, _calendar.getCanvasWidth)(width), offsetX);
      time = Math.floor(time / dragSnap) * dragSnap;
      return time;
    });

    _defineProperty(_assertThisInitialized(_this), "timeFromItemEvent", function (e) {
      var _this$state3 = _this.state,
          width = _this$state3.width,
          visibleTimeStart = _this$state3.visibleTimeStart,
          visibleTimeEnd = _this$state3.visibleTimeEnd;
      var dragSnap = _this.props.dragSnap;
      var scrollComponent = _this.scrollComponent;

      var _scrollComponent$getB = scrollComponent.getBoundingClientRect(),
          scrollX = _scrollComponent$getB.left;

      var xRelativeToTimeline = e.clientX - scrollX;
      var relativeItemPosition = xRelativeToTimeline / width;
      var zoom = visibleTimeEnd - visibleTimeStart;
      var timeOffset = relativeItemPosition * zoom;
      var time = Math.round(visibleTimeStart + timeOffset);
      time = Math.floor(time / dragSnap) * dragSnap;
      return time;
    });

    _defineProperty(_assertThisInitialized(_this), "dragItem", function (item, dragTime, newGroupOrder) {
      var newGroup = _this.props.groups[newGroupOrder];
      var keys = _this.props.keys;

      _this.setState({
        draggingItem: item,
        dragTime: dragTime,
        newGroupOrder: newGroupOrder,
        dragGroupTitle: newGroup ? (0, _generic._get)(newGroup, keys.groupLabelKey) : ''
      });

      _this.updatingItem({
        eventType: 'move',
        itemId: item,
        time: dragTime,
        newGroupOrder: newGroupOrder
      });
    });

    _defineProperty(_assertThisInitialized(_this), "dropItem", function (item, dragTime, newGroupOrder) {
      _this.setState({
        draggingItem: null,
        dragTime: null,
        dragGroupTitle: null
      });

      if (_this.props.onItemMove) {
        _this.props.onItemMove(item, dragTime, newGroupOrder);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "resizingItem", function (item, resizeTime, edge) {
      _this.setState({
        resizingItem: item,
        resizingEdge: edge,
        resizeTime: resizeTime
      });

      _this.updatingItem({
        eventType: 'resize',
        itemId: item,
        time: resizeTime,
        edge: edge
      });
    });

    _defineProperty(_assertThisInitialized(_this), "resizedItem", function (item, resizeTime, edge, timeDelta) {
      _this.setState({
        resizingItem: null,
        resizingEdge: null,
        resizeTime: null
      });

      if (_this.props.onItemResize && timeDelta !== 0) {
        _this.props.onItemResize(item, resizeTime, edge);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "updatingItem", function (_ref) {
      var eventType = _ref.eventType,
          itemId = _ref.itemId,
          time = _ref.time,
          edge = _ref.edge,
          newGroupOrder = _ref.newGroupOrder;

      if (_this.props.onItemDrag) {
        _this.props.onItemDrag({
          eventType: eventType,
          itemId: itemId,
          time: time,
          edge: edge,
          newGroupOrder: newGroupOrder
        });
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleRowClick", function (e, rowIndex) {
      // shouldnt this be handled by the user, as far as when to deselect an item?
      if (_this.hasSelectedItem()) {
        _this.selectItem(null);
      }

      if (_this.props.onCanvasClick == null) return;

      var time = _this.getTimeFromRowClickEvent(e);

      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);

      _this.props.onCanvasClick(groupId, time, e);
    });

    _defineProperty(_assertThisInitialized(_this), "handleRowDoubleClick", function (e, rowIndex) {
      if (_this.props.onCanvasDoubleClick == null) return;

      var time = _this.getTimeFromRowClickEvent(e);

      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);

      _this.props.onCanvasDoubleClick(groupId, time, e);
    });

    _defineProperty(_assertThisInitialized(_this), "handleScrollContextMenu", function (e, rowIndex) {
      if (_this.props.onCanvasContextMenu == null) return;

      var timePosition = _this.getTimeFromRowClickEvent(e);

      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);

      if (_this.props.onCanvasContextMenu) {
        e.preventDefault();

        _this.props.onCanvasContextMenu(groupId, timePosition, e);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleHeaderRef", function (el) {
      _this.scrollHeaderRef = el;

      _this.props.headerRef(el);
    });

    _defineProperty(_assertThisInitialized(_this), "isTimelineHeader", function (child) {
      if (child.type === undefined) return false;
      return child.type.secretKey === _TimelineHeaders["default"].secretKey;
    });

    _defineProperty(_assertThisInitialized(_this), "renderHeaders", function () {
      if (_this.props.children) {
        var headerRenderer;

        _react["default"].Children.map(_this.props.children, function (child) {
          if (_this.isTimelineHeader(child)) {
            headerRenderer = child;
          }
        });

        if (headerRenderer) {
          return headerRenderer;
        }
      }

      return _react["default"].createElement(_TimelineHeaders["default"], null, _react["default"].createElement(_DateHeader["default"], {
        unit: "primaryHeader"
      }), _react["default"].createElement(_DateHeader["default"], null));
    });

    _defineProperty(_assertThisInitialized(_this), "getScrollElementRef", function (el) {
      _this.props.scrollRef(el);

      _this.scrollComponent = el;
    });

    _this.getSelected = _this.getSelected.bind(_assertThisInitialized(_this));
    _this.hasSelectedItem = _this.hasSelectedItem.bind(_assertThisInitialized(_this));
    _this.isItemSelected = _this.isItemSelected.bind(_assertThisInitialized(_this));
    var _visibleTimeStart = null;
    var _visibleTimeEnd = null;

    if (_this.props.defaultTimeStart && _this.props.defaultTimeEnd) {
      _visibleTimeStart = _this.props.defaultTimeStart.valueOf();
      _visibleTimeEnd = _this.props.defaultTimeEnd.valueOf();
    } else if (_this.props.visibleTimeStart && _this.props.visibleTimeEnd) {
      _visibleTimeStart = _this.props.visibleTimeStart;
      _visibleTimeEnd = _this.props.visibleTimeEnd;
    } else {
      //throwing an error because neither default or visible time props provided
      throw new Error('You must provide either "defaultTimeStart" and "defaultTimeEnd" or "visibleTimeStart" and "visibleTimeEnd" to initialize the Timeline');
    }

    var _getCanvasBoundariesF = (0, _calendar.getCanvasBoundariesFromVisibleTime)(_visibleTimeStart, _visibleTimeEnd),
        _getCanvasBoundariesF2 = _slicedToArray(_getCanvasBoundariesF, 2),
        _canvasTimeStart = _getCanvasBoundariesF2[0],
        _canvasTimeEnd = _getCanvasBoundariesF2[1];

    _this.state = {
      width: 1000,
      visibleTimeStart: _visibleTimeStart,
      visibleTimeEnd: _visibleTimeEnd,
      canvasTimeStart: _canvasTimeStart,
      canvasTimeEnd: _canvasTimeEnd,
      selectedItem: null,
      dragTime: null,
      dragGroupTitle: null,
      resizeTime: null,
      resizingItem: null,
      resizingEdge: null
    };

    var _canvasWidth = (0, _calendar.getCanvasWidth)(_this.state.width);

    var _stackTimelineItems2 = (0, _calendar.stackTimelineItems)(_props.items, _props.groups, _canvasWidth, _this.state.canvasTimeStart, _this.state.canvasTimeEnd, _props.keys, _props.lineHeight, _props.itemHeightRatio, _props.stackItems, _this.state.draggingItem, _this.state.resizingItem, _this.state.dragTime, _this.state.resizingEdge, _this.state.resizeTime, _this.state.newGroupOrder),
        _dimensionItems = _stackTimelineItems2.dimensionItems,
        _height = _stackTimelineItems2.height,
        _groupHeights = _stackTimelineItems2.groupHeights,
        _groupTops = _stackTimelineItems2.groupTops;
    /* eslint-disable react/no-direct-mutation-state */


    _this.state.dimensionItems = _dimensionItems;
    _this.state.height = _height;
    _this.state.groupHeights = _groupHeights;
    _this.state.groupTops = _groupTops;
    /* eslint-enable */

    return _this;
  }

  _createClass(ReactCalendarTimeline, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.resize(this.props);

      if (this.props.resizeDetector && this.props.resizeDetector.addListener) {
        this.props.resizeDetector.addListener(this);
      }

      _window["default"].addListener(this);

      this.lastTouchDistance = null;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.props.resizeDetector && this.props.resizeDetector.addListener) {
        this.props.resizeDetector.removeListener(this);
      }

      _window["default"].removeListener(this);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      var newZoom = this.state.visibleTimeEnd - this.state.visibleTimeStart;
      var oldZoom = prevState.visibleTimeEnd - prevState.visibleTimeStart; // are we changing zoom? Report it!

      if (this.props.onZoom && newZoom !== oldZoom) {
        this.props.onZoom(this.getTimelineContext());
      } // The bounds have changed? Report it!


      if (this.props.onBoundsChange && this.state.canvasTimeStart !== prevState.canvasTimeStart) {
        this.props.onBoundsChange(this.state.canvasTimeStart, this.state.canvasTimeStart + newZoom * 3);
      } // Check the scroll is correct


      var scrollLeft = Math.round(this.state.width * (this.state.visibleTimeStart - this.state.canvasTimeStart) / newZoom);
      var componentScrollLeft = Math.round(prevState.width * (prevState.visibleTimeStart - prevState.canvasTimeStart) / oldZoom);

      if (componentScrollLeft !== scrollLeft) {
        this.scrollComponent.scrollLeft = scrollLeft;
        this.scrollHeaderRef.scrollLeft = scrollLeft;
      }
    }
  }, {
    key: "columns",
    value: function columns(canvasTimeStart, canvasTimeEnd, canvasWidth, minUnit, timeSteps, height) {
      return _react["default"].createElement(_Columns["default"], {
        canvasTimeStart: canvasTimeStart,
        canvasTimeEnd: canvasTimeEnd,
        canvasWidth: canvasWidth,
        lineCount: (0, _generic._length)(this.props.groups),
        minUnit: minUnit,
        timeSteps: timeSteps,
        height: height,
        verticalLineClassNamesForTime: this.props.verticalLineClassNamesForTime
      });
    }
  }, {
    key: "rows",
    value: function rows(canvasWidth, groupHeights, groups) {
      return _react["default"].createElement(_GroupRows["default"], {
        groups: groups,
        canvasWidth: canvasWidth,
        lineCount: (0, _generic._length)(this.props.groups),
        groupHeights: groupHeights,
        clickTolerance: this.props.clickTolerance,
        onRowClick: this.handleRowClick,
        onRowDoubleClick: this.handleRowDoubleClick,
        horizontalLineClassNamesForGroup: this.props.horizontalLineClassNamesForGroup,
        onRowContextClick: this.handleScrollContextMenu
      });
    }
  }, {
    key: "items",
    value: function items(canvasTimeStart, zoom, canvasTimeEnd, canvasWidth, minUnit, dimensionItems, groupHeights, groupTops) {
      return _react["default"].createElement(_Items["default"], {
        canvasTimeStart: canvasTimeStart,
        canvasTimeEnd: canvasTimeEnd,
        canvasWidth: canvasWidth,
        dimensionItems: dimensionItems,
        groupTops: groupTops,
        items: this.props.items,
        groups: this.props.groups,
        keys: this.props.keys,
        selectedItem: this.state.selectedItem,
        dragSnap: this.props.dragSnap,
        minResizeWidth: this.props.minResizeWidth,
        canChangeGroup: this.props.canChangeGroup,
        canMove: this.props.canMove,
        canResize: this.props.canResize,
        useResizeHandle: this.props.useResizeHandle,
        canSelect: this.props.canSelect,
        moveResizeValidator: this.props.moveResizeValidator,
        itemSelect: this.selectItem,
        itemDrag: this.dragItem,
        itemDrop: this.dropItem,
        onItemDoubleClick: this.doubleClickItem,
        onItemContextMenu: this.contextMenuClickItem,
        itemResizing: this.resizingItem,
        itemResized: this.resizedItem,
        itemRenderer: this.props.itemRenderer,
        selected: this.props.selected,
        scrollRef: this.scrollComponent
      });
    }
  }, {
    key: "sidebar",
    value: function sidebar(height, groupHeights) {
      var sidebarWidth = this.props.sidebarWidth;
      return sidebarWidth && _react["default"].createElement(_Sidebar["default"], {
        groups: this.props.groups,
        groupRenderer: this.props.groupRenderer,
        keys: this.props.keys,
        width: sidebarWidth,
        groupHeights: groupHeights,
        height: height
      });
    }
  }, {
    key: "rightSidebar",
    value: function rightSidebar(height, groupHeights) {
      var rightSidebarWidth = this.props.rightSidebarWidth;
      return rightSidebarWidth && _react["default"].createElement(_Sidebar["default"], {
        groups: this.props.groups,
        keys: this.props.keys,
        groupRenderer: this.props.groupRenderer,
        isRightSidebar: true,
        width: rightSidebarWidth,
        groupHeights: groupHeights,
        height: height
      });
    }
    /**
     * check if child of type TimelineHeader
     * refer to for explanation https://github.com/gaearon/react-hot-loader#checking-element-types 
     */

  }, {
    key: "childrenWithProps",
    value: function childrenWithProps(canvasTimeStart, canvasTimeEnd, canvasWidth, dimensionItems, groupHeights, groupTops, height, visibleTimeStart, visibleTimeEnd, minUnit, timeSteps) {
      var _this3 = this;

      if (!this.props.children) {
        return null;
      } // convert to an array and remove the nulls


      var childArray = Array.isArray(this.props.children) ? this.props.children.filter(function (c) {
        return c;
      }) : [this.props.children];
      var childProps = {
        canvasTimeStart: canvasTimeStart,
        canvasTimeEnd: canvasTimeEnd,
        canvasWidth: canvasWidth,
        visibleTimeStart: visibleTimeStart,
        visibleTimeEnd: visibleTimeEnd,
        dimensionItems: dimensionItems,
        items: this.props.items,
        groups: this.props.groups,
        keys: this.props.keys,
        groupHeights: groupHeights,
        groupTops: groupTops,
        selected: this.getSelected(),
        height: height,
        minUnit: minUnit,
        timeSteps: timeSteps
      };
      return _react["default"].Children.map(childArray, function (child) {
        if (!_this3.isTimelineHeader(child)) {
          return _react["default"].cloneElement(child, childProps);
        } else {
          return null;
        }
      });
    }
  }, {
    key: "getSelected",
    value: function getSelected() {
      return this.state.selectedItem && !this.props.selected ? [this.state.selectedItem] : this.props.selected || [];
    }
  }, {
    key: "hasSelectedItem",
    value: function hasSelectedItem() {
      if (!Array.isArray(this.props.selected)) return !!this.state.selectedItem;
      return this.props.selected.length > 0;
    }
  }, {
    key: "isItemSelected",
    value: function isItemSelected(itemId) {
      var selectedItems = this.getSelected();
      return selectedItems.some(function (i) {
        return i === itemId;
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this4 = this;

      var _this$props2 = this.props,
          items = _this$props2.items,
          groups = _this$props2.groups,
          sidebarWidth = _this$props2.sidebarWidth,
          rightSidebarWidth = _this$props2.rightSidebarWidth,
          timeSteps = _this$props2.timeSteps,
          traditionalZoom = _this$props2.traditionalZoom;
      var _this$state4 = this.state,
          draggingItem = _this$state4.draggingItem,
          resizingItem = _this$state4.resizingItem,
          width = _this$state4.width,
          visibleTimeStart = _this$state4.visibleTimeStart,
          visibleTimeEnd = _this$state4.visibleTimeEnd,
          canvasTimeStart = _this$state4.canvasTimeStart,
          canvasTimeEnd = _this$state4.canvasTimeEnd;
      var _this$state5 = this.state,
          dimensionItems = _this$state5.dimensionItems,
          height = _this$state5.height,
          groupHeights = _this$state5.groupHeights,
          groupTops = _this$state5.groupTops;
      var zoom = visibleTimeEnd - visibleTimeStart;
      var canvasWidth = (0, _calendar.getCanvasWidth)(width);
      var minUnit = (0, _calendar.getMinUnit)(zoom, width, timeSteps);
      var isInteractingWithItem = !!draggingItem || !!resizingItem;

      if (isInteractingWithItem) {
        var stackResults = (0, _calendar.stackTimelineItems)(items, groups, canvasWidth, this.state.canvasTimeStart, this.state.canvasTimeEnd, this.props.keys, this.props.lineHeight, this.props.itemHeightRatio, this.props.stackItems, this.state.draggingItem, this.state.resizingItem, this.state.dragTime, this.state.resizingEdge, this.state.resizeTime, this.state.newGroupOrder);
        dimensionItems = stackResults.dimensionItems;
        height = stackResults.height;
        groupHeights = stackResults.groupHeights;
        groupTops = stackResults.groupTops;
      }

      var outerComponentStyle = {
        height: "".concat(height, "px")
      };
      return _react["default"].createElement(_TimelineStateContext.TimelineStateProvider, {
        visibleTimeStart: visibleTimeStart,
        visibleTimeEnd: visibleTimeEnd,
        canvasTimeStart: canvasTimeStart,
        canvasTimeEnd: canvasTimeEnd,
        canvasWidth: canvasWidth,
        showPeriod: this.showPeriod,
        timelineUnit: minUnit,
        timelineWidth: this.state.width
      }, _react["default"].createElement(_TimelineMarkersContext.TimelineMarkersProvider, null, _react["default"].createElement(_HeadersContext.TimelineHeadersProvider, {
        registerScroll: this.handleHeaderRef,
        timeSteps: timeSteps,
        leftSidebarWidth: this.props.sidebarWidth,
        rightSidebarWidth: this.props.rightSidebarWidth
      }, _react["default"].createElement("div", {
        style: this.props.style,
        ref: function ref(el) {
          return _this4.container = el;
        },
        className: "react-calendar-timeline"
      }, this.renderHeaders(), _react["default"].createElement("div", {
        style: outerComponentStyle,
        className: "rct-outer"
      }, sidebarWidth > 0 ? this.sidebar(height, groupHeights) : null, _react["default"].createElement(_ScrollElement["default"], {
        scrollRef: this.getScrollElementRef,
        width: width,
        height: height,
        onZoom: this.changeZoom,
        onWheelZoom: this.handleWheelZoom,
        traditionalZoom: traditionalZoom,
        onScroll: this.onScroll,
        isInteractingWithItem: isInteractingWithItem
      }, _react["default"].createElement(_MarkerCanvas["default"], null, this.columns(canvasTimeStart, canvasTimeEnd, canvasWidth, minUnit, timeSteps, height), this.rows(canvasWidth, groupHeights, groups), this.items(canvasTimeStart, zoom, canvasTimeEnd, canvasWidth, minUnit, dimensionItems, groupHeights, groupTops), this.childrenWithProps(canvasTimeStart, canvasTimeEnd, canvasWidth, dimensionItems, groupHeights, groupTops, height, visibleTimeStart, visibleTimeEnd, minUnit, timeSteps))), rightSidebarWidth > 0 ? this.rightSidebar(height, groupHeights) : null)))));
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(nextProps, prevState) {
      var visibleTimeStart = nextProps.visibleTimeStart,
          visibleTimeEnd = nextProps.visibleTimeEnd,
          items = nextProps.items,
          groups = nextProps.groups; // This is a gross hack pushing items and groups in to state only to allow
      // For the forceUpdate check

      var derivedState = {
        items: items,
        groups: groups // if the items or groups have changed we must re-render

      };
      var forceUpdate = items !== prevState.items || groups !== prevState.groups; // We are a controlled component

      if (visibleTimeStart && visibleTimeEnd) {
        // Get the new canvas position
        Object.assign(derivedState, (0, _calendar.calculateScrollCanvas)(visibleTimeStart, visibleTimeEnd, forceUpdate, items, groups, nextProps, prevState));
      } else if (forceUpdate) {
        // Calculate new item stack position as canvas may have changed
        var canvasWidth = (0, _calendar.getCanvasWidth)(prevState.width);
        Object.assign(derivedState, (0, _calendar.stackTimelineItems)(items, groups, canvasWidth, prevState.canvasTimeStart, prevState.canvasTimeEnd, nextProps.keys, nextProps.lineHeight, nextProps.itemHeightRatio, nextProps.stackItems, prevState.draggingItem, prevState.resizingItem, prevState.dragTime, prevState.resizingEdge, prevState.resizeTime, prevState.newGroupOrder));
      }

      return derivedState;
    }
  }]);

  return ReactCalendarTimeline;
}(_react.Component);

exports["default"] = ReactCalendarTimeline;

_defineProperty(ReactCalendarTimeline, "propTypes", {
  groups: _propTypes["default"].oneOfType([_propTypes["default"].array, _propTypes["default"].object]).isRequired,
  items: _propTypes["default"].oneOfType([_propTypes["default"].array, _propTypes["default"].object]).isRequired,
  sidebarWidth: _propTypes["default"].number,
  rightSidebarWidth: _propTypes["default"].number,
  dragSnap: _propTypes["default"].number,
  minResizeWidth: _propTypes["default"].number,
  stickyHeader: _propTypes["default"].bool,
  lineHeight: _propTypes["default"].number,
  itemHeightRatio: _propTypes["default"].number,
  minZoom: _propTypes["default"].number,
  maxZoom: _propTypes["default"].number,
  clickTolerance: _propTypes["default"].number,
  canChangeGroup: _propTypes["default"].bool,
  canMove: _propTypes["default"].bool,
  canResize: _propTypes["default"].oneOf([true, false, 'left', 'right', 'both']),
  useResizeHandle: _propTypes["default"].bool,
  canSelect: _propTypes["default"].bool,
  stackItems: _propTypes["default"].bool,
  traditionalZoom: _propTypes["default"].bool,
  itemTouchSendsClick: _propTypes["default"].bool,
  horizontalLineClassNamesForGroup: _propTypes["default"].func,
  onItemMove: _propTypes["default"].func,
  onItemResize: _propTypes["default"].func,
  onItemClick: _propTypes["default"].func,
  onItemSelect: _propTypes["default"].func,
  onItemDeselect: _propTypes["default"].func,
  onCanvasClick: _propTypes["default"].func,
  onItemDoubleClick: _propTypes["default"].func,
  onItemContextMenu: _propTypes["default"].func,
  onCanvasDoubleClick: _propTypes["default"].func,
  onCanvasContextMenu: _propTypes["default"].func,
  onZoom: _propTypes["default"].func,
  onItemDrag: _propTypes["default"].func,
  moveResizeValidator: _propTypes["default"].func,
  itemRenderer: _propTypes["default"].func,
  groupRenderer: _propTypes["default"].func,
  style: _propTypes["default"].object,
  keys: _propTypes["default"].shape({
    groupIdKey: _propTypes["default"].string,
    groupTitleKey: _propTypes["default"].string,
    groupLabelKey: _propTypes["default"].string,
    groupRightTitleKey: _propTypes["default"].string,
    itemIdKey: _propTypes["default"].string,
    itemTitleKey: _propTypes["default"].string,
    itemDivTitleKey: _propTypes["default"].string,
    itemGroupKey: _propTypes["default"].string,
    itemTimeStartKey: _propTypes["default"].string,
    itemTimeEndKey: _propTypes["default"].string
  }),
  headerRef: _propTypes["default"].func,
  scrollRef: _propTypes["default"].func,
  timeSteps: _propTypes["default"].shape({
    second: _propTypes["default"].number,
    minute: _propTypes["default"].number,
    hour: _propTypes["default"].number,
    day: _propTypes["default"].number,
    month: _propTypes["default"].number,
    year: _propTypes["default"].number
  }),
  defaultTimeStart: _propTypes["default"].object,
  defaultTimeEnd: _propTypes["default"].object,
  visibleTimeStart: _propTypes["default"].number,
  visibleTimeEnd: _propTypes["default"].number,
  onTimeChange: _propTypes["default"].func,
  onBoundsChange: _propTypes["default"].func,
  selected: _propTypes["default"].array,
  headerLabelFormats: _propTypes["default"].shape({
    yearShort: _propTypes["default"].string,
    yearLong: _propTypes["default"].string,
    monthShort: _propTypes["default"].string,
    monthMedium: _propTypes["default"].string,
    monthMediumLong: _propTypes["default"].string,
    monthLong: _propTypes["default"].string,
    dayShort: _propTypes["default"].string,
    dayLong: _propTypes["default"].string,
    hourShort: _propTypes["default"].string,
    hourMedium: _propTypes["default"].string,
    hourMediumLong: _propTypes["default"].string,
    hourLong: _propTypes["default"].string
  }),
  subHeaderLabelFormats: _propTypes["default"].shape({
    yearShort: _propTypes["default"].string,
    yearLong: _propTypes["default"].string,
    monthShort: _propTypes["default"].string,
    monthMedium: _propTypes["default"].string,
    monthLong: _propTypes["default"].string,
    dayShort: _propTypes["default"].string,
    dayMedium: _propTypes["default"].string,
    dayMediumLong: _propTypes["default"].string,
    dayLong: _propTypes["default"].string,
    hourShort: _propTypes["default"].string,
    hourLong: _propTypes["default"].string,
    minuteShort: _propTypes["default"].string,
    minuteLong: _propTypes["default"].string
  }),
  resizeDetector: _propTypes["default"].shape({
    addListener: _propTypes["default"].func,
    removeListener: _propTypes["default"].func
  }),
  verticalLineClassNamesForTime: _propTypes["default"].func,
  children: _propTypes["default"].node
});

_defineProperty(ReactCalendarTimeline, "defaultProps", {
  sidebarWidth: 150,
  rightSidebarWidth: 0,
  dragSnap: 1000 * 60 * 15,
  // 15min
  minResizeWidth: 20,
  stickyHeader: true,
  lineHeight: 30,
  itemHeightRatio: 0.65,
  minZoom: 60 * 60 * 1000,
  // 1 hour
  maxZoom: 5 * 365.24 * 86400 * 1000,
  // 5 years
  clickTolerance: 3,
  // how many pixels can we drag for it to be still considered a click?
  canChangeGroup: true,
  canMove: true,
  canResize: 'right',
  useResizeHandle: false,
  canSelect: true,
  stackItems: false,
  traditionalZoom: false,
  horizontalLineClassNamesForGroup: null,
  onItemMove: null,
  onItemResize: null,
  onItemClick: null,
  onItemSelect: null,
  onItemDeselect: null,
  onItemDrag: null,
  onCanvasClick: null,
  onItemDoubleClick: null,
  onItemContextMenu: null,
  onZoom: null,
  verticalLineClassNamesForTime: null,
  moveResizeValidator: null,
  dayBackground: null,
  defaultTimeStart: null,
  defaultTimeEnd: null,
  itemTouchSendsClick: false,
  style: {},
  keys: _defaultConfig.defaultKeys,
  timeSteps: _defaultConfig.defaultTimeSteps,
  headerRef: function headerRef() {},
  scrollRef: function scrollRef() {},
  // if you pass in visibleTimeStart and visibleTimeEnd, you must also pass onTimeChange(visibleTimeStart, visibleTimeEnd),
  // which needs to update the props visibleTimeStart and visibleTimeEnd to the ones passed
  visibleTimeStart: null,
  visibleTimeEnd: null,
  onTimeChange: function onTimeChange(visibleTimeStart, visibleTimeEnd, updateScrollCanvas) {
    updateScrollCanvas(visibleTimeStart, visibleTimeEnd);
  },
  // called when the canvas area of the calendar changes
  onBoundsChange: null,
  children: null,
  headerLabelFormats: _defaultConfig.defaultHeaderLabelFormats,
  subHeaderLabelFormats: _defaultConfig.defaultSubHeaderLabelFormats,
  selected: null
});

_defineProperty(ReactCalendarTimeline, "childContextTypes", {
  getTimelineContext: _propTypes["default"].func
});


/***/ }),

/***/ 2203:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _react = _interopRequireWildcard(__webpack_require__(0));

var _calendar = __webpack_require__(1549);

var _TimelineStateContext = __webpack_require__(1589);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var passThroughPropTypes = {
  canvasTimeStart: _propTypes["default"].number.isRequired,
  canvasTimeEnd: _propTypes["default"].number.isRequired,
  canvasWidth: _propTypes["default"].number.isRequired,
  lineCount: _propTypes["default"].number.isRequired,
  minUnit: _propTypes["default"].string.isRequired,
  timeSteps: _propTypes["default"].object.isRequired,
  height: _propTypes["default"].number.isRequired,
  verticalLineClassNamesForTime: _propTypes["default"].func
};

var Columns =
/*#__PURE__*/
function (_Component) {
  _inherits(Columns, _Component);

  function Columns() {
    _classCallCheck(this, Columns);

    return _possibleConstructorReturn(this, _getPrototypeOf(Columns).apply(this, arguments));
  }

  _createClass(Columns, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      return !(nextProps.canvasTimeStart === this.props.canvasTimeStart && nextProps.canvasTimeEnd === this.props.canvasTimeEnd && nextProps.canvasWidth === this.props.canvasWidth && nextProps.lineCount === this.props.lineCount && nextProps.minUnit === this.props.minUnit && nextProps.timeSteps === this.props.timeSteps && nextProps.height === this.props.height && nextProps.verticalLineClassNamesForTime === this.props.verticalLineClassNamesForTime);
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          canvasTimeStart = _this$props.canvasTimeStart,
          canvasTimeEnd = _this$props.canvasTimeEnd,
          canvasWidth = _this$props.canvasWidth,
          minUnit = _this$props.minUnit,
          timeSteps = _this$props.timeSteps,
          height = _this$props.height,
          verticalLineClassNamesForTime = _this$props.verticalLineClassNamesForTime,
          getLeftOffsetFromDate = _this$props.getLeftOffsetFromDate;
      var ratio = canvasWidth / (canvasTimeEnd - canvasTimeStart);
      var lines = [];
      (0, _calendar.iterateTimes)(canvasTimeStart, canvasTimeEnd, minUnit, timeSteps, function (time, nextTime) {
        var minUnitValue = time.get(minUnit === 'day' ? 'date' : minUnit);
        var firstOfType = minUnitValue === (minUnit === 'day' ? 1 : 0);
        var classNamesForTime = [];

        if (verticalLineClassNamesForTime) {
          classNamesForTime = verticalLineClassNamesForTime(time.unix() * 1000, // turn into ms, which is what verticalLineClassNamesForTime expects
          nextTime.unix() * 1000 - 1);
        } // TODO: rename or remove class that has reference to vertical-line


        var classNames = 'rct-vl' + (firstOfType ? ' rct-vl-first' : '') + (minUnit === 'day' || minUnit === 'hour' || minUnit === 'minute' ? " rct-day-".concat(time.day(), " ") : '') + classNamesForTime.join(' ');
        var left = getLeftOffsetFromDate(time.valueOf());
        var right = getLeftOffsetFromDate(nextTime.valueOf());
        lines.push(_react["default"].createElement("div", {
          key: "line-".concat(time.valueOf()),
          className: classNames,
          style: {
            pointerEvents: 'none',
            top: '0px',
            left: "".concat(left, "px"),
            width: "".concat(right - left, "px"),
            height: "".concat(height, "px")
          }
        }));
      });
      return _react["default"].createElement("div", {
        className: "rct-vertical-lines"
      }, lines);
    }
  }]);

  return Columns;
}(_react.Component);

_defineProperty(Columns, "propTypes", _objectSpread({}, passThroughPropTypes, {
  getLeftOffsetFromDate: _propTypes["default"].func.isRequired
}));

var ColumnsWrapper = function ColumnsWrapper(_ref) {
  var props = _extends({}, _ref);

  return _react["default"].createElement(_TimelineStateContext.TimelineStateConsumer, null, function (_ref2) {
    var getLeftOffsetFromDate = _ref2.getLeftOffsetFromDate;
    return _react["default"].createElement(Columns, _extends({
      getLeftOffsetFromDate: getLeftOffsetFromDate
    }, props));
  });
};

ColumnsWrapper.defaultProps = _objectSpread({}, passThroughPropTypes);
var _default = ColumnsWrapper;
exports["default"] = _default;

/***/ }),

/***/ 2204:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.CustomDateHeader = CustomDateHeader;

var _react = _interopRequireDefault(__webpack_require__(0));

var _Interval = _interopRequireDefault(__webpack_require__(2205));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function CustomDateHeader(_ref) {
  var _ref$headerContext = _ref.headerContext,
      intervals = _ref$headerContext.intervals,
      unit = _ref$headerContext.unit,
      getRootProps = _ref.getRootProps,
      getIntervalProps = _ref.getIntervalProps,
      showPeriod = _ref.showPeriod,
      _ref$data = _ref.data,
      style = _ref$data.style,
      intervalRenderer = _ref$data.intervalRenderer,
      className = _ref$data.className,
      getLabelFormat = _ref$data.getLabelFormat,
      unitProp = _ref$data.unitProp,
      headerData = _ref$data.headerData;
  return _react["default"].createElement("div", _extends({
    className: className
  }, getRootProps({
    style: style
  })), intervals.map(function (interval) {
    var intervalText = getLabelFormat([interval.startTime, interval.endTime], unit, interval.labelWidth);
    return _react["default"].createElement(_Interval["default"], {
      key: "label-".concat(interval.startTime.valueOf()),
      unit: unit,
      interval: interval,
      showPeriod: showPeriod,
      intervalText: intervalText,
      primaryHeader: unitProp === 'primaryHeader',
      getIntervalProps: getIntervalProps,
      intervalRenderer: intervalRenderer,
      headerData: headerData
    });
  }));
}

/***/ }),

/***/ 2205:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _calendar = __webpack_require__(1549);

var _events = __webpack_require__(1909);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var Interval =
/*#__PURE__*/
function (_React$PureComponent) {
  _inherits(Interval, _React$PureComponent);

  function Interval() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, Interval);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Interval)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "onIntervalClick", function () {
      var _this$props = _this.props,
          primaryHeader = _this$props.primaryHeader,
          interval = _this$props.interval,
          unit = _this$props.unit,
          showPeriod = _this$props.showPeriod;

      if (primaryHeader) {
        var nextUnit = (0, _calendar.getNextUnit)(unit);
        var newStartTime = interval.startTime.clone().startOf(nextUnit);
        var newEndTime = interval.startTime.clone().endOf(nextUnit);
        showPeriod(newStartTime, newEndTime);
      } else {
        showPeriod(interval.startTime, interval.endTime);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "getIntervalProps", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return _objectSpread({}, _this.props.getIntervalProps(_objectSpread({
        interval: _this.props.interval
      }, props)), {
        onClick: (0, _events.composeEvents)(_this.onIntervalClick, props.onClick)
      });
    });

    return _this;
  }

  _createClass(Interval, [{
    key: "render",
    value: function render() {
      var _this$props2 = this.props,
          intervalText = _this$props2.intervalText,
          interval = _this$props2.interval,
          intervalRenderer = _this$props2.intervalRenderer,
          headerData = _this$props2.headerData;
      var Renderer = intervalRenderer;

      if (Renderer) {
        return _react["default"].createElement(Renderer, {
          getIntervalProps: this.getIntervalProps,
          intervalContext: {
            interval: interval,
            intervalText: intervalText
          },
          data: headerData
        });
      }

      return _react["default"].createElement("div", _extends({}, this.getIntervalProps({}), {
        className: "rct-dateHeader ".concat(this.props.primaryHeader ? 'rct-dateHeader-primary' : '')
      }), _react["default"].createElement("span", null, intervalText));
    }
  }]);

  return Interval;
}(_react["default"].PureComponent);

_defineProperty(Interval, "propTypes", {
  intervalRenderer: _propTypes["default"].func,
  unit: _propTypes["default"].string.isRequired,
  interval: _propTypes["default"].object.isRequired,
  showPeriod: _propTypes["default"].func.isRequired,
  intervalText: _propTypes["default"].string.isRequired,
  primaryHeader: _propTypes["default"].bool.isRequired,
  getIntervalProps: _propTypes["default"].func.isRequired,
  headerData: _propTypes["default"].object
});

var _default = Interval;
exports["default"] = _default;

/***/ }),

/***/ 2206:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireWildcard(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var PreventClickOnDrag =
/*#__PURE__*/
function (_Component) {
  _inherits(PreventClickOnDrag, _Component);

  function PreventClickOnDrag() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, PreventClickOnDrag);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PreventClickOnDrag)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "handleMouseDown", function (evt) {
      _this.originClickX = evt.clientX;
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseUp", function (evt) {
      if (Math.abs(_this.originClickX - evt.clientX) > _this.props.clickTolerance) {
        _this.cancelClick = true;
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleClick", function (evt) {
      if (!_this.cancelClick) {
        _this.props.onClick(evt);
      }

      _this.cancelClick = false;
      _this.originClickX = null;
    });

    return _this;
  }

  _createClass(PreventClickOnDrag, [{
    key: "render",
    value: function render() {
      var childElement = _react["default"].Children.only(this.props.children);

      return _react["default"].cloneElement(childElement, {
        onMouseDown: this.handleMouseDown,
        onMouseUp: this.handleMouseUp,
        onClick: this.handleClick
      });
    }
  }]);

  return PreventClickOnDrag;
}(_react.Component);

_defineProperty(PreventClickOnDrag, "propTypes", {
  children: _propTypes["default"].element.isRequired,
  onClick: _propTypes["default"].func.isRequired,
  clickTolerance: _propTypes["default"].number.isRequired
});

var _default = PreventClickOnDrag;
exports["default"] = _default;

/***/ }),

/***/ 2207:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = __webpack_require__(0);

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _interactjs = _interopRequireDefault(__webpack_require__(2186));

var _moment = _interopRequireDefault(__webpack_require__(35));

var _generic = __webpack_require__(1583);

var _events = __webpack_require__(1909);

var _defaultItemRenderer = __webpack_require__(2209);

var _calendar = __webpack_require__(1549);

var _domHelpers = __webpack_require__(1908);

var _styles = __webpack_require__(2210);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var Item =
/*#__PURE__*/
function (_Component) {
  _inherits(Item, _Component);

  // removed prop type check for SPEED!
  // they are coming from a trusted component anyway
  // (this complicates performance debugging otherwise)
  function Item(_props) {
    var _this;

    _classCallCheck(this, Item);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(Item).call(this, _props));

    _defineProperty(_assertThisInitialized(_this), "onMouseDown", function (e) {
      if (!_this.state.interactMounted) {
        e.preventDefault();
        _this.startedClicking = true;
      }
    });

    _defineProperty(_assertThisInitialized(_this), "onMouseUp", function (e) {
      if (!_this.state.interactMounted && _this.startedClicking) {
        _this.startedClicking = false;

        _this.actualClick(e, 'click');
      }
    });

    _defineProperty(_assertThisInitialized(_this), "onTouchStart", function (e) {
      if (!_this.state.interactMounted) {
        e.preventDefault();
        _this.startedTouching = true;
      }
    });

    _defineProperty(_assertThisInitialized(_this), "onTouchEnd", function (e) {
      if (!_this.state.interactMounted && _this.startedTouching) {
        _this.startedTouching = false;

        _this.actualClick(e, 'touch');
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleDoubleClick", function (e) {
      e.stopPropagation();

      if (_this.props.onItemDoubleClick) {
        _this.props.onItemDoubleClick(_this.itemId, e);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleContextMenu", function (e) {
      if (_this.props.onContextMenu) {
        e.preventDefault();
        e.stopPropagation();

        _this.props.onContextMenu(_this.itemId, e);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "getItemRef", function (el) {
      return _this.item = el;
    });

    _defineProperty(_assertThisInitialized(_this), "getDragLeftRef", function (el) {
      return _this.dragLeft = el;
    });

    _defineProperty(_assertThisInitialized(_this), "getDragRightRef", function (el) {
      return _this.dragRight = el;
    });

    _defineProperty(_assertThisInitialized(_this), "getItemProps", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      //TODO: maybe shouldnt include all of these classes
      var classNames = 'rct-item' + (_this.props.item.className ? " ".concat(_this.props.item.className) : '');
      return {
        key: _this.itemId,
        ref: _this.getItemRef,
        title: _this.itemDivTitle,
        className: classNames + " ".concat(props.className ? props.className : ''),
        onMouseDown: (0, _events.composeEvents)(_this.onMouseDown, props.onMouseDown),
        onMouseUp: (0, _events.composeEvents)(_this.onMouseUp, props.onMouseUp),
        onTouchStart: (0, _events.composeEvents)(_this.onTouchStart, props.onTouchStart),
        onTouchEnd: (0, _events.composeEvents)(_this.onTouchEnd, props.onTouchEnd),
        onDoubleClick: (0, _events.composeEvents)(_this.handleDoubleClick, props.onDoubleClick),
        onContextMenu: (0, _events.composeEvents)(_this.handleContextMenu, props.onContextMenu),
        style: Object.assign({}, _this.getItemStyle(props))
      };
    });

    _defineProperty(_assertThisInitialized(_this), "getResizeProps", function () {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var leftName = "rct-item-handler rct-item-handler-left rct-item-handler-resize-left";

      if (props.leftClassName) {
        leftName += " ".concat(props.leftClassName);
      }

      var rightName = "rct-item-handler rct-item-handler-right rct-item-handler-resize-right";

      if (props.rightClassName) {
        rightName += " ".concat(props.rightClassName);
      }

      return {
        left: {
          ref: _this.getDragLeftRef,
          className: leftName,
          style: Object.assign({}, _styles.leftResizeStyle, props.leftStyle)
        },
        right: {
          ref: _this.getDragRightRef,
          className: rightName,
          style: Object.assign({}, _styles.rightResizeStyle, props.rightStyle)
        }
      };
    });

    _this.cacheDataFromProps(_props);

    _this.state = {
      interactMounted: false,
      dragging: null,
      dragStart: null,
      preDragPosition: null,
      dragTime: null,
      dragGroupDelta: null,
      resizing: null,
      resizeEdge: null,
      resizeStart: null,
      resizeTime: null
    };
    return _this;
  }

  _createClass(Item, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps, nextState) {
      var shouldUpdate = nextState.dragging !== this.state.dragging || nextState.dragTime !== this.state.dragTime || nextState.dragGroupDelta !== this.state.dragGroupDelta || nextState.resizing !== this.state.resizing || nextState.resizeTime !== this.state.resizeTime || nextProps.keys !== this.props.keys || !(0, _generic.deepObjectCompare)(nextProps.itemProps, this.props.itemProps) || nextProps.selected !== this.props.selected || nextProps.item !== this.props.item || nextProps.canvasTimeStart !== this.props.canvasTimeStart || nextProps.canvasTimeEnd !== this.props.canvasTimeEnd || nextProps.canvasWidth !== this.props.canvasWidth || (nextProps.order ? nextProps.order.index : undefined) !== (this.props.order ? this.props.order.index : undefined) || nextProps.dragSnap !== this.props.dragSnap || nextProps.minResizeWidth !== this.props.minResizeWidth || nextProps.canChangeGroup !== this.props.canChangeGroup || nextProps.canSelect !== this.props.canSelect || nextProps.canMove !== this.props.canMove || nextProps.canResizeLeft !== this.props.canResizeLeft || nextProps.canResizeRight !== this.props.canResizeRight || nextProps.dimensions !== this.props.dimensions;
      return shouldUpdate;
    }
  }, {
    key: "cacheDataFromProps",
    value: function cacheDataFromProps(props) {
      this.itemId = (0, _generic._get)(props.item, props.keys.itemIdKey);
      this.itemTitle = (0, _generic._get)(props.item, props.keys.itemTitleKey);
      this.itemDivTitle = props.keys.itemDivTitleKey ? (0, _generic._get)(props.item, props.keys.itemDivTitleKey) : this.itemTitle;
      this.itemTimeStart = (0, _generic._get)(props.item, props.keys.itemTimeStartKey);
      this.itemTimeEnd = (0, _generic._get)(props.item, props.keys.itemTimeEndKey);
    }
  }, {
    key: "getTimeRatio",
    value: function getTimeRatio() {
      var _this$props = this.props,
          canvasTimeStart = _this$props.canvasTimeStart,
          canvasTimeEnd = _this$props.canvasTimeEnd,
          canvasWidth = _this$props.canvasWidth;
      return (0, _calendar.coordinateToTimeRatio)(canvasTimeStart, canvasTimeEnd, canvasWidth);
    }
  }, {
    key: "dragTimeSnap",
    value: function dragTimeSnap(dragTime, considerOffset) {
      var dragSnap = this.props.dragSnap;

      if (dragSnap) {
        var offset = considerOffset ? (0, _moment["default"])().utcOffset() * 60 * 1000 : 0;
        return Math.round(dragTime / dragSnap) * dragSnap - offset % dragSnap;
      } else {
        return dragTime;
      }
    }
  }, {
    key: "resizeTimeSnap",
    value: function resizeTimeSnap(dragTime) {
      var dragSnap = this.props.dragSnap;

      if (dragSnap) {
        var endTime = this.itemTimeEnd % dragSnap;
        return Math.round((dragTime - endTime) / dragSnap) * dragSnap + endTime;
      } else {
        return dragTime;
      }
    }
  }, {
    key: "dragTime",
    value: function dragTime(e) {
      var startTime = (0, _moment["default"])(this.itemTimeStart);

      if (this.state.dragging) {
        return this.dragTimeSnap(this.timeFor(e) + this.state.dragStart.offset, true);
      } else {
        return startTime;
      }
    }
  }, {
    key: "timeFor",
    value: function timeFor(e) {
      var ratio = (0, _calendar.coordinateToTimeRatio)(this.props.canvasTimeStart, this.props.canvasTimeEnd, this.props.canvasWidth);
      var offset = (0, _domHelpers.getSumOffset)(this.props.scrollRef).offsetLeft;
      var scrolls = (0, _domHelpers.getSumScroll)(this.props.scrollRef);
      return (e.pageX - offset + scrolls.scrollLeft) * ratio + this.props.canvasTimeStart;
    }
  }, {
    key: "dragGroupDelta",
    value: function dragGroupDelta(e) {
      var _this$props2 = this.props,
          groupTops = _this$props2.groupTops,
          order = _this$props2.order;

      if (this.state.dragging) {
        if (!this.props.canChangeGroup) {
          return 0;
        }

        var groupDelta = 0;
        var offset = (0, _domHelpers.getSumOffset)(this.props.scrollRef).offsetTop;
        var scrolls = (0, _domHelpers.getSumScroll)(this.props.scrollRef);

        for (var _i = 0, _Object$keys = Object.keys(groupTops); _i < _Object$keys.length; _i++) {
          var key = _Object$keys[_i];
          var groupTop = groupTops[key];

          if (e.pageY - offset + scrolls.scrollTop > groupTop) {
            groupDelta = parseInt(key, 10) - order.index;
          } else {
            break;
          }
        }

        if (this.props.order.index + groupDelta < 0) {
          return 0 - this.props.order.index;
        } else {
          return groupDelta;
        }
      } else {
        return 0;
      }
    }
  }, {
    key: "resizeTimeDelta",
    value: function resizeTimeDelta(e, resizeEdge) {
      var length = this.itemTimeEnd - this.itemTimeStart;
      var timeDelta = this.dragTimeSnap((e.pageX - this.state.resizeStart) * this.getTimeRatio());

      if (length + (resizeEdge === 'left' ? -timeDelta : timeDelta) < (this.props.dragSnap || 1000)) {
        if (resizeEdge === 'left') {
          return length - (this.props.dragSnap || 1000);
        } else {
          return (this.props.dragSnap || 1000) - length;
        }
      } else {
        return timeDelta;
      }
    }
  }, {
    key: "mountInteract",
    value: function mountInteract() {
      var _this2 = this;

      var leftResize = this.props.useResizeHandle ? ".rct-item-handler-resize-left" : true;
      var rightResize = this.props.useResizeHandle ? ".rct-item-handler-resize-right" : true;
      (0, _interactjs["default"])(this.item).resizable({
        edges: {
          left: this.canResizeLeft() && leftResize,
          right: this.canResizeRight() && rightResize,
          top: false,
          bottom: false
        },
        enabled: this.props.selected && (this.canResizeLeft() || this.canResizeRight())
      }).draggable({
        enabled: this.props.selected && this.canMove()
      }).styleCursor(false).on('dragstart', function (e) {
        if (_this2.props.selected) {
          var clickTime = _this2.timeFor(e);

          _this2.setState({
            dragging: true,
            dragStart: {
              x: e.pageX,
              y: e.pageY,
              offset: _this2.itemTimeStart - clickTime
            },
            preDragPosition: {
              x: e.target.offsetLeft,
              y: e.target.offsetTop
            },
            dragTime: _this2.itemTimeStart,
            dragGroupDelta: 0
          });
        } else {
          return false;
        }
      }).on('dragmove', function (e) {
        if (_this2.state.dragging) {
          var dragTime = _this2.dragTime(e);

          var dragGroupDelta = _this2.dragGroupDelta(e);

          if (_this2.props.moveResizeValidator) {
            dragTime = _this2.props.moveResizeValidator('move', _this2.props.item, dragTime);
          }

          if (_this2.props.onDrag) {
            _this2.props.onDrag(_this2.itemId, dragTime, _this2.props.order.index + dragGroupDelta);
          }

          _this2.setState({
            dragTime: dragTime,
            dragGroupDelta: dragGroupDelta
          });
        }
      }).on('dragend', function (e) {
        if (_this2.state.dragging) {
          if (_this2.props.onDrop) {
            var dragTime = _this2.dragTime(e);

            if (_this2.props.moveResizeValidator) {
              dragTime = _this2.props.moveResizeValidator('move', _this2.props.item, dragTime);
            }

            _this2.props.onDrop(_this2.itemId, dragTime, _this2.props.order.index + _this2.dragGroupDelta(e));
          }

          _this2.setState({
            dragging: false,
            dragStart: null,
            preDragPosition: null,
            dragTime: null,
            dragGroupDelta: null
          });
        }
      }).on('resizestart', function (e) {
        if (_this2.props.selected) {
          _this2.setState({
            resizing: true,
            resizeEdge: null,
            // we don't know yet
            resizeStart: e.pageX,
            resizeTime: 0
          });
        } else {
          return false;
        }
      }).on('resizemove', function (e) {
        if (_this2.state.resizing) {
          var resizeEdge = _this2.state.resizeEdge;

          if (!resizeEdge) {
            resizeEdge = e.deltaRect.left !== 0 ? 'left' : 'right';

            _this2.setState({
              resizeEdge: resizeEdge
            });
          }

          var resizeTime = _this2.resizeTimeSnap(_this2.timeFor(e));

          if (_this2.props.moveResizeValidator) {
            resizeTime = _this2.props.moveResizeValidator('resize', _this2.props.item, resizeTime, resizeEdge);
          }

          if (_this2.props.onResizing) {
            _this2.props.onResizing(_this2.itemId, resizeTime, resizeEdge);
          }

          _this2.setState({
            resizeTime: resizeTime
          });
        }
      }).on('resizeend', function (e) {
        if (_this2.state.resizing) {
          var resizeEdge = _this2.state.resizeEdge;

          var resizeTime = _this2.resizeTimeSnap(_this2.timeFor(e));

          if (_this2.props.moveResizeValidator) {
            resizeTime = _this2.props.moveResizeValidator('resize', _this2.props.item, resizeTime, resizeEdge);
          }

          if (_this2.props.onResized) {
            _this2.props.onResized(_this2.itemId, resizeTime, resizeEdge, _this2.resizeTimeDelta(e, resizeEdge));
          }

          _this2.setState({
            resizing: null,
            resizeStart: null,
            resizeEdge: null,
            resizeTime: null
          });
        }
      }).on('tap', function (e) {
        _this2.actualClick(e, e.pointerType === 'mouse' ? 'click' : 'touch');
      });
      this.setState({
        interactMounted: true
      });
    }
  }, {
    key: "canResizeLeft",
    value: function canResizeLeft() {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

      if (!props.canResizeLeft) {
        return false;
      }

      var width = parseInt(props.dimensions.width, 10);
      return width >= props.minResizeWidth;
    }
  }, {
    key: "canResizeRight",
    value: function canResizeRight() {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

      if (!props.canResizeRight) {
        return false;
      }

      var width = parseInt(props.dimensions.width, 10);
      return width >= props.minResizeWidth;
    }
  }, {
    key: "canMove",
    value: function canMove() {
      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;
      return !!props.canMove;
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      this.cacheDataFromProps(this.props);
      var interactMounted = this.state.interactMounted;
      var couldDrag = prevProps.selected && this.canMove(prevProps);
      var couldResizeLeft = prevProps.selected && this.canResizeLeft(prevProps);
      var couldResizeRight = prevProps.selected && this.canResizeRight(prevProps);
      var willBeAbleToDrag = this.props.selected && this.canMove(this.props);
      var willBeAbleToResizeLeft = this.props.selected && this.canResizeLeft(this.props);
      var willBeAbleToResizeRight = this.props.selected && this.canResizeRight(this.props);

      if (!!this.item) {
        if (this.props.selected && !interactMounted) {
          this.mountInteract();
          interactMounted = true;
        }

        if (interactMounted && (couldResizeLeft !== willBeAbleToResizeLeft || couldResizeRight !== willBeAbleToResizeRight)) {
          var leftResize = this.props.useResizeHandle ? this.dragLeft : true;
          var rightResize = this.props.useResizeHandle ? this.dragRight : true;
          (0, _interactjs["default"])(this.item).resizable({
            enabled: willBeAbleToResizeLeft || willBeAbleToResizeRight,
            edges: {
              top: false,
              bottom: false,
              left: willBeAbleToResizeLeft && leftResize,
              right: willBeAbleToResizeRight && rightResize
            }
          });
        }

        if (interactMounted && couldDrag !== willBeAbleToDrag) {
          (0, _interactjs["default"])(this.item).draggable({
            enabled: willBeAbleToDrag
          });
        }
      } else {
        interactMounted = false;
      }

      this.setState({
        interactMounted: interactMounted
      });
    }
  }, {
    key: "actualClick",
    value: function actualClick(e, clickType) {
      if (this.props.canSelect && this.props.onSelect) {
        this.props.onSelect(this.itemId, clickType, e);
      }
    }
  }, {
    key: "getItemStyle",
    value: function getItemStyle(props) {
      var dimensions = this.props.dimensions;
      var baseStyles = {
        position: 'absolute',
        boxSizing: 'border-box',
        left: "".concat(dimensions.left, "px"),
        top: "".concat(dimensions.top, "px"),
        width: "".concat(dimensions.width, "px"),
        height: "".concat(dimensions.height, "px"),
        lineHeight: "".concat(dimensions.height, "px")
      };
      var finalStyle = Object.assign({}, _styles.overridableStyles, this.props.selected ? _styles.selectedStyle : {}, this.props.selected & this.canMove(this.props) ? _styles.selectedAndCanMove : {}, this.props.selected & this.canResizeLeft(this.props) ? _styles.selectedAndCanResizeLeft : {}, this.props.selected & this.canResizeLeft(this.props) & this.state.dragging ? _styles.selectedAndCanResizeLeftAndDragLeft : {}, this.props.selected & this.canResizeRight(this.props) ? _styles.selectedAndCanResizeRight : {}, this.props.selected & this.canResizeRight(this.props) & this.state.dragging ? _styles.selectedAndCanResizeRightAndDragRight : {}, props.style, baseStyles);
      return finalStyle;
    }
  }, {
    key: "render",
    value: function render() {
      if (typeof this.props.order === 'undefined' || this.props.order === null) {
        return null;
      }

      var timelineContext = this.context.getTimelineContext();
      var itemContext = {
        dimensions: this.props.dimensions,
        useResizeHandle: this.props.useResizeHandle,
        title: this.itemTitle,
        canMove: this.canMove(this.props),
        canResizeLeft: this.canResizeLeft(this.props),
        canResizeRight: this.canResizeRight(this.props),
        selected: this.props.selected,
        dragging: this.state.dragging,
        dragStart: this.state.dragStart,
        dragTime: this.state.dragTime,
        dragGroupDelta: this.state.dragGroupDelta,
        resizing: this.state.resizing,
        resizeEdge: this.state.resizeEdge,
        resizeStart: this.state.resizeStart,
        resizeTime: this.state.resizeTime,
        width: this.props.dimensions.width
      };
      return this.props.itemRenderer({
        item: this.props.item,
        timelineContext: timelineContext,
        itemContext: itemContext,
        getItemProps: this.getItemProps,
        getResizeProps: this.getResizeProps
      });
    }
  }]);

  return Item;
}(_react.Component);

exports["default"] = Item;

_defineProperty(Item, "propTypes", {
  canvasTimeStart: _propTypes["default"].number.isRequired,
  canvasTimeEnd: _propTypes["default"].number.isRequired,
  canvasWidth: _propTypes["default"].number.isRequired,
  order: _propTypes["default"].object,
  dragSnap: _propTypes["default"].number,
  minResizeWidth: _propTypes["default"].number,
  selected: _propTypes["default"].bool,
  canChangeGroup: _propTypes["default"].bool.isRequired,
  canMove: _propTypes["default"].bool.isRequired,
  canResizeLeft: _propTypes["default"].bool.isRequired,
  canResizeRight: _propTypes["default"].bool.isRequired,
  keys: _propTypes["default"].object.isRequired,
  item: _propTypes["default"].object.isRequired,
  onSelect: _propTypes["default"].func,
  onDrag: _propTypes["default"].func,
  onDrop: _propTypes["default"].func,
  onResizing: _propTypes["default"].func,
  onResized: _propTypes["default"].func,
  onContextMenu: _propTypes["default"].func,
  itemRenderer: _propTypes["default"].func,
  itemProps: _propTypes["default"].object,
  canSelect: _propTypes["default"].bool,
  dimensions: _propTypes["default"].object,
  groupTops: _propTypes["default"].array,
  useResizeHandle: _propTypes["default"].bool,
  moveResizeValidator: _propTypes["default"].func,
  onItemDoubleClick: _propTypes["default"].func,
  scrollRef: _propTypes["default"].object
});

_defineProperty(Item, "defaultProps", {
  selected: false,
  itemRenderer: _defaultItemRenderer.defaultItemRenderer
});

_defineProperty(Item, "contextTypes", {
  getTimelineContext: _propTypes["default"].func
});

/***/ }),

/***/ 2208:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _react = _interopRequireWildcard(__webpack_require__(0));

var _Item = _interopRequireDefault(__webpack_require__(2207));

var _generic = __webpack_require__(1583);

var _calendar = __webpack_require__(1549);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var canResizeLeft = function canResizeLeft(item, canResize) {
  var value = (0, _generic._get)(item, 'canResize') !== undefined ? (0, _generic._get)(item, 'canResize') : canResize;
  return value === 'left' || value === 'both';
};

var canResizeRight = function canResizeRight(item, canResize) {
  var value = (0, _generic._get)(item, 'canResize') !== undefined ? (0, _generic._get)(item, 'canResize') : canResize;
  return value === 'right' || value === 'both' || value === true;
};

var Items =
/*#__PURE__*/
function (_Component) {
  _inherits(Items, _Component);

  function Items() {
    _classCallCheck(this, Items);

    return _possibleConstructorReturn(this, _getPrototypeOf(Items).apply(this, arguments));
  }

  _createClass(Items, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      return !((0, _generic.arraysEqual)(nextProps.groups, this.props.groups) && (0, _generic.arraysEqual)(nextProps.items, this.props.items) && (0, _generic.arraysEqual)(nextProps.dimensionItems, this.props.dimensionItems) && nextProps.keys === this.props.keys && nextProps.canvasTimeStart === this.props.canvasTimeStart && nextProps.canvasTimeEnd === this.props.canvasTimeEnd && nextProps.canvasWidth === this.props.canvasWidth && nextProps.selectedItem === this.props.selectedItem && nextProps.selected === this.props.selected && nextProps.dragSnap === this.props.dragSnap && nextProps.minResizeWidth === this.props.minResizeWidth && nextProps.canChangeGroup === this.props.canChangeGroup && nextProps.canMove === this.props.canMove && nextProps.canResize === this.props.canResize && nextProps.canSelect === this.props.canSelect);
    }
  }, {
    key: "isSelected",
    value: function isSelected(item, itemIdKey) {
      if (!this.props.selected) {
        return this.props.selectedItem === (0, _generic._get)(item, itemIdKey);
      } else {
        var target = (0, _generic._get)(item, itemIdKey);
        return this.props.selected.includes(target);
      }
    }
  }, {
    key: "getVisibleItems",
    value: function getVisibleItems(canvasTimeStart, canvasTimeEnd) {
      var _this$props = this.props,
          keys = _this$props.keys,
          items = _this$props.items;
      return (0, _calendar.getVisibleItems)(items, canvasTimeStart, canvasTimeEnd, keys);
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

      var _this$props2 = this.props,
          canvasTimeStart = _this$props2.canvasTimeStart,
          canvasTimeEnd = _this$props2.canvasTimeEnd,
          dimensionItems = _this$props2.dimensionItems,
          keys = _this$props2.keys,
          groups = _this$props2.groups;
      var itemIdKey = keys.itemIdKey,
          itemGroupKey = keys.itemGroupKey;
      var groupOrders = (0, _calendar.getGroupOrders)(groups, keys);
      var visibleItems = this.getVisibleItems(canvasTimeStart, canvasTimeEnd, groupOrders);
      var sortedDimensionItems = (0, _generic.keyBy)(dimensionItems, 'id');
      return _react["default"].createElement("div", {
        className: "rct-items"
      }, visibleItems.filter(function (item) {
        return sortedDimensionItems[(0, _generic._get)(item, itemIdKey)];
      }).map(function (item) {
        return _react["default"].createElement(_Item["default"], {
          key: (0, _generic._get)(item, itemIdKey),
          item: item,
          keys: _this.props.keys,
          order: groupOrders[(0, _generic._get)(item, itemGroupKey)],
          dimensions: sortedDimensionItems[(0, _generic._get)(item, itemIdKey)].dimensions,
          selected: _this.isSelected(item, itemIdKey),
          canChangeGroup: (0, _generic._get)(item, 'canChangeGroup') !== undefined ? (0, _generic._get)(item, 'canChangeGroup') : _this.props.canChangeGroup,
          canMove: (0, _generic._get)(item, 'canMove') !== undefined ? (0, _generic._get)(item, 'canMove') : _this.props.canMove,
          canResizeLeft: canResizeLeft(item, _this.props.canResize),
          canResizeRight: canResizeRight(item, _this.props.canResize),
          canSelect: (0, _generic._get)(item, 'canSelect') !== undefined ? (0, _generic._get)(item, 'canSelect') : _this.props.canSelect,
          useResizeHandle: _this.props.useResizeHandle,
          groupTops: _this.props.groupTops,
          canvasTimeStart: _this.props.canvasTimeStart,
          canvasTimeEnd: _this.props.canvasTimeEnd,
          canvasWidth: _this.props.canvasWidth,
          dragSnap: _this.props.dragSnap,
          minResizeWidth: _this.props.minResizeWidth,
          onResizing: _this.props.itemResizing,
          onResized: _this.props.itemResized,
          moveResizeValidator: _this.props.moveResizeValidator,
          onDrag: _this.props.itemDrag,
          onDrop: _this.props.itemDrop,
          onItemDoubleClick: _this.props.onItemDoubleClick,
          onContextMenu: _this.props.onItemContextMenu,
          onSelect: _this.props.itemSelect,
          itemRenderer: _this.props.itemRenderer,
          scrollRef: _this.props.scrollRef
        });
      }));
    }
  }]);

  return Items;
}(_react.Component);

exports["default"] = Items;

_defineProperty(Items, "propTypes", {
  groups: _propTypes["default"].oneOfType([_propTypes["default"].array, _propTypes["default"].object]).isRequired,
  items: _propTypes["default"].oneOfType([_propTypes["default"].array, _propTypes["default"].object]).isRequired,
  canvasTimeStart: _propTypes["default"].number.isRequired,
  canvasTimeEnd: _propTypes["default"].number.isRequired,
  canvasWidth: _propTypes["default"].number.isRequired,
  dragSnap: _propTypes["default"].number,
  minResizeWidth: _propTypes["default"].number,
  selectedItem: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),
  canChangeGroup: _propTypes["default"].bool.isRequired,
  canMove: _propTypes["default"].bool.isRequired,
  canResize: _propTypes["default"].oneOf([true, false, 'left', 'right', 'both']),
  canSelect: _propTypes["default"].bool,
  keys: _propTypes["default"].object.isRequired,
  moveResizeValidator: _propTypes["default"].func,
  itemSelect: _propTypes["default"].func,
  itemDrag: _propTypes["default"].func,
  itemDrop: _propTypes["default"].func,
  itemResizing: _propTypes["default"].func,
  itemResized: _propTypes["default"].func,
  onItemDoubleClick: _propTypes["default"].func,
  onItemContextMenu: _propTypes["default"].func,
  itemRenderer: _propTypes["default"].func,
  selected: _propTypes["default"].array,
  dimensionItems: _propTypes["default"].array,
  groupTops: _propTypes["default"].array,
  useResizeHandle: _propTypes["default"].bool,
  scrollRef: _propTypes["default"].object
});

_defineProperty(Items, "defaultProps", {
  selected: []
});

/***/ }),

/***/ 2209:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.defaultItemRenderer = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var defaultItemRenderer = function defaultItemRenderer(_ref) {
  var item = _ref.item,
      itemContext = _ref.itemContext,
      getItemProps = _ref.getItemProps,
      getResizeProps = _ref.getResizeProps;

  var _getResizeProps = getResizeProps(),
      leftResizeProps = _getResizeProps.left,
      rightResizeProps = _getResizeProps.right;

  return _react["default"].createElement("div", getItemProps(item.itemProps), itemContext.useResizeHandle ? _react["default"].createElement("div", leftResizeProps) : '', _react["default"].createElement("div", {
    className: "rct-item-content",
    style: {
      maxHeight: "".concat(itemContext.dimensions.height)
    }
  }, itemContext.title), itemContext.useResizeHandle ? _react["default"].createElement("div", rightResizeProps) : '');
}; // TODO: update this to actual prop types. Too much to change before release
// future me, forgive me.


exports.defaultItemRenderer = defaultItemRenderer;
defaultItemRenderer.propTypes = {
  item: _propTypes["default"].any,
  itemContext: _propTypes["default"].any,
  getItemProps: _propTypes["default"].any,
  getResizeProps: _propTypes["default"].any
};

/***/ }),

/***/ 2210:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.rightResizeStyle = exports.leftResizeStyle = exports.selectedAndCanResizeRightAndDragRight = exports.selectedAndCanResizeRight = exports.selectedAndCanResizeLeftAndDragLeft = exports.selectedAndCanResizeLeft = exports.selectedAndCanMove = exports.selectedStyle = exports.overridableStyles = void 0;
var overridableStyles = {
  fontSize: 12,
  color: 'white',
  cursor: 'pointer',
  background: '#2196f3',
  border: '1px solid #1a6fb3',
  zIndex: 80
};
exports.overridableStyles = overridableStyles;
var selectedStyle = {
  background: '#ffc107',
  border: '1px solid #ff9800',
  zIndex: 82
};
exports.selectedStyle = selectedStyle;
var selectedAndCanMove = {
  cursor: 'move'
};
exports.selectedAndCanMove = selectedAndCanMove;
var selectedAndCanResizeLeft = {
  borderLeftWidth: 3
};
exports.selectedAndCanResizeLeft = selectedAndCanResizeLeft;
var selectedAndCanResizeLeftAndDragLeft = {
  cursor: 'w-resize'
};
exports.selectedAndCanResizeLeftAndDragLeft = selectedAndCanResizeLeftAndDragLeft;
var selectedAndCanResizeRight = {
  borderRightWidth: 3
};
exports.selectedAndCanResizeRight = selectedAndCanResizeRight;
var selectedAndCanResizeRightAndDragRight = {
  cursor: 'e-resize'
};
exports.selectedAndCanResizeRightAndDragRight = selectedAndCanResizeRightAndDragRight;
var leftResizeStyle = {
  position: "absolute",
  width: 24,
  maxWidth: "20%",
  minWidth: 2,
  height: "100%",
  top: 0,
  left: 0,
  cursor: "pointer",
  zIndex: 88
};
exports.leftResizeStyle = leftResizeStyle;
var rightResizeStyle = {
  position: "absolute",
  width: 24,
  maxWidth: "20%",
  minWidth: 2,
  height: "100%",
  top: 0,
  right: 0,
  cursor: "pointer",
  zIndex: 88
};
exports.rightResizeStyle = rightResizeStyle;

/***/ }),

/***/ 2211:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _react = _interopRequireWildcard(__webpack_require__(0));

var _generic = __webpack_require__(1583);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var Sidebar =
/*#__PURE__*/
function (_Component) {
  _inherits(Sidebar, _Component);

  function Sidebar() {
    _classCallCheck(this, Sidebar);

    return _possibleConstructorReturn(this, _getPrototypeOf(Sidebar).apply(this, arguments));
  }

  _createClass(Sidebar, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      return !(nextProps.keys === this.props.keys && nextProps.width === this.props.width && nextProps.height === this.props.height && (0, _generic.arraysEqual)(nextProps.groups, this.props.groups) && (0, _generic.arraysEqual)(nextProps.groupHeights, this.props.groupHeights));
    }
  }, {
    key: "renderGroupContent",
    value: function renderGroupContent(group, isRightSidebar, groupTitleKey, groupRightTitleKey) {
      if (this.props.groupRenderer) {
        return _react["default"].createElement(this.props.groupRenderer, {
          group: group,
          isRightSidebar: isRightSidebar
        });
      } else {
        return (0, _generic._get)(group, isRightSidebar ? groupRightTitleKey : groupTitleKey);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this = this;

      var _this$props = this.props,
          width = _this$props.width,
          groupHeights = _this$props.groupHeights,
          height = _this$props.height,
          isRightSidebar = _this$props.isRightSidebar;
      var _this$props$keys = this.props.keys,
          groupIdKey = _this$props$keys.groupIdKey,
          groupTitleKey = _this$props$keys.groupTitleKey,
          groupRightTitleKey = _this$props$keys.groupRightTitleKey;
      var sidebarStyle = {
        width: "".concat(width, "px"),
        height: "".concat(height, "px")
      };
      var groupsStyle = {
        width: "".concat(width, "px")
      };
      var groupLines = this.props.groups.map(function (group, index) {
        var elementStyle = {
          height: "".concat(groupHeights[index], "px"),
          lineHeight: "".concat(groupHeights[index], "px")
        };
        return _react["default"].createElement("div", {
          key: (0, _generic._get)(group, groupIdKey),
          className: 'rct-sidebar-row rct-sidebar-row-' + (index % 2 === 0 ? 'even' : 'odd'),
          style: elementStyle
        }, _this.renderGroupContent(group, isRightSidebar, groupTitleKey, groupRightTitleKey));
      });
      return _react["default"].createElement("div", {
        className: 'rct-sidebar' + (isRightSidebar ? ' rct-sidebar-right' : ''),
        style: sidebarStyle
      }, _react["default"].createElement("div", {
        style: groupsStyle
      }, groupLines));
    }
  }]);

  return Sidebar;
}(_react.Component);

exports["default"] = Sidebar;

_defineProperty(Sidebar, "propTypes", {
  groups: _propTypes["default"].oneOfType([_propTypes["default"].array, _propTypes["default"].object]).isRequired,
  width: _propTypes["default"].number.isRequired,
  height: _propTypes["default"].number.isRequired,
  groupHeights: _propTypes["default"].array.isRequired,
  keys: _propTypes["default"].object.isRequired,
  groupRenderer: _propTypes["default"].func,
  isRightSidebar: _propTypes["default"].bool
});

/***/ }),

/***/ 2212:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _MarkerCanvasContext = __webpack_require__(1907);

var _TimelineMarkersRenderer = _interopRequireDefault(__webpack_require__(2213));

var _TimelineStateContext = __webpack_require__(1589);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// expand to fill entire parent container (ScrollElement)
var staticStyles = {
  position: 'absolute',
  left: 0,
  right: 0,
  top: 0,
  bottom: 0
  /**
   * Renders registered markers and exposes a mouse over listener for
   * CursorMarkers to subscribe to
   */

};

var MarkerCanvas =
/*#__PURE__*/
function (_React$Component) {
  _inherits(MarkerCanvas, _React$Component);

  function MarkerCanvas() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, MarkerCanvas);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MarkerCanvas)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "handleMouseMove", function (evt) {
      if (_this.subscription != null) {
        var pageX = evt.pageX; // FIXME: dont use getBoundingClientRect. Use passed in scroll amount

        var _this$containerEl$get = _this.containerEl.getBoundingClientRect(),
            containerLeft = _this$containerEl$get.left; // number of pixels from left we are on canvas
        // we do this calculation as pageX is based on x from viewport whereas
        // our canvas can be scrolled left and right and is generally outside
        // of the viewport.  This calculation is to get how many pixels the cursor
        // is from left of this element


        var canvasX = pageX - containerLeft;

        var date = _this.props.getDateFromLeftOffsetPosition(canvasX);

        _this.subscription({
          leftOffset: canvasX,
          date: date,
          isCursorOverCanvas: true
        });
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseLeave", function () {
      if (_this.subscription != null) {
        // tell subscriber that we're not on canvas
        _this.subscription({
          leftOffset: 0,
          date: 0,
          isCursorOverCanvas: false
        });
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseMoveSubscribe", function (sub) {
      _this.subscription = sub;
      return function () {
        _this.subscription = null;
      };
    });

    _defineProperty(_assertThisInitialized(_this), "state", {
      subscribeToMouseOver: _this.handleMouseMoveSubscribe
    });

    return _this;
  }

  _createClass(MarkerCanvas, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      return _react["default"].createElement(_MarkerCanvasContext.MarkerCanvasProvider, {
        value: this.state
      }, _react["default"].createElement("div", {
        style: staticStyles,
        onMouseMove: this.handleMouseMove,
        onMouseLeave: this.handleMouseLeave,
        ref: function ref(el) {
          return _this2.containerEl = el;
        }
      }, _react["default"].createElement(_TimelineMarkersRenderer["default"], null), this.props.children));
    }
  }]);

  return MarkerCanvas;
}(_react["default"].Component);

_defineProperty(MarkerCanvas, "propTypes", {
  getDateFromLeftOffsetPosition: _propTypes["default"].func.isRequired,
  children: _propTypes["default"].node
});

var MarkerCanvasWrapper = function MarkerCanvasWrapper(props) {
  return _react["default"].createElement(_TimelineStateContext.TimelineStateConsumer, null, function (_ref) {
    var getDateFromLeftOffsetPosition = _ref.getDateFromLeftOffsetPosition;
    return _react["default"].createElement(MarkerCanvas, _extends({
      getDateFromLeftOffsetPosition: getDateFromLeftOffsetPosition
    }, props));
  });
};

var _default = MarkerCanvasWrapper;
exports["default"] = _default;

/***/ }),

/***/ 2213:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _TimelineMarkersContext = __webpack_require__(1648);

var _markerType = __webpack_require__(1664);

var _TodayMarker = _interopRequireDefault(__webpack_require__(2216));

var _CustomMarker = _interopRequireDefault(__webpack_require__(2215));

var _TimelineStateContext = __webpack_require__(1589);

var _CursorMarker = _interopRequireDefault(__webpack_require__(2214));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/** Internal component used in timeline to render markers registered */
var TimelineMarkersRenderer = function TimelineMarkersRenderer() {
  return _react["default"].createElement(_TimelineStateContext.TimelineStateConsumer, null, function (_ref) {
    var getLeftOffsetFromDate = _ref.getLeftOffsetFromDate;
    return _react["default"].createElement(_TimelineMarkersContext.TimelineMarkersConsumer, null, function (_ref2) {
      var markers = _ref2.markers;
      return markers.map(function (marker) {
        switch (marker.type) {
          case _markerType.TimelineMarkerType.Today:
            return _react["default"].createElement(_TodayMarker["default"], {
              key: marker.id,
              getLeftOffsetFromDate: getLeftOffsetFromDate,
              renderer: marker.renderer,
              interval: marker.interval
            });

          case _markerType.TimelineMarkerType.Custom:
            return _react["default"].createElement(_CustomMarker["default"], {
              key: marker.id,
              renderer: marker.renderer,
              date: marker.date,
              getLeftOffsetFromDate: getLeftOffsetFromDate
            });

          case _markerType.TimelineMarkerType.Cursor:
            return _react["default"].createElement(_CursorMarker["default"], {
              key: marker.id,
              renderer: marker.renderer,
              getLeftOffsetFromDate: getLeftOffsetFromDate
            });

          default:
            return null;
        }
      });
    });
  });
};

var _default = TimelineMarkersRenderer;
exports["default"] = _default;

/***/ }),

/***/ 2214:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _shared = __webpack_require__(1834);

var _MarkerCanvasContext = __webpack_require__(1907);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var defaultRenderer = (0, _shared.createDefaultRenderer)('default-cursor-marker');
/**
 * CursorMarker implementation subscribes to 'subscribeToCanvasMouseOver' on mount.
 * This subscription is passed in via MarkerCanvasConsumer, which is wired up to
 * MarkerCanvasProvider in the MarkerCanvas component. When the user mouses over MarkerCanvas,
 * the callback registered in CursorMarker (this component) is passed:
 *  leftOffset - pixels from left edge of canvas, used to position this element
 *  date - the date the cursor pertains to
 *  isCursorOverCanvas - whether the user cursor is over the canvas. This is set to 'false'
 *  when the user mouseleaves the element
 */

var CursorMarker =
/*#__PURE__*/
function (_React$Component) {
  _inherits(CursorMarker, _React$Component);

  function CursorMarker() {
    var _this;

    _classCallCheck(this, CursorMarker);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(CursorMarker).call(this));

    _defineProperty(_assertThisInitialized(_this), "handleCanvasMouseOver", function (_ref) {
      var leftOffset = _ref.leftOffset,
          date = _ref.date,
          isCursorOverCanvas = _ref.isCursorOverCanvas;

      _this.setState({
        leftOffset: leftOffset,
        date: date,
        isShowingCursor: isCursorOverCanvas
      });
    });

    _this.state = {
      leftOffset: 0,
      date: 0,
      isShowingCursor: false
    };
    return _this;
  }

  _createClass(CursorMarker, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.unsubscribe = this.props.subscribeToCanvasMouseOver(this.handleCanvasMouseOver);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.unsubscribe != null) {
        this.unsubscribe();
        this.unsubscribe = null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$state = this.state,
          isShowingCursor = _this$state.isShowingCursor,
          leftOffset = _this$state.leftOffset,
          date = _this$state.date;
      if (!isShowingCursor) return null;
      var styles = (0, _shared.createMarkerStylesWithLeftOffset)(leftOffset);
      return this.props.renderer({
        styles: styles,
        date: date
      });
    }
  }]);

  return CursorMarker;
}(_react["default"].Component); // TODO: turn into HOC?


_defineProperty(CursorMarker, "propTypes", {
  subscribeToCanvasMouseOver: _propTypes["default"].func.isRequired,
  renderer: _propTypes["default"].func
});

_defineProperty(CursorMarker, "defaultProps", {
  renderer: defaultRenderer
});

var CursorMarkerWrapper = function CursorMarkerWrapper(props) {
  return _react["default"].createElement(_MarkerCanvasContext.MarkerCanvasConsumer, null, function (_ref2) {
    var subscribeToMouseOver = _ref2.subscribeToMouseOver;
    return _react["default"].createElement(CursorMarker, _extends({
      subscribeToCanvasMouseOver: subscribeToMouseOver
    }, props));
  });
};

CursorMarkerWrapper.displayName = 'CursorMarkerWrapper';
var _default = CursorMarkerWrapper;
exports["default"] = _default;

/***/ }),

/***/ 2215:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _shared = __webpack_require__(1834);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var defaultCustomMarkerRenderer = (0, _shared.createDefaultRenderer)('default-customer-marker-id');
/**
 * CustomMarker that is placed based on passed in date prop
 */

var CustomMarker =
/*#__PURE__*/
function (_React$Component) {
  _inherits(CustomMarker, _React$Component);

  function CustomMarker() {
    _classCallCheck(this, CustomMarker);

    return _possibleConstructorReturn(this, _getPrototypeOf(CustomMarker).apply(this, arguments));
  }

  _createClass(CustomMarker, [{
    key: "render",
    value: function render() {
      var date = this.props.date;
      var leftOffset = this.props.getLeftOffsetFromDate(date);
      var styles = (0, _shared.createMarkerStylesWithLeftOffset)(leftOffset);
      return this.props.renderer({
        styles: styles,
        date: date
      });
    }
  }]);

  return CustomMarker;
}(_react["default"].Component);

_defineProperty(CustomMarker, "propTypes", {
  getLeftOffsetFromDate: _propTypes["default"].func.isRequired,
  renderer: _propTypes["default"].func,
  date: _propTypes["default"].number.isRequired
});

_defineProperty(CustomMarker, "defaultProps", {
  renderer: defaultCustomMarkerRenderer
});

var _default = CustomMarker;
exports["default"] = _default;

/***/ }),

/***/ 2216:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _shared = __webpack_require__(1834);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var defaultRenderer = (0, _shared.createDefaultRenderer)('default-today-line');
/** Marker that is placed based on current date.  This component updates itself on
 * a set interval, dictated by the 'interval' prop.
 */

var TodayMarker =
/*#__PURE__*/
function (_React$Component) {
  _inherits(TodayMarker, _React$Component);

  function TodayMarker() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, TodayMarker);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TodayMarker)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "state", {
      date: Date.now()
    });

    return _this;
  }

  _createClass(TodayMarker, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.intervalToken = this.createIntervalUpdater(this.props.interval);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.interval !== this.props.interval) {
        clearInterval(this.intervalToken);
        this.intervalToken = this.createIntervalUpdater(this.props.interval);
      }
    }
  }, {
    key: "createIntervalUpdater",
    value: function createIntervalUpdater(interval) {
      var _this2 = this;

      return setInterval(function () {
        _this2.setState({
          date: Date.now() // FIXME: use date utils pass in as props

        });
      }, interval);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      clearInterval(this.intervalToken);
    }
  }, {
    key: "render",
    value: function render() {
      var date = this.state.date;
      var leftOffset = this.props.getLeftOffsetFromDate(date);
      var styles = (0, _shared.createMarkerStylesWithLeftOffset)(leftOffset);
      return this.props.renderer({
        styles: styles,
        date: date
      });
    }
  }]);

  return TodayMarker;
}(_react["default"].Component);

_defineProperty(TodayMarker, "propTypes", {
  getLeftOffsetFromDate: _propTypes["default"].func.isRequired,
  renderer: _propTypes["default"].func,
  interval: _propTypes["default"].number.isRequired
});

_defineProperty(TodayMarker, "defaultProps", {
  renderer: defaultRenderer
});

var _default = TodayMarker;
exports["default"] = _default;

/***/ }),

/***/ 2217:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _TimelineMarkersContext = __webpack_require__(1648);

var _markerType = __webpack_require__(1664);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var CursorMarker =
/*#__PURE__*/
function (_React$Component) {
  _inherits(CursorMarker, _React$Component);

  function CursorMarker() {
    _classCallCheck(this, CursorMarker);

    return _possibleConstructorReturn(this, _getPrototypeOf(CursorMarker).apply(this, arguments));
  }

  _createClass(CursorMarker, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this$props$subscribe = this.props.subscribeMarker({
        type: _markerType.TimelineMarkerType.Cursor,
        renderer: this.props.children
      }),
          unsubscribe = _this$props$subscribe.unsubscribe;

      this.unsubscribe = unsubscribe;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.unsubscribe != null) {
        this.unsubscribe();
        this.unsubscribe = null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }]);

  return CursorMarker;
}(_react["default"].Component); // TODO: turn into HOC?


_defineProperty(CursorMarker, "propTypes", {
  subscribeMarker: _propTypes["default"].func.isRequired,
  children: _propTypes["default"].func
});

var CursorMarkerWrapper = function CursorMarkerWrapper(props) {
  return _react["default"].createElement(_TimelineMarkersContext.TimelineMarkersConsumer, null, function (_ref) {
    var subscribeMarker = _ref.subscribeMarker;
    return _react["default"].createElement(CursorMarker, _extends({
      subscribeMarker: subscribeMarker
    }, props));
  });
};

CursorMarkerWrapper.displayName = 'CursorMarkerWrapper';
var _default = CursorMarkerWrapper;
exports["default"] = _default;

/***/ }),

/***/ 2218:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _TimelineMarkersContext = __webpack_require__(1648);

var _markerType = __webpack_require__(1664);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var CustomMarker =
/*#__PURE__*/
function (_React$Component) {
  _inherits(CustomMarker, _React$Component);

  function CustomMarker() {
    _classCallCheck(this, CustomMarker);

    return _possibleConstructorReturn(this, _getPrototypeOf(CustomMarker).apply(this, arguments));
  }

  _createClass(CustomMarker, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.date !== this.props.date && this.getMarker) {
        var marker = this.getMarker();
        this.props.updateMarker(_objectSpread({}, marker, {
          date: this.props.date
        }));
      }
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this$props$subscribe = this.props.subscribeMarker({
        type: _markerType.TimelineMarkerType.Custom,
        renderer: this.props.children,
        date: this.props.date
      }),
          unsubscribe = _this$props$subscribe.unsubscribe,
          getMarker = _this$props$subscribe.getMarker;

      this.unsubscribe = unsubscribe;
      this.getMarker = getMarker;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.unsubscribe != null) {
        this.unsubscribe();
        this.unsubscribe = null;
      }
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }]);

  return CustomMarker;
}(_react["default"].Component); // TODO: turn into HOC?


_defineProperty(CustomMarker, "propTypes", {
  subscribeMarker: _propTypes["default"].func.isRequired,
  updateMarker: _propTypes["default"].func.isRequired,
  children: _propTypes["default"].func,
  date: _propTypes["default"].number.isRequired
});

var CustomMarkerWrapper = function CustomMarkerWrapper(props) {
  return _react["default"].createElement(_TimelineMarkersContext.TimelineMarkersConsumer, null, function (_ref) {
    var subscribeMarker = _ref.subscribeMarker,
        updateMarker = _ref.updateMarker;
    return _react["default"].createElement(CustomMarker, _extends({
      subscribeMarker: subscribeMarker,
      updateMarker: updateMarker
    }, props));
  });
};

CustomMarkerWrapper.displayName = 'CustomMarkerWrapper';
var _default = CustomMarkerWrapper;
exports["default"] = _default;

/***/ }),

/***/ 2219:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

// Is this necessary? The initial reason for including this is for organization sake in the
// user code e.g.

/*
<Timeline {...otherProps}>
  <TimelineMarkers> // would there be props passed in here?
    <TodayLine />
    <CursorLine />
    <CustomLine />
  </TimelineMarkers>
</Timeline>

*/
// If we decide to pass in props to TimelineMarkers, then yes, this is necessary.
var TimelineMarkers = function TimelineMarkers(props) {
  return props.children || null;
};

var _default = TimelineMarkers;
exports["default"] = _default;

/***/ }),

/***/ 2220:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _TimelineMarkersContext = __webpack_require__(1648);

var _markerType = __webpack_require__(1664);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var TodayMarker =
/*#__PURE__*/
function (_React$Component) {
  _inherits(TodayMarker, _React$Component);

  function TodayMarker() {
    _classCallCheck(this, TodayMarker);

    return _possibleConstructorReturn(this, _getPrototypeOf(TodayMarker).apply(this, arguments));
  }

  _createClass(TodayMarker, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this$props$subscribe = this.props.subscribeMarker({
        type: _markerType.TimelineMarkerType.Today,
        renderer: this.props.children,
        interval: this.props.interval
      }),
          unsubscribe = _this$props$subscribe.unsubscribe,
          getMarker = _this$props$subscribe.getMarker;

      this.unsubscribe = unsubscribe;
      this.getMarker = getMarker;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.unsubscribe != null) {
        this.unsubscribe();
        this.unsubscribe = null;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.interval !== this.props.interval && this.getMarker) {
        var marker = this.getMarker();
        this.props.updateMarker(_objectSpread({}, marker, {
          interval: this.props.interval
        }));
      }
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }]);

  return TodayMarker;
}(_react["default"].Component); // TODO: turn into HOC?


_defineProperty(TodayMarker, "propTypes", {
  subscribeMarker: _propTypes["default"].func.isRequired,
  updateMarker: _propTypes["default"].func.isRequired,
  interval: _propTypes["default"].number,
  children: _propTypes["default"].func
});

_defineProperty(TodayMarker, "defaultProps", {
  interval: 1000 * 10 // default to ten seconds

});

var TodayMarkerWrapper = function TodayMarkerWrapper(props) {
  return _react["default"].createElement(_TimelineMarkersContext.TimelineMarkersConsumer, null, function (_ref) {
    var subscribeMarker = _ref.subscribeMarker,
        updateMarker = _ref.updateMarker;
    return _react["default"].createElement(TodayMarker, _extends({
      subscribeMarker: subscribeMarker,
      updateMarker: updateMarker
    }, props));
  });
};

TodayMarkerWrapper.displayName = 'TodayMarkerWrapper';
var _default = TodayMarkerWrapper;
exports["default"] = _default;

/***/ }),

/***/ 2221:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireWildcard(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _PreventClickOnDrag = _interopRequireDefault(__webpack_require__(2206));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var GroupRow =
/*#__PURE__*/
function (_Component) {
  _inherits(GroupRow, _Component);

  function GroupRow() {
    _classCallCheck(this, GroupRow);

    return _possibleConstructorReturn(this, _getPrototypeOf(GroupRow).apply(this, arguments));
  }

  _createClass(GroupRow, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          onContextMenu = _this$props.onContextMenu,
          onDoubleClick = _this$props.onDoubleClick,
          isEvenRow = _this$props.isEvenRow,
          style = _this$props.style,
          onClick = _this$props.onClick,
          clickTolerance = _this$props.clickTolerance,
          horizontalLineClassNamesForGroup = _this$props.horizontalLineClassNamesForGroup,
          group = _this$props.group;
      var classNamesForGroup = [];

      if (horizontalLineClassNamesForGroup) {
        classNamesForGroup = horizontalLineClassNamesForGroup(group);
      }

      return _react["default"].createElement(_PreventClickOnDrag["default"], {
        clickTolerance: clickTolerance,
        onClick: onClick
      }, _react["default"].createElement("div", {
        onContextMenu: onContextMenu,
        onDoubleClick: onDoubleClick,
        className: (isEvenRow ? 'rct-hl-even ' : 'rct-hl-odd ') + (classNamesForGroup ? classNamesForGroup.join(' ') : ''),
        style: style
      }));
    }
  }]);

  return GroupRow;
}(_react.Component);

_defineProperty(GroupRow, "propTypes", {
  onClick: _propTypes["default"].func.isRequired,
  onDoubleClick: _propTypes["default"].func.isRequired,
  onContextMenu: _propTypes["default"].func.isRequired,
  isEvenRow: _propTypes["default"].bool.isRequired,
  style: _propTypes["default"].object.isRequired,
  clickTolerance: _propTypes["default"].number.isRequired,
  group: _propTypes["default"].object.isRequired,
  horizontalLineClassNamesForGroup: _propTypes["default"].func
});

var _default = GroupRow;
exports["default"] = _default;

/***/ }),

/***/ 2222:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _react = _interopRequireWildcard(__webpack_require__(0));

var _GroupRow = _interopRequireDefault(__webpack_require__(2221));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var GroupRows =
/*#__PURE__*/
function (_Component) {
  _inherits(GroupRows, _Component);

  function GroupRows() {
    _classCallCheck(this, GroupRows);

    return _possibleConstructorReturn(this, _getPrototypeOf(GroupRows).apply(this, arguments));
  }

  _createClass(GroupRows, [{
    key: "shouldComponentUpdate",
    value: function shouldComponentUpdate(nextProps) {
      return !(nextProps.canvasWidth === this.props.canvasWidth && nextProps.lineCount === this.props.lineCount && nextProps.groupHeights === this.props.groupHeights && nextProps.groups === this.props.groups);
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          canvasWidth = _this$props.canvasWidth,
          lineCount = _this$props.lineCount,
          groupHeights = _this$props.groupHeights,
          onRowClick = _this$props.onRowClick,
          onRowDoubleClick = _this$props.onRowDoubleClick,
          clickTolerance = _this$props.clickTolerance,
          groups = _this$props.groups,
          horizontalLineClassNamesForGroup = _this$props.horizontalLineClassNamesForGroup,
          onRowContextClick = _this$props.onRowContextClick;
      var lines = [];

      var _loop = function _loop(i) {
        lines.push(_react["default"].createElement(_GroupRow["default"], {
          clickTolerance: clickTolerance,
          onContextMenu: function onContextMenu(evt) {
            return onRowContextClick(evt, i);
          },
          onClick: function onClick(evt) {
            return onRowClick(evt, i);
          },
          onDoubleClick: function onDoubleClick(evt) {
            return onRowDoubleClick(evt, i);
          },
          key: "horizontal-line-".concat(i),
          isEvenRow: i % 2 === 0,
          group: groups[i],
          horizontalLineClassNamesForGroup: horizontalLineClassNamesForGroup,
          style: {
            width: "".concat(canvasWidth, "px"),
            height: "".concat(groupHeights[i], "px")
          }
        }));
      };

      for (var i = 0; i < lineCount; i++) {
        _loop(i);
      }

      return _react["default"].createElement("div", {
        className: "rct-horizontal-lines"
      }, lines);
    }
  }]);

  return GroupRows;
}(_react.Component);

exports["default"] = GroupRows;

_defineProperty(GroupRows, "propTypes", {
  canvasWidth: _propTypes["default"].number.isRequired,
  lineCount: _propTypes["default"].number.isRequired,
  groupHeights: _propTypes["default"].array.isRequired,
  onRowClick: _propTypes["default"].func.isRequired,
  onRowDoubleClick: _propTypes["default"].func.isRequired,
  clickTolerance: _propTypes["default"].number.isRequired,
  groups: _propTypes["default"].array.isRequired,
  horizontalLineClassNamesForGroup: _propTypes["default"].func,
  onRowContextClick: _propTypes["default"].func.isRequired
});

/***/ }),

/***/ 2223:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireWildcard(__webpack_require__(0));

var _propTypes = _interopRequireDefault(__webpack_require__(20));

var _domHelpers = __webpack_require__(1908);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj["default"] = obj; return newObj; } }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var ScrollElement =
/*#__PURE__*/
function (_Component) {
  _inherits(ScrollElement, _Component);

  function ScrollElement() {
    var _this;

    _classCallCheck(this, ScrollElement);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(ScrollElement).call(this));

    _defineProperty(_assertThisInitialized(_this), "handleScroll", function () {
      var scrollX = _this.scrollComponent.scrollLeft;

      _this.props.onScroll(scrollX);
    });

    _defineProperty(_assertThisInitialized(_this), "refHandler", function (el) {
      _this.scrollComponent = el;

      _this.props.scrollRef(el);

      if (el) {
        el.addEventListener('wheel', _this.handleWheel, {
          passive: false
        });
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleWheel", function (e) {
      var traditionalZoom = _this.props.traditionalZoom; // zoom in the time dimension

      if (e.ctrlKey || e.metaKey || e.altKey) {
        e.preventDefault();
        var parentPosition = (0, _domHelpers.getParentPosition)(e.currentTarget);
        var xPosition = e.clientX - parentPosition.x;
        var speed = e.ctrlKey ? 10 : e.metaKey ? 3 : 1; // convert vertical zoom to horiziontal

        _this.props.onWheelZoom(speed, xPosition, e.deltaY);
      } else if (e.shiftKey) {
        e.preventDefault(); // shift+scroll event from a touchpad has deltaY property populated; shift+scroll event from a mouse has deltaX

        _this.props.onScroll(_this.scrollComponent.scrollLeft + (e.deltaY || e.deltaX)); // no modifier pressed? we prevented the default event, so scroll or zoom as needed

      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseDown", function (e) {
      if (e.button === 0) {
        _this.dragStartPosition = e.pageX;
        _this.dragLastPosition = e.pageX;

        _this.setState({
          isDragging: true
        });
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseMove", function (e) {
      // this.props.onMouseMove(e)
      //why is interacting with item important?
      if (_this.state.isDragging && !_this.props.isInteractingWithItem) {
        _this.props.onScroll(_this.scrollComponent.scrollLeft + _this.dragLastPosition - e.pageX);

        _this.dragLastPosition = e.pageX;
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseUp", function () {
      _this.dragStartPosition = null;
      _this.dragLastPosition = null;

      _this.setState({
        isDragging: false
      });
    });

    _defineProperty(_assertThisInitialized(_this), "handleMouseLeave", function () {
      // this.props.onMouseLeave(e)
      _this.dragStartPosition = null;
      _this.dragLastPosition = null;

      _this.setState({
        isDragging: false
      });
    });

    _defineProperty(_assertThisInitialized(_this), "handleTouchStart", function (e) {
      if (e.touches.length === 2) {
        e.preventDefault();
        _this.lastTouchDistance = Math.abs(e.touches[0].screenX - e.touches[1].screenX);
        _this.singleTouchStart = null;
        _this.lastSingleTouch = null;
      } else if (e.touches.length === 1) {
        e.preventDefault();
        var x = e.touches[0].clientX;
        var y = e.touches[0].clientY;
        _this.lastTouchDistance = null;
        _this.singleTouchStart = {
          x: x,
          y: y,
          screenY: window.pageYOffset
        };
        _this.lastSingleTouch = {
          x: x,
          y: y,
          screenY: window.pageYOffset
        };
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleTouchMove", function (e) {
      var _this$props = _this.props,
          isInteractingWithItem = _this$props.isInteractingWithItem,
          width = _this$props.width,
          onZoom = _this$props.onZoom;

      if (isInteractingWithItem) {
        e.preventDefault();
        return;
      }

      if (_this.lastTouchDistance && e.touches.length === 2) {
        e.preventDefault();
        var touchDistance = Math.abs(e.touches[0].screenX - e.touches[1].screenX);
        var parentPosition = (0, _domHelpers.getParentPosition)(e.currentTarget);
        var xPosition = (e.touches[0].screenX + e.touches[1].screenX) / 2 - parentPosition.x;

        if (touchDistance !== 0 && _this.lastTouchDistance !== 0) {
          onZoom(_this.lastTouchDistance / touchDistance, xPosition / width);
          _this.lastTouchDistance = touchDistance;
        }
      } else if (_this.lastSingleTouch && e.touches.length === 1) {
        e.preventDefault();
        var x = e.touches[0].clientX;
        var y = e.touches[0].clientY;
        var deltaX = x - _this.lastSingleTouch.x;
        var deltaX0 = x - _this.singleTouchStart.x;
        var deltaY0 = y - _this.singleTouchStart.y;
        _this.lastSingleTouch = {
          x: x,
          y: y
        };
        var moveX = Math.abs(deltaX0) * 3 > Math.abs(deltaY0);
        var moveY = Math.abs(deltaY0) * 3 > Math.abs(deltaX0);

        if (deltaX !== 0 && moveX) {
          _this.props.onScroll(_this.scrollComponent.scrollLeft - deltaX);
        }

        if (moveY) {
          window.scrollTo(window.pageXOffset, _this.singleTouchStart.screenY - deltaY0);
        }
      }
    });

    _defineProperty(_assertThisInitialized(_this), "handleTouchEnd", function () {
      if (_this.lastTouchDistance) {
        _this.lastTouchDistance = null;
      }

      if (_this.lastSingleTouch) {
        _this.lastSingleTouch = null;
        _this.singleTouchStart = null;
      }
    });

    _this.state = {
      isDragging: false
    };
    return _this;
  }
  /**
   * needed to handle scrolling with trackpad
   */


  _createClass(ScrollElement, [{
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.scrollComponent) {
        this.scrollComponent.removeEventListener('wheel', this.handleWheel);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props2 = this.props,
          width = _this$props2.width,
          height = _this$props2.height,
          children = _this$props2.children;
      var isDragging = this.state.isDragging;
      var scrollComponentStyle = {
        width: "".concat(width, "px"),
        height: "".concat(height + 20, "px"),
        //20px to push the scroll element down off screen...?
        cursor: isDragging ? 'move' : 'default',
        position: 'relative'
      };
      return _react["default"].createElement("div", {
        ref: this.refHandler,
        className: "rct-scroll",
        style: scrollComponentStyle,
        onMouseDown: this.handleMouseDown,
        onMouseMove: this.handleMouseMove,
        onMouseUp: this.handleMouseUp,
        onMouseLeave: this.handleMouseLeave,
        onTouchStart: this.handleTouchStart,
        onTouchMove: this.handleTouchMove,
        onTouchEnd: this.handleTouchEnd,
        onScroll: this.handleScroll
      }, children);
    }
  }]);

  return ScrollElement;
}(_react.Component);

_defineProperty(ScrollElement, "propTypes", {
  children: _propTypes["default"].element.isRequired,
  width: _propTypes["default"].number.isRequired,
  height: _propTypes["default"].number.isRequired,
  traditionalZoom: _propTypes["default"].bool.isRequired,
  scrollRef: _propTypes["default"].func.isRequired,
  isInteractingWithItem: _propTypes["default"].bool.isRequired,
  onZoom: _propTypes["default"].func.isRequired,
  onWheelZoom: _propTypes["default"].func.isRequired,
  onScroll: _propTypes["default"].func.isRequired
});

var _default = ScrollElement;
exports["default"] = _default;

/***/ }),

/***/ 2224:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function addListener(component) {
  component._resizeEventListener = {
    handleEvent: function handleEvent() {
      component.resize();
    }
  };
  window.addEventListener('resize', component._resizeEventListener);
}

function removeListener(component) {
  window.removeEventListener('resize', component._resizeEventListener);
}

var _default = {
  addListener: addListener,
  removeListener: removeListener
};
exports["default"] = _default;

/***/ }),

/***/ 2228:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_normalize_wheel__ = __webpack_require__(2192);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_normalize_wheel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_normalize_wheel__);




/**
 * Compute the dimension of the crop area based on media size,
 * aspect ratio and optionally rotation
 */

function getCropSize(mediaWidth, mediaHeight, containerWidth, containerHeight, aspect, rotation) {
  if (rotation === void 0) {
    rotation = 0;
  }

  var _a = translateSize(mediaWidth, mediaHeight, rotation),
      width = _a.width,
      height = _a.height;

  var fittingWidth = Math.min(width, containerWidth);
  var fittingHeight = Math.min(height, containerHeight);

  if (fittingWidth > fittingHeight * aspect) {
    return {
      width: fittingHeight * aspect,
      height: fittingHeight
    };
  }

  return {
    width: fittingWidth,
    height: fittingWidth / aspect
  };
}
/**
 * Ensure a new media position stays in the crop area.
 */

function restrictPosition(position, mediaSize, cropSize, zoom, rotation) {
  if (rotation === void 0) {
    rotation = 0;
  }

  var _a = translateSize(mediaSize.width, mediaSize.height, rotation),
      width = _a.width,
      height = _a.height;

  return {
    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),
    y: restrictPositionCoord(position.y, height, cropSize.height, zoom)
  };
}

function restrictPositionCoord(position, mediaSize, cropSize, zoom) {
  var maxPosition = mediaSize * zoom / 2 - cropSize / 2;
  return Math.min(maxPosition, Math.max(position, -maxPosition));
}

function getDistanceBetweenPoints(pointA, pointB) {
  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2));
}
function getRotationBetweenPoints(pointA, pointB) {
  return Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180 / Math.PI;
}
/**
 * Compute the output cropped area of the media in percentages and pixels.
 * x/y are the top-left coordinates on the src media
 */

function computeCroppedArea(crop, mediaSize, cropSize, aspect, zoom, rotation, restrictPosition) {
  if (rotation === void 0) {
    rotation = 0;
  }

  if (restrictPosition === void 0) {
    restrictPosition = true;
  } // if the media is rotated by the user, we cannot limit the position anymore
  // as it might need to be negative.


  var limitAreaFn = restrictPosition && rotation === 0 ? limitArea : noOp;
  var croppedAreaPercentages = {
    x: limitAreaFn(100, ((mediaSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaSize.width * 100),
    y: limitAreaFn(100, ((mediaSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) / mediaSize.height * 100),
    width: limitAreaFn(100, cropSize.width / mediaSize.width * 100 / zoom),
    height: limitAreaFn(100, cropSize.height / mediaSize.height * 100 / zoom)
  }; // we compute the pixels size naively

  var widthInPixels = Math.round(limitAreaFn(mediaSize.naturalWidth, croppedAreaPercentages.width * mediaSize.naturalWidth / 100));
  var heightInPixels = Math.round(limitAreaFn(mediaSize.naturalHeight, croppedAreaPercentages.height * mediaSize.naturalHeight / 100));
  var isImgWiderThanHigh = mediaSize.naturalWidth >= mediaSize.naturalHeight * aspect; // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)
  // if the media is wider than high, when zoom is 0, the crop height will be equals to iamge height
  // thus we want to compute the width from the height and aspect for accuracy.
  // Otherwise, we compute the height from width and aspect.

  var sizePixels = isImgWiderThanHigh ? {
    width: Math.round(heightInPixels * aspect),
    height: heightInPixels
  } : {
    width: widthInPixels,
    height: Math.round(widthInPixels / aspect)
  };

  var croppedAreaPixels = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({}, sizePixels), {
    x: Math.round(limitAreaFn(mediaSize.naturalWidth - sizePixels.width, croppedAreaPercentages.x * mediaSize.naturalWidth / 100)),
    y: Math.round(limitAreaFn(mediaSize.naturalHeight - sizePixels.height, croppedAreaPercentages.y * mediaSize.naturalHeight / 100))
  });

  return {
    croppedAreaPercentages: croppedAreaPercentages,
    croppedAreaPixels: croppedAreaPixels
  };
}
/**
 * Ensure the returned value is between 0 and max
 */

function limitArea(max, value) {
  return Math.min(max, Math.max(0, value));
}

function noOp(_max, value) {
  return value;
}
/**
 * Compute the crop and zoom from the croppedAreaPixels
 */


function getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize) {
  var mediaZoom = mediaSize.width / mediaSize.naturalWidth;

  if (cropSize) {
    var isHeightMaxSize_1 = cropSize.height > cropSize.width;
    return isHeightMaxSize_1 ? cropSize.height / mediaZoom / croppedAreaPixels.height : cropSize.width / mediaZoom / croppedAreaPixels.width;
  }

  var aspect = croppedAreaPixels.width / croppedAreaPixels.height;
  var isHeightMaxSize = mediaSize.naturalWidth >= mediaSize.naturalHeight * aspect;
  return isHeightMaxSize ? mediaSize.naturalHeight / croppedAreaPixels.height : mediaSize.naturalWidth / croppedAreaPixels.width;
}
/**
 * Compute the crop and zoom from the croppedAreaPixels
 */


function getInitialCropFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize) {
  var mediaZoom = mediaSize.width / mediaSize.naturalWidth;
  var zoom = getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize);
  var cropZoom = mediaZoom * zoom;
  var crop = {
    x: ((mediaSize.naturalWidth - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,
    y: ((mediaSize.naturalHeight - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) * cropZoom
  };
  return {
    crop: crop,
    zoom: zoom
  };
}
/**
 * Return the point that is the center of point a and b
 */

function getCenter(a, b) {
  return {
    x: (b.x + a.x) / 2,
    y: (b.y + a.y) / 2
  };
}
/**
 *
 * Returns an x,y point once rotated around xMid,yMid
 */

function rotateAroundMidPoint(x, y, xMid, yMid, degrees) {
  var cos = Math.cos;
  var sin = Math.sin;
  var radian = degrees * Math.PI / 180; // Convert to radians
  // Subtract midpoints, so that midpoint is translated to origin
  // and add it in the end again

  var xr = (x - xMid) * cos(radian) - (y - yMid) * sin(radian) + xMid;
  var yr = (x - xMid) * sin(radian) + (y - yMid) * cos(radian) + yMid;
  return [xr, yr];
}
/**
 * Returns the new bounding area of a rotated rectangle.
 */

function translateSize(width, height, rotation) {
  var centerX = width / 2;
  var centerY = height / 2;
  var outerBounds = [rotateAroundMidPoint(0, 0, centerX, centerY, rotation), rotateAroundMidPoint(width, 0, centerX, centerY, rotation), rotateAroundMidPoint(width, height, centerX, centerY, rotation), rotateAroundMidPoint(0, height, centerX, centerY, rotation)];
  var minX = Math.min.apply(Math, outerBounds.map(function (p) {
    return p[0];
  }));
  var maxX = Math.max.apply(Math, outerBounds.map(function (p) {
    return p[0];
  }));
  var minY = Math.min.apply(Math, outerBounds.map(function (p) {
    return p[1];
  }));
  var maxY = Math.max.apply(Math, outerBounds.map(function (p) {
    return p[1];
  }));
  return {
    width: maxX - minX,
    height: maxY - minY
  };
}
/**
 * Combine multiple class names into a single string.
 */

function classNames() {
  var args = [];

  for (var _i = 0; _i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }

  return args.filter(function (value) {
    if (typeof value === 'string' && value.length > 0) {
      return true;
    }

    return false;
  }).join(' ').trim();
}

var css_248z = ".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n";

var MIN_ZOOM = 1;
var MAX_ZOOM = 3;

var Cropper =
/** @class */
function (_super) {
  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["b" /* __extends */])(Cropper, _super);

  function Cropper() {
    var _this = _super !== null && _super.apply(this, arguments) || this;

    _this.imageRef = null;
    _this.videoRef = null;
    _this.containerRef = null;
    _this.styleRef = null;
    _this.containerRect = null;
    _this.mediaSize = {
      width: 0,
      height: 0,
      naturalWidth: 0,
      naturalHeight: 0
    };
    _this.dragStartPosition = {
      x: 0,
      y: 0
    };
    _this.dragStartCrop = {
      x: 0,
      y: 0
    };
    _this.lastPinchDistance = 0;
    _this.lastPinchRotation = 0;
    _this.rafDragTimeout = null;
    _this.rafPinchTimeout = null;
    _this.wheelTimer = null;
    _this.state = {
      cropSize: null,
      hasWheelJustStarted: false
    }; // this is to prevent Safari on iOS >= 10 to zoom the page

    _this.preventZoomSafari = function (e) {
      return e.preventDefault();
    };

    _this.cleanEvents = function () {
      document.removeEventListener('mousemove', _this.onMouseMove);
      document.removeEventListener('mouseup', _this.onDragStopped);
      document.removeEventListener('touchmove', _this.onTouchMove);
      document.removeEventListener('touchend', _this.onDragStopped);
    };

    _this.clearScrollEvent = function () {
      if (_this.containerRef) _this.containerRef.removeEventListener('wheel', _this.onWheel);

      if (_this.wheelTimer) {
        clearTimeout(_this.wheelTimer);
      }
    };

    _this.onMediaLoad = function () {
      _this.computeSizes();

      _this.emitCropData();

      _this.setInitialCrop();

      if (_this.props.onMediaLoaded) {
        _this.props.onMediaLoaded(_this.mediaSize);
      }
    };

    _this.setInitialCrop = function () {
      var _a = _this.props,
          initialCroppedAreaPixels = _a.initialCroppedAreaPixels,
          cropSize = _a.cropSize;

      if (!initialCroppedAreaPixels) {
        return;
      }

      var _b = getInitialCropFromCroppedAreaPixels(initialCroppedAreaPixels, _this.mediaSize, cropSize),
          crop = _b.crop,
          zoom = _b.zoom;

      _this.props.onCropChange(crop);

      _this.props.onZoomChange && _this.props.onZoomChange(zoom);
    };

    _this.computeSizes = function () {
      var _a, _b, _c, _d, _e, _f;

      var mediaRef = _this.imageRef || _this.videoRef;

      if (mediaRef && _this.containerRef) {
        _this.containerRect = _this.containerRef.getBoundingClientRect();
        _this.mediaSize = {
          width: mediaRef.offsetWidth,
          height: mediaRef.offsetHeight,
          naturalWidth: ((_a = _this.imageRef) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = _this.videoRef) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0,
          naturalHeight: ((_c = _this.imageRef) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = _this.videoRef) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0
        };
        var cropSize = _this.props.cropSize ? _this.props.cropSize : getCropSize(mediaRef.offsetWidth, mediaRef.offsetHeight, _this.containerRect.width, _this.containerRect.height, _this.props.aspect, _this.props.rotation);

        if (((_e = _this.state.cropSize) === null || _e === void 0 ? void 0 : _e.height) !== cropSize.height || ((_f = _this.state.cropSize) === null || _f === void 0 ? void 0 : _f.width) !== cropSize.width) {
          _this.props.onCropSizeChange && _this.props.onCropSizeChange(cropSize);
        }

        _this.setState({
          cropSize: cropSize
        }, _this.recomputeCropPosition);
      }
    };

    _this.onMouseDown = function (e) {
      e.preventDefault();
      document.addEventListener('mousemove', _this.onMouseMove);
      document.addEventListener('mouseup', _this.onDragStopped);

      _this.onDragStart(Cropper.getMousePoint(e));
    };

    _this.onMouseMove = function (e) {
      return _this.onDrag(Cropper.getMousePoint(e));
    };

    _this.onTouchStart = function (e) {
      e.preventDefault();
      document.addEventListener('touchmove', _this.onTouchMove, {
        passive: false
      }); // iOS 11 now defaults to passive: true

      document.addEventListener('touchend', _this.onDragStopped);

      if (e.touches.length === 2) {
        _this.onPinchStart(e);
      } else if (e.touches.length === 1) {
        _this.onDragStart(Cropper.getTouchPoint(e.touches[0]));
      }
    };

    _this.onTouchMove = function (e) {
      // Prevent whole page from scrolling on iOS.
      e.preventDefault();

      if (e.touches.length === 2) {
        _this.onPinchMove(e);
      } else if (e.touches.length === 1) {
        _this.onDrag(Cropper.getTouchPoint(e.touches[0]));
      }
    };

    _this.onDragStart = function (_a) {
      var _b, _c;

      var x = _a.x,
          y = _a.y;
      _this.dragStartPosition = {
        x: x,
        y: y
      };
      _this.dragStartCrop = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({}, _this.props.crop);
      (_c = (_b = _this.props).onInteractionStart) === null || _c === void 0 ? void 0 : _c.call(_b);
    };

    _this.onDrag = function (_a) {
      var x = _a.x,
          y = _a.y;
      if (_this.rafDragTimeout) window.cancelAnimationFrame(_this.rafDragTimeout);
      _this.rafDragTimeout = window.requestAnimationFrame(function () {
        if (!_this.state.cropSize) return;
        if (x === undefined || y === undefined) return;
        var offsetX = x - _this.dragStartPosition.x;
        var offsetY = y - _this.dragStartPosition.y;
        var requestedPosition = {
          x: _this.dragStartCrop.x + offsetX,
          y: _this.dragStartCrop.y + offsetY
        };
        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : requestedPosition;

        _this.props.onCropChange(newPosition);
      });
    };

    _this.onDragStopped = function () {
      var _a, _b;

      _this.cleanEvents();

      _this.emitCropData();

      (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);
    };

    _this.onWheel = function (e) {
      e.preventDefault();
      var point = Cropper.getMousePoint(e);
      var pixelY = __WEBPACK_IMPORTED_MODULE_2_normalize_wheel___default()(e).pixelY;
      var newZoom = _this.props.zoom - pixelY * _this.props.zoomSpeed / 200;

      _this.setNewZoom(newZoom, point);

      if (!_this.state.hasWheelJustStarted) {
        _this.setState({
          hasWheelJustStarted: true
        }, function () {
          var _a, _b;

          return (_b = (_a = _this.props).onInteractionStart) === null || _b === void 0 ? void 0 : _b.call(_a);
        });
      }

      if (_this.wheelTimer) {
        clearTimeout(_this.wheelTimer);
      }

      _this.wheelTimer = window.setTimeout(function () {
        return _this.setState({
          hasWheelJustStarted: false
        }, function () {
          var _a, _b;

          return (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);
        });
      }, 250);
    };

    _this.getPointOnContainer = function (_a) {
      var x = _a.x,
          y = _a.y;

      if (!_this.containerRect) {
        throw new Error('The Cropper is not mounted');
      }

      return {
        x: _this.containerRect.width / 2 - (x - _this.containerRect.left),
        y: _this.containerRect.height / 2 - (y - _this.containerRect.top)
      };
    };

    _this.getPointOnMedia = function (_a) {
      var x = _a.x,
          y = _a.y;
      var _b = _this.props,
          crop = _b.crop,
          zoom = _b.zoom;
      return {
        x: (x + crop.x) / zoom,
        y: (y + crop.y) / zoom
      };
    };

    _this.setNewZoom = function (zoom, point) {
      if (!_this.state.cropSize || !_this.props.onZoomChange) return;

      var zoomPoint = _this.getPointOnContainer(point);

      var zoomTarget = _this.getPointOnMedia(zoomPoint);

      var newZoom = Math.min(_this.props.maxZoom, Math.max(zoom, _this.props.minZoom));
      var requestedPosition = {
        x: zoomTarget.x * newZoom - zoomPoint.x,
        y: zoomTarget.y * newZoom - zoomPoint.y
      };
      var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, newZoom, _this.props.rotation) : requestedPosition;

      _this.props.onCropChange(newPosition);

      _this.props.onZoomChange(newZoom);
    };

    _this.getCropData = function () {
      if (!_this.state.cropSize) {
        return null;
      } // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ricardo-ch/react-easy-crop/issues/6)


      var restrictedPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;
      return computeCroppedArea(restrictedPosition, _this.mediaSize, _this.state.cropSize, _this.getAspect(), _this.props.zoom, _this.props.rotation, _this.props.restrictPosition);
    };

    _this.emitCropData = function () {
      var cropData = _this.getCropData();

      if (!cropData) return;
      var croppedAreaPercentages = cropData.croppedAreaPercentages,
          croppedAreaPixels = cropData.croppedAreaPixels;

      if (_this.props.onCropComplete) {
        _this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels);
      }

      if (_this.props.onCropAreaChange) {
        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);
      }
    };

    _this.emitCropAreaChange = function () {
      var cropData = _this.getCropData();

      if (!cropData) return;
      var croppedAreaPercentages = cropData.croppedAreaPercentages,
          croppedAreaPixels = cropData.croppedAreaPixels;

      if (_this.props.onCropAreaChange) {
        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);
      }
    };

    _this.recomputeCropPosition = function () {
      if (!_this.state.cropSize) return;
      var newPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;

      _this.props.onCropChange(newPosition);

      _this.emitCropData();
    };

    return _this;
  }

  Cropper.prototype.componentDidMount = function () {
    window.addEventListener('resize', this.computeSizes);

    if (this.containerRef) {
      this.props.zoomWithScroll && this.containerRef.addEventListener('wheel', this.onWheel, {
        passive: false
      });
      this.containerRef.addEventListener('gesturestart', this.preventZoomSafari);
      this.containerRef.addEventListener('gesturechange', this.preventZoomSafari);
    }

    if (!this.props.disableAutomaticStylesInjection) {
      this.styleRef = document.createElement('style');
      this.styleRef.setAttribute('type', 'text/css');
      this.styleRef.innerHTML = css_248z;
      document.head.appendChild(this.styleRef);
    } // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called


    if (this.imageRef && this.imageRef.complete) {
      this.onMediaLoad();
    }
  };

  Cropper.prototype.componentWillUnmount = function () {
    var _a;

    window.removeEventListener('resize', this.computeSizes);

    if (this.containerRef) {
      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari);
      this.containerRef.removeEventListener('gesturechange', this.preventZoomSafari);
    }

    if (this.styleRef) {
      (_a = this.styleRef.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.styleRef);
    }

    this.cleanEvents();
    this.props.zoomWithScroll && this.clearScrollEvent();
  };

  Cropper.prototype.componentDidUpdate = function (prevProps) {
    var _a, _b, _c, _d, _e, _f, _g, _h;

    if (prevProps.rotation !== this.props.rotation) {
      this.computeSizes();
      this.recomputeCropPosition();
    } else if (prevProps.aspect !== this.props.aspect) {
      this.computeSizes();
    } else if (prevProps.zoom !== this.props.zoom) {
      this.recomputeCropPosition();
    } else if (((_a = prevProps.cropSize) === null || _a === void 0 ? void 0 : _a.height) !== ((_b = this.props.cropSize) === null || _b === void 0 ? void 0 : _b.height) || ((_c = prevProps.cropSize) === null || _c === void 0 ? void 0 : _c.width) !== ((_d = this.props.cropSize) === null || _d === void 0 ? void 0 : _d.width)) {
      this.computeSizes();
    } else if (((_e = prevProps.crop) === null || _e === void 0 ? void 0 : _e.x) !== ((_f = this.props.crop) === null || _f === void 0 ? void 0 : _f.x) || ((_g = prevProps.crop) === null || _g === void 0 ? void 0 : _g.y) !== ((_h = this.props.crop) === null || _h === void 0 ? void 0 : _h.y)) {
      this.emitCropAreaChange();
    }

    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {
      this.props.zoomWithScroll ? this.containerRef.addEventListener('wheel', this.onWheel, {
        passive: false
      }) : this.clearScrollEvent();
    }
  };

  Cropper.prototype.getAspect = function () {
    var _a = this.props,
        cropSize = _a.cropSize,
        aspect = _a.aspect;

    if (cropSize) {
      return cropSize.width / cropSize.height;
    }

    return aspect;
  };

  Cropper.prototype.onPinchStart = function (e) {
    var pointA = Cropper.getTouchPoint(e.touches[0]);
    var pointB = Cropper.getTouchPoint(e.touches[1]);
    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB);
    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB);
    this.onDragStart(getCenter(pointA, pointB));
  };

  Cropper.prototype.onPinchMove = function (e) {
    var _this = this;

    var pointA = Cropper.getTouchPoint(e.touches[0]);
    var pointB = Cropper.getTouchPoint(e.touches[1]);
    var center = getCenter(pointA, pointB);
    this.onDrag(center);
    if (this.rafPinchTimeout) window.cancelAnimationFrame(this.rafPinchTimeout);
    this.rafPinchTimeout = window.requestAnimationFrame(function () {
      var distance = getDistanceBetweenPoints(pointA, pointB);
      var newZoom = _this.props.zoom * (distance / _this.lastPinchDistance);

      _this.setNewZoom(newZoom, center);

      _this.lastPinchDistance = distance;
      var rotation = getRotationBetweenPoints(pointA, pointB);
      var newRotation = _this.props.rotation + (rotation - _this.lastPinchRotation);
      _this.props.onRotationChange && _this.props.onRotationChange(newRotation);
      _this.lastPinchRotation = rotation;
    });
  };

  Cropper.prototype.render = function () {
    var _this = this;

    var _a = this.props,
        image = _a.image,
        video = _a.video,
        mediaProps = _a.mediaProps,
        transform = _a.transform,
        _b = _a.crop,
        x = _b.x,
        y = _b.y,
        rotation = _a.rotation,
        zoom = _a.zoom,
        cropShape = _a.cropShape,
        showGrid = _a.showGrid,
        _c = _a.style,
        containerStyle = _c.containerStyle,
        cropAreaStyle = _c.cropAreaStyle,
        mediaStyle = _c.mediaStyle,
        _d = _a.classes,
        containerClassName = _d.containerClassName,
        cropAreaClassName = _d.cropAreaClassName,
        mediaClassName = _d.mediaClassName,
        objectFit = _a.objectFit;
    return /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement("div", {
      onMouseDown: this.onMouseDown,
      onTouchStart: this.onTouchStart,
      ref: function ref(el) {
        return _this.containerRef = el;
      },
      "data-testid": "container",
      style: containerStyle,
      className: classNames('reactEasyCrop_Container', containerClassName)
    }, image ? /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement("img", __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({
      alt: "",
      className: classNames('reactEasyCrop_Image', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)
    }, mediaProps, {
      src: image,
      ref: function ref(el) {
        return _this.imageRef = el;
      },
      style: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({}, mediaStyle), {
        transform: transform || "translate(" + x + "px, " + y + "px) rotate(" + rotation + "deg) scale(" + zoom + ")"
      }),
      onLoad: this.onMediaLoad
    })) : video && /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement("video", __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({
      autoPlay: true,
      loop: true,
      muted: true,
      className: classNames('reactEasyCrop_Video', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)
    }, mediaProps, {
      ref: function ref(el) {
        return _this.videoRef = el;
      },
      onLoadedMetadata: this.onMediaLoad,
      style: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({}, mediaStyle), {
        transform: transform || "translate(" + x + "px, " + y + "px) rotate(" + rotation + "deg) scale(" + zoom + ")"
      }),
      controls: false
    }), (Array.isArray(video) ? video : [{
      src: video
    }]).map(function (item) {
      return /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement("source", __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({
        key: item.src
      }, item));
    })), this.state.cropSize && /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement("div", {
      style: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __assign */])({}, cropAreaStyle), {
        width: this.state.cropSize.width,
        height: this.state.cropSize.height
      }),
      "data-testid": "cropper",
      className: classNames('reactEasyCrop_CropArea', cropShape === 'round' && 'reactEasyCrop_CropAreaRound', showGrid && 'reactEasyCrop_CropAreaGrid', cropAreaClassName)
    }));
  };

  Cropper.defaultProps = {
    zoom: 1,
    rotation: 0,
    aspect: 4 / 3,
    maxZoom: MAX_ZOOM,
    minZoom: MIN_ZOOM,
    cropShape: 'rect',
    objectFit: 'contain',
    showGrid: true,
    style: {},
    classes: {},
    mediaProps: {},
    zoomSpeed: 1,
    restrictPosition: true,
    zoomWithScroll: true
  };

  Cropper.getMousePoint = function (e) {
    return {
      x: Number(e.clientX),
      y: Number(e.clientY)
    };
  };

  Cropper.getTouchPoint = function (touch) {
    return {
      x: Number(touch.clientX),
      y: Number(touch.clientY)
    };
  };

  return Cropper;
}(__WEBPACK_IMPORTED_MODULE_1_react___default.a.Component);

/* harmony default export */ __webpack_exports__["a"] = (Cropper);
//# sourceMappingURL=index.module.js.map


/***/ }),

/***/ 2236:
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var React = __webpack_require__(0);
var React__default = _interopDefault(React);
var ReactDOM = _interopDefault(__webpack_require__(80));
var invariant = _interopDefault(__webpack_require__(104));
var throttleDebounce = __webpack_require__(2242);
var createResizeDetector = _interopDefault(__webpack_require__(2159));
var isShallowEqual = _interopDefault(__webpack_require__(1523));

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) _setPrototypeOf(subClass, superClass);
}

function _getPrototypeOf(o) {
  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  return _getPrototypeOf(o);
}

function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  return _setPrototypeOf(o, p);
}

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }

  return target;
}

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};

  var target = _objectWithoutPropertiesLoose(source, excluded);

  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i < sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      if (excluded.indexOf(key) >= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

function _possibleConstructorReturn(self, call) {
  if (call && (typeof call === "object" || typeof call === "function")) {
    return call;
  }

  return _assertThisInitialized(self);
}

var instances = {}; // Lazily require to not cause bug
// https://github.com/ctrlplusb/react-sizeme/issues/6

function resizeDetector() {
  var strategy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'scroll';

  if (!instances[strategy]) {
    instances[strategy] = createResizeDetector({
      strategy: strategy
    });
  }

  return instances[strategy];
}

var errMsg = 'react-sizeme: an error occurred whilst stopping to listen to node size changes';
var defaultConfig = {
  monitorWidth: true,
  monitorHeight: false,
  monitorPosition: false,
  refreshRate: 16,
  refreshMode: 'throttle',
  noPlaceholder: false,
  resizeDetectorStrategy: 'scroll'
};

function getDisplayName(WrappedComponent) {
  return WrappedComponent.displayName || WrappedComponent.name || 'Component';
}
/**
 * This is a utility wrapper component that will allow our higher order
 * component to get a ref handle on our wrapped components html.
 * @see https://gist.github.com/jimfb/32b587ee6177665fb4cf
 */


var ReferenceWrapper =
/*#__PURE__*/
function (_Component) {
  _inherits(ReferenceWrapper, _Component);

  function ReferenceWrapper() {
    _classCallCheck(this, ReferenceWrapper);

    return _possibleConstructorReturn(this, _getPrototypeOf(ReferenceWrapper).apply(this, arguments));
  }

  _createClass(ReferenceWrapper, [{
    key: "render",
    value: function render() {
      return React.Children.only(this.props.children);
    }
  }]);

  return ReferenceWrapper;
}(React.Component);

_defineProperty(ReferenceWrapper, "displayName", 'SizeMeReferenceWrapper');

function Placeholder(_ref) {
  var className = _ref.className,
      style = _ref.style;
  // Lets create the props for the temp element.
  var phProps = {}; // We will use any provided className/style or else make the temp
  // container take the full available space.

  if (!className && !style) {
    phProps.style = {
      width: '100%',
      height: '100%'
    };
  } else {
    if (className) {
      phProps.className = className;
    }

    if (style) {
      phProps.style = style;
    }
  }

  return React__default.createElement("div", phProps);
}

Placeholder.displayName = 'SizeMePlaceholder';
/**
 * As we need to maintain a ref on the root node that is rendered within our
 * SizeMe component we need to wrap our entire render in a sub component.
 * Without this, we lose the DOM ref after the placeholder is removed from
 * the render and the actual component is rendered.
 * It took me forever to figure this out, so tread extra careful on this one!
 */

var renderWrapper = function renderWrapper(WrappedComponent) {
  function SizeMeRenderer(props) {
    var explicitRef = props.explicitRef,
        className = props.className,
        style = props.style,
        size = props.size,
        disablePlaceholder = props.disablePlaceholder,
        onSize = props.onSize,
        restProps = _objectWithoutProperties(props, ["explicitRef", "className", "style", "size", "disablePlaceholder", "onSize"]);

    var noSizeData = size == null || size.width == null && size.height == null && size.position == null;
    var renderPlaceholder = noSizeData && !disablePlaceholder;
    var renderProps = {
      className: className,
      style: style
    };

    if (size != null) {
      renderProps.size = size;
    }

    var toRender = renderPlaceholder ? React__default.createElement(Placeholder, {
      className: className,
      style: style
    }) : React__default.createElement(WrappedComponent, _extends({}, renderProps, restProps));
    return React__default.createElement(ReferenceWrapper, {
      ref: explicitRef
    }, toRender);
  }

  SizeMeRenderer.displayName = "SizeMeRenderer(".concat(getDisplayName(WrappedComponent), ")");
  return SizeMeRenderer;
};
/**
 * :: config -> Component -> WrappedComponent
 *
 * Higher order component that allows the wrapped component to become aware
 * of it's size, by receiving it as an object within it's props.
 *
 * @param  monitorWidth
 *   Default true, whether changes in the element's width should be monitored,
 *   causing a size property to be broadcast.
 * @param  monitorHeight
 *   Default false, whether changes in the element's height should be monitored,
 *   causing a size property to be broadcast.
 *
 * @return The wrapped component.
 */


function withSize() {
  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;
  var _config$monitorWidth = config.monitorWidth,
      monitorWidth = _config$monitorWidth === void 0 ? defaultConfig.monitorWidth : _config$monitorWidth,
      _config$monitorHeight = config.monitorHeight,
      monitorHeight = _config$monitorHeight === void 0 ? defaultConfig.monitorHeight : _config$monitorHeight,
      _config$monitorPositi = config.monitorPosition,
      monitorPosition = _config$monitorPositi === void 0 ? defaultConfig.monitorPosition : _config$monitorPositi,
      _config$refreshRate = config.refreshRate,
      refreshRate = _config$refreshRate === void 0 ? defaultConfig.refreshRate : _config$refreshRate,
      _config$refreshMode = config.refreshMode,
      refreshMode = _config$refreshMode === void 0 ? defaultConfig.refreshMode : _config$refreshMode,
      _config$noPlaceholder = config.noPlaceholder,
      noPlaceholder = _config$noPlaceholder === void 0 ? defaultConfig.noPlaceholder : _config$noPlaceholder,
      _config$resizeDetecto = config.resizeDetectorStrategy,
      resizeDetectorStrategy = _config$resizeDetecto === void 0 ? defaultConfig.resizeDetectorStrategy : _config$resizeDetecto;
  invariant(monitorWidth || monitorHeight || monitorPosition, 'You have to monitor at least one of the width, height, or position when using "sizeMe"');
  invariant(refreshRate >= 16, "It is highly recommended that you don't put your refreshRate lower than " + '16 as this may cause layout thrashing.');
  invariant(refreshMode === 'throttle' || refreshMode === 'debounce', 'The refreshMode should have a value of "throttle" or "debounce"');
  var refreshDelayStrategy = refreshMode === 'throttle' ? throttleDebounce.throttle : throttleDebounce.debounce;
  return function WrapComponent(WrappedComponent) {
    var SizeMeRenderWrapper = renderWrapper(WrappedComponent);

    var SizeAwareComponent =
    /*#__PURE__*/
    function (_React$Component) {
      _inherits(SizeAwareComponent, _React$Component);

      function SizeAwareComponent() {
        var _getPrototypeOf2;

        var _this;

        _classCallCheck(this, SizeAwareComponent);

        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SizeAwareComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));

        _defineProperty(_assertThisInitialized(_this), "domEl", null);

        _defineProperty(_assertThisInitialized(_this), "state", {
          width: undefined,
          height: undefined,
          position: undefined
        });

        _defineProperty(_assertThisInitialized(_this), "uninstall", function () {
          if (_this.domEl) {
            try {
              _this.detector.uninstall(_this.domEl);
            } catch (err) {
              // eslint-disable-next-line no-console
              console.warn(errMsg);
            }

            _this.domEl = null;
          }
        });

        _defineProperty(_assertThisInitialized(_this), "determineStrategy", function (props) {
          if (props.onSize) {
            if (!_this.callbackState) {
              _this.callbackState = _objectSpread2({}, _this.state);
            }

            _this.strategy = 'callback';
          } else {
            _this.strategy = 'render';
          }
        });

        _defineProperty(_assertThisInitialized(_this), "strategisedSetState", function (state) {
          if (_this.strategy === 'callback') {
            _this.callbackState = state;

            _this.props.onSize(state);
          }

          _this.setState(state);
        });

        _defineProperty(_assertThisInitialized(_this), "strategisedGetState", function () {
          return _this.strategy === 'callback' ? _this.callbackState : _this.state;
        });

        _defineProperty(_assertThisInitialized(_this), "refCallback", function (element) {
          _this.element = element;
        });

        _defineProperty(_assertThisInitialized(_this), "hasSizeChanged", function (current, next) {
          var c = current;
          var n = next;
          var cp = c.position || {};
          var np = n.position || {};
          return monitorWidth && c.width !== n.width || monitorHeight && c.height !== n.height || monitorPosition && (cp.top !== np.top || cp.left !== np.left || cp.bottom !== np.bottom || cp.right !== np.right);
        });

        _defineProperty(_assertThisInitialized(_this), "checkIfSizeChanged", refreshDelayStrategy(refreshRate, function (el) {
          var _el$getBoundingClient = el.getBoundingClientRect(),
              width = _el$getBoundingClient.width,
              height = _el$getBoundingClient.height,
              right = _el$getBoundingClient.right,
              left = _el$getBoundingClient.left,
              top = _el$getBoundingClient.top,
              bottom = _el$getBoundingClient.bottom;

          var next = {
            width: monitorWidth ? width : null,
            height: monitorHeight ? height : null,
            position: monitorPosition ? {
              right: right,
              left: left,
              top: top,
              bottom: bottom
            } : null
          };

          if (_this.hasSizeChanged(_this.strategisedGetState(), next)) {
            _this.strategisedSetState(next);
          }
        }));

        return _this;
      }

      _createClass(SizeAwareComponent, [{
        key: "componentDidMount",
        value: function componentDidMount() {
          this.detector = resizeDetector(resizeDetectorStrategy);
          this.determineStrategy(this.props);
          this.handleDOMNode();
        }
      }, {
        key: "componentDidUpdate",
        value: function componentDidUpdate() {
          this.determineStrategy(this.props);
          this.handleDOMNode();
        }
      }, {
        key: "componentWillUnmount",
        value: function componentWillUnmount() {
          // Change our size checker to a noop just in case we have some
          // late running events.
          this.hasSizeChanged = function () {
            return undefined;
          };

          this.checkIfSizeChanged = function () {
            return undefined;
          };

          this.uninstall();
        }
      }, {
        key: "handleDOMNode",
        value: function handleDOMNode() {
          var found = this.element && ReactDOM.findDOMNode(this.element);

          if (!found) {
            // If we previously had a dom node then we need to ensure that
            // we remove any existing listeners to avoid memory leaks.
            this.uninstall();
            return;
          }

          if (!this.domEl) {
            this.domEl = found;
            this.detector.listenTo(this.domEl, this.checkIfSizeChanged);
          } else if (this.domEl.isSameNode && !this.domEl.isSameNode(found) || this.domEl !== found) {
            this.uninstall();
            this.domEl = found;
            this.detector.listenTo(this.domEl, this.checkIfSizeChanged);
          }
        }
      }, {
        key: "render",
        value: function render() {
          var disablePlaceholder = withSize.enableSSRBehaviour || withSize.noPlaceholders || noPlaceholder || this.strategy === 'callback';

          var size = _objectSpread2({}, this.state);

          return React__default.createElement(SizeMeRenderWrapper, _extends({
            explicitRef: this.refCallback,
            size: this.strategy === 'callback' ? null : size,
            disablePlaceholder: disablePlaceholder
          }, this.props));
        }
      }]);

      return SizeAwareComponent;
    }(React__default.Component);

    _defineProperty(SizeAwareComponent, "displayName", "SizeMe(".concat(getDisplayName(WrappedComponent), ")"));

    SizeAwareComponent.WrappedComponent = WrappedComponent;
    return SizeAwareComponent;
  };
}
/**
 * Allow SizeMe to run within SSR environments.  This is a "global" behaviour
 * flag that should be set within the initialisation phase of your application.
 *
 * Warning: don't set this flag unless you need to as using it may cause
 * extra render cycles to happen within your components depending on the logic
 * contained within them around the usage of the `size` data.
 *
 * DEPRECATED: Please use the global noPlaceholders
 */


withSize.enableSSRBehaviour = false;
/**
 * Global configuration allowing to disable placeholder rendering for all
 * sizeMe components.
 */

withSize.noPlaceholders = false;

var SizeMe =
/*#__PURE__*/
function (_Component) {
  _inherits(SizeMe, _Component);

  function SizeMe(props) {
    var _this;

    _classCallCheck(this, SizeMe);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(SizeMe).call(this, props));

    _defineProperty(_assertThisInitialized(_this), "createComponent", function (config) {
      _this.SizeAware = withSize(config)(function (_ref) {
        var children = _ref.children;
        return children;
      });
    });

    _defineProperty(_assertThisInitialized(_this), "onSize", function (size) {
      return _this.setState({
        size: size
      });
    });

    var _children = props.children,
        render = props.render,
        sizeMeConfig = _objectWithoutProperties(props, ["children", "render"]);

    _this.createComponent(sizeMeConfig);

    _this.state = {
      size: {
        width: undefined,
        height: undefined
      }
    };
    return _this;
  }

  _createClass(SizeMe, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this$props = this.props,
          prevChildren = _this$props.children,
          prevRender = _this$props.render,
          currentSizeMeConfig = _objectWithoutProperties(_this$props, ["children", "render"]);

      var nextChildren = prevProps.children,
          nextRender = prevProps.render,
          prevSizeMeConfig = _objectWithoutProperties(prevProps, ["children", "render"]);

      if (!isShallowEqual(currentSizeMeConfig, prevSizeMeConfig)) {
        this.createComponent(currentSizeMeConfig);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var SizeAware = this.SizeAware;
      var render = this.props.children || this.props.render;
      return React__default.createElement(SizeAware, {
        onSize: this.onSize
      }, render({
        size: this.state.size
      }));
    }
  }]);

  return SizeMe;
}(React.Component);

_defineProperty(SizeMe, "defaultProps", {
  children: undefined,
  render: undefined
});

withSize.SizeMe = SizeMe;
withSize.withSize = withSize;

module.exports = withSize;
//# sourceMappingURL=react-sizeme.js.map


/***/ }),

/***/ 2241:
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {// This method of obtaining a reference to the global object needs to be
// kept identical to the way it is obtained in runtime.js
var g =
  typeof global === "object" ? global :
  typeof window === "object" ? window :
  typeof self === "object" ? self : this;

// Use `getOwnPropertyNames` because not all browsers support calling
// `hasOwnProperty` on the global `self` object in a worker. See #183.
var hadRuntime = g.regeneratorRuntime &&
  Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime") >= 0;

// Save the old regeneratorRuntime in case it needs to be restored later.
var oldRuntime = hadRuntime && g.regeneratorRuntime;

// Force reevalutation of runtime.js.
g.regeneratorRuntime = undefined;

module.exports = __webpack_require__(350);

if (hadRuntime) {
  // Restore the original runtime.
  g.regeneratorRuntime = oldRuntime;
} else {
  // Remove the global property added by runtime.js.
  try {
    delete g.regeneratorRuntime;
  } catch(e) {
    g.regeneratorRuntime = undefined;
  }
}

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(81)))

/***/ }),

/***/ 2242:
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
	 true ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(global = global || self, factory(global.throttleDebounce = {}));
}(this, (function (exports) { 'use strict';

	/* eslint-disable no-undefined,no-param-reassign,no-shadow */

	/**
	 * Throttle execution of a function. Especially useful for rate limiting
	 * execution of handlers on events like resize and scroll.
	 *
	 * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
	 * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the
	 *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time
	 *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,
	 *                                    the internal counter is reset).
	 * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
	 *                                    to `callback` when the throttled-function is executed.
	 * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),
	 *                                    schedule `callback` to execute after `delay` ms.
	 *
	 * @returns {Function}  A new, throttled, function.
	 */
	function throttle (delay, noTrailing, callback, debounceMode) {
	  /*
	   * After wrapper has stopped being called, this timeout ensures that
	   * `callback` is executed at the proper times in `throttle` and `end`
	   * debounce modes.
	   */
	  var timeoutID;
	  var cancelled = false; // Keep track of the last time `callback` was executed.

	  var lastExec = 0; // Function to clear existing timeout

	  function clearExistingTimeout() {
	    if (timeoutID) {
	      clearTimeout(timeoutID);
	    }
	  } // Function to cancel next exec


	  function cancel() {
	    clearExistingTimeout();
	    cancelled = true;
	  } // `noTrailing` defaults to falsy.


	  if (typeof noTrailing !== 'boolean') {
	    debounceMode = callback;
	    callback = noTrailing;
	    noTrailing = undefined;
	  }
	  /*
	   * The `wrapper` function encapsulates all of the throttling / debouncing
	   * functionality and when executed will limit the rate at which `callback`
	   * is executed.
	   */


	  function wrapper() {
	    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {
	      arguments_[_key] = arguments[_key];
	    }

	    var self = this;
	    var elapsed = Date.now() - lastExec;

	    if (cancelled) {
	      return;
	    } // Execute `callback` and update the `lastExec` timestamp.


	    function exec() {
	      lastExec = Date.now();
	      callback.apply(self, arguments_);
	    }
	    /*
	     * If `debounceMode` is true (at begin) this is used to clear the flag
	     * to allow future `callback` executions.
	     */


	    function clear() {
	      timeoutID = undefined;
	    }

	    if (debounceMode && !timeoutID) {
	      /*
	       * Since `wrapper` is being called for the first time and
	       * `debounceMode` is true (at begin), execute `callback`.
	       */
	      exec();
	    }

	    clearExistingTimeout();

	    if (debounceMode === undefined && elapsed > delay) {
	      /*
	       * In throttle mode, if `delay` time has been exceeded, execute
	       * `callback`.
	       */
	      exec();
	    } else if (noTrailing !== true) {
	      /*
	       * In trailing throttle mode, since `delay` time has not been
	       * exceeded, schedule `callback` to execute `delay` ms after most
	       * recent execution.
	       *
	       * If `debounceMode` is true (at begin), schedule `clear` to execute
	       * after `delay` ms.
	       *
	       * If `debounceMode` is false (at end), schedule `callback` to
	       * execute after `delay` ms.
	       */
	      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);
	    }
	  }

	  wrapper.cancel = cancel; // Return the wrapper function.

	  return wrapper;
	}

	/* eslint-disable no-undefined */
	/**
	 * Debounce execution of a function. Debouncing, unlike throttling,
	 * guarantees that a function is only executed a single time, either at the
	 * very beginning of a series of calls, or at the very end.
	 *
	 * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
	 * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds
	 *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.
	 *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).
	 * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
	 *                                  to `callback` when the debounced-function is executed.
	 *
	 * @returns {Function} A new, debounced function.
	 */

	function debounce (delay, atBegin, callback) {
	  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);
	}

	exports.debounce = debounce;
	exports.throttle = throttle;

	Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=index.umd.js.map


/***/ }),

/***/ 2256:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(1355);

/***/ }),

/***/ 2258:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(279);

/***/ }),

/***/ 2260:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(47);

/***/ }),

/***/ 2263:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(849);

/***/ }),

/***/ 2264:
/***/ (function(module, exports, __webpack_require__) {

module.exports = (__webpack_require__(2))(870);

/***/ })

});
//# sourceMappingURL=5-afa7d4b4bae6ff2924e9.1629092961041.js.map