{"version":3,"sources":["webpack:///./src/containers/worktile/WorkDetail.js","webpack:///./src/components/worktile/MyUpload.js?a69f***","webpack:///./src/components/worktile/TaskSplite.js?f171***","webpack:///./src/components/common/AsyncSelectMuti.js?7752****","webpack:///./src/components/worktile/EditableTable.js?01f4*","webpack:///./src/components/product/EditableTable2.js?99b8***","webpack:///./src/components/worktile/ProgressList.js?70c7**","webpack:///./src/components/worktile/ItemInfoNew.js?82c9*","webpack:///./src/components/worktile/ProposalAttc.js?220b","webpack:///./src/components/worktile/StepInfo.js?d2bc","webpack:///./src/components/worktile/ProjectDesignDetail.js","webpack:///./src/components/worktile/WortileCommonDetail.js"],"names":["mobx","utils","flatData","WorkDetail","Form","create","observer","props","convert2flatData","source","forEach","children","el","item","push","length","treeData2FlatData","unique","data","result","finalResult","i","id","saveProject","params","store","then","res","message","success","child","onChangeVis","callback","projectId","closeReason","projectName","name","state","treeData","JSON","parse","stringify","updateTreeData","getStageTree","error","updateTree","getTree","mes","itemObj","Object","assign","filter","treeType","stageName","proDesign","commonData","toJS","saveNodes","getMyTaskCount","saveStage","updateState","masters","updateCount","type","count","setState","scrollToAnchor","anchorName","anchorElement","document","getElementById","scrollIntoView","block","err","console","log","onRef","ref","saveAttachment","saveAttachments","delNode","param","WorktileDetailStore","autorun","getcommonData","getproDesign","search","location","url","query","projectid","pid","stageid","getUserInfoListByRoleCode","getSts","undefined","emitter","emit","parseInt","obj","map","v","comStates","oldStageId","currentStageId","getStageList","ossData","listData","isShow","backgroundColor","margin","index","React","Component","getBase64","img","reader","FileReader","addEventListener","readAsDataURL","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","format","uid","UploadToOss","Promise","resolve","reject","multipartUpload","catch","MyUpload","handleChange","info","status","fileList","oldFileList","newFileList","originFileObj","host","fileId","fileName","filePath","array","arr","beforeUpload","isJPG","isLt2M","size","onloadend","loading","nextProps","securityToken","multiple","onChange","listType","className","disabled","fontSize","color","EditableContext","createContext","EditableRow","form","EditableFormRow","openNotificationWithIcon","notification","description","placement","EditableCell","editing","userIds","toggleEdit","input","focus","save","record","handleSave","validateFields","values","e","currentTarget","saveTime","Number","totalHours","saveDate","date","dateString","hasOwnProperty","valueOf","saveDate2","onBlur","handleSelChange","val","userId","value","userName","updatePerson","users","disabledStartDate","startValue","endTime","disabledEndDate","endValue","beginTime","renderCell","dataIndex","title","personData","handleDelete","getFieldDecorator","rules","required","initialValue","minHeight","node","numberTostring","minWidth","width","float","editable","restProps","TaskSplite","clearState","dataSource","key","startsWith","handleSaveSubTask","handleAdd","addRecord","newData","row","alreadyHours","findIndex","splice","newRow","collapseOnClick","_this","collapseOnChange","nextContext","onTaskRef","prevProps","prevState","components","body","cell","columnEle","align","render","text","join","columns","col","onCell","textAlign","marginTop","Option","Select","AsyncSelectMuti","handleFocus","variables","fetch","method","headers","response","json","dataMapFunc","itemKey","itemValue","placeholder","style","options","propTypes","PropTypes","object","string","func","runonlyonce","subNumber","isEdit","EditableTable","getKeyByShowRow","saveExpandedRows","handleView","saveData","primaryData","keys","indexOf","expandedKeys","subTaskDis","handleApart","activeObj","activeSub","saveSubTaskRecord","subtasks","delNodeByPid","isSub","warn","isLarge","saveSubTasks","subtask","newSubTasks","onCalac","onPackup","defaultSource","rearSource","Modal","confirm","okText","cancelText","onOk","onCancel","onRow","subTasks","eventE1","addListener","removeListener","isChaijie","bind","height","lineHeight","delayType","position","left","top","transform","content","fontWeight","remark","maxWidth","paddingLeft","actionName","marginLeft","expandedRowRender","rate","EditableTable2","getRecord","attachments","eventE2","taskhaveattt","attcObj","vitem","TextArea","Input","ProgressList","showModal","visible","countDown","secondsToGo","modal","timer","setInterval","update","setTimeout","clearInterval","destroy","handleOk","closeProject","target","isAll","every","computer","boxShadow","padding","display","cursor","indexs","finishTime","right","bottom","minRows","maxRows","TabPane","Tabs","Index","fields","hidden","onCanlc","resetFields","handleSubmit","preventDefault","projectType","productType","toString","formItemLayout","labelCol","xs","span","md","sm","wrapperCol","formItemLayout2","lg","temID","xl","customer","Schemas","bpm","getProductTypeList","Config","address","builtArea","totalCost","builtType","constructionUnit","constructionQualification","partyaUnit","unitQualification","milepost","declarationAwards","awardGrade","buySoftware","usageSituation","background","temporaryDecision","temporaryManagerDesire","temporaryRequirement","temporaryBudgetStandard","temporaryTotalAcceptability","temporaryTotalRange","temporaryBudget","temporaryPriceDesire","temporaryEstimatePrice","temporaryManagersNumber","temporaryWorkersNumber","temporaryBudgetEvaluation","temporaryBeginTime","temporaryEndTime","CustomizedForm","onFieldsChange","changedFields","mapPropsToFields","supplierPrice","createFormField","customerPrice","upload","onValuesChange","_","onSave","proposalLabel","supplierLabel","marginRight","customerLabel","ProposalAttc","handleFormChange","proposalObj","saveProposal","save2","stepName","formtype","labelObj","editStatus","StepInfo","saveStep","currentDataSource","taskdata","currentTaskC","stepChildren","taskcIndex","proposalData","currentProposal","proposalIndex","defaultTree","updatedeCount","option","current","attc","attcIndex","isExp","ProjectDesignDetail","proDesignData","currentData","validateFieldsAndScroll","proDesignStageData","isDesignEdit","deCount","onVisibleChange","addStage","delStage","changeStage","stepObj1","stepObj2","stepObj3","stepObj4","stepObj5","withoutStoreProps","stageList","menu","WortileCommonDetail","currentTree","currentSource","isChange","isMasters","saveData2","rowIndex"],"mappings":"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","file":"js/19-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 项目管理 项目详情\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Breadcrumb,Form, message} from 'antd';\r\nimport url from 'url';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\n\r\nimport ItemInfoNew from \"@/components/worktile/ItemInfoNew\";\r\nimport WortileCommonDetail from \"@/components/worktile/WortileCommonDetail\";\r\nimport ProjectDesignDetail from \"@/components/worktile/ProjectDesignDetail\";\r\nimport ProgressList from '@/components/worktile/ProgressList';\r\nimport * as utils from \"@/utils/utils\";\r\n\r\nlet flatData = []; // 存放数组\r\n\r\n@Form.create()\r\n@inject('WorktileDetailStore')\r\n@observer\r\nexport default class WorkDetail extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.WorktileDetailStore;\r\n\t\tthis.state = {count: 2};\r\n        mobx.autorun(() => {\r\n            this.store.commonData = this.store.getcommonData;\r\n            this.store.proDesign = this.store.getproDesign;\r\n        });\r\n    }\r\n\r\n\tcomponentWillMount() {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        let search = this.props.location.search;\r\n        const {projectid, id, pid, stageid} = url.parse(search, true).query;\r\n        this.store.projectId = projectid;\r\n        // 获取人员\r\n        this.store.getUserInfoListByRoleCode();\r\n        // 获取大文件上传sts\r\n        this.store.getSts();\r\n        //更新我的任务数\r\n        this.store.getMyTaskCount();\r\n\t\tif(projectid!=null){\r\n\t\t\tthis.store.getTree(projectid).then((mes) => {\r\n\t\t\t    this.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t\t// 更新项目信息\r\n\t\t\t\tthis.store.itemObj=Object.assign({}, mes&&mes.children.filter((item)=>item.treeType==\"stage\"&&item.stageName==\"项目信息\")[0]);\r\n\t\t\t\t// 方案设计数据\r\n\t\t\t\tlet proDesign=Object.assign({}, mes&&mes.children.filter((item)=>item.treeType==\"stage\"&&item.stageName==\"方案设计\")[0]);\r\n\t\t\t\t// 过滤项目信息数据\r\n\t\t\t\tthis.store.commonData=Object.assign([], mes&&mes.children.filter((item)=>item.treeType==\"stage\"&&item.stageName!==\"项目信息\"&&item.stageName!==\"方案设计\"));\r\n                flatData=[]\r\n\t\t\t\t// 将项目信息转换为数组\r\n                this.treeData2FlatData(mobx.toJS(this.store.itemObj));\r\n                this.store.projectName = flatData.filter((item)=>{ return item.treeType==\"projectinfo\"})[0][\"name\"];\r\n                this.store.state = flatData.filter((item)=>{ return item.treeType==\"projectinfo\"})[0][\"state\"];\r\n                this.store.closeReason = flatData.filter((item)=>{ return item.treeType==\"projectinfo\"})[0][\"closeReason\"];\r\n                if(pid!==undefined&&id!==undefined){\r\n                    emitter.emit(\"handletaskid\",  {\"pid\":pid, \"id\":id});\r\n                }else if (id!==undefined) {  // 我的任务跳转定位\r\n                    this.scrollToAnchor(id);\r\n                }else if(stageid!==undefined){\r\n                    this.scrollToAnchor(`items${parseInt(stageid)-1}`);\r\n                }\r\n                // 维护状态公共组件\r\n                let commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n                let obj = {};\r\n                commonData.map((v)=>{\r\n                    obj[v.id] = true;\r\n                });\r\n                this.store.comStates=Object.assign({}, obj);\r\n\r\n                // 方案设计statgeId\r\n\t\t\t\tthis.store.proDesign = proDesign;\r\n\t\t\t\tthis.store.oldStageId = proDesign.id;\r\n\t\t\t\tthis.store.currentStageId = proDesign.id;\r\n\t\t\t\t// 方案设计stage列表\r\n\t\t\t\tthis.store.getStageList();\r\n\t\t\t\t// 初始化获取步骤进度信息\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n    // 递归函数\r\n    convert2flatData = (source)=>{\r\n        source.forEach(el=>{\r\n            let {children, ...item} = el;\r\n            flatData.push(item);\r\n            el.children && el.children.length>0 ? this.convert2flatData(el.children) : \"\"        // 子级递归\r\n        })\r\n    }\r\n\r\n    treeData2FlatData = (source) => {\r\n        let {children, ...item} = source;\r\n        flatData.push(item);\r\n        this.convert2flatData(children);\r\n    }\r\n\r\n    unique=(data)=>{\r\n        let result = {};\r\n        let finalResult=[];\r\n        for(let i=0;i<data.length;i++){\r\n            result[data[i].id]=data[i];\r\n        }\r\n        for(let item in result){\r\n            finalResult.push(result[item])\r\n        }\r\n        return finalResult;\r\n    }\r\n\r\n\t// 保存项目信息\r\n\tsaveProject = (params) => {\r\n\t    this.store.saveProject(params)\r\n\t\t.then((res) => {\r\n\t\t\tif (res.id !== null) {\r\n\t\t\t\tmessage.success(\"保存成功\")\r\n                this.child.onChangeVis();\r\n                this.child.callback(\"1\");\r\n\t\t\t\tthis.store.projectId = res.id;\r\n                this.store.closeReason = res.closeReason;\r\n                this.store.projectName = res.name;\r\n                this.store.state = res.state;\r\n                // 更新tree\r\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                this.store.treeData = utils.updateTreeData(treeData, \"update\", res);\r\n                // 更新步骤\r\n                this.store.getStageTree();\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// updateTree\r\n    updateTree = () => {\r\n\t    const projectId = this.store.projectId;\r\n        this.store.getTree(projectId).then((mes) => {\r\n            // 项目信息 数据\r\n            this.store.itemObj=Object.assign({}, mes&&mes.children.filter((item)=>item.treeType==\"stage\"&&item.stageName==\"项目信息\")[0]);\r\n            // 方案设计 数据\r\n            let proDesign=Object.assign({}, mes&&mes.children.filter((item)=>item.treeType==\"stage\"&&item.stageName==\"方案设计\")[0]);\r\n            //（招投标、合同签订、实施过程、交付验收、发票验收）数据\r\n            let commonData=Object.assign([], mes&&mes.children.filter((item)=>item.treeType==\"stage\"&&item.stageName!==\"项目信息\"&&item.stageName!==\"方案设计\"));\r\n            flatData=[]\r\n            // 将项目信息转换为数组\r\n            this.treeData2FlatData(mobx.toJS(this.store.itemObj));\r\n            this.store.projectName = flatData.filter((item)=>{ return item.treeType==\"projectinfo\"})[0][\"name\"];\r\n            this.store.state = flatData.filter((item)=>{ return item.treeType==\"projectinfo\"})[0][\"state\"];\r\n            this.store.closeReason = flatData.filter((item)=>{ return item.treeType==\"projectinfo\"})[0][\"closeReason\"];\r\n            // 编辑缓存\r\n            // Object.keys(editingData).map((item)=>{\r\n            //     let newData = editingData[item];\r\n            //     if (newData[\"id\"]==\"\") {\r\n            //         const transPid = (source)=>{\r\n            //             source.forEach(el=>{\r\n            //                 if (el.id==newData[\"pid\"]) {\r\n            //                     el.children.push(Object.assign({}, newData));\r\n            //                 }\r\n            //                 el.children && el.children.length>0 ? transPid(el.children) : \"\"        // 子级递归\r\n            //             })\r\n            //         }\r\n            //         transPid(commonData);\r\n            //     } else {\r\n            //         const trans = (source)=>{\r\n            //              source.forEach((el,elIndex)=>{\r\n            //                 if (el.id==newData[\"id\"]) {\r\n            //                     el = Object.assign({}, el, newData);\r\n            //                     source[elIndex] = el;\r\n            //                 }\r\n            //                 el.children && el.children.length>0 ? trans(el.children) : \"\"        // 子级递归\r\n            //             })\r\n            //             return source;\r\n            //         }\r\n            //         const dataSource = trans(commonData);\r\n            //         commonData = dataSource;\r\n            //\r\n            //         const designSource = trans(proDesign.children);\r\n            //         proDesign = Object.assign(proDesign, {children: designSource});\r\n            //     }\r\n            // });\r\n            this.store.commonData = commonData;\r\n            this.store.proDesign = proDesign;\r\n        });\r\n    }\r\n\r\n\t// 保存节点\r\n\tsaveNodes = (params) => {\r\n\t\tthis.store.saveNodes(params).then((res)=>{\r\n           if (res) {\r\n           \tmessage.success(\"保存成功\")\r\n            // 更新tree\r\n            let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n            this.store.treeData = utils.updateTreeData(treeData, \"update\", res);\r\n            // 更新步骤\r\n            this.store.getStageTree();\r\n            //更新我的任务数\r\n            this.store.getMyTaskCount();\r\n           } else {\r\n\t           message.error(\"保存失败\")\r\n           }\r\n        });\r\n    }\r\n\r\n    // 保存阶段\r\n\tsaveStage  = (params) => {\r\n\t\tif(params&& params.projectId!=null)this.store.projectId = params['projectId']\r\n\t\tthis.store.saveStage(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存阶段成功\")\r\n                // 更新步骤\r\n                this.store.getStageTree();\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存阶段失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (params) => {\r\n        this.store.proDesign.masters = Object.assign([], params);\r\n\t}\r\n\r\n\t// 更新子组件状态\r\n\tupdateCount = (type, count) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: count\r\n\t\t});\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n            try {\r\n                let anchorElement = document.getElementById(anchorName);\r\n                if (anchorElement) {\r\n                    anchorElement.scrollIntoView({block: 'center'});\r\n                }\r\n            } catch(err) {\r\n                console.log(\"scrollToAnchorERR=>\"+err);\r\n                // run plan B!\r\n            }\r\n\t\t}\r\n\t}\r\n\r\n    onRef = (ref) => {\r\n        this.child = ref\r\n    }\r\n\r\n    // 保存附件\r\n    saveAttachment = (params) => {\r\n        this.store.saveAttachments(params)\r\n            .then((res)=>{\r\n                if (res) {\r\n                    message.success(\"附件保存成功\")\r\n                    // 更新tree\r\n                    let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                    this.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n                } else {\r\n                    message.error(\"附件保存失败\")\r\n                }\r\n            });\r\n    }\r\n\r\n    // 删除附件\r\n    delNode = (param) => {\r\n        this.store.delNode(param)\r\n            .then((res)=>{\r\n                if (res) {\r\n                    message.success(\"附件删除成功\")\r\n                } else {\r\n                    message.error(\"附件删除失败\")\r\n                }\r\n            });\r\n    }\r\n\r\n\trender() {\r\n        const {ossData, comStates, listData, itemObj, commonData, proDesign,  projectId, projectName} = this.store;\r\n\t\tconst {count} = this.state;\r\n\t\tlet isShow = projectId==null||projectId==\"\"?true:false;\r\n\t\treturn (\r\n\t\t\t  <div>\r\n                  <div className=\"con_bottom\" style={{backgroundColor: '#FFF'}}>\r\n                      <Breadcrumb separator=\">\" style={{margin: '0'}}>\r\n                          <Breadcrumb.Item href={\"#/bpm/progresslist\"}>项目看板</Breadcrumb.Item>\r\n                          <Breadcrumb.Item>{projectName||\"项目名称\"}</Breadcrumb.Item>\r\n                      </Breadcrumb>\r\n                  </div>\r\n\t\t\t\t{/*步骤条*/}\r\n                 <ProgressList\r\n                      listData={mobx.toJS(listData)}\r\n                      store={this.store}\r\n                      scrollToAnchor={this.scrollToAnchor}\r\n                      updateTree={this.updateTree}\r\n                      isShow={isShow}\r\n                 />\r\n\t\t\t\t{/*项目信息*/}\r\n\t\t\t\t  <ItemInfoNew\r\n\t\t\t\t\t  itemObj={mobx.toJS(itemObj)}\r\n\t\t\t\t\t  saveProject={this.saveProject}\r\n\t\t\t\t\t  projectId={projectId}\r\n\t\t\t\t\t  projectType={1}\r\n\t\t\t\t\t  onRef={this.onRef}\r\n\t\t\t\t\t  state={this.store.state}\r\n\t\t\t\t\t  saveAttachment={this.saveAttachment}\r\n\t\t\t\t\t  delNode={this.delNode}\r\n\t\t\t\t\t  ossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t  hidden={true}\r\n\t\t\t\t\t  count={count}\r\n\t\t\t\t\t  updateCount={this.updateCount}\r\n\t\t\t\t  />\r\n                {/*方案设计*/}\r\n\t\t\t\t<ProjectDesignDetail\r\n\t\t\t\t\tproDesign={mobx.toJS(proDesign)}\r\n\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\tsaveStage={this.saveStage}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n                    saveAttachment={this.saveAttachment}\r\n                    delNode={this.delNode}\r\n                    store={this.store}\r\n                    oss={mobx.toJS(ossData)}\r\n                />\r\n\t\t\t\t{/*招投标、合同签订、实施过程、交付验收、发票收款*/}\r\n\t\t\t\t{mobx.toJS(commonData).length>0&&mobx.toJS(commonData).map((item, index)=>{\r\n\t\t\t\t\treturn (<WortileCommonDetail\r\n\t\t\t\t\t\t  key={'card_'+index}\r\n\t\t\t\t\t\t  id={item.id}\r\n                          rowIndex={\"items\"+(index+2)}\r\n                          store={this.store}\r\n                          treeData={item}\r\n\t\t\t\t\t\t  saveNodes={this.saveNodes}\r\n                          saveAttachment={this.saveAttachment}\r\n                          delNode={this.delNode}\r\n                          disabled={mobx.toJS(comStates)[item.id]}\r\n                          state={this.store.state}\r\n                          oss={mobx.toJS(ossData)}\r\n                    />)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/worktile/WorkDetail.js","/*\r\n* 附件组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\n\r\nfunction getBase64(img, callback) {\r\n\tconst reader = new FileReader();\r\n\treader.addEventListener('load', () => callback(reader.result));\r\n\treader.readAsDataURL(img);\r\n}\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n\t\t\t\taccess_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n\t\t\t\tstsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.props.ossData) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: this.props.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: this.props.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: this.props.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet arr = [];\r\n\t\t\tarray.length && array.map((item, index) => {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\tpid: this.props.pid,\r\n\t\t\t\t\tprojectId: this.props.projectId,\r\n\t\t\t\t\tid: item.id\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tthis.props.saveAttachment(arr);\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\tlet id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\tthis.props.delNode(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tfileList: [...oldFileList, ...newFileList]\r\n\t\t});\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\tif (!true) {\r\n\t\t\tmessage.error('You can only upload JPG file!');\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fileList} = this.state;\r\n\t\tconst props = {\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: this.props.multiple == undefined ? true : this.props.multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tlistType: 'text',\r\n\t\t\tclassName: 'upload-list-inline',\r\n\t\t\tdisabled: this.props.disabled,\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t{fileList.length >= 1 && this.props.multiple == false ? null :\r\n\t\t\t\t\t<Icon style={{fontSize: '25px', color: '#53B3E5'}} type=\"cloud-upload\"/>}\r\n\t\t\t</Upload>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/MyUpload.js","/*\r\n* 任务拆分组件\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport * as mobx from \"mobx\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tInputNumber,\r\n\tnotification,\r\n\tCard,\r\n\tPopconfirm,\r\n\tForm,\r\n\tIcon,\r\n\tRow,\r\n\tCol,\r\n\tSelect,\r\n\tmessage,\r\n\tDatePicker\r\n} from 'antd';\r\nimport * as utils from \"@/utils/utils\";\r\nimport {v4 as uuidv4} from \"uuid\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport moment from 'moment';\r\n\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\nconst openNotificationWithIcon = type => {\r\n\tnotification[type]({\r\n\t\tmessage: '已用工时不能大于预估工时',\r\n\t\tdescription:\r\n\t\t\t'若大于，请先调整预估工时',\r\n\t\tplacement: 'bottomRight'\r\n\t});\r\n};\r\n\r\n// 可编辑表格\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true,//false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t// 已用工时\r\n\tsaveTime = (e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e!==null&&e!==\"\") {\r\n\t\t\t    if (Number(e)>Number(values.totalHours)) {\r\n\t\t\t\t\topenNotificationWithIcon('warning');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\">\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'name') {  //子任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'alreadyHours') {  // 已用工时\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t//onPressEnter={this.save}\r\n\t\t\t\t\t\t\tonChange={this.saveTime}\r\n\t\t\t\t\t\t\tonBlur={this.saveTime}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}小时\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w clearfix\" style={{minWidth: '155px'}}>\r\n\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\tminWidth: '120px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '25px',\r\n\t\t\t\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tdefaultValue={record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'totalHours') {  // 总工时\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}小时\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n/*\r\n* 拆分子任务\r\n* */\r\n@observer\r\nclass TaskSplite extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 子任务的数据源\r\n\t\t\tcount: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\t/*\r\n\t\t* subtask 子任务 nextProps.dataSource\r\n\t\t* */\r\n\t\tif (JSON.stringify(nextProps.dataSource) != JSON.stringify(this.props.dataSource)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource === null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t}, () => {\r\n\t\t\t\tnextProps.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t});\r\n\t\tthis.props.onTaskRef(this)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\r\n\t}\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: []\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tconst {count, dataSource} = this.state;\r\n\t\tconst {addRecord} = this.props;\r\n\t\tconst newData = Object.assign(addRecord, {\"key\": count, id: \"!\" + uuidv4()});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t\t// console.log(this.state.dataSource, count, '新增')\r\n\t\t});\r\n\t};\r\n\r\n\thandleSave = row => {\r\n\t\t// 已用工时不能大于总工时\r\n\t\tif (Number(row.alreadyHours)>Number(row.totalHours)) {\r\n\t\t\t//openNotificationWithIcon('warning');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\tcollapseOnClick = () => {\r\n\t\tlet _this = this;\r\n\t\t_this.props.collapseOnChange();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务名称',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: 'center',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\trender: (text,) => (<span>{text}</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null ? \"\" : text.map(item => item.userName).join(\"、\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '预估工时',\r\n\t\t\t\tdataIndex: 'totalHours',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => (<span>{text}小时</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '已用工时',\r\n\t\t\t\tdataIndex: 'alreadyHours',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text, record) => (<span id={record.id}>{text}小时</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => (<span>{text}</span>)\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Card bordered style={{width: '100%'}}>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t<Icon className={disabled ? \"hidden\" : \"\"} onClick={this.handleAdd}\r\n\t\t\t\t      style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}} type=\"plus-circle\"/>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span={24} style={{textAlign: 'right', marginTop: '10px'}}>\r\n\t\t\t\t\t\t<Icon onClick={this.collapseOnClick}\r\n\t\t\t\t\t\t      title=\"收起\"\r\n\t\t\t\t\t\t      type=\"double-right\"\r\n\t\t\t\t\t\t      className=\"pointer\"\r\n\t\t\t\t\t\t      style={{color: '#808080'}}\r\n\t\t\t\t\t\t      rotate={-90}/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TaskSplite;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/TaskSplite.js","\n/*\n* 用途：多选组件参数说明\n* 作者：dangw@glodon.com\n*\n  placeholder: 占位符\n  type：Grapbql返回的数据type\n  variables：Grapbqls请求的参数变量\n  query：Grapbqls请求的参数变量\n  url：Grapbqls请求的参数变量\n  onChange：组件接受函数\n  value：组件接受值\n  itemKey: Select组件Option的参数key\n  itemValue: Select组件Option的参数value\n  body: Grapbqls返回值取值是否是含body\n*\n* */\nimport React from 'react';\nimport {Select} from 'antd';\nimport PropTypes from 'prop-types';\n\nconst Option = Select.Option;\n\nexport default class AsyncSelectMuti extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      value: props.value || [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if ('value' in nextProps && this.props.value !== nextProps.value) {\n      this.setState({\n        value: nextProps.value\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props.url) {\n      return;\n    }\n    //组件初始化\n    this.handleFocus();\n  }\n\n  handleChange = (val, e) => {\n    let {onChange} = this.props;\n    if (onChange) {\n      onChange(val, e);\n    }\n  }\n\n  handleFocus = () => {\n    const {type,variables,query,url,body}=this.props;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      },\n      body: JSON.stringify({\n        query: query,\n        variables: variables\n      })\n    })\n    .then(response => response.json())\n    .then(json => {\n      if (json.data!==null&&json.data[type]!==null) { // 容错\n        let data;\n        if (body!==undefined) {\n          data = json.data[type][\"body\"];\n        } else {\n          data = json.data[type];\n        }\n        if (this.props.dataMapFunc) {\n          data = data.map(item => this.props.dataMapFunc(item));\n        }\n        this.setState({\n          data\n        });\n      } else {\n        this.setState({\n          data: []\n        });\n      }\n    });\n  }\n\n  render() {\n    const {data} = this.state;\n    const {value,itemKey,itemValue,placeholder,style,disabled,ref,onBlur}=this.props;\n    const options = data.length&&data.map((item, index)=> <Option key={index} value={item[itemKey]} val={item}>{item[itemValue]}</Option>);\n\n    return (\n      <Select\n        mode=\"multiple\"\n        placeholder={placeholder||\"请选择\"}\n        style={style}\n        value={value}\n        onChange={this.handleChange}\n        onFocus={this.handleFocus}\n        onBlur={onBlur}\n        disabled={disabled}\n        ref={ref}\n      >\n        {options}\n      </Select>\n    );\n  }\n}\n\nAsyncSelectMuti.propTypes = {\n  style: PropTypes.object,\n  placeholder: PropTypes.string,\n  value: PropTypes.string,\n  url: PropTypes.string,\n  dataMapFunc: PropTypes.func,\n  onChange: PropTypes.func,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/AsyncSelectMuti.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tSelect,\r\n\tmessage,\r\n\tInputNumber,\r\n\tnotification,\r\n\tPopover\r\n} from 'antd';\r\nimport TaskSplite from './TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\n\r\nlet runonlyonce = false;\r\nconst {Option} = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\t//onChange={this.save}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 完成比例\r\n\t\t\tconst subNumber = record.children == null || record.children.length == 0 ? 0 : record.children.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": nextProps.pid,\r\n\t\t\t\t\t\"projectId\": nextProps.projectId,\r\n\t\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\t\"masters\": [],\r\n\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\t\"remark\": \"\"\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": this.props.pid,\r\n\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\t\t/*if(true){ // 暂时控制不住多次事件监听\r\n\t\t\trunonlyonce = true;\r\n\t\t\tconsole.log('计')\r\n\r\n\t\t}*/\r\n\t\tthis.eventE1 = emitter.addListener('handletaskid', (obj) => {\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount() {\r\n\t\temitter.removeListener(this.eventE1)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\" + err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\tconst newData = Object.assign(primaryData, {key: count, id: \"!\" + uuidv4()});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({\r\n\t\t\texpandedKeys: keys\r\n\t\t}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n\thandleApart = (record) => {\r\n\t\t// if (key==null||key==\"\") {\r\n\t\t//    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t\t//    return false;\r\n\t\t// }\r\n\t\t// 记录当前主任务没有改动的数据\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({}, record),\r\n\t\t\tactiveSub: Object.assign([], record.children == null ? [] : record.children),\r\n\t\t\tsubTaskDis: false, // 可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record.id);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t\t// 如果子任务为空，保存是调用新街口\r\n\t\tlet length = this.state.subtasks.length\r\n\t\tif (length == 0) {\r\n\t\t\tthis.store.delNodeByPid({pid: id})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 子任务名称和负责人必填\r\n\t\t\tconst subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n\t\t\tconst isSub = subtasks.filter((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.masters == null || item.masters.length == 0\r\n\t\t\t})\r\n\t\t\tif (isSub.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"请您填写任务名称和负责人\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst isLarge = subtasks.filter((item) => {\r\n\t\t\t\treturn Number(item.alreadyHours) > Number(item.totalHours)\r\n\t\t\t})\r\n\t\t\tif (isLarge.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"已用工时不能大于预估工时\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 判断是新增的主任务进行拆解的\r\n\t\t\tif (id.startsWith(\"!\")) {\r\n\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t} else {\r\n\t\t\t\t// 原有\r\n\t\t\t\tthis.store.saveSubTasks(this.state.subtasks)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res && res.length > 0) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t\tthis.subtask.clearState();\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks: newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n\tonCalac = (key) => {\r\n\t\tthis.saveExpandedRows(key);\r\n\t\tthis.store.isEdit = false;\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n\t\tthis.subtask.clearState();\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({})\r\n\t\t});\r\n\t}\r\n\r\n\t// 折叠收起\r\n\tonPackup = (record) => {\r\n\t\tlet _this = this;\r\n\t\tconst defaultSource = _this.state.activeSub.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours,\r\n\t\t\t}\r\n\t\t});  // 拆解前默认数据\r\n\t\tconst rearSource = _this.state.subtasks.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解后内容变动数据\r\n\t\t// 当前拆解数据内容变化，给提示是否保存\r\n\t\tif (JSON.stringify(defaultSource) == JSON.stringify(rearSource)) {\r\n\t\t\t// 内容没有变动，直接取消\r\n\t\t\t_this.onCalac(record.id);\r\n\t\t} else {\r\n\t\t\tModal.confirm({\r\n\t\t\t\ttitle: '是否对所更改内容保存',\r\n\t\t\t\tokText: '保存',\r\n\t\t\t\tcancelText: '不保存',\r\n\t\t\t\tonOk() {\r\n\t\t\t\t\t_this.saveSubTaskRecord(record.id);\r\n\t\t\t\t},\r\n\t\t\t\tonCancel() {\r\n\t\t\t\t\t_this.onCalac(record.id);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonTaskRef = (ref) => {\r\n\t\tthis.subtask = ref\r\n\t}\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource, expandedKeys, subTaskDis} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length > 0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\t// id={`/?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t<Icon className={record.delayType !== 0 && disabled ? \"\" : \"hidden\"}\r\n\t\t\t\t\t\t      style={{\r\n\t\t\t\t\t\t\t      fontSize: '18px',\r\n\t\t\t\t\t\t\t      position: 'absolute',\r\n\t\t\t\t\t\t\t      left: '5px',\r\n\t\t\t\t\t\t\t      color: 'red',\r\n\t\t\t\t\t\t\t      top: '50%',\r\n\t\t\t\t\t\t\t      transform: 'translateY(-50%)'\r\n\t\t\t\t\t\t      }} type=\"exclamation-circle\"/>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null ? \"\" : text.map(item => item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\t>{text}%</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t<p><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t           key={'task_' + index}><span\r\n\t\t\t\t\t\t\t\t\tstyle={{fontWeight: '700', color: '#333'}}>备注{index + 1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t\t\t<span><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_' + index}\r\n\t\t\t\t\t\t\t\t\t\t              className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px', fontWeight: '700', color: '#333'}}>\r\n\t\t                                  备注{index + 1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {\r\n\t\t\t\t\t\treturn item == record.id\r\n\t\t\t\t\t}).length > 0 && !subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\t\t\t\tif (disabled) {  // 详情态\r\n\t\t\t\t\t\t\tif (subNumber == 0) { // 子任务数等于0\r\n\t\t\t\t\t\t\t\treturn <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t\t\t\t\t\t\t//return <span>{subNumber}</span>\r\n\t\t\t\t\t\t\t} else {  // 子任务数大于0\r\n\t\t\t\t\t\t\t\treturn (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\"\r\n\t                                      style={{marginLeft: \"10px\"}} title=\"编辑\" type=\"edit\"/>\r\n                                </span>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {  // 编辑态\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<a onClick={this.handleApart.bind(this, record)}>{subNumber == 0 ? actionName : subNumber}</a>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord = {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id || \"\",\r\n\t\t\t\tprojectId: record.projectId || \"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters == null ? [] : record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\taddRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie && !disabled ? this.onPackup(record) : this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n\t\t\t\t\tdisabled={subTaskDis}\r\n\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\tonTaskRef={this.onTaskRef}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/EditableTable.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {Table, Input, DatePicker, Popconfirm, Form, Modal, Icon, Select, message, InputNumber,\tPopover} from 'antd';\r\nimport TaskSplite from '@/components/worktile/TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport MyUpload from \"@/components/worktile/MyUpload\";\r\n\r\nlet runonlyonce =false;\r\nconst { Option } = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            //this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n            delete values[\"masters\"];\r\n            handleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] =  moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] =  moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\t const { record, handleSave } = this.props;\r\n\t\t let data = {}\r\n         let userIds;\r\n         if (e.length) {\r\n            userIds = e.map((item)=>{return {userId: item.props.value, userName: item.props.children}})\r\n         } else {\r\n            userIds  = []\r\n         }\r\n\t\t data[\"masters\"] = userIds;\r\n\t\t handleSave({ ...record, ...data });\r\n\t}\r\n\r\n\t//\r\n    updatePerson = (users) => {\r\n        const { record, handleSave } = this.props;\r\n        let data = {}\r\n        let userIds;\r\n        if (users.length) {\r\n            userIds = users\r\n        } else {\r\n            userIds  = []\r\n        }\r\n        data[\"masters\"] = userIds;\r\n        handleSave({ ...record, ...data });\r\n    }\r\n\tonBlur=()=>{\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title,personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{ margin: 0 }}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n                        <div className=\"w clearfix\">\r\n                            <Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n                                <Icon\r\n                                    style={{\r\n                                        width: '35px',\r\n                                        color: '#F17E7E',\r\n                                        fontSize: '25px',\r\n                                        float: 'left'\r\n                                    }}\r\n                                    type=\"minus-circle\"/>\r\n                            </Popconfirm>\r\n                            <Input\r\n                                style={{\r\n                                    float: 'right',\r\n                                    width: 'calc(100% - 35px)',\r\n                                }}\r\n                                defaultValue={record[dataIndex]}\r\n                                ref={node => (this.input = node)}\r\n                                //onChange={this.save}\r\n                                onPressEnter={this.save}\r\n                                onBlur={this.save}\r\n                            />\r\n                        </div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t): (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n                                width: '35px',\r\n                                color: '#F17E7E',\r\n                                fontSize: '22px',\r\n\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n                            width: 'calc(100% - 35px)',\r\n                            minHeight: '31px'}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex].length==0?[]:record[dataIndex].length>0&&record[dataIndex].map((item)=>{return item.userId}),\r\n\t\t\t\t}) (\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n                        <PersonAdd2\r\n                            data={record[dataIndex]==null||record[dataIndex].length==0?[]:record[dataIndex].length>0&&record[dataIndex]}\r\n                            updatePerson={this.updatePerson}\r\n                            disabled={!editing}\r\n                        />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>):(<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n                    {children}\r\n                    </div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex]==null||record[dataIndex]==0?\"\":moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex]==0?\"\": moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>): (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{ minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n            // 日期时间戳转换字符串\r\n            const numberTostring = record[dataIndex]==null||record[dataIndex]==0?\"\":moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex]==0?\"\": moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n                        onChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>): (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{ minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n                    {children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'rate') {  // 完成比例\r\n\t\t\tlet subTasks = record.children!=null&&record.children.filter((item)=>{return item.treeType==='subtask'})\r\n\t\t\tconst subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n            const isEdit = subNumber>0?true:false;\r\n            return editing ? (<Form.Item style={{ margin: 0 }}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex]==0?\"\":record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n                            disabled={isEdit}\r\n                            min={0}\r\n                            max={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t): (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n                    style={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}  else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n                    <EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable2 extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n            count: 0,        // table的key\r\n            primaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t            \"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t            \"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks:[],\r\n            activeObj: {}, // 记录拆解前主任务数据\r\n            activeSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource!=this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n                dataSource: nextProps.dataSource==null||nextProps.dataSource.length==0?[]:nextProps.dataSource.map((item, index)=>{\r\n                        return Object.assign(item, {key: index})}),\r\n                count: nextProps.dataSource==null||nextProps.dataSource.length==0?0:nextProps.dataSource.length,\r\n                primaryData: Object.assign({}, {\r\n                    \"id\": \"\",\r\n                    \"pid\": nextProps.pid,\r\n                    \"projectId\": nextProps.projectId,\r\n                    \"treeType\": \"task\",\r\n                    \"masters\": [],\r\n                    \"children\": null,\r\n                    \"name\": \"\",\r\n                    \"rate\": 0,\r\n                    \"nodeCount\": null,\r\n\t                \"beginTime\": null,\r\n                    \"endTime\": null,\r\n                    \"orders\": 0,\r\n\t                \"remark\": \"\"\r\n                }) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        this.setState({\r\n            dataSource: this.props.dataSource==null||this.props.dataSource.length==0?[]:this.props.dataSource.map((item, index)=>{\r\n                return Object.assign(item, {\"key\": index})\r\n            }),\r\n            count: this.props.dataSource===null||this.props.dataSource.length==0?0:this.props.dataSource.length,\r\n            primaryData: Object.assign({}, {\r\n                \"id\": \"\",\r\n                \"pid\": this.props.pid,\r\n                \"projectId\": this.props.projectId,\r\n                \"treeType\": \"task\",\r\n                \"masters\": [],\r\n                \"children\": null,\r\n                \"name\": \"\",\r\n                \"rate\": 0,\r\n                \"nodeCount\": null,\r\n\t            \"beginTime\": null,\r\n                \"endTime\":null,\r\n                \"orders\": 0,\r\n\t            \"remark\": \"\"\r\n            }), // 新增任务数据\r\n            expandedKeys: [], // 折叠\r\n            keys: [], // 折叠\r\n            subtasks:[],\r\n\t\t});\r\n\t\t/*if(true){ // 暂时控制不住多次事件监听\r\n\t\t\trunonlyonce = true;\r\n\t\t\tthis.emitterEvent = emitter.addListener('handletaskid', (obj)=>{\r\n\t\t\t\tconsole.log('触发监听')\r\n\t\t\t\tthis.getKeyByShowRow(obj.pid, obj.id);\r\n\t\t   })\r\n\t\t}*/\r\n\t\tthis.eventE2 = emitter.addListener('handletaskid', (obj)=>{\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount(){\r\n\t\temitter.removeListener(this.eventE2)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n            try {\r\n                let anchorElement = document.getElementById(anchorName);\r\n\t            if (anchorElement) {\r\n\t                anchorElement.scrollIntoView({block: 'center'});\r\n                }\r\n            } catch(err) {\r\n                console.log(\"scrollToAnchorERR=>\"+err);\r\n            }\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t    const {id, key} = record;\r\n\t    if (id!==\"\"&&id!==null&&!id.startsWith(\"!\")) { // 删除原来已有的\r\n\t        this.store.delNode(id).then((res)=>{\r\n                if (res) {\r\n                    message.success(\"删除成功\");\r\n                    const dataSource = [...this.state.dataSource];\r\n                    this.setState({\r\n                        dataSource: dataSource.filter(item => item.key !== key)\r\n                    }, ()=>{\r\n                        this.props.saveData(this.state.dataSource);\r\n                        // 更新tree\r\n                        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                        this.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n                    });\r\n                    // 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n                } else {\r\n                    message.error(\"删除失败\")\r\n                }\r\n            });\r\n        } else { // 删除新增的\r\n            const dataSource = [...this.state.dataSource];\r\n            this.setState({\r\n                dataSource: dataSource.filter(item => item.key !== key)\r\n            }, ()=>{\r\n                this.props.saveData(this.state.dataSource, key);\r\n                // 更新tree\r\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                this.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n            });\r\n        }\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n        const newData = Object.assign(primaryData, {key: count, id: \"!\"+uuidv4()});\r\n        //console.log(newData, '新增')\r\n        this.setState({\r\n            dataSource: [...dataSource, newData],\r\n            count: count + 1,\r\n        }, ()=>{\r\n            this.props.saveData(this.state.dataSource);\r\n            // 更新tree\r\n            let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n            this.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n        });\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n        const newData = [...this.state.dataSource];\r\n        const index = newData.findIndex(item => row.key === item.key);\r\n        const item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, ()=>{\r\n            // 更新保存数据\r\n            this.props.saveData(this.state.dataSource);\r\n            let newRow = JSON.parse(JSON.stringify({...row}));\r\n            // 更新tree\r\n            let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n            this.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n        });\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t    let _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n        _this.setState({expandedKeys: keys},()=>{\r\n           let obj = {[_this.props.id]: keys};\r\n           let expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n           _this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n        });\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, ()=>{\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n    handleApart = (record) => {\r\n        // if (key==null||key==\"\") {\r\n\t     //    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t     //    return false;\r\n        // }\r\n        // 记录当前主任务没有改动的数据\r\n        this.setState({\r\n            activeObj: Object.assign({}, record),\r\n            activeSub: Object.assign([], record.children==null?[]:record.children),\r\n\t        subTaskDis: false, // 可编辑\r\n        }, ()=>{\r\n            this.saveExpandedRows(record.id);\r\n        });\r\n    }\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t    // 如果子任务为空，保存是调用新街口\r\n       let length = this.state.subtasks.length\r\n\t    if (length==0) {\r\n           this.store.delNodeByPid({pid:id})\r\n               .then((res)=>{\r\n                  if (res) {\r\n                      // 更新树\r\n                      this.props.updateTree();\r\n                      // 更新步骤\r\n\t\t\t\t\t  this.store.getStageTree();\r\n\t\t\t\t\t  //更新我的任务数\r\n\t\t\t\t\t  this.store.getMyTaskCount();\r\n                      message.success(\"保存成功\")\r\n                      this.saveExpandedRows(id);\r\n                  } else {\r\n                      message.error(\"保存失败\")\r\n                  }\r\n               });\r\n        } else {\r\n           // 子任务名称和负责人必填\r\n            const subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n            const isSub = subtasks.filter((item)=>{return item.name==\"\"||item.masters==null||item.masters.length==0})\r\n            if (isSub.length>0) {  // true\r\n                message.warn(\"请您填写任务名称和负责人\");\r\n                return false;\r\n            }\r\n\t\t    const isLarge = subtasks.filter((item)=>{return Number(item.alreadyHours)>Number(item.totalHours)})\r\n\t\t    if (isLarge.length>0) {  // true\r\n\t\t\t    message.warn(\"已用工时不能大于预估工时\");\r\n\t\t\t    return false;\r\n\t\t    }\r\n            // 判断是新增的主任务进行拆解的\r\n            if (id.startsWith(\"!\")) {\r\n                this.saveExpandedRows(id);\r\n            } else {\r\n                // 原有\r\n                this.store.saveSubTasks(this.state.subtasks)\r\n                    .then((res)=>{\r\n                        if (res&&res.length>0) {\r\n                            message.success(\"保存成功\")\r\n                            this.subtask.clearState();\r\n                            // 更新tree\r\n\t\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\t\tlet record = utils.getRecord(treeData, id);\r\n\t\t\t\t\t\t\t// 如果存在 attachments 更新的时候要添加附件集\r\n\t\t\t\t\t\t\tlet attachments = record&&record.children!=null&&record.children.filter((item)=>{return item.treeType==='attc'})[0];\r\n\t\t\t\t\t\t\tif(attachments){\r\n\t\t\t\t\t\t\t\tres.push(attachments);\r\n\t\t\t\t\t\t\t}\r\n                            this.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n                            // 更新步骤\r\n                            this.store.getStageTree();\r\n                            this.saveExpandedRows(id);\r\n                        } else {\r\n                            message.error(\"保存失败\")\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item=>{\r\n\t\t\tlet {key,children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks:newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n    onCalac = (key)=> {\r\n        this.saveExpandedRows(key);\r\n        this.store.isEdit = false;\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n        this.subtask.clearState();\r\n        this.setState({\r\n            activeObj: Object.assign({})\r\n        });\r\n    }\r\n\r\n    // 折叠收起\r\n    onPackup = (record) => {\r\n\t    let _this = this;\r\n\t    const defaultSource = _this.state.activeSub.map(item=>{\r\n\t        return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n                \"totalHours\": item.totalHours,\r\n                \"alreadyHours\": item.alreadyHours\r\n\t        }\r\n        });  // 拆解前默认数据\r\n        const rearSource = _this.state.subtasks.map(item=>{\r\n            return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n                \"totalHours\": item.totalHours,\r\n                \"alreadyHours\": item.alreadyHours\r\n            }\r\n        });  // 拆解后内容变动数据\r\n       // console.log(JSON.stringify(defaultSource), JSON.stringify(rearSource), '===比较', JSON.stringify(defaultSource)==JSON.stringify(rearSource))\r\n        // 当前拆解数据内容变化，给提示是否保存\r\n        if (JSON.stringify(defaultSource)==JSON.stringify(rearSource)) {\r\n            // 内容没有变动，直接取消\r\n            _this.onCalac(record.id);\r\n        } else {\r\n            Modal.confirm({\r\n                title: '是否对所更改内容保存',\r\n                okText: '保存',\r\n                cancelText: '不保存',\r\n                onOk() {\r\n                    _this.saveSubTaskRecord(record.id);\r\n                },\r\n                onCancel() {\r\n                    _this.onCalac(record.id);\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    onTaskRef = (ref) => {\r\n        this.subtask = ref\r\n    }\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})\r\n\t\tconst subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n\t\tif (disabled&&subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {subTaskDis, dataSource, expandedKeys} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst {taskhaveattt} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length>0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = taskhaveattt?\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\talign: \"center\",\r\n                editable: !disabled&&!isChaijie,\r\n                render: (text, record) => {\r\n\t\t\t\t    return(<div\r\n\t\t\t\t\t          //  id={`/workdetail?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t            id={record.id}\r\n\t\t\t\t                onClick={this.onRow.bind(this, record)}\r\n\t\t\t\t                style={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t                className=\"pr\">\r\n                            <Icon className={record.delayType!==0&&disabled?\"\":\"hidden\"} style={{fontSize:'18px',position:'absolute', left: '5px', color: 'red', top: '50%', transform: 'translateY(-50%)'}} type=\"exclamation-circle\" />\r\n                            {text}\r\n                           </div>);\r\n                }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text==null?\"\":text.map(item=>item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n            {\r\n                title: '截止日期',\r\n                dataIndex: 'endTime',\r\n                width: '12%',\r\n                editable: !disabled&&!isChaijie,\r\n                align: \"center\",\r\n\t            render: (text, record) => {\r\n\t\t            return <div\r\n\t\t\t            style={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t            onClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t            },\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender:(text, record) => {return <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text}%</div>}\r\n\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\ttitle: '对应产出',\r\n\t\t\t\tdataIndex: 'attc',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\talign: \"center\",\r\n                render: (text, record) => {\r\n\t\t\t\t\tlet attcObj = record.children!=null&&record.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\r\n\t\t\t\t\tconst attachments = attcObj&&attcObj.children&&attcObj.children!=null?attcObj.children.map((vitem) => {\r\n\t\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\tuid: vitem.id,\r\n\t\t\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\t\t\tid: vitem.id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}) : [];\r\n                    return (\r\n                    \t<div className=\"table_upload\">\r\n\t\t                    {attcObj==false?\r\n\t\t                    \"- -\":<MyUpload\r\n\t\t\t\t                    saveAttachment={this.props.saveAttachment}\r\n\t\t\t\t                    delNode={this.props.delNode}\r\n\t\t\t\t                    fileList={attachments}\r\n\t\t\t\t                    pid={attcObj?attcObj.id:\"\"}\r\n\t\t\t\t                    projectId={attcObj?attcObj.projectId:\"\"}\r\n\t\t\t\t                    disabled={disabled||isChaijie}\r\n\t\t\t\t                    ossData={this.props.oss}\r\n\t\t\t\t                    multiple={false}\r\n\t\t\t                    />}\r\n                    \t</div>)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender:(text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text==null||text==\"\"?null:<p><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"} key={'task_'+index}><span style={{fontWeight:'700',color: '#333'}}>备注{index+1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text==null||text==\"\"?null:<span><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_'+index} className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px',fontWeight:'700',color: '#333'}}>\r\n\t\t                                  备注{index+1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {return item == record.id}).length>0&&!subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t}\r\n\t\t\t\t    else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})\r\n                        const subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n                        if (disabled) {  // 详情态\r\n\t                        if (subNumber==0) { // 子任务数等于0\r\n\t\t                        return <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t                        //return <span>{subNumber}</span>\r\n\t                        } else {  // 子任务数大于0\r\n\t\t                        return (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\" style={{marginLeft:\"10px\"}} title=\"编辑\" type=\"edit\" />\r\n                                </span>)\r\n\t                        }\r\n                        } else {  // 编辑态\r\n                            return (<a  onClick={this.handleApart.bind(this, record)}>{subNumber==0?actionName:subNumber}</a>)\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t]:[\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n                editable: !disabled&&!isChaijie,\r\n                render: (text, record) => {\r\n\t\t\t\t    return(<div\r\n\t\t\t\t\t            id={record.id}\r\n\t\t\t\t\t            //id={`/workdetail?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t                onClick={this.onRow.bind(this, record)}\r\n\t\t\t\t                style={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t                className=\"pr\">\r\n                            <Icon className={record.delayType!==0&&disabled?\"\":\"hidden\"} style={{fontSize:'18px',position:'absolute', left: '5px', color: 'red', top: '50%', transform: 'translateY(-50%)'}} type=\"exclamation-circle\" />\r\n                            {text}\r\n                           </div>);\r\n                }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text==null?\"\":text.map(item=>item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n            {\r\n                title: '截止日期',\r\n                dataIndex: 'endTime',\r\n                width: '14%',\r\n                editable: !disabled&&!isChaijie,\r\n                align: \"center\",\r\n\t            render: (text, record) => {\r\n\t\t            return <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t            },\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender:(text, record) => {return <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text}%</div>}\r\n\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '备注',\r\n\t\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\t\twidth: '14%',\r\n\t\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\trender:(text, record) => {\r\n\t\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{text==null||text==\"\"?null:<p><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\t\treturn (<p className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"} key={'task_'+index}><span style={{fontWeight:'700',color: '#333'}}>备注{index+1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>\r\n\t\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t\t{text==null||text==\"\"?null:<span><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_'+index} className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px',fontWeight:'700',color: '#333'}}>\r\n\t\t                                  备注{index+1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {return item == record.id}).length>0&&!subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t}\r\n\t\t\t\t    else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})\r\n                        const subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n                        if (disabled) {  // 详情态\r\n\t                        if (subNumber==0) { // 子任务数等于0\r\n\t\t                        return <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t                        //return <span>{subNumber}</span>\r\n\t                        } else {  // 子任务数大于0\r\n\t\t                        return (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\" style={{marginLeft:\"10px\"}} title=\"编辑\" type=\"edit\" />\r\n                                </span>)\r\n\t                        }\r\n                        } else {  // 编辑态\r\n                            return (<a  onClick={this.handleApart.bind(this, record)}>{subNumber==0?actionName:subNumber}</a>)\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n                    handleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord={\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id||\"\",\r\n\t\t\t\tprojectId: record.projectId||\"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters==null?[]:record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n                    store={this.store}\r\n\t\t\t\t\trecord={record}\r\n                    addRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie&&!disabled?this.onPackup(record):this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n                    disabled={subTaskDis}\r\n                    id={record.id}\r\n                    onTaskRef={this.onTaskRef}\r\n                />\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n                    className=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n                {disabled?null:<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}} type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable2;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/product/EditableTable2.js","/*\n* 进度步骤条\n* dangw@glodon.com\n* */\nimport React from 'react';\nimport {inject, observer} from 'mobx-react';\nimport { Popover, Icon, Empty, Badge , Progress, Affix, message, Modal, Button, Input} from 'antd';\n\nimport * as  mobx from 'mobx';\nimport moment from \"moment\";\n\nconst { TextArea } = Input;\n\n@observer\nexport default class ProgressList extends React.Component {\n    constructor(props) {\n        super(props);\n        this.store = this.props.store;\n        this.state = {\n            visible: false,\n            value: \"\"\n        };\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentDidMount() {\n\n    }\n\n    // 定位\n    scrollToAnchor(key) {\n        const {scrollToAnchor} = this.props;\n        scrollToAnchor(key);\n    }\n\n    showModal = () => {\n        this.setState({\n            visible: true\n        });\n    };\n\n    countDown = ()=> {\n        let secondsToGo = 3;\n        const modal = Modal.success({\n            title: '感谢所有人对此项目所付出的努力',\n            content: `幸苦了，继续加油！！`,\n        });\n        const timer = setInterval(() => {\n            secondsToGo -= 1;\n            modal.update({\n                content: `幸苦了，继续加油！！`,\n            });\n        }, 1000);\n        setTimeout(() => {\n            clearInterval(timer);\n            modal.destroy();\n        }, secondsToGo * 1000);\n    }\n\n    handleOk = e => {\n        if (this.state.value==\"\"||this.state.value==null) {\n            message.warn(\"请填写关闭原因\")\n            return false;\n        }\n        const params = {\n            projectId: this.store.projectId,\n            text: this.state.value\n        }\n        this.store.closeProject(params).then((res)=>{\n            if (res) {\n                this.setState({\n                    visible: false,\n                    value: \"\"\n                }, ()=>{\n                    this.countDown();\n                    this.props.updateTree();\n                    this.store.getStageTree();\n                });\n            } else {\n                message.error(\"关闭失败\")\n            }\n        });\n    };\n\n    onCancel = () => {\n        this.setState({\n            visible: false,\n            value: \"\"\n        });\n    }\n\n    onChange = ({ target: { value } }) => {\n        this.setState({ value });\n    };\n\n    render() {\n        const {listData, isShow} = this.props;\n        const {state, closeReason} = this.store;\n        const content = (\n            <div>\n                <p>{state==1?\"圆满结束，感谢大家的所有付出！\":closeReason}</p>\n            </div>\n        );\n        let isAll = mobx.toJS(listData).every(function(computer){  // false 全部完成\n            return computer.rate >= 100;\n        });\n        return (\n            <div>\n                <Affix offsetTop={1}>\n                    <div className=\"w clearfix pr\"\n                         style={{backgroundColor: '#FFF',\n                             boxShadow: \"0 1px 1px rgba(24,144,255, 0.15), 0 2px 6px 0 rgba(24,144,255, 0.45)\",\n                             minHeight: '30px',\n                             padding: '10px 30px 7px 30px'}}>\n                        {mobx.toJS(listData).length>0?mobx.toJS(listData).map((item, index) => {\n                            return (\n                                <div\n                                    onClick={this.scrollToAnchor.bind(this, item.key)}\n                                    key={index}\n                                    style={{\n                                        width: '14%',\n                                        float: 'left',\n                                        display: 'inlineBlock',\n                                        position: 'relative'\n                                    }}>\n                                    {item.rate>0?\n                                        <Badge className=\"worktile_progress_span_active\" status=\"processing\"/>:\n                                        <span className={state==2?\"worktile_progress_span worktile_progress_span_close\": \"worktile_progress_span\"}/>}\n                                    <Progress\n                                        className={state==2?\"worktile_progress_close worktile_progress\":\"worktile_progress\"}\n                                        style={{\n                                            display: 'inlineBlock',\n                                            paddingLeft: '9px'\n                                        }}\n                                        size=\"small\"\n                                        strokeLinecap=\"square\"\n                                        percent={item.rate==null?0:item.rate}/>\n                                    <div style={{textAlign: 'left', position: 'relative', left: '-20px'}}>\n                                        <p style={{cursor:\"pointer\"}} className={item.rate>0?\"worktile_progress_item_active\":\"worktile_progress_item\"}>\n                                            {item.stageName}\n                                            {item.stageName==\"方案设计\"&&item.indexs>=2?<Badge\n                                                count={item.indexs}\n                                                className=\"ml5\"\n                                                style={{ cursor: 'default', backgroundColor: '#fff', color: '#999', boxShadow: '0 0 0 1px #d9d9d9 inset' }}\n                                            />:null}\n                                        </p>\n                                        <p className=\"worktile_progress_name\" style={{ cursor:\"pointer\"}}>\n                                            {item.masters==null?\"\":item.masters.length>0&&item.masters.map(item=>item.userName).join(\"、\")}\n                                            {item.rate==100?<Icon type=\"check-circle\" style={{paddingLeft: '5px', fontSize: '16px', color: \"#108DE9\", cursor:\"pointer\"}}/>:null}\n                                        </p>\n                                        <p className=\"worktile_progress_name\">{item.finishTime==0||item.finishTime==null?(item.rate>0?<a style={{cursor:\"pointer\"}}>进行中</a>:null):(item.rate==100?moment(item.finishTime).format(\"YYYY-MM-DD HH:mm\"):<a style={{cursor:\"pointer\"}}>进行中</a>)}</p>\n                                    </div>\n                                </div>);\n                        }):<Empty description={false} />}\n                        <div className={mobx.toJS(listData).length>0?\"\":\"hidden\"}\n                             style={{\n                                 width: '2%',\n                                 float: 'left',\n                                 display: 'inlineBlock',\n                                 position: 'relative'\n                             }}>\n                            {isAll?<Badge className=\"worktile_progress_span_active\" status=\"processing\"/>:<span className={state==2?\"worktile_progress_span worktile_progress_span_close\": \"worktile_progress_span\"}/>}\n                            <div style={{textAlign: 'left', position: 'relative', left: '-22px', top: '22px'}}>\n                                <p className={isAll?\"worktile_progress_item_active\":\"worktile_progress_item\"} style={{width: '80px', cursor:\"pointer\"}}>全部完成</p>\n                            </div>\n                        </div>\n                        {\n                            isShow?null:<span>\n                                <Button\n                                    onClick={this.showModal}\n                                    className={state==0?\"fr btn_yellow mt5\":\"hidden\"}\n                                    style={{position:\"absolute\", right:\"40px\", bottom:\"10px\"}}\n                                    type=\"primary\"\n                                    shape=\"round\"\n                                    size={\"small\"}\n                                    ghost>\n                            关闭项目\n                        </Button>\n                        <Popover content={content}>\n                            <Button className={state==1?\"fr mt5\":\"hidden\"}\n                                    style={{position:\"absolute\", right:\"40px\", bottom:\"10px\"}}\n                                    type=\"primary\"\n                                    size={\"small\"}\n                                    shape=\"round\">正常结束</Button>\n                        </Popover>\n                        <Popover content={content}>\n                            <Button className={state==2?\"fr btn_yellow_active mt5\":\"hidden\"}\n                                    style={{position:\"absolute\", right:\"40px\", bottom:\"10px\"}}\n                                    type=\"primary\"\n                                    size={\"small\"}\n                                    shape=\"round\">中途关闭</Button>\n                        </Popover>\n                            </span>\n                        }\n                    </div>\n                </Affix>\n                {/*关闭项目*/}\n                <Modal\n                    title=\"请填写项目中途关闭的原因\"\n                    visible={this.state.visible}\n                    onOk={this.handleOk}\n                    onCancel={this.onCancel}\n                >\n                      <TextArea\n                          value={this.state.value}\n                          onChange={this.onChange}\n                          placeholder=\"请填写原因\"\n                          autoSize={{ minRows: 3, maxRows: 5 }}\n                      />\n                </Modal>\n            </div>\n        );\n    }\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/ProgressList.js","/*\r\n* 项目信息 新的模板\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {Input, Form, Row, Col, Card, Button, Tabs, InputNumber, DatePicker, Select} from 'antd';\r\nimport AsyncSelectMuti from \"@/components/common/AsyncSelectMuti\";\r\n\r\nimport Config from \"@/config\";\r\nimport Schemas from \"@/utils/Schemas/bpm\";\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from './MyUpload';\r\nimport moment from 'moment';\r\n\r\nconst {TextArea} = Input;\r\nconst {TabPane} = Tabs;\r\nconst {Option} = Select;\r\nconst obj = {2: [\"5\"], 4: [\"4\"], 5: [\"6\"]}; // 处理产品类型\r\n\r\n@Form.create()\r\nexport default class Index extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n            fields: {\r\n            \t\"id\":\"\",\r\n\t            \"pid\":\"\",\r\n\t            \"projectId\":\"\",\r\n\t            \"code\":\"\",\r\n\t            \"name\":\"\",\r\n\t            \"masters\":[],\r\n\t            \"customer\":\"\",\r\n\t            \"productType\":[],\r\n\t            \"address\":\"\",\r\n\t            \"description\":\"\",\r\n\t            \"milepost\":\"\",\r\n\t            \"builtArea\":\"\",\r\n\t            \"totalCost\":\"\",\r\n\t            \"builtType\":\"\",\r\n\t            \"beginTime\": null,\r\n\t            \"endTime\": null,\r\n\t            \"constructionUnit\":\"\",\r\n\t            \"constructionQualification\":\"\",\r\n\t            \"partyaUnit\":\"\",\r\n\t            \"unitQualification\":\"\",\r\n\t            \"declarationAwards\":\"\",\r\n\t            \"awardGrade\":\"\",\r\n\t            \"buySoftware\":\"\",\r\n\t            \"usageSituation\":\"\",\r\n\t            \"background\":\"\",\r\n\t            \"temporaryDecision\":\"\",\r\n\t            \"temporaryManagerDesire\":\"\",\r\n\t            \"temporaryRequirement\":\"\",\r\n\t            \"temporaryBudgetStandard\":\"\",\r\n\t            \"temporaryTotalAcceptability\":\"\",\r\n\t            \"temporaryTotalRange\":\"\",\r\n\t            \"temporaryBudget\":\"\",\r\n\t            \"temporaryPriceDesire\":\"\",\r\n\t            \"temporaryEstimatePrice\":\"\",\r\n\t            \"temporaryManagersNumber\":\"\",\r\n\t            \"temporaryWorkersNumber\":\"\",\r\n\t            \"temporaryBeginTime\": null,\r\n\t            \"temporaryEndTime\":null,\r\n\t            \"temporaryBudgetEvaluation\":\"\",\r\n            },  // 存储当前组件的数据\r\n            hidden: true,  // 面板是否折叠展开\r\n\t\t\tcount: 1,    // 记录创建还是编辑\r\n\t\t\tkey: \"1\", // 当前key\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps,nextContext){\r\n\t\tconst {itemObj} = nextProps;\r\n\t\tif (itemObj) {\r\n\t\t\tif (JSON.stringify(itemObj)!==JSON.stringify(this.props.itemObj)) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tfields: Object.assign({}, itemObj.children.filter((item)=>{ return item.treeType==\"projectinfo\"})[0]),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {itemObj, count, hidden} = this.props;\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign({}, itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t\t})[0]),\r\n\t\t\tcount,\r\n\t\t\thidden\r\n\t\t});\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\tcallback = (key) => {\r\n\t\tthis.setState({\r\n\t\t\tkey\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (userIds)=>{\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {\r\n\t\t\t\t\"masters\": userIds\r\n\t\t\t}),\r\n\t\t});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t\tcount: Number(this.state.count)+1\r\n\t\t});\r\n\t\tthis.props.updateCount('count', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = ()=> {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t\tkey: \"1\"\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {fields} = _this.state;\r\n\t\t_this.props.form.validateFields((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tdelete values.masters;\r\n\t\t\t\tconst params = Object.assign(fields, values,\r\n\t\t\t\t\t  {\r\n\t\t\t\t\t\t\"projectType\": this.props.projectType,\r\n\t\t\t\t\t  \t\"productType\": values.productType.map((item)=> item.toString()),\r\n\t\t\t\t\t\t\"beginTime\":  values['beginTime']==null||values['beginTime']==\"\"?0:moment(values['beginTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"endTime\": values['endTime']==null||values['endTime']==\"\"?0:moment(values['endTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"temporaryBeginTime\":  values['temporaryBeginTime']==null||values['temporaryBeginTime']==\"\"?0:moment(values['temporaryBeginTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"temporaryEndTime\":  values['temporaryEndTime']==null||values['temporaryEndTime']==\"\"?0:moment(values['temporaryEndTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t  });\r\n\t\t\t\tif (params.children==null) {\r\n\t\t\t\t\tdelete params.children;\r\n\t\t\t\t}\r\n\t\t\t\t_this.props.saveProject(params);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fields, hidden, key} = this.state;\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tmd: {span: 8},\r\n\t\t\t\tsm: {span: 10},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tmd: {span: 16},\r\n\t\t\t\tsm: {span: 14},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayout2 = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 12},\r\n\t\t\t\tmd: {span: 10},\r\n\t\t\t\tlg: {span: 10}\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 12},\r\n\t\t\t\tmd: {span: 14},\r\n\t\t\t\tlg: {span: 14}\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst {itemObj, state, ossData, saveAttachment, delNode, count, projectType} = this.props;\r\n\t\tlet attcObj = itemObj.children!=null&&itemObj.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\r\n\t\tconst attachments = attcObj.children!=null?attcObj.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\tconst temID = {}\r\n\t\treturn (\r\n\t\t\t<Card bordered className=\"pr\" style={{width: '100%'}}>\r\n\t\t\t\t<h3 id={itemObj.id||\"items0\"} className=\"kanban_title mb20\">项目信息</h3>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                    {hidden?\r\n                        <Button className={state==2?\"hidden\":\"\"} type=\"link\" onClick={this.onChangeVis}>{count==1?\"创建\":\"编辑\"}</Button>:\r\n                        <div>\r\n                            <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n                            <span onClick={this.handleSubmit}>保存</span>\r\n                        </div>}\r\n                </span>\r\n\t\t\t\t<Tabs className={count==1?\"hidden\":\"item_tabs\"} activeKey={key} onChange={this.callback}>\r\n\t\t\t\t\t<TabPane tab=\"主体项目信息\" key=\"1\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目名称\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('name', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.name||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入项目名称'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.masters==null?[]:fields.masters,\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入主负责人'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata={fields.masters==null?[]:fields.masters}\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"客户名称\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('customer', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.customer||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户名称'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xl={16}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"产品类型\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('productType', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: projectType==4||projectType==5?obj[projectType]:(fields.productType==null?[]:fields.productType),\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择产品类型'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AsyncSelectMuti\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"getProductTypeList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariables={{}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tquery={Schemas.bpm.getProductTypeList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl={Config.bpm.getProductTypeList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={projectType==4||projectType==5?obj[projectType]:fields.productType==null?[]:fields.productType}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titemKey=\"id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titemValue=\"typeName\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden||projectType==4||projectType==5}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目地点\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('address', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.address||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目地点'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label={<span>建筑面积(㎡)</span>}  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('builtArea', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.builtArea||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建筑面积'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"总造价(万元)\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('totalCost', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.totalCost||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入总造价'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={24}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目概况\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('description', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.description||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目概况'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"建筑类型\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('builtType', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.builtType||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建筑类型'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"开工日期\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('beginTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.beginTime==null||fields.beginTime==0?\"\":moment(moment(fields.beginTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择开工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"竣工日期\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('endTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.endTime==null||fields.endTime==0?\"\":moment(moment(fields.endTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择竣工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xl={16}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"施工单位\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('constructionUnit', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.constructionUnit||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入施工单位'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"施工资质\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('constructionQualification', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.constructionQualification||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入施工资质'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"甲方单位\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('partyaUnit', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.partyaUnit||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入甲方单位'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"甲方资质\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('unitQualification', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.unitQualification||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入甲方资质'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={24}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"关键里程碑\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('milepost', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.milepost||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入关键里程碑'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xl={16}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"申报奖项\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('declarationAwards', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.declarationAwards||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入申报奖项'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"奖项等级\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('awardGrade', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.awardGrade||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入奖项等级'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"已采购软件\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('buySoftware', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.buySoftware||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入已采购软件'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"使用情况\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('usageSituation', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.usageSituation||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入使用情况'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={24}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目背景及意义\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('background', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.background||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目背景及意义'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane tab=\"临建项目信息\" key=\"2\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout2}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"决策方式\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryDecision', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryDecision||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入决策方式'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目经理意愿\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryManagerDesire', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryManagerDesire||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目经理意愿'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"特殊要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryRequirement', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryRequirement||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入特殊要求'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"预算标准\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBudgetStandard', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBudgetStandard||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入预算标准'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"总承包形式接受度\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryTotalAcceptability', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryTotalAcceptability||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入总承包形式接受度'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"总承包范围\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryTotalRange', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryTotalRange||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入总承包范围'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"客户需求预算价(万元)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBudget', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBudget||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户需求预算价'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"客户对此价格意愿度\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryPriceDesire', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryPriceDesire||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户对此价格意愿度'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"预估客户可接受价格\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryEstimatePrice', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryEstimatePrice||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入预估客户可接受价格'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"管理人员数量(人)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryManagersNumber', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryManagersNumber||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入管理人员数量'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"劳务人员数量(人)\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryWorkersNumber', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryWorkersNumber||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入劳务人员数量'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"预算综合判断\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBudgetEvaluation', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBudgetEvaluation||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择预算综合判断'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option title=\"有付费能力，高度重视，强调差异化体现\" value=\"有付费能力，高度重视，强调差异化体现\">有付费能力，高度重视，强调差异化体现</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option title=\"追求普通标准，合适就好\" value=\"追求普通标准，合适就好\">追求普通标准，合适就好</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option title=\"预算有限，临建功能刚需，其余尚可就好\" value=\"预算有限，临建功能刚需，其余尚可就好\">预算有限，临建功能刚需，其余尚可就好</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"开工日期\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBeginTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBeginTime==null||fields.temporaryBeginTime==0?\"\":moment(moment(fields.temporaryBeginTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择开工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"竣工日期\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryEndTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryEndTime==null||fields.temporaryEndTime==0?\"\":moment(moment(fields.temporaryEndTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择竣工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t</Tabs>\r\n\t\t\t\t<div className={count==1||(itemObj.id==null||itemObj.id==\"\")?\"hidden\":\"pr\"}>\r\n\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\tpid={attcObj.id}\r\n\t\t\t\t\t\tprojectId={attcObj.projectId}\r\n\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\tleft: '35px',\r\n\t\t\t\t\t\ttop: '4px',\r\n\t\t\t\t\t\tfontSize:'12px',\r\n\t\t\t\t\t\tcolor: '#999'\r\n\t\t\t\t\t}}>请上传现场平面布置图（含临建区域范围）和拟建建筑效果图（设计理念）</span>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/ItemInfoNew.js","import React from 'react';\nimport {inject, observer} from 'mobx-react';\nimport {Form, Tooltip, Input} from 'antd';\n//import moment from 'moment';\n//import MyUpload from \"@/components/worktile/MyUpload\";\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\n\n// import AsyncSelectMuti from \"@/components/common/AsyncSelectMuti\";\n// import authSchemas from \"@/utils/Schemas/authorization\";\n// import Config from \"@/config\";\nimport * as utils from \"@/utils/utils\";\n\nconst formItemLayout = {\n\tlabelCol: {span: 11},\n\twrapperCol: {span: 13},\n}\nconst CustomizedForm = Form.create({\n\tname: 'proposalattc',\n\tonFieldsChange(props, changedFields) {\n\t\tprops.onChange(changedFields);\n\t},\n\tmapPropsToFields(props) {\n\t\treturn {\n\t\t\tsupplierPrice: Form.createFormField({\n\t\t\t\t...props.supplierPrice,\n\t\t\t\tvalue: props.supplierPrice.value,\n\t\t\t}),\n\t\t\tcustomerPrice: Form.createFormField({\n\t\t\t\t...props.customerPrice,\n\t\t\t\tvalue: props.customerPrice.value,\n\t\t\t}),\n\t\t\tupload: Form.createFormField({\n\t\t\t\t...props.upload,\n\t\t\t\tvalue: props.upload.value,\n\t\t\t}),\n\t\t\tmasters: Form.createFormField({\n\t\t\t\t...props.masters,\n\t\t\t\tvalue: props.masters.value,\n\t\t\t}),\n\t\t}\n\t},\n\tonValuesChange(_, values) {\n\t\t// console.log(values);\n\t}\n})(props => {\n\tconst {getFieldDecorator} = props.form;\n\tconst {onSave, onBlur, attcObj, saveAttachment, delNode, oss} = props;\n\t// const attachments = attcObj.children!=null?attcObj.children.map((vitem, index) => {\n\t//     return Object.assign({}, {\n\t//         uid: vitem.id,\n\t//         name: vitem.fileName,\n\t//         status: 'done',\n\t//         url: vitem.filePath,\n\t//         fileId: vitem.fileId,\n\t//         fileName:vitem.fileName,\n\t//         filePath: vitem.filePath,\n\t//         id: vitem.id\n\t//     })\n\t// }) : [];\n\n\treturn (\n\t\t<Form {...formItemLayout} layout=\"horizontal\">\n\t\t\t{/* <Form.Item label=\"内容留存\"\n                       labelCol={{\n                           xs: { span: 24 },\n                           sm: { span: 2},\n                       }}\n                       wrapperCol={{\n                           xs: { span: 24 },\n                           sm: { span: 22 },\n                       }}\n            >\n               <MyUpload\n                    saveAttachment={saveAttachment}\n                    delNode={delNode}\n                    fileList={attachments}\n                    pid={attcObj.id}\n                    projectId={attcObj.projectId}\n                    disabled={props.isEdit}\n                    ossData={oss}\n               />\n            </Form.Item>*/}\n\t\t\t<Form.Item label={props.proposalLabel}\n\t\t\t           labelCol={{\n\t\t\t\t           xs: {span: 24},\n\t\t\t\t           sm: {span: 2},\n\t\t\t           }}\n\t\t\t           wrapperCol={{\n\t\t\t\t           xs: {span: 24},\n\t\t\t\t           sm: {span: 22},\n\t\t\t           }}\n\t\t\t>\n\t\t\t\t<Form.Item\n\t\t\t\t\tstyle={{width: '250px'}}\n\t\t\t\t\tclassName=\"prop_attr\"\n\t\t\t\t\tlabel={props.supplierLabel}>\n\t\t\t\t\t{getFieldDecorator('supplierPrice', {\n\t\t\t\t\t\tinitialValue: props.supplierPrice.value==null||props.supplierPrice.value==0?\"\":props.supplierPrice.value,\n\t\t\t\t\t\trules: [{required: false, message: '字段不能为空'}],\n\t\t\t\t\t})(\n\t\t\t\t\t\t<span className=\"w\">\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tplacement=\"topLeft\"\n\t\t\t\t\t\t\t\ttrigger={['focus']}\n\t\t\t\t\t\t\t\ttitle={props.supplierPrice.value>1000?\"金额单位是万元\":null}>\n                            <Input style={{width: '60px', marginRight: '5px'}}\n                                   disabled={props.isEdit}\n                                   value={props.supplierPrice.value==null||props.supplierPrice.value==0?\"\":props.supplierPrice.value}/><span>万元</span>\n\t\t\t\t\t\t\t</Tooltip>\n                        </span>\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item\n\t\t\t\t\tstyle={{width: '250px'}}\n\t\t\t\t\tclassName=\"prop_attr\"\n\t\t\t\t\tlabel={props.customerLabel}>\n\t\t\t\t\t{getFieldDecorator('customerPrice', {\n\t\t\t\t\t\tinitialValue: props.customerPrice.value==null||props.customerPrice.value==0?\"\":props.customerPrice.value,\n\t\t\t\t\t\trules: [{required: false, message: '字段不能为空'}],\n\t\t\t\t\t})(\n\t\t\t\t\t\t<span className=\"w\">\n                            <Tooltip\n\t                            placement=\"topLeft\"\n\t                            trigger={['focus']}\n\t                            title={props.customerPrice.value>1000?\"金额单位是万元\":null}>\n                            <Input style={{width: '60px', marginRight: '5px'}}\n                                   disabled={props.isEdit}\n                                   value={props.customerPrice.value==null||props.customerPrice.value==0?\"\":props.customerPrice.value}/><span>万元</span>\n                            </Tooltip>\n                        </span>\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n\t\t\t</Form.Item>\n\t\t\t<Form.Item label=\"报价同步\"\n\t\t\t           labelCol={{\n\t\t\t\t           xs: {span: 24},\n\t\t\t\t           sm: {span: 2},\n\t\t\t           }}\n\t\t\t           wrapperCol={{\n\t\t\t\t           xs: {span: 24},\n\t\t\t\t           sm: {span: 6},\n\t\t\t           }}\n\t\t\t           className=\"w\">\n\t\t\t\t{getFieldDecorator('master999', {\n\t\t\t\t\tinitialValue: props.masters.value.length > 0 ? props.masters.value.length > 0 && props.masters.value.map((item) => {\n\t\t\t\t\t\treturn item.userId\n\t\t\t\t\t}) : [],\n\t\t\t\t\trules: [{required: false, message: '请选择同步人'}],\n\t\t\t\t})(\n\t\t\t\t\t<div className=\"w\">\n\t\t\t\t\t\t<PersonAdd2\n\t\t\t\t\t\t\tdata={props.masters.value.length > 0 ? props.masters.value.length > 0 && props.masters.value : []}\n\t\t\t\t\t\t\tupdatePerson={onSave}\n\t\t\t\t\t\t\tdisabled={props.isEdit}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/*<AsyncSelectMuti\n                        className=\"w\"\n                        type=\"getUserInfoListByRoleCode\"\n                        variables={{\n                            appId: \"bocspace\",\n                            code: \"bocspace.group\",\n                            pageIndex: 1,\n                            pageSize: 10000,\n                        }}\n                        query={authSchemas.authorization.getUserInfoListByRoleCode}\n                        url={Config.authorization.getUserInfoListByRoleCode}\n                        onChange={onSave}\n                        itemKey=\"id\"\n                        itemValue=\"realname\"\n                        body=\"body\"\n                       disabled={props.isEdit}\n                    />*/}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Form.Item>\n\t\t</Form>\n\t);\n});\n\n@observer\nexport default class ProposalAttc extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.store = this.props.store;\n\t\tthis.state = {\n\t\t\tisEdit: false,\n\t\t\tdata: this.props.data,\n\t\t\tfields: {\n\t\t\t\tsupplierPrice: {\n\t\t\t\t\tvalue: this.props.data.filter((item) => {\n\t\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t\t})[0]['supplierPrice'] || 0,\n\t\t\t\t},\n\t\t\t\tcustomerPrice: {\n\t\t\t\t\tvalue: this.props.data.filter((item) => {\n\t\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t\t})[0]['customerPrice'] || 0,\n\t\t\t\t},\n\t\t\t\tupload: {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t},\n\t\t\t\tmasters: {\n\t\t\t\t\tvalue: this.props.data.filter((item) => {\n\t\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t\t})[0]['masters'] == null ? [] : this.props.data.filter((item) => {\n\t\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t\t})[0]['masters']\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.data != this.props.data) {\n\t\t\tthis.setState({\n\t\t\t\tdata: nextProps.data,\n\t\t\t})\n\t\t\tlet obj = {};\n\t\t\tobj.supplierPrice = {\n\t\t\t\t\"value\": nextProps.data.filter((item) => {\n\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t})[0]['supplierPrice'],\n\t\t\t}\n\t\t\tobj.customerPrice = {\n\t\t\t\t\"value\": nextProps.data.filter((item) => {\n\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t})[0]['customerPrice'],\n\t\t\t}\n\t\t\tobj.masters = {\n\t\t\t\t\"value\": nextProps.data.filter((item) => {\n\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t})[0]['masters'] == null ? [] : nextProps.data.filter((item) => {\n\t\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t\t})[0]['masters']\n\t\t\t}\n\t\t\tthis.setState(({fields}) => ({\n\t\t\t\tfields: {...fields, ...obj},\n\t\t\t}));\n\t\t}\n\t}\n\n\tonChangeVis = () => {\n\t\tthis.setState({\n\t\t\tisEdit: !this.state.isEdit\n\t\t});\n\t}\n\n\thandleFormChange = changedFields => {\n\t\tthis.setState(({fields}) => ({\n\t\t\tfields: {...fields, ...changedFields},\n\t\t}), () => {\n\t\t\tlet proposalObj = this.state.data.filter((item) => {\n\t\t\t\treturn item.treeType === 'proposal'\n\t\t\t})[0]\n\t\t\tlet params = Object.assign({}, proposalObj, {\"supplierPrice\": this.state.fields.supplierPrice.value}, {\"customerPrice\": this.state.fields.customerPrice.value})\n\t\t\tthis.saveData(params);\n\t\t\t// 更新tree\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", params);\n\t\t});\n\t}\n\n\tsaveData = (params) => {\n\t\tthis.props.saveProposal(params);\n\t}\n\n\t// 报价同步\n\tsave2 = (val, e) => {\n\t\tlet userIds;\n\t\tif (e.length) {\n\t\t\tuserIds = e.map((item) => {\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\n\t\t\t})\n\t\t} else {\n\t\t\tuserIds = []\n\t\t}\n\t\tconst {data} = this.state;\n\t\tlet proposalObj = data.filter((item) => {\n\t\t\treturn item.treeType === 'proposal'\n\t\t})[0];\n\t\tlet params = Object.assign({}, proposalObj, {\"masters\": userIds});\n\t\tthis.props.saveNodes(params);\n\t\t// this.saveData(params)\n\t}\n\n\t//\n\tsave = (users) => {\n\t\tconst {data} = this.state;\n\t\tlet proposalObj = data.filter((item) => {\n\t\t\treturn item.treeType === 'proposal'\n\t\t})[0];\n\t\tlet params = Object.assign({}, proposalObj, {\"masters\": users});\n\t\tthis.props.saveNodes(params);\n\t}\n\n\trender() {\n\t\tconst {stepName, disabled, oss} = this.props;\n\t\tconst {data, isEdit, fields} = this.state;\n\n\t\tlet proposalLabel = \"\";\n\t\tlet supplierLabel = \"\";\n\t\tlet customerLabel = \"\";\n\t\tlet formtype = \"\";\n\t\tif (stepName === \"2. 汇报确定\") {\n\t\t\tproposalLabel = \"初步报价\";\n\t\t\tsupplierLabel = \"供应商预估\";\n\t\t\tcustomerLabel = \"客户预估\";\n\t\t\tformtype = \"estimate\";\n\t\t}\n\t\tif (stepName === \"4. 图纸确认\") {\n\t\t\tproposalLabel = \"精确报价\";\n\t\t\tsupplierLabel = \"供应商报价\";\n\t\t\tcustomerLabel = \"客户报价\";\n\t\t\tformtype = \"precise\";\n\t\t}\n\n\t\tconst labelObj = {\n\t\t\t\"proposalLabel\": proposalLabel,\n\t\t\t\"supplierLabel\": supplierLabel,\n\t\t\t\"customerLabel\": customerLabel\n\t\t};\n\n\t\tconst editStatus = {\n\t\t\t\"isEdit\": disabled\n\t\t}\n\n\t\t// const attcObj = data.filter((item)=>{return item.treeType==='attc'})[0]; // 附件数据\n\n\t\treturn (\n\t\t\t<div className=\"mt15\">\n\t\t\t\t<CustomizedForm\n\t\t\t\t\t//oss={oss}\n\t\t\t\t\t//attcObj={attcObj}\n\t\t\t\t\t{...fields}\n\t\t\t\t\t{...labelObj}\n\t\t\t\t\t{...editStatus}\n\t\t\t\t\tonChange={this.handleFormChange}\n\t\t\t\t\tonSave={this.save}\n\t\t\t\t\t//delNode={this.props.delNode}\n\t\t\t\t\t//saveAttachment={this.props.saveAttachment}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/ProposalAttc.js","import React from 'react';\nimport {inject, observer} from 'mobx-react';\nimport {Card, Icon, message, Tooltip} from 'antd';\nimport EditableTable from \"@/components/worktile/EditableTable\";\nimport EditableTable2 from \"@/components/product/EditableTable2\";\nimport ProposalAttc from \"./ProposalAttc\";\nimport * as utils from \"@/utils/utils\";\nimport MyUpload from \"@/components/worktile/MyUpload\";\nimport * as mobx from \"mobx\";\n\n@observer\nexport default class StepInfo extends React.Component {\n\tconstructor(props) {\n        super(props);\n        this.store = this.props.store;\n        this.state = {\n            option:null,\n            current: 0,\n            isEdit:false,\n            data:this.props.data,\n            defaultTree: {}, // 记录默认数据\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if(nextProps.data != this.props.data) {\n           this.setState({data:nextProps.data},()=>{\n               let stepChildren = nextProps.data.children!=null || typeof(nextProps.data.children)!==\"undefined\" ? nextProps.data.children:null;\n               // 更新记录当前树的附件数据\n               let attc = stepChildren.filter((item)=>{return item.treeType==='attc'})[0]\n               if (Object.keys(this.state.defaultTree).length>0&&attc!==undefined) {\n                   // 更新tree\n                   let defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\n                   this.setState({\n                       defaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\n                   });\n               }\n           })\n        }\n    }\n\n    // 保存步骤\n    saveStep =() => { //这里调用saveNodes\n       const {saveNodes} = this.props;\n       const {data} = this.state;\n       // 校验1：任务名称必输\n       let currentDataSource = data.children!=null&&data.children[0].children!=null?data.children[0].children:[];\n       const isSub = currentDataSource.filter((item)=>{return item.name==\"\"||item.name==null})\n       if (isSub.length>0) {  // true\n          message.warn(\"任务名称是必填项\");\n          return false;\n       }\n       saveNodes(data);\n       this.onChangeVis();\n    }\n\n    // 更新该节点树 数据\n    saveData = (taskdata, key) => {\n        const {data} = this.state;\n        let newData = [];\n        taskdata.forEach(item=>{\n            let {key, children, ...obj} = item;\n            newData.push(obj);\n        })\n\n        let currentTaskC = data.children.filter(item=> item.treeType==='taskc')[0];\n        currentTaskC = Object.assign(currentTaskC,{\"children\":taskdata})\n\n        let stepChildren = data.children;\n        const taskcIndex = stepChildren.findIndex(item=> {return item.treeType==='taskc'} )\n        stepChildren[taskcIndex] = currentTaskC;\n        // console.log(Object.assign(data, {\"children\":stepChildren}))\n        this.setState({data:Object.assign(data, {\"children\":stepChildren})});\n\n        // saveTasks(newData);\n    }\n\n    saveProposal =(proposalData) => {\n        const {data} = this.state;\n        let currentProposal = data.children.filter(item=> item.treeType==='proposal')[0];\n        currentProposal = Object.assign(currentProposal,proposalData);\n\n        let stepChildren = data.children;\n        const proposalIndex = stepChildren.findIndex(item=> {return item.treeType==='proposal'} )\n        stepChildren[proposalIndex] = currentProposal;\n\n        this.setState({data:Object.assign(data, {\"children\":stepChildren})});\n\n    }\n\n    onChangeVis = () => {\n        this.setState({\n            isEdit: !this.state.isEdit\n        }, ()=>{\n            // 点击编辑，记录当前树\n            if (this.state.isEdit==true) {\n                this.setState({\n                    defaultTree: Object.assign({}, this.state.data)\n                }, ()=>{\n                    // 同步大阶段的保存状态\n                    this.props.updatedeCount(true);\n                });\n            } else { // 取消\n                // 更新tree\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n                this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\n                // 同步大阶段的保存状态\n                this.props.updatedeCount(false);\n            }\n        });\n    }\n\n    render() {\n        let _this = this;\n        const { data, isEdit,current } = _this.state;\n        const  {stepName, updateTree, disabled, oss} = _this.props;\n        let currentDataSource = data.children!=null&&data.children[0].children!=null?data.children[0].children:[];\n        let stepChildren = data.children!=null || typeof(data.children)!==\"undefined\" ? data.children:null;\n        let proposalIndex = -1;\n        let attcIndex = -1;\n        if(stepChildren!=null) {\n            proposalIndex = stepChildren.findIndex((item)=>{return item.treeType==='proposal'}); //是否有报价\n            attcIndex = stepChildren.findIndex((item)=>{return item.treeType==='attc'}); //是否有内容留存\n        }\n        let attcObj;\n        let attachments;\n        if (stepName==\"关联任务\"&&attcIndex!=-1) {  // 是否有关联任务\n           attcObj = stepChildren.filter((item)=>{return item.treeType==='attc'})[0];//附件对象\n           attachments = attcObj&&attcObj.children&&attcObj.children!=null?attcObj.children.map((vitem) => {\n                return Object.assign({}, {\n                    uid: vitem.id,\n                    name: vitem.fileName,\n                    status: 'done',\n                    url: vitem.filePath,\n                    fileId: vitem.fileId,\n                    fileName:vitem.fileName,\n                    filePath: vitem.filePath,\n                    id: vitem.id\n                })\n            }) : [];\n        }\n        let expandedKeys = mobx.toJS(_this.store.expandedKeys)[data.id]!== undefined?mobx.toJS(_this.store.expandedKeys)[data.id]:[]\n        let isExp = expandedKeys.length>0?true:false;\n\t\treturn (\n            <div className={\"mb15\"}>\n                <div className={\"mb15\"}>\n                    <span className=\"mr20\">{stepName==\"关联任务\"? <Icon type=\"link\" className=\"mr10\"/>: null}{stepName}</span>\n                    {!isEdit ?\n                    <span>\n                        {/*{!disabled?:null}*/}\n                        <Tooltip placement=\"bottom\" title={\"编辑\"}>\n                            <Icon\n                                onClick={_this.onChangeVis}\n                                style={{fontSize:'20px', marginRight:'10px'}}\n                                type=\"form\" />\n                        </Tooltip>\n                    </span>\n                    :\n                    <span>\n                        <Tooltip placement=\"bottom\" title={\"取消\"}>\n                            <Icon\n                                onClick={this.onChangeVis}\n                                style={{fontSize:'20px', marginRight:'10px'}}\n                                type=\"close-circle\" />\n                        </Tooltip>\n                        <Tooltip placement=\"bottom\" title={\"保存\"}>\n                            {isExp? <Icon\n                                style={{fontSize:'20px', color:\"#e6e6e6\"}}\n                                type=\"check-circle\" />: <Icon\n                                onClick={_this.saveStep}\n                                style={{fontSize:'20px'}}\n                                type=\"check-circle\" />}\n                        </Tooltip>\n                    </span>\n                    }\n                </div>\n                {stepName==\"关联任务\"?\n                <EditableTable\n                    id={data.id}\n                    store={_this.store}\n                    masters={data.masters==null?[]:data.masters}\n                    dataSource={currentDataSource}\n                    saveData={_this.saveData}\n                    disabled={!isEdit}\n                    projectId={data.projectId}\n                    pid={data.children!=null ? data.children[0]['id']:''}\n                />:\n                <EditableTable2\n                    id={data.id}\n                    store={_this.store}\n                    masters={data.masters==null?[]:data.masters}\n                    dataSource={currentDataSource}\n                    oss={oss}\n                    taskhaveattt={true}\n                    saveData={_this.saveData}\n                    disabled={!isEdit}\n                    delNode={this.props.delNode}\n                    saveAttachment={this.props.saveAttachment}\n                    projectId={data.projectId}\n                    pid={data.children!=null ? data.children[0]['id']:''}\n                />}\n                {proposalIndex!=-1?\n                    <ProposalAttc\n                        store={_this.store}\n                        stepName = {stepName}\n                        disabled={!isEdit}\n                        saveProposal= {this.saveProposal}\n                        saveNodes={this.props.saveNodes}\n                        saveAttachment={this.props.saveAttachment}\n                        delNode={this.props.delNode}\n                        oss={oss}\n                        data={stepChildren.filter((item)=>{return item.treeType==='proposal'})}\n                    /> :null}\n                {stepName==\"关联任务\"&&attcIndex!=-1?\n                    <div className={!isEdit?\"mt15\":\"myupload_pos\"}>\n                    <MyUpload\n                        saveAttachment={this.props.saveAttachment}\n                        delNode={this.props.delNode}\n                        fileList={attachments}\n                        pid={attcObj?attcObj.id:\"\"}\n                        projectId={attcObj?attcObj.projectId:\"\"}\n                        disabled={!isEdit}\n                        ossData={oss}\n                    /></div>:null}\n            </div>\n\t\t)\n\t}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/StepInfo.js","/*\n* 方案设计组件\n* */\nimport React from 'react';\nimport {Form, Row, Col, Card, Button, message, Menu, Dropdown, Icon, Popconfirm, notification, Modal} from 'antd';\nimport {inject, observer} from 'mobx-react';\nimport StepInfo from \"./StepInfo\";\nimport * as utils from \"@/utils/utils\";\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\nimport * as  mobx from 'mobx';\nconst openNotificationWithIcon = type => {\n\tnotification[type]({\n\t\tmessage: '当前已是该阶段，请选择其他的阶段',\n\t\tdescription:\n\t\t\t'',\n\t\tplacement: 'topLeft'\n\t});\n};\n@Form.create()\n@observer\nexport default class ProjectDesignDetail extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.store= this.props.store;\n\t\tthis.state = {\n\t\t\tuserIds: [],\n            current: 0,\n            stepObj1:{}, //初步设计\n            stepObj2:{}, //汇报确定\n            stepObj3:{}, //关联任务\n            stepObj4:{}, //深化设计\n            stepObj5:{}, //图纸确认\n            proDesignData:this.props.proDesign,\n            hidden:true,\n            defaultTree: {}, // 默认数据\n\t\t\tdeCount: 0, // 记录保存状态\n\t\t\tvisible: false, // 菜单状态\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps, nextContext) {\n\t\t/*\n\t\t* 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\n\t\t* */\n\t\tif (nextProps.proDesign!==this.props.proDesign) {\n            /*根据该节点树型数控制改树结构*/\n            this.setState({proDesignData:nextProps.proDesign});\n            if(Object.keys(nextProps.proDesign).length!==0&&typeof(nextProps.proDesign.children)!==\"undefined\"){\n                this.setState({\n                    stepObj1: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"初步设计\"))[0]),\n                    stepObj2: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"汇报确定\"))[0]),\n                    stepObj3: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"关联任务\"))[0]),\n                    stepObj4: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"深化设计\"))[0]),\n                    stepObj5: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"图纸确认\"))[0]),\n                })\n            }\n\t\t}\n    }\n\n    componentDidMount() {\n\t\t/*\n\t\t* 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\n\t\t* */\n\t\tif (this.props.proDesign) {\n            /*根据该节点树型数控制改树结构*/\n            this.setState({proDesignData:this.props.proDesign});\n            if(Object.keys(this.props.proDesign).length!==0&&typeof(this.props.proDesign.children)!==\"undefined\"){\n                this.setState({\n                    stepObj1: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"初步设计\"))[0]),\n                    stepObj2: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"汇报确定\"))[0]),\n                    stepObj3: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"关联任务\"))[0]),\n                    stepObj4: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"深化设计\"))[0]),\n                    stepObj5: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"图纸确认\"))[0]),\n                })\n            }\n\t\t}\n\t}\n\n\thandleSelChange = (val, e) => {\n\t\tlet userIds;\n\t\tif (e.length) {\n\t\t\tuserIds = e.map((item) => {\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\n\t\t\t})\n\t\t} else {\n\t\t\tuserIds = []\n\t\t}\n\t\tthis.setState({\n\t\t\tuserIds\n\t\t});\n\t\tthis.props.updateState(userIds);\n\t}\n\n    // 人员选择更新\n    updatePerson = (userIds)=>{\n        const {proDesignData} = this.state;\n        // 更新当前树\n        const currentData = Object.assign({}, proDesignData, {masters:userIds});\n        // 更新tree\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\n        this.props.updateState(userIds);\n    }\n\n\tonChange = current => {\n\t\tthis.setState({current});\n\t};\n\n\t// 方案设计保存\n\tonSave  = () => {\n\t\tconst {proDesign, saveNodes} = this.props;\n        const params = proDesign;\n    }\n\n    // 保存\n\thandleSubmit = (e) => {\n        e.preventDefault();\n        const {proDesign} = this.props;\n        let masters = proDesign.masters==null?[]:proDesign.masters;\n        if (masters.length==0) {\n            message.warn(\"主负责人是必填项\");\n            return false;\n        }\n        this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                const {saveStage} = this.props;\n                // console.log(JSON.stringify(this.state.proDesignData))\n                let {children, ...proDesignStageData} = this.state.proDesignData;\n                saveStage(proDesignStageData);\n                this.store.isDesignEdit = true;\n            }\n        });\n    }\n\n    // 编辑\n    onChangeVis = () => {\n        this.store.isDesignEdit = false;\n        this.setState({\n            defaultTree: Object.assign({}, this.state.proDesignData)\n        })\n    }\n\n    // 取消\n    onCanlc = ()=> {\n        this.props.form.resetFields();\n        this.store.isDesignEdit = true;\n        // 清空数据\n        // 更新tree\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\n    }\n\n    updatedeCount= (type) => {\n\t\tif (type==true) {\n\t\t\tthis.setState({\n\t\t\t\tdeCount: this.state.deCount+1\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tdeCount: this.state.deCount-1\n\t\t\t});\n\t\t}\n    }\n\n\tonVisibleChange = (visible) => {\n\t\tthis.setState({\n\t\t\tvisible: !this.state.visible\n\t\t});\n\t}\n\n\t// 新增\n\taddStage = () => {\n\t\tthis.store.addStage().then((res)=>{\n\t\t\tif (res) {\n\t\t\t\tlet oldStageId = JSON.parse(JSON.stringify(this.store.currentStageId));  // old\n\t\t\t\tthis.store.oldStageId = oldStageId;\n\t\t\t\tthis.store.currentStageId = res.id; // new\n\t\t\t\tthis.store.getStageList();\n                // 更新tree\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n                this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\n\n\t\t\t\t// 初始化获取步骤进度信息\n\t\t\t\tthis.store.getStageTree();\n\t\t\t}\n\t\t});\n\t}\n\n\t// 删除\n\tdelStage = (param) => {\n\t\tlet _this = this;\n\t\t_this.store.delStage(param).then((res)=>{\n\t\t\tif (res) {\n\t\t\t\tmessage.success(\"删除成功\");\n\t\t\t\t// 删除成功，currentStage为最新的stageId,最新的数据\n\t\t\t\t//let stageList = JSON.parse(JSON.stringify(_this.store.stageList))\n\t\t\t\t// const index = stageList.findIndex(item=>item.id==param);\n\t\t\t\t// stageList.splice(index, 1);\n\t\t\t\t// const len = stageList.length-1;\n\t\t\t\tlet oldStageId = JSON.parse(JSON.stringify(this.store.currentStageId));  // old\n\t\t\t\t_this.store.oldStageId = oldStageId;\n\t\t\t\t//_this.store.currentStageId = stageList[len].id; // new\n\t\t\t\t_this.store.currentStageId = res.id; // new\n\t\t\t\t// 更新方案设计数据\n\t\t\t\t//this.store.proDesign = Object.assign({}, res);\n                // 更新tree\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n                this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\n\t\t\t\t// 初始化获取步骤进度信息\n\t\t\t\tthis.store.getStageTree();\n\t\t\t\t_this.store.getStageList();\n\t\t\t\t// _this.store.changeStage(stageList[len].id).then((res)=>{\n\t\t\t\t// \tif(res) {\n\t\t\t\t// \t\t// 更新方案设计数据\n\t\t\t\t// \t\t_this.store.proDesign = Object.assign({}, res);\n\t\t\t\t// \t\t// 初始化获取步骤进度信息\n\t\t\t\t// \t\t_this.store.getStageTree();\n\t\t\t\t// \t}  else {\n\t\t\t\t// \t\tmessage.error(\"后端数据错误\");\n\t\t\t\t// \t}\n\t\t\t\t// });\n\t\t\t}\n\t\t});\n\t}\n\n\t// 编辑\n\tchangeStage = (param)=> {\n\t\tlet _this = this;\n        const oldStageId = JSON.parse(JSON.stringify(_this.store.currentStageId));  // old\n        if (oldStageId==param) {\n            openNotificationWithIcon('warning');\n            return false;\n        }\n\t\tif (_this.store.isDesignEdit==false) { // 编辑中状态，增加提示信息，清空数据\n            Modal.confirm({\n                title: '您确定要切换方案设计吗?',\n                content: '未保存的数据,将会被清空',\n                okText:\"确定\",\n                cancelText:\"取消\",\n                onOk() {\n                    _this.store.oldStageId = oldStageId;\n                    _this.store.changeStage(param).then((res)=>{\n                        if(res) {\n                            _this.store.currentStageId = res.id; // new\n                            _this.store.isDesignEdit = true;\n                            // 更新tree\n                            let treeData = JSON.parse(JSON.stringify(_this.store.treeData));\n                            _this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\n\t                        // 初始化获取步骤进度信息\n\t                        _this.store.getStageTree();\n                        }\n                    });\n                },\n                onCancel() {\n\n                }\n            });\n        } else {\n            _this.store.oldStageId = oldStageId;\n            _this.store.changeStage(param).then((res)=>{\n                if(res) {\n                    _this.store.currentStageId = res.id; // new\n                    // 更新tree\n                    let treeData = JSON.parse(JSON.stringify(_this.store.treeData));\n                    _this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\n\t                // 初始化获取步骤进度信息\n\t                _this.store.getStageTree();\n                }\n            });\n        }\n\t}\n\n\trender() {\n        let _this = this;\n        const {visible, deCount, stepObj1, stepObj2, stepObj3, stepObj4, stepObj5} = _this.state;\n        const {proDesign, form} = this.props;\n        const {store, ...withoutStoreProps} = this.props;\n\t\tconst {getFieldDecorator} = form;\n\t\tconst formItemLayout = {\n\t\t\tlabelCol: {\n\t\t\t\txs: {span: 24},\n\t\t\t\tsm: {span: 6},\n\t\t\t},\n\t\t\twrapperCol: {\n\t\t\t\txs: {span: 24},\n\t\t\t\tsm: {span: 16},\n\t\t\t},\n        };\n\t\tconst {projectId, isDesignEdit, state, stageList, currentStageId} = _this.store;\n        let isEdit = projectId==null||projectId==\"\"; // 项目id为空时，不可编辑\n        let hidden = isDesignEdit;\n\t\tconst menu = (\n\t\t\t<Menu className=\"tc work_menu\" style={{width:'150px'}}>\n\t\t\t\t{\n\t\t\t\t\tmobx.toJS(stageList).map((item, index)=>{\n\t\t\t\t\t   return (\n\t\t\t\t\t\t   <Menu.Item key={index} className={item.id==currentStageId?\"work_menu_item work_menu_item_active\":\"work_menu_item\"}>\n\t\t\t\t\t\t\t   <span onClick={this.changeStage.bind(this, item.id)}>{item.stageName}{item.indexs>=2?item.indexs:null}</span>\n\t\t\t\t\t\t\t   {isDesignEdit?null:<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.delStage(item.id)}>\n\t\t\t\t\t\t\t\t   <Icon type=\"close\" className={item.indexs>=2?\"work_menu_close\":\"hidden\"}/>\n\t\t\t\t\t\t\t   </Popconfirm>}\n\t\t\t\t\t\t   </Menu.Item>\n\t\t\t\t\t   )\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t{isDesignEdit?null:<Menu.Divider />}\n\t\t\t\t<Menu.Item className={isDesignEdit?\"hidden\":\"\"}>\n\t\t\t\t\t<Icon onClick={this.addStage} style={{fontSize:'20px'}} type=\"plus-circle\" title=\"新增方案设计\"/>\n\t\t\t\t</Menu.Item>\n\t\t\t</Menu>\n\t\t);\n\t\treturn (\n\t\t\t<Card bordered className=\"mt20\" style={{width: '100%'}}>\n\t\t\t\t\t<h3 id=\"items1\" className=\"kanban_title mb20\">\n\t\t\t\t\t\t<Dropdown overlay={menu}\n\t\t\t\t\t\t\t//visible={visible}\n\t\t\t\t\t\t\t//onVisibleChange={this.onVisibleChange}\n\t\t\t\t\t\t\t//trigger={['click']}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t方案设计{proDesign.indexs>=2?proDesign.indexs:null}<Icon className=\"ml5 pointer\" type=\"caret-down\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</h3>\n                <span className=\"worktile_progress_add\">\n                    {isDesignEdit?\n                        <Button type=\"link\" className={state==2?\"hidden\":\"\"} disabled={isEdit?true:false} onClick={this.onChangeVis}>编辑</Button>:\n                        <div>\n                            <span onClick={this.onCanlc} className=\"mr10\">取消</span>\n\t                      <Button\n\t\t                      disabled={deCount>0?true:false}\n\t\t                      type=\"link\" onClick={this.handleSubmit}>保存</Button>\n                        </div>\n                    }\n                </span>\n\t\t\t\t<Form className={\"clearfix\"} layout=\"inline\" {...formItemLayout}>\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\n                                    initialValue: proDesign.masters==null?[]:proDesign.masters.map((item)=>item.userId),\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择主负责人'}],\n\t\t\t\t\t\t\t\t})(\n                                    <PersonAddIcon\n                                        data={proDesign.masters==null?[]:proDesign.masters}\n                                        updatePerson={this.updatePerson}\n                                        disabled={hidden}\n                                    />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Form>\n                <Row className={\"mt30 mb30\"} >\n                    <Col span={24}>\n                        <StepInfo\n                             key={'step1'}\n                             store={this.store}\n                             data={stepObj1}\n                             stepName={'1. 初步设计'}\n                             {...withoutStoreProps}\n                             disabled={hidden}\n                             saveNodes={this.props.saveNodes}\n                             saveAttachment={this.props.saveAttachment}\n                             delNode={this.props.delNode}\n                             oss={this.props.oss}\n                             updatedeCount={this.updatedeCount}\n                        />\n                        <StepInfo\n                             key={'step2'}\n                             store={this.store}\n                             data={stepObj2}\n                             stepName={'2. 汇报确定'}\n                             {...withoutStoreProps}\n                             disabled={hidden}\n                             saveNodes={this.props.saveNodes}\n                             saveAttachment={this.props.saveAttachment}\n                             delNode={this.props.delNode}\n                             oss={this.props.oss}\n                             updatedeCount={this.updatedeCount}\n                        />\n                        <StepInfo\n                             key={'step3'}\n                             store={this.store}\n                             data={stepObj3}\n                             stepName={'关联任务'}\n                             {...withoutStoreProps}\n                             disabled={hidden}\n                             saveNodes={this.props.saveNodes}\n                             saveAttachment={this.props.saveAttachment}\n                             delNode={this.props.delNode}\n                             oss={this.props.oss}\n                             updatedeCount={this.updatedeCount}\n                        />\n                        <StepInfo\n                             key={'step4'}\n                             store={this.store}\n                             data={stepObj4}\n                             stepName={'3. 深化设计'}\n                             {...withoutStoreProps}\n                             disabled={hidden}\n                             saveNodes={this.props.saveNodes}\n                             saveAttachment={this.props.saveAttachment}\n                             delNode={this.props.delNode}\n                             oss={this.props.oss}\n                             updatedeCount={this.updatedeCount}\n                        />\n                        <StepInfo\n                             key={'step5'}\n                             store={this.store}\n                             data={stepObj5}\n                             stepName={'4. 图纸确认'}\n                             {...withoutStoreProps}\n                             disabled={hidden}\n                             saveNodes={this.props.saveNodes}\n                             saveAttachment={this.props.saveAttachment}\n                             delNode={this.props.delNode}\n                             oss={this.props.oss}\n                             updatedeCount={this.updatedeCount}\n                        />\n                    </Col>\n                </Row>\n\t\t\t</Card>\n\t\t)\n\t}\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/ProjectDesignDetail.js","/*\n* 通用树型结构渲染\n* dangw@glodon.com\n* */\nimport React from 'react';\nimport {inject, observer} from 'mobx-react';\nimport {Card, Form, Row, Col, Button, message} from 'antd';\nimport * as  mobx from 'mobx';\n\nimport EditableTable from \"@/components/worktile/EditableTable\";\nimport MyUpload from \"@/components/worktile/MyUpload\";\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\nimport * as utils from \"@/utils/utils\";\n\n@Form.create()\n@observer\nclass WortileCommonDetail extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.store = this.props.store;\n\t\tthis.state = {\n\t\t\tdataSource: [],   // 任务的数据源\n\t\t\tuserIds:[],\n            hidden: true,  // 面板折叠展开\n            currentTree: {}, // 存储当前组件树对象\n            pid: '',\n            projectId: \"\",\n            defaultTree: {}, // 记录当前树的默认数据\n        };\n\t}\n\n\tcomponentWillReceiveProps(nextProps, nextContext) {\n        /*\n        * 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\n        * */\n        if (nextProps.treeData!==this.props.treeData) {\n            /*根据该节点树型数控制改树结构*/\n            if (nextProps.treeData.children===null) { // 没有任务集合\n                this.setState({\n                    dataSource: []\n                });\n            } else {  // 包含任务集合\n                const dataSource = nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].children;\n                this.setState({\n                    dataSource,\n                    currentTree: Object.assign({}, nextProps.treeData),   // 更新同步\n                    pid: nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].id,\n                    projectId: nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].projectId,\n                    hidden: nextProps.disabled,\n                }, ()=>{\n                    // 更新记录当前树的附件数据\n                    let attc = nextProps.treeData.children.filter((item)=>item.treeType==\"attc\")[0]\n                    if (Object.keys(this.state.defaultTree).length>0) {\n                        // 更新tree\n                        let defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\n                        this.setState({\n                            defaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\n                        });\n                    }\n                })\n            }\n        }\n\t}\n\n\tcomponentDidMount() {\n        /*\n        * 处理树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\n        * */\n        if (this.props.treeData) {\n            /*根据该节点树型数控制改树结构*/\n            if (this.props.treeData.children===null) { // 没有任务集合\n                this.setState({\n                    dataSource: []\n                });\n            } else {  // 包含子任务集合\n                const dataSource = this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].children;\n                this.setState({\n                    dataSource,\n                    currentTree: Object.assign({}, this.props.treeData),\n                    pid: this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].id,\n                    projectId: this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].projectId,\n                    hidden: this.props.disabled\n                })\n            }\n        }\n\t}\n\n\thandleSelChange = (val, e) => {\n\t\tlet userIds;\n\t\tif (e.length) {\n\t\t\tuserIds = e.map((item)=>{return {userId: item.props.value, userName: item.props.children}})\n\t\t} else {\n\t\t\tuserIds  = []\n\t\t}\n\t\tthis.setState({\n\t\t\tuserIds\n\t\t});\n\t\tconst {currentTree} = this.state;\n\t\t// 更新当前树\n        const currentData = Object.assign({}, currentTree, {masters:userIds});\n        this.setState({\n            currentTree: Object.assign({}, currentTree, currentData)\n        });\n    }\n\n\t// 保存\n\thandleSubmit = (e) => {\n\t\te.preventDefault();\n\t\tlet _this = this;\n\t\tconst {currentTree, defaultTree} = _this.state;\n\t\t// 校验1：任务名称必输\n\t\tlet currentDataSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children:[];\n\t\tconst isSub = currentDataSource.filter((item)=>{return item.name==\"\"||item.name==null})\n\t\tif (isSub.length>0) {  // true\n\t\t\tmessage.warn(\"任务名称是必填项\");\n\t\t\treturn false;\n\t\t}\n\t\t// 校验2：主任务内容有没有变动，有则主负责人必输\n        // 记录之前的主任务数据\n        let defaultSource=defaultTree.children!=null&&defaultTree.children[0].children!=null?defaultTree.children[0].children.map(item=>{\n            return {\n                \"name\": item.name,\n                \"masters\": item.masters,\n                \"beginTime\": item.beginTime,\n                \"endTime\": item.endTime,\n                \"rate\": item.rate\n            }\n        }):[];\n        let currentSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children.map(item=>{\n            return {\n                \"name\": item.name,\n                \"masters\": item.masters,\n\t            \"beginTime\": item.beginTime,\n\t            \"endTime\": item.endTime,\n                \"rate\": item.rate\n            }\n        }):[];\n        const isChange = JSON.stringify(defaultSource)==JSON.stringify(currentSource); // 主任务是否变动\n        const isMasters = currentTree&&currentTree.masters==null?[]:currentTree.masters; //是否有主负责人\n        if (isMasters.length==0&&isChange==false) {\n            message.warn(\"主负责人是必填项\");\n            return false;\n        }\n        _this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                _this.props.saveNodes(currentTree);\n                let comStates = JSON.parse(JSON.stringify(_this.store.comStates));\n                _this.store.comStates = Object.assign(comStates, {[_this.props.id]: true})\n            }\n        });\n\t}\n\n    // 更新该节点树 数据\n    saveData2 = (taskdata, key) => {\n        const {currentTree} = this.state;\n        let newData = [];\n        taskdata.forEach(item=>{\n            let {key, children, ...obj} = item;\n            newData.push(obj);\n        });\n        let currentTaskC = currentTree.children.filter(item=> item.treeType==='taskc')[0];\n        currentTaskC = Object.assign(currentTaskC,{\"children\":taskdata})\n        let stepChildren = currentTree.children;\n        const taskcIndex = stepChildren.findIndex(item=> {return item.treeType==='taskc'} )\n        stepChildren[taskcIndex] = currentTaskC;\n        this.setState({currentTree:Object.assign(currentTree, {\"children\":stepChildren})});\n    }\n\n    // 编辑\n    onChangeVis = () => {\n\t    let comStates = JSON.parse(JSON.stringify(this.store.comStates));\n        this.store.comStates = Object.assign(comStates, {[this.props.id]: false});\n        // 点击编辑时记录当前树的默认数据\n        this.setState({\n            defaultTree: Object.assign({}, this.state.currentTree)\n        });\n    }\n\n    // 取消\n    onCanlc = ()=> {\n        this.props.form.resetFields();\n        this.onChangeVis();\n        let comStates = JSON.parse(JSON.stringify(this.store.comStates));\n        this.store.comStates = Object.assign(comStates, {[this.props.id]: true})\n        // 更新tree\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\n    }\n\n    // 人员选择更新\n    updatePerson = (userIds)=>{\n        const {currentTree} = this.state;\n        // 更新当前树\n        const currentData = Object.assign({}, currentTree, {masters:userIds});\n        // 更新tree\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\n    }\n\n\trender() {\n\t\tlet _this = this;\n\t\tconst {getFieldDecorator} = _this.props.form;\n\t\tconst formItemLayout = {\n\t\t\tlabelCol: {\n\t\t\t\txs: {span: 24},\n\t\t\t\tsm: {span: 6},\n\t\t\t},\n\t\t\twrapperCol: {\n\t\t\t\txs: {span: 24},\n\t\t\t\tsm: {span: 16},\n\t\t\t},\n\t\t};\n\t\tconst { hidden, currentTree } = _this.state;\n\t\tconst {state} = _this.store;\n        let currentDataSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children:[];\n        let attcObj = currentTree.children!=null&&currentTree.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\n        const attachments = attcObj.children!=null?attcObj.children.map((vitem) => {\n            return Object.assign({}, {\n                uid: vitem.id,\n                name: vitem.fileName,\n                status: 'done',\n                url: vitem.filePath,\n                fileId: vitem.fileId,\n                fileName:vitem.fileName,\n                filePath: vitem.filePath,\n                id: vitem.id\n            })\n        }) : [];\n        let expandedKeys = mobx.toJS(_this.store.expandedKeys)[this.props.id]!== undefined?mobx.toJS(_this.store.expandedKeys)[this.props.id]:[]\n        let isExp = expandedKeys.length>0?true:false;\n\n        return (\n\t\t\t<Card bordered style={{width: '100%'}} className=\"mt20\">\n\t\t\t\t<h3 id={this.props.rowIndex} className=\"kanban_title mb20\">{_this.props.treeData.stageName}</h3>\n                <span className=\"worktile_progress_add\">\n                    {hidden?\n                        <Button className={state==2?\"hidden\":\"\"} type=\"link\" onClick={this.onChangeVis}>编辑</Button>:\n                        <div>\n                            <span onClick={this.onCanlc} className=\"mr10\">取消</span>\n                            <Button disabled={isExp} type=\"link\" onClick={this.handleSubmit}>保存</Button>\n                        </div>\n                    }\n                </span>\n                <Form className={\"clearfix\"} layout=\"inline\" {...formItemLayout}>\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\n                            <Form.Item label=\"主负责人\" className=\"w\">\n                                {getFieldDecorator('masters', {\n                                    initialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\n                                    rules: [{required: false, message: '请选择主负责人'}],\n                                })(\n                                    <PersonAddIcon\n                                        data={currentTree&&currentTree.masters==null?[]:currentTree.masters}\n                                        updatePerson={this.updatePerson}\n                                        disabled={hidden}\n                                    />\n                                )}\n                            </Form.Item>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Form>\n                {/*任务*/}\n                <EditableTable\n                    id={this.props.id}\n                    dataSource={currentDataSource}\n                    saveData={this.saveData2}\n                    projectId={this.state.projectId}\n                    pid={this.state.pid}\n                    disabled={hidden}\n                    store={this.store}\n                />\n                <div className={hidden?\"mt15\":\"myupload_pos\"}>\n                    <MyUpload\n                        saveAttachment={this.props.saveAttachment}\n                        delNode={this.props.delNode}\n                        fileList={attachments}\n                        pid={attcObj.id}\n                        projectId={attcObj.projectId}\n                        disabled={hidden}\n                        ossData={this.props.oss}\n                    />\n                </div>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\n\nexport default WortileCommonDetail;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/WortileCommonDetail.js"],"sourceRoot":""}