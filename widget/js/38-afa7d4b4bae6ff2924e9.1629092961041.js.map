{"version":3,"sources":["webpack:///./src/containers/order/OrderList.js","webpack:///./src/components/common/MyUpload2.js?06d8","webpack:///./src/components/order/PurchaseOrder.js","webpack:///./src/components/order/SalesOrder.js"],"names":["TabPane","Tabs","OrderList","withRouter","observer","props","callback","key","history","push","setState","activeKey","store","getSalesOrderPageList","getPurchasingOrderPageList","OrderStore","state","search","location","url","parse","query","undefined","salesParams","Object","assign","serial","company","number","beginTime","endTime","pageIndex","pageSize","purchaseParams","address","orderer","getSts","getUserPermissionByAppCode","height","React","Component","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","format","uid","name","UploadToOss","Promise","resolve","reject","multipartUpload","then","data","catch","error","MyUpload","getDocumentUrl","Config","journal","journalSchemas","handleChange","info","status","fileList","oldFileList","JSON","stringify","filter","newFileList","map","originFileObj","host","fileId","fileName","filePath","id","array","_this","loading","setTimeout","saveAttachment","beforeUpload","accept","acceptDefault","type","split","includes","message","warn","isLt2M","size","reader","FileReader","readAsDataURL","onloadend","handlePreview","test","res","previewImage","previewVisible","isAssetTypeAnImage","ext","indexOf","toLowerCase","getExt","index","lastIndexOf","substr","imageArray","item","src","alt","downloadUrl","visible","activeIndex","findIndex","handleCancel","isImage","downloadImage","onDownload","x","XMLHttpRequest","open","responseType","onload","e","response","send","nextProps","ossData","securityToken","multiple","disabled","onChange","listType","onPreview","showUploadList","showDownloadIcon","uploadButton","fontSize","color","display","minHeight","bind","backgroundSize","width","maxHeight","toolbars","concat","render","onClick","activeImage","mobx","InputGroup","Input","Group","RangePicker","DatePicker","customizeRenderEmpty","textAlign","padding","fontFamily","fontWeight","SalesOrder","target","value","onDateChange","dates","dateStrings","length","toJS","valueOf","handleSearch","showSizeChange","current","onPageChange","pageNumber","showTotal","total","record","purchaseTable","purchaseTotalCount","purchaseloading","columns","title","dataIndex","align","text","wordWrap","whiteSpace","atts","salesId","marginLeft","Option","Select","handleAdd","showModal","stateValue","handleOk","params","Number","changeSalesOrderState","success","radioChange","confirm","delSalesOrderState","cancel","console","log","saveAttsToSalesOrder","arr","param","salesOrderId","confirmOrder","buildPurchasingOrder","delUrl","delAttById","stateData","salesTable","salesTotalCount","salesloading","cursor","laborInfos","count","margin","options","label","toString"],"mappings":"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","file":"js/38-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n*订单管理 -- 列表\r\n*dangw@bocspace.cn\r\n*/\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {Tabs} from 'antd';\r\nimport SalesOrder from '@/components/order/SalesOrder';\r\nimport PurchaseOrder from '@/components/order/PurchaseOrder';\r\nimport OrderStore from '@/store/order/OrderStore';\r\nimport url from 'url';\r\nconst {TabPane} = Tabs;\r\n\r\n@inject('OrderStore')\r\n@withRouter\r\n@observer\r\nclass OrderList extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.OrderStore;\r\n\t\tthis.state = {\r\n\t\t\tactiveKey: \"1\",  // 当前活动key\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet search = this.props.location.search;\r\n\t\tconst key = url.parse(search, true).query.key;\r\n\t\tif (key == undefined || key == 1) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tactiveKey: \"1\"\r\n\t\t\t}, ()=> {\r\n                this.store.salesParams = Object.assign({}, {\r\n\t                serial: \"\",\r\n\t                company: \"\",\r\n\t                number: \"\",\r\n\t                state: 10,\r\n\t                beginTime: 0,\r\n\t                endTime: 0,\r\n\t                pageIndex: 1,\r\n\t                pageSize: 10\r\n                });\r\n\t\t\t\tthis.store.getSalesOrderPageList();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tactiveKey: \"2\"\r\n\t\t\t},()=>{\r\n\t\t\t\tthis.store.purchaseParams = Object.assign({}, {\r\n\t\t\t\t\tserial: \"\",\r\n\t\t\t\t\tcompany: \"\",\r\n\t\t\t\t\taddress: \"\",\r\n\t\t\t\t\tbeginTime: 0,\r\n\t\t\t\t\tendTime: 0,\r\n\t\t\t\t\torderer: \"\",\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getPurchasingOrderPageList();\r\n\t\t\t});\r\n\t\t}\r\n\t\t// 获取大文件上传sts\r\n\t\tthis.store.getSts();\r\n\t\t// 已有权限\r\n\t\tthis.store.getUserPermissionByAppCode();\r\n\t}\r\n\r\n\tcallback = (key) => {\r\n\t\tthis.props.history.push(\"/order?key=\"+key);\r\n\t\tthis.setState({\r\n\t\t\tactiveKey: key\r\n\t\t}, () => {\r\n\t\t\tif (key == 1) {  // 销售\r\n\t\t\t\tthis.store.getSalesOrderPageList();\r\n\t\t\t} else {  // 采购\r\n\t\t\t\tthis.store.getPurchasingOrderPageList();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {activeKey} = this.state;\r\n\t\treturn (\r\n\t\t\t<Tabs activeKey={activeKey} onChange={this.callback}>\r\n\t\t\t\t<TabPane tab=\"销售订单\" key=\"1\" style={{height: 'auto'}}>\r\n\t\t\t\t\t<SalesOrder\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TabPane>\r\n\t\t\t\t<TabPane tab=\"采购订单\" key=\"2\" style={{height: 'auto'}}>\r\n\t\t\t\t\t<PurchaseOrder\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</TabPane>\r\n\t\t\t</Tabs>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default OrderList;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/order/OrderList.js","/*\r\n* 大文件上传组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message, Modal} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\nimport Viewer from 'react-viewer';\r\n\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\nimport {downloadFile, download} from \"@/utils/download\";\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `ZJMZ_OpenPlatform/${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n\t\t\t\taccess_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n\t\t\t\tstsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tfilePath: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t\tactiveIndex: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.props.ossData) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: this.props.ossData.accessKeyId,\r\n\t\t\t\t\taccess_key_secret: this.props.ossData.accessKeySecret,\r\n\t\t\t\t\tstsToken: this.props.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgetDocumentUrl = (url) => {\r\n\t\treturn requestPost('getDocumentUrl', Config.journal.getDocumentUrl, journalSchemas.journal.getDocumentUrl, {url: url})\r\n\t}\r\n\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet _this = this;\r\n\t\t\t_this.setState({\r\n\t\t\t\tloading: true\r\n\t\t\t});\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t_this.props.saveAttachment(array);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t});\r\n\t\t\t}, 1000);\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\tlet id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\t// this.props.delNode(id);\r\n\t\t\t}\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tthis.props.saveAttachment(array);\r\n\t\t}\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst {accept} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tif (accept==undefined) {  // 没有传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\t//console.log(accept, file.type, type, 'accept')\r\n\t\t\tif (!acceptDefault.includes(type)) {\r\n                //message.warn(\"格式不对\");\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t} else {   // 外部传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\tif (!accept.includes(type)) {\r\n\t\t\t\tmessage.warn(\"格式不对, 只允许上传图片\");\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\thandlePreview = async file => {\r\n\t\t// 文档\r\n\t\tif (/\\.(doc|docx)$/.test(file.name)||/\\.(xls|xlsx)$/.test(file.name)||/\\.(pdf)$/.test(file.name)||/\\.(zip|rar)$/.test(file.name)||/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\tthis.getDocumentUrl(file.filePath).then((res)=>{\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: res,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}  else {  // 图片、音频\r\n\t\t\t// 文件类型判断\r\n\t\t\tfunction isAssetTypeAnImage(ext) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].\r\n\t\t\t\tindexOf(ext.toLowerCase()) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\t//获取后缀\r\n\t\t\tfunction getExt(filePath) {\r\n\t\t\t\t//获取最后一个.的位置\r\n\t\t\t\tlet index= filePath.lastIndexOf(\".\");\r\n\t\t\t\t//获取后缀\r\n\t\t\t\tlet ext = filePath.substr(index+1);\r\n\t\t\t\treturn ext;\r\n\t\t\t}\r\n\r\n\t\t\tif (isAssetTypeAnImage(getExt(file.filePath))) {  // 判断是图片\r\n\t\t\t\tconst fileList = JSON.parse(JSON.stringify(this.state.fileList));\r\n\t\t\t\tlet imageArray;\r\n\t\t\t\timageArray = fileList.filter((item)=>isAssetTypeAnImage(getExt(item.filePath))).map((item)=>{\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tsrc: item.filePath,\r\n\t\t\t\t\t\talt: item.name,\r\n\t\t\t\t\t\tdownloadUrl: item.filePath\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\timageArray: Object.assign([], imageArray),\r\n\t\t\t\t\tactiveIndex: imageArray.findIndex((item)=>item.src==file.filePath)\r\n\t\t\t\t});\r\n\t\t\t} else {   // 音频\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (type) => this.setState({[type]: false});\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = () => {\r\n\t\tconst {filePath, name} = this.state;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览下载\r\n\tonDownload = (file) => {\r\n\t\tconst {filePath, name} = file;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n        //获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {previewVisible, previewImage, fileList , name, loading, visible, imageArray, activeIndex} = this.state;\r\n\t\tconst {multiple, disabled,accept} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tconst props = {\r\n\t\t\taccept: accept==undefined?acceptDefault:accept,\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tdisabled: disabled,\r\n\t\t\tlistType: \"text\",\r\n\t\t\tonPreview: this.handlePreview,\r\n\t\t\tonDownload: this.onDownload,\r\n\t\t\tshowUploadList: {\r\n\t\t\t\tshowDownloadIcon: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst uploadButton = (\r\n\t\t\t<Icon style={{fontSize: \"16px\", color: \"#1890ff\"}}\r\n\t\t\t      className=\"pointer\"\r\n\t\t\t      type=\"cloud-upload\"\r\n\t\t\t      title=\"上传附件\"\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t    return (\r\n\t\t\t<span style={{\r\n\t\t\t\tdisplay: \"inline-block\"\r\n\t\t\t}}>\r\n\t\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t\t{disabled?null:uploadButton}\r\n\t\t\t\t</Upload>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={<div>{name}\r\n\t\t\t\t\t\t<a href=\"javascript:;\" onClick={this.downloadUrl}>下载</a>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\tvisible={previewVisible}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tonCancel={this.handleCancel.bind(this, 'previewVisible')}>\r\n\t\t\t\t\t{isImage?<iframe\r\n\t\t\t\t\t\tsrc={previewImage}\r\n\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\t\tframeBorder='1'>\r\n\t\t\t\t\t</iframe>:<img style={{ backgroundSize: 'conver',width: '100%', maxHeight: '400px' }} src={previewImage} alt=\"\" />}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Viewer\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.handleCancel.bind(this, 'visible')}\r\n\t\t\t\t\timages={imageArray}\r\n\t\t\t\t\tactiveIndex={activeIndex}\r\n\t\t\t\t\tdownloadable={true}\r\n\t\t\t\t\tcustomToolbar={(toolbars) => {\r\n\t\t\t\t\t\treturn toolbars.filter(item=>item.key!==\"download\").concat([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tkey: \"download\",\r\n\t\t\t\t\t\t\t\trender: (<div><i className=\"react-viewer-icon react-viewer-icon-download\"></i></div>),\r\n\t\t\t\t\t\t\t\tonClick: (activeImage) => {\r\n\t\t\t\t\t\t\t\t\tconst {src, alt} = activeImage;\r\n\t\t\t\t\t\t\t\t\tthis.downloadImage(src, alt);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/MyUpload2.js","/*\r\n*采购订单\r\n*dangw@bocspace.cn\r\n*/\r\nimport React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport moment from 'moment';\r\nimport * as mobx from 'mobx';\r\nimport {withRouter, Link} from \"react-router-dom\";\r\nimport {DatePicker, Button, Table, Pagination, Input, ConfigProvider, message, Popover} from 'antd';\r\nimport {download, downloadFile} from \"@/utils/download\";\r\n\r\nconst InputGroup = Input.Group;\r\nconst {RangePicker} = DatePicker;\r\nconst customizeRenderEmpty = () => (\r\n\t<div style={{textAlign: 'center', padding: '20px 0'}}>\r\n\t\t<img\r\n\t\t\twidth='150px'\r\n\t\t\theight=\"100px\"\r\n\t\t\tsrc='./images/not_found.png'/>\r\n\t\t<p style={{\r\n\t\t\tfontSize: '14px',\r\n\t\t\tfontFamily: 'PingFangSC-Regular,PingFang S',\r\n\t\t\tfontWeight: '400',\r\n\t\t\tcolor: 'rgba(75,80,81,1)'\r\n\t\t}}>暂无数据</p>\r\n\t</div>\r\n);\r\n\r\n@withRouter\r\n@observer\r\nclass SalesOrder extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\tonChange = (type, e) => {\r\n\t\tthis.store.purchaseParams[type] = e.target.value;\r\n\t}\r\n\r\n\tonDateChange = (dates, dateStrings) => {\r\n\t\tif (dates.length == 0) { // 清空\r\n\t\t\tthis.store.purchaseParams = Object.assign(mobx.toJS(this.store.purchaseParams), {\r\n\t\t\t\tbeginTime: 0,\r\n\t\t\t\tendTime: 0,\r\n\t\t\t});\r\n\t\t} else {  // 赋值\r\n\t\t\tthis.store.purchaseParams = Object.assign(mobx.toJS(this.store.purchaseParams), {\r\n\t\t\t\tbeginTime: moment(dateStrings[0]).valueOf(),\r\n\t\t\t\tendTime: moment(dateStrings[1]).valueOf()\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSearch = () => {\r\n\t\tthis.store.getPurchasingOrderPageList();\r\n\t}\r\n\r\n\tshowSizeChange = async (current, pageSize) => {\r\n\t\tthis.store.purchaseParams.pageIndex = 1;\r\n\t\tthis.store.purchaseParams.pageSize = pageSize;\r\n\t\tthis.store.getPurchasingOrderPageList();\r\n\t}\r\n\r\n\tonPageChange = async (pageNumber) => {\r\n\t\tthis.store.purchaseParams.pageIndex = pageNumber;\r\n\t\tthis.store.getPurchasingOrderPageList();\r\n\t}\r\n\r\n\tshowTotal = (total) => {\r\n\t\treturn `共 ${total} 条`;\r\n\t}\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = (record) => {\r\n\t\tconst {filePath, fileName} = record;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(fileName)||/\\.(xls|xlsx)$/.test(fileName)||/\\.(pdf)$/.test(fileName)||/\\.(zip|rar)$/.test(fileName))||(/\\.(ppt|pptx)$/.test(fileName));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, fileName);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, fileName);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n\t\t//获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {purchaseTable, purchaseTotalCount, purchaseParams, purchaseloading} = this.store;\r\n\t\tconst {pageIndex, pageSize} = mobx.toJS(purchaseParams);\r\n\t\tlet columns = [\r\n\t\t\t{title: '序号', dataIndex: 'keyIndex', align: 'center', width: '50px'},\r\n\t\t\t{\r\n\t\t\t\ttitle: '采购订单编号', dataIndex: 'serial', align: 'center', width: '9%', render: (text, record) => {\r\n\t\t\t\t\treturn <Link to={\"/order/purchase?id=\"+record.id}>{text}</Link>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '供货单位', dataIndex: 'supplyCompany', align: 'left', width: '11%',render: (text, record) => {\r\n\t\t\t\t\treturn (<div style={{\r\n\t\t\t\t\t\twordWrap:'break-word',\r\n\t\t\t\t\t\twhiteSpace: 'pre-wrap'}}>{text}</div>)\r\n\t\t\t\t}},\r\n\t\t\t{title: '要货地址', dataIndex: 'address', align: 'center', width: '10%',render: (text, record) => {\r\n\t\t\t\t\treturn (<div style={{\r\n\t\t\t\t\t\twordWrap:'break-word',\r\n\t\t\t\t\t\twhiteSpace: 'pre-wrap'}}>{text}</div>)\r\n\t\t\t\t}},\r\n\t\t\t{\r\n\t\t\t\ttitle: '要货时间', dataIndex: 'orderTime', align: 'center', width: '100px', render: (text, record) => {\r\n\t\t\t\t\treturn text === 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '要货人', dataIndex: 'orderer', align: 'center', width: '100px'},\r\n\t\t\t{\r\n\t\t\t\ttitle: '订单时间', dataIndex: 'orderTime', align: 'center', width: '100px', render: (text, record) => {\r\n\t\t\t\t\treturn text === 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '附件', dataIndex: 'atts', align: 'center', width: '11%', render: (text, record) => {\r\n\t\t\t\t\treturn <span>\r\n\t\t\t\t\t\t{record.atts==null||record.atts==[]?\"\":record.atts.map((item)=>item.fileName)}\r\n\t\t\t\t\t\t{record.atts==null||record.atts==[]||record.atts.length==0?null:<Popover content={<div>\r\n\t\t\t\t\t\t\t{record.atts.map(item=>{\r\n\t\t\t\t\t\t\t\treturn <p>{item.fileName} <a href=\"javascript:void(0);\" onClick={this.downloadUrl.bind(this, item)}>下载</a></p>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>} title=\"附件\" trigger=\"click\">\r\n\t\t\t\t\t\t\t<a href=\"javascript:void(0);\">下载</a>\r\n\t\t\t\t\t\t</Popover>}\r\n\t\t\t\t\t</span>}\r\n\t\t\t},\r\n\t\t\t{title: '销售订单编号', dataIndex: 'salesSerial', align: 'center', render: (text, record) => {\r\n\t\t\t\t\treturn <Link to={\"/order/sales?status=view&id=\"+record.salesId}>{text}</Link>\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{height: 'auto'}}>\r\n\t\t\t\t<div className=\"clearfix\">\r\n\t\t\t\t\t<InputGroup className=\"fl\" style={{width: 'auto'}}>\r\n\t\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'serial')} style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t\t       placeholder=\"采购订单编号\"/>\r\n\t\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'company')} style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t\t       placeholder=\"供货单位\"/>\r\n\t\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'address')} style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t\t       placeholder=\"要货地址\"/>\r\n\t\t\t\t\t\t<RangePicker\r\n\t\t\t\t\t\t\tonChange={this.onDateChange}\r\n\t\t\t\t\t\t\tstyle={{width: 220, marginLeft: 5}}\r\n\t\t\t\t\t\t\tplaceholder={['要货时间', '要货时间']}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'orderer')} className=\"fl\"\r\n\t\t\t\t\t       style={{width: 139, marginLeft: 5}} placeholder=\"要货人\"/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{marginLeft: 5}}\r\n\t\t\t\t\t\tclassName=\"fl\"\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\tonClick={this.handleSearch}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t搜索\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ConfigProvider renderEmpty={customizeRenderEmpty}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName=\"m_table mt20\"\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={mobx.toJS(purchaseTable)}\r\n\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\trowKey={record => record.id}\r\n\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\tloading={purchaseloading}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\tclassName=\"mt20 tr\"\r\n\t\t\t\t\t\tcurrent={pageIndex}\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\ttotal={purchaseTotalCount}\r\n\t\t\t\t\t\tonShowSizeChange={this.showSizeChange}\r\n\t\t\t\t\t\tonChange={this.onPageChange}\r\n\t\t\t\t\t\tshowSizeChanger\r\n\t\t\t\t\t\tshowQuickJumper\r\n\t\t\t\t\t\tshowTotal={this.showTotal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ConfigProvider>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default SalesOrder;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/order/PurchaseOrder.js","/*\r\n*销售订单\r\n*dangw@bocspace.cn\r\n*/\r\nimport React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport moment from 'moment';\r\nimport * as mobx from 'mobx';\r\nimport {withRouter, Link} from \"react-router-dom\";\r\nimport {DatePicker, Select, Button, Table, Pagination, Input, ConfigProvider, message, Icon, Modal, Radio, Popconfirm,Popover} from 'antd';\r\nimport MyUpload2 from \"@/components/common/MyUpload2\";\r\nimport {downloadFile, download} from \"@/utils/download\";\r\nconst InputGroup = Input.Group;\r\nconst {Option} = Select;\r\nconst {RangePicker} = DatePicker;\r\nconst customizeRenderEmpty = () => (\r\n\t<div style={{textAlign: 'center', padding: '50px 0'}}>\r\n\t\t<img\r\n\t\t\twidth='150px'\r\n\t\t\theight=\"100px\"\r\n\t\t\tsrc='./images/not_found.png'/>\r\n\t\t<p style={{\r\n\t\t\tfontSize: '14px',\r\n\t\t\tfontFamily: 'PingFangSC-Regular,PingFang S',\r\n\t\t\tfontWeight: '400',\r\n\t\t\tcolor: 'rgba(75,80,81,1)'\r\n\t\t}}>暂无数据</p>\r\n\t</div>\r\n);\r\n\r\n@withRouter\r\n@observer\r\nclass SalesOrder extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tstateData: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"0\",\r\n\t\t\t\t\tname: \"编辑中\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"1\",\r\n\t\t\t\t\tname: \"已下单\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"2\",\r\n\t\t\t\t\tname: \"生产中\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"3\",\r\n\t\t\t\t\tname: \"运输中\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"4\",\r\n\t\t\t\t\tname: \"已验收\",\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tvisible: false,\r\n\t\t\tstateValue: 0,\r\n\t\t\tid: \"\",\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tthis.props.history.push(\"/order/sales?status=add\")\r\n\t}\r\n\r\n\tonChange = (type, e) => {\r\n\t\tthis.store.salesParams[type] = e.target.value;\r\n\t}\r\n\r\n\tonDateChange = (dates, dateStrings) => {\r\n\t\tif (dates.length == 0) { // 清空\r\n\t\t\tthis.store.salesParams = Object.assign(mobx.toJS(this.store.salesParams), {\r\n\t\t\t\tbeginTime: 0,\r\n\t\t\t\tendTime: 0,\r\n\t\t\t});\r\n\t\t} else {  // 赋值\r\n\t\t\tthis.store.salesParams = Object.assign(mobx.toJS(this.store.salesParams), {\r\n\t\t\t\tbeginTime: moment(dateStrings[0]).valueOf(),\r\n\t\t\t\tendTime: moment(dateStrings[1]).valueOf()\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (type, value) => {\r\n\t\tif (value == undefined) {  // 清空\r\n\t\t\tthis.store.salesParams[type] = 10;\r\n\t\t} else {\r\n\t\t\tthis.store.salesParams[type] = value;\r\n\t\t}\r\n\t}\r\n\r\n\thandleSearch = () => {\r\n\t\tthis.store.getSalesOrderPageList();\r\n\t}\r\n\r\n\tshowSizeChange = async (current, pageSize) => {\r\n\t\tthis.store.salesParams.pageIndex = 1;\r\n\t\tthis.store.salesParams.pageSize = pageSize;\r\n\t\tthis.store.getSalesOrderPageList();\r\n\t}\r\n\r\n\tonPageChange = async (pageNumber) => {\r\n\t\tthis.store.salesParams.pageIndex = pageNumber;\r\n\t\tthis.store.getSalesOrderPageList();\r\n\t}\r\n\r\n\tshowTotal = (total) => {\r\n\t\treturn `共 ${total} 条`;\r\n\t}\r\n\r\n\tshowModal = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: true,\r\n\t\t\tstateValue: record.state,\r\n\t\t\tid: record.id\r\n\t\t});\r\n\t};\r\n\r\n\thandleOk = () => {\r\n\t\tconst {id, stateValue} = this.state;\r\n\t\tconst params = {\r\n\t\t\tid,\r\n\t\t\tstate: typeof stateValue == \"string\" ? Number(stateValue) : stateValue\r\n\t\t}\r\n\t\tthis.store.changeSalesOrderState(params).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t});\r\n\t\t\t\tthis.handleSearch();\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\r\n\thandleCancel = e => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false,\r\n\t\t});\r\n\t};\r\n\r\n\tradioChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tstateValue: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tconfirm = (id) => {\r\n\t\tconst params = {\r\n\t\t\tid: id\r\n\t\t}\r\n\t\tthis.store.delSalesOrderState(params).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\tthis.store.getSalesOrderPageList();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tcancel = (e) => {\r\n\t\tconsole.log(e);\r\n\t}\r\n\r\n\t// 附件\r\n\tsaveAttsToSalesOrder = (type, params) => {\r\n\t\t// 处理附件\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\tfileId: item.fileId,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tid: item.id,\r\n\t\t\t\tuid: item.uid,\r\n\t\t\t\tname: item.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: item.filePath,\r\n\t\t\t})\r\n\t\t});\r\n\t\tconst param = {\r\n\t\t\tatts: arr == null ? [] :arr.map(item => Object.assign({\r\n\t\t\t\tfileId: item.fileId,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tid: item.id\r\n\t\t\t})),\r\n\t\t\tsalesOrderId: type\r\n\t\t}\r\n\t\tthis.store.saveAttsToSalesOrder(param).then((res)=>{\r\n\t\t\tif (res) {\r\n               message.success(\"附件上传成功\");\r\n               // 更新\r\n\t\t\t   this.store.getSalesOrderPageList();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = (record) => {\r\n\t\tconst {filePath, fileName} = record;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(fileName)||/\\.(xls|xlsx)$/.test(fileName)||/\\.(pdf)$/.test(fileName)||/\\.(zip|rar)$/.test(fileName))||(/\\.(ppt|pptx)$/.test(fileName));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, fileName);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, fileName);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n\t\t//获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\t// 生成订单\r\n\tconfirmOrder = (id) => {\r\n\t\tconst params = {\r\n\t\t\tsalesOrderId: id\r\n\t\t}\r\n\t\tthis.store.buildPurchasingOrder(params).then((res)=>{\r\n\t\t\tif (res)  {\r\n\t\t\t\tmessage.success(\"采购订单生成成功！\")\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 删除附件\r\n\tdelUrl = (item) => {\r\n        const {id} = item;\r\n\t\tthis.store.delAttById({id: id}).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"附件删除成功\");\r\n\t\t\t\t// 更新\r\n\t\t\t\tthis.store.getSalesOrderPageList();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {salesTable, salesTotalCount, salesParams, salesloading, ossData} = this.store;\r\n\t\tlet columns = [\r\n\t\t\t{title: '序号', dataIndex: 'keyIndex', align: 'center', width: '50px'},\r\n\t\t\t{title: '订单编号', dataIndex: 'serial', align: 'center', width: '9%', render: (text, record) => {\r\n\t\t\t\t\treturn <Link to={\"/order/sales?status=\"+(record.state==0?\"edit\":\"view\")+\"&id=\"+record.id}>{text}</Link>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '状态', dataIndex: 'state', align: 'left', width: '80px', render: (text, record) => {\r\n\t\t\t\t\treturn <span>{this.state.stateData.filter(item => item.id == text)[0].name || \"\"}\r\n\t\t\t\t\t\t<Icon onClick={this.showModal.bind(this, record)} type=\"form\"\r\n\t\t\t\t\t\t      style={{cursor: \"pointer\", marginLeft: \"3px\", color: \"#1890ff\"}}/></span>;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '客户单位', dataIndex: 'customerCompany', align: 'center',\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div style={{\r\n\t\t\t\t\t\twordWrap:'break-word',\r\n\t\t\t\t\t\twhiteSpace: 'pre-wrap'}}>{text}</div>)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '劳务仓编号', dataIndex: 'number', align: 'center', width: '10%', render: (text, record) => {\r\n\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t{record.laborInfos==null?\"\":record.laborInfos.map((item, index)=>{\r\n\t\t\t\t\t\t\treturn <p key={index}>{item.number}</p>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t    },\r\n\t\t\t{title: '数量', dataIndex: 'unit', align: 'center', width: '80px', render: (text, record) => {\r\n\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t{record.laborInfos==null?\"\":record.laborInfos.map((item, index)=>{\r\n\t\t\t\t\t\t\treturn <p key={index}>{item.count}</p>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '要货时间', dataIndex: 'agreedTime', align: 'center', width: '100px', render: (text, record) => {\r\n\t\t\t\t\treturn text === 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '制单人', dataIndex: 'createUserName', align: 'center', width: '100px'},\r\n\t\t\t{\r\n\t\t\t\ttitle: '下单时间', dataIndex: 'placeOrderTime', align: 'center', width: '100px',\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn text === 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{title: '附件', dataIndex: 'atts', align: 'center', width: '9%', render: (text, record) => {\r\n\t\t\t\t\treturn <span>\r\n\t\t\t\t\t\t{record.atts==null||record.atts==[]?\"\":record.atts.map((item)=>item.fileName)[0]}\r\n\t\t\t\t\t\t{record.atts==null||record.atts==[]||record.atts.length==0?null:<Popover content={<div>\r\n\t\t\t\t\t\t\t{record.atts.map(item=>{\r\n\t\t\t\t\t\t\t\treturn <p>{item.fileName}\r\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" onClick={this.downloadUrl.bind(this, item)}>下载</a>\r\n\t\t\t\t\t\t\t\t&nbsp;&nbsp;<a href=\"javascript:void(0);\" onClick={this.delUrl.bind(this, item)}>删除</a>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>} title=\"附件\" trigger=\"click\">\r\n\t\t\t\t\t\t\t<span style={{color: \"#1890ff\", cursor: \"pointer\"}}>下载</span>\r\n\t\t\t\t\t\t</Popover>}\r\n\t\t\t\t\t</span>}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '操作', dataIndex: 'caozuo', align: 'left', render: (text, record) => {\r\n\t\t\t\t\treturn <span>\r\n\t\t\t\t\t\t\t\t<MyUpload2\r\n\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttsToSalesOrder.bind(this, record.id)}\r\n\t\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\t\t\t//accept={\".jpg,.jpeg,.gif,.png,.bmp\"}\r\n\t\t\t\t\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t\t\t\t\tfileList={[]}\r\n\t\t\t\t\t\t\t\t/>\r\n                           <Popconfirm\r\n\t                           title=\"确定要删除吗?\"\r\n\t                           onConfirm={this.confirm.bind(this, record.id)}\r\n\t                           onCancel={this.cancel}\r\n\t                           okText=\"是\"\r\n\t                           cancelText=\"否\"\r\n                           >\r\n                               <Icon style={{margin: '0 10px', fontSize: \"16px\", color: \"#1890ff\"}} className=\"pointer\"\r\n                                     type=\"delete\" title=\"删除\"/>\r\n                           </Popconfirm>\r\n                           <Icon style={{fontSize: \"16px\", color: \"#1890ff\"}}\r\n                                 onClick={this.confirmOrder.bind(this, record.id)}\r\n                                 className=\"pointer\"\r\n                                 type=\"check-circle\"\r\n                                 title=\"生成采购订单\"/>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t\tconst {stateData, visible, stateValue} = this.state;\r\n\t\tconst {pageIndex, pageSize} = mobx.toJS(salesParams);\r\n\t\tlet options = stateData.map(item => Object.assign({}, {label: item.name, value: item.id}));\r\n\t\treturn (\r\n\t\t\t<div style={{height: 'auto'}}>\r\n\t\t\t\t<div className=\"clearfix\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"fl\"\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\ticon=\"plus\"\r\n\t\t\t\t\t\tonClick={this.handleAdd}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t新增订单\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<InputGroup className=\"fl\" style={{width: 'auto'}}>\r\n\t\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'serial')} style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t\t       placeholder=\"订单编号\"/>\r\n\t\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'company')} style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t\t       placeholder=\"客户单位\"/>\r\n\t\t\t\t\t\t<Input onChange={this.onChange.bind(this, 'number')} style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t\t       placeholder=\"劳务仓编号\"/>\r\n\t\t\t\t\t\t<RangePicker\r\n\t\t\t\t\t\t\tonChange={this.onDateChange}\r\n\t\t\t\t\t\t\tstyle={{width: 220, marginLeft: 5}}\r\n\t\t\t\t\t\t\tplaceholder={['要货时间', '要货时间']}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t<Select allowClear className=\"fl\" style={{width: 139, marginLeft: 5}}\r\n\t\t\t\t\t        onChange={this.handleChange.bind(this, 'state')}\r\n\t\t\t\t\t        placeholder=\"状态\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tstateData.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Option key={item.id} value={item.id}>{item.name}</Option>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{marginLeft: 5}}\r\n\t\t\t\t\t\tclassName=\"fl\"\r\n\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\tonClick={this.handleSearch}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t搜索\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ConfigProvider renderEmpty={customizeRenderEmpty}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName=\"m_table mt20\"\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={mobx.toJS(salesTable)}\r\n\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\trowKey={record => record.id}\r\n\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\tloading={salesloading}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\tclassName=\"mt20 tr\"\r\n\t\t\t\t\t\tcurrent={pageIndex}\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\ttotal={salesTotalCount}\r\n\t\t\t\t\t\tonShowSizeChange={this.showSizeChange}\r\n\t\t\t\t\t\tonChange={this.onPageChange}\r\n\t\t\t\t\t\tshowSizeChanger\r\n\t\t\t\t\t\tshowQuickJumper\r\n\t\t\t\t\t\tshowTotal={this.showTotal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ConfigProvider>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle=\"修改订单状态\"\r\n\t\t\t\t\tokText={\"提交\"}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonOk={this.handleOk}\r\n\t\t\t\t\tonCancel={this.handleCancel}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Radio.Group\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\tonChange={this.radioChange}\r\n\t\t\t\t\t\tvalue={typeof stateValue == \"string\" ? stateValue : stateValue.toString()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default SalesOrder;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/order/SalesOrder.js"],"sourceRoot":""}