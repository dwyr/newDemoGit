{"version":3,"sources":["webpack:///./src/containers/digitalOrg/OfficeManage.js","webpack:///./src/components/common/MyUpload.js?ee17*******","webpack:///./src/components/digitalOrg/EditeVisit.js?09c6**","webpack:///./src/components/digitalOrg/CommentList.js?150b**","webpack:///./~/react-infinite-scroller/dist/InfiniteScroll.js?fad8***","webpack:///./~/react-infinite-scroller/index.js?8839***","webpack:///./src/components/digitalOrg/DigitalComment.js?c802**","webpack:///./src/components/digitalOrg/CommonEmail2.js?d0ae**","webpack:///./src/components/digitalOrg/DetailFormWeekReport.js?097a*","webpack:///./src/components/digitalOrg/PersonEdit.js?822c**","webpack:///./src/components/digitalOrg/DetailFormFactoryreport.js?bf41*"],"names":["mobx","OfficeManage","observer","props","handleEdit","param","dataArray","toJS","store","maintableData","map","item","Object","assign","selested","dindex","findIndex","id","splice","isRead","selestedId","draftId","detemList","digtalTemData","filter","type","temList","getJournalById","then","res","deData","getLikeUsersByJournalId","getCommentsByJournalId","getJournalIndicators","getReadUsersByJournalId","isEdit","child","handleCalc","undefined","handleInfiniteOnLoad","maintotalCount","length","loading","mainQuery","pageIndex","getJournalMainPageListNew","data","concat","body","handleClick","orderType","readType","pageSize","getJournalMainPageList","onChangeState","e","newData","JSON","parse","stringify","state","index","vitem","checked","target","setState","onSelect","value","text","onChange","onAsync","syncAssignment","message","success","detailData","assignments","isSync","handleAddNew","detail","saveAssignments","onRef","ref","onRef2","child2","hanndleVis","hanndleVis2","handleRoute","DigtalOrgStore","digtalKey","history","push","handleDraftRoute","getTable","saveType","tag","category","scrollToAnchor","anchorName","anchorElement","document","getElementById","scrollIntoView","block","err","console","log","checkreadType","OfficeManageStore","ratio","nextProps","nextContext","_this","getJournalTypeList","getJournalTagList","getUserPermissionByAppCode","getSts","emitter","addListener","window","addEventListener","removeListener","removeEventListener","notReadCount","hasMore","tagList","hasJournal","options","opt","name","temType","paddingRight","width","height","display","alignItems","justifyContent","padding","borderBottom","bind","marginLeft","textAlign","color","fontSize","cursor","title","userName","tags","actualTime","format","marginTop","borderLeft","minHeight","paddingLeft","overflowY","location","pathname","React","Component","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","uid","UploadToOss","url","Promise","resolve","reject","multipartUpload","catch","error","MyUpload","getDocumentUrl","Config","journal","journalSchemas","handleChange","info","status","fileList","oldFileList","newFileList","originFileObj","host","fileId","fileName","filePath","array","saveAttachment","changeSrc","obj","beforeUpload","accept","acceptDefault","split","includes","warn","isLt2M","size","journalType","reader","FileReader","readAsDataURL","onloadend","handlePreview","test","previewImage","previewVisible","isAssetTypeAnImage","ext","indexOf","toLowerCase","getExt","lastIndexOf","substr","imageArray","src","alt","downloadUrl","visible","activeIndex","handleCancel","isImage","downloadImage","onDownload","x","XMLHttpRequest","open","responseType","onload","response","send","cancel","appStore","ossData","securityToken","bpm","bpmSchemas","str","multiple","disabled","listType","onPreview","showUploadList","showDownloadIcon","uploadButton","position","top","right","backgroundSize","maxHeight","toolbars","key","render","onClick","activeImage","EditeVisit","saveDraft","handleSubmit","onClose","updateState","timer","setInterval","saveAuto","clearInterval","formItemLayout","labelCol","xs","span","sm","wrapperCol","onCancle","collapsed","isWeekShow","marginRight","CommentList","handleZan","addOrDelLike","handCollection","addOrDelCollection","handleVisibleChange","getSharedEditingList","Array","isArray","editvisible","getLikeUsers","getComments","journalIndicators","username","localStorage","getItem","isLike","haveCollection","userId","isShow","isWeek","viewCount","utils","TextArea","Input","Editor","onSubmit","submitting","Editor2","ExampleComment","setTimeout","addComment","pid","params","mainId","pUserId","reset","onDel","delComment","createTime","children","parentUserName","DigitalComment","clearState","callback","renderTreeNodes","comments","readUsers","treeData","formatList","join","CommonEmail2","getReportUrl","isLoading","journalMain","pdfName","timer22","getDownloadUrl","code","creatWord","wordDownload","pdfDownload","sendReport","emails","userIds","checks","ccEmails","ccUserIds","isemailUserIds","isemails","attType","Number","sendEmail","handleOpen","handleOk","checkedValues","tip","label","listStyle","Text","Typography","DetailFormWeekReport","remove","customList","addAssignments","handleAdd","some","userInformations","updatePerson","fields","audioSrc","clickChange","hanndleChangeEdit","changeCanEdit","userid","Modal","warning","handleCancle","newAddignments","formItemLayoutWithOutLabel","offset","formItemLayoutLabel","journalSub","Base64","decode","sub","atts","attachments","vindex","audio","canEdit","isJeks","dropDown","preventDefault","oldTime","valueOf","isOld","beginTime","zIndex","maxWidth","endTime","__html","weekContent","detailBusiness","detailFactory","detailDigital","detailProducts","corporateGovernance","monthlyWorkBoard","departmentZhglzx2021","departmentGnyxzx2021","departmentCxyxzx2021","departmentXmglzx2021","departmentCpyfzx2021","departmentSczzzx2021","projectBoard","departmentProduct","departmentSolution","departmentMarket","departmentStrategic","departmentSupport","paddingTop","margin","_","colorList","PersonEdit","init","defaultDatas","defaultData","arr","oldSelect","v","selected","users","saveSharedEditing","handClick","handClickDel","trim","handleClickDebounce","filterData","getData","debounce","UserStore","getRole","realname","phone","isFilter","activeData","station","email","backgroundColor","verticalAlign","slice","DetailFormFactoryreport","factoryBuild","productionLine","productsTechnologies","operationalSupport","board"],"mappings":"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CA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrSA,iBAAiB,mBAAO,CAAC,IAAuB;;;;;;;;;;;;;;;;;;;;;ACIhD;;;;AACA;;AACA;;;;AACA;;AACA;;IAAa/R,I;;AACb;;IAAYqT,K;;;;;;;;;;+eATZ;;;;;;IAWQC,Q,GAAaC,W,CAAbD,Q;;AACR,IAAME,SAAS,SAATA,MAAS;AAAA,KAAEvQ,WAAF,QAAEA,WAAF;AAAA,KAAeoB,QAAf,QAAeA,QAAf;AAAA,KAAyBoP,QAAzB,QAAyBA,QAAzB;AAAA,KAAmCC,UAAnC,QAAmCA,UAAnC;AAAA,KAA+CvP,KAA/C,QAA+CA,KAA/C;AAAA,QACd;AAAA;AAAA;AACC;AAAC,aAAD,CAAM,IAAN;AAAA;AACC,iCAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAUE,QAA7B,EAAuC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","file":"js/22-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 公文管理\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Empty, Icon, Tag, Input, Button, AutoComplete, Spin, message} from 'antd';\r\nimport * as  mobx from 'mobx';\r\nimport moment from 'moment';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport DetailFormWeekReport from '@/components/digitalOrg/DetailFormWeekReport';\r\nimport DetailFormFactoryreport from '@/components/digitalOrg/DetailFormFactoryreport';\r\nimport emitter from \"@/utils/events\";\r\nimport DigitalComment from \"@/components/digitalOrg/DigitalComment\";\r\nimport OfficeManageStore from \"store/digitalOrg/OfficeManageStore\";\r\nimport {detectZoom} from \"@/utils/utils\";\r\n\r\n@inject('OfficeManageStore')\r\n@inject('DigtalOrgStore')\r\n@observer\r\nexport default class OfficeManage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.OfficeManageStore;\r\n\t\tthis.state = {\r\n\t\t\tratio: 100\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\t// 初始化查询\r\n\t\t_this.getTable();\r\n\t\tthis.store.getJournalTypeList();\r\n\t\tthis.store.getJournalTagList();\r\n\t\tthis.store.getUserPermissionByAppCode();\r\n\t\t// 获取大文件上传sts\r\n\t\tthis.store.getSts();\r\n\t\t// 时间监听\r\n\t\t_this.emitter = emitter.addListener('journal', () => {\r\n\t\t\t_this.getTable();\r\n\t\t});\r\n\t\twindow.addEventListener(\"resize\", function() {\r\n\t\t\t_this.setState({\r\n\t\t\t\tratio: detectZoom()\r\n\t\t\t});}, false);\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tif (this.emitter) {\r\n\t\t\temitter.removeListener(this.emitter);\r\n\t\t}\r\n\t\twindow.removeEventListener(\"resize\", function() {\r\n\t\t\tthis.setState({\r\n\t\t\t\tratio: 100\r\n\t\t\t});}, false);\r\n\t}\r\n\r\n\t// 切换详情\r\n\thandleEdit = (param) => {\r\n\t\tlet dataArray = mobx.toJS(this.store.maintableData).map((item) => Object.assign(item, {selested: false}));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selested: true, isRead: true}))\r\n\t\tthis.store.maintableData = Object.assign([], dataArray);\r\n\t\tthis.store.selestedId = param.id;\r\n\t\tthis.store.draftId = param.id;  // 记录草稿ID\r\n\t\tthis.store.detemList = Object.assign({}, mobx.toJS(this.store.digtalTemData).filter(item=>item.type==param.type)[0]);\r\n\t\tthis.store.temList = Object.assign({}, mobx.toJS(this.store.digtalTemData).filter(item=>item.type==param.type)[0]);\r\n\t\tthis.store.getJournalById(param.id)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.store.deData = Object.assign({}, res);\r\n\t\t\t});\r\n\t\t// 点赞\r\n\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t// 评论\r\n\t\tthis.store.getCommentsByJournalId();\r\n\t\tthis.store.getJournalIndicators();\r\n\t\tthis.store.getReadUsersByJournalId();\r\n\t\tthis.store.isEdit = false;  // 详情态\r\n\t\tif (this.child&&this.child.handleCalc!=undefined&&typeof this.child.handleCalc == \"function\") {\r\n\t\t\tthis.child.handleCalc();\r\n\t\t}\r\n\t}\r\n\r\n\t// 获取下一页信息\r\n\thandleInfiniteOnLoad = () => {\r\n\t\tlet dataArray = mobx.toJS(this.store.maintableData);\r\n\t\tif (this.store.maintotalCount === dataArray.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.store.loading = true;\r\n\t\tthis.store.mainQuery.pageIndex = this.store.mainQuery.pageIndex + 1;\r\n\t\tthis.store.getJournalMainPageListNew().then((res) => {\r\n\t\t\tconst data = res;\r\n\t\t\tdataArray = dataArray.concat(data.body);\r\n\t\t\tthis.store.maintableData = Object.assign([], dataArray);\r\n\t\t\tthis.store.loading = false;\r\n\t\t});\r\n\t}\r\n\r\n\thandleClick = (type) => {\r\n\t\tthis.store.mainQuery.orderType = type;\r\n\t\tthis.store.mainQuery.readType = 0;\r\n\t\tthis.store.mainQuery.pageIndex = 1;\r\n\t\tthis.store.mainQuery.pageSize = 10;\r\n\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 设置状态\r\n\tonChangeState = (type, item, e) => {\r\n\t\tlet newData = JSON.parse(JSON.stringify(this.state[type]));\r\n\t\tlet index = newData.findIndex(vitem => vitem == item.type);\r\n\t\tconst {checked} = e.target;\r\n\t\tif (index == -1) {  // 新增\r\n\t\t\tthis.setState({\r\n\t\t\t\t[type]: [...newData, item.type]\r\n\t\t\t}, () => {\r\n\t\t\t\t// 查询\r\n\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\ttype: Object.assign([], this.state[type]),\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getJournalMainPageList();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (checked == false) { // 取消选中\r\n\t\t\t\tnewData.splice(index, 1);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[type]: Object.assign([], newData)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// 查询\r\n\t\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\t\ttype: Object.assign([], this.state[type]),\r\n\t\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\t\tpageSize: 10\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.store.getJournalMainPageList();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSelect = (value) => {\r\n\t\t// 查询\r\n\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\ttext: value,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10\r\n\t\t});\r\n\t\tthis.store.getJournalMainPageList();\r\n\t}\r\n\r\n\tonChange = (value) => {\r\n\t\t// 查询\r\n\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\ttext: value,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10\r\n\t\t});\r\n\t\tthis.store.getJournalMainPageList();\r\n\t}\r\n\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.store.syncAssignment(id).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"同步成功\");\r\n\t\t\t\t// 前端同步数据\r\n\t\t\t\tlet detailData = JSON.parse(JSON.stringify(this.store.deData));\r\n\t\t\t\tlet assignments = detailData[type];\r\n\t\t\t\tassignments[index].isSync = 1; // 同步成功\r\n\t\t\t\tthis.store.deData = Object.assign(detailData, {\r\n\t\t\t\t\t[type]: assignments\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存追加任务\r\n\thandleAddNew = (detail) => {\r\n\t\tthis.store.saveAssignments(detail).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\r\n\t\t\t\t// 重查\r\n\t\t\t\tthis.store.getJournalById(this.store.selestedId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.store.deData = Object.assign({}, res);\r\n\t\t\t\t\tthis.child.handleCalc();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tonRef2 = (ref) => {\r\n\t\tthis.child2 = ref\r\n\t}\r\n\r\n\thanndleVis = () => {\r\n\t\tconst {mainQuery} = this.store;\r\n\t\tconst orderType = mobx.toJS(mainQuery).orderType;\r\n\t\tif (orderType==0) {\r\n\t\t\tthis.handleClick(1);\r\n\t\t} else if (orderType==1) {\r\n\t\t\tthis.handleClick(2);\r\n\t\t} else {\r\n\t\t\tthis.handleClick(1);\r\n\t\t}\r\n\t}\r\n\r\n\thanndleVis2 = () => {\r\n\t\tconst {mainQuery} = this.store;\r\n\t\tconst orderType = mobx.toJS(mainQuery).orderType;\r\n\t\tif (orderType==0) {\r\n\t\t\tthis.handleClick(4);\r\n\t\t} else if (orderType==4) {\r\n\t\t\tthis.handleClick(3);\r\n\t\t} else {\r\n\t\t\tthis.handleClick(4);\r\n\t\t}\r\n\t}\r\n\r\n\t// 提交发布成功，跳转到知识管理\r\n\thandleRoute = () => {\r\n\t\tthis.props.DigtalOrgStore.digtalKey = \"5\";\r\n\t\tthis.props.history.push(\"/digital/office\");\r\n\t}\r\n\r\n\t// 草稿保存成功，跳转到草稿箱\r\n\thandleDraftRoute = () => {\r\n\t\tthis.props.DigtalOrgStore.digtalKey = \"5\";\r\n\t\tthis.props.history.push(\"/digital/office/draft\");\r\n\t}\r\n\r\n\t// 重查\r\n\tgetTable = () => {\r\n\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\tsaveType: 2,\r\n\t\t\ttext: \"\",\r\n\t\t\ttag: [],\r\n\t\t\ttype: [],\r\n\t\t\torderType: 0,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tcategory: 2,\r\n\t\t\treadType: 0\r\n\t\t});\r\n\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\"+err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 未读\r\n\tcheckreadType = () =>{\r\n\t\tlet mainQuery = JSON.parse(JSON.stringify(this.store.mainQuery));\r\n\t\tif (mainQuery.readType==0) {\r\n\t\t\t// 查询\r\n\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\treadType: 1,\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t});\r\n\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 查询\r\n\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\treadType: 0,\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t});\r\n\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {notReadCount, maintableData, loading, hasMore, maintotalCount, digtalTemData, mainQuery, tagList, detailData, hasJournal, temList, isEdit, deData, detemList} = this.store;\r\n\t\tconst options = mobx.toJS(tagList).map(opt => opt.name);\r\n\t\tconst orderType = mobx.toJS(mainQuery).orderType;\r\n\t\tconst readType = mobx.toJS(mainQuery).readType;\r\n\t\tconst temType = mobx.toJS(detemList).type;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w clearfix pr\">\r\n\t\t\t\t<div className=\"fl\" style={{paddingRight: '16px', width: '330px', height: \"calc(100vh - 180px)\"}}>\r\n\t\t\t\t\t<div className=\"clearfix\"\r\n\t\t\t\t\t     style={{\r\n\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\talignItems:'center',\r\n\t\t\t\t\t\tjustifyContent: 'flext-start',\r\n\t\t\t\t\t\tpadding: '0 0 10px 0',\r\n\t\t\t\t\t\tborderBottom: '1px solid #e6e6e6'}}>\r\n\t\t\t\t\t\t<Button size=\"small\" type=\"link\" style={{padding: '0 2px'}} onClick={this.hanndleVis}>最新</Button>\r\n\t\t\t\t\t\t<span style={{display: 'inline-block', width: '21px'}}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleClick.bind(this, 2)} type=\"caret-up\" className={orderType==1?\"caret-up digital_icon_active\":\"digital_icon caret-up\"}/>\r\n\t                        <Icon onClick={this.handleClick.bind(this, 1)} type=\"caret-down\" className={orderType==2?\"caret-down digital_icon_active\":\"digital_icon caret-down\"}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<Button size=\"small\" type=\"link\" style={{marginLeft:'1px', padding: '0 2px'}} onClick={this.hanndleVis2}>最热</Button>\r\n\t\t\t\t\t\t<span style={{display: 'inline-block', width: '21px'}}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleClick.bind(this, 3)} type=\"caret-up\" className={orderType==4?\"caret-up digital_icon_active\":\"digital_icon caret-up\"}/>\r\n\t                        <Icon onClick={this.handleClick.bind(this, 4)} type=\"caret-down\" className={orderType==3?\"caret-down digital_icon_active\":\"digital_icon caret-down\"}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tonClick={this.checkreadType}\r\n\t\t\t\t\t\t\tstyle={{textAlign: 'center',color: readType==0?\"#666\":\"#1E91FF\", display: 'inline-block', width: '70px', fontSize: '14px', cursor: 'pointer'}}>\r\n\t\t\t\t\t\t\t未读({notReadCount>=99?\"99+\":notReadCount})</span>\r\n\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\tclassName=\"certain-category-search fr\"\r\n\t\t\t\t\t\t\tdropdownClassName=\"certain-category-search-dropdown\"\r\n\t\t\t\t\t\t\tdropdownMatchSelectWidth={false}\r\n\t\t\t\t\t\t\tdropdownStyle={{width: '125px'}}\r\n\t\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\t\tstyle={{width: '145px', marginLeft: '6px'}}\r\n\t\t\t\t\t\t\tdataSource={options}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t\toptionLabelProp=\"value\"\r\n\t\t\t\t\t\t\tonSelect={this.onSelect}\r\n\t\t\t\t\t\t\tonSearch={this.onChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input suffix={<Icon type=\"search\" className=\"certain-category-icon\"/>}/>\r\n\t\t\t\t\t\t</AutoComplete>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"require-table\" style={{height: \"calc(100% - 63px)\"}}>\r\n\t\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\theight: \"calc(100% - 10px)\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tautoHide={false}>\r\n\t\t\t\t\t\t\t{mobx.toJS(maintableData).length > 0 ?\r\n\t\t\t\t\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\t\t\t\t\tinitialLoad={false}\r\n\t\t\t\t\t\t\t\t\tpageStart={0}\r\n\t\t\t\t\t\t\t\t\tloadMore={this.handleInfiniteOnLoad.bind(this)}\r\n\t\t\t\t\t\t\t\t\thasMore={!loading && hasMore}\r\n\t\t\t\t\t\t\t\t\tuseWindow={false}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{mobx.toJS(maintableData).length > 0 && mobx.toJS(maintableData).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={item.selested == true ? \"require-tr require-tr-active\" : \"require-tr\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleEdit.bind(this, item)}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={'tab-' + index}>\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={item.isRead == true ? \"require-td\" : \"require-td active\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={item.title}>{item.title}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"require-title\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"mr5\">{item.userName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.tags == null ? null : item.tags.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn <Tag\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={index >= 2 ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"gold\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"require-lavel\">{moment(item.actualTime).format(\"YYYY-MM-DD\")}</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t{loading && hasMore && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"demo-loading-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Spin/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</InfiniteScroll> : <Empty imageStyle={{marginTop: \"50px\"}}/>}\r\n\t\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\tcolor: 'rgb(153, 153, 153)'\r\n\t\t\t\t\t}}>{`共 ${maintotalCount} 条 `}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"fl\" style={{width: 'calc(100% - 350px)', borderLeft: '1px solid #EBEBEB', minHeight: '350px', paddingLeft: '15px',overflowY: 'scroll', height: \"calc(100vh - 180px)\"}}>\r\n\t\t\t\t\t{temType===\"weekreport\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormWeekReport\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{temType===\"factoryreport\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormFactoryreport\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{/*评论、点赞*/}\r\n\t\t\t\t\t{mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/>:!isEdit?<DigitalComment\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t/>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/digitalOrg/OfficeManage.js","/*\r\n* 大文件上传组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message, Modal} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\nimport Viewer from 'react-viewer';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\nimport {downloadFile, download} from \"@/utils/download\";\r\nimport bpmSchemas from \"@/utils/Schemas/bpm\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n@inject('appStore')\r\n@observer\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.appStore;\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '', // oss的key_id\r\n\t\t\t\taccess_key_secret: '', // oss的secret\r\n\t\t\t\tstsToken: '',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tfilePath: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t\tactiveIndex: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.journalType) {\r\n\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t}\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 阿里云上传参数\r\n\t\trequestPost('getSts', Config.bpm.getSts, bpmSchemas.bpm.getSts, {})\r\n\t\t.then((res)=>{\r\n\t\t\tlet str = typeof res ==\"string\"?JSON.parse(res):res;\r\n\t\t\tif (str) {\r\n\t\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\t\taccess_key_id: str.accessKeyId,\r\n\t\t\t\t\t\taccess_key_secret: str.accessKeySecret,\r\n\t\t\t\t\t\tstsToken: str.securityToken\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDocumentUrl = (url) => {\r\n\t\treturn requestPost('getDocumentUrl', Config.journal.getDocumentUrl, journalSchemas.journal.getDocumentUrl, {url: url})\r\n\t}\r\n\r\n\t// 只用做删除操作\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\t/*let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet _this = this;\r\n\t\t\t_this.setState({\r\n\t\t\t\tloading: true\r\n\t\t\t});\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t_this.props.saveAttachment(array);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t});\r\n\t\t\t}, 3000);*/\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\t/*let id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\t// this.props.delNode(id);\r\n\t\t\t}*/\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tthis.props.saveAttachment(array);\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新url\r\n\tchangeSrc = (res, file) => {\r\n\t\tconst {fileList, host} = this.state;\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList));\r\n\r\n\t\tconst url = host + uploadPath('path', file);\r\n\t\tlet obj = Object.assign({}, {\r\n\t\t\tuid: file.uid,\r\n\t\t\tname: file.name,\r\n\t\t\tstatus: \"done\",\r\n\t\t\turl: url,\r\n\t\t\tfileId: null,\r\n\t\t\tfileName: file.name,\r\n\t\t\tfilePath: url,\r\n\t\t\tid: \"\",\r\n\t\t});\r\n\t\tlet newFileList = [obj];\r\n\r\n\t\t// 处理附件\r\n\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\tthis.props.saveAttachment(array);\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst {accept} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tif (accept==undefined) {  // 没有传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\t//console.log(accept, file.type, type, 'accept')\r\n\t\t\tif (!acceptDefault.includes(type)) {\r\n                //message.warn(\"格式不对\");\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t} else {   // 外部传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\tif (!accept.includes(type)) {\r\n\t\t\t\tmessage.warn(\"格式不对, 只允许上传图片\");\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = true; // 记录一次\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\t// 处理地址\r\n\t\t\t\tconst {res} = data;\r\n\t\t\t\tif (res.status&&res.status==200) {  // 单个文件上传成功\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.changeSrc(res, file);\r\n\t\t\t\t}\r\n\t\t\t}).catch((error)=>{\r\n\t\t\t\t\tmessage.error(\"文件上传失败\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\thandlePreview = async file => {\r\n\t\t// 文档\r\n\t\tif (/\\.(doc|docx)$/.test(file.name)||/\\.(xls|xlsx)$/.test(file.name)||/\\.(pdf)$/.test(file.name)||/\\.(zip|rar)$/.test(file.name)||/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\tthis.getDocumentUrl(file.filePath).then((res)=>{\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: res,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}  else {  // 图片、音频\r\n\t\t\t// 文件类型判断\r\n\t\t\tfunction isAssetTypeAnImage(ext) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].\r\n\t\t\t\tindexOf(ext.toLowerCase()) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\t//获取后缀\r\n\t\t\tfunction getExt(filePath) {\r\n\t\t\t\t// 去掉url的问号\r\n\t\t\t\tif (filePath.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\tfilePath = filePath.split(\"?\")[0];\r\n\t\t\t\t}\r\n\t\t\t\t//获取最后一个.的位置\r\n\t\t\t\tlet index= filePath.lastIndexOf(\".\");\r\n\t\t\t\t//获取后缀\r\n\t\t\t\tlet ext = filePath.substr(index+1);\r\n\t\t\t\treturn ext;\r\n\t\t\t}\r\n\r\n\t\t\tif (isAssetTypeAnImage(getExt(file.filePath))) {  // 判断是图片\r\n\t\t\t\tconst fileList = JSON.parse(JSON.stringify(this.state.fileList));\r\n\t\t\t\tlet imageArray;\r\n\t\t\t\timageArray = fileList.filter((item)=>isAssetTypeAnImage(getExt(item.filePath))).map((item)=>{\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tsrc: item.filePath,\r\n\t\t\t\t\t\talt: item.name,\r\n\t\t\t\t\t\tdownloadUrl: item.filePath\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\timageArray: Object.assign([], imageArray),\r\n\t\t\t\t\tactiveIndex: imageArray.findIndex((item)=>item.src==file.filePath)\r\n\t\t\t\t});\r\n\t\t\t} else {   // 音频\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (type) => this.setState({[type]: false});\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = () => {\r\n\t\tconst {filePath, name} = this.state;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览下载\r\n\tonDownload = (file) => {\r\n\t\tconst {filePath, name} = file;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n        //获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\t// 取消上传\r\n\tcancel =  () =>{\r\n\t\tthis.setState({\r\n\t\t\tloading: false,\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = false; // 清楚记录\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {previewVisible, previewImage, fileList , name, loading, visible, imageArray, activeIndex} = this.state;\r\n\t\tconst {multiple, disabled,accept, length} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tconst props = {\r\n\t\t\taccept: accept==undefined?acceptDefault:accept,\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tdisabled: disabled,\r\n\t\t\tlistType: \"picture-card\",\r\n\t\t\tonPreview: this.handlePreview,\r\n\t\t\tonDownload: this.onDownload,\r\n\t\t\tshowUploadList: {\r\n\t\t\t\tshowDownloadIcon: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst uploadButton = (\r\n\t\t\t<div className=\"pr\">\r\n\t\t\t\t<Icon type={loading?\"loading\":\"plus\"} />\r\n\t\t\t\t{loading?<div className=\"ant-upload-text\">上传中</div>:null}\r\n\t\t\t\t{loading?<Icon type=\"stop\"\r\n\t\t\t\t               title=\"取消上传\"\r\n\t\t\t\t               style={{\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '-39px',\r\n\t\t\t\t\tright: '-22px',\r\n\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\tcolor: '#1890ff'\r\n\t\t\t\t}} onClick={this.cancel}/>:null}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\r\n\t    return (\r\n\t\t\t<div className=\"affairs_upload\">\r\n\t\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t\t{disabled||length>=\"1\"?null:uploadButton}\r\n\t\t\t\t</Upload>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={<div>{name}\r\n\t\t\t\t\t\t<a href=\"javascript:;\" onClick={this.downloadUrl}>下载</a>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\tvisible={previewVisible}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tonCancel={this.handleCancel.bind(this, 'previewVisible')}>\r\n\t\t\t\t\t{isImage?<iframe\r\n\t\t\t\t\t\tsrc={previewImage}\r\n\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\t\tframeBorder='1'>\r\n\t\t\t\t\t</iframe>:<img style={{ backgroundSize: 'conver',width: '100%', maxHeight: '400px' }} src={previewImage} alt=\"\" />}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Viewer\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.handleCancel.bind(this, 'visible')}\r\n\t\t\t\t\timages={imageArray}\r\n\t\t\t\t\tactiveIndex={activeIndex}\r\n\t\t\t\t\tdownloadable={true}\r\n\t\t\t\t\tcustomToolbar={(toolbars) => {\r\n\t\t\t\t\t\treturn toolbars.filter(item=>item.key!==\"download\").concat([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tkey: \"download\",\r\n\t\t\t\t\t\t\t\trender: (<div><i className=\"react-viewer-icon react-viewer-icon-download\"></i></div>),\r\n\t\t\t\t\t\t\t\tonClick: (activeImage) => {\r\n\t\t\t\t\t\t\t\t\tconst {src, alt} = activeImage;\r\n\t\t\t\t\t\t\t\t\tthis.downloadImage(src, alt);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/MyUpload.js","/*\r\n* 编辑表单\r\n* 2020-07-21\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Popconfirm} from 'antd';\r\nimport * as  mobx from 'mobx';\r\nimport EditeFormVisit from './EditeFormVisit';\r\nimport EditeFormMonthlySharing from './EditeFormMonthlySharing';\r\nimport EditeFormSummary from './EditeFormSummary';\r\nimport EditeFormReplay from './EditeFormReplay';\r\nimport EditeFormNews from './EditeFormNews';\r\nimport EditeFormWeekreport from './EditeFormWeekreport';\r\nimport EditeFormFactoryreport from './EditeFormFactoryreport';\r\n\r\n@inject('appStore')\r\n@observer\r\nclass EditeVisit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\tlet {pathname} = _this.props;\r\n\t\tif (pathname&&pathname.includes(\"/digital/draft\")&&_this.store.draftId!=\"\") {\r\n\t\t\t// 定时器\r\n\t\t\t_this.timer = setInterval(() => {\r\n\t\t\t\t// 心跳接口 30s跳动一个\r\n\t\t\t\t_this.child.saveAuto(0);\r\n\t\t\t}, 30000);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount () {\r\n\t\t// 页面离开时清楚定时器\r\n\t\tthis.timer&&clearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t}\r\n\r\n\tsaveDraft = () => {\r\n\t\tthis.child.saveDraft();\r\n\t}\r\n\r\n\thandleSubmit = ()=> {\r\n\t\tthis.child.handleSubmit();\r\n\t}\r\n\r\n\tonClose = () => {\r\n\t\tthis.child.onClose();\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: data\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tlet {detailData, temType} = this.props;\r\n\t\tconst {loading} = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t{temType==\"visit\"? <EditeFormVisit\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"monthlySharing\"? <EditeFormMonthlySharing\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"summary\"? <EditeFormSummary\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"replay\"? <EditeFormReplay\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"news\"? <EditeFormNews\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"weekreport\"? <EditeFormWeekreport\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"factoryreport\"? <EditeFormFactoryreport\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\tsm: {span: 24}\r\n\t\t\t\t\t}}\r\n                    className=\"clearfix tr mt20 pl20 pr20 fixed_bottom\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: this.props.appStore.collapsed?\"calc(100% - 470px)\":\" calc(100% - 590px)\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.isWeekShow!=undefined&&this.props.isWeekShow==false?null:<Button className=\"fl\"\r\n\t\t\t\t\t\t                                                                            shape=\"round\"\r\n\t\t\t\t\t\t                                                                            style={{\r\n\t\t\t\t\t\t\t                                                                            position: 'relative',\r\n\t\t\t\t\t\t\t                                                                            top: '4px'\r\n\t\t\t\t\t\t                                                                            }}\r\n\t\t\t\t\t\t                                                                            type=\"primary\"\r\n\t\t\t\t\t\t                                                                            onClick={this.saveDraft}>\r\n\t\t\t\t\t\t\t保存草稿\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消本次编辑吗?\" onConfirm={() => this.onClose()}>\r\n\t\t\t\t\t\t<Button shape=\"round\" style={{marginRight: 8}}>\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<Button shape=\"round\"\r\n\t\t\t\t\t        loading={loading}\r\n\t\t\t\t\t        onClick={this.handleSubmit}\r\n\t\t\t\t\t        type=\"primary\">\r\n\t\t\t\t\t\t提交发布\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\nexport default EditeVisit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/EditeVisit.js","/*\r\n* 评论、点赞、浏览量\r\n* dangwei@bocspace.com\r\n* */\r\nimport React, {Component} from \"react\";\r\nimport { Icon, Tooltip, message, Button, Popover, Spin } from 'antd';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport CommonEmail2 from \"@/components/digitalOrg/CommonEmail2\";\r\nimport PersonEdit from \"@/components/digitalOrg/PersonEdit\";\r\n\r\n@observer\r\nexport default class CommentList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tvisible: false,\r\n\t\t\ttitle: \"添加共享人\",\r\n\t\t\teditvisible: false,\r\n\t\t\tdata: [],\r\n\t\t\tloading: false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\t// 点赞\r\n\thandleZan = () =>{\r\n\t\tthis.store.addOrDelLike()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 收藏\r\n\thandCollection = () =>{\r\n\t\tthis.store.addOrDelCollection()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getJournalIndicators();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleVisibleChange = visible => {\r\n\t\tthis.setState({ visible });\r\n\t};\r\n\r\n\t// 定位\r\n\tscrollToAnchor(key) {\r\n\t\tconst {scrollToAnchor} = this.props;\r\n\t\tscrollToAnchor(key);\r\n\t}\r\n\r\n\t// 共享编辑\r\n\thandleEdit = () => {\r\n\t\tthis.store.getSharedEditingList().then((res)=>{\r\n\t\t\tif (res==null||(Array.isArray(res)&&res.length==0)) {\r\n\t\t\t\tthis.setState({\r\n                   title: \"添加共享人\",\r\n\t\t\t\t   editvisible: true,\r\n\t\t\t\t   data: res==null?[]: res\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttitle: \"编辑共享人\",\r\n\t\t\t\t\teditvisible: true,\r\n\t\t\t\t\tdata: res==null?[]: res\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClose = (type, param) =>{\r\n\t\tthis.setState({\r\n\t\t\t[type]: param\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, param) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: param\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {getLikeUsers, getComments, journalIndicators, } = this.store;\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst isLike = mobx.toJS(getLikeUsers).filter(item=>item.userName==username).length>0?true:false;\r\n\t\tconst {haveCollection} = mobx.toJS(journalIndicators);\r\n\t\tconst {pathname, detailData, isWeekShow, userId} = this.props;\r\n\t\tconst isShow = pathname!==undefined&&pathname==\"/digital/office\"?true:false;\r\n\t\tconst {editvisible, title, data, loading} = this.state;\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isWeek = isWeekShow==undefined?false:isWeekShow!=undefined&&(isWeekShow);\r\n\r\n\t\treturn (<span>\r\n\t\t\t   <Tooltip title=\"评论\">\r\n                  <Icon type=\"message\" className=\"commentlist_icon\" onClick={this.scrollToAnchor.bind(this, \"commentlist\")}/>\r\n                </Tooltip> <span className=\"commentlist_title\">{mobx.toJS(getComments).length}</span>\r\n\t\t\t\t<Tooltip title=\"点赞\">\r\n\t\t\t\t\t{isLike?<Icon type=\"like\" theme=\"filled\" className=\"commentlist_icon pointer\" onClick={this.handleZan}/>: <Icon type=\"like\" className=\"commentlist_icon pointer\" onClick={this.handleZan}/>}\r\n\t                </Tooltip><span className=\"commentlist_title\">{mobx.toJS(getLikeUsers).length}</span>\r\n\t\t\t\t<Tooltip title=\"已读\">\r\n\t                 <Icon type=\"eye\" className=\"commentlist_icon\"/>\r\n\t            </Tooltip><span className=\"commentlist_title\">{mobx.toJS(journalIndicators).viewCount||0}</span>\r\n\t\t\t\t{!isShow?<Tooltip title={\"收藏\"}>\r\n\t\t\t\t\t<Icon theme={haveCollection==1?\"filled\":\"\"} type=\"star\" className=\"commentlist_icon pointer\" onClick={this.handCollection}/>\r\n\t\t\t\t</Tooltip>:null}\r\n\t\t\t\t<Popover\r\n\t\t\t\t\toverlayClassName=\"digital_popver\"\r\n\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\tcontent={<CommonEmail2\r\n\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tstore={this.store} />}\r\n\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\tvisible={this.state.visible}\r\n\t\t\t\t\tonVisibleChange={this.handleVisibleChange}\r\n\t\t\t\t>\r\n\t               <Button className=\"ml10\" type=\"link\">分享</Button>\r\n\t            </Popover>\r\n\t\t\t   {isWeek?<Button type=\"link\" onClick={this.handleEdit}>共享编辑</Button>:null}\r\n\t\t\t     <PersonEdit\r\n\t\t\t       title={title}\r\n\t\t\t       visible={editvisible}\r\n\t\t\t       onClose={this.onClose.bind(this, \"editvisible\", false)}\r\n\t\t\t       data={data}\r\n\t\t\t       store={this.store}\r\n\t\t\t     />\r\n              <Spin wrapperClassName=\"dib\" tip=\"正在生成,请稍等...\" spinning={loading} />\r\n\t\t\t</span>);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/CommentList.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InfiniteScroll = function (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  function InfiniteScroll(props) {\n    _classCallCheck(this, InfiniteScroll);\n\n    var _this = _possibleConstructorReturn(this, (InfiniteScroll.__proto__ || Object.getPrototypeOf(InfiniteScroll)).call(this, props));\n\n    _this.scrollListener = _this.scrollListener.bind(_this);\n    _this.eventListenerOptions = _this.eventListenerOptions.bind(_this);\n    _this.mousewheelListener = _this.mousewheelListener.bind(_this);\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.pageLoaded = this.props.pageStart;\n      this.options = this.eventListenerOptions();\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.isReverse && this.loadMore) {\n        var parentElement = this.getParentElement(this.scrollComponent);\n        parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;\n        this.loadMore = false;\n      }\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.detachScrollListener();\n      this.detachMousewheelListener();\n    }\n  }, {\n    key: 'isPassiveSupported',\n    value: function isPassiveSupported() {\n      var passive = false;\n\n      var testOptions = {\n        get passive() {\n          passive = true;\n        }\n      };\n\n      try {\n        document.addEventListener('test', null, testOptions);\n        document.removeEventListener('test', null, testOptions);\n      } catch (e) {\n        // ignore\n      }\n      return passive;\n    }\n  }, {\n    key: 'eventListenerOptions',\n    value: function eventListenerOptions() {\n      var options = this.props.useCapture;\n\n      if (this.isPassiveSupported()) {\n        options = {\n          useCapture: this.props.useCapture,\n          passive: true\n        };\n      }\n      return options;\n    }\n\n    // Set a defaut loader for all your `InfiniteScroll` components\n\n  }, {\n    key: 'setDefaultLoader',\n    value: function setDefaultLoader(loader) {\n      this.defaultLoader = loader;\n    }\n  }, {\n    key: 'detachMousewheelListener',\n    value: function detachMousewheelListener() {\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = this.scrollComponent.parentNode;\n      }\n\n      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'detachScrollListener',\n    value: function detachScrollListener() {\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'getParentElement',\n    value: function getParentElement(el) {\n      var scrollParent = this.props.getScrollParent && this.props.getScrollParent();\n      if (scrollParent != null) {\n        return scrollParent;\n      }\n      return el && el.parentNode;\n    }\n  }, {\n    key: 'filterProps',\n    value: function filterProps(props) {\n      return props;\n    }\n  }, {\n    key: 'attachScrollListener',\n    value: function attachScrollListener() {\n      var parentElement = this.getParentElement(this.scrollComponent);\n\n      if (!this.props.hasMore || !parentElement) {\n        return;\n      }\n\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = parentElement;\n      }\n\n      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n\n      if (this.props.initialLoad) {\n        this.scrollListener();\n      }\n    }\n  }, {\n    key: 'mousewheelListener',\n    value: function mousewheelListener(e) {\n      // Prevents Chrome hangups\n      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n      if (e.deltaY === 1 && !this.isPassiveSupported()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'scrollListener',\n    value: function scrollListener() {\n      var el = this.scrollComponent;\n      var scrollEl = window;\n      var parentNode = this.getParentElement(el);\n\n      var offset = void 0;\n      if (this.props.useWindow) {\n        var doc = document.documentElement || document.body.parentNode || document.body;\n        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n        if (this.props.isReverse) {\n          offset = scrollTop;\n        } else {\n          offset = this.calculateOffset(el, scrollTop);\n        }\n      } else if (this.props.isReverse) {\n        offset = parentNode.scrollTop;\n      } else {\n        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n      }\n\n      // Here we make sure the element is visible as well as checking the offset\n      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n        this.detachScrollListener();\n        this.beforeScrollHeight = parentNode.scrollHeight;\n        this.beforeScrollTop = parentNode.scrollTop;\n        // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n        if (typeof this.props.loadMore === 'function') {\n          this.props.loadMore(this.pageLoaded += 1);\n          this.loadMore = true;\n        }\n      }\n    }\n  }, {\n    key: 'calculateOffset',\n    value: function calculateOffset(el, scrollTop) {\n      if (!el) {\n        return 0;\n      }\n\n      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n    }\n  }, {\n    key: 'calculateTopPosition',\n    value: function calculateTopPosition(el) {\n      if (!el) {\n        return 0;\n      }\n      return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var renderProps = this.filterProps(this.props);\n\n      var children = renderProps.children,\n          element = renderProps.element,\n          hasMore = renderProps.hasMore,\n          initialLoad = renderProps.initialLoad,\n          isReverse = renderProps.isReverse,\n          loader = renderProps.loader,\n          loadMore = renderProps.loadMore,\n          pageStart = renderProps.pageStart,\n          ref = renderProps.ref,\n          threshold = renderProps.threshold,\n          useCapture = renderProps.useCapture,\n          useWindow = renderProps.useWindow,\n          getScrollParent = renderProps.getScrollParent,\n          props = _objectWithoutProperties(renderProps, ['children', 'element', 'hasMore', 'initialLoad', 'isReverse', 'loader', 'loadMore', 'pageStart', 'ref', 'threshold', 'useCapture', 'useWindow', 'getScrollParent']);\n\n      props.ref = function (node) {\n        _this2.scrollComponent = node;\n        if (ref) {\n          ref(node);\n        }\n      };\n\n      var childrenArray = [children];\n      if (hasMore) {\n        if (loader) {\n          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n        } else if (this.defaultLoader) {\n          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n        }\n      }\n      return _react2.default.createElement(element, props, childrenArray);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(_react.Component);\n\nInfiniteScroll.propTypes = {\n  children: _propTypes2.default.node.isRequired,\n  element: _propTypes2.default.node,\n  hasMore: _propTypes2.default.bool,\n  initialLoad: _propTypes2.default.bool,\n  isReverse: _propTypes2.default.bool,\n  loader: _propTypes2.default.node,\n  loadMore: _propTypes2.default.func.isRequired,\n  pageStart: _propTypes2.default.number,\n  ref: _propTypes2.default.func,\n  getScrollParent: _propTypes2.default.func,\n  threshold: _propTypes2.default.number,\n  useCapture: _propTypes2.default.bool,\n  useWindow: _propTypes2.default.bool\n};\nInfiniteScroll.defaultProps = {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null,\n  getScrollParent: null\n};\nexports.default = InfiniteScroll;\nmodule.exports = exports['default'];\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-infinite-scroller/dist/InfiniteScroll.js\n// module id = 1528\n// module chunks = 2 5 8 11 22 27 31 36","module.exports = require('./dist/InfiniteScroll')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-infinite-scroller/index.js\n// module id = 1529\n// module chunks = 2 5 8 11 22 27 31 36","/*\r\n* 评论组件\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport { Comment, Avatar, Form, Button, Input,Icon, Tooltip, message } from 'antd';\r\nimport moment from 'moment';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from \"@/utils/utils\";\r\n\r\nconst { TextArea } = Input;\r\nconst Editor = ({handleClick, onChange, onSubmit, submitting, value }) => (\r\n\t<div>\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"\"/>\r\n\t\t</Form.Item>\r\n\t\t<div  style={{\r\n\t\t\twidth: '100%',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tjustifyContent: 'space-between'\r\n\t\t}}>\r\n\t\t\t<Button type=\"link\" onClick={handleClick} style={{fontSize: '12px'}}>\r\n\t\t\t\t取消回复\r\n\t\t\t</Button>\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={value==null||value==\"\"?null:onSubmit} type=\"primary\">\r\n\t\t\t\t发布\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t</div>\r\n);\r\nconst Editor2 = ({ onChange, onSubmit, submitting, value }) => (\r\n\t<div className=\"mt20\">\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"\"/>\r\n\t\t</Form.Item>\r\n\t\t<Form.Item className=\"tr\">\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={value==null||value==\"\"?null:onSubmit} type=\"primary\">\r\n\t\t\t\t发布\r\n\t\t\t</Button>\r\n\t\t</Form.Item>\r\n\t</div>\r\n);\r\n\r\n// 封装组件\r\nclass ExampleComment extends React.Component {\r\n\tstate = {\r\n\t\tsubmitting: false,\r\n\t\tvalue: '',\r\n\t\tvisible: false,\r\n\t};\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst { addComment, selestedId, id, userId, pid} = this.props;\r\n\t\t\tconst params = {\r\n\t\t\t\ttext: this.state.value,\r\n\t\t\t\tmainId: selestedId,\r\n\t\t\t\tpid: pid==null?id:pid,\r\n\t\t\t\tpUserId: userId\r\n\t\t\t}\r\n\t\t\taddComment(params, ()=>{\r\n               this.reset();\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t};\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\thandleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: !this.state.visible\r\n\t\t});\r\n\t}\r\n\treset = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: '',\r\n\t\t\tvisible: false,\r\n\t\t});\r\n\t}\r\n\t// 删除\r\n\tonDel = () => {\r\n\t\tconst {delComment, id} = this.props;\r\n\t\tconst params = {\r\n\t\t\tid: id\r\n\t\t}\r\n\t\tdelComment(params, ()=>{\r\n\t\t\tthis.reset();\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tvalue,\r\n\t\t\tsubmitting,\r\n\t\t\tvisible\r\n\t\t} = this.state;\r\n\t\tconst {text, userName, createTime, children,pid, parentUserName} = this.props;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = userName==username;\r\n\t\treturn (<Comment\r\n\t\t\t\tclassName={pid==null?\"comment_normal\":\"comment_normal comment_active\"}\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t<span key=\"comment-nested-delete\" className=\"comment-nested\">\r\n\t\t\t\t\t\t{createTime==null?\"2020-08-04\":moment(createTime).format(\"YYYY-MM-DD HH:mm:ss\")}\r\n\t\t\t\t\t    <span className={isShow?\"comment-nested-delete\":\"hidden\"} onClick={this.onDel}>&nbsp;·&nbsp;删除</span>\r\n\t\t\t\t\t</span>,\r\n\t\t\t\t\t<span key=\"comment-nested-reply-to\" style={{color: \"#1890ff\"}} onClick={this.handleClick}>回复</span>]}\r\n\t\t\t\tauthor={<a>{userName}</a>}\r\n\t\t\t\tavatar={\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tsrc=\"./images/logo_new.png\"\r\n\t\t\t\t\t\talt=\"Han Solo\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tcontent={\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{parentUserName==null||parentUserName==\"\"?null:`回复${parentUserName}:`} {text}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{visible?<Editor\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\thandleClick={this.handleClick}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{children}\r\n\t\t\t</Comment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n@observer\r\nclass DigitalComment extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tcomments: [],\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: '',\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst params = {\r\n\t\t\t\ttext: this.state.value,\r\n\t\t\t\tmainId: this.store.selestedId,\r\n\t\t\t\tpid: null\r\n\t\t\t}\r\n\t\t\tthis.store.addComment(params).then((res)=>{\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"评论成功\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tsubmitting: false,\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新评论\r\n\t\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: ''\r\n\t\t});\r\n\t}\r\n\r\n\t// 添加评论\r\n\taddComment = (params, callback) => {\r\n\t\t this.store.addComment(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"评论成功\");\r\n\t\t\t\t// 更新评论\r\n\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\tif(callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除评论\r\n\tdelComment = (params, callback) => {\r\n\t\tthis.store.delComment(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t// 更新评论\r\n\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\tif(callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trenderTreeNodes = data =>\r\n\t\tdata.map(item => {\r\n\t\t\tif (item.children) {\r\n\t\t\t\treturn (<ExampleComment key={item.id} {...item} addComment={this.addComment} delComment={this.delComment} selestedId={this.store.selestedId}>\r\n\t\t\t\t\t\t{this.renderTreeNodes(item.children)}\r\n\t\t\t\t\t</ExampleComment>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn <ExampleComment key={item.id} {...item} addComment={this.addComment} delComment={this.delComment} selestedId={this.store.selestedId}/>;\r\n\t\t});\r\n\r\n\t// 点赞\r\n\thandleZan = () =>{\r\n\t\tthis.store.addOrDelLike()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { submitting, value } = this.state;\r\n\t\tconst {getLikeUsers, getComments, readUsers} = this.store;\r\n\t\tconst treeData = utils.formatList(mobx.toJS(getComments));\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst isLike = mobx.toJS(getLikeUsers).filter(item=>item.userName==username).length>0?true:false;\r\n\t\treturn (\r\n\t\t\t<div className=\"detail_form_bold\" style={{paddingLeft: '14px'}}>\r\n\t\t\t\t<div className=\"commentlist_title\" style={{textAlign: 'left'}}>\r\n\t\t\t\t\t<Tooltip title=\"点赞\">\r\n\t\t\t\t\t\t{isLike?<Icon theme=\"filled\" type=\"like\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" onClick={this.handleZan}/>:<Icon type=\"like\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" onClick={this.handleZan}/>}\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{mobx.toJS(getLikeUsers).length>0?mobx.toJS(getLikeUsers).map((item)=>item.userName).join(\"、\"):null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"commentlist_title\" style={{textAlign: 'left'}}>\r\n\t\t\t\t\t<Tooltip title=\"已读\">\r\n\t\t\t\t\t\t<Icon theme=\"filled\" type=\"eye\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" />\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{mobx.toJS(readUsers).length>0?mobx.toJS(readUsers).map((item)=>item.userName).join(\"、\"):null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"commentlist\" className=\"detail_form_bold_title\" style={{textAlign: 'left'}}>评论</div>\r\n\t\t\t\t<Editor2\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t/>\r\n\t\t\t\t{this.renderTreeNodes(treeData)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DigitalComment;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DigitalComment.js","/*\r\n* 内容生成、邮件发送\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {message, Spin, Button,Modal, Checkbox, Row, Col} from 'antd';\r\nimport {inject, observer} from 'mobx-react'\r\nimport * as mobx from 'mobx';\r\nimport EditableTagEmail2 from \"@/components/digitalOrg/EditableTagEmail2\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport {downloadFile} from \"@/utils/download\";\r\n\r\n@inject('appStore')\r\n@observer\r\nclass CommonEmail2 extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\ttip: \"正在生成，请稍等...\",\r\n\t\t\tisLoading: false,\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户,\r\n\t\t\tvisible: false,\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [], // 抄送邮件\r\n\t\t\tccUserIds: [], // 抄送用户\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t}\r\n\r\n\t// 间隔3秒获取pdf地址\r\n\tgetReportUrl = (id) => {\r\n\t\tlet _this = this;\r\n\t\t_this.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\t\t_this.props.updateState(\"loading\", true);\r\n\t\tconst detailData = mobx.toJS(_this.props.detailData);\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst pdfName = journalMain.title;\r\n\r\n\t\t_this.timer22 = setInterval(() => {\r\n\t\t\t_this.store.getDownloadUrl(id).then((res) => {\r\n\t\t\t\tconst {url} = res;\r\n\t\t\t\tif (url !== null && url !== \"\") {\r\n\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.props.updateState(\"loading\", false);\r\n\t\t\t\t\tdownloadFile(url, pdfName);  // 直接下载pdf\r\n\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (res.code == 2) {\r\n\t\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_this.props.updateState(\"loading\", false);\r\n\t\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t}\r\n\r\n\t// 生成word\r\n\tcreatWord = (type) =>{\r\n\t\tconst {detailData} = this.props;\r\n\t\tconst param = mobx.toJS(detailData);\r\n\t\tif (type==1) {\r\n\t\t\tthis.store.wordDownload(param)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.store.pdfDownload(param)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 发送邮件\r\n\tsendReport = () => {\r\n\t\tlet _this = this;\r\n\t\tconst {emails, userIds, checks, ccEmails, ccUserIds} = _this.state;\r\n\t\tconst isemailUserIds = userIds == null ? [] : userIds;\r\n\t\tconst isemails = emails == null ? [] : emails;\r\n\t\t// 选择收件人\r\n\t\tif (isemailUserIds.length == 0 && isemails.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择邮件收件人\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst {detailData} = this.props;\r\n\t\tconst params = {\r\n\t\t\tjournal: mobx.toJS(detailData),\r\n\t\t\temails: emails,\r\n\t\t\tuserIds: userIds == null ? [] : userIds.map(item => item.userId),\r\n\t\t\tattType: checks.map(item=>typeof item ==\"string\"?Number(item):item),\r\n\t\t\tccEmails,\r\n\t\t\tccUserIds: ccUserIds == null ? [] : ccUserIds.map(item => item.userId),\r\n\t\t}\r\n\t\tthis.store.sendEmail(params)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"邮件发送成功\");\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tthis.setState({\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\tisLoading: false,\r\n\t\t\tvisible: false,\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [], // 抄送邮件\r\n\t\t\tccUserIds: [], // 抄送用户\r\n\t\t});\r\n\t}\r\n\r\n\thandleOpen = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: true\r\n\t\t});\r\n\t}\r\n\r\n\thandleOk = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (checkedValues) =>{\r\n\t\tthis.setState({\r\n\t\t\tchecks: checkedValues\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {tip, isLoading, emails, userIds, checks, ccEmails, ccUserIds} = this.state;\r\n\t\tconst options = [\r\n\t\t\t{ label: '附件Word', value: '0' },\r\n\t\t\t{ label: '附件PDF', value: '1' }\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}><Button type=\"link\" onClick={isLoading?null:this.creatWord.bind(this, \"1\")}>点击生成并存储为Word文档</Button></li>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}><Button type=\"link\" onClick={isLoading?null:this.creatWord.bind(this, \"2\")}>点击生成并存储为PDF文档</Button></li>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Button type=\"link\" onClick={isLoading?null:this.handleOpen}>点击发送邮件</Button>\r\n\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\tvalue={checks}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t{/*发送邮件*/}\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tmaskClosable={false}\r\n\t\t\t\t\twidth=\"600px\"\r\n\t\t\t\t\tzIndex={\"1066\"}\r\n\t\t\t\t\tvisible={this.state.visible}\r\n\t\t\t\t\tonCancel={this.reset}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t<span style={{marginRight:'5px'}}>\r\n\t\t\t\t\t\t\t\t收件人：\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\t\tdata={emails}\r\n\t\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'emails')}\r\n\t\t\t\t\t\t\t\ttitle={\"添加收件人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\tdata={userIds}\r\n\t\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'userIds')}\r\n\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\ttitle={\"添加收件人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={24} className=\"mt15\">\r\n\t\t\t\t\t\t\t<span style={{marginRight:'5px'}}>\r\n\t\t\t\t\t\t\t\t抄送人：\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\t\tdata={ccEmails}\r\n\t\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'ccEmails')}\r\n\t\t\t\t\t\t\t\ttitle={\"添加抄送人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\tdata={ccUserIds}\r\n\t\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'ccUserIds')}\r\n\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\ttitle={\"添加抄送人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<div className=\"w tc mt15\">\r\n\t\t\t\t\t\t<Button type=\"primary\" onClick={this.sendReport}>点击发送邮件</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CommonEmail2;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/CommonEmail2.js","/*\r\n* 详情表单 智建美住周报\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormWeekReport extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst canEdit = detailData.canEdit==1?true:false;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = canEdit;\r\n\t\tlet isJeks = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n        let oldTime = moment(\"2021-01-24\").valueOf(); //要求是 2021年1月24日以前，老数据不变\r\n        let isOld = sub.beginTime!=undefined&&(sub.beginTime>oldTime);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t\t\t\tuserId={journalMain.userId}\r\n\t\t\t\t\t\t\t\ttemType=\"weekreport\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">周报标题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">时间范围</span><span className=\"form_nextname\">{moment(sub.beginTime).format(\"YYYY年MM月DD日\")} 至 {moment(sub.endTime).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">本周要闻</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.weekContent}}></div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t详细内容\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t一、年度重点工作检视\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t1、企业经营和现金流达标\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailBusiness}}></div>\r\n               <div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t2、建立以江阴工厂为中心的生产运营体系\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailFactory}}></div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t3、初步建成数字化平台\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailDigital}}></div>\r\n                <div className=\"edit_form_bold_week\">\r\n                    4、建筑产品和技术研发\r\n                </div>\r\n                <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailProducts}}></div>\r\n                {\r\n                    isOld?<div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            5、公司治理\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.corporateGovernance}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            二、月度重点工作看板\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.monthlyWorkBoard}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            三、各部门工作执行情况看板\r\n                        </div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            1、综合管理中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentZhglzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            2、国内营销中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentGnyxzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            3、创新营销中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentCxyxzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            4、项目管理中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentXmglzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            5、产品研发中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentCpyfzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            6、生产制造中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentSczzzx2021}}></div>\r\n                    </div>: <div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            二、项目清单看板\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.projectBoard}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            三、月度重点工作看板\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.monthlyWorkBoard}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            四、各部门工作执行情况看板\r\n                        </div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            1、产品研发中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentProduct}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            2、解决方案中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentSolution}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            3、市场营销中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentMarket}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            4、战略发展中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentStrategic}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            5、运作支持中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentSupport}}></div>\r\n                    </div>}\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"weekreport\"\r\n\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormWeekReport;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormWeekReport.js","/*\r\n* 共享编辑\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Icon, Input, Col, Row, Modal, Avatar, message, Button, Empty} from 'antd';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport * as _ from 'lodash'\r\n\r\nconst colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色\r\n\r\n@inject('UserStore')\r\n@observer\r\nclass PersonEdit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\ttext: '',\r\n\t\t\tvisible: false,\r\n\t\t\toldSelect: this.props.data, // 已选择的人员,\r\n\t\t\tdefaultData: [], // 默认数据\r\n\t\t\tdata: [], // 已选择标记的数据\r\n\t\t\tfilterData: [], // 筛选数据\r\n\t\t}\r\n\t\tthis.getData = this.getData.bind(this);\r\n\t\tthis.handleClickDebounce = _.debounce(this.getData, 500, {'maxWait': 1000});\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tthis.setState({\r\n\t\t\toldSelect: nextProps.data\r\n\t\t}, () => {\r\n\t\t\tthis.init();\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst params = \"\";\r\n\t\t// 未选的全部用户\r\n\t\tthis.props.UserStore.getRole(params).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdefaultData: res.body.map((item) => Object.assign(item, {selected: false})),\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.init();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// 初始化\r\n\tinit = () => {\r\n\t\tlet defaultDatas = JSON.parse(JSON.stringify(this.state.defaultData));\r\n\t\t//  将已选定的用户做标记\r\n\t\tlet arr = defaultDatas.map((item) => {\r\n\t\t\tlet obj = {}\r\n\t\t\tif ([...this.state.oldSelect].some(v => v === item.id)) {\r\n\t\t\t\tobj = Object.assign(item, {selected: true})\r\n\t\t\t} else {\r\n\t\t\t\tobj = Object.assign(item, {selected: false})\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], arr)\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.handleClickDebounce.cancel();\r\n\t}\r\n\r\n\t// 提交\r\n\thandleOk = () => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst users = dataArray.filter((res) => {\r\n\t\t\treturn res.selected == true\r\n\t\t}).map((item, index) => {\r\n\t\t\treturn item.id;\r\n\t\t});\r\n\r\n\t\t// 保存\r\n\t\tthis.store.saveSharedEditing(users).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\t\t\t\tthis.handleCancel();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// 取消\r\n\thandleCancel = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false,\r\n\t\t\ttext: \"\",\r\n\t\t\tdata: Object.assign([], this.state.defaultData),\r\n\t\t\toldSelect: this.props.data\r\n\t\t});\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\t// 点击列表选中\r\n\thandClick = (param) => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selected: true}))\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], dataArray)\r\n\t\t})\r\n\t}\r\n\r\n\t// 点击列表删除\r\n\thandClickDel = (param) => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selected: false}))\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], dataArray)\r\n\t\t})\r\n\t}\r\n\r\n\t// 模糊搜索\r\n\tonChange = (e) => {\r\n\t\tthis.setState({\r\n\t\t\ttext: _.trim(e.target.value)\r\n\t\t});\r\n\t\tthis.handleClickDebounce()\r\n\t}\r\n\r\n\tgetData() {\r\n\t\tconst {text, data} = this.state;\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(data));\r\n\t\tlet filterData = dataArray.filter(item => (item.realname).indexOf(text) > -1 || (item.phone).indexOf(text) > -1)\r\n\t\tthis.setState({\r\n\t\t\tfilterData: filterData\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {data, oldSelect, filterData, text, defaultData} = this.state;\r\n\t\tconst {disabled, title, visible} = this.props;\r\n\t\tlet isFilter = text == \"\" || text == null;\r\n\t\tconst activeData = isFilter ? data : filterData;  // 当前数据\r\n\t\treturn (<Modal\r\n\t\t\t\tzIndex=\"1099\"\r\n\t\t\t\tmaskClosable={false}\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tokText={'提交'}\r\n\t\t\t\ttitle={title||\"添加负责人\"}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonOk={this.handleOk}\r\n\t\t\t\tonCancel={this.handleCancel}\r\n\t\t\t>\r\n\t\t\t\t<Row type=\"flex\" justify=\"space-between\" className=\"\">\r\n\t\t\t\t\t<Col span={12} className='pr20'>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tvalue={text}\r\n\t\t\t\t\t\t\tplaceholder=\"输入姓名/手机号\"\r\n\t\t\t\t\t\t\tsuffix={<Icon type=\"search\"/>}\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\t\tautoHide\r\n\t\t\t\t\t\t\tautoHideTimeout={1000}\r\n\t\t\t\t\t\t\tautoHideDuration={200}\r\n\t\t\t\t\t\t\tautoHeight\r\n\t\t\t\t\t\t\tautoHeightMin={0}\r\n\t\t\t\t\t\t\tautoHeightMax={350}\r\n\t\t\t\t\t\t\tthumbMinSize={30}\r\n\t\t\t\t\t\t\tuniversal={true}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ul className=\"userlist_ul\">\r\n\t\t\t\t\t\t\t\t{activeData.length > 0 && activeData.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <li\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"pr\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.handClick.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_name\">{item.realname}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_station\">{item.station}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_email\">{item.email}</div>\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tright: '15px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'rgba(75,164,190,1)'\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={item.selected ? \"active\" : \"hidden\"} type=\"check\"/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t\t{activeData.length == 0 ?\r\n\t\t\t\t\t\t\t<Empty\r\n\t\t\t\t\t\t\t\timage=\"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original\"\r\n\t\t\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\t\t\theight: 60,\r\n\t\t\t\t\t\t\t\t\tmarginTop: \"30px\"\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdescription={\r\n\t\t\t\t\t\t\t\t\t\"暂无匹配\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</Empty>\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tl\" style={{\r\n\t\t\t\t\t\tminHeight: '350px',\r\n\t\t\t\t\t\tborderLeft: '1px solid #e6e6e6'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<p className=\"pl20\">已选成员({data && data.filter((res) => {\r\n\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t}).length})</p>\r\n\t\t\t\t\t\t<ul className=\"userlist_ul_del\">\r\n\t\t\t\t\t\t\t{data.filter((res) => {\r\n\t\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t\t}).length > 0 && data.filter((res) => {\r\n\t\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn <li\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tclassName=\"pr\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.handClickDel.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'inlineBlock',\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: colorList[index % 10],\r\n\t\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\r\n\t\t\t\t\t\t\t\t\t\t}} size=\"small\">\r\n\t\t\t\t\t\t\t\t\t\t{item.realname.slice(0, 1)}\r\n\t\t\t\t\t\t\t\t\t</Avatar> {/*颜色随机取值*/}\r\n\t\t\t\t\t\t\t\t\t<span className=\"ul_name\">{item.realname}</span>\r\n\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\ttop: '13px',\r\n\t\t\t\t\t\t\t\t\t\t\tright: '15px',\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: 'rgba(184,80,74,1)',\r\n\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"userlist_ul_icon\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"close\"/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default PersonEdit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/PersonEdit.js","/*\r\n* 详情表单 工厂周报\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormFactoryreport extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst canEdit = detailData.canEdit==1?true:false;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = canEdit;\r\n\t\tlet isJeks = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n        let oldTime = moment(\"2021-01-24\").valueOf(); //要求是 2021年1月24日以前，老数据不变\r\n        let isOld = sub.beginTime!=undefined&&(sub.beginTime>oldTime);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t\t\t\tuserId={journalMain.userId}\r\n\t\t\t\t\t\t\t\ttemType=\"weekreport\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">周报标题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">时间范围</span><span className=\"form_nextname\">{moment(sub.beginTime).format(\"YYYY年MM月DD日\")} 至 {moment(sub.endTime).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">一、本周重点工作</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.weekContent}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">二、工厂建设</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.factoryBuild}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">三、 产线建设</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.productionLine}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">四、产品及技术</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.productsTechnologies}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">五、运营支持</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.operationalSupport}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">六、各版块工作看板</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.board}}></div>\r\n\r\n\r\n\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"factoryreport\"\r\n\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormFactoryreport;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormFactoryreport.js"],"sourceRoot":""}