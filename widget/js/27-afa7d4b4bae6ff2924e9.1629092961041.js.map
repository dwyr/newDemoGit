{"version":3,"sources":["webpack:///./src/containers/digitalOrg/SharedResource.js","webpack:///./~/react-infinite-scroller/dist/InfiniteScroll.js?fad8****","webpack:///./~/react-infinite-scroller/index.js?8839****","webpack:///./src/components/common/MyUploadThree.js","webpack:///./src/components/common/PreviewModal.js","webpack:///./src/store/digitalOrg/ShareStore.js"],"names":["mobx","Search","Input","getFileType","fileName","suffix","result","flieArr","split","length","err","toLocaleLowerCase","imglist","find","item","txtlist","excelist","wordlist","pdflist","pptlist","videolist","radiolist","SharedResource","observer","props","info","Modal","title","onOk","init","store","getDocumentTypeList","then","res","Array","isArray","setState","documentTypeList","activeType","id","pageIndex","getDocumentListByTypeId","state","tableData","Object","assign","totalCount","checkType","delete","delDocument","message","success","dataArray","JSON","parse","stringify","index","findIndex","mitem","splice","saveAttachment","params","arr","map","push","typeId","filePath","fileSize","addDocuments","changeDocument","record","downloadImage","name","lastIndexOf","ext","substr","x","XMLHttpRequest","open","responseType","onload","e","response","send","downloadUrl","isAssetTypeAnImage","isImage","test","size","handleInfiniteOnLoad","toJS","loading","getDocumentListByTypeId2","concat","body","trans","file","src","onSearch","value","text","_","trim","onChange","target","getXzUrl","data","code","url","window","url2","onPreview","child","handlePreview","onRef","ref","isPreview","ShareStore","visible","getUserPermissionByAppCode","indexOf","toLowerCase","hasJournal","padding","width","minHeight","bind","margin","fontSize","marginTop","borderLeft","paddingLeft","height","borderBottom","hasMore","verticalAlign","marginRight","createTime","format","color","cursor","position","top","left","Component","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","uid","UploadToOss","Promise","resolve","reject","multipartUpload","catch","error","MyUploadThree","changeSrc","host","obj","status","fileId","newFileList","array","console","log","beforeUpload","isLt2M","reader","FileReader","readAsDataURL","onloadend","appStore","fileList","previewVisible","previewImage","imageArray","activeIndex","nextProps","Config","bpm","getSts","bpmSchemas","str","securityToken","multiple","showUploadList","React","PreviewModal","getDocumentUrl","journal","journalSchemas","getExt","alt","handleCancel","type","param","pageSize","ds","d","authorization","getPermission","loginSchemas","login","some","includes","key","observable","action"],"mappings":"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E;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"js/27-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 资源共享\r\n* dangwei@bocspace.com\r\n* */\r\nimport React, {Component} from \"react\";\r\nimport {Row, Col, message, Popconfirm, Divider, Empty, Input, Affix, Modal} from 'antd';\r\nimport {inject, observer} from 'mobx-react';\r\nimport moment from 'moment';\r\nimport * as mobx from 'mobx';\r\nimport ShareStore from \"store/digitalOrg/ShareStore\";\r\nimport MyUploadThree from \"@/components/common/MyUploadThree\";\r\nimport {converSize} from '@/utils/utils';\r\nimport {downloadFile, download} from \"@/utils/download\";\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport _ from 'lodash';\r\nimport PreviewModal from \"@/components/common/PreviewModal\";\r\nconst {Search} = Input;\r\n\r\n/*\r\n* 根据文件名的尾缀 返回文件类型\r\n* @param {any} fileName 文件名\r\n* dzl\r\n* 2020年5月9日\r\n*/\r\nfunction getFileType(fileName) {\r\n\t// 后缀获取\r\n\tlet suffix = \"\";\r\n\t// 获取类型结果\r\n\tlet result = \"\";\r\n\ttry {\r\n\t\tconst flieArr = fileName.split(\".\");\r\n\t\tsuffix = flieArr[flieArr.length - 1];\r\n\t} catch (err) {\r\n\t\tsuffix = \"\";\r\n\t}\r\n\t// fileName无后缀返回 false\r\n\tif (!suffix) { return false; }\r\n\tsuffix = suffix.toLocaleLowerCase();\r\n\t// 图片格式\r\n\tconst imglist = [\"png\", \"jpg\", \"jpeg\", \"bmp\", \"gif\"];\r\n\t// 进行图片匹配\r\n\tresult = imglist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"image\";\r\n\t}\r\n\t// 匹配txt\r\n\tconst txtlist = [\"txt\"];\r\n\tresult = txtlist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"txt\";\r\n\t}\r\n\t// 匹配 excel\r\n\tconst excelist = [\"xls\", \"xlsx\"];\r\n\tresult = excelist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"excel\";\r\n\t}\r\n\t// 匹配 word\r\n\tconst wordlist = [\"doc\", \"docx\"];\r\n\tresult = wordlist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"word\";\r\n\t}\r\n\t// 匹配 pdf\r\n\tconst pdflist = [\"pdf\"];\r\n\tresult = pdflist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"pdf\";\r\n\t}\r\n\t// 匹配 ppt\r\n\tconst pptlist = [\"ppt\", \"pptx\"];\r\n\tresult = pptlist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"ppt\";\r\n\t}\r\n\t// 匹配 视频\r\n\tconst videolist = [\"mp4\", \"m2v\", \"mkv\", \"rmvb\", \"wmv\", \"avi\", \"flv\", \"mov\", \"m4v\"];\r\n\tresult = videolist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"video\";\r\n\t}\r\n\t// 匹配 音频\r\n\tconst radiolist = [\"mp3\", \"wav\", \"wmv\"];\r\n\tresult = radiolist.find(item => item === suffix);\r\n\tif (result) {\r\n\t\treturn \"radio\";\r\n\t}\r\n\t// 其他 文件类型\r\n\treturn \"other\";\r\n}\r\n\r\n@observer\r\nexport default class SharedResource extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = new ShareStore();\r\n\t\tthis.state = {\r\n\t\t\tdocumentTypeList: [],\r\n\t\t\tactiveType: 1,\r\n\t\t\tvisible: false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.store.text = \"\";\r\n\t\tthis.init();\r\n\t\tthis.store.getUserPermissionByAppCode();\r\n\t}\r\n\r\n\tinfo = () => {\r\n\t\tModal.info({\r\n\t\t\ttitle: '文件正在下载中，请耐心等待',\r\n\t\t\tonOk() {}\r\n\t\t});\r\n\t}\r\n\r\n\tinit = () => {\r\n\t\tthis.store.getDocumentTypeList().then((res) => {\r\n\t\t\tif (res&&Array.isArray(res)&&res.length>0) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdocumentTypeList: res,\r\n\t\t\t\t\tactiveType: res[0].id\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\tthis.store.pageIndex = 1;\r\n\t\t\t\t\tthis.store.getDocumentListByTypeId(this.state.activeType);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdocumentTypeList: [],\r\n\t\t\t\t\tactiveType: \"\"\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.tableData = Object.assign([]);\r\n\t\t\t\tthis.store.totalCount = 0;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcheckType = (item) => {\r\n\t\tthis.setState({\r\n\t\t\tactiveType: item.id\r\n\t\t}, () => {\r\n\t\t\tthis.store.pageIndex = 1;\r\n\t\t\tthis.store.getDocumentListByTypeId(this.state.activeType);\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除\r\n\tdelete = (item) => {\r\n\t\tthis.store.delDocument(item.id).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\");\r\n\r\n\t\t\t\tif (this.store.pageIndex==1) {\r\n\t\t\t\t\tthis.store.pageIndex = 1;\r\n\t\t\t\t\tthis.store.getDocumentListByTypeId(this.state.activeType);\r\n\t\t\t\t} else {\r\n                    // 前端本地删除\r\n\t\t\t\t\tlet dataArray = JSON.parse(JSON.stringify(this.store.tableData));\r\n\t\t\t\t\tconst index  = dataArray.findIndex(mitem=>mitem.id==item.id);\r\n\t\t\t\t\tdataArray.splice(index, 1);\r\n\t\t\t\t\tthis.store.tableData=Object.assign([], dataArray);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsaveAttachment = (params) => {\r\n\t\t// 处理附件\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\ttypeId: this.state.activeType,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tfileSize: item.fileSize,\r\n\t\t\t})\r\n\t\t});\r\n\t\tthis.store.addDocuments(arr).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.store.pageIndex = 1;\r\n\t\t\t\tthis.store.getDocumentListByTypeId(this.state.activeType);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新\r\n\tchangeDocument = (record, params) => {\r\n\t\t// 处理附件\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\tid: record.id,\r\n\t\t\t\ttypeId: this.state.activeType,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tfileSize: item.fileSize,\r\n\t\t\t})\r\n\t\t});\r\n\t\tthis.store.changeDocument(arr[0]).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"更新成功\");\r\n\t\t\t\tthis.store.pageIndex = 1;\r\n\t\t\t\tthis.store.getDocumentListByTypeId(this.state.activeType);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n\t\t//获取最后一个.的位置\r\n\t\tvar index = filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index + 1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x = new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload = function (e) {\r\n\t\t\tdownload(x.response, name, \"image/\" + ext);\r\n\t\t}\r\n\t\tx.send();\r\n\t}\r\n\r\n\tisAssetTypeAnImage(ext) {\r\n\t\treturn ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;\r\n\t}\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = (item) => {\r\n\t\tconst {filePath, fileName} = item;\r\n        //获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n        //获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\t\tif (this.isAssetTypeAnImage(ext)) {  //判断是否是图片\r\n\t\t\tthis.downloadImage(filePath, fileName);\r\n\t\t} else {\r\n\t\t\tconst isImage = /\\.(pdf)$/.test(fileName) || /\\.(mp4|rmvb|avi|ts)$/.test(fileName)\r\n\t\t\tif (isImage) {\r\n\t\t\t\t// 文件大小超过5M，给出提示，手动关闭\r\n\t\t\t\tconst size = item.fileSize;\r\n\t\t\t\tif (size>=5242880) {\r\n\t\t\t\t\tthis.info();\r\n\t\t\t\t}\r\n\t\t\t\tdownloadFile(filePath, fileName);  // 直接下载pdf\r\n\t\t\t} else {\r\n\t\t\t\t//console.log(getFileType(fileName), 'mp4')\r\n\t\t\t\tdownloadFile(filePath, fileName);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 获取下一页信息\r\n\thandleInfiniteOnLoad = () => {\r\n\t\tlet dataArray = mobx.toJS(this.store.tableData);\r\n\t\tif (this.store.totalCount === dataArray.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.store.loading = true;\r\n\t\tthis.store.pageIndex = this.store.pageIndex + 1;\r\n\r\n\t\tthis.store.getDocumentListByTypeId2(this.state.activeType)\r\n\t\t.then((res) => {\r\n\t\t\tdataArray = dataArray.concat(res.body);\r\n\t\t\tthis.store.tableData = Object.assign([], dataArray);\r\n\t\t\tthis.store.loading = false;\r\n\t\t});\r\n\t}\r\n\r\n\ttrans = (file) =>{\r\n\t\tlet src;\r\n\t\tif (/\\.(doc|docx)$/.test(file.fileName)) {\r\n\t\t\tsrc = './images/share_word.png'\r\n\t\t} else if (/\\.(xls|xlsx)$/.test(file.fileName)) {\r\n\t\t\tsrc = './images/share_excel.png'\r\n\t\t} else if (/\\.(pdf)$/.test(file.fileName)) {\r\n\t\t\tsrc = './images/share_pdf.png'\r\n\t\t} else if (/\\.(zip|rar)$/.test(file.fileName)) {\r\n\t\t\tsrc = './images/share_zip.png'\r\n\t\t} else if (/\\.(ppt|pptx)$/.test(file.fileName)) {\r\n\t\t\tsrc= './images/share_ppt.png'\r\n\t\t} else if(/\\.(mp4|rmvb|avi|ts)$/.test(file.fileName)){\r\n\t\t\tsrc= './images/share_vodie.png'\r\n\t\t} else if(/\\.(exe)$/.test(file.fileName)){\r\n\t\t\tsrc= './images/exe_default.jpg'\r\n\t\t} else if(/\\.(bmp|jpg|png|gif|jpeg|webp)$/.test(file.fileName)){\r\n\t\t\tsrc= './images/share_png.png'\r\n\t\t} else {\r\n\t\t\tsrc = './images/share_other.png'\r\n\t\t}\r\n\t\treturn src;\r\n\t}\r\n\r\n\t// 搜索\r\n\tonSearch = (value) => {\r\n\t\tthis.store.text = _.trim(value);\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tonChange = (e) => {\r\n\t\tconst {value}=e.target;\r\n\t\tif (_.trim(value)==\"\") {\r\n\t\t\tthis.store.text = _.trim(value);\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t}\r\n\r\n\tgetXzUrl = () => {\r\n\t\tthis.store.getXzUrl().then((res)=>{\r\n\t\t\tlet data = JSON.parse(res);\r\n\t\t\tconst {code, url} = data;\r\n\t\t\tif (code==0) {\r\n\t\t\t\twindow.open(url, \"_blank\")\r\n\t\t\t} else {\r\n\t\t\t\tconst url2 = \"https://xz.glodon.com/document/9073d9818580457e9f19792f5972d6d3/9073d9818580457e9f19792f5972d6d3\";\r\n\t\t\t\twindow.open(url2, \"_blank\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 预览\r\n\tonPreview = (item) => {\r\n\t\tthis.child.handlePreview(item);\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tisPreview = (file) => {\r\n\t\tconst name = file.fileName||\"\"\r\n\t\t// 正则匹配\r\n        const isImage = (/\\.(doc|docx)$/.test(name) || /\\.(xls|xlsx)$/.test(name) || /\\.(pdf)$/.test(name) || /\\.(txt)$/.test(name)) || (/\\.(ppt|pptx)$/.test(name)) || (\r\n\t        /\\.(png|jpg|jpeg|bmp|gif)$/.test(name)) || /\\.(swf|avi|flv|mpg|rm|mov|wav|asf|3gp|mkv|rmvb|mp4)$/.test(name);\r\n\t\treturn isImage;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {documentTypeList, activeType} = this.state;\r\n\t\tconst {tableData, hasJournal, totalCount} = this.store;\r\n\r\n\t\treturn (\r\n\t\t\t<Row className=\"w clearfix pr\">\r\n\t\t\t\t<div className=\"fl\" style={{padding: '6px 16px 0 0', width: '260px', minHeight: '350px'}}>\r\n\t\t\t\t\t<Search\r\n\t\t\t\t\t\tplaceholder=\"输入资源名称进行搜索\"\r\n\t\t\t\t\t\tonSearch={this.onSearch}\r\n\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\tstyle={{width: 252}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{documentTypeList.length>0? <ul className=\"share_resource\">\r\n\t\t\t\t\t\t{documentTypeList.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <li key={item.id} onClick={this.checkType.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t<img src=\"./images/file_name.png\" alt=\"\" width=\"30\" height=\"25\"/>\r\n\t\t\t\t\t\t\t\t<span className={activeType == item.id ? \"active\" : \"\"}>{item.name}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<li onClick={this.getXzUrl}><img style={{margin: '0 8px 0 6px'}} src=\"./images/share_more.png\" alt=\"\" width=\"15\" height=\"15\"/><a href=\"javascript:;\"\r\n\t\t\t\t\t\t       style={{fontSize: '14px'}}>更多</a></li>\r\n\t\t\t\t\t</ul>: <Empty\r\n\t\t\t\t\t\timage='./images/not_found.png'\r\n\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\tmarginTop: 60,\r\n\t\t\t\t\t\t}}/>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"fl\" style={{\r\n\t\t\t\t\twidth: 'calc(100% - 260px)',\r\n\t\t\t\t\tborderLeft: '1px solid #EBEBEB',\r\n\t\t\t\t\tminHeight: '350px',\r\n\t\t\t\t\tpaddingLeft: '15px',\r\n\t\t\t\t\theight: \"calc(100vh - 200px)\"\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<table className=\"w share_resource_table\" style={{borderBottom: '1px solid #e6e6e6'}}>\r\n\t\t\t\t\t\t<thead className=\"w\">\r\n\t\t\t\t\t\t<tr className=\"w\">\r\n\t\t\t\t\t\t\t<th className=\"tl\" style={{width: 'calc(100% - 540px)', paddingLeft: '40px'}}>文件名称</th>\r\n\t\t\t\t\t\t\t<th className=\"w100 tc\">大小</th>\r\n\t\t\t\t\t\t\t<th className=\"w100 tc\">上传人</th>\r\n\t\t\t\t\t\t\t<th className=\"w170 tc\">上传时间</th>\r\n\t\t\t\t\t\t\t<th className=\"w170 tc\">操作</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\theight: \"calc(100% - 47px)\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tautoHide>\r\n\t\t\t\t\t\t{mobx.toJS(this.store.tableData).length > 0 ?\r\n\t\t\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\t\t\tinitialLoad={false}\r\n\t\t\t\t\t\t\tpageStart={0}\r\n\t\t\t\t\t\t\tloadMore={this.handleInfiniteOnLoad.bind(this)}\r\n\t\t\t\t\t\t\thasMore={!this.store.loading && this.store.hasMore}\r\n\t\t\t\t\t\t\tuseWindow={false}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<table className=\"w share_resource_table\">\r\n\t\t\t\t\t\t\t\t<tbody className=\"w\">\r\n\t\t\t\t\t\t\t\t{mobx.toJS(tableData).length > 0 && mobx.toJS(tableData).map((item, index) => {\r\n                                    const {fileName} = item;\r\n\t\t\t\t\t\t\t\t\tconst isImage = (/\\.(doc|docx)$/.test(fileName) || /\\.(xls|xlsx)$/.test(fileName) || /\\.(zip|rar)$/.test(fileName)) || (/\\.(ppt|pptx)$/.test(fileName));\r\n\r\n\t\t\t\t\t\t\treturn (<tr key={'tab' + index} className=\"w\">\r\n\t\t\t\t\t\t\t\t<td className=\"tl pr\" style={{width: 'calc(100% - 540px)'}}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"filename\">\r\n\t\t\t\t\t\t\t\t\t\t<img style={{verticalAlign: 'middle', marginRight: '8px'}} width='32' height=\"32 \"src={this.trans(item)} alt=\"\"/>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"filename ellsis\" title={item.fileName}>{item.fileName}</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"w100 tc\">\r\n\t\t\t\t\t\t\t\t\t{converSize(item.fileSize)}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"w100 tc\">\r\n\t\t\t\t\t\t\t\t\t管理员\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"w170 tc\">\r\n\t\t\t\t\t\t\t\t\t{(moment(item.createTime).format('YYYY-MM-DD HH:mm:ss'))}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td className=\"w170 tc\">\r\n\t\t\t\t\t\t\t\t\t{hasJournal?<span>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.isPreview(item)?<span style={{color: \"#1890ff\", cursor: \"pointer\", fontSize: '14px'}} onClick={this.onPreview.bind(this, item)}>预览 <Divider type=\"vertical\"/></span>:null\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t{isImage?<a href={item.filePath} style={{fontSize: '14px'}}>下载</a>:<span style={{color: \"#40a9ff\", cursor: \"pointer\", fontSize: '14px'}} onClick={this.downloadUrl.bind(this, item)}>下载</span>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <Divider type=\"vertical\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.delete(item)}>\r\n\t\t\t\t\t\t\t\t\t\t              <a style={{fontSize: '14px'}} href=\"javascript:;\">删除</a>\r\n\t\t\t\t\t\t\t\t\t\t          </Popconfirm>\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <Divider type=\"vertical\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <MyUploadThree\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t multiple={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t saveAttachment={this.changeDocument.bind(this, item)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t  />\r\n\t\t\t\t\t\t\t\t\t\t\t    </span>:\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.isPreview(item)?<span style={{color: \"#1890ff\", cursor: \"pointer\", fontSize: '14px'}} onClick={this.onPreview.bind(this, item)}>预览 <Divider type=\"vertical\"/></span>:null\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{isImage?<a href={item.filePath} style={{fontSize: '14px'}}>下载</a>:<span style={{color: \"#1890ff\", cursor: \"pointer\", fontSize: '14px'}} onClick={this.downloadUrl.bind(this, item)}>下载</span>}\r\n\t\t\t\t\t\t\t\t\t\t\t    </span>}\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</InfiniteScroll> : <Empty\r\n\t\t\t\t\t\t\t\timage='./images/not_found.png'\r\n\t\t\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\t\tmarginTop: 60,\r\n\t\t\t\t\t\t\t}}/>}\r\n\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t{hasJournal?<Row className=\"pr\" style={{marginTop: \"5px\"}}>\r\n\t\t\t\t\t\t<Col span={24} className=\"tfc\">\r\n\t\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: '0px',\r\n\t\t\t\t\t\t\t\tleft: '5px',\r\n\t\t\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\t\t\tcolor: 'rgb(153, 153, 153)'\r\n\t\t\t\t\t\t\t}}>{`共 ${totalCount} 条 `}</div>\r\n\t\t\t\t\t\t\t<MyUploadThree\r\n\t\t\t\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<PreviewModal\r\n\t\t\t\t   onRef={this.onRef}\r\n\t\t\t\t/>\r\n\t\t\t</Row>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/digitalOrg/SharedResource.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InfiniteScroll = function (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  function InfiniteScroll(props) {\n    _classCallCheck(this, InfiniteScroll);\n\n    var _this = _possibleConstructorReturn(this, (InfiniteScroll.__proto__ || Object.getPrototypeOf(InfiniteScroll)).call(this, props));\n\n    _this.scrollListener = _this.scrollListener.bind(_this);\n    _this.eventListenerOptions = _this.eventListenerOptions.bind(_this);\n    _this.mousewheelListener = _this.mousewheelListener.bind(_this);\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.pageLoaded = this.props.pageStart;\n      this.options = this.eventListenerOptions();\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.isReverse && this.loadMore) {\n        var parentElement = this.getParentElement(this.scrollComponent);\n        parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;\n        this.loadMore = false;\n      }\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.detachScrollListener();\n      this.detachMousewheelListener();\n    }\n  }, {\n    key: 'isPassiveSupported',\n    value: function isPassiveSupported() {\n      var passive = false;\n\n      var testOptions = {\n        get passive() {\n          passive = true;\n        }\n      };\n\n      try {\n        document.addEventListener('test', null, testOptions);\n        document.removeEventListener('test', null, testOptions);\n      } catch (e) {\n        // ignore\n      }\n      return passive;\n    }\n  }, {\n    key: 'eventListenerOptions',\n    value: function eventListenerOptions() {\n      var options = this.props.useCapture;\n\n      if (this.isPassiveSupported()) {\n        options = {\n          useCapture: this.props.useCapture,\n          passive: true\n        };\n      }\n      return options;\n    }\n\n    // Set a defaut loader for all your `InfiniteScroll` components\n\n  }, {\n    key: 'setDefaultLoader',\n    value: function setDefaultLoader(loader) {\n      this.defaultLoader = loader;\n    }\n  }, {\n    key: 'detachMousewheelListener',\n    value: function detachMousewheelListener() {\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = this.scrollComponent.parentNode;\n      }\n\n      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'detachScrollListener',\n    value: function detachScrollListener() {\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'getParentElement',\n    value: function getParentElement(el) {\n      var scrollParent = this.props.getScrollParent && this.props.getScrollParent();\n      if (scrollParent != null) {\n        return scrollParent;\n      }\n      return el && el.parentNode;\n    }\n  }, {\n    key: 'filterProps',\n    value: function filterProps(props) {\n      return props;\n    }\n  }, {\n    key: 'attachScrollListener',\n    value: function attachScrollListener() {\n      var parentElement = this.getParentElement(this.scrollComponent);\n\n      if (!this.props.hasMore || !parentElement) {\n        return;\n      }\n\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = parentElement;\n      }\n\n      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n\n      if (this.props.initialLoad) {\n        this.scrollListener();\n      }\n    }\n  }, {\n    key: 'mousewheelListener',\n    value: function mousewheelListener(e) {\n      // Prevents Chrome hangups\n      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n      if (e.deltaY === 1 && !this.isPassiveSupported()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'scrollListener',\n    value: function scrollListener() {\n      var el = this.scrollComponent;\n      var scrollEl = window;\n      var parentNode = this.getParentElement(el);\n\n      var offset = void 0;\n      if (this.props.useWindow) {\n        var doc = document.documentElement || document.body.parentNode || document.body;\n        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n        if (this.props.isReverse) {\n          offset = scrollTop;\n        } else {\n          offset = this.calculateOffset(el, scrollTop);\n        }\n      } else if (this.props.isReverse) {\n        offset = parentNode.scrollTop;\n      } else {\n        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n      }\n\n      // Here we make sure the element is visible as well as checking the offset\n      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n        this.detachScrollListener();\n        this.beforeScrollHeight = parentNode.scrollHeight;\n        this.beforeScrollTop = parentNode.scrollTop;\n        // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n        if (typeof this.props.loadMore === 'function') {\n          this.props.loadMore(this.pageLoaded += 1);\n          this.loadMore = true;\n        }\n      }\n    }\n  }, {\n    key: 'calculateOffset',\n    value: function calculateOffset(el, scrollTop) {\n      if (!el) {\n        return 0;\n      }\n\n      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n    }\n  }, {\n    key: 'calculateTopPosition',\n    value: function calculateTopPosition(el) {\n      if (!el) {\n        return 0;\n      }\n      return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var renderProps = this.filterProps(this.props);\n\n      var children = renderProps.children,\n          element = renderProps.element,\n          hasMore = renderProps.hasMore,\n          initialLoad = renderProps.initialLoad,\n          isReverse = renderProps.isReverse,\n          loader = renderProps.loader,\n          loadMore = renderProps.loadMore,\n          pageStart = renderProps.pageStart,\n          ref = renderProps.ref,\n          threshold = renderProps.threshold,\n          useCapture = renderProps.useCapture,\n          useWindow = renderProps.useWindow,\n          getScrollParent = renderProps.getScrollParent,\n          props = _objectWithoutProperties(renderProps, ['children', 'element', 'hasMore', 'initialLoad', 'isReverse', 'loader', 'loadMore', 'pageStart', 'ref', 'threshold', 'useCapture', 'useWindow', 'getScrollParent']);\n\n      props.ref = function (node) {\n        _this2.scrollComponent = node;\n        if (ref) {\n          ref(node);\n        }\n      };\n\n      var childrenArray = [children];\n      if (hasMore) {\n        if (loader) {\n          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n        } else if (this.defaultLoader) {\n          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n        }\n      }\n      return _react2.default.createElement(element, props, childrenArray);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(_react.Component);\n\nInfiniteScroll.propTypes = {\n  children: _propTypes2.default.node.isRequired,\n  element: _propTypes2.default.node,\n  hasMore: _propTypes2.default.bool,\n  initialLoad: _propTypes2.default.bool,\n  isReverse: _propTypes2.default.bool,\n  loader: _propTypes2.default.node,\n  loadMore: _propTypes2.default.func.isRequired,\n  pageStart: _propTypes2.default.number,\n  ref: _propTypes2.default.func,\n  getScrollParent: _propTypes2.default.func,\n  threshold: _propTypes2.default.number,\n  useCapture: _propTypes2.default.bool,\n  useWindow: _propTypes2.default.bool\n};\nInfiniteScroll.defaultProps = {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null,\n  getScrollParent: null\n};\nexports.default = InfiniteScroll;\nmodule.exports = exports['default'];\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-infinite-scroller/dist/InfiniteScroll.js\n// module id = 1528\n// module chunks = 2 5 8 11 22 27 31 36","module.exports = require('./dist/InfiniteScroll')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-infinite-scroller/index.js\n// module id = 1529\n// module chunks = 2 5 8 11 22 27 31 36","/*\r\n* 大文件上传组件 多个\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message, Spin, Button} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport bpmSchemas from \"@/utils/Schemas/bpm\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `document/${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n@inject('appStore')\r\n@observer\r\nclass MyUploadThree extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.appStore;\r\n\t\tthis.state = {\r\n\t\t\tfileList: [],\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '', // oss的key_id\r\n\t\t\t\taccess_key_secret: '', // oss的secret\r\n\t\t\t\tstsToken: '',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tfilePath: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t\tactiveIndex: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// 阿里云上传参数\r\n\t\trequestPost('getSts', Config.bpm.getSts, bpmSchemas.bpm.getSts, {})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tlet str = typeof res ==\"string\"?JSON.parse(res):res;\r\n\t\t\t\tif (str) {\r\n\t\t\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\t\t\taccess_key_id: str.accessKeyId,\r\n\t\t\t\t\t\t\taccess_key_secret: str.accessKeySecret,\r\n\t\t\t\t\t\t\tstsToken: str.securityToken\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\t// 更新url\r\n\tchangeSrc = (res, file) => {\r\n\t\tconst {host} = this.state;\r\n\t\tconst url = host + uploadPath('path', file);\r\n\t\tlet obj = Object.assign({}, {\r\n\t\t\tuid: file.uid,\r\n\t\t\tname: file.name,\r\n\t\t\tstatus: \"done\",\r\n\t\t\turl: url,\r\n\t\t\tfileId: null,\r\n\t\t\tfileName: file.name,\r\n\t\t\tfilePath: url,\r\n\t\t\tfileSize: file.size,\r\n\t\t\tid: \"\",\r\n\t\t});\r\n\t\tlet newFileList = [obj];\r\n\t\t// 处理附件\r\n\t\tlet array = JSON.parse(JSON.stringify(newFileList))\r\n\t\tconsole.log(file, array, '文件');\r\n\t\tthis.props.saveAttachment(array);\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t});\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\t// 处理地址\r\n\t\t\t\tconst {res} = data;\r\n\t\t\t\tif (res.status&&res.status==200) {  // 单个文件上传成功\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.changeSrc(res, file);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {multiple} =this.props;\r\n\t\tconst props = {\r\n\t\t\tmultiple: true,\r\n\t\t\tname: 'file',\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tshowUploadList: false\r\n\t\t};\r\n\t    return (\r\n\t\t    <Upload {...props}>\r\n\t\t\t    <Spin delay=\"100\" tip=\"上传中...\" spinning={this.state.loading}>\r\n\t\t\t\t    {multiple? <Button type=\"primary\" size=\"small\">\r\n\t\t\t\t\t    <Icon type=\"upload\"/> <span style={{fontSize: '12px'}}>点击上传文件</span>\r\n\t\t\t\t    </Button>: <a style={{fontSize: '14px'}} href=\"javascript:;\">更新</a>}\r\n\t\t\t    </Spin>\r\n\t\t    </Upload>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUploadThree;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/MyUploadThree.js","/*\r\n* 预览组件\r\n* dangwei\r\n* */\r\nimport React from \"react\";\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Upload, message, Modal} from 'antd';\r\nimport Viewer from 'react-viewer';\r\n//import {downloadFile, download} from \"@/utils/download\";\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\n\r\n@observer\r\nclass PreviewModal extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tthis.props.onRef(this)\r\n\t}\r\n\r\n\tgetDocumentUrl = (url) => {\r\n\t\treturn requestPost('getDocumentUrl', Config.journal.getDocumentUrl, journalSchemas.journal.getDocumentUrl, {url: url})\r\n\t}\r\n\r\n\thandlePreview = async file => {\r\n\t\tif (/\\.(doc|docx)$/.test(file.fileName) || /\\.(xls|xlsx)$/.test(file.fileName) || /\\.(pdf)$/.test(file.fileName) || /\\.(ppt|pptx)$/.test(file.fileName)) { // 文档\r\n\t\t\tthis.getDocumentUrl(file.filePath).then((res) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: res,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.fileName,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else if (/\\.(txt)$/.test(file.fileName)) {   // txt文本\r\n\t\t\tthis.setState({\r\n\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\tpreviewVisible: true,\r\n\t\t\t\tname: file.fileName,\r\n\t\t\t});\r\n\t\t} else {  // 图片、音频\r\n\t\t\t// 文件类型判断\r\n\t\t\tfunction isAssetTypeAnImage(ext) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\t//获取后缀\r\n\t\t\tfunction getExt(filePath) {\r\n\t\t\t\t// 去掉url的问号\r\n\t\t\t\tif (filePath.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\tfilePath = filePath.split(\"?\")[0];\r\n\t\t\t\t}\r\n\t\t\t\t//获取最后一个.的位置\r\n\t\t\t\tlet index = filePath.lastIndexOf(\".\");\r\n\t\t\t\t//获取后缀\r\n\t\t\t\tlet ext = filePath.substr(index + 1);\r\n\t\t\t\treturn ext;\r\n\t\t\t}\r\n\r\n\t\t\tif (isAssetTypeAnImage(getExt(file.filePath))) {  // 判断是图片\r\n\t\t\t\tlet imageArray;\r\n\t\t\t\timageArray = [{\r\n\t\t\t\t\tsrc: file.filePath,\r\n\t\t\t\t\talt: file.fileName,\r\n\t\t\t\t\tdownloadUrl: file.filePath\r\n\t\t\t\t}]\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\timageArray: Object.assign([], imageArray),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {   // 视频\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.fileName,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (type) => this.setState({\r\n\t\t[type]: false,\r\n\t\tpreviewImage: \"\",\r\n\t\tname: \"\"\r\n\t});\r\n\r\n\trender() {\r\n\t\tconst {name, previewImage, previewVisible, imageArray, visible} = this.state;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name) || /\\.(xls|xlsx)$/.test(name) || /\\.(pdf)$/.test(name) || /\\.(txt)$/.test(name)) || (/\\.(ppt|pptx)$/.test(name));\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={<div>{name}</div>}\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\tvisible={previewVisible}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tonCancel={this.handleCancel.bind(this, 'previewVisible')}>\r\n\t\t\t\t\t{isImage ? <iframe\r\n\t\t\t\t\t\t\tsrc={previewImage}\r\n\t\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\t\t\tframeBorder='1'>\r\n\t\t\t\t\t\t</iframe> :\r\n\t\t\t\t\t\t<video src={previewImage} controls=\"controls\" width={\"100%\"} height={\"100%\"}>\r\n\t\t\t\t\t\t\t您的浏览器不支持 video 标签。\r\n\t\t\t\t\t\t</video>}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Viewer\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.handleCancel.bind(this, 'visible')}\r\n\t\t\t\t\timages={imageArray}\r\n\t\t\t\t\tactiveIndex={0}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default PreviewModal;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/PreviewModal.js","/*\r\n* 资源共享 store\r\n*/\r\nimport {observable, action} from 'mobx';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\nimport loginSchemas from \"@/utils/Schemas/login\";\r\n\r\nclass ShareStore {\r\n\r\n  @observable text= \"\";\r\n  @observable pageIndex= 1;\r\n  @observable pageSize= 50;\r\n  @observable tableData = [];\r\n  @observable totalCount = 0;\r\n  @observable loading=false;\r\n  @observable hasMore=true;\r\n\r\n  // 文档类型列表\r\n  @action\r\n  getDocumentTypeList() {\r\n    return requestPost('getDocumentTypeList', Config.journal.getDocumentTypeList, journalSchemas.journal.getDocumentTypeList, {\r\n      text: this.text\r\n    });\r\n  }\r\n\r\n  // 根据typeId 过滤文档列表\r\n  @action\r\n  getDocumentListByTypeId(param) {\r\n    return requestPost('getDocumentListByTypeId', Config.journal.getDocumentListByTypeId, journalSchemas.journal.getDocumentListByTypeId, {\r\n      text: this.text,\r\n      typeId: param,\r\n      pageIndex: this.pageIndex,\r\n      pageSize: this.pageSize\r\n    })\r\n      .then((res)=>{\r\n        this.tableData = Object.assign([], res.body)\r\n        this.totalCount = res.totalCount;\r\n        return res;\r\n      });\r\n  }\r\n\r\n  @action\r\n  getDocumentListByTypeId2(param) {\r\n    return requestPost('getDocumentListByTypeId', Config.journal.getDocumentListByTypeId, journalSchemas.journal.getDocumentListByTypeId, {\r\n      text: this.text,\r\n      typeId: param,\r\n      pageIndex: this.pageIndex,\r\n      pageSize: this.pageSize\r\n    })\r\n  }\r\n\r\n\r\n  // 添加多个文件\r\n  @action\r\n  addDocuments(param) {\r\n    return requestPost('addDocuments', Config.journal.addDocuments, journalSchemas.journal.addDocuments, {\r\n      ds: param\r\n    })\r\n  }\r\n\r\n  // 删除\r\n  @action\r\n  delDocument(param) {\r\n    return requestPost('delDocument', Config.journal.delDocument, journalSchemas.journal.delDocument, {\r\n      id: param\r\n    })\r\n  }\r\n\r\n  //  修改单个文档\r\n  @action\r\n  changeDocument(param) {\r\n    return requestPost('changeDocument', Config.journal.changeDocument, journalSchemas.journal.changeDocument, {\r\n      d: param\r\n    })\r\n  }\r\n\r\n  @observable hasJournal = false; // 权限\r\n\r\n  // 获取操作权限\r\n  @action\r\n  getUserPermissionByAppCode() {\r\n    return requestPost('getUserPermissionByAppCode', Config.authorization.getPermission, loginSchemas.login.getUserPermissionByAppCode, {\"appCode\": \"bocspace\"}).then((res) => {\r\n      // 数字组织权限\r\n      if (res.some((item) => {\r\n        return item.code.includes(\"bocspace.document\")\r\n      })) {\r\n        this.hasJournal = true;\r\n      } else {\r\n        this.hasJournal = false;\r\n      }\r\n    })\r\n  }\r\n\r\n  //getXzUrl\r\n  @action\r\n  getXzUrl() {\r\n    return requestPost('getXzUrl', Config.journal.getXzUrl, journalSchemas.journal.getXzUrl, {\r\n      key: \"\"\r\n    })\r\n  }\r\n}\r\n\r\nexport default ShareStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/digitalOrg/ShareStore.js"],"sourceRoot":""}