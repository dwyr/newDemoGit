{"version":3,"sources":["webpack:///./src/containers/digitalOrg/SmartOrg.js","webpack:///./src/components/common/MyUpload.js?ee17**","webpack:///./src/components/digitalOrg/EditeVisit.js?09c6*","webpack:///./src/components/digitalOrg/CommentList.js?150b*","webpack:///./~/react-infinite-scroller/dist/InfiniteScroll.js?fad8**","webpack:///./~/react-infinite-scroller/index.js?8839**","webpack:///./src/components/digitalOrg/DigitalComment.js?c802*","webpack:///./src/components/digitalOrg/CommonEmail2.js?d0ae*","webpack:///./src/components/digitalOrg/DetailForm.js?80b1*","webpack:///./src/components/digitalOrg/DetailFormMonthlySharing.js?4943*","webpack:///./src/components/digitalOrg/DetailFormNews.js?8f07*","webpack:///./src/components/digitalOrg/DetailFormReplay.js?2260*","webpack:///./src/components/digitalOrg/DetailFormSummary.js?101f*","webpack:///./src/components/digitalOrg/DetailFormVisit.js?998e*","webpack:///./src/components/digitalOrg/EditeMeeting.js?a434*","webpack:///./src/components/digitalOrg/PersonEdit.js?822c*"],"names":["mobx","SmartOrg","observer","props","handleEdit","param","dataArray","toJS","store","maintableData","map","item","Object","assign","selested","dindex","findIndex","id","splice","isRead","selestedId","draftId","detemList","digtalTemData","filter","type","temList","getJournalById","then","res","deData","getLikeUsersByJournalId","getCommentsByJournalId","getJournalIndicators","isEdit","child","handleCalc","undefined","getNotReadCount","getReadUsersByJournalId","handleInfiniteOnLoad","maintotalCount","length","loading","mainQuery","pageIndex","getJournalMainPageListNew","data","concat","body","handleClick","orderType","readType","pageSize","getJournalMainPageList","onChangeState","e","newData","JSON","parse","stringify","state","index","vitem","checked","target","setState","onSelect","value","text","onChange","onAsync","syncAssignment","message","success","detailData","assignments","isSync","handleAddNew","detail","saveAssignments","onRef","ref","onRef2","child2","hanndleVis","hanndleVis2","handleRoute","digtalKey","history","push","handleDraftRoute","getTable","saveType","tag","category","scrollToAnchor","anchorName","anchorElement","document","getElementById","scrollIntoView","block","err","console","log","checkoutType","digtalTem","checkreadType","DigtalOrgStore","ratio","nextProps","nextContext","_this","getJournalTypeList","getJournalTagList","getUserPermissionByAppCode","emitter","addListener","journal","getSts","window","addEventListener","removeListener","removeEventListener","notReadCount","hasMore","tagList","hasJournal","options","opt","name","menu","includes","bind","temType","paddingRight","width","height","display","alignItems","justifyContent","padding","borderBottom","marginLeft","textAlign","color","fontSize","cursor","title","userName","tags","actualTime","format","marginTop","borderLeft","minHeight","paddingLeft","overflowY","location","pathname","React","Component","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","uid","UploadToOss","url","Promise","resolve","reject","multipartUpload","catch","error","MyUpload","getDocumentUrl","Config","journalSchemas","handleChange","info","status","fileList","oldFileList","newFileList","originFileObj","host","fileId","fileName","filePath","array","saveAttachment","changeSrc","obj","beforeUpload","accept","acceptDefault","split","warn","isLt2M","size","journalType","reader","FileReader","readAsDataURL","onloadend","handlePreview","test","previewImage","previewVisible","isAssetTypeAnImage","ext","indexOf","toLowerCase","getExt","lastIndexOf","substr","imageArray","src","alt","downloadUrl","visible","activeIndex","handleCancel","isImage","downloadImage","onDownload","x","XMLHttpRequest","open","responseType","onload","response","send","cancel","appStore","ossData","securityToken","bpm","bpmSchemas","str","multiple","disabled","listType","onPreview","showUploadList","showDownloadIcon","uploadButton","position","top","right","backgroundSize","maxHeight","toolbars","key","render","onClick","activeImage","EditeVisit","saveDraft","handleSubmit","onClose","updateState","timer","setInterval","saveAuto","clearInterval","formItemLayout","labelCol","xs","span","sm","wrapperCol","onCancle","collapsed","isWeekShow","marginRight","CommentList","handleZan","addOrDelLike","handCollection","addOrDelCollection","handleVisibleChange","getSharedEditingList","Array","isArray","editvisible","getLikeUsers","getComments","journalIndicators","username","localStorage","getItem","isLike","haveCollection","userId","isShow","isWeek","viewCount","utils","TextArea","Input","Editor","onSubmit","submitting","Editor2","ExampleComment","setTimeout","addComment","pid","params","mainId","pUserId","reset","onDel","delComment","createTime","children","parentUserName","DigitalComment","clearState","callback","renderTreeNodes","comments","readUsers","treeData","formatList","join","CommonEmail2","getReportUrl","isLoading","journalMain","pdfName","timer22","getDownloadUrl","code","creatWord","wordDownload","pdfDownload","sendReport","emails","userIds","checks","ccEmails","ccUserIds","isemailUserIds","isemails","attType","Number","sendEmail","handleOpen","handleOk","checkedValues","tip","label","listStyle","Text","Typography","DetailForm","remove","customList","addAssignments","handleAdd","some","userInformations","updatePerson","fields","audioSrc","clickChange","hanndleChangeEdit","changeCanEdit","userid","Modal","warning","handleCancle","appendAliyundata","base64","audioKey","appendToAliyunData","base64Data","aliyunAppendData","nextPosition","reSetAliyundata","newAddignments","formItemLayoutWithOutLabel","offset","formItemLayoutLabel","journalSub","Base64","decode","sub","atts","attachments","vindex","audio","dropDown","preventDefault","zIndex","maxWidth","time","hours","place","people","__html","content","conclusion","paddingTop","margin","DetailFormNew","formTailLayout","cases","introspection","DetailFormNews","DetailFormReplay","assessmentResult","analyzeReason","summarizeLaw","DetailFormSummary","DetailFormVisit","company","project","address","ourPeople","fontWeight","visitPeoples","phone","purpose","process","promise","EditeMeeting","handleNumChange","onDateChange","date","dateString","handleBChange","editorState","handleAttment","arr","audioStatus","attcs","numTime","valueOf","newTime","encode","saveJournalByType","emit","journalAudio","form","validateFields","values","cancelJournal","resetFields","init","toHTML","setFieldsValue","updateAudioStaus","onRefAudio","newArray","ContentUtils","insertMedias","onChangeAttc","keys","excludeControls","disabledDate","current","getFieldDecorator","imageControls","initialValue","rules","required","minRows","fontFamily","marginBottom","minWidth","editForm","Form","create","_","colorList","PersonEdit","defaultDatas","defaultData","oldSelect","v","selected","users","saveSharedEditing","handClick","handClickDel","trim","handleClickDebounce","filterData","getData","debounce","UserStore","getRole","realname","isFilter","activeData","station","email","backgroundColor","verticalAlign","slice"],"mappings":"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CA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrSA,iBAAiB,mB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","file":"js/11-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 知识管理\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Row, Col, Empty, Icon, Tag, Input, Button, AutoComplete, Spin, Checkbox, Menu, Dropdown, Badge, message, Affix} from 'antd';\r\nimport * as  mobx from 'mobx';\r\nimport moment from 'moment';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport DetailForm from '@/components/digitalOrg/DetailForm';\r\nimport DetailFormVisit from '@/components/digitalOrg/DetailFormVisit';\r\nimport DetailFormMonthlySharing from '@/components/digitalOrg/DetailFormMonthlySharing';\r\nimport DetailFormSummary from '@/components/digitalOrg/DetailFormSummary';\r\nimport DetailFormReplay from '@/components/digitalOrg/DetailFormReplay';\r\nimport DetailFormNews from '@/components/digitalOrg/DetailFormNews';\r\nimport emitter from \"@/utils/events\";\r\nimport {detectZoom} from \"@/utils/utils\";\r\nimport DigitalComment from \"@/components/digitalOrg/DigitalComment\";\r\n\r\n@inject('DigtalOrgStore')\r\n@observer\r\nexport default class SmartOrg extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.DigtalOrgStore;\r\n\t\tthis.state = {\r\n\t\t\tdigtalTem: [], // 类型\r\n\t\t\tratio: 100\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\t// 初始化查询\r\n\t\t_this.getTable();\r\n\t\tthis.store.getJournalTypeList();\r\n\t\tthis.store.getJournalTagList();\r\n\t\tthis.store.getUserPermissionByAppCode();\r\n\t\t// 时间监听\r\n\t\t_this.emitter = emitter.addListener('journal', (journal) => {\r\n\t\t\t_this.getTable();\r\n\t\t});\r\n        // 获取大文件上传sts\r\n\t\tthis.props.DigtalOrgStore.getSts();\r\n\r\n\t\twindow.addEventListener(\"resize\", function() {\r\n\t\t\t_this.setState({\r\n\t\t\t   ratio: detectZoom()\r\n\t\t});}, false);\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tlet _this = this;\r\n\t\tif (_this.emitter) {\r\n\t\t\temitter.removeListener(_this.emitter);\r\n\t\t}\r\n\t\twindow.removeEventListener(\"resize\", function() {\r\n\t\t\t_this.setState({\r\n\t\t\t\tratio: 100\r\n\t\t\t});}, false);\r\n\t}\r\n\r\n\t// 切换详情\r\n\thandleEdit = (param) => {\r\n\t\tlet dataArray = mobx.toJS(this.store.maintableData).map((item) => Object.assign(item, {selested: false}));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selested: true, isRead: true}))\r\n\t\tthis.store.maintableData = Object.assign([], dataArray);\r\n\t\tthis.store.selestedId = param.id;\r\n\t\tthis.store.draftId = param.id;  // 记录草稿ID\r\n\t\tthis.store.detemList = Object.assign({}, mobx.toJS(this.store.digtalTemData).filter(item=>item.type==param.type)[0]);\r\n\t\tthis.store.temList = Object.assign({}, mobx.toJS(this.store.digtalTemData).filter(item=>item.type==param.type)[0]);\r\n\t\tthis.store.getJournalById(param.id)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.store.deData = Object.assign({}, res);\r\n\t\t\t\t//this.store.detailData = Object.assign({}, res);\r\n\t\t\t});\r\n\t\t// 点赞\r\n\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t// 评论\r\n\t\tthis.store.getCommentsByJournalId();\r\n\t\tthis.store.getJournalIndicators();\r\n\t\tthis.store.isEdit = false;  // 详情态\r\n\t\tif (this.child&&this.child.handleCalc!=undefined&&typeof this.child.handleCalc == \"function\") {\r\n\t\t\tthis.child.handleCalc();\r\n\t\t}\r\n\t\tthis.store.getNotReadCount();\r\n\t\tthis.store.getReadUsersByJournalId();\r\n\t}\r\n\r\n\t// 获取下一页信息\r\n\thandleInfiniteOnLoad = () => {\r\n\t\tlet dataArray = mobx.toJS(this.store.maintableData);\r\n\t\tif (this.store.maintotalCount === dataArray.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.store.loading = true;\r\n\t\tthis.store.mainQuery.pageIndex = this.store.mainQuery.pageIndex + 1;\r\n\t\tthis.store.getJournalMainPageListNew().then((res) => {\r\n\t\t\tconst data = res;\r\n\t\t\tdataArray = dataArray.concat(data.body);\r\n\t\t\tthis.store.maintableData = Object.assign([], dataArray);\r\n\t\t\tthis.store.loading = false;\r\n\t\t});\r\n\t}\r\n\r\n\thandleClick = (type) => {\r\n\t\tthis.store.mainQuery.orderType = type;\r\n\t\tthis.store.mainQuery.readType = 0;\r\n\t\tthis.store.mainQuery.pageIndex = 1;\r\n\t\tthis.store.mainQuery.pageSize = 10;\r\n\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 设置状态\r\n\tonChangeState = (type, item, e) => {\r\n\t\tlet newData = JSON.parse(JSON.stringify(this.state[type]));\r\n\t\tlet index = newData.findIndex(vitem => vitem == item.type);\r\n\t\tconst {checked} = e.target;\r\n\t\tif (index == -1) {  // 新增\r\n\t\t\tthis.setState({\r\n\t\t\t\t[type]: [...newData, item.type]\r\n\t\t\t}, () => {\r\n\t\t\t\t// 查询\r\n\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\ttype: Object.assign([], this.state[type]),\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getJournalMainPageList();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (checked == false) { // 取消选中\r\n\t\t\t\tnewData.splice(index, 1);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t[type]: Object.assign([], newData)\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// 查询\r\n\t\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\t\ttype: Object.assign([], this.state[type]),\r\n\t\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\t\tpageSize: 10\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.store.getJournalMainPageList();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonSelect = (value) => {\r\n\t\t// 查询\r\n\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\ttext: value,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10\r\n\t\t});\r\n\t\tthis.store.getJournalMainPageList();\r\n\t}\r\n\r\n\tonChange = (value) => {\r\n\t\t// 查询\r\n\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\ttext: value,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10\r\n\t\t});\r\n\t\tthis.store.getJournalMainPageList();\r\n\t}\r\n\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.store.syncAssignment(id).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"同步成功\");\r\n\t\t\t\t// 前端同步数据\r\n\t\t\t\tlet detailData = JSON.parse(JSON.stringify(this.store.deData));\r\n\t\t\t\tlet assignments = detailData[type];\r\n\t\t\t\tassignments[index].isSync = 1; // 同步成功\r\n\t\t\t\tthis.store.deData = Object.assign(detailData, {\r\n\t\t\t\t\t[type]: assignments\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存追加任务\r\n\thandleAddNew = (detail) => {\r\n\t\tthis.store.saveAssignments(detail).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\r\n\t\t\t\t// 重查\r\n\t\t\t\tthis.store.getJournalById(this.store.selestedId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.store.deData = Object.assign({}, res);\r\n\t\t\t\t\tthis.child.handleCalc();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tonRef2 = (ref) => {\r\n\t\tthis.child2 = ref\r\n\t}\r\n\r\n\thanndleVis = () => {\r\n\t\tconst {mainQuery} = this.store;\r\n\t\tconst orderType = mobx.toJS(mainQuery).orderType;\r\n\t\tif (orderType==0) {\r\n\t\t\tthis.handleClick(1);\r\n\t\t} else if (orderType==1) {\r\n\t\t\tthis.handleClick(2);\r\n\t\t} else {\r\n\t\t\tthis.handleClick(1);\r\n\t\t}\r\n\t}\r\n\r\n\thanndleVis2 = () => {\r\n\t\tconst {mainQuery} = this.store;\r\n\t\tconst orderType = mobx.toJS(mainQuery).orderType;\r\n\t\tif (orderType==0) {\r\n\t\t\tthis.handleClick(4);\r\n\t\t} else if (orderType==4) {\r\n\t\t\tthis.handleClick(3);\r\n\t\t} else {\r\n\t\t\tthis.handleClick(4);\r\n\t\t}\r\n\t}\r\n\r\n\t// 提交发布成功，跳转到知识管理\r\n\thandleRoute = () => {\r\n\t\tthis.store.digtalKey = \"2\";\r\n\t\tthis.props.history.push(\"/digital/org\");\r\n\t}\r\n\r\n\t// 草稿保存成功，跳转到草稿箱\r\n\thandleDraftRoute = () => {\r\n\t\tthis.store.digtalKey = 0;\r\n\t\tthis.props.history.push(\"/digital/draft\");\r\n\t}\r\n\r\n\t// 重查\r\n\tgetTable = () => {\r\n\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\tsaveType: 2,\r\n\t\t\ttext: \"\",\r\n\t\t\ttag: [],\r\n\t\t\ttype: [],\r\n\t\t\torderType: 0,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tcategory: 1,\r\n\t\t\treadType: 0\r\n\t\t});\r\n\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\"+err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 类型判断\r\n\tcheckoutType = (type, item) => {\r\n\t\tif (type==\"1\") { //全部\r\n\t\t\tthis.setState({\r\n\t\t\t\tdigtalTem: []\r\n\t\t\t}, () => {\r\n\t\t\t\t// 查询\r\n\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\ttype: this.state.digtalTem,\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else if (type==\"3\") {   // 收藏\r\n\t\t\tthis.setState({\r\n\t\t\t\tdigtalTem: [\"collection\"]\r\n\t\t\t}, () => {\r\n\t\t\t\t// 查询\r\n\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\ttype: this.state.digtalTem,\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdigtalTem: [item.type]\r\n\t\t\t}, () => {\r\n\t\t\t\t// 查询\r\n\t\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\t\ttype: this.state.digtalTem,\r\n\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 未读\r\n\tcheckreadType = () =>{\r\n\t\tlet mainQuery = JSON.parse(JSON.stringify(this.store.mainQuery));\r\n\t\tif (mainQuery.readType==0) {\r\n\t\t\t// 查询\r\n\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\treadType: 1,\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t});\r\n\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 查询\r\n\t\t\tthis.store.mainQuery = Object.assign(mobx.toJS(this.store.mainQuery), {\r\n\t\t\t\treadType: 0,\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\tpageSize: 10\r\n\t\t\t});\r\n\t\t\tthis.store.getJournalMainPageList().then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tif (mobx.toJS(this.store.maintableData).length > 0) {\r\n\t\t\t\t\t\t// 初始化默认值，列表第一项\r\n\t\t\t\t\t\tlet param = mobx.toJS(this.store.maintableData)[0];\r\n\t\t\t\t\t\tthis.handleEdit(param);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {digtalTem, ratio} = this.state;\r\n\t\tconst {notReadCount, maintableData, loading, hasMore, maintotalCount, digtalTemData, mainQuery, tagList, detailData, hasJournal, temList, isEdit, deData, detemList} = this.store;\r\n\t\tconst options = mobx.toJS(tagList).map(opt => opt.name);\r\n\t\tconst menu = (\r\n\t\t\t<Menu>\r\n\t\t\t\t{mobx.toJS(digtalTemData).map((item, index) => {\r\n\t\t\t\t\treturn <Menu.Item key={item.type}>\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\tchecked={this.state[\"digtalTem\"].includes(item.type)}\r\n\t\t\t\t\t\t\tkey={item.type + \"-\" + index}\r\n\t\t\t\t\t\t\tonChange={this.onChangeState.bind(this, \"digtalTem\", item)}\r\n\t\t\t\t\t\t>{item.name}</Checkbox></Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t\tconst orderType = mobx.toJS(mainQuery).orderType;\r\n\t\tconst readType = mobx.toJS(mainQuery).readType;\r\n\t\tconst temType = mobx.toJS(detemList).type;\r\n\r\n\t\treturn (\r\n\t\t\t<Row className=\"w clearfix pr\">\r\n\t\t\t\t{/*<Affix offsetTop={120}>*/}\r\n\t\t\t\t\t<ul className=\"smartorg_card\">\r\n\t\t\t\t\t\t<li key={'digtalTemData'+\"quanbu\"}\r\n                            className={digtalTem.length==0?\"smartorg_card_active\":\"\"}\r\n\t\t\t\t\t\t    onClick={this.checkoutType.bind(this, '1')}>全部</li>\r\n\t\t\t\t\t\t{mobx.toJS(digtalTemData).map((item, index) => {\r\n\t\t\t\t\t\t\treturn <li key={'digtalTemData'+index}\r\n\t\t\t\t\t\t\t           className={digtalTem.length>0&&digtalTem.includes(item.type)?\"smartorg_card_active\":\"\"}\r\n\t\t\t\t\t\t\t           onClick={this.checkoutType.bind(this, '2', item)}>{item.name}</li>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t<li key={'digtalTemData'+\"shoucang\"}\r\n\t\t\t\t\t\t    className={digtalTem.length>0&&digtalTem.includes(\"collection\")?\"smartorg_card_active\":\"\"}\r\n\t\t\t\t\t\t    onClick={this.checkoutType.bind(this, '3')}>我的收藏</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t{/*</Affix>*/}\r\n\t\t\t\t<div className=\"fl\" style={{paddingRight: '16px', width: '330px', height: \"calc(100vh - 180px)\"}}>\r\n\t\t\t\t\t<div className=\"clearfix\"\r\n\t\t\t\t\t     style={{\r\n\t\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\t\talignItems:'center',\r\n\t\t\t\t\t\tjustifyContent: 'flext-start',\r\n\t\t\t\t\t\tpadding: '0 0 10px 0',\r\n\t\t\t\t\t\tborderBottom: '1px solid #e6e6e6'}}>\r\n\t\t\t\t\t\t<Button size=\"small\" type=\"link\" style={{padding: '0 2px'}} onClick={this.hanndleVis}>最新</Button>\r\n\t\t\t\t\t\t<span style={{display: 'inline-block', width: '21px'}}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleClick.bind(this, 2)} type=\"caret-up\" className={orderType==1?\"caret-up digital_icon_active\":\"digital_icon caret-up\"}/>\r\n\t                        <Icon onClick={this.handleClick.bind(this, 1)} type=\"caret-down\" className={orderType==2?\"caret-down digital_icon_active\":\"digital_icon caret-down\"}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<Button size=\"small\" type=\"link\" style={{marginLeft:'1px', padding: '0 2px'}} onClick={this.hanndleVis2}>最热</Button>\r\n\t\t\t\t\t\t<span style={{display: 'inline-block', width: '21px'}}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleClick.bind(this, 3)} type=\"caret-up\" className={orderType==4?\"caret-up digital_icon_active\":\"digital_icon caret-up\"}/>\r\n\t                        <Icon onClick={this.handleClick.bind(this, 4)} type=\"caret-down\" className={orderType==3?\"caret-down digital_icon_active\":\"digital_icon caret-down\"}/>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tonClick={this.checkreadType}\r\n\t\t\t\t\t\t\tstyle={{textAlign: 'center',color: readType==0?\"#666\":\"#1E91FF\", display: 'inline-block', width: '70px', fontSize: '14px', cursor: 'pointer'}}>\r\n\t\t\t\t\t\t\t未读({notReadCount>=99?\"99+\":notReadCount})</span>\r\n\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\tclassName=\"certain-category-search fr\"\r\n\t\t\t\t\t\t\tdropdownClassName=\"certain-category-search-dropdown\"\r\n\t\t\t\t\t\t\tdropdownMatchSelectWidth={false}\r\n\t\t\t\t\t\t\tdropdownStyle={{width: '125px'}}\r\n\t\t\t\t\t\t\tsize=\"middle\"\r\n\t\t\t\t\t\t\tstyle={{width: '145px', marginLeft: '6px'}}\r\n\t\t\t\t\t\t\tdataSource={options}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t\toptionLabelProp=\"value\"\r\n\t\t\t\t\t\t\tonSelect={this.onSelect}\r\n\t\t\t\t\t\t\tonSearch={this.onChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input suffix={<Icon type=\"search\" className=\"certain-category-icon\"/>}/>\r\n\t\t\t\t\t\t</AutoComplete>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/*<Affix offsetTop={60}>*/}\r\n\t\t\t\t\t<div className=\"require-table\" style={{height: \"calc(100% - 63px)\"}}>\r\n\t\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\theight: \"calc(100% - 10px)\"\r\n\t\t\t\t\t\t\t\t//minHeight: \"100px\",\r\n\t\t\t\t\t\t\t\t//height: \"calc(100vh - \"+ ratio<100?(300+3*ratio):(180)+\"px)\"\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tautoHide={false}>\r\n\t\t\t\t\t\t\t{mobx.toJS(maintableData).length > 0 ?\r\n\t\t\t\t\t\t\t\t<InfiniteScroll\r\n\t\t\t\t\t\t\t\t\tinitialLoad={false}\r\n\t\t\t\t\t\t\t\t\tpageStart={0}\r\n\t\t\t\t\t\t\t\t\tloadMore={this.handleInfiniteOnLoad.bind(this)}\r\n\t\t\t\t\t\t\t\t\thasMore={!loading && hasMore}\r\n\t\t\t\t\t\t\t\t\tuseWindow={false}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{mobx.toJS(maintableData).length > 0 && mobx.toJS(maintableData).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={item.selested == true ? \"require-tr require-tr-active\" : \"require-tr\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleEdit.bind(this, item)}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={'tab-' + index}>\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={item.isRead == true ? \"require-td\" : \"require-td active\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={item.title}>{item.title}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"require-title\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"mr5\">{item.userName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.tags == null ? null : item.tags.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn <Tag\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={index >= 2 ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"gold\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"require-lavel\">{moment(item.actualTime).format(\"YYYY-MM-DD\")}</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t{loading && hasMore && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"demo-loading-container\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Spin/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</InfiniteScroll> : <Empty imageStyle={{marginTop: \"50px\"}}/>}\r\n\t\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\tcolor: 'rgb(153, 153, 153)'\r\n\t\t\t\t\t}}>{`共 ${maintotalCount} 条 `}</div>\r\n\t\t\t\t\t{/*</Affix>*/}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"fl\" style={{width: 'calc(100% - 350px)', borderLeft: '1px solid #EBEBEB', minHeight: '350px', paddingLeft: '15px',\r\n\t\t\t\t\toverflowY: 'scroll', height: \"calc(100vh - 180px)\"\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{temType===\"meeting\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailForm\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{temType===\"visit\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormVisit\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{temType===\"monthlySharing\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormMonthlySharing\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{temType===\"summary\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormSummary\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{temType===\"replay\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormReplay\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{temType===\"news\"?mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/> :\r\n\t\t\t\t\t\t<DetailFormNews\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdetailData={mobx.toJS(deData)}\r\n\t\t\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\tpathname={this.props.location.pathname}\r\n\t\t\t\t\t\t\thandleRoute={this.handleRoute}\r\n\t\t\t\t\t\t\thandleDraftRoute={this.handleDraftRoute}\r\n\t\t\t\t\t\t\tgetTable={this.getTable}\r\n\t\t\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t{/*评论、点赞*/}\r\n\t\t\t\t\t{mobx.toJS(maintableData).length == 0 ? <Empty imageStyle={{marginTop: \"50px\"}}/>:!isEdit?<DigitalComment\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t/>:null}\r\n\t\t\t\t</div>\r\n\t\t\t</Row>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/digitalOrg/SmartOrg.js","/*\r\n* 大文件上传组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message, Modal} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\nimport Viewer from 'react-viewer';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\nimport {downloadFile, download} from \"@/utils/download\";\r\nimport bpmSchemas from \"@/utils/Schemas/bpm\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n@inject('appStore')\r\n@observer\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.appStore;\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '', // oss的key_id\r\n\t\t\t\taccess_key_secret: '', // oss的secret\r\n\t\t\t\tstsToken: '',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tfilePath: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t\tactiveIndex: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.journalType) {\r\n\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t}\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 阿里云上传参数\r\n\t\trequestPost('getSts', Config.bpm.getSts, bpmSchemas.bpm.getSts, {})\r\n\t\t.then((res)=>{\r\n\t\t\tlet str = typeof res ==\"string\"?JSON.parse(res):res;\r\n\t\t\tif (str) {\r\n\t\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\t\taccess_key_id: str.accessKeyId,\r\n\t\t\t\t\t\taccess_key_secret: str.accessKeySecret,\r\n\t\t\t\t\t\tstsToken: str.securityToken\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDocumentUrl = (url) => {\r\n\t\treturn requestPost('getDocumentUrl', Config.journal.getDocumentUrl, journalSchemas.journal.getDocumentUrl, {url: url})\r\n\t}\r\n\r\n\t// 只用做删除操作\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\t/*let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet _this = this;\r\n\t\t\t_this.setState({\r\n\t\t\t\tloading: true\r\n\t\t\t});\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t_this.props.saveAttachment(array);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t});\r\n\t\t\t}, 3000);*/\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\t/*let id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\t// this.props.delNode(id);\r\n\t\t\t}*/\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tthis.props.saveAttachment(array);\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新url\r\n\tchangeSrc = (res, file) => {\r\n\t\tconst {fileList, host} = this.state;\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList));\r\n\r\n\t\tconst url = host + uploadPath('path', file);\r\n\t\tlet obj = Object.assign({}, {\r\n\t\t\tuid: file.uid,\r\n\t\t\tname: file.name,\r\n\t\t\tstatus: \"done\",\r\n\t\t\turl: url,\r\n\t\t\tfileId: null,\r\n\t\t\tfileName: file.name,\r\n\t\t\tfilePath: url,\r\n\t\t\tid: \"\",\r\n\t\t});\r\n\t\tlet newFileList = [obj];\r\n\r\n\t\t// 处理附件\r\n\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\tthis.props.saveAttachment(array);\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst {accept} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tif (accept==undefined) {  // 没有传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\t//console.log(accept, file.type, type, 'accept')\r\n\t\t\tif (!acceptDefault.includes(type)) {\r\n                //message.warn(\"格式不对\");\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t} else {   // 外部传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\tif (!accept.includes(type)) {\r\n\t\t\t\tmessage.warn(\"格式不对, 只允许上传图片\");\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = true; // 记录一次\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\t// 处理地址\r\n\t\t\t\tconst {res} = data;\r\n\t\t\t\tif (res.status&&res.status==200) {  // 单个文件上传成功\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.changeSrc(res, file);\r\n\t\t\t\t}\r\n\t\t\t}).catch((error)=>{\r\n\t\t\t\t\tmessage.error(\"文件上传失败\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\thandlePreview = async file => {\r\n\t\t// 文档\r\n\t\tif (/\\.(doc|docx)$/.test(file.name)||/\\.(xls|xlsx)$/.test(file.name)||/\\.(pdf)$/.test(file.name)||/\\.(zip|rar)$/.test(file.name)||/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\tthis.getDocumentUrl(file.filePath).then((res)=>{\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: res,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}  else {  // 图片、音频\r\n\t\t\t// 文件类型判断\r\n\t\t\tfunction isAssetTypeAnImage(ext) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].\r\n\t\t\t\tindexOf(ext.toLowerCase()) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\t//获取后缀\r\n\t\t\tfunction getExt(filePath) {\r\n\t\t\t\t// 去掉url的问号\r\n\t\t\t\tif (filePath.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\tfilePath = filePath.split(\"?\")[0];\r\n\t\t\t\t}\r\n\t\t\t\t//获取最后一个.的位置\r\n\t\t\t\tlet index= filePath.lastIndexOf(\".\");\r\n\t\t\t\t//获取后缀\r\n\t\t\t\tlet ext = filePath.substr(index+1);\r\n\t\t\t\treturn ext;\r\n\t\t\t}\r\n\r\n\t\t\tif (isAssetTypeAnImage(getExt(file.filePath))) {  // 判断是图片\r\n\t\t\t\tconst fileList = JSON.parse(JSON.stringify(this.state.fileList));\r\n\t\t\t\tlet imageArray;\r\n\t\t\t\timageArray = fileList.filter((item)=>isAssetTypeAnImage(getExt(item.filePath))).map((item)=>{\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tsrc: item.filePath,\r\n\t\t\t\t\t\talt: item.name,\r\n\t\t\t\t\t\tdownloadUrl: item.filePath\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\timageArray: Object.assign([], imageArray),\r\n\t\t\t\t\tactiveIndex: imageArray.findIndex((item)=>item.src==file.filePath)\r\n\t\t\t\t});\r\n\t\t\t} else {   // 音频\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (type) => this.setState({[type]: false});\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = () => {\r\n\t\tconst {filePath, name} = this.state;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览下载\r\n\tonDownload = (file) => {\r\n\t\tconst {filePath, name} = file;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n        //获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\t// 取消上传\r\n\tcancel =  () =>{\r\n\t\tthis.setState({\r\n\t\t\tloading: false,\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = false; // 清楚记录\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {previewVisible, previewImage, fileList , name, loading, visible, imageArray, activeIndex} = this.state;\r\n\t\tconst {multiple, disabled,accept, length} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tconst props = {\r\n\t\t\taccept: accept==undefined?acceptDefault:accept,\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tdisabled: disabled,\r\n\t\t\tlistType: \"picture-card\",\r\n\t\t\tonPreview: this.handlePreview,\r\n\t\t\tonDownload: this.onDownload,\r\n\t\t\tshowUploadList: {\r\n\t\t\t\tshowDownloadIcon: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst uploadButton = (\r\n\t\t\t<div className=\"pr\">\r\n\t\t\t\t<Icon type={loading?\"loading\":\"plus\"} />\r\n\t\t\t\t{loading?<div className=\"ant-upload-text\">上传中</div>:null}\r\n\t\t\t\t{loading?<Icon type=\"stop\"\r\n\t\t\t\t               title=\"取消上传\"\r\n\t\t\t\t               style={{\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '-39px',\r\n\t\t\t\t\tright: '-22px',\r\n\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\tcolor: '#1890ff'\r\n\t\t\t\t}} onClick={this.cancel}/>:null}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\r\n\t    return (\r\n\t\t\t<div className=\"affairs_upload\">\r\n\t\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t\t{disabled||length>=\"1\"?null:uploadButton}\r\n\t\t\t\t</Upload>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={<div>{name}\r\n\t\t\t\t\t\t<a href=\"javascript:;\" onClick={this.downloadUrl}>下载</a>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\tvisible={previewVisible}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tonCancel={this.handleCancel.bind(this, 'previewVisible')}>\r\n\t\t\t\t\t{isImage?<iframe\r\n\t\t\t\t\t\tsrc={previewImage}\r\n\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\t\tframeBorder='1'>\r\n\t\t\t\t\t</iframe>:<img style={{ backgroundSize: 'conver',width: '100%', maxHeight: '400px' }} src={previewImage} alt=\"\" />}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Viewer\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.handleCancel.bind(this, 'visible')}\r\n\t\t\t\t\timages={imageArray}\r\n\t\t\t\t\tactiveIndex={activeIndex}\r\n\t\t\t\t\tdownloadable={true}\r\n\t\t\t\t\tcustomToolbar={(toolbars) => {\r\n\t\t\t\t\t\treturn toolbars.filter(item=>item.key!==\"download\").concat([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tkey: \"download\",\r\n\t\t\t\t\t\t\t\trender: (<div><i className=\"react-viewer-icon react-viewer-icon-download\"></i></div>),\r\n\t\t\t\t\t\t\t\tonClick: (activeImage) => {\r\n\t\t\t\t\t\t\t\t\tconst {src, alt} = activeImage;\r\n\t\t\t\t\t\t\t\t\tthis.downloadImage(src, alt);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/MyUpload.js","/*\r\n* 编辑表单\r\n* 2020-07-21\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Popconfirm} from 'antd';\r\nimport * as  mobx from 'mobx';\r\nimport EditeFormVisit from './EditeFormVisit';\r\nimport EditeFormMonthlySharing from './EditeFormMonthlySharing';\r\nimport EditeFormSummary from './EditeFormSummary';\r\nimport EditeFormReplay from './EditeFormReplay';\r\nimport EditeFormNews from './EditeFormNews';\r\nimport EditeFormWeekreport from './EditeFormWeekreport';\r\nimport EditeFormFactoryreport from './EditeFormFactoryreport';\r\n\r\n@inject('appStore')\r\n@observer\r\nclass EditeVisit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\tlet {pathname} = _this.props;\r\n\t\tif (pathname&&pathname.includes(\"/digital/draft\")&&_this.store.draftId!=\"\") {\r\n\t\t\t// 定时器\r\n\t\t\t_this.timer = setInterval(() => {\r\n\t\t\t\t// 心跳接口 30s跳动一个\r\n\t\t\t\t_this.child.saveAuto(0);\r\n\t\t\t}, 30000);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount () {\r\n\t\t// 页面离开时清楚定时器\r\n\t\tthis.timer&&clearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t}\r\n\r\n\tsaveDraft = () => {\r\n\t\tthis.child.saveDraft();\r\n\t}\r\n\r\n\thandleSubmit = ()=> {\r\n\t\tthis.child.handleSubmit();\r\n\t}\r\n\r\n\tonClose = () => {\r\n\t\tthis.child.onClose();\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: data\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tlet {detailData, temType} = this.props;\r\n\t\tconst {loading} = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t{temType==\"visit\"? <EditeFormVisit\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"monthlySharing\"? <EditeFormMonthlySharing\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"summary\"? <EditeFormSummary\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"replay\"? <EditeFormReplay\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"news\"? <EditeFormNews\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"weekreport\"? <EditeFormWeekreport\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"factoryreport\"? <EditeFormFactoryreport\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\tsm: {span: 24}\r\n\t\t\t\t\t}}\r\n                    className=\"clearfix tr mt20 pl20 pr20 fixed_bottom\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: this.props.appStore.collapsed?\"calc(100% - 470px)\":\" calc(100% - 590px)\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.isWeekShow!=undefined&&this.props.isWeekShow==false?null:<Button className=\"fl\"\r\n\t\t\t\t\t\t                                                                            shape=\"round\"\r\n\t\t\t\t\t\t                                                                            style={{\r\n\t\t\t\t\t\t\t                                                                            position: 'relative',\r\n\t\t\t\t\t\t\t                                                                            top: '4px'\r\n\t\t\t\t\t\t                                                                            }}\r\n\t\t\t\t\t\t                                                                            type=\"primary\"\r\n\t\t\t\t\t\t                                                                            onClick={this.saveDraft}>\r\n\t\t\t\t\t\t\t保存草稿\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消本次编辑吗?\" onConfirm={() => this.onClose()}>\r\n\t\t\t\t\t\t<Button shape=\"round\" style={{marginRight: 8}}>\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<Button shape=\"round\"\r\n\t\t\t\t\t        loading={loading}\r\n\t\t\t\t\t        onClick={this.handleSubmit}\r\n\t\t\t\t\t        type=\"primary\">\r\n\t\t\t\t\t\t提交发布\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\nexport default EditeVisit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/EditeVisit.js","/*\r\n* 评论、点赞、浏览量\r\n* dangwei@bocspace.com\r\n* */\r\nimport React, {Component} from \"react\";\r\nimport { Icon, Tooltip, message, Button, Popover, Spin } from 'antd';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport CommonEmail2 from \"@/components/digitalOrg/CommonEmail2\";\r\nimport PersonEdit from \"@/components/digitalOrg/PersonEdit\";\r\n\r\n@observer\r\nexport default class CommentList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tvisible: false,\r\n\t\t\ttitle: \"添加共享人\",\r\n\t\t\teditvisible: false,\r\n\t\t\tdata: [],\r\n\t\t\tloading: false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\t// 点赞\r\n\thandleZan = () =>{\r\n\t\tthis.store.addOrDelLike()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 收藏\r\n\thandCollection = () =>{\r\n\t\tthis.store.addOrDelCollection()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getJournalIndicators();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleVisibleChange = visible => {\r\n\t\tthis.setState({ visible });\r\n\t};\r\n\r\n\t// 定位\r\n\tscrollToAnchor(key) {\r\n\t\tconst {scrollToAnchor} = this.props;\r\n\t\tscrollToAnchor(key);\r\n\t}\r\n\r\n\t// 共享编辑\r\n\thandleEdit = () => {\r\n\t\tthis.store.getSharedEditingList().then((res)=>{\r\n\t\t\tif (res==null||(Array.isArray(res)&&res.length==0)) {\r\n\t\t\t\tthis.setState({\r\n                   title: \"添加共享人\",\r\n\t\t\t\t   editvisible: true,\r\n\t\t\t\t   data: res==null?[]: res\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttitle: \"编辑共享人\",\r\n\t\t\t\t\teditvisible: true,\r\n\t\t\t\t\tdata: res==null?[]: res\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClose = (type, param) =>{\r\n\t\tthis.setState({\r\n\t\t\t[type]: param\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, param) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: param\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {getLikeUsers, getComments, journalIndicators, } = this.store;\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst isLike = mobx.toJS(getLikeUsers).filter(item=>item.userName==username).length>0?true:false;\r\n\t\tconst {haveCollection} = mobx.toJS(journalIndicators);\r\n\t\tconst {pathname, detailData, isWeekShow, userId} = this.props;\r\n\t\tconst isShow = pathname!==undefined&&pathname==\"/digital/office\"?true:false;\r\n\t\tconst {editvisible, title, data, loading} = this.state;\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isWeek = isWeekShow==undefined?false:isWeekShow!=undefined&&(isWeekShow);\r\n\r\n\t\treturn (<span>\r\n\t\t\t   <Tooltip title=\"评论\">\r\n                  <Icon type=\"message\" className=\"commentlist_icon\" onClick={this.scrollToAnchor.bind(this, \"commentlist\")}/>\r\n                </Tooltip> <span className=\"commentlist_title\">{mobx.toJS(getComments).length}</span>\r\n\t\t\t\t<Tooltip title=\"点赞\">\r\n\t\t\t\t\t{isLike?<Icon type=\"like\" theme=\"filled\" className=\"commentlist_icon pointer\" onClick={this.handleZan}/>: <Icon type=\"like\" className=\"commentlist_icon pointer\" onClick={this.handleZan}/>}\r\n\t                </Tooltip><span className=\"commentlist_title\">{mobx.toJS(getLikeUsers).length}</span>\r\n\t\t\t\t<Tooltip title=\"已读\">\r\n\t                 <Icon type=\"eye\" className=\"commentlist_icon\"/>\r\n\t            </Tooltip><span className=\"commentlist_title\">{mobx.toJS(journalIndicators).viewCount||0}</span>\r\n\t\t\t\t{!isShow?<Tooltip title={\"收藏\"}>\r\n\t\t\t\t\t<Icon theme={haveCollection==1?\"filled\":\"\"} type=\"star\" className=\"commentlist_icon pointer\" onClick={this.handCollection}/>\r\n\t\t\t\t</Tooltip>:null}\r\n\t\t\t\t<Popover\r\n\t\t\t\t\toverlayClassName=\"digital_popver\"\r\n\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\tcontent={<CommonEmail2\r\n\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tstore={this.store} />}\r\n\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\tvisible={this.state.visible}\r\n\t\t\t\t\tonVisibleChange={this.handleVisibleChange}\r\n\t\t\t\t>\r\n\t               <Button className=\"ml10\" type=\"link\">分享</Button>\r\n\t            </Popover>\r\n\t\t\t   {isWeek?<Button type=\"link\" onClick={this.handleEdit}>共享编辑</Button>:null}\r\n\t\t\t     <PersonEdit\r\n\t\t\t       title={title}\r\n\t\t\t       visible={editvisible}\r\n\t\t\t       onClose={this.onClose.bind(this, \"editvisible\", false)}\r\n\t\t\t       data={data}\r\n\t\t\t       store={this.store}\r\n\t\t\t     />\r\n              <Spin wrapperClassName=\"dib\" tip=\"正在生成,请稍等...\" spinning={loading} />\r\n\t\t\t</span>);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/CommentList.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InfiniteScroll = function (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  function InfiniteScroll(props) {\n    _classCallCheck(this, InfiniteScroll);\n\n    var _this = _possibleConstructorReturn(this, (InfiniteScroll.__proto__ || Object.getPrototypeOf(InfiniteScroll)).call(this, props));\n\n    _this.scrollListener = _this.scrollListener.bind(_this);\n    _this.eventListenerOptions = _this.eventListenerOptions.bind(_this);\n    _this.mousewheelListener = _this.mousewheelListener.bind(_this);\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.pageLoaded = this.props.pageStart;\n      this.options = this.eventListenerOptions();\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.isReverse && this.loadMore) {\n        var parentElement = this.getParentElement(this.scrollComponent);\n        parentElement.scrollTop = parentElement.scrollHeight - this.beforeScrollHeight + this.beforeScrollTop;\n        this.loadMore = false;\n      }\n      this.attachScrollListener();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.detachScrollListener();\n      this.detachMousewheelListener();\n    }\n  }, {\n    key: 'isPassiveSupported',\n    value: function isPassiveSupported() {\n      var passive = false;\n\n      var testOptions = {\n        get passive() {\n          passive = true;\n        }\n      };\n\n      try {\n        document.addEventListener('test', null, testOptions);\n        document.removeEventListener('test', null, testOptions);\n      } catch (e) {\n        // ignore\n      }\n      return passive;\n    }\n  }, {\n    key: 'eventListenerOptions',\n    value: function eventListenerOptions() {\n      var options = this.props.useCapture;\n\n      if (this.isPassiveSupported()) {\n        options = {\n          useCapture: this.props.useCapture,\n          passive: true\n        };\n      }\n      return options;\n    }\n\n    // Set a defaut loader for all your `InfiniteScroll` components\n\n  }, {\n    key: 'setDefaultLoader',\n    value: function setDefaultLoader(loader) {\n      this.defaultLoader = loader;\n    }\n  }, {\n    key: 'detachMousewheelListener',\n    value: function detachMousewheelListener() {\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = this.scrollComponent.parentNode;\n      }\n\n      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'detachScrollListener',\n    value: function detachScrollListener() {\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.removeEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.removeEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n    }\n  }, {\n    key: 'getParentElement',\n    value: function getParentElement(el) {\n      var scrollParent = this.props.getScrollParent && this.props.getScrollParent();\n      if (scrollParent != null) {\n        return scrollParent;\n      }\n      return el && el.parentNode;\n    }\n  }, {\n    key: 'filterProps',\n    value: function filterProps(props) {\n      return props;\n    }\n  }, {\n    key: 'attachScrollListener',\n    value: function attachScrollListener() {\n      var parentElement = this.getParentElement(this.scrollComponent);\n\n      if (!this.props.hasMore || !parentElement) {\n        return;\n      }\n\n      var scrollEl = window;\n      if (this.props.useWindow === false) {\n        scrollEl = parentElement;\n      }\n\n      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('scroll', this.scrollListener, this.options ? this.options : this.props.useCapture);\n      scrollEl.addEventListener('resize', this.scrollListener, this.options ? this.options : this.props.useCapture);\n\n      if (this.props.initialLoad) {\n        this.scrollListener();\n      }\n    }\n  }, {\n    key: 'mousewheelListener',\n    value: function mousewheelListener(e) {\n      // Prevents Chrome hangups\n      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n      if (e.deltaY === 1 && !this.isPassiveSupported()) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: 'scrollListener',\n    value: function scrollListener() {\n      var el = this.scrollComponent;\n      var scrollEl = window;\n      var parentNode = this.getParentElement(el);\n\n      var offset = void 0;\n      if (this.props.useWindow) {\n        var doc = document.documentElement || document.body.parentNode || document.body;\n        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n        if (this.props.isReverse) {\n          offset = scrollTop;\n        } else {\n          offset = this.calculateOffset(el, scrollTop);\n        }\n      } else if (this.props.isReverse) {\n        offset = parentNode.scrollTop;\n      } else {\n        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n      }\n\n      // Here we make sure the element is visible as well as checking the offset\n      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n        this.detachScrollListener();\n        this.beforeScrollHeight = parentNode.scrollHeight;\n        this.beforeScrollTop = parentNode.scrollTop;\n        // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n        if (typeof this.props.loadMore === 'function') {\n          this.props.loadMore(this.pageLoaded += 1);\n          this.loadMore = true;\n        }\n      }\n    }\n  }, {\n    key: 'calculateOffset',\n    value: function calculateOffset(el, scrollTop) {\n      if (!el) {\n        return 0;\n      }\n\n      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n    }\n  }, {\n    key: 'calculateTopPosition',\n    value: function calculateTopPosition(el) {\n      if (!el) {\n        return 0;\n      }\n      return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var renderProps = this.filterProps(this.props);\n\n      var children = renderProps.children,\n          element = renderProps.element,\n          hasMore = renderProps.hasMore,\n          initialLoad = renderProps.initialLoad,\n          isReverse = renderProps.isReverse,\n          loader = renderProps.loader,\n          loadMore = renderProps.loadMore,\n          pageStart = renderProps.pageStart,\n          ref = renderProps.ref,\n          threshold = renderProps.threshold,\n          useCapture = renderProps.useCapture,\n          useWindow = renderProps.useWindow,\n          getScrollParent = renderProps.getScrollParent,\n          props = _objectWithoutProperties(renderProps, ['children', 'element', 'hasMore', 'initialLoad', 'isReverse', 'loader', 'loadMore', 'pageStart', 'ref', 'threshold', 'useCapture', 'useWindow', 'getScrollParent']);\n\n      props.ref = function (node) {\n        _this2.scrollComponent = node;\n        if (ref) {\n          ref(node);\n        }\n      };\n\n      var childrenArray = [children];\n      if (hasMore) {\n        if (loader) {\n          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n        } else if (this.defaultLoader) {\n          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n        }\n      }\n      return _react2.default.createElement(element, props, childrenArray);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(_react.Component);\n\nInfiniteScroll.propTypes = {\n  children: _propTypes2.default.node.isRequired,\n  element: _propTypes2.default.node,\n  hasMore: _propTypes2.default.bool,\n  initialLoad: _propTypes2.default.bool,\n  isReverse: _propTypes2.default.bool,\n  loader: _propTypes2.default.node,\n  loadMore: _propTypes2.default.func.isRequired,\n  pageStart: _propTypes2.default.number,\n  ref: _propTypes2.default.func,\n  getScrollParent: _propTypes2.default.func,\n  threshold: _propTypes2.default.number,\n  useCapture: _propTypes2.default.bool,\n  useWindow: _propTypes2.default.bool\n};\nInfiniteScroll.defaultProps = {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null,\n  getScrollParent: null\n};\nexports.default = InfiniteScroll;\nmodule.exports = exports['default'];\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-infinite-scroller/dist/InfiniteScroll.js\n// module id = 1528\n// module chunks = 2 5 8 11 22 27 31 36","module.exports = require('./dist/InfiniteScroll')\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-infinite-scroller/index.js\n// module id = 1529\n// module chunks = 2 5 8 11 22 27 31 36","/*\r\n* 评论组件\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport { Comment, Avatar, Form, Button, Input,Icon, Tooltip, message } from 'antd';\r\nimport moment from 'moment';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from \"@/utils/utils\";\r\n\r\nconst { TextArea } = Input;\r\nconst Editor = ({handleClick, onChange, onSubmit, submitting, value }) => (\r\n\t<div>\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"\"/>\r\n\t\t</Form.Item>\r\n\t\t<div  style={{\r\n\t\t\twidth: '100%',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tjustifyContent: 'space-between'\r\n\t\t}}>\r\n\t\t\t<Button type=\"link\" onClick={handleClick} style={{fontSize: '12px'}}>\r\n\t\t\t\t取消回复\r\n\t\t\t</Button>\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={value==null||value==\"\"?null:onSubmit} type=\"primary\">\r\n\t\t\t\t发布\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t</div>\r\n);\r\nconst Editor2 = ({ onChange, onSubmit, submitting, value }) => (\r\n\t<div className=\"mt20\">\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"\"/>\r\n\t\t</Form.Item>\r\n\t\t<Form.Item className=\"tr\">\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={value==null||value==\"\"?null:onSubmit} type=\"primary\">\r\n\t\t\t\t发布\r\n\t\t\t</Button>\r\n\t\t</Form.Item>\r\n\t</div>\r\n);\r\n\r\n// 封装组件\r\nclass ExampleComment extends React.Component {\r\n\tstate = {\r\n\t\tsubmitting: false,\r\n\t\tvalue: '',\r\n\t\tvisible: false,\r\n\t};\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst { addComment, selestedId, id, userId, pid} = this.props;\r\n\t\t\tconst params = {\r\n\t\t\t\ttext: this.state.value,\r\n\t\t\t\tmainId: selestedId,\r\n\t\t\t\tpid: pid==null?id:pid,\r\n\t\t\t\tpUserId: userId\r\n\t\t\t}\r\n\t\t\taddComment(params, ()=>{\r\n               this.reset();\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t};\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\thandleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: !this.state.visible\r\n\t\t});\r\n\t}\r\n\treset = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: '',\r\n\t\t\tvisible: false,\r\n\t\t});\r\n\t}\r\n\t// 删除\r\n\tonDel = () => {\r\n\t\tconst {delComment, id} = this.props;\r\n\t\tconst params = {\r\n\t\t\tid: id\r\n\t\t}\r\n\t\tdelComment(params, ()=>{\r\n\t\t\tthis.reset();\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tvalue,\r\n\t\t\tsubmitting,\r\n\t\t\tvisible\r\n\t\t} = this.state;\r\n\t\tconst {text, userName, createTime, children,pid, parentUserName} = this.props;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = userName==username;\r\n\t\treturn (<Comment\r\n\t\t\t\tclassName={pid==null?\"comment_normal\":\"comment_normal comment_active\"}\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t<span key=\"comment-nested-delete\" className=\"comment-nested\">\r\n\t\t\t\t\t\t{createTime==null?\"2020-08-04\":moment(createTime).format(\"YYYY-MM-DD HH:mm:ss\")}\r\n\t\t\t\t\t    <span className={isShow?\"comment-nested-delete\":\"hidden\"} onClick={this.onDel}>&nbsp;·&nbsp;删除</span>\r\n\t\t\t\t\t</span>,\r\n\t\t\t\t\t<span key=\"comment-nested-reply-to\" style={{color: \"#1890ff\"}} onClick={this.handleClick}>回复</span>]}\r\n\t\t\t\tauthor={<a>{userName}</a>}\r\n\t\t\t\tavatar={\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tsrc=\"./images/logo_new.png\"\r\n\t\t\t\t\t\talt=\"Han Solo\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tcontent={\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{parentUserName==null||parentUserName==\"\"?null:`回复${parentUserName}:`} {text}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{visible?<Editor\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\thandleClick={this.handleClick}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{children}\r\n\t\t\t</Comment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n@observer\r\nclass DigitalComment extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tcomments: [],\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: '',\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst params = {\r\n\t\t\t\ttext: this.state.value,\r\n\t\t\t\tmainId: this.store.selestedId,\r\n\t\t\t\tpid: null\r\n\t\t\t}\r\n\t\t\tthis.store.addComment(params).then((res)=>{\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"评论成功\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tsubmitting: false,\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新评论\r\n\t\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: ''\r\n\t\t});\r\n\t}\r\n\r\n\t// 添加评论\r\n\taddComment = (params, callback) => {\r\n\t\t this.store.addComment(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"评论成功\");\r\n\t\t\t\t// 更新评论\r\n\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\tif(callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除评论\r\n\tdelComment = (params, callback) => {\r\n\t\tthis.store.delComment(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t// 更新评论\r\n\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\tif(callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trenderTreeNodes = data =>\r\n\t\tdata.map(item => {\r\n\t\t\tif (item.children) {\r\n\t\t\t\treturn (<ExampleComment key={item.id} {...item} addComment={this.addComment} delComment={this.delComment} selestedId={this.store.selestedId}>\r\n\t\t\t\t\t\t{this.renderTreeNodes(item.children)}\r\n\t\t\t\t\t</ExampleComment>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn <ExampleComment key={item.id} {...item} addComment={this.addComment} delComment={this.delComment} selestedId={this.store.selestedId}/>;\r\n\t\t});\r\n\r\n\t// 点赞\r\n\thandleZan = () =>{\r\n\t\tthis.store.addOrDelLike()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { submitting, value } = this.state;\r\n\t\tconst {getLikeUsers, getComments, readUsers} = this.store;\r\n\t\tconst treeData = utils.formatList(mobx.toJS(getComments));\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst isLike = mobx.toJS(getLikeUsers).filter(item=>item.userName==username).length>0?true:false;\r\n\t\treturn (\r\n\t\t\t<div className=\"detail_form_bold\" style={{paddingLeft: '14px'}}>\r\n\t\t\t\t<div className=\"commentlist_title\" style={{textAlign: 'left'}}>\r\n\t\t\t\t\t<Tooltip title=\"点赞\">\r\n\t\t\t\t\t\t{isLike?<Icon theme=\"filled\" type=\"like\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" onClick={this.handleZan}/>:<Icon type=\"like\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" onClick={this.handleZan}/>}\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{mobx.toJS(getLikeUsers).length>0?mobx.toJS(getLikeUsers).map((item)=>item.userName).join(\"、\"):null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"commentlist_title\" style={{textAlign: 'left'}}>\r\n\t\t\t\t\t<Tooltip title=\"已读\">\r\n\t\t\t\t\t\t<Icon theme=\"filled\" type=\"eye\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" />\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{mobx.toJS(readUsers).length>0?mobx.toJS(readUsers).map((item)=>item.userName).join(\"、\"):null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"commentlist\" className=\"detail_form_bold_title\" style={{textAlign: 'left'}}>评论</div>\r\n\t\t\t\t<Editor2\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t/>\r\n\t\t\t\t{this.renderTreeNodes(treeData)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DigitalComment;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DigitalComment.js","/*\r\n* 内容生成、邮件发送\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {message, Spin, Button,Modal, Checkbox, Row, Col} from 'antd';\r\nimport {inject, observer} from 'mobx-react'\r\nimport * as mobx from 'mobx';\r\nimport EditableTagEmail2 from \"@/components/digitalOrg/EditableTagEmail2\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport {downloadFile} from \"@/utils/download\";\r\n\r\n@inject('appStore')\r\n@observer\r\nclass CommonEmail2 extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\ttip: \"正在生成，请稍等...\",\r\n\t\t\tisLoading: false,\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户,\r\n\t\t\tvisible: false,\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [], // 抄送邮件\r\n\t\t\tccUserIds: [], // 抄送用户\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t}\r\n\r\n\t// 间隔3秒获取pdf地址\r\n\tgetReportUrl = (id) => {\r\n\t\tlet _this = this;\r\n\t\t_this.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\t\t_this.props.updateState(\"loading\", true);\r\n\t\tconst detailData = mobx.toJS(_this.props.detailData);\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst pdfName = journalMain.title;\r\n\r\n\t\t_this.timer22 = setInterval(() => {\r\n\t\t\t_this.store.getDownloadUrl(id).then((res) => {\r\n\t\t\t\tconst {url} = res;\r\n\t\t\t\tif (url !== null && url !== \"\") {\r\n\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.props.updateState(\"loading\", false);\r\n\t\t\t\t\tdownloadFile(url, pdfName);  // 直接下载pdf\r\n\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (res.code == 2) {\r\n\t\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_this.props.updateState(\"loading\", false);\r\n\t\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t}\r\n\r\n\t// 生成word\r\n\tcreatWord = (type) =>{\r\n\t\tconst {detailData} = this.props;\r\n\t\tconst param = mobx.toJS(detailData);\r\n\t\tif (type==1) {\r\n\t\t\tthis.store.wordDownload(param)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.store.pdfDownload(param)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 发送邮件\r\n\tsendReport = () => {\r\n\t\tlet _this = this;\r\n\t\tconst {emails, userIds, checks, ccEmails, ccUserIds} = _this.state;\r\n\t\tconst isemailUserIds = userIds == null ? [] : userIds;\r\n\t\tconst isemails = emails == null ? [] : emails;\r\n\t\t// 选择收件人\r\n\t\tif (isemailUserIds.length == 0 && isemails.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择邮件收件人\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst {detailData} = this.props;\r\n\t\tconst params = {\r\n\t\t\tjournal: mobx.toJS(detailData),\r\n\t\t\temails: emails,\r\n\t\t\tuserIds: userIds == null ? [] : userIds.map(item => item.userId),\r\n\t\t\tattType: checks.map(item=>typeof item ==\"string\"?Number(item):item),\r\n\t\t\tccEmails,\r\n\t\t\tccUserIds: ccUserIds == null ? [] : ccUserIds.map(item => item.userId),\r\n\t\t}\r\n\t\tthis.store.sendEmail(params)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"邮件发送成功\");\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tthis.setState({\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\tisLoading: false,\r\n\t\t\tvisible: false,\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [], // 抄送邮件\r\n\t\t\tccUserIds: [], // 抄送用户\r\n\t\t});\r\n\t}\r\n\r\n\thandleOpen = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: true\r\n\t\t});\r\n\t}\r\n\r\n\thandleOk = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (checkedValues) =>{\r\n\t\tthis.setState({\r\n\t\t\tchecks: checkedValues\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {tip, isLoading, emails, userIds, checks, ccEmails, ccUserIds} = this.state;\r\n\t\tconst options = [\r\n\t\t\t{ label: '附件Word', value: '0' },\r\n\t\t\t{ label: '附件PDF', value: '1' }\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}><Button type=\"link\" onClick={isLoading?null:this.creatWord.bind(this, \"1\")}>点击生成并存储为Word文档</Button></li>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}><Button type=\"link\" onClick={isLoading?null:this.creatWord.bind(this, \"2\")}>点击生成并存储为PDF文档</Button></li>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Button type=\"link\" onClick={isLoading?null:this.handleOpen}>点击发送邮件</Button>\r\n\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\tvalue={checks}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t{/*发送邮件*/}\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tmaskClosable={false}\r\n\t\t\t\t\twidth=\"600px\"\r\n\t\t\t\t\tzIndex={\"1066\"}\r\n\t\t\t\t\tvisible={this.state.visible}\r\n\t\t\t\t\tonCancel={this.reset}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t<span style={{marginRight:'5px'}}>\r\n\t\t\t\t\t\t\t\t收件人：\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\t\tdata={emails}\r\n\t\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'emails')}\r\n\t\t\t\t\t\t\t\ttitle={\"添加收件人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\tdata={userIds}\r\n\t\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'userIds')}\r\n\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\ttitle={\"添加收件人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={24} className=\"mt15\">\r\n\t\t\t\t\t\t\t<span style={{marginRight:'5px'}}>\r\n\t\t\t\t\t\t\t\t抄送人：\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\t\tdata={ccEmails}\r\n\t\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'ccEmails')}\r\n\t\t\t\t\t\t\t\ttitle={\"添加抄送人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\tdata={ccUserIds}\r\n\t\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'ccUserIds')}\r\n\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\ttitle={\"添加抄送人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<div className=\"w tc mt15\">\r\n\t\t\t\t\t\t<Button type=\"primary\" onClick={this.sendReport}>点击发送邮件</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CommonEmail2;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/CommonEmail2.js","/*\r\n* 详情表单\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport EditeMeeting from \"@/components/digitalOrg/EditeMeeting\";\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.store = this.props.store;\r\n    this.state = {\r\n      addAssignments: [],\r\n      newAddignments: [],\r\n      audioSrc:  \"\",\r\n      fileName: \"\",\r\n      isEdit: false,  // 默认详情态\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n      this.setState({\r\n        newAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n        addAssignments: [],\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.onRef(this);\r\n  }\r\n\r\n  // 同步\r\n  onAsync = (type, id, index) => {\r\n    this.props.onAsync(type, id, index);\r\n  }\r\n\r\n  // 删除字段\r\n  remove = (index) => {\r\n    let customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    customList.splice(index, 1);\r\n    this.setState({\r\n      addAssignments: Object.assign([], customList)\r\n    });\r\n  };\r\n\r\n  handleAdd = () => {\r\n    let customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    if (customList.some((item) => {\r\n      return item.name == \"\" || item.name == null;\r\n    })) {\r\n      message.warn(\"任务名是必填项\");\r\n      return false;\r\n    }\r\n    if (customList.some((item) => {\r\n      return item.userInformations.length == 0\r\n    })) {\r\n      message.warn(\"负责人是必填项\");\r\n      return false;\r\n    }\r\n    this.setState({\r\n      addAssignments: [...customList, {\r\n        \"name\": \"\",\r\n        \"userInformations\": [],\r\n      }]\r\n    });\r\n  }\r\n\r\n  updateState = (type, data) => {\r\n    this.setState({\r\n      [type]: Object.assign([], data)\r\n    });\r\n  }\r\n\r\n  // 人员选择更新\r\n  updatePerson = (index, userIds) => {\r\n    let fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    fields[index].userInformations = Object.assign([], userIds)\r\n    this.setState({\r\n      addAssignments: fields\r\n    });\r\n  }\r\n\r\n  onChange = (index, e) => {\r\n    let fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    fields[index].name = e.target.value;\r\n    this.setState({\r\n      addAssignments: fields\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const {addAssignments} = this.state;\r\n    // 校验下一步\r\n    if (!addAssignments.some((item) => {\r\n      return (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n    })) {\r\n      if (addAssignments.some((item) => {\r\n        return item.name == \"\" || item.name == null;\r\n      })) {\r\n        message.warn(\"任务名是必填项\");\r\n        return false;\r\n      }\r\n      if (addAssignments.some((item) => {\r\n        return item.userInformations.length == 0\r\n      })) {\r\n        message.warn(\"负责人是必填项\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    const detail = addAssignments.filter((item)=>{\r\n      return !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n    }).map(item=>Object.assign(item, {type: 1}))\r\n\r\n    /*let {detailData} = this.props;\r\n\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t});\r\n*/\r\n    this.props.handleAddNew(detail);\r\n  }\r\n\r\n  // 取消\r\n  handleCalc = () => {\r\n    this.setState({\r\n      addAssignments: Object.assign([]),\r\n      audioSrc: \"\",\r\n      fileName: \"\"\r\n    });\r\n  }\r\n\r\n  clickChange = (e) => {\r\n    const {item} = e.item.props;\r\n    this.setState({\r\n      audioSrc: item.filePath,\r\n      fileName: item.fileName\r\n    });\r\n  }\r\n\r\n  // 切换编辑\r\n  hanndleChangeEdit = () => {\r\n    this.store.changeCanEdit()\r\n    .then((res)=>{\r\n      // 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n      if (res) {\r\n        const {userId, userName} = res;\r\n        const userid = localStorage.getItem(\"userid\");\r\n        if (userId==userid) {\r\n          this.setState({\r\n            isEdit: !this.state.isEdit\r\n          }, ()=>{\r\n            this.store.isEdit = this.state.isEdit;\r\n          });\r\n        } else {\r\n          Modal.warning({\r\n            title: userName+'正在编辑中'\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // 取消\r\n  handleCancle = () => {\r\n    this.setState({\r\n      isEdit: !this.state.isEdit\r\n    }, ()=>{\r\n      this.store.isEdit = this.state.isEdit;\r\n    });\r\n  }\r\n\r\n  onRef = (ref) => {\r\n    this.child = ref\r\n  }\r\n\r\n  appendAliyundata=(base64, audioKey) => {\r\n\t\tthis.store.appendToAliyunData({base64Data:base64, key:audioKey, position:this.store.aliyunAppendData.nextPosition})\r\n  }\r\n\r\n  reSetAliyundata = ()=>{\r\n\t\tthis.store.aliyunAppendData = {\r\n\t\t\tid:'',\r\n\t\t\tposition:0,\r\n\t\t\tnextPosition:0,\r\n\t\t\tkey:'',\r\n\t\t\tsuccess:0\r\n\t\t}\r\n\t}\r\n\r\n  render() {\r\n    const formItemLayoutWithOutLabel = {\r\n      wrapperCol: {\r\n        xs: {span: 24, offset: 0},\r\n        sm: {span: 20, offset: 0},\r\n      }\r\n    };\r\n    const formItemLayoutLabel = {\r\n      wrapperCol: {\r\n        xs: {span: 24, offset: 0},\r\n        sm: {span: 20, offset: 3},\r\n      }\r\n    };\r\n    let {detailData,visible} = this.props;\r\n    const journalMain = detailData.journalMain || {};\r\n    const journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n    const assignments = detailData.assignments || [];\r\n    const sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n    const atts = detailData.atts == null ? [] : detailData.atts;\r\n    const attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n      return Object.assign({}, {\r\n        uid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n        name: vitem.fileName,\r\n        status: 'done',\r\n        url: vitem.filePath,\r\n        fileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n        fileName:vitem.fileName,\r\n        filePath: vitem.filePath,\r\n        id: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n      })\r\n    })\r\n    const audio = detailData.audio==null?[]:detailData.audio;\r\n    const {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n    const {isEdit} = this.store;\r\n    const dropDown = (\r\n        <Dropdown\r\n            overlay={<Menu>\r\n              {audio.map((item,index)=>{\r\n                return <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n              })}\r\n            </Menu>}>\r\n          <a className=\"ant-dropdown-link\"\r\n             style={{position: \"absolute\", right: 0,top: 0 }}\r\n             onClick={e => e.preventDefault()}>\r\n            {audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n          </a>\r\n        </Dropdown>\r\n    );\r\n    const username = localStorage.getItem(\"username\");\r\n    // 当前行是否有修改权限\r\n    let isShow = journalMain.userName==username;\r\n\r\n    return (<div className=\"w pr\">\r\n          <div style={{\r\n            cursor: 'pointer',\r\n            position: 'absolute',\r\n            right: '0',\r\n            top: '0',\r\n            zIndex: '5'\r\n          }}>\r\n            {!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n          </div>\r\n          {/*详情态*/}\r\n          {!isEdit? <Form {...formItemLayoutWithOutLabel}>\r\n            <Form.Item colon={false} className=\"detail_form_bold\">\r\n              <div className=\"detail_form pr\">\r\n                <p className=\"form_title\">{journalMain.title}\r\n                  <span style={{\r\n                    display: 'inline-block',\r\n                    maxWidth: '500px',\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    paddingLeft: '10px'\r\n                  }}>\r\n                                {journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n                                  return <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n                                })}\r\n                            </span>\r\n                </p>\r\n                <p className=\"form_name\">\r\n                  {journalMain.userName}\r\n                  <span className=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n                  <CommentList\r\n                      store={this.store}\r\n                      detailData={detailData}\r\n                      scrollToAnchor={this.props.scrollToAnchor}\r\n                  />\r\n                </p>\r\n                {audio.length>0&&dropDown}\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  right: 0,\r\n                  top: '30px'\r\n                }}>\r\n                  {audioSrc?<div><ReactAudioPlayer\r\n                      src={audioSrc||\"\"}\r\n                      controls\r\n                  /></div>:null}\r\n                </div>\r\n              </div>\r\n            </Form.Item>\r\n            <Form.Item label=\"\"\r\n                       colon={false}\r\n                       className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议主题</span><span className=\"form_nextname\">{sub.title}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议日期</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议时长</span><span className=\"form_nextname\">{sub.hours}小时</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议地点</span><span className=\"form_nextname\">{sub.place}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\"\r\n                       colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">参会人员</span><span className=\"form_nextname\">{sub.people}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议目标</span>\r\n            </Form.Item>\r\n            <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.target}}></div>\r\n            <Form.Item label=\"\"\r\n                       colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议纪要</span>\r\n            </Form.Item>\r\n            <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议结论</span>\r\n            </Form.Item>\r\n            <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.conclusion}}></div>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">下一步行动</span>\r\n            </Form.Item>\r\n            <Form.Item className=\"detail_form_bold\">\r\n              {assignments.map((item, index) => {\r\n                return <div>\r\n                                <span\r\n                                    className=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n                                  return vitem.userName\r\n                                }).join('、')}\r\n                                  {item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n                                      <Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n                                              type=\"link\"\r\n                                              onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n                                </span>\r\n                </div>\r\n              })}\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n              <span className=\"detail_form_bold_title\">附件</span>\r\n            </Form.Item>\r\n            <div style={{paddingLeft:'14px'}}>\r\n              <MyUpload\r\n                  disabled={true}\r\n                  fileList={attachments == null ? [] : attachments}\r\n              />\r\n            </div>\r\n            {/*追加任务, 第一没有权限，第二有权限*/}\r\n            {!this.props.hasJournal?\r\n                <Form.Item label=\"\"\r\n                           colon={false}\r\n                           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n                  <span className=\"detail_form_bold_title\">追加任务</span>\r\n                  {newAddignments !== undefined && newAddignments.map((item, index) => {\r\n                    return <div>\r\n                                        <span\r\n                                            className=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n                                          return vitem.userName\r\n                                        }).join('、')}\r\n                                          {item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n                                              <Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n                                                      type=\"link\"\r\n                                                      onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n                                        </span>\r\n                    </div>\r\n                  })}\r\n                </Form.Item>:<Form.Item  label=\"\"\r\n                                         colon={false}\r\n                                         className=\"detail_form_bold\">\r\n                  <span className=\"detail_form_bold_title\">追加任务</span>\r\n                  {newAddignments !== undefined && newAddignments.map((item, index) => {\r\n                    return <div>\r\n                                        <span\r\n                                            className=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n                                          return vitem.userName\r\n                                        }).join('、')}\r\n                                          {item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n                                              <Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n                                                      type=\"link\"\r\n                                                      onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n                                        </span>\r\n                    </div>\r\n                  })}\r\n                </Form.Item>}\r\n            {!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n              <Col span={12} className=\"tc\">\r\n                <div>任务名</div>\r\n              </Col>\r\n              <Col span={12} className=\"tc\">\r\n                <div>负责人</div>\r\n              </Col>\r\n            </Row>}\r\n            {addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n              return <Row key={`subname+${vindex}`}\r\n                          style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n                <Col span={12} className=\"pr\">\r\n                  <Form.Item\r\n                      label={\" \"}\r\n                      colon={false}\r\n                      labelCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 6},\r\n                      }}\r\n                      wrapperCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 16}\r\n                      }}\r\n                  >\r\n                    <Input value={vitem.name == null ? \"\" : vitem.name}\r\n                           placeholder=\"请输入\"\r\n                           onChange={this.onChange.bind(this, vindex)}/>\r\n                    <Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n                      <Button\r\n                          shape=\"circle\"\r\n                          className=\"dynamic-delete-button\"\r\n                          size=\"small\"\r\n                          icon=\"minus\"\r\n                          type=\"default\"/>\r\n                    </Popconfirm>\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Form.Item\r\n                      label={\" \"}\r\n                      colon={false}\r\n                      labelCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 6}\r\n                      }}\r\n                      wrapperCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 16}\r\n                      }}\r\n                  >\r\n                    <PersonAddIcon\r\n                        data={vitem.userInformations == null ? [] : vitem.userInformations}\r\n                        updatePerson={this.updatePerson.bind(this, vindex)}\r\n                    />\r\n                  </Form.Item>\r\n                </Col>\r\n              </Row>\r\n            })}\r\n            {!this.props.hasJournal ? null :\r\n                <div>\r\n                  <Form.Item {...formItemLayoutLabel}>\r\n                    <Icon onClick={this.handleAdd}\r\n                          style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n                          type=\"plus-circle\"/>\r\n                  </Form.Item>\r\n                  <Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n                    <Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n                      保存\r\n                    </Button>\r\n                    <Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n                      <Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n                        取消\r\n                      </Button>\r\n                    </Popconfirm>\r\n                  </Form.Item>\r\n                </div>}\r\n          </Form>:<EditeMeeting\r\n              onRef={this.onRef}\r\n              store={this.store}\r\n              detailData={detailData}\r\n              onCancle={this.handleCancle}\r\n              pathname={this.props.pathname}\r\n              handleDraftRoute={this.props.handleDraftRoute}\r\n              handleRoute={this.props.handleRoute}\r\n              getTable={this.props.getTable}\r\n              appendAliyundata={this.appendAliyundata}\r\n              reSetAliyundata = {this.reSetAliyundata}\r\n          />}\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DetailForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailForm.js","/*\r\n* 详情表单 月思想\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormNew extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">反思主题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">反思时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">现象与案例</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.cases}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">反思与改进</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.introspection}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务, 第一没有权限，第二有权限*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"monthlySharing\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormNew;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormMonthlySharing.js","/*\r\n* 详情表单 月思想\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormNews extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">新闻标题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">发生时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">正文内容</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"news\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormNews;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormNews.js","/*\r\n* 详情表单\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormReplay extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData, visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">复盘主题</span>\t<span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">复盘时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">复盘参与人</span><span className=\"form_nextname\">{sub.people}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">回顾目标</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.target}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">评估结果</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.assessmentResult}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">分析原因</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.analyzeReason}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结规律</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.summarizeLaw}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"replay\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormReplay;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormReplay.js","/*\r\n* 详情表单 月思想\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormSummary extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结主题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结内容</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"summary\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormSummary;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormSummary.js","/*\r\n* 详情表单\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormVisit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData, visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">交流时长</span><span className=\"form_nextname\">{sub.hours}小时</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">企业名称</span>\t<span className=\"form_nextname\">{sub.company}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">项目名称</span><span className=\"form_nextname\">{sub.project}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">项目地址</span><span className=\"form_nextname\">{sub.address}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">我方人员</span><span className=\"form_nextname\">{sub.ourPeople}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">对方人员</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Row className=\"mb5\" style={{paddingLeft:'14px'}}>\r\n\t\t\t\t\t<div style={{width:'180px', fontWeight: '600'}} className=\"fl tc\">客户姓名</div>\r\n\t\t\t\t\t<div style={{width:'180px', fontWeight: '600'}} className=\"fl tc\">职务</div>\r\n\t\t\t\t\t<div style={{width:'180px', fontWeight: '600'}} className=\"fl tc\">联系方式</div>\r\n\t\t\t\t</Row>\r\n\t\t\t\t{sub.visitPeoples&&sub.visitPeoples.map((item, index) => {\r\n\t\t\t\t\treturn <Row key={index} style={{paddingLeft:'14px'}}>\r\n\t\t\t\t\t\t<div style={{width:'180px'}} className=\"fl tc\">{item.name}</div>\r\n\t\t\t\t\t\t<div style={{width:'180px'}} className=\"fl tc\">{item.position}</div>\r\n\t\t\t\t\t\t<div style={{width:'180px'}} className=\"fl tc\">{item.phone}</div>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访目的</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.purpose}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访流程</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.process}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访纪要</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">现场照片</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">对外承诺</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.promise}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold mt15\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"visit\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormVisit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormVisit.js","/*\r\n* 编辑表单\r\n* 2020-07-21\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Input, Icon, Row, Col, Button, DatePicker, message, Popconfirm, InputNumber, Spin, Checkbox} from 'antd';\r\nimport moment from 'moment';\r\nimport BraftEditor from 'braft-editor';\r\nimport 'braft-editor/dist/index.css';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport EditableTagGroup from \"@/components/digitalOrg/EditableTagGroup\";\r\nimport {showText} from \"@/utils/utils\";\r\nimport * as  mobx from 'mobx';\r\nimport {Base64} from 'js-base64';\r\nimport MyUpload from \"@/components/common/MyUploadNew\";\r\n//import EditableTagEmail from \"@/components/digitalOrg/EditableTagEmail\";\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {downloadFile} from 'utils/download';\r\n// import Audio from './Audio';\r\nimport AudioRecorder from './AudioRecorder';\r\nimport emitter from \"@/utils/events\";\r\nconst {TextArea} = Input;\r\nimport { ContentUtils } from 'braft-utils';\r\nimport MyUploadOne from \"@/components/common/MyUploadOne\";\r\nimport EditableTagEmail2 from \"@/components/digitalOrg/EditableTagEmail2\";\r\nimport ReactKindeditor from \"@/components/common/ReactKindeditor\";\r\n\r\n\r\n@inject('appStore')\r\n@observer\r\nclass EditeMeeting extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tassignments: [],\r\n\t\t\ttags: [],\r\n\t\t\ttitle: \"\",\r\n\t\t\ttime: moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tattachments: [],\r\n\t\t\tpeople: \"\",\r\n\t\t\ttarget: \"\",\r\n\t\t\tcontent: \"\",\r\n\t\t\tconclusion: \"\",\r\n\t\t\tplace: \"\",\r\n\t\t\thours: \"\",\r\n\t\t\tisLoading: false,\r\n\t\t\ttip: \"正在生成，请稍等...\",\r\n\t\t\tloading: false,\r\n\t\t\tdetailData: {},\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\taudio: [], // 录音\r\n\t\t\taudioStatus: \"\", // 录音状态\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [],\r\n\t\t\tccUserIds: [],\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {detailData} = nextProps;\r\n\t\tif (JSON.stringify(detailData) != JSON.stringify(this.props.detailData)) {\r\n\r\n\t\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\r\n\t\t\tconst assignments = detailData.assignments == null ? [] : detailData.assignments;\r\n\t\t\tconst journalMain = detailData.journalMain || {};\r\n\t\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\t\tconst audio = detailData.audio == null ? [] : detailData.audio;\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tdetailData: detailData,\r\n\t\t\t\ttitle: sub.title,\r\n\t\t\t\ttime: sub.time==null||sub.time==0?moment().format(\"YYYY-MM-DD\"):moment(sub.time).format(\"YYYY-MM-DD\"),\r\n\t\t\t\tpeople: sub.people,\r\n\t\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion,\r\n\t\t\t\tplace: sub.place,\r\n\t\t\t\thours: sub.hours,\r\n\t\t\t\tassignments: assignments,\r\n\t\t\t\ttags: journalMain.tags==null?[]:journalMain.tags.map(item=>item.name),\r\n\t\t\t\tattachments: atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tuid: vitem.id==null||vitem.id==\"\"?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\t})\r\n\t\t\t\t}),\r\n\t\t\t\temails: [], // 邮件\r\n\t\t\t\tuserIds:[], // 用户\r\n\t\t\t\taudio: audio,\r\n\t\t\t\tchecks: [],\r\n\t\t\t\tccEmails: [],\r\n\t\t\t\tccUserIds: [],\r\n\t\t\t}, ()=>{\r\n\t\t\t\t// 表单\r\n\t\t\t\tthis.props.form.setFieldsValue({\r\n\t\t\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\tlet {pathname, detailData} = _this.props;\r\n\t\t// 初始化数据\r\n\t\tif (Object.keys(detailData).length>0) {\r\n\t\t\t_this.init(detailData);\r\n\t\t}\r\n\t\t_this.props.onRef(this);\r\n\t\tif (pathname&&pathname.includes(\"/digital/draft\")&&_this.store.draftId!=\"\") {\r\n\t\t\t// 定时器\r\n\t\t\t_this.timer = setInterval(() => {\r\n\t\t\t\t// 心跳接口 30s跳动一个\r\n\t\t\t\t_this.saveAuto(0);\r\n\t\t\t}, 30000);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount () {\r\n\t\t// 页面离开时清楚定时器\r\n\t\tthis.timer&&clearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\thandleChange = (type, e) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleNumChange = (type, e) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: e\r\n\t\t});\r\n\t}\r\n\r\n\tonDateChange = (date, dateString) => {\r\n\t\tthis.setState({\r\n\t\t\ttime: dateString\r\n\t\t});\r\n\t}\r\n\r\n\thandleBChange = (type, editorState) => {\r\n\t\tthis.setState({[type]: editorState});\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\tassignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tassignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\tassignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\tassignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\t// 附件\r\n\thandleAttment = (type, params) => {\r\n\t\t// 处理附件\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\tfileId: item.fileId,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tid: item.id,\r\n\t\t\t\tuid: item.uid,\r\n\t\t\t\tname: item.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: item.filePath,\r\n\t\t\t})\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], arr)\r\n\t\t});\r\n\t}\r\n\r\n\t// 自动保存\r\n\tsaveAuto = (type) => {\r\n\t\tconst {assignments, tags, title, time, attachments, people, target, content, conclusion, place, hours, audio, audioStatus} = this.state;\r\n\t\tif (type==1) {  // 保存草稿\r\n\t\t\t// 附件上传中提示\r\n\t\t\tif (this.props.appStore.journal==true) {\r\n\t\t\t\tmessage.warn(\"请等待图片/附件上传完成\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 录音提示校验\r\n\t\t\tif (audioStatus==\"recording\") {\r\n\t\t\t\tmessage.warn(\"当前正在录音中，请先结束录音\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\tlet journalSub = {\r\n\t\t\ttitle,\r\n\t\t\ttime: numTime,\r\n\t\t\tpeople,\r\n\t\t\tplace,\r\n\t\t\thours,\r\n\t\t\ttarget: target,\r\n\t\t\tcontent: content,\r\n\t\t\tconclusion: conclusion\r\n\t\t};\r\n\r\n\t\t// 保存参数\r\n\t\tconst params = {\r\n\t\t\tid: this.store.draftId,\r\n\t\t\tjournalMain: {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\ttitle: newTime + \"-会议纪要-\" + title,\r\n\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\ttype: temList.type\r\n\t\t\t},\r\n\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t}),\r\n\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\tfileId: item.fileId,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tid: item.id\r\n\t\t\t})),\r\n\t\t\taudio: audio\r\n\t\t}\r\n\r\n\t\tthis.store.saveJournalByType({\r\n\t\t\tjournal: params,\r\n\t\t\tsaveType: type\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res) {\r\n\t\t\t\tthis.store.draftId = res.id;\r\n\t\t\t}\r\n\t\t\tif (res&&type==1) {\r\n\t\t\t\tmessage.success(\"草稿保存成功\");\r\n\t\t\t\t// 清空数据\r\n\t\t\t\tthis.reset();\r\n\r\n\t\t\t\tconst {pathname} = this.props;\r\n\t\t\t\tif (pathname == \"/digital/draft\") {  // 当前页是草稿\r\n\t\t\t\t\temitter.emit(\"draft\", \"3\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 草稿保存成功，跳转到草稿\r\n\t\t\t\t\tif (this.props.handleDraftRoute) {\r\n\t\t\t\t\t\tthis.props.handleDraftRoute();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 手动保存草稿\r\n\tsaveDraft = () => {\r\n\t\tthis.saveAuto(1);\r\n\t}\r\n\r\n\t// 提交发布\r\n\thandleSubmit = () => {\r\n\t\tconst {assignments, tags, attachments, audio,target, content, conclusion, audioStatus} = this.state;\r\n\t\t// 附件上传中提示\r\n\t\tif (this.props.appStore.journal==true) {\r\n\t\t\tmessage.warn(\"请等待图片/附件上传完成\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 录音提示校验\r\n\t\tif (audioStatus==\"recording\") {\r\n\t\t\tmessage.warn(\"当前正在录音中，请先结束录音\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 录音正在上传\r\n\t\tif (this.props.appStore.journalAudio==true) {\r\n\t\t\tmessage.warn(\"录音正在上传中, 请等待上传完成\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\t// 校验标签\r\n\t\tif (Array.isArray(tags) && tags.length == 0) {\r\n\t\t\tmessage.warn(\"标签是必输项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验会议目标、会议纪要、会议结论\r\n\t\tif (target==\"\") {\r\n\t\t\tmessage.warn(\"会议目标是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (content==\"\") {\r\n\t\t\tmessage.warn(\"会议纪要是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (conclusion==\"\") {\r\n\t\t\tmessage.warn(\"会议结论是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验下一步\r\n\t\tif (!assignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null)&&(item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { form } = this.props;\r\n\t\t// 获取并检查表单数据\r\n\t\tform.validateFields((err, values) => {\r\n\t\t\tif (err) return;\r\n\t\t\tif (!err) {\r\n\t\t\t\tconst {title, time, people, place,hours} = values;\r\n\r\n\t\t\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\t\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\t\t\tlet journalSub = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttime: numTime,\r\n\t\t\t\t\tpeople,\r\n\t\t\t\t\tplace,\r\n\t\t\t\t\thours,\r\n\t\t\t\t\ttarget: target,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tconclusion: conclusion\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 保存参数\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: this.store.draftId,\r\n\t\t\t\t\tjournalMain: {\r\n\t\t\t\t\t\tid: \"\",\r\n\t\t\t\t\t\ttitle: newTime + `-${temList.name}-` + title,\r\n\t\t\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\t\t\ttype: temList.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t})),\r\n\t\t\t\t\taudio: audio\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({ loading: true });\r\n\t\t\t\tthis.store.saveJournalByType({\r\n\t\t\t\t\tjournal: params,\r\n\t\t\t\t\tsaveType: 2\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tmessage.success(\"发布成功\");\r\n\t\t\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\t\t\t// 清空数据\r\n\t\t\t\t\t\tthis.reset();\r\n\r\n\t\t\t\t\t\tconst {pathname} = this.props;\r\n\t\t\t\t\t\tif (pathname == \"/digital/draft\") {  // 当前页是草稿\r\n\t\t\t\t\t\t\tif (this.props.handleRoute) {\r\n\t\t\t\t\t\t\t\tthis.props.handleRoute();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 详情页切换编辑\r\n\t\t\t\t\t\t\tif (this.props.getTable) {\r\n\t\t\t\t\t\t\t\tthis.props.getTable();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.props.onCancle) {\r\n\t\t\t\t\t\t\t\tthis.props.onCancle();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tonClose = () => {\r\n\t\tif (this.store.draftId != \"\"&&this.store.draftId != null) {  // 返回按钮\r\n\t\t\tthis.store.cancelJournal()\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t\tthis.props.form.resetFields();\r\n\t\t\t\t\tlet detailData = JSON.parse(JSON.stringify(this.state.detailData));\r\n\t\t\t\t\t// 清楚录音状态\r\n\t\t\t\t\t//this.child.reset();\r\n\t\t\t\t\tthis.init(detailData);\r\n\t\t\t\t\t// 详情页切换编辑\r\n\t\t\t\t\tif (this.props.onCancle) {\r\n\t\t\t\t\t\tthis.props.onCancle();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.store.draftId = \"\"; // 草稿id\r\n\t\tthis.setState({\r\n\t\t\tassignments: [],\r\n\t\t\ttags: [],\r\n\t\t\ttitle: \"\",\r\n\t\t\ttime: moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tattachments: [],\r\n\t\t\tpeople:\"\",\r\n\t\t\ttarget: \"\",\r\n\t\t\tcontent: \"\",\r\n\t\t\tconclusion: \"\",\r\n\t\t\tplace:\"\",\r\n\t\t\thours:\"\",\r\n\t\t\taudio: [],\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\tisLoading: false,\r\n\t\t\taudioStatus: \"\",\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [],\r\n\t\t\tccUserIds: [],\r\n\t\t});\r\n\t}\r\n\r\n\t// 间隔3秒获取pdf地址\r\n\tgetReportUrl = (id) => {\r\n\t\tlet _this = this;\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tconst { title, time} = this.state;\r\n\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\tconst pdfName = newTime + `-${temList.name}-` + title;\r\n\r\n\t\t_this.timer22 = setInterval(() => {\r\n\t\t\t_this.store.getDownloadUrl(id).then((res) => {\r\n\t\t\t\tconst {url} = res;\r\n\t\t\t\tif (url !== null && url !== \"\") {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdownloadFile(url, pdfName);  // 直接下载pdf\r\n\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (res.code==2) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t}\r\n\r\n\t// 生成word\r\n\tcreatWord = (type) =>{\r\n\t\tconst {assignments, tags, attachments, audio} = this.state;\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\t// 校验标签\r\n\t\tif (Array.isArray(tags) && tags.length == 0) {\r\n\t\t\tmessage.warn(\"标签是必输项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验下一步\r\n\t\tif (!assignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null)&&(item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { form } = this.props;\r\n\t\t// 获取并检查表单数据\r\n\t\tform.validateFields((err, values) => {\r\n\t\t\tif (err) return;\r\n\t\t\tif (!err) {\r\n\t\t\t\tconst {title, time, people, target, content, conclusion, place,hours} = values;\r\n\t\t\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\t\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\t\t\tlet journalSub = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttime: numTime,\r\n\t\t\t\t\tpeople,\r\n\t\t\t\t\tplace,\r\n\t\t\t\t\thours,\r\n\t\t\t\t\ttarget: target,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tconclusion: conclusion\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 保存参数\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\tid: this.store.draftId,\r\n\t\t\t\t\tjournalMain: {\r\n\t\t\t\t\t\tid: \"\",\r\n\t\t\t\t\t\ttitle: newTime + `-${temList.name}-` + title,\r\n\t\t\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\t\t\ttype: temList.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t})),\r\n\t\t\t\t\taudio\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (type==1) {\r\n\t\t\t\t\tthis.store.wordDownload(param)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.store.pdfDownload(param)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 发送邮件\r\n\tsendReport = () => {\r\n\t\tlet _this = this;\r\n\t\tconst {emails, userIds, audio, checks, ccEmails, ccUserIds} = _this.state;\r\n\t\tconst isemailUserIds = userIds == null ? [] : userIds;\r\n\t\tconst isemails = emails == null ? [] : emails;\r\n\t\t// 选择收件人\r\n\t\tif (isemailUserIds.length == 0 && isemails.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择邮件收件人\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst {assignments, tags, attachments} = this.state;\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\t// 校验标签\r\n\t\tif (Array.isArray(tags) && tags.length == 0) {\r\n\t\t\tmessage.warn(\"标签是必输项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验下一步\r\n\t\tif (!assignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null)&&(item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { form } = this.props;\r\n\t\t// 获取并检查表单数据\r\n\t\tform.validateFields((err, values) => {\r\n\t\t\tif (err) return;\r\n\t\t\tif (!err) {\r\n\t\t\t\tconst {title, time, people, place,hours} = values;\r\n\t\t\t\tconst {target, content, conclusion} = this.state;\r\n\t\t\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\t\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\t\t\tlet journalSub = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttime: numTime,\r\n\t\t\t\t\tpeople,\r\n\t\t\t\t\tplace,\r\n\t\t\t\t\thours,\r\n\t\t\t\t\ttarget: target.toHTML(),\r\n\t\t\t\t\tcontent: content.toHTML(),\r\n\t\t\t\t\tconclusion: conclusion.toHTML()\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 保存参数\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\tid: this.store.draftId,\r\n\t\t\t\t\tjournalMain: {\r\n\t\t\t\t\t\tid: \"\",\r\n\t\t\t\t\t\ttitle: newTime + `-${temList.name}-` + title,\r\n\t\t\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\t\t\ttype: temList.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t})),\r\n\t\t\t\t\taudio\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tjournal: param,\r\n\t\t\t\t\temails: emails,\r\n\t\t\t\t\tuserIds: userIds == null ? [] : userIds.map(item => item.userId),\r\n\t\t\t\t\tattType: checks.map(item=>typeof item ==\"string\"?Number(item):item),\r\n\t\t\t\t\tccEmails,\r\n\t\t\t\t\tccUserIds: ccUserIds == null ? [] : ccUserIds.map(item => item.userId)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.store.sendEmail(params)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tif (res == true) {\r\n\t\t\t\t\t\t\tmessage.success(\"邮件发送成功\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinit = (detailData) => {\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\r\n\t\tconst assignments = detailData.assignments == null ? [] : detailData.assignments;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst audio = detailData.audio == null ? [] : detailData.audio;\r\n\r\n\t\tthis.setState({\r\n\t\t\tdetailData: detailData,\r\n\t\t\ttitle: sub.title,\r\n\t\t\ttime: sub.time==null||sub.time==0?moment().format(\"YYYY-MM-DD\"):moment(sub.time).format(\"YYYY-MM-DD\"),\r\n\t\t\tpeople: sub.people,\r\n\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion,\r\n\t\t\tplace: sub.place,\r\n\t\t\thours: sub.hours,\r\n\t\t\tassignments: assignments,\r\n\t\t\ttags: journalMain.tags==null?[]:journalMain.tags.map(item=>item.name),\r\n\t\t\tattachments: atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: vitem.id==null||vitem.id==\"\"?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\taudio: audio,\r\n\t\t\taudioStatus: \"\",\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [],\r\n\t\t\tccUserIds: [],\r\n\t\t}, ()=>{\r\n\t\t\t// 表单\r\n\t\t\tthis.props.form.setFieldsValue({\r\n\t\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tupdateAudioStaus = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: data\r\n\t\t});\r\n\t}\r\n\r\n\tonRefAudio = (ref) => {\r\n\t\tthis.audio = ref\r\n\t}\r\n\r\n\tsaveAttachment = (type, params) => {\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\ttype: 'IMAGE',\r\n\t\t\t\turl: item.filePath,\r\n\t\t\t})\r\n\t\t});\r\n\t\tlet newArray = ContentUtils.insertMedias(this.state[type], arr);\r\n\t\tthis.setState({\r\n\t\t\t[type]: newArray\r\n\t\t}, ()=> {\r\n\t\t\tthis.props.form.setFieldsValue({\r\n\t\t\t\t[type]: newArray\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeAttc = (checkedValues) =>{\r\n\t\tthis.setState({\r\n\t\t\tchecks: checkedValues\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\trender() {\r\n\t\tconst {assignments, tags, title, time, attachments, conclusion, content, target, hours, people, place, loading, emails, userIds, audio, checks,ccEmails, ccUserIds} = this.state;\r\n\t\tconst {tagList, ossData} = this.store;\r\n\t\tconst excludeControls = [\r\n\t\t\t'undo', 'redo', 'separator',\r\n\t\t\t'font-size', 'line-height', 'letter-spacing', 'separator',\r\n\t\t\t'text-color', 'underline', 'strike-through', 'bold', 'separator',\r\n\t\t\t'remove-styles', 'separator', 'text-indent', 'text-align', 'separator', 'hr', 'separator',\r\n\t\t\t'clear'\r\n\t\t];\r\n\t\tconst disabledDate = (current) => {\r\n\t\t\treturn current > moment();\r\n\t\t}\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst imageControls = [\r\n\t\t\t'align-left', // 设置图片居左\r\n\t\t\t'align-center', // 设置图片居中\r\n\t\t\t'align-right', // 设置图片居右\r\n\t\t\t'size',\r\n\t\t\t'remove'\r\n\t\t]\r\n\t\tconst options = [\r\n\t\t\t{ label: 'Word文档作为附件', value: '0' },\r\n\t\t\t{ label: 'PDF文档作为附件', value: '1' }\r\n\t\t];\r\n\t\treturn (\r\n\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t<Form.Item wrapperCol={{\r\n\t\t\t\t\t\t\t\txs: {span: 24, },\r\n\t\t\t\t\t\t\t\tsm: {span: 24},\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">\r\n\t\t\t\t\t\t\t{(title==\"\"||title==null)||(time==\"\"||time==null)?null: moment(time).format(\"YYYYMMDD\") + \"-会议纪要-\" + title}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">\r\n\t\t\t\t\t\t\t{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<AudioRecorder\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\t\twidth: '300px',\r\n\t\t\t\t\t\t\t\theight: '300px',\r\n\t\t\t\t\t\t\t\tzIndex: 3,\r\n\t\t\t\t\t\t\t\ttextAlign: 'right'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t\t\taudio={audio}\r\n\t\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t\t\tupdateAudioStaus={this.updateAudioStaus}\r\n\t\t\t\t\t\t\tonRef={this.onRefAudio}\r\n\t\t\t\t\t\t\tappendAliyundata={this.props.appendAliyundata}\r\n\t\t\t\t\t\t\treSetAliyundata = {this.props.reSetAliyundata}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<EditableTagGroup\r\n\t\t\t\t\t\ttagList={mobx.toJS(tagList)}\r\n\t\t\t\t\t\ttags={tags}\r\n\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议主题\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('title', {\r\n\t\t\t\t\t\tinitialValue: title || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<Input\r\n\t\t\t\t\t\tmaxLength={15}\r\n\t\t\t\t\t          placeholder=\"请输入（不超过15字）\"\r\n\t\t\t\t\t          onChange={this.handleChange.bind(this, 'title')}/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议日期\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('time', {\r\n\t\t\t\t\t\t\tinitialValue: moment(time) || '',\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)(\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdisabledDate={disabledDate}\r\n\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\tonChange={this.onDateChange}/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议时长\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('hours', {\r\n\t\t\t\t\t\tinitialValue: hours || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<InputNumber\r\n\t\t\t\t\t\tonChange={this.handleNumChange.bind(this, 'hours')}\r\n\t\t\t\t\t\tplaceholder=\"请输入数字\"\r\n\t\t\t\t\t\tstyle={{width: '177px'}}/>)}\r\n\t\t\t\t\t<span className=\"ml5\">小时</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议地点\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('place', {\r\n\t\t\t\t\t\tinitialValue: place || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<TextArea onChange={this.handleChange.bind(this, 'place')} autoSize={{minRows: 1}}\r\n\t\t\t\t\t             placeholder=\"请输入\"/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"参会人员\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('people', {\r\n\t\t\t\t\t\tinitialValue: people || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<TextArea onChange={this.handleChange.bind(this, 'people')} autoSize={{minRows: 1}}\r\n\t\t\t\t\t             placeholder=\"请输入\"/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label={<span><span style={{\r\n\t\t\t\t\tfontWeight: \"700\",\r\n\t\t\t\t\tmarginRight: \"4px\",\r\n\t\t\t\t\tcolor: \"#f5222d\",\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\tfontFamily: \"SimSun, sans-serif\"\r\n\t\t\t\t}}>*</span>会议目标</span>} colon={false} className=\"edit_form_bold\" style={{marginBottom: '3px'}}></Form.Item>\r\n\t\t\t\t<ReactKindeditor\r\n\t\t\t\t\tvalue={target}\r\n\t\t\t\t\tonChange={this.handleBChange.bind(this, 'target')}\r\n\t\t\t\t\tid=\"target\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Item label={<span><span style={{\r\n\t\t\t\t\tfontWeight: \"700\",\r\n\t\t\t\t\tmarginRight: \"4px\",\r\n\t\t\t\t\tcolor: \"#f5222d\",\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\tfontFamily: \"SimSun, sans-serif\"\r\n\t\t\t\t}}>*</span>会议纪要</span>} colon={false} className=\"edit_form_bold\" style={{marginBottom: '3px'}}></Form.Item>\r\n\t\t\t\t<ReactKindeditor\r\n\t\t\t\t\tvalue={content}\r\n\t\t\t\t\tonChange={this.handleBChange.bind(this, 'content')}\r\n\t\t\t\t\tid=\"content\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Item label={<span><span style={{\r\n\t\t\t\t\tfontWeight: \"700\",\r\n\t\t\t\t\tmarginRight: \"4px\",\r\n\t\t\t\t\tcolor: \"#f5222d\",\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\tfontFamily: \"SimSun, sans-serif\"\r\n\t\t\t\t}}>*</span>会议结论</span>} colon={false} className=\"edit_form_bold\" style={{marginBottom: '3px'}}></Form.Item>\r\n\t\t\t\t<ReactKindeditor\r\n\t\t\t\t\tvalue={conclusion}\r\n\t\t\t\t\tonChange={this.handleBChange.bind(this, 'conclusion')}\r\n\t\t\t\t\tid=\"conclusion\"\r\n\t\t\t\t/>\r\n\t\t\t\t{/*<Form.Item label=\"会议目标\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('target', {\r\n\t\t\t\t\t\tinitialValue: target,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<BraftEditor\r\n\t\t\t\t\t\t\tfontSizes={[\r\n\t\t\t\t\t\t\t\t12, 14, 16, 18, 20, 24,\r\n\t\t\t\t\t\t\t\t28, 30, 32, 36, 40, 48,\r\n\t\t\t\t\t\t\t\t56, 64\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tonChange={this.handleBChange.bind(this, 'target')}\r\n\t\t\t\t\t\t\tclassName=\"my-editor\"\r\n\t\t\t\t\t\t\tcontrols={excludeControls}\r\n\t\t\t\t\t\t\tcontentStyle={{\r\n\t\t\t\t\t\t\t\tminHeight: 150,\r\n\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\toverflowY: 'scroll',\r\n\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\textendControls={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkey: 'antd-uploader',\r\n\t\t\t\t\t\t\t\t\ttype: 'component',\r\n\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t<MyUploadOne\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment.bind(this, \"target\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\timageControls={imageControls}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议纪要\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('content', {\r\n\t\t\t\t\t\tinitialValue: content,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<BraftEditor\r\n\t\t\t\t\t\t\tfontSizes={[\r\n\t\t\t\t\t\t\t\t12, 14, 16, 18, 20, 24,\r\n\t\t\t\t\t\t\t\t28, 30, 32, 36, 40, 48,\r\n\t\t\t\t\t\t\t\t56, 64\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tvalue={content}\r\n\t\t\t\t\t\t\tonChange={this.handleBChange.bind(this, 'content')}\r\n\t\t\t\t\t\t\tclassName=\"my-editor\"\r\n\t\t\t\t\t\t\tcontrols={excludeControls}\r\n\t\t\t\t\t\t\tcontentStyle={{\r\n\t\t\t\t\t\t\t\tminHeight: 150,\r\n\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\toverflowY: 'scroll',\r\n\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\textendControls={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkey: 'antd-uploader',\r\n\t\t\t\t\t\t\t\t\ttype: 'component',\r\n\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t<MyUploadOne\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment.bind(this, \"content\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\timageControls={imageControls}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议结论\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('conclusion', {\r\n\t\t\t\t\t\tinitialValue: conclusion,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<BraftEditor\r\n\t\t\t\t\t\t\tfontSizes={[\r\n\t\t\t\t\t\t\t\t12, 14, 16, 18, 20, 24,\r\n\t\t\t\t\t\t\t\t28, 30, 32, 36, 40, 48,\r\n\t\t\t\t\t\t\t\t56, 64\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tonChange={this.handleBChange.bind(this, 'conclusion')}\r\n\t\t\t\t\t\t\tvalue={conclusion}\r\n\t\t\t\t\t\t\tclassName=\"my-editor\"\r\n\t\t\t\t\t\t\tcontrols={excludeControls}\r\n\t\t\t\t\t\t\tcontentStyle={{\r\n\t\t\t\t\t\t\t\tminHeight: 150,\r\n\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\toverflowY: 'scroll',\r\n\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\textendControls={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkey: 'antd-uploader',\r\n\t\t\t\t\t\t\t\t\ttype: 'component',\r\n\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t<MyUploadOne\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment.bind(this, \"conclusion\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\timageControls={imageControls}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>*/}\r\n\t\t\t\t<Form.Item label=\"下一步行动\" colon={false} className=\"edit_form_bold\"></Form.Item>\r\n\t\t\t\t<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t{assignments!==undefined&&assignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"附件\" className=\"edit_form_bold\">\r\n\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\tsaveAttachment={this.handleAttment.bind(this, 'attachments')}\r\n\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\t\tlistType=\"picture-card\"\r\n\t\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t\t\tjournalType=\"journal\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"内容生成\" className=\"edit_form_bold\">\r\n\t\t\t\t\t<Spin tip={this.state.tip} spinning={this.state.isLoading} delay={100}>\r\n\t\t\t\t\t\t<Button type=\"link\" onClick={this.creatWord.bind(this, \"1\")}>点击生成并存储为Word文档</Button>\r\n\t\t\t\t\t\t<Button className=\"ml20\" type=\"link\" onClick={this.creatWord.bind(this, \"2\")}>点击生成并存储为PDF文档</Button>\r\n\t\t\t\t\t</Spin>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"内容发送\" className=\"edit_form_bold clearfix\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{position: 'relative', top: '4px'}}\r\n\t\t\t\t\t\tclassName=\"fl\" type=\"link\" onClick={this.sendReport}>点击发送邮件</Button>\r\n\t\t\t\t\t<div className=\"fl\" style={{width:'275px'}}>\r\n\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\tclassName=\"attc_checks\"\r\n\t\t\t\t\t\t\tvalue={checks}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tonChange={this.onChangeAttc}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<div className=\"fl mr25 ml15\">\r\n\t\t\t\t\t\t<span>收件人：</span>\r\n\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\ttitle=\"添加收件人地址\"\r\n\t\t\t\t\t\t\tdata={emails}\r\n\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'emails')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"fl\" style={{minWidth:'80px'}}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={userIds}\r\n\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'userIds')}\r\n\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\ttitle=\"添加收件人\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<div className=\"fl mr25 ml15\">\r\n\t\t\t\t\t\t<span>抄送人：</span>\r\n\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\ttitle=\"添加抄送人地址\"\r\n\t\t\t\t\t\t\tdata={ccEmails}\r\n\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'ccEmails')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"fl\" style={{minWidth:'80px'}}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={ccUserIds}\r\n\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'ccUserIds')}\r\n\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\ttitle=\"添加抄送人\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\tsm: {span: 24}\r\n\t\t\t\t\t}}\r\n                    className=\"clearfix tr mt20 pl20 pr20 fixed_bottom\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: this.props.appStore.collapsed?\"calc(100% - 470px)\":\" calc(100% - 590px)\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button className=\"fl\"\r\n\t\t\t\t\t        shape=\"round\"\r\n\t\t\t\t\t        style={{\r\n\t\t\t\t\t        \tposition: 'relative',\r\n\t\t\t\t\t\t        top: '4px'\r\n\t\t\t\t\t        }}\r\n\t\t\t\t\t        type=\"primary\"\r\n\t\t\t\t\t        onClick={this.saveDraft}>\r\n\t\t\t\t\t\t保存草稿\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消本次编辑吗?\" onConfirm={() => this.onClose()}>\r\n\t\t\t\t\t\t<Button shape=\"round\" style={{marginRight: 8}}>\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<Button shape=\"round\"\r\n\t\t\t\t\t        loading={loading}\r\n\t\t\t\t\t        onClick={this.handleSubmit}\r\n\t\t\t\t\t        type=\"primary\">\r\n\t\t\t\t\t\t提交发布\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst editForm = Form.create({})(EditeMeeting);\r\nexport default editForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/EditeMeeting.js","/*\r\n* 共享编辑\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Icon, Input, Col, Row, Modal, Avatar, message, Button, Empty} from 'antd';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport * as _ from 'lodash'\r\n\r\nconst colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色\r\n\r\n@inject('UserStore')\r\n@observer\r\nclass PersonEdit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\ttext: '',\r\n\t\t\tvisible: false,\r\n\t\t\toldSelect: this.props.data, // 已选择的人员,\r\n\t\t\tdefaultData: [], // 默认数据\r\n\t\t\tdata: [], // 已选择标记的数据\r\n\t\t\tfilterData: [], // 筛选数据\r\n\t\t}\r\n\t\tthis.getData = this.getData.bind(this);\r\n\t\tthis.handleClickDebounce = _.debounce(this.getData, 500, {'maxWait': 1000});\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tthis.setState({\r\n\t\t\toldSelect: nextProps.data\r\n\t\t}, () => {\r\n\t\t\tthis.init();\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst params = \"\";\r\n\t\t// 未选的全部用户\r\n\t\tthis.props.UserStore.getRole(params).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdefaultData: res.body.map((item) => Object.assign(item, {selected: false})),\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.init();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// 初始化\r\n\tinit = () => {\r\n\t\tlet defaultDatas = JSON.parse(JSON.stringify(this.state.defaultData));\r\n\t\t//  将已选定的用户做标记\r\n\t\tlet arr = defaultDatas.map((item) => {\r\n\t\t\tlet obj = {}\r\n\t\t\tif ([...this.state.oldSelect].some(v => v === item.id)) {\r\n\t\t\t\tobj = Object.assign(item, {selected: true})\r\n\t\t\t} else {\r\n\t\t\t\tobj = Object.assign(item, {selected: false})\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], arr)\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.handleClickDebounce.cancel();\r\n\t}\r\n\r\n\t// 提交\r\n\thandleOk = () => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst users = dataArray.filter((res) => {\r\n\t\t\treturn res.selected == true\r\n\t\t}).map((item, index) => {\r\n\t\t\treturn item.id;\r\n\t\t});\r\n\r\n\t\t// 保存\r\n\t\tthis.store.saveSharedEditing(users).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\t\t\t\tthis.handleCancel();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// 取消\r\n\thandleCancel = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false,\r\n\t\t\ttext: \"\",\r\n\t\t\tdata: Object.assign([], this.state.defaultData),\r\n\t\t\toldSelect: this.props.data\r\n\t\t});\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\t// 点击列表选中\r\n\thandClick = (param) => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selected: true}))\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], dataArray)\r\n\t\t})\r\n\t}\r\n\r\n\t// 点击列表删除\r\n\thandClickDel = (param) => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selected: false}))\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], dataArray)\r\n\t\t})\r\n\t}\r\n\r\n\t// 模糊搜索\r\n\tonChange = (e) => {\r\n\t\tthis.setState({\r\n\t\t\ttext: _.trim(e.target.value)\r\n\t\t});\r\n\t\tthis.handleClickDebounce()\r\n\t}\r\n\r\n\tgetData() {\r\n\t\tconst {text, data} = this.state;\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(data));\r\n\t\tlet filterData = dataArray.filter(item => (item.realname).indexOf(text) > -1 || (item.phone).indexOf(text) > -1)\r\n\t\tthis.setState({\r\n\t\t\tfilterData: filterData\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {data, oldSelect, filterData, text, defaultData} = this.state;\r\n\t\tconst {disabled, title, visible} = this.props;\r\n\t\tlet isFilter = text == \"\" || text == null;\r\n\t\tconst activeData = isFilter ? data : filterData;  // 当前数据\r\n\t\treturn (<Modal\r\n\t\t\t\tzIndex=\"1099\"\r\n\t\t\t\tmaskClosable={false}\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tokText={'提交'}\r\n\t\t\t\ttitle={title||\"添加负责人\"}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonOk={this.handleOk}\r\n\t\t\t\tonCancel={this.handleCancel}\r\n\t\t\t>\r\n\t\t\t\t<Row type=\"flex\" justify=\"space-between\" className=\"\">\r\n\t\t\t\t\t<Col span={12} className='pr20'>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tvalue={text}\r\n\t\t\t\t\t\t\tplaceholder=\"输入姓名/手机号\"\r\n\t\t\t\t\t\t\tsuffix={<Icon type=\"search\"/>}\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\t\tautoHide\r\n\t\t\t\t\t\t\tautoHideTimeout={1000}\r\n\t\t\t\t\t\t\tautoHideDuration={200}\r\n\t\t\t\t\t\t\tautoHeight\r\n\t\t\t\t\t\t\tautoHeightMin={0}\r\n\t\t\t\t\t\t\tautoHeightMax={350}\r\n\t\t\t\t\t\t\tthumbMinSize={30}\r\n\t\t\t\t\t\t\tuniversal={true}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ul className=\"userlist_ul\">\r\n\t\t\t\t\t\t\t\t{activeData.length > 0 && activeData.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <li\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"pr\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.handClick.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_name\">{item.realname}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_station\">{item.station}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_email\">{item.email}</div>\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tright: '15px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'rgba(75,164,190,1)'\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={item.selected ? \"active\" : \"hidden\"} type=\"check\"/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t\t{activeData.length == 0 ?\r\n\t\t\t\t\t\t\t<Empty\r\n\t\t\t\t\t\t\t\timage=\"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original\"\r\n\t\t\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\t\t\theight: 60,\r\n\t\t\t\t\t\t\t\t\tmarginTop: \"30px\"\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdescription={\r\n\t\t\t\t\t\t\t\t\t\"暂无匹配\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</Empty>\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tl\" style={{\r\n\t\t\t\t\t\tminHeight: '350px',\r\n\t\t\t\t\t\tborderLeft: '1px solid #e6e6e6'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<p className=\"pl20\">已选成员({data && data.filter((res) => {\r\n\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t}).length})</p>\r\n\t\t\t\t\t\t<ul className=\"userlist_ul_del\">\r\n\t\t\t\t\t\t\t{data.filter((res) => {\r\n\t\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t\t}).length > 0 && data.filter((res) => {\r\n\t\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn <li\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tclassName=\"pr\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.handClickDel.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'inlineBlock',\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: colorList[index % 10],\r\n\t\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\r\n\t\t\t\t\t\t\t\t\t\t}} size=\"small\">\r\n\t\t\t\t\t\t\t\t\t\t{item.realname.slice(0, 1)}\r\n\t\t\t\t\t\t\t\t\t</Avatar> {/*颜色随机取值*/}\r\n\t\t\t\t\t\t\t\t\t<span className=\"ul_name\">{item.realname}</span>\r\n\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\ttop: '13px',\r\n\t\t\t\t\t\t\t\t\t\t\tright: '15px',\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: 'rgba(184,80,74,1)',\r\n\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"userlist_ul_icon\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"close\"/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default PersonEdit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/PersonEdit.js"],"sourceRoot":""}