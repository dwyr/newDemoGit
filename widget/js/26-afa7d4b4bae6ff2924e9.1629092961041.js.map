{"version":3,"sources":["webpack:///./src/containers/bpm/Okr.js","webpack:///./src/components/worktile/MyUpload.js?a69f*****","webpack:///./src/store/bpm/BpmStore.js?77c3*","webpack:///./src/utils/Schemas/okr.js?8697*","webpack:///./src/components/bpm/DingtalkTree.js?16e5","webpack:///./src/components/bpm/OkrTable.js","webpack:///./src/components/bpm/ZjComment.js"],"names":["mobx","TabPane","Tabs","confirm","Modal","Okr","observer","props","getWeeks","currentYear","store","then","res","weeksData","Object","assign","activeweeks","filter","item","isDefault","getWeekDetails","id","getMonthDetails","month","getAtts","type","code","getComments","onRef","ref","child","onCommentRef","comment","handleYearClick","e","setState","value","children","state","saveAttachment","arr","key","season","params","attachments","map","fileId","fileName","filePath","toJS","saveAtt","message","success","delNode","attachmentId","delAtt","callback","param","getSeasonDetails","getYearDetails","handleWeekClick","_this","defaultWeeksData","weekData","aweeks","JSON","parse","stringify","wData","dtWeeksData","aWeeksData","index","findIndex","activeIndex","warn","length","defaultSource","orders","keyResult","workItems","associationDescription","results","currentSource","isChange","title","onOk","active","onCancel","saveData","dataSource","onChangeRadio","target","handleSubmit","saveWeekDetails","saveMonthDetails","saveSeasonDetails","saveYearDetails","saveComment","text","clearState","delComment","commentId","handleSelect","keys","userId","userName","handleDelete","seasonData","yearData","data","dataSource2","data2","toggle","visible","BpmStore","years","name","weekAddData","yearAddData","objective","uniformity","depend","dependencyDescription","confidenceLevel","completion","score","nextProps","getSts","year","num","Number","i","push","String","reverse","toString","userInfo","appStore","realname","ossData","monthData","okrAtts","okrComments","menu","height","operations","width","marginRight","fontSize","fontWeight","columns","dataIndex","editable","align","JiColumns","render","record","color","position","left","top","transform","vitem","uid","status","url","cursor","zIndex","borderLeft","minHeight","paddingLeft","marginBottom","weekMonthName","bind","marginTop","monthName","React","Component","getBase64","img","reader","FileReader","addEventListener","result","readAsDataURL","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","format","UploadToOss","Promise","resolve","reject","multipartUpload","catch","error","MyUpload","handleChange","info","fileList","oldFileList","newFileList","originFileObj","host","undefined","array","pid","projectId","beforeUpload","isJPG","isLt2M","size","onloadend","loading","securityToken","multiple","onChange","listType","className","disabled","Config","bpm","getProjectBoardList","Schemas","projectBoardParams","projectBoardList","projectBoardListDone","getAllProjectList","allProjectParams","allProjectList","body","pageIndex","pageSize","allProjectTotal","totalCount","getProductProportion","productProportion","getTopContractAmountList","topContractAmount","getCurrentTaskList","currentTaskParams","currentTaskList","dealyWarnningList","currentTaskTotal","dealyWarnningParams","tempData","concat","hasMore","getDeliverRate","deliverRate","getMoneyBackRate","moneyBackRate","getMyTaskCount","emitter","emit","getProductTypeList","productTyleList","typeName","products","getMasterList","masterList","masterIds","authorization","getUserInfoListByRoleCode","authorizationSchemas","appId","personList","getCalendarProjectList","projectList","getPersonMonthTaskState","yearMonth","personMonthTask","getProjectStagesByIds","projectIds","projectStages","getDepartment","appid","getUserInfoListByDingtalk","depId","getDepartmentAndUsers","getPersonScheduleResources","personParams","personResources","getAllStages","stageName","bpmSchemas","str","okr","okrSchemas","list","saveAtts","observable","beginTime","startOf","valueOf","endTime","endOf","action","ids","getWeekAndMonthDetails","saveWeekAndMonthDetails","TreeNode","Tree","Search","Input","dataList","DingtalkTree","expandedKeys","autoExpandParent","checkedKeys","treeData","searchValue","filterTreeData","parent","selectedKeys","forEach","userInfos","Array","isArray","mitem","isLeaf","transFormTree","generateList","userSearch","showLine","onExpand","onCheck","onSelect","renderTreeNodes","parentId","isSearch","includes","from","Set","handPersonChange","indexOf","beforeStr","substr","afterStr","val","_","trim","getParentKey","node","tree","parentKey","some","dataRef","EditableContext","createContext","EditableRow","form","EditableFormRow","Form","create","TextArea","customizeRenderEmpty","textAlign","padding","fontFamily","EditableCell","editing","save","handleSave","validateFields","values","currentTarget","renderCell","margin","getFieldDecorator","rules","required","initialValue","input","float","minRows","maxRows","restProps","OkrTable","handleAdd","addData","newData","row","splice","components","cell","massColu","col","onCell","CommentList","comments","Editor","onSubmit","submitting","ZjComment","setTimeout","author","avatar","backgroundColor","content","datetime","createTime","actions"],"mappings":"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","file":"js/26-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* OKR\r\n* dangwei@bacspace.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as mobx from 'mobx';\r\nimport moment from \"moment\";\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport {Row, Col, Dropdown, Icon, Affix, Menu, Tooltip, Radio, Button, Form, Tabs, message, Modal, Popconfirm} from \"antd\";\r\nimport DingtalkTree from '@/components/bpm/DingtalkTree';\r\nimport OkrTable from '@/components/bpm/OkrTable';\r\nimport ZjComment from '@/components/bpm/ZjComment';\r\nimport BpmStore from \"store/bpm/BpmStore\";\r\nimport MyUpload from \"@/components/worktile/MyUpload\";\r\n\r\nconst {TabPane} = Tabs;\r\nconst {confirm} = Modal;\r\n\r\n@inject('appStore')\r\n@observer\r\nexport default class Okr extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = new BpmStore();\r\n\t\tthis.state = {\r\n\t\t\tyears: [{\r\n\t\t\t\tid: '',\r\n\t\t\t\tname: '2019'\r\n\t\t\t}],  // 年份\r\n\t\t\tvalue: '2019',\r\n\t\t\tweekAddData: {   // 周新增\r\n\t\t\t\tid: \"\",\r\n\t\t\t\torders: \"\",\r\n\t\t\t\tkeyResult: \"\",\r\n\t\t\t\tworkItems: \"\",\r\n\t\t\t\tassociationDescription: \"\",\r\n\t\t\t\tresults: \"\",\r\n\t\t\t},\r\n\t\t\tyearAddData: {   // 年新增\r\n\t\t\t\tid: \"\",\r\n\t\t\t\torders: \"\",\r\n\t\t\t\tobjective: \"\",\r\n\t\t\t\tuniformity: \"\",\r\n\t\t\t\tkeyResult: \"\",\r\n\t\t\t\tdepend: \"\",\r\n\t\t\t\tdependencyDescription: \"\",\r\n\t\t\t\tconfidenceLevel: \"\",\r\n\t\t\t\tcompletion: \"\",\r\n\t\t\t\tscore: \"\",\r\n\t\t\t},\r\n\t\t\tseason: \"01\",\r\n\t\t\tkey: '1',\r\n\t\t\tvisible: false, // 卡片\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.store.getSts();\r\n\t\t// 获取当前年份数据\r\n\t\tconst currentYear = moment().year();\r\n\t\t/*\r\n\t\t* 年份数据来源：从2019年开始， 截至到当前的年份\r\n\t\t* */\r\n\t\tif (currentYear <= 2019) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tyears: [{\r\n\t\t\t\t\tname: '2019'\r\n\t\t\t\t}]\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconst num = Number(currentYear);\r\n\t\t\tlet data = [];\r\n\t\t\tfor (let i = 2019; i <= num; i++) {\r\n\t\t\t\tdata.push({name: String(i)})\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tyears: Object.assign([], data.reverse()),\r\n\t\t\t\tvalue: currentYear.toString()\r\n\t\t\t}, () => {\r\n\t\t\t\tconst {userInfo} = this.props.appStore;\r\n\t\t\t\tconst userId = mobx.toJS(userInfo).id;\r\n\t\t\t\tconst userName = mobx.toJS(userInfo).realname;\r\n\t\t\t\tthis.store.userId = userId;\r\n\t\t\t\tthis.store.userName = userName;\r\n\t\t\t\tthis.getWeeks(currentYear);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgetWeeks = (currentYear) => {\r\n\t\tthis.store.getWeeks(currentYear).then((res) => {\r\n\t\t\tthis.store.weeksData = Object.assign([], res);\r\n\t\t\tlet activeweeks = res.filter(item => item.isDefault == true)[0];\r\n\t\t\tthis.store.activeweeks = Object.assign({}, activeweeks);\r\n\t\t\tthis.store.getWeekDetails(activeweeks.id)\r\n\t\t\tthis.store.getMonthDetails(activeweeks.month)\r\n\t\t\tthis.store.getAtts({\r\n\t\t\t\ttype: 'week',\r\n\t\t\t\tcode: activeweeks.id\r\n\t\t\t})\r\n\t\t\tthis.store.getComments({\r\n\t\t\t\ttype: 'week',\r\n\t\t\t\tcode: activeweeks.id\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tonCommentRef = (ref) => {\r\n\t\tthis.comment = ref\r\n\t}\r\n\r\n\t// 切换年份\r\n\thandleYearClick = (e) => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.item.props.children\r\n\t\t}, () => {\r\n\t\t\tthis.getWeeks(this.state.value);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存附件\r\n\tsaveAttachment = (arr) => {\r\n\t\tconst {key, season, value} = this.state;\r\n\t\tconst {activeweeks} = this.store;\r\n\t\tconst params = {\r\n\t\t\ttype: \"\",\r\n\t\t\tcode: \"\",\r\n\t\t\tattachments: arr.map((item) => {\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\tid: item.id\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (key == \"1\") {\r\n\t\t\tparams.type = \"week\";\r\n\t\t\tparams.code = mobx.toJS(activeweeks).id;\r\n\t\t\tthis.store.saveAtt(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n                    this.store.getAtts({\r\n\t                    type: 'week',\r\n\t                    code: activeweeks.id\r\n                    })\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (key == \"2\") {\r\n\t\t\tparams.type = \"season\";\r\n\t\t\tparams.code = value + season;\r\n\t\t\tthis.store.saveAtt(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.store.getAtts({\r\n\t\t\t\t\t\ttype: 'week',\r\n\t\t\t\t\t\tcode: value + season\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparams.type = \"year\";\r\n\t\t\tparams.code = value;\r\n\t\t\tthis.store.saveAtt(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.store.getAtts({\r\n\t\t\t\t\t\ttype: 'week',\r\n\t\t\t\t\t\tcode: value + season\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除附件\r\n\tdelNode = (id) => {\r\n\t\tconst {key, season, value} = this.state;\r\n\t\tconst {activeweeks} = this.store;\r\n\t\tconst params = {\r\n\t\t\ttype: \"\",\r\n\t\t\tcode: \"\",\r\n\t\t\tattachmentId: id\r\n\t\t}\r\n\t\tif (key == \"1\") {\r\n\t\t\tparams.type = \"week\";\r\n\t\t\tparams.code = mobx.toJS(activeweeks).id;\r\n\t\t} else if (key == \"2\") {\r\n\t\t\tparams.type = \"season\";\r\n\t\t\tparams.code = value + season;\r\n\t\t} else {\r\n\t\t\tparams.type = \"year\";\r\n\t\t\tparams.code = value;\r\n\t\t}\r\n\t\tthis.store.delAtt(params).then((res) => {\r\n\t\t\tif (res == true) {\r\n\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcallback = (type) => {\r\n\t\tthis.setState({\r\n\t\t\tkey: type\r\n\t\t});\r\n\t\tconst {value, season} = this.state;\r\n\t\tswitch (type) {\r\n\t\t\tcase \"1\":\r\n\t\t\t\tthis.getWeeks(value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"2\":\r\n\t\t\t\tconst param = value + season;\r\n\t\t\t\tthis.store.getSeasonDetails(param);\r\n\t\t\t\tthis.store.getAtts({\r\n\t\t\t\t\ttype: 'season',\r\n\t\t\t\t\tcode: param\r\n\t\t\t\t})\r\n\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\ttype: 'season',\r\n\t\t\t\t\tcode: param\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"3\":\r\n\t\t\t\tthis.store.getYearDetails(value);\r\n\t\t\t\tthis.store.getAtts({\r\n\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\tcode: value\r\n\t\t\t\t})\r\n\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\tcode: value\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// 切换上、下周\r\n\thandleWeekClick = (type) => {\r\n\t\tlet _this = this;\r\n\t\tconst {activeweeks, weeksData, defaultWeeksData, weekData} = _this.store;\r\n\t\tconst aweeks = JSON.parse(JSON.stringify(activeweeks));\r\n\t\tconst wData = JSON.parse(JSON.stringify(weeksData));\r\n\t\tconst dtWeeksData = JSON.parse(JSON.stringify(defaultWeeksData));\r\n\t\tconst aWeeksData = JSON.parse(JSON.stringify(weekData));\r\n\t\tconst index = wData.findIndex(item => item.id == aweeks.id);\r\n\t\tlet activeIndex = 0;\r\n\t\tif (type == 1) { // 向上\r\n\t\t\tif (index == 0) {\r\n\t\t\t\tmessage.warn(\"当前是第一周\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tactiveIndex = index - 1;\r\n\t\t} else {  // 向下\r\n\t\t\tif (index == wData.length - 1) {\r\n\t\t\t\tmessage.warn(\"当前是最后一周\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tactiveIndex = index + 1;\r\n\t\t}\r\n\r\n\t\t// 校验：内容有没有变动\r\n\t\tlet defaultSource = dtWeeksData.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"orders\": item.orders,\r\n\t\t\t\t\"keyResult\": item.keyResult,\r\n\t\t\t\t\"workItems\": item.workItems,\r\n\t\t\t\t\"associationDescription\": item.associationDescription,\r\n\t\t\t\t\"results\": item.results\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet currentSource = aWeeksData.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"orders\": item.orders,\r\n\t\t\t\t\"keyResult\": item.keyResult,\r\n\t\t\t\t\"workItems\": item.workItems,\r\n\t\t\t\t\"associationDescription\": item.associationDescription,\r\n\t\t\t\t\"results\": item.results\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst isChange = JSON.stringify(defaultSource) == JSON.stringify(currentSource); // 内容是否变动\r\n\t\tif (isChange == false) {\r\n\t\t\tconfirm({\r\n\t\t\t\ttitle: '是否要切换周，并清空当前所填写数据?',\r\n\t\t\t\tonOk() {\r\n\t\t\t\t\tlet active = wData[activeIndex];\r\n\t\t\t\t\t_this.store.activeweeks = Object.assign({}, active);\r\n\t\t\t\t\t_this.store.getWeekDetails(active.id);\r\n\t\t\t\t\t_this.store.getAtts({\r\n\t\t\t\t\t\ttype: 'week',\r\n\t\t\t\t\t\tcode: active.id\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.store.getComments({\r\n\t\t\t\t\t\ttype: 'week',\r\n\t\t\t\t\t\tcode: active.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (activeweeks.month !== active.month) {\r\n\t\t\t\t\t\t// 清空月数据\r\n\t\t\t\t\t\t_this.store.getMonthDetails(active.month)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tonCancel() {\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet active = wData[activeIndex];\r\n\t\t\t_this.store.activeweeks = Object.assign({}, active);\r\n\t\t\t_this.store.getWeekDetails(active.id);\r\n\t\t\t_this.store.getAtts({\r\n\t\t\t\ttype: 'week',\r\n\t\t\t\tcode: active.id\r\n\t\t\t})\r\n\t\t\t_this.store.getComments({\r\n\t\t\t\ttype: 'week',\r\n\t\t\t\tcode: active.id\r\n\t\t\t})\r\n\t\t\tif (activeweeks.month !== active.month) {\r\n\t\t\t\t// 清空月数据\r\n\t\t\t\t_this.store.getMonthDetails(active.month)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新数据\r\n\tsaveData = (type, dataSource) => {\r\n\t\tthis.store[type + 'Data'] = Object.assign([], dataSource);\r\n\t}\r\n\r\n\tonChangeRadio = (e) => {\r\n\t\tconst {value} = e.target;\r\n\t\tthis.setState({\r\n\t\t\tseason: value\r\n\t\t}, () => {\r\n\t\t\tconst param = this.state.value + value;\r\n\t\t\tthis.store.getSeasonDetails(param);\r\n\t\t\tthis.store.getAtts({\r\n\t\t\t\ttype: 'season',\r\n\t\t\t\tcode: param\r\n\t\t\t})\r\n\t\t\tthis.store.getComments({\r\n\t\t\t\ttype: 'season',\r\n\t\t\t\tcode: param\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = () => {\r\n\t\tconst {key, value, season} = this.state;\r\n\t\tswitch (key) {\r\n\t\t\tcase \"1\":\r\n\t\t\t\tthis.store.saveWeekDetails();\r\n\t\t\t\tthis.store.saveMonthDetails().then((res) => {\r\n\t\t\t\t\tif (res == true) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"2\":\r\n\t\t\t\tconst param = value + season;\r\n\t\t\t\tthis.store.saveSeasonDetails(param).then((res) => {\r\n\t\t\t\t\tif (res == true) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"3\":\r\n\t\t\t\tthis.store.saveYearDetails(value).then((res) => {\r\n\t\t\t\t\tif (res == true) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsaveComment = (text) => {\r\n\t\tconst {key, season, value} = this.state;\r\n\t\tconst {activeweeks} = this.store;\r\n\t\tconst params = {\r\n\t\t\ttype: \"\",\r\n\t\t\tcode: \"\",\r\n\t\t\tcomment: {text: text}\r\n\t\t}\r\n\t\tif (key == \"1\") {\r\n\t\t\tparams.type = \"week\";\r\n\t\t\tparams.code = mobx.toJS(activeweeks).id;\r\n\t\t\tthis.store.saveComment(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.comment.clearState();\r\n\t\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\t\ttype: 'week',\r\n\t\t\t\t\t\tcode: activeweeks.id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (key == \"2\") {\r\n\t\t\tparams.type = \"season\";\r\n\t\t\tparams.code = value + season;\r\n\t\t\tthis.store.saveComment(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.comment.clearState();\r\n\t\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\t\ttype: 'season',\r\n\t\t\t\t\t\tcode: value + season\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparams.type = \"year\";\r\n\t\t\tparams.code = value;\r\n\t\t\tthis.store.saveComment(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.comment.clearState();\r\n\t\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\t\tcode: value\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除评论\r\n\tdelComment = (id) => {\r\n\t\tconst {key, season, value} = this.state;\r\n\t\tconst {activeweeks} = this.store;\r\n\t\tconst params = {\r\n\t\t\ttype: \"\",\r\n\t\t\tcode: \"\",\r\n\t\t\tcommentId: id\r\n\t\t}\r\n\t\tif (key == \"1\") {\r\n\t\t\tparams.type = \"week\";\r\n\t\t\tparams.code = mobx.toJS(activeweeks).id;\r\n\t\t\tthis.store.delComment(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\t\ttype: 'week',\r\n\t\t\t\t\t\tcode: activeweeks.id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (key == \"2\") {\r\n\t\t\tparams.type = \"season\";\r\n\t\t\tparams.code = value + season;\r\n\t\t\tthis.store.delComment(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\t\ttype: 'season',\r\n\t\t\t\t\t\tcode: value + season\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparams.type = \"year\";\r\n\t\t\tparams.code = value;\r\n\t\t\tthis.store.delComment(params).then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\t\tcode: value\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleSelect = (keys) => {\r\n\t\tthis.store.userId = keys[\"key\"];\r\n\t\tthis.store.userName = keys[\"title\"];\r\n\t\tconst {value, season} = this.state;\r\n\t\tconst {key} = this.state;\r\n\t\tswitch (key) {\r\n\t\t\tcase \"1\":\r\n\t\t\t\tthis.getWeeks(value);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"2\":\r\n\t\t\t\tconst param = value + season;\r\n\t\t\t\tthis.store.getSeasonDetails(param);\r\n\t\t\t\tthis.store.getAtts({\r\n\t\t\t\t\ttype: 'season',\r\n\t\t\t\t\tcode: param\r\n\t\t\t\t})\r\n\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\ttype: 'season',\r\n\t\t\t\t\tcode: param\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"3\":\r\n\t\t\t\tthis.store.getYearDetails(value);\r\n\t\t\t\tthis.store.getAtts({\r\n\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\tcode: value\r\n\t\t\t\t})\r\n\t\t\t\tthis.store.getComments({\r\n\t\t\t\t\ttype: 'year',\r\n\t\t\t\t\tcode: value\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除一行\r\n\thandleDelete = (id) => {\r\n\t\tconst {seasonData, yearData} = this.store;\r\n\t\tconst {key} = this.state;\r\n\t\tif (key == \"2\") {\r\n           const dataSource = JSON.parse(JSON.stringify(seasonData));\r\n\t\t   const data = dataSource.filter(item => item.id !== id)\r\n           this.saveData(\"season\", data);\r\n\t\t} else {\r\n\t\t\tconst dataSource2 = JSON.parse(JSON.stringify(yearData));\r\n\t\t\tconst data2 = dataSource2.filter(item => item.id !== id)\r\n\t\t\tthis.saveData(\"year\", data2);\r\n\t\t}\r\n\t}\r\n\r\n\t// 切换\r\n\ttoggle = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: !this.state.visible\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {key, years, value, weekAddData, yearAddData, season, visible} = this.state;\r\n\t\tconst {ossData, activeweeks, weekData, monthData, seasonData, yearData, okrAtts, okrComments, userName} = this.store;\r\n\t\tconst menu = (\r\n\t\t\t<Scrollbars style={{height: 200}}>\r\n\t\t\t\t<Menu className=\"con_menu\" onClick={this.handleYearClick}>\r\n\t\t\t\t\t{years.map((item, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Menu.Item key={'year' + index}>\r\n\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Menu>\r\n\t\t\t</Scrollbars>\r\n\t\t);\r\n\t\tconst operations = (<div style={{\r\n\t\t\twidth: '100%',\r\n\t\t\theight: 'auto',\r\n\t\t\tmarginRight: '30px'\r\n\t\t}}>\r\n\t\t\t<span style={{fontSize: '14px', fontWeight: '700', marginRight: '30px'}}>OKR评定 - {userName}</span>\r\n\t\t\t<Dropdown overlay={menu}>\r\n\t\t\t\t<Button style={{width: 82}}>\r\n\t\t\t\t\t{value} <Icon type=\"down\"/>\r\n\t\t\t\t</Button>\r\n\t\t\t</Dropdown>\r\n\t\t\t<Button className=\"ml30\" type=\"primary\" onClick={this.handleSubmit}>保存</Button>\r\n\t\t</div>);\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '优先级',\r\n\t\t\t\tdataIndex: 'orders',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\twidth: '130px',\r\n\t\t\t\ttype: 'number'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: <div>关键成果<br/>（key Result）</div>,\r\n\t\t\t\tdataIndex: 'keyResult',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '对应工作事项',\r\n\t\t\t\tdataIndex: 'workItems',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '与关键成果关联说明',\r\n\t\t\t\tdataIndex: 'associationDescription',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '执行结果',\r\n\t\t\t\tdataIndex: 'results',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst JiColumns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '序号',\r\n\t\t\t\tdataIndex: 'orders',\r\n\t\t\t\talign: 'center',\r\n\t\t\t\twidth: '80px',\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.handleDelete(record.id)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\tleft: '-10px',\r\n\t\t\t\t\t\t\t\t\ttop: '50%',\r\n\t\t\t\t\t\t\t\t\ttransform: 'translateY(-50%)'\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: <div>我的目标Objectives<br/>（我们想要实现什么）</div>,\r\n\t\t\t\tdataIndex: 'objective',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: <div>一致性<br/>（与上一级OKR一致性）</div>,\r\n\t\t\t\tdataIndex: 'uniformity',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: <div>关键成果<br/>（Key Result）</div>,\r\n\t\t\t\tdataIndex: 'keyResult',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '依赖谁',\r\n\t\t\t\tdataIndex: 'depend',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '依赖关系描述',\r\n\t\t\t\tdataIndex: 'dependencyDescription',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle:  <div>信心指数<br/>（1-10）</div>,\r\n\t\t\t\tdataIndex: 'confidenceLevel',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'number'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成情况描述',\r\n\t\t\t\tdataIndex: 'completion',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'textarea'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '最终打分',\r\n\t\t\t\tdataIndex: 'score',\r\n\t\t\t\teditable: true,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\ttype: 'number'\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst attachments = okrAtts != null ? okrAtts.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\treturn (\r\n\t\t\t<Row className=\"pr\">\r\n\t\t\t\t<Tooltip title={visible?\"展开\":\"收起\"}>\r\n\t\t\t\t\t<Icon type={visible?\"double-left\":\"double-right\"}\r\n\t\t\t\t\t      onClick={this.toggle}\r\n\t\t\t\t\t      placement=\"top\"\r\n\t\t\t\t\t      style={{\r\n\t\t\t\t\t\t      position: 'absolute',\r\n\t\t\t\t\t\t      top: visible?\"10px\":'8px',\r\n\t\t\t\t\t\t      left: visible?\"-15px\":0,\r\n\t\t\t\t\t\t      cursor: 'pointer',\r\n\t\t\t\t\t\t      zIndex: 2\r\n\t\t\t\t\t      }}/>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t\t<Col span=\"5\" className={visible?\"hidden\":\"\"}>\r\n\t\t\t\t\t<Affix offsetTop={60}>\r\n\t\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\t\tautoHide\r\n\t\t\t\t\t\t\tautoHideTimeout={1000}\r\n\t\t\t\t\t\t\tautoHideDuration={200}\r\n\t\t\t\t\t\t\tautoHeight\r\n\t\t\t\t\t\t\tautoHeightMin={0}\r\n\t\t\t\t\t\t\tautoHeightMax={'calc(100vh - 180px)'}\r\n\t\t\t\t\t\t\tthumbMinSize={30}\r\n\t\t\t\t\t\t\tuniversal={true}>\r\n\t\t\t\t\t\t\t<DingtalkTree\r\n\t\t\t\t\t\t\t\tuserSearch={true}\r\n\t\t\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tshowLine={true}\r\n\t\t\t\t\t\t\t\thandleSelect={this.handleSelect}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t</Affix>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span={visible?\"24\":\"19\"} style={{borderLeft: visible?'none':'1px solid #EBEBEB', minHeight: '350px', paddingLeft: visible?0:'15px'}}>\r\n\t\t\t\t\t<Tabs size={\"small\"} className=\"okr_tabs\" activeKey={key} onChange={this.callback}\r\n\t\t\t\t\t      tabBarExtraContent={operations}>\r\n\t\t\t\t\t\t<TabPane tab=\"周\" key=\"1\">\r\n\t\t\t\t\t\t\t{/*周*/}\r\n\t\t\t\t\t\t\t<h4 style={{\r\n\t\t\t\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\t\t\t\tfontWeight: '400',\r\n\t\t\t\t\t\t\t\tmarginBottom: '15px'\r\n\t\t\t\t\t\t\t}}>{mobx.toJS(activeweeks).weekMonthName}</h4>\r\n\t\t\t\t\t\t\t<div className=\"clearfix mb10\">\r\n\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" title={\"上一周\"}>\r\n\t\t\t\t\t\t\t\t\t<Icon onClick={this.handleWeekClick.bind(this, '1')} className=\"fl pointer\"\r\n\t\t\t\t\t\t\t\t\t      style={{fontSize: '24px'}} type=\"step-backward\"/>\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" title={\"下一周\"}>\r\n\t\t\t\t\t\t\t\t\t<Icon onClick={this.handleWeekClick.bind(this, '2')} className=\"fr pointer\"\r\n\t\t\t\t\t\t\t\t\t      style={{fontSize: '24px'}} type=\"step-forward\"/>\r\n\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<OkrTable\r\n\t\t\t\t\t\t\t\ttype=\"week\"\r\n\t\t\t\t\t\t\t\tsaveData={this.saveData}\r\n\t\t\t\t\t\t\t\tdataSource={mobx.toJS(weekData)}\r\n\t\t\t\t\t\t\t\taddData={weekAddData}\r\n\t\t\t\t\t\t\t\tcolumns={columns}/>\r\n\t\t\t\t\t\t\t<hr style={{marginTop: '0'}}/>\r\n\t\t\t\t\t\t\t{/*月*/}\r\n\t\t\t\t\t\t\t<h4 style={{\r\n\t\t\t\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\t\t\t\tfontWeight: '400',\r\n\t\t\t\t\t\t\t\tmarginBottom: '15px'\r\n\t\t\t\t\t\t\t}}>{mobx.toJS(activeweeks).monthName}</h4>\r\n\t\t\t\t\t\t\t<OkrTable\r\n\t\t\t\t\t\t\t\ttype=\"month\"\r\n\t\t\t\t\t\t\t\tsaveData={this.saveData}\r\n\t\t\t\t\t\t\t\tdataSource={mobx.toJS(monthData)}\r\n\t\t\t\t\t\t\t\taddData={weekAddData}\r\n\t\t\t\t\t\t\t\tcolumns={columns}/>\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t\t<TabPane tab=\"季\" key=\"2\">\r\n\t\t\t\t\t\t\t<Radio.Group className=\"mb15\" onChange={this.onChangeRadio} value={season}\r\n\t\t\t\t\t\t\t             buttonStyle=\"solid\">\r\n\t\t\t\t\t\t\t\t<Radio.Button value=\"01\">一季度</Radio.Button>\r\n\t\t\t\t\t\t\t\t<Radio.Button value=\"02\">二季度</Radio.Button>\r\n\t\t\t\t\t\t\t\t<Radio.Button value=\"03\">三季度</Radio.Button>\r\n\t\t\t\t\t\t\t\t<Radio.Button value=\"04\">四季度</Radio.Button>\r\n\t\t\t\t\t\t\t</Radio.Group>\r\n\t\t\t\t\t\t\t<OkrTable\r\n\t\t\t\t\t\t\t\ttype=\"season\"\r\n\t\t\t\t\t\t\t\tsaveData={this.saveData}\r\n\t\t\t\t\t\t\t\tdataSource={mobx.toJS(seasonData)}\r\n\t\t\t\t\t\t\t\taddData={yearAddData}\r\n\t\t\t\t\t\t\t\tcolumns={JiColumns}/>\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t\t<TabPane tab=\"年\" key=\"3\">\r\n\t\t\t\t\t\t\t<OkrTable\r\n\t\t\t\t\t\t\t\ttype=\"year\"\r\n\t\t\t\t\t\t\t\tsaveData={this.saveData}\r\n\t\t\t\t\t\t\t\tdataSource={mobx.toJS(yearData)}\r\n\t\t\t\t\t\t\t\taddData={yearAddData}\r\n\t\t\t\t\t\t\t\tcolumns={JiColumns}/>\r\n\t\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<Form.Item label=\"附件\" colon={false}>\r\n\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<ZjComment\r\n\t\t\t\t\t\tonRef={this.onCommentRef}\r\n\t\t\t\t\t\tokrComments={mobx.toJS(okrComments)}\r\n\t\t\t\t\t\tsaveComment={this.saveComment}\r\n\t\t\t\t\t\tdelComment={this.delComment}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/bpm/Okr.js","/*\r\n* 附件组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\n\r\nfunction getBase64(img, callback) {\r\n\tconst reader = new FileReader();\r\n\treader.addEventListener('load', () => callback(reader.result));\r\n\treader.readAsDataURL(img);\r\n}\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n\t\t\t\taccess_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n\t\t\t\tstsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.props.ossData) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: this.props.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: this.props.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: this.props.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet arr = [];\r\n\t\t\tarray.length && array.map((item, index) => {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\tpid: this.props.pid,\r\n\t\t\t\t\tprojectId: this.props.projectId,\r\n\t\t\t\t\tid: item.id\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tthis.props.saveAttachment(arr);\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\tlet id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\tthis.props.delNode(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tfileList: [...oldFileList, ...newFileList]\r\n\t\t});\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\tif (!true) {\r\n\t\t\tmessage.error('You can only upload JPG file!');\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fileList} = this.state;\r\n\t\tconst props = {\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: this.props.multiple == undefined ? true : this.props.multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tlistType: 'text',\r\n\t\t\tclassName: 'upload-list-inline',\r\n\t\t\tdisabled: this.props.disabled,\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t{fileList.length >= 1 && this.props.multiple == false ? null :\r\n\t\t\t\t\t<Icon style={{fontSize: '25px', color: '#53B3E5'}} type=\"cloud-upload\"/>}\r\n\t\t\t</Upload>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/MyUpload.js","/*\r\n* 项目看板store\r\n*/\r\nimport {observable, action} from 'mobx';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport Schemas from \"@/utils/Schemas/bpm\";\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport authorizationSchemas from \"@/utils/Schemas/authorization\";\r\nimport bpmSchemas from \"@/utils/Schemas/bpm\";\r\nimport okrSchemas from \"@/utils/Schemas/okr\";\r\n\r\nclass BpmStore {\r\n\t@observable maxHeight=0;\r\n\t@observable projectBoardList = [];  // 项目看板列表(未完成)\r\n\t@observable projectBoardParams = {\r\n\t\tbeginTime: moment().startOf('year').valueOf(),\r\n\t\tendTime:moment().endOf(\"year\").valueOf(),\r\n\t\ttext:''\r\n\t};\r\n    @observable allProjectList = []; // 全部项目明细列表 state 完成100，关闭200 阶段1-7\r\n    @observable allProjectParams = { //明细查询参数\r\n\t\tbeginTime: moment().startOf('year').valueOf(),\r\n\t\tendTime:moment().endOf(\"year\").valueOf(),\r\n\t\ttext:'',\r\n\t\tproducts:[],\r\n\t\tstate:[],\r\n        masterIds:[],\r\n        pageIndex:1,\r\n\t\tpageSize:10\r\n\t};\r\n\t@observable allProjectTotal = 0;\r\n\t@observable myTaskRunningNum = 0;\r\n\t@observable dealyWarnningList = []; //进度延迟预警列表\r\n\r\n    @observable productProportion = []; //产品占比\r\n    @observable topContractAmount = []; //项目订单排名\r\n    @observable currentTaskList = []; //获取当前任务列表\r\n    @observable currentTaskParams = { //获取当前任务列表参数 当前（state1延迟 2我的）任务列表(可以是主也可以是子任务 3 我的完成)\r\n\t\tstate:1,\r\n        pageIndex:1,\r\n\t\tpageSize:10\r\n\t};\r\n\r\n\t@observable dealyWarnningParams = { //获取当前任务列表参数 当前（state1延迟 2我的）任务列表(可以是主也可以是子任务 3 我的完成)\r\n\t\tstate:1,\r\n        pageIndex:1,\r\n\t\tpageSize:10\r\n\t};\r\n\t@observable hasMore = true;\r\n\r\n\t@observable currentTaskTotal = 0;\r\n\t//@observable unTaskTotal = 0;  // 未完成\r\n\r\n    @observable deliverRate=null; //交付完成率\r\n\t@observable moneyBackRate=null; //回款完成率\r\n\r\n\t@observable projectStage=[  // 项目的不同阶段\r\n\t\t{\"stageId\":\"1\", \"name\":\"项目信息\"},\r\n\t\t{\"stageId\":\"9\", \"name\":\"项目评估\"},\r\n\t\t{\"stageId\":\"2\", \"name\":\"方案设计\"},\r\n\t\t{\"stageId\":\"3\", \"name\":\"投标准备\"},\r\n\t\t{\"stageId\":\"4\", \"name\":\"合同签订\"},\r\n\t\t{\"stageId\":\"5\", \"name\":\"实施过程\"},\r\n\t\t{\"stageId\":\"6\", \"name\":\"交付验收\"},\r\n\t\t{\"stageId\":\"10\", \"name\":\"实施交付\"},\r\n\t\t{\"stageId\":\"7\", \"name\":\"开票收款\"},\r\n\t\t{\"stageId\":\"8\", \"name\":\"产品设计\"},\r\n\t];\r\n\r\n\t@observable projectStatus=[  // 项目状态\r\n\t\t{\"text\":\"项目信息\", \"value\":\"项目信息\"},\r\n\t\t{\"text\":\"项目评估\", \"value\":\"项目评估\"},\r\n\t\t{\"text\":\"方案设计\", \"value\":\"方案设计\"},\r\n\t\t{\"text\":\"投标准备\", \"value\":\"投标准备\"},\r\n\t\t{\"text\":\"合同签订\", \"value\":\"合同签订\"},\r\n\t\t{\"text\":\"实施过程\", \"value\":\"实施过程\"},\r\n\t\t{\"text\":\"交付验收\", \"value\":\"交付验收\"},\r\n\t\t{\"text\":\"实施交付\", \"value\":\"实施交付\"},\r\n\t\t{\"text\":\"开票收款\", \"value\":\"开票收款\"},\r\n\t\t{\"text\":\"全部完成\", \"value\":\"全部完成\"},\r\n\t\t{\"text\":\"产品设计\", \"value\":\"产品设计\"},\r\n\t\t{\"text\":\"中途关闭\", \"value\":\"中途关闭\"},\r\n\t];\r\n\r\n\t@observable productTyleList = [];\r\n\t@observable masterList = [];\r\n\t@observable masterIds = [];\r\n\t@observable projectBoardListDone = false;\r\n\r\n\r\n    // 项目看板列表(未完成)查询\r\n\t@action\r\n\tgetProjectBoardList() {\r\n\t\treturn requestPost('getProjectBoardList', Config.bpm.getProjectBoardList, Schemas.bpm.getProjectBoardList, this.projectBoardParams).then((res) => {\r\n\t\t\tthis.projectBoardList = Object.assign([], res);\r\n\t\t\tthis.projectBoardListDone = true;\r\n\r\n\t\t});\r\n    }\r\n\r\n    // 全部项目明细列表查询\r\n\t@action\r\n\tgetAllProjectList() {\r\n\t\treturn requestPost('getAllProjectList', Config.bpm.getAllProjectList, Schemas.bpm.getAllProjectList, this.allProjectParams).then((res) => {\r\n\t\t\tthis.allProjectList =  Object.assign([], typeof(res.body)!==\"undefined\" ? res.body.map((item, index)=>{\r\n\t\t\t\treturn item\r\n\t\t\t}):[]);\r\n\t\t\tthis.allProjectParams.pageIndex = res.pageIndex;\r\n\t\t\tthis.allProjectParams.pageSize = res.pageSize;\r\n\t\t\tthis.allProjectTotal = res.totalCount;\r\n\t\t});\r\n    }\r\n\r\n    // 获取产品占比\r\n\t@action\r\n\tgetProductProportion() {\r\n\t\treturn requestPost('getProductProportion', Config.bpm.getProductProportion, Schemas.bpm.getProductProportion).then((res) => {\r\n\t\t\tthis.productProportion = Object.assign([], res);\r\n\t\t});\r\n    }\r\n\r\n    // 获取项目订单排名\r\n\t@action\r\n\tgetTopContractAmountList() {\r\n\t\treturn requestPost('getTopContractAmountList', Config.bpm.getTopContractAmountList, Schemas.bpm.getTopContractAmountList).then((res) => {\r\n\t\t\tthis.topContractAmount = Object.assign([], res);\r\n\t\t});\r\n    }\r\n\r\n    // 获取当前任务（state1延迟 2我的）任务列表(可以是主也可以是子任务 3 我的完成)\r\n\t@action\r\n\tgetCurrentTaskList() {\r\n\t\treturn requestPost('getCurrentTaskList', Config.bpm.getCurrentTaskList, Schemas.bpm.getCurrentTaskList, this.currentTaskParams).then((res) => {\r\n\t\t\tthis.currentTaskList = Object.assign([], res.body);\r\n\t\t\tif(this.currentTaskParams.state==1) { //进度延迟预警\r\n\t\t\t\tthis.dealyWarnningList = Object.assign([], res.body);\r\n\t\t\t}\r\n\r\n\t\t\t// if(this.currentTaskParams.state==2) {\r\n\t\t\t// \temitter.emit(\"getMytaskNum\", res.totalCount);\r\n\t\t\t// }\r\n\r\n\t\t\tthis.currentTaskParams.pageIndex = res.pageIndex;\r\n\t\t\tthis.currentTaskParams.pageSize = res.pageSize;\r\n\t\t\tthis.currentTaskTotal = res.totalCount;\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取当前任务（state1延迟 2我的）任务列表(可以是主也可以是子任务 3 我的完成)\r\n\t@action\r\n\tgetWarnningList() {\r\n\t\treturn requestPost('getCurrentTaskList', Config.bpm.getCurrentTaskList, Schemas.bpm.getCurrentTaskList, this.dealyWarnningParams).then((res) => {\r\n\t\t\tif (res && res['body'].length > 0) {\r\n\t\t\t\tlet tempData = this.dealyWarnningList;\r\n\t\t\t\tthis.dealyWarnningList = tempData.concat(res['body'])\r\n\t\t\t\tthis.dealyWarnningParams.pageIndex = this.dealyWarnningParams.pageIndex+1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.hasMore = false;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n    // 获取进行中/已完成总数\r\n    @action\r\n    getListData(param) {\r\n        return requestPost('getCurrentTaskList', Config.bpm.getCurrentTaskList, Schemas.bpm.getCurrentTaskList, param).then((res) => {\r\n            return res;\r\n        });\r\n    }\r\n\r\n    // 获取交付完成率\r\n\t@action\r\n\tgetDeliverRate() {\r\n\t\treturn requestPost('getDeliverRate', Config.bpm.getDeliverRate, Schemas.bpm.getDeliverRate).then((res) => {\r\n\t\t\tthis.deliverRate = res;\r\n\t\t});\r\n    }\r\n\r\n    // 获取回款完成率\r\n\t@action\r\n\tgetMoneyBackRate() {\r\n\t\treturn requestPost('getMoneyBackRate', Config.bpm.getMoneyBackRate, Schemas.bpm.getMoneyBackRate).then((res) => {\r\n\t\t\tthis.moneyBackRate = res;\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取我的任务数\r\n\t@action\r\n\tgetMyTaskCount() {\r\n\t\treturn requestPost('getMyTaskCount', Config.bpm.getMyTaskCount, Schemas.bpm.getMyTaskCount).then((res) => {\r\n\t\t\temitter.emit(\"getMytaskNum\",  res);\r\n\t\t});\r\n\t}\r\n\r\n\t@observable products = [];\r\n\t// 获取产品类型\r\n\t@action\r\n\tgetProductTypeList() {\r\n\t\treturn requestPost('getProductTypeList', Config.bpm.getProductTypeList, Schemas.bpm.getProductTypeList).then((res) => {\r\n\t\t\tthis.productTyleList = Object.assign([], res.map(item=>{\r\n\t\t\t\treturn {text:item.typeName, value:item.typeName}\r\n\t\t\t}));\r\n\t\t\tthis.products = Object.assign([], res)\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取负责人列表\r\n\t@action\r\n\tgetMasterList() {\r\n\t\treturn requestPost('getMasterList', Config.bpm.getMasterList, Schemas.bpm.getMasterList).then((res) => {\r\n\t\t\tthis.masterList = Object.assign([], res.map(item=>{\r\n\t\t\t\treturn {text:item.userName, value:item.userName}\r\n\t\t\t}));\r\n\t\t\tthis.masterIds =  Object.assign([], res.map(item=>{\r\n\t\t\t\treturn Object.assign({}, {id:item.userId, typeName:item.userName})\r\n\t\t\t}));\r\n\t\t});\r\n\t}\r\n\r\n\t@observable personList=[];// 人员\r\n\t// 获取人员数据\r\n\t@action\r\n\tgetUserInfoListByRoleCode() {\r\n\t\treturn requestPost('getUserInfoListByRoleCode', Config.authorization.getUserInfoListByRoleCode, authorizationSchemas.authorization.getUserInfoListByRoleCode, {\r\n\t\t\tappId: \"bocspace\",\r\n\t\t\tcode: \"bocspace.group\",\r\n\t\t\tpageIndex: 1,     // 暂时处理\r\n\t\t\tpageSize: 10000,    // 暂时这样处理\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.personList = Object.assign([], res.body);\r\n\t\t});\r\n\t}\r\n\r\n\t@observable projectList= []; //日历项目\r\n\t// 日历项目列表\r\n\t@action\r\n\tgetCalendarProjectList() {\r\n\t\treturn requestPost('getCalendarProjectList', Config.bpm.getCalendarProjectList, Schemas.bpm.getCalendarProjectList, {}).then((res)=>{\r\n\t\t\tthis.projectList = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t@observable yearMonth = ''; // 当前月份\r\n\t@observable personMonthTask = []\r\n\t// 人员列表\r\n\t@action\r\n\tgetPersonMonthTaskState(param) {\r\n\t\treturn requestPost('getPersonMonthTaskState', Config.bpm.getPersonMonthTaskState, Schemas.bpm.getPersonMonthTaskState, {\r\n\t\t\tyearMonth: this.yearMonth,\r\n\t\t\tuserId: param\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.personMonthTask = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t@observable projectStages = []; // 项目信息\r\n\t// 获取项目全部状态信息通过ids\r\n\t@action\r\n\tgetProjectStagesByIds(param) {\r\n\t\treturn requestPost('getProjectStagesByIds', Config.bpm.getProjectStagesByIds, Schemas.bpm.getProjectStagesByIds, {\r\n\t\t\tyearMonth: this.yearMonth,\r\n\t\t\tprojectIds: param\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.projectStages = Object.assign([], res.data==null?[]:res.data);\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取钉钉的部门\r\n\t@action\r\n\tgetDepartment() {\r\n\t\treturn requestPost('getDepartment', Config.authorization.getDepartment, authorizationSchemas.authorization.getDepartment, {\r\n\t\t\tappid: 'bocspace',\r\n\t\t\tpid: '1'\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取钉钉部门的用户列表\r\n\t@action\r\n\tgetUserInfoListByDingtalk(param) {\r\n\t\treturn requestPost('getUserInfoListByDingtalk', Config.authorization.getUserInfoListByDingtalk, authorizationSchemas.authorization.getUserInfoListByDingtalk, {\r\n\t\t\tappid: 'bocspace',\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 100,\r\n\t\t\tdepId: param\r\n\t\t});\r\n\t}\r\n    // 获取全部部门与人员\r\n\t@action\r\n\tgetDepartmentAndUsers(name) {\r\n\t\treturn requestPost('getDepartmentAndUsers', Config.authorization.getDepartmentAndUsers, authorizationSchemas.authorization.getDepartmentAndUsers, {\r\n\t\t\tappid: 'bocspace',\r\n\t\t\tname: name\r\n\t\t});\r\n\t}\r\n\r\n\t@observable personParams = {  // 参数\r\n\t\tids: [],\r\n\t\tbeginTime: moment().startOf('day').valueOf(),\r\n\t    endTime: moment().endOf(\"day\").valueOf()\r\n\t}\r\n\t@observable personResources = []; // 日程数据\r\n\t// 人员日程排期\r\n\t@action\r\n\tgetPersonScheduleResources() {\r\n\t\treturn requestPost('getPersonScheduleResources', Config.bpm.getPersonScheduleResources, Schemas.bpm.getPersonScheduleResources, Object.assign({}, this.personParams))\r\n\t\t\t  .then((res)=>{\r\n\t\t\t\t  this.personResources = Object.assign([], res.data==null?[]:res.data);\r\n\t\t\t  });\r\n\t}\r\n\r\n\t@observable state = [];\r\n\t// 获取产品类型\r\n\t@action\r\n\tgetAllStages() {\r\n\t\treturn requestPost('getAllStages', Config.bpm.getAllStages, Schemas.bpm.getAllStages).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.state = Object.assign([], res.map((item)=> {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\ttypeName: item.stageName\r\n\t\t\t\t\t})\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t@observable ossData = {\r\n\t\t\"securityToken\": \"\",\r\n\t\t\"accessKeyId\": \"\",\r\n\t\t\"accessKeySecret\": \"\",\r\n\t\t\"expiration\": null\r\n\t}; // 阿里云上传参数\r\n\r\n\t// 获取大文件上传sts\r\n\tgetSts() {\r\n\t\treturn requestPost('getSts', Config.bpm.getSts, bpmSchemas.bpm.getSts, {})\r\n\t\t.then((res) => {\r\n\t\t\tlet str = typeof res == \"string\" ? JSON.parse(res) : res;\r\n\t\t\tif (str) {\r\n\t\t\t\tthis.ossData = Object.assign({}, str);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t@observable weeksData = []; // 当年所有的周数据\r\n\t@observable activeweeks = {}; // 当前周\r\n\t@observable userId = \"\"; // 人员id\r\n\t@observable userName = \"\"; // 人员name\r\n\t@observable weekData = []; // 当前周数据\r\n\t@observable monthData = []; // 当前月数据\r\n\t@observable seasonData = []; // 当前季数据\r\n\t@observable yearData = []; // 当前年数据\r\n\t@observable defaultWeeksData = []; // 当前周数据默认\r\n\t@observable okrAtts = []; // okr附件\r\n\t@observable okrComments = []; // okr评论\r\n\r\n\t// 返回查询年的周数据\r\n\tgetWeeks(param) {\r\n\t\treturn requestPost('getWeeks', Config.okr.getWeeks, okrSchemas.okr.getWeeks, {\r\n\t\t\tyear: param\r\n\t\t})\r\n\t}\r\n\r\n    // 获取周明细\r\n\tgetWeekDetails(param) {\r\n\t\treturn requestPost('getWeekDetails', Config.okr.getWeekDetails, okrSchemas.okr.getWeekDetails, {\r\n\t\t\tcode: param,\r\n\t\t\tuserId: this.userId\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.weekData = Object.assign([], res);\r\n\t\t\tthis.defaultWeeksData = Object.assign([], res);;\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取月明细\r\n\tgetMonthDetails(param) {\r\n\t\treturn requestPost('getMonthDetails', Config.okr.getMonthDetails, okrSchemas.okr.getMonthDetails, {\r\n\t\t\tcode: param,\r\n\t\t\tuserId: this.userId\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.monthData = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取季明细\r\n\tgetSeasonDetails(param) {\r\n\t\treturn requestPost('getSeasonDetails', Config.okr.getSeasonDetails, okrSchemas.okr.getSeasonDetails, {\r\n\t\t\tcode: param,\r\n\t\t\tuserId: this.userId\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.seasonData = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取年明细\r\n\tgetYearDetails(param) {\r\n\t\treturn requestPost('getYearDetails', Config.okr.getYearDetails, okrSchemas.okr.getYearDetails, {\r\n\t\t\tcode: param,\r\n\t\t\tuserId: this.userId\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.yearData = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存周明细\r\n\tsaveWeekDetails() {\r\n\t\treturn requestPost('saveWeekDetails', Config.okr.saveWeekDetails, okrSchemas.okr.saveWeekDetails, {\r\n\t\t\tlist: this.weekData,\r\n\t\t\tcode: this.activeweeks.id,\r\n\t\t\tuserId: this.userId\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存月明细\r\n\tsaveMonthDetails() {\r\n\t\treturn requestPost('saveMonthDetails', Config.okr.saveMonthDetails, okrSchemas.okr.saveMonthDetails,{\r\n\t\t\tlist: this.monthData,\r\n\t\t\tcode: this.activeweeks.month,\r\n\t\t\tuserId: this.userId\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存季明细\r\n\tsaveSeasonDetails(param) {\r\n\t\treturn requestPost('saveSeasonDetails', Config.okr.saveSeasonDetails, okrSchemas.okr.saveSeasonDetails, {\r\n\t\t\tlist: this.seasonData,\r\n\t\t\tcode: param,\r\n\t\t\tuserId: this.userId\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存年明细\r\n\tsaveYearDetails(param) {\r\n\t\treturn requestPost('saveYearDetails', Config.okr.saveYearDetails, okrSchemas.okr.saveYearDetails, {\r\n\t\t\tlist: this.yearData,\r\n\t\t\tcode: param,\r\n\t\t\tuserId: this.userId\r\n\t\t})\r\n\t}\r\n\r\n\t// 获取评论的附件列表\r\n\tgetAtts(params) {\r\n\t\treturn requestPost('getAtts', Config.okr.getAtts, okrSchemas.okr.getAtts, {\r\n\t\t\ttype: params.type,\r\n\t\t\tcode: params.code,\r\n\t\t\tuserId: this.userId\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.okrAtts = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t// 获取评论内容\r\n\tgetComments(params) {\r\n\t\treturn requestPost('getComments', Config.okr.getComments, okrSchemas.okr.getComments, {\r\n\t\t\ttype: params.type,\r\n\t\t\tcode: params.code,\r\n\t\t\tuserId: this.userId\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.okrComments = Object.assign([], res);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存附件\r\n\tsaveAtt(params) {\r\n\t\treturn requestPost('saveAtts', Config.okr.saveAtts, okrSchemas.okr.saveAtts, {\r\n\t\t\ttype: params.type,\r\n\t\t\tcode: params.code,\r\n\t\t\tuserId: this.userId,\r\n\t\t\tattachments: params.attachments\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存评论\r\n\tsaveComment(params) {\r\n\t\treturn requestPost('saveComment', Config.okr.saveComment, okrSchemas.okr.saveComment, {\r\n\t\t\ttype: params.type,\r\n\t\t\tcode: params.code,\r\n\t\t\tuserId: this.userId,\r\n\t\t\tcomment: params.comment\r\n\t\t})\r\n\t}\r\n\r\n\t// 删除附件\r\n\tdelAtt(params) {\r\n\t\treturn requestPost('delAtt', Config.okr.delAtt, okrSchemas.okr.delAtt, {\r\n\t\t\ttype: params.type,\r\n\t\t\tcode: params.code,\r\n\t\t\tuserId: this.userId,\r\n\t\t\tattachmentId: params.attachmentId\r\n\t\t})\r\n\t}\r\n\r\n\t// 删除评论\r\n\tdelComment(params) {\r\n\t\treturn requestPost('delComment', Config.okr.delComment, okrSchemas.okr.delComment, {\r\n\t\t\ttype: params.type,\r\n\t\t\tcode: params.code,\r\n\t\t\tuserId: this.userId,\r\n\t\t\tcommentId: params.commentId\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport default BpmStore;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/bpm/BpmStore.js","let Config = {\r\n// OKR评定系统\r\n  okr: {\r\n    getWeeks: `query($year: Int) {\r\n\t\tgetWeeks(year: $year)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\tname\r\n\t\t\tmonth\r\n\t\t\tmonthName\r\n\t\t\tisDefault\r\n\t\t\tweekMonthName\r\n\t\t}\r\n\t}`, // 返回查询年的周数据\r\n\r\n    getWeekDetails: `query($code: Int, $userId: String) {\r\n\t\tgetWeekDetails(code: $code, userId: $userId)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\tweekId\r\n\t\t\tuserId\r\n\t\t\torders\r\n\t\t\tkeyResult\r\n\t\t\tworkItems\r\n\t\t\tassociationDescription\r\n\t\t\tresults\r\n\t\t}\r\n\t}`, // 获取周明细\r\n\r\n    getMonthDetails: `query($code: Int, $userId: String) {\r\n\t\tgetMonthDetails(code: $code, userId: $userId)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\tmonthId\r\n\t\t\tuserId\r\n\t\t\torders\r\n\t\t\tkeyResult\r\n\t\t\tworkItems\r\n\t\t\tassociationDescription\r\n\t\t\tresults\r\n\t\t}\r\n\t}`, // 获取月明细\r\n\r\n    getSeasonDetails: `query($code: Int, $userId: String) {\r\n\t\tgetSeasonDetails(code: $code, userId: $userId)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\tseasonId\r\n\t\t\tuserId\r\n\t\t\torders\r\n\t\t\tobjective\r\n\t\t\tuniformity\r\n\t\t\tkeyResult\r\n\t\t\tdepend\r\n\t\t\tdependencyDescription\r\n\t\t\tconfidenceLevel\r\n\t\t\tcompletion\r\n\t\t\tscore\r\n\t\t}\r\n\t}`, // 获取季明细\r\n\r\n    getYearDetails: `query($code: Int, $userId: String) {\r\n\t\tgetYearDetails(code: $code, userId: $userId)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\tyearId\r\n\t\t\tuserId\r\n\t\t\torders\r\n\t\t\tobjective\r\n\t\t\tuniformity\r\n\t\t\tkeyResult\r\n\t\t\tdepend\r\n\t\t\tdependencyDescription\r\n\t\t\tconfidenceLevel\r\n\t\t\tcompletion\r\n\t\t\tscore\r\n\t\t}\r\n\t}`, // 获取年明细\r\n\r\n    saveWeekDetails: `mutation($list: [InputWeekDetail], $code: Int, $userId: String) {\r\n\t\tsaveWeekDetails(list: $list, code: $code, userId: $userId)\r\n\t}`, // 保存周明细\r\n\r\n    saveMonthDetails: `mutation($list: [InputMonthDetail], $code: Int, $userId: String) {\r\n\t\tsaveMonthDetails(list: $list, code: $code, userId: $userId)\r\n\t}`, // 保存月明细\r\n\r\n    saveSeasonDetails: `mutation($list: [InputSeasonDetail], $code: Int, $userId: String) {\r\n\t\tsaveSeasonDetails(list: $list, code: $code, userId: $userId)\r\n\t}`, // 保存季明细\r\n\r\n    saveYearDetails: `mutation($list: [InputYearDetail], $code: Int, $userId: String) {\r\n\t\tsaveYearDetails(list: $list, code: $code, userId: $userId)\r\n\t}`, // 保存年明细\r\n\r\n    getAtts: `query($type: String, $code: Int, $userId: String) {\r\n\t\tgetAtts(type: $type, code: $code, userId: $userId)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\ttype\r\n\t\t\ttypeId\r\n\t\t\ttypeUserId\r\n\t\t\tuserId\r\n\t\t\tfileId\r\n\t\t\tfileName\r\n\t\t\tfileType\r\n\t\t\tfilePath\r\n\t\t\tcreateTime\r\n\t\t}\r\n\t}`, // 获取评论的附件列表\r\n\r\n    getComments: `query($type: String, $code: Int, $userId: String) {\r\n\t\tgetComments(type: $type, code: $code, userId: $userId)\r\n\t\t\t{\r\n\t\t\tid\r\n\t\t\ttype\r\n\t\t\ttypeId\r\n\t\t\ttypeUserId\r\n\t\t\tuserId\r\n\t\t\ttext\r\n\t\t\tcreateTime\r\n\t\t\tuserName\r\n\t\t}\r\n\t}`, // 获取评论内容\r\n\r\n    saveAtts: `mutation($type: String, $code: Int, $userId: String, $attachments: [InputAttachment]) {\r\n\t\tsaveAtts(type: $type, code: $code, userId: $userId, attachments: $attachments)\r\n\t}`, // 保存附件\r\n\r\n    saveComment: `mutation($type: String, $code: Int, $userId: String, $comment: InputComment) {\r\n\t\tsaveComment(type: $type, code: $code, userId: $userId, comment: $comment)\r\n\t}`, // 保存评论\r\n\r\n    delAtt: `mutation($type: String, $code: Int, $userId: String, $attachmentId: String) {\r\n\t\tdelAtt(type: $type, code: $code, userId: $userId, attachmentId: $attachmentId)\r\n\t}`, // 删除附件\r\n\r\n    delComment: `mutation($type: String, $code: Int, $userId: String, $commentId: String) {\r\n\t\tdelComment(type: $type, code: $code, userId: $userId, commentId: $commentId)\r\n\t}`, // 删除评论\r\n\r\n    getWeekAndMonthDetails: `query($weekCode: Int, $userId: String) {\r\n\t\tgetWeekAndMonthDetails(weekCode: $weekCode, userId: $userId)\r\n\t\t{\r\n\t\t\tweekDetail\r\n\t\t\t{\r\n\t\t\t\tid\r\n\t\t\t\tweekId\r\n\t\t\t\tuserId\r\n\t\t\t\torders\r\n\t\t\t\tkeyResult\r\n\t\t\t\tworkItems\r\n\t\t\t\tassociationDescription\r\n\t\t\t\tresults\r\n\t\t\t}\r\n\t\t\tmonthDetail\r\n\t\t\t{\r\n\t\t\t\tid\r\n\t\t\t\tmonthId\r\n\t\t\t\tuserId\r\n\t\t\t\torders\r\n\t\t\t\tkeyResult\r\n\t\t\t\tworkItems\r\n\t\t\t\tassociationDescription\r\n\t\t\t\tresults\r\n\t\t\t}\r\n\t\t}\r\n\t}`, // 获取周和月明细\r\n\r\n    saveWeekAndMonthDetails: `mutation($weeks: [InputWeekDetail], $months: [InputMonthDetail], $weekCode: Int, $userId: String) {\r\n\t\tsaveWeekAndMonthDetails(weeks: $weeks, months: $months, weekCode: $weekCode, userId: $userId)\r\n\t}`, // 保存周月明细\r\n\r\n  }\r\n}\r\nexport default Config;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Schemas/okr.js","/*\r\n* 钉钉部门树组件\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport {Tree, Input, message} from 'antd';\r\nimport _ from 'lodash';\r\n\r\nconst {TreeNode} = Tree;\r\nconst {Search} = Input;\r\nlet dataList = [];\r\n\r\n@observer\r\nclass DingtalkTree extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\texpandedKeys: [],\r\n\t\t\tautoExpandParent: true,\r\n\t\t\tcheckedKeys: [],\r\n\t\t\ttreeData: [],\r\n\t\t\tsearchValue: '',\r\n\t\t\tfilterTreeData: [], // 过滤树\r\n\t\t\tparent: [], //父节点\r\n\t\t\tselectedKeys: [], // 选中\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// 获取数据\r\n\t\tthis.store.getDepartmentAndUsers(\"\").then((res) => {\r\n\t\t\t// 记录父亲节点\r\n\t\t\tlet parent = [];\r\n\t\t\tres.forEach((item,index)=>{\r\n\t\t\t\tif (item.userInfos == null) {\r\n\t\t\t\t\tparent.push(item.id)\r\n\t\t\t\t} else if (Array.isArray(item.userInfos)) {\r\n\t\t\t\t\tparent.push(item.id)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tres.map((item) => {\r\n\t\t\t\tif (item.userInfos == null) {\r\n\t\t\t\t\t// 删除userInfos == null\r\n\t\t\t\t\titem.key = item.id;\r\n\t\t\t\t\titem.title = item.name;\r\n\t\t\t\t\tdelete item.userInfos;\r\n\t\t\t\t} else if (Array.isArray(item.userInfos)) {\r\n\t\t\t\t\tconst userInfos = item.userInfos;\r\n\t\t\t\t\titem.key = item.id;\r\n\t\t\t\t\titem.title = item.name;\r\n\t\t\t\t\t// 转换userInfos To children\r\n\t\t\t\t\titem.children = userInfos.map(mitem => Object.assign({}, {\r\n\t\t\t\t\t\tkey: mitem.id,\r\n\t\t\t\t\t\ttitle: mitem.realname,\r\n\t\t\t\t\t\tisLeaf: true\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst treeData = this.transFormTree(res);\r\n\t\t\tthis.setState({\r\n\t\t\t\ttreeData: treeData,\r\n\t\t\t\tparent: parent,\r\n\t\t\t\tselectedKeys: this.store.userId!=undefined?[this.store.userId]:[],\r\n\t\t\t\texpandedKeys: this.store.userId!=undefined?[this.store.userId]:[],\r\n\t\t\t}, () => {\r\n\t\t\t\tdataList = []; // 初始化状态\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 将数据转换为json树\r\n\ttransFormTree = (data) => {\r\n\t\tlet result = [];\r\n\t\tif (!Array.isArray(data)) {\r\n\t\t\treturn result\r\n\t\t}\r\n\t\tlet map = {};\r\n\t\tdata.forEach(item => {\r\n\t\t\tmap[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(item => {\r\n\t\t\tlet parent = map[item.parentId];\r\n\t\t\tif (parent) {\r\n\t\t\t\t(parent.children || (parent.children = [])).push(item);\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// 展开\r\n\tonExpand = expandedKeys => {\r\n\t\tthis.setState({\r\n\t\t\texpandedKeys,\r\n\t\t\tautoExpandParent: false,\r\n\t\t});\r\n\t};\r\n\r\n\t// 选中\r\n\tonCheck = (checkedKeys) => {\r\n\t\t// 模糊搜索状态\r\n\t\tconst {searchValue, parent} = this.state;\r\n\t\tlet isSearch = searchValue==null||searchValue==\"\"||searchValue==-1?true:false;  // true 正常选择  false 模糊搜索\r\n        let array = [];\r\n\t\t// 过滤checkedKeys\r\n\t\tif (isSearch==false) {  // 模糊\r\n\t\t\tarray = checkedKeys.filter((item)=>{\r\n\t\t\t \treturn !parent.includes(item)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tarray = checkedKeys;\r\n\t\t}\r\n\t\t// 去重\r\n\t\tlet params = Array.from(new Set([...this.state.checkedKeys, ...array]));\r\n\r\n\t\tthis.setState({checkedKeys: isSearch?array:params}, () => {\r\n\t\t\tconst {userSearch} = this.props;\r\n\t\t\tif (userSearch) { // 是使用\r\n\t\t\t\tlet personParams = JSON.parse(JSON.stringify(this.store.personParams));\r\n\t\t\t\tthis.store.personParams = Object.assign(personParams, {\r\n\t\t\t\t\tids: Object.assign([], this.state.checkedKeys)\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.getPersonScheduleResources();\r\n\t\t\t} else {  // 未使用\r\n\t\t\t\t// 将\r\n\t\t\t\tthis.props.handPersonChange(this.state.checkedKeys);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\trenderTreeNodes = data =>\r\n\t\tdata.map(item => {\r\n\t\t\tlet {searchValue} = this.state;\r\n\t\t\tconst index = item.title.indexOf(searchValue);\r\n\t\t\tconst beforeStr = item.title.substr(0, index);\r\n\t\t\tconst afterStr = item.title.substr(index + searchValue.length);\r\n\t\t\tconst title =\r\n\t\t\t\tindex > -1 ? (\r\n\t\t\t\t\t<span>\r\n              {beforeStr}\r\n\t\t\t\t\t\t<span style={{color: '#f50'}}>{searchValue}</span>\r\n\t\t\t\t\t\t{afterStr}\r\n            </span>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<span>{item.title}</span>\r\n\t\t\t\t);\r\n\r\n\t\t\tif (item.children) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TreeNode title={title} key={item.key} dataRef={item}>\r\n\t\t\t\t\t\t{this.renderTreeNodes(item.children)}\r\n\t\t\t\t\t</TreeNode>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn <TreeNode key={item.key} title={item.title}\r\n\t\t\t                 className={searchValue !== \"\" && item.title.includes(searchValue) ? \"active_search\" : \"\"}\r\n\t\t\t                 isLeaf={item.isLeaf} dataRef={item}/>;\r\n\t\t});\r\n\r\n\tonChange = (e) => {\r\n\t\tconst {userSearch} = this.props;\r\n\t\tconst value = userSearch ? e.target.value : e;  // 是否使用\r\n\t\tconst val = _.trim(value);\r\n\t\tif (val !== '') {  // 模糊搜索name不为空\r\n\t\t\tthis.store.getDepartmentAndUsers(val).then((res) => {\r\n\t\t\t\t// 已选中的keys 筛选中的keys\r\n\t\t\t\tif (Array.isArray(res)) {\r\n\t\t\t\t\tres.map((item) => {\r\n\t\t\t\t\t\tif (item.userInfos == null) {\r\n\t\t\t\t\t\t\t// 删除userInfos == null\r\n\t\t\t\t\t\t\titem.key = item.id;\r\n\t\t\t\t\t\t\titem.title = item.name;\r\n\t\t\t\t\t\t\tdelete item.userInfos;\r\n\t\t\t\t\t\t} else if (Array.isArray(item.userInfos)) {\r\n\t\t\t\t\t\t\tconst userInfos = item.userInfos;\r\n\t\t\t\t\t\t\titem.key = item.id;\r\n\t\t\t\t\t\t\titem.title = item.name;\r\n\t\t\t\t\t\t\t// 转换userInfos To children\r\n\t\t\t\t\t\t\titem.children = userInfos.map(mitem => Object.assign({}, {\r\n\t\t\t\t\t\t\t\tkey: mitem.id,\r\n\t\t\t\t\t\t\t\ttitle: mitem.realname,\r\n\t\t\t\t\t\t\t\tisLeaf: true\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst filterTreeData = this.transFormTree(res);\r\n                    const expandedKeys = dataList.map((item) => {\r\n\t\t\t\t\t\tif (item.title.indexOf(val) > -1) {\r\n\t\t\t\t\t\t\treturn this.getParentKey(item.title, filterTreeData);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\texpandedKeys,\r\n\t\t\t\t\t\tsearchValue: val,\r\n\t\t\t\t\t\tautoExpandParent: true,\r\n\t\t\t\t\t\tfilterTreeData: filterTreeData,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsearchValue: -1,\r\n\t\t\t\tautoExpandParent: false,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tgenerateList = (data) => {\r\n\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\tconst node = data[i];\r\n\t\t\tconst key = node.key;\r\n\t\t\tdataList.push({key, title: node.title});\r\n\t\t\tif (node.children) {\r\n\t\t\t\tthis.generateList(node.children);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetParentKey = (title, tree) => {\r\n\t\tlet parentKey;\r\n\t\tfor (let i = 0; i < tree.length; i++) {\r\n\t\t\tconst node = tree[i];\r\n\t\t\tif (node.children) {\r\n\t\t\t\tif (node.children.some(item => item.title === title)) {\r\n\t\t\t\t\tparentKey = node.key;\r\n\t\t\t\t} else if (this.getParentKey(title, node.children)) {\r\n\t\t\t\t\tparentKey = this.getParentKey(title, node.children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn parentKey;\r\n\t}\r\n\r\n\t// 选中\r\n\tonSelect = (selectedKeys, info) => {\r\n        const {node} = info;\r\n        const {props} = node;\r\n        const {dataRef} = props;\r\n\t\tif (dataRef.parentId==undefined) { // 父亲节点不可点击\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedKeys: Object.assign([], selectedKeys)\r\n\t\t\t},()=>{\r\n\t\t\t\t// 触发右侧事件\r\n\t\t\t\t//console.log('selected', selectedKeys, dataRef);\r\n\t\t\t\tthis.props.handleSelect(dataRef);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t//message.warn(\"请选择人员\")\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {searchValue,treeData, expandedKeys, autoExpandParent, checkedKeys, filterTreeData, selectedKeys} = this.state;\r\n\t\tthis.generateList(treeData);\r\n\t\tconst {userSearch, showLine} = this.props;\r\n\t\tconst data = searchValue==null||searchValue==\"\"||searchValue==-1?treeData:filterTreeData;\r\n\r\n\t\treturn <div>\r\n\t\t\t<div className={userSearch ? \"tc mb10\" : \"hidden\"}>\r\n\t\t\t\t<Search\r\n\t\t\t\t\tplaceholder=\"输入姓名搜索\"\r\n\t\t\t\t\tonChange={(e) => this.onChange(e)}\r\n\t\t\t\t\tstyle={{width: '80%'}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<Tree\r\n\t\t\t\tonExpand={this.onExpand}\r\n\t\t\t\texpandedKeys={expandedKeys}\r\n\t\t\t\tautoExpandParent={autoExpandParent}\r\n\t\t\t\tonCheck={this.onCheck}\r\n\t\t\t\tcheckedKeys={checkedKeys}\r\n\t\t\t\tcheckable={!showLine}\r\n\t\t\t\tshowLine={showLine}\r\n\t\t\t\tonSelect={showLine?this.onSelect:null}\r\n\t\t\t\tselectedKeys={selectedKeys}\r\n\t\t\t>\r\n\t\t\t\t{this.renderTreeNodes(data)}\r\n\t\t\t</Tree>\r\n\t\t</div>\r\n\t}\r\n}\r\n\r\nexport default DingtalkTree;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bpm/DingtalkTree.js","/*\r\n* OKRTable组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {Table, Input, Popconfirm, Form, Icon, message, InputNumber, ConfigProvider} from 'antd';\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\nconst {TextArea} = Input;\r\nconst customizeRenderEmpty = () => (\r\n\t<div style={{textAlign: 'center', padding: '50px 0'}}>\r\n\t\t<img\r\n\t\t\twidth='150px'\r\n\t\t\theight=\"100px\"\r\n\t\t\tsrc='./images/not_found.png'/>\r\n\t\t<p style={{\r\n\t\t\tfontSize: '14px',\r\n\t\t\tfontFamily: 'PingFangSC-Regular,PingFang S',\r\n\t\t\tfontWeight: '400',\r\n\t\t\tcolor: 'rgba(75,80,81,1)'\r\n\t\t}}>暂无数据</p>\r\n\t</div>\r\n);\r\nimport {v4 as uuidv4} from 'uuid';\r\n\r\n\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true,\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, handleDelete, type} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (type == 'number') {\r\n\t\t\tif (dataIndex==\"orders\") {  // 优先级\r\n\t\t\t\treturn editing ? (\r\n\t\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record.id)}>\r\n\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t} else {   // 数字\r\n\t\t\t\treturn editing ? (\r\n\t\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else if(type == 'textarea') {  // 文本域\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t\tautoSize={{minRows: 2, maxRows: 5}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {   // 文本\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n@observer\r\nclass OkrTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],\r\n\t\t\taddData: {},\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {dataSource, addData} = nextProps;\r\n\t\tif (dataSource != this.props.dataSource) {\r\n           this.setState({\r\n\t           dataSource: dataSource,\r\n\t           addData: Object.assign({}, addData)\r\n           });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {dataSource, addData} = this.props;\r\n\t\tthis.setState({\r\n\t\t\tdataSource: dataSource,\r\n\t\t\taddData: Object.assign({}, addData)\r\n\t\t});\r\n\t}\r\n\r\n\t// 增加一行\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource} = this.state;\r\n\t\tconst {addData, type} = this.props;\r\n\t\tconst newData = Object.assign({}, addData, {id: \"!\" + uuidv4(), orders: dataSource.length+1});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(type, this.state.dataSource);\r\n\t\t});\r\n\t};\r\n\r\n\t// 删除一行\r\n\thandleDelete = (id) => {\r\n\t\tconst {type} = this.props;\r\n\t\tconst dataSource = [...this.state.dataSource];\r\n\t\tthis.setState({\r\n\t\t\tdataSource: dataSource.filter(item => item.id !== id)\r\n\t\t}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(type, this.state.dataSource);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSave = (row) => {\r\n\t\tconst {type} = this.props;\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.id === item.id);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(type, this.state.dataSource);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource} = this.state;\r\n\t\tconst {columns} = this.props;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst massColu = columns!=undefined&&columns.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\ttype: col.type,\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t\t<ConfigProvider renderEmpty={customizeRenderEmpty}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\t\tbordered\r\n\t\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\t\tcolumns={massColu}\r\n\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t      style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t</ConfigProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default OkrTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bpm/OkrTable.js","/*\r\n* 评论组件\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport { Comment, Avatar, Form, Button, List, Input } from 'antd';\r\nimport moment from 'moment';\r\nconst { TextArea } = Input;\r\nconst CommentList = ({ comments }) => (\r\n\t<List\r\n\t\tdataSource={comments}\r\n\t\theader={`${comments.length} ${comments.length > 1 ? '评论' : '评论'}`}\r\n\t\titemLayout=\"horizontal\"\r\n\t\trenderItem={props => <Comment {...props} />}\r\n\t/>\r\n);\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n\t<div>\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"请输入您的留言\"/>\r\n\t\t</Form.Item>\r\n\t\t<Form.Item>\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\r\n\t\t\t\t评论\r\n\t\t\t</Button>\r\n\t\t</Form.Item>\r\n\t</div>\r\n);\r\n\r\nclass ZjComment extends React.Component {\r\n\tstate = {\r\n\t\tcomments: [],\r\n\t\tsubmitting: false,\r\n\t\tvalue: '',\r\n\t};\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {okrComments, delComment} = nextProps;\r\n\t\tif (okrComments != this.props.okrComments) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcomments: okrComments.map((item)=>{\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\tauthor: item.userName,\r\n\t\t\t\t\t\tavatar: <Avatar style={{backgroundColor: '#87d068'}} icon=\"user\" />,\r\n\t\t\t\t\t\tcontent: <p>{item.text}</p>,\r\n\t\t\t\t\t\tdatetime: moment(item.createTime).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n\t\t\t\t\t\tactions: [<span key=\"comment-list-reply-to-0\" onClick={delComment.bind(this, item.id)}>删除</span>],\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.props.saveComment(this.state.value);\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: ''\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { comments, submitting, value } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{comments.length > 0 && <CommentList comments={comments} />}\r\n\t\t\t\t<Comment\r\n\t\t\t\t\tavatar={\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\tsrc={\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"}\r\n\t\t\t\t\t\t\t//style={{backgroundColor: '#87d068'}}\r\n\t\t\t\t\t\t\t// icon=\"user\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t<Editor\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ZjComment;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/bpm/ZjComment.js"],"sourceRoot":""}