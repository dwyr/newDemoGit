{"version":3,"sources":["webpack:///./src/containers/digitalOrg/Notify.js","webpack:///./src/components/common/MyUpload.js?ee17*","webpack:///./src/components/digitalOrg/EditeVisit.js?09c6","webpack:///./src/components/digitalOrg/CommentList.js?150b","webpack:///./src/components/digitalOrg/DigitalComment.js?c802","webpack:///./src/components/digitalOrg/CommonEmail2.js?d0ae","webpack:///./src/components/digitalOrg/DetailForm.js?80b1","webpack:///./src/components/digitalOrg/DetailFormMonthlySharing.js?4943","webpack:///./src/components/digitalOrg/DetailFormNews.js?8f07","webpack:///./src/components/digitalOrg/DetailFormReplay.js?2260","webpack:///./src/components/digitalOrg/DetailFormSummary.js?101f","webpack:///./src/components/digitalOrg/DetailFormVisit.js?998e","webpack:///./src/components/digitalOrg/DetailFormWeekReport.js?097a","webpack:///./src/components/digitalOrg/EditeMeeting.js?a434","webpack:///./src/components/digitalOrg/PersonEdit.js?822c","webpack:///./src/components/digitalOrg/DetailFormFactoryreport.js?bf41","webpack:///./src/components/digitalOrg/DetailModal.js?e6b6","webpack:///./src/components/digitalOrg/DetailOfficeModal.js?9bb0"],"names":["mobx","customizeRenderEmpty","textAlign","padding","fontSize","fontFamily","fontWeight","color","officeArray","Notify","observer","props","onSelectChange","setState","selectedRowKeys","showSizeChange","current","pageSize","store","notifyParams","pageIndex","getNotifyPageList","onPageChange","pageNumber","showTotal","total","click","type","Object","assign","delNotifyList","state","length","message","warn","then","res","success","emitter","emit","setNotifyListRead","transType","onOpen","record","mainType","haveRead","setNotifyRead","id","includes","officeStore","getJournalTypeList","temList","toJS","digtalTemData","filter","item","selestedId","mainId","getJournalById","visibleOffic","selectedID","detailData","getLikeUsersByJournalId","getCommentsByJournalId","getJournalIndicators","isEdit","visible","onClose","DigtalOrgStore","OfficeManageStore","nextProps","getNewNotifyCount","notifyTotalCount","notifyTableData","notifyLoading","colorLists","columns","title","dataIndex","key","render","text","msgType","mainTitle","fromUserName","createTime","msg","keyIndex","msgState","canShow","listData","description","format","backgroundColor","substring","cursor","bind","verticalAlign","lineHeight","display","wordWrap","whiteSpace","rowSelection","onChange","marginBottom","position","top","zIndex","left","Component","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","uid","name","UploadToOss","url","Promise","resolve","reject","multipartUpload","data","catch","error","MyUpload","getDocumentUrl","Config","journal","journalSchemas","handleChange","info","status","fileList","oldFileList","JSON","parse","stringify","newFileList","map","originFileObj","host","fileId","fileName","filePath","undefined","array","saveAttachment","changeSrc","obj","beforeUpload","accept","acceptDefault","split","isLt2M","size","loading","journalType","reader","FileReader","readAsDataURL","onloadend","handlePreview","test","previewImage","previewVisible","isAssetTypeAnImage","ext","indexOf","toLowerCase","getExt","index","lastIndexOf","substr","imageArray","src","alt","downloadUrl","activeIndex","findIndex","handleCancel","isImage","downloadImage","onDownload","x","XMLHttpRequest","open","responseType","onload","e","response","send","cancel","appStore","ossData","securityToken","bpm","getSts","bpmSchemas","str","multiple","disabled","listType","onPreview","showUploadList","showDownloadIcon","uploadButton","right","minHeight","backgroundSize","width","maxHeight","toolbars","concat","onClick","activeImage","React","EditeVisit","saveDraft","child","handleSubmit","onRef","ref","updateState","_this","pathname","draftId","timer","setInterval","saveAuto","clearInterval","formItemLayout","labelCol","xs","span","sm","wrapperCol","temType","handleDraftRoute","handleRoute","getTable","onCancle","collapsed","isWeekShow","marginRight","CommentList","handleZan","addOrDelLike","handCollection","addOrDelCollection","handleVisibleChange","handleEdit","getSharedEditingList","Array","isArray","editvisible","param","scrollToAnchor","getLikeUsers","getComments","journalIndicators","username","localStorage","getItem","isLike","userName","haveCollection","userId","isShow","isWeek","viewCount","utils","TextArea","Input","Editor","handleClick","onSubmit","submitting","value","justifyContent","Editor2","ExampleComment","setTimeout","addComment","pid","params","pUserId","reset","target","onDel","delComment","children","parentUserName","DigitalComment","clearState","callback","renderTreeNodes","comments","readUsers","treeData","formatList","paddingLeft","marginLeft","join","CommonEmail2","getReportUrl","isLoading","journalMain","pdfName","timer22","getDownloadUrl","code","creatWord","wordDownload","pdfDownload","sendReport","emails","userIds","checks","ccEmails","ccUserIds","isemailUserIds","isemails","attType","Number","sendEmail","handleOpen","handleOk","checkedValues","tip","options","label","listStyle","Text","Typography","DetailForm","onAsync","remove","customList","addAssignments","splice","handleAdd","some","userInformations","updatePerson","fields","detail","handleAddNew","handleCalc","audioSrc","clickChange","hanndleChangeEdit","changeCanEdit","userid","Modal","warning","handleCancle","appendAliyundata","base64","audioKey","appendToAliyunData","base64Data","aliyunAppendData","nextPosition","reSetAliyundata","newAddignments","formItemLayoutWithOutLabel","offset","formItemLayoutLabel","journalSub","Base64","decode","assignments","sub","atts","attachments","vitem","vindex","audio","dropDown","preventDefault","maxWidth","tags","time","hours","place","people","__html","content","conclusion","isSync","hasJournal","paddingTop","borderBottom","margin","DetailFormNew","formTailLayout","cases","introspection","DetailFormNews","DetailFormReplay","assessmentResult","analyzeReason","summarizeLaw","DetailFormSummary","DetailFormVisit","company","project","address","ourPeople","visitPeoples","phone","purpose","process","promise","DetailFormWeekReport","canEdit","isJeks","oldTime","valueOf","isOld","beginTime","endTime","weekContent","detailBusiness","detailFactory","detailDigital","detailProducts","corporateGovernance","monthlyWorkBoard","departmentZhglzx2021","departmentGnyxzx2021","departmentCxyxzx2021","departmentXmglzx2021","departmentCpyfzx2021","departmentSczzzx2021","projectBoard","departmentProduct","departmentSolution","departmentMarket","departmentStrategic","departmentSupport","EditeMeeting","handleNumChange","onDateChange","date","dateString","handleBChange","editorState","handleAttment","arr","push","audioStatus","attcs","numTime","newTime","encode","saveJournalByType","saveType","journalAudio","form","validateFields","err","values","cancelJournal","resetFields","init","toHTML","setFieldsValue","updateAudioStaus","onRefAudio","newArray","ContentUtils","insertMedias","onChangeAttc","keys","tagList","excludeControls","disabledDate","getFieldDecorator","imageControls","height","initialValue","rules","required","minRows","minWidth","editForm","Form","create","_","colorList","PersonEdit","defaultDatas","defaultData","oldSelect","v","selected","dataArray","users","saveSharedEditing","handClick","dindex","handClickDel","trim","handleClickDebounce","filterData","getData","debounce","nextContext","UserStore","getRole","body","realname","isFilter","activeData","station","email","marginTop","borderLeft","slice","DetailFormFactoryreport","factoryBuild","productionLine","productsTechnologies","operationalSupport","board","DetailModal","withRouter","syncAssignment","saveAssignments","DetailOfficeModal"],"mappings":"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","file":"js/9-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 消息通知\r\n* dangwei@bocspace.com\r\n* */\r\nimport React, {Component} from \"react\";\r\nimport {Table, Button, Divider, Avatar, message, List, Badge, Pagination, ConfigProvider, Tag } from 'antd';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport {showText} from \"@/utils/utils\";\r\nimport moment from 'moment';\r\nimport DetailModal from '@/components/digitalOrg/DetailModal';\r\nimport DetailOfficeModal from '@/components/digitalOrg/DetailOfficeModal';\r\nimport emitter from \"@/utils/events\";\r\n\r\nconst customizeRenderEmpty = () => (\r\n\t<div style={{textAlign: 'center', padding: '20px 0'}}>\r\n\t\t<img\r\n\t\t\twidth='150px'\r\n\t\t\theight=\"100px\"\r\n\t\t\tsrc='./images/not_found.png'/>\r\n\t\t<p style={{\r\n\t\t\tfontSize: '14px',\r\n\t\t\tfontFamily: 'PingFangSC-Regular,PingFang S',\r\n\t\t\tfontWeight: '400',\r\n\t\t\tcolor: 'rgba(75,80,81,1)'\r\n\t\t}}>暂无数据</p>\r\n\t</div>\r\n);\r\nlet officeArray = [\"weekreport\"];  //  公文\r\n\r\n@inject('DigtalOrgStore')\r\n@inject('OfficeManageStore')\r\n@observer\r\nexport default class Notify extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.DigtalOrgStore;\r\n\t\tthis.officeStore = this.props.OfficeManageStore;\r\n\t\tthis.state = {\r\n\t\t\tselectedRowKeys: [],\r\n\t\t\tselectedID: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\tvisibleOffic: false,\r\n\t\t\tmainType: \"\", // 日志类型\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.store.notifyParams = Object.assign({}, {\r\n\t\t\ttype: 2,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10\r\n\t\t});\r\n\t\tthis.store.getNotifyPageList();\r\n\t\tthis.store.getJournalTypeList();\r\n\t\tthis.store.getNewNotifyCount();\r\n\t}\r\n\r\n\tonSelectChange = selectedRowKeys => {\r\n\t\tthis.setState({selectedRowKeys});\r\n\t};\r\n\r\n\tshowSizeChange = async (current, pageSize) => {\r\n\t\tthis.store.notifyParams.pageIndex = 1;\r\n\t\tthis.store.notifyParams.pageSize = pageSize;\r\n\t\tthis.store.getNotifyPageList();\r\n\t}\r\n\r\n\tonPageChange = async (pageNumber) => {\r\n\t\tthis.store.notifyParams.pageIndex = pageNumber;\r\n\t\tthis.store.getNotifyPageList();\r\n\t}\r\n\r\n\tshowTotal = (total) => {\r\n\t\treturn `共 ${total} 条`;\r\n\t}\r\n\r\n\tclick = (type) => {\r\n\t\tthis.setState({selectedRowKeys: Object.assign([])});\r\n\t\tthis.store.notifyParams.pageIndex = 1;\r\n\t\tthis.store.notifyParams.pageSize = 10;\r\n\t\tthis.store.notifyParams.type = type;\r\n\t\tthis.store.getNotifyPageList();\r\n\t}\r\n\r\n\t// 批量删除\r\n\tdelNotifyList = () => {\r\n\t\tconst {selectedRowKeys} = this.state;\r\n\t\tif (selectedRowKeys.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择要删除的数据\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.store.delNotifyList(selectedRowKeys)\r\n\t\t.then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedRowKeys: []\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// 重查\r\n\t\t\t\t\tthis.store.getNotifyPageList();\r\n\t\t\t\t\temitter.emit(\"notify\", \"6\");\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 批量标记\r\n\tsetNotifyListRead = () => {\r\n\t\tconst {selectedRowKeys} = this.state;\r\n\t\tif (selectedRowKeys.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择要标记的数据\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.store.setNotifyListRead(selectedRowKeys)\r\n\t\t.then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedRowKeys: []\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// 重查\r\n\t\t\t\t\tthis.store.getNotifyPageList();\r\n\t\t\t\t\temitter.emit(\"notify\", \"6\");\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\ttransType = (type) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"comment\":\r\n\t\t\t\treturn \"评论\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"reply\":\r\n\t\t\t\treturn \"回复\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tonOpen = (record) => {\r\n\t\tif (record.mainType==null||record.mainType==\"\") {  // 已删除\r\n\t\t\tmessage.warn(\"日志已被删除\");\r\n\t\t\tif (record.haveRead != 1) {  // 未读\r\n\t\t\t\tthis.store.setNotifyRead(record.id).then((res)=>{\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t// 重查\r\n\t\t\t\t\t\tthis.store.getNotifyPageList();\r\n\t\t\t\t\t\temitter.emit(\"notify\", \"6\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (officeArray.includes(record.mainType)) {  //公文管理\r\n\t\t\tthis.officeStore.getJournalTypeList().then((res)=>{\r\n\t\t\t\tthis.officeStore.temList = Object.assign({}, mobx.toJS(this.officeStore.digtalTemData).filter(item=>item.type==record.mainType)[0]);\r\n\t\t\t});\r\n\t\t\tthis.officeStore.selestedId=record.mainId;\r\n\t\t\tthis.officeStore.getJournalById(record.mainId)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tvisibleOffic: true,\r\n\t\t\t\t\t\tselectedID: record.id,\r\n\t\t\t\t\t\tmainType: record.mainType\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.officeStore.detailData = Object.assign({}, res);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 点赞\r\n\t\t\tthis.officeStore.getLikeUsersByJournalId();\r\n\t\t\t// 评论\r\n\t\t\tthis.officeStore.getCommentsByJournalId();\r\n\t\t\tthis.officeStore.getJournalIndicators();\r\n\t\t\tthis.officeStore.isEdit =false;\r\n\t\t} else {  \t//知识管理\r\n\t\t\tthis.store.getJournalTypeList().then((res)=>{\r\n\t\t\t\tthis.store.temList = Object.assign({}, mobx.toJS(this.store.digtalTemData).filter(item=>item.type==record.mainType)[0]);\r\n\t\t\t});\r\n\t\t\tthis.store.selestedId=record.mainId;\r\n\t\t\tthis.store.getJournalById(record.mainId)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t\tselectedID: record.id,\r\n\t\t\t\t\t\tmainType: record.mainType\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.store.detailData = Object.assign({}, res);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 点赞\r\n\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t// 评论\r\n\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\tthis.store.getJournalIndicators();\r\n\t\t\tthis.store.isEdit =false;\r\n\t\t}\r\n\t}\r\n\r\n\tonClose = (type) => {\r\n\t\tconst {selectedID} = this.state;\r\n\t\tthis.setState({\r\n\t\t\t[type]: false,\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.setNotifyRead(selectedID).then((res)=>{\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\t// 重查\r\n\t\t\t\t\tthis.store.getNotifyPageList();\r\n\t\t\t\t\temitter.emit(\"notify\", \"6\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {selectedRowKeys, visible, visibleOffic} = this.state;\r\n\t\tconst {notifyTotalCount, notifyTableData, notifyParams, notifyLoading} = this.store;\r\n\t\tconst colorLists = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90', \"#9400D3\"]; // 十个颜色\r\n\t\tconst columns = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\tkey: 'name',\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst {haveRead, msgType, mainTitle, fromUserName, createTime, msg, keyIndex, msgState,canShow} = record;\r\n\t\t\t\t\tconst listData = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: keyIndex,\r\n\t\t\t\t\t\t\tdescription: msg\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t<List\r\n\t\t\t\t\t\t\titemLayout=\"vertical\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tdataSource={listData}\r\n\t\t\t\t\t\t\trenderItem={item => (\r\n\t\t\t\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\t\t\t\tkey={item.title}\r\n\t\t\t\t\t\t\t\t\textra={\r\n\t\t\t\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"#666\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: '12px'\r\n\t\t\t\t\t\t\t\t\t\t}}>{showText(moment(createTime).format(\"YYYY-MM-DD HH:mm\"), moment(createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<List.Item.Meta\r\n\t\t\t\t\t\t\t\t\t\tavatar={<Avatar\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{color: '#FFF',\r\n\t\t\t\t\t\t\t\t\t\t\t\t    backgroundColor: colorLists[keyIndex]}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{fromUserName.substring(fromUserName.length-2, fromUserName.length)}\r\n\t\t\t\t\t\t\t\t\t\t</Avatar>}\r\n\t\t\t\t\t\t\t\t\t\ttitle={<span className=\"ax_default\">\r\n\t\t\t\t\t\t\t\t\t\t\t{haveRead==0?<Badge status={\"warning\"} text={fromUserName}/>:fromUserName}\r\n\t\t\t\t\t\t\t\t\t\t    在\r\n\t\t\t\t\t\t\t\t\t\t\t<span style={{color: \"#1890ff\", cursor: 'pointer'}} onClick={this.onOpen.bind(this, record)}>{mainTitle}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t中\r\n\t\t\t\t\t\t\t\t\t\t\t{canShow==1&&msgState==2?<Tag color=\"gold\">{this.transType(msgType)}已被作者删除</Tag>:null}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tdescription={<span style={{\r\n\t\t\t\t\t\t\t\t\t\t\tverticalAlign: 'top',\r\n\t\t\t\t\t\t\t\t\t\t\tlineHeight: 'inherit'\r\n\t\t\t\t\t\t\t\t\t\t}}><span\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '14px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: haveRead==\"1\"?\"#D5D3D6\":\"#79797B\"}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"ax_default\">\r\n\t\t\t\t\t\t\t\t\t\t\t{this.transType(msgType)}\r\n\t\t\t\t\t\t\t\t\t\t\t{msgType==\"addLike\"?null:\"你：\"}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\t\t\t\t\twordWrap:'break-word',\r\n\t\t\t\t\t\t\t\t\t\t\t\twhiteSpace: 'pre-wrap',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '14px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: haveRead==\"1\"?\"#D5D3D6\":\"#79797B\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{canShow==0?<Tag color=\"gold\">{this.transType(msgType)}已被作者删除</Tag>:item.description}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</span>}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t\tconst rowSelection = {\r\n\t\t\tselectedRowKeys,\r\n\t\t\tonChange: this.onSelectChange\r\n\t\t};\r\n\t\tconst {pageIndex, pageSize, type} = mobx.toJS(notifyParams);\r\n\r\n\r\n\t\treturn (<div>\r\n\t\t\t\t<Button type={type == 2 ? \"primary\" : \"default\"} shape=\"round\"\r\n\t\t\t\t        onClick={this.click.bind(this, 2)}>全部</Button>\r\n\t\t\t\t<Button type={type == 0 ? \"primary\" : \"default\"} shape=\"round\" className=\"ml10 mr10\"\r\n\t\t\t\t        onClick={this.click.bind(this, 0)}>未读</Button>\r\n\t\t\t\t<Button type={type == 1 ? \"primary\" : \"default\"} shape=\"round\"\r\n\t\t\t\t        onClick={this.click.bind(this, 1)}>已读</Button>\r\n\t\t\t\t<Divider style={{marginBottom: \"0\"}}/>\r\n\t\t\t\t<div className=\"fr\" style={{\r\n\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\ttop: '39px',\r\n\t\t\t\t\tzIndex: '12'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<Button type=\"primary\" ghost icon=\"delete\" size={\"small\"} onClick={this.delNotifyList}>\r\n\t\t\t\t\t\t批量删除\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button className=\"ml20\" type=\"primary\" ghost icon=\"eye\" size={\"small\"}\r\n\t\t\t\t\t        onClick={this.setNotifyListRead}>\r\n\t\t\t\t\t\t全部标为已读\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span className=\"fl\" style={{\r\n\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\ttop: '42px',\r\n\t\t\t\t\tzIndex: '12',\r\n\t\t\t\t\tleft: \"48px\",\r\n\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\tcolor: '#333'\r\n\t\t\t\t}}>全选</span>\r\n\t\t\t\t<ConfigProvider renderEmpty={customizeRenderEmpty}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName=\"notify_table\"\r\n\t\t\t\t\t\trowSelection={rowSelection}\r\n\t\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\t\tdataSource={mobx.toJS(notifyTableData)}\r\n\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\tloading={notifyLoading}\r\n\t\t\t\t\t\trowKey={record => record.id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\tclassName=\"mt20 tc\"\r\n\t\t\t\t\t\tcurrent={pageIndex}\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\ttotal={notifyTotalCount}\r\n\t\t\t\t\t\tonShowSizeChange={this.showSizeChange}\r\n\t\t\t\t\t\tonChange={this.onPageChange}\r\n\t\t\t\t\t\tshowSizeChanger\r\n\t\t\t\t\t\tshowQuickJumper={true}\r\n\t\t\t\t\t\tshowTotal={this.showTotal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ConfigProvider>\r\n\t\t\t\t<DetailModal\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.onClose.bind(this, \"visible\")}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t/>\r\n\t\t\t\t<DetailOfficeModal\r\n\t\t\t\t\tvisible={visibleOffic}\r\n\t\t\t\t\tonClose={this.onClose.bind(this, \"visibleOffic\")}\r\n\t\t\t\t\tstore={this.officeStore}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/digitalOrg/Notify.js","/*\r\n* 大文件上传组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message, Modal} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\nimport Viewer from 'react-viewer';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\nimport {downloadFile, download} from \"@/utils/download\";\r\nimport bpmSchemas from \"@/utils/Schemas/bpm\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n@inject('appStore')\r\n@observer\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.appStore;\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '', // oss的key_id\r\n\t\t\t\taccess_key_secret: '', // oss的secret\r\n\t\t\t\tstsToken: '',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tfilePath: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t\tactiveIndex: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.journalType) {\r\n\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t}\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 阿里云上传参数\r\n\t\trequestPost('getSts', Config.bpm.getSts, bpmSchemas.bpm.getSts, {})\r\n\t\t.then((res)=>{\r\n\t\t\tlet str = typeof res ==\"string\"?JSON.parse(res):res;\r\n\t\t\tif (str) {\r\n\t\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\t\taccess_key_id: str.accessKeyId,\r\n\t\t\t\t\t\taccess_key_secret: str.accessKeySecret,\r\n\t\t\t\t\t\tstsToken: str.securityToken\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDocumentUrl = (url) => {\r\n\t\treturn requestPost('getDocumentUrl', Config.journal.getDocumentUrl, journalSchemas.journal.getDocumentUrl, {url: url})\r\n\t}\r\n\r\n\t// 只用做删除操作\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\t/*let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet _this = this;\r\n\t\t\t_this.setState({\r\n\t\t\t\tloading: true\r\n\t\t\t});\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t_this.props.saveAttachment(array);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t});\r\n\t\t\t}, 3000);*/\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\t/*let id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\t// this.props.delNode(id);\r\n\t\t\t}*/\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tthis.props.saveAttachment(array);\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新url\r\n\tchangeSrc = (res, file) => {\r\n\t\tconst {fileList, host} = this.state;\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList));\r\n\r\n\t\tconst url = host + uploadPath('path', file);\r\n\t\tlet obj = Object.assign({}, {\r\n\t\t\tuid: file.uid,\r\n\t\t\tname: file.name,\r\n\t\t\tstatus: \"done\",\r\n\t\t\turl: url,\r\n\t\t\tfileId: null,\r\n\t\t\tfileName: file.name,\r\n\t\t\tfilePath: url,\r\n\t\t\tid: \"\",\r\n\t\t});\r\n\t\tlet newFileList = [obj];\r\n\r\n\t\t// 处理附件\r\n\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\tthis.props.saveAttachment(array);\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst {accept} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tif (accept==undefined) {  // 没有传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\t//console.log(accept, file.type, type, 'accept')\r\n\t\t\tif (!acceptDefault.includes(type)) {\r\n                //message.warn(\"格式不对\");\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t} else {   // 外部传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\tif (!accept.includes(type)) {\r\n\t\t\t\tmessage.warn(\"格式不对, 只允许上传图片\");\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = true; // 记录一次\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\t// 处理地址\r\n\t\t\t\tconst {res} = data;\r\n\t\t\t\tif (res.status&&res.status==200) {  // 单个文件上传成功\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.changeSrc(res, file);\r\n\t\t\t\t}\r\n\t\t\t}).catch((error)=>{\r\n\t\t\t\t\tmessage.error(\"文件上传失败\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\thandlePreview = async file => {\r\n\t\t// 文档\r\n\t\tif (/\\.(doc|docx)$/.test(file.name)||/\\.(xls|xlsx)$/.test(file.name)||/\\.(pdf)$/.test(file.name)||/\\.(zip|rar)$/.test(file.name)||/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\tthis.getDocumentUrl(file.filePath).then((res)=>{\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: res,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}  else {  // 图片、音频\r\n\t\t\t// 文件类型判断\r\n\t\t\tfunction isAssetTypeAnImage(ext) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].\r\n\t\t\t\tindexOf(ext.toLowerCase()) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\t//获取后缀\r\n\t\t\tfunction getExt(filePath) {\r\n\t\t\t\t// 去掉url的问号\r\n\t\t\t\tif (filePath.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\tfilePath = filePath.split(\"?\")[0];\r\n\t\t\t\t}\r\n\t\t\t\t//获取最后一个.的位置\r\n\t\t\t\tlet index= filePath.lastIndexOf(\".\");\r\n\t\t\t\t//获取后缀\r\n\t\t\t\tlet ext = filePath.substr(index+1);\r\n\t\t\t\treturn ext;\r\n\t\t\t}\r\n\r\n\t\t\tif (isAssetTypeAnImage(getExt(file.filePath))) {  // 判断是图片\r\n\t\t\t\tconst fileList = JSON.parse(JSON.stringify(this.state.fileList));\r\n\t\t\t\tlet imageArray;\r\n\t\t\t\timageArray = fileList.filter((item)=>isAssetTypeAnImage(getExt(item.filePath))).map((item)=>{\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tsrc: item.filePath,\r\n\t\t\t\t\t\talt: item.name,\r\n\t\t\t\t\t\tdownloadUrl: item.filePath\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\timageArray: Object.assign([], imageArray),\r\n\t\t\t\t\tactiveIndex: imageArray.findIndex((item)=>item.src==file.filePath)\r\n\t\t\t\t});\r\n\t\t\t} else {   // 音频\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (type) => this.setState({[type]: false});\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = () => {\r\n\t\tconst {filePath, name} = this.state;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览下载\r\n\tonDownload = (file) => {\r\n\t\tconst {filePath, name} = file;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n        //获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\t// 取消上传\r\n\tcancel =  () =>{\r\n\t\tthis.setState({\r\n\t\t\tloading: false,\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = false; // 清楚记录\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {previewVisible, previewImage, fileList , name, loading, visible, imageArray, activeIndex} = this.state;\r\n\t\tconst {multiple, disabled,accept, length} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tconst props = {\r\n\t\t\taccept: accept==undefined?acceptDefault:accept,\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tdisabled: disabled,\r\n\t\t\tlistType: \"picture-card\",\r\n\t\t\tonPreview: this.handlePreview,\r\n\t\t\tonDownload: this.onDownload,\r\n\t\t\tshowUploadList: {\r\n\t\t\t\tshowDownloadIcon: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst uploadButton = (\r\n\t\t\t<div className=\"pr\">\r\n\t\t\t\t<Icon type={loading?\"loading\":\"plus\"} />\r\n\t\t\t\t{loading?<div className=\"ant-upload-text\">上传中</div>:null}\r\n\t\t\t\t{loading?<Icon type=\"stop\"\r\n\t\t\t\t               title=\"取消上传\"\r\n\t\t\t\t               style={{\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '-39px',\r\n\t\t\t\t\tright: '-22px',\r\n\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\tcolor: '#1890ff'\r\n\t\t\t\t}} onClick={this.cancel}/>:null}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\r\n\t    return (\r\n\t\t\t<div className=\"affairs_upload\">\r\n\t\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t\t{disabled||length>=\"1\"?null:uploadButton}\r\n\t\t\t\t</Upload>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={<div>{name}\r\n\t\t\t\t\t\t<a href=\"javascript:;\" onClick={this.downloadUrl}>下载</a>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\tvisible={previewVisible}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tonCancel={this.handleCancel.bind(this, 'previewVisible')}>\r\n\t\t\t\t\t{isImage?<iframe\r\n\t\t\t\t\t\tsrc={previewImage}\r\n\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\t\tframeBorder='1'>\r\n\t\t\t\t\t</iframe>:<img style={{ backgroundSize: 'conver',width: '100%', maxHeight: '400px' }} src={previewImage} alt=\"\" />}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Viewer\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.handleCancel.bind(this, 'visible')}\r\n\t\t\t\t\timages={imageArray}\r\n\t\t\t\t\tactiveIndex={activeIndex}\r\n\t\t\t\t\tdownloadable={true}\r\n\t\t\t\t\tcustomToolbar={(toolbars) => {\r\n\t\t\t\t\t\treturn toolbars.filter(item=>item.key!==\"download\").concat([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tkey: \"download\",\r\n\t\t\t\t\t\t\t\trender: (<div><i className=\"react-viewer-icon react-viewer-icon-download\"></i></div>),\r\n\t\t\t\t\t\t\t\tonClick: (activeImage) => {\r\n\t\t\t\t\t\t\t\t\tconst {src, alt} = activeImage;\r\n\t\t\t\t\t\t\t\t\tthis.downloadImage(src, alt);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/MyUpload.js","/*\r\n* 编辑表单\r\n* 2020-07-21\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Popconfirm} from 'antd';\r\nimport * as  mobx from 'mobx';\r\nimport EditeFormVisit from './EditeFormVisit';\r\nimport EditeFormMonthlySharing from './EditeFormMonthlySharing';\r\nimport EditeFormSummary from './EditeFormSummary';\r\nimport EditeFormReplay from './EditeFormReplay';\r\nimport EditeFormNews from './EditeFormNews';\r\nimport EditeFormWeekreport from './EditeFormWeekreport';\r\nimport EditeFormFactoryreport from './EditeFormFactoryreport';\r\n\r\n@inject('appStore')\r\n@observer\r\nclass EditeVisit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\tlet {pathname} = _this.props;\r\n\t\tif (pathname&&pathname.includes(\"/digital/draft\")&&_this.store.draftId!=\"\") {\r\n\t\t\t// 定时器\r\n\t\t\t_this.timer = setInterval(() => {\r\n\t\t\t\t// 心跳接口 30s跳动一个\r\n\t\t\t\t_this.child.saveAuto(0);\r\n\t\t\t}, 30000);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount () {\r\n\t\t// 页面离开时清楚定时器\r\n\t\tthis.timer&&clearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t}\r\n\r\n\tsaveDraft = () => {\r\n\t\tthis.child.saveDraft();\r\n\t}\r\n\r\n\thandleSubmit = ()=> {\r\n\t\tthis.child.handleSubmit();\r\n\t}\r\n\r\n\tonClose = () => {\r\n\t\tthis.child.onClose();\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: data\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tlet {detailData, temType} = this.props;\r\n\t\tconst {loading} = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t{temType==\"visit\"? <EditeFormVisit\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"monthlySharing\"? <EditeFormMonthlySharing\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"summary\"? <EditeFormSummary\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"replay\"? <EditeFormReplay\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"news\"? <EditeFormNews\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"weekreport\"? <EditeFormWeekreport\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType==\"factoryreport\"? <EditeFormFactoryreport\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\tonCancle={this.props.onCancle}\r\n\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\tsm: {span: 24}\r\n\t\t\t\t\t}}\r\n                    className=\"clearfix tr mt20 pl20 pr20 fixed_bottom\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: this.props.appStore.collapsed?\"calc(100% - 470px)\":\" calc(100% - 590px)\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.isWeekShow!=undefined&&this.props.isWeekShow==false?null:<Button className=\"fl\"\r\n\t\t\t\t\t\t                                                                            shape=\"round\"\r\n\t\t\t\t\t\t                                                                            style={{\r\n\t\t\t\t\t\t\t                                                                            position: 'relative',\r\n\t\t\t\t\t\t\t                                                                            top: '4px'\r\n\t\t\t\t\t\t                                                                            }}\r\n\t\t\t\t\t\t                                                                            type=\"primary\"\r\n\t\t\t\t\t\t                                                                            onClick={this.saveDraft}>\r\n\t\t\t\t\t\t\t保存草稿\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消本次编辑吗?\" onConfirm={() => this.onClose()}>\r\n\t\t\t\t\t\t<Button shape=\"round\" style={{marginRight: 8}}>\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<Button shape=\"round\"\r\n\t\t\t\t\t        loading={loading}\r\n\t\t\t\t\t        onClick={this.handleSubmit}\r\n\t\t\t\t\t        type=\"primary\">\r\n\t\t\t\t\t\t提交发布\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\nexport default EditeVisit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/EditeVisit.js","/*\r\n* 评论、点赞、浏览量\r\n* dangwei@bocspace.com\r\n* */\r\nimport React, {Component} from \"react\";\r\nimport { Icon, Tooltip, message, Button, Popover, Spin } from 'antd';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport CommonEmail2 from \"@/components/digitalOrg/CommonEmail2\";\r\nimport PersonEdit from \"@/components/digitalOrg/PersonEdit\";\r\n\r\n@observer\r\nexport default class CommentList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tvisible: false,\r\n\t\t\ttitle: \"添加共享人\",\r\n\t\t\teditvisible: false,\r\n\t\t\tdata: [],\r\n\t\t\tloading: false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\t// 点赞\r\n\thandleZan = () =>{\r\n\t\tthis.store.addOrDelLike()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 收藏\r\n\thandCollection = () =>{\r\n\t\tthis.store.addOrDelCollection()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getJournalIndicators();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleVisibleChange = visible => {\r\n\t\tthis.setState({ visible });\r\n\t};\r\n\r\n\t// 定位\r\n\tscrollToAnchor(key) {\r\n\t\tconst {scrollToAnchor} = this.props;\r\n\t\tscrollToAnchor(key);\r\n\t}\r\n\r\n\t// 共享编辑\r\n\thandleEdit = () => {\r\n\t\tthis.store.getSharedEditingList().then((res)=>{\r\n\t\t\tif (res==null||(Array.isArray(res)&&res.length==0)) {\r\n\t\t\t\tthis.setState({\r\n                   title: \"添加共享人\",\r\n\t\t\t\t   editvisible: true,\r\n\t\t\t\t   data: res==null?[]: res\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttitle: \"编辑共享人\",\r\n\t\t\t\t\teditvisible: true,\r\n\t\t\t\t\tdata: res==null?[]: res\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClose = (type, param) =>{\r\n\t\tthis.setState({\r\n\t\t\t[type]: param\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, param) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: param\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {getLikeUsers, getComments, journalIndicators, } = this.store;\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst isLike = mobx.toJS(getLikeUsers).filter(item=>item.userName==username).length>0?true:false;\r\n\t\tconst {haveCollection} = mobx.toJS(journalIndicators);\r\n\t\tconst {pathname, detailData, isWeekShow, userId} = this.props;\r\n\t\tconst isShow = pathname!==undefined&&pathname==\"/digital/office\"?true:false;\r\n\t\tconst {editvisible, title, data, loading} = this.state;\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isWeek = isWeekShow==undefined?false:isWeekShow!=undefined&&(isWeekShow);\r\n\r\n\t\treturn (<span>\r\n\t\t\t   <Tooltip title=\"评论\">\r\n                  <Icon type=\"message\" className=\"commentlist_icon\" onClick={this.scrollToAnchor.bind(this, \"commentlist\")}/>\r\n                </Tooltip> <span className=\"commentlist_title\">{mobx.toJS(getComments).length}</span>\r\n\t\t\t\t<Tooltip title=\"点赞\">\r\n\t\t\t\t\t{isLike?<Icon type=\"like\" theme=\"filled\" className=\"commentlist_icon pointer\" onClick={this.handleZan}/>: <Icon type=\"like\" className=\"commentlist_icon pointer\" onClick={this.handleZan}/>}\r\n\t                </Tooltip><span className=\"commentlist_title\">{mobx.toJS(getLikeUsers).length}</span>\r\n\t\t\t\t<Tooltip title=\"已读\">\r\n\t                 <Icon type=\"eye\" className=\"commentlist_icon\"/>\r\n\t            </Tooltip><span className=\"commentlist_title\">{mobx.toJS(journalIndicators).viewCount||0}</span>\r\n\t\t\t\t{!isShow?<Tooltip title={\"收藏\"}>\r\n\t\t\t\t\t<Icon theme={haveCollection==1?\"filled\":\"\"} type=\"star\" className=\"commentlist_icon pointer\" onClick={this.handCollection}/>\r\n\t\t\t\t</Tooltip>:null}\r\n\t\t\t\t<Popover\r\n\t\t\t\t\toverlayClassName=\"digital_popver\"\r\n\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\tcontent={<CommonEmail2\r\n\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tstore={this.store} />}\r\n\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\tvisible={this.state.visible}\r\n\t\t\t\t\tonVisibleChange={this.handleVisibleChange}\r\n\t\t\t\t>\r\n\t               <Button className=\"ml10\" type=\"link\">分享</Button>\r\n\t            </Popover>\r\n\t\t\t   {isWeek?<Button type=\"link\" onClick={this.handleEdit}>共享编辑</Button>:null}\r\n\t\t\t     <PersonEdit\r\n\t\t\t       title={title}\r\n\t\t\t       visible={editvisible}\r\n\t\t\t       onClose={this.onClose.bind(this, \"editvisible\", false)}\r\n\t\t\t       data={data}\r\n\t\t\t       store={this.store}\r\n\t\t\t     />\r\n              <Spin wrapperClassName=\"dib\" tip=\"正在生成,请稍等...\" spinning={loading} />\r\n\t\t\t</span>);\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/CommentList.js","/*\r\n* 评论组件\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport { Comment, Avatar, Form, Button, Input,Icon, Tooltip, message } from 'antd';\r\nimport moment from 'moment';\r\nimport {inject, observer} from 'mobx-react';\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from \"@/utils/utils\";\r\n\r\nconst { TextArea } = Input;\r\nconst Editor = ({handleClick, onChange, onSubmit, submitting, value }) => (\r\n\t<div>\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"\"/>\r\n\t\t</Form.Item>\r\n\t\t<div  style={{\r\n\t\t\twidth: '100%',\r\n\t\t\tdisplay: 'flex',\r\n\t\t\tjustifyContent: 'space-between'\r\n\t\t}}>\r\n\t\t\t<Button type=\"link\" onClick={handleClick} style={{fontSize: '12px'}}>\r\n\t\t\t\t取消回复\r\n\t\t\t</Button>\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={value==null||value==\"\"?null:onSubmit} type=\"primary\">\r\n\t\t\t\t发布\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t</div>\r\n);\r\nconst Editor2 = ({ onChange, onSubmit, submitting, value }) => (\r\n\t<div className=\"mt20\">\r\n\t\t<Form.Item>\r\n\t\t\t<TextArea rows={4} onChange={onChange} value={value} placeholder=\"\"/>\r\n\t\t</Form.Item>\r\n\t\t<Form.Item className=\"tr\">\r\n\t\t\t<Button htmlType=\"submit\" loading={submitting} onClick={value==null||value==\"\"?null:onSubmit} type=\"primary\">\r\n\t\t\t\t发布\r\n\t\t\t</Button>\r\n\t\t</Form.Item>\r\n\t</div>\r\n);\r\n\r\n// 封装组件\r\nclass ExampleComment extends React.Component {\r\n\tstate = {\r\n\t\tsubmitting: false,\r\n\t\tvalue: '',\r\n\t\tvisible: false,\r\n\t};\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst { addComment, selestedId, id, userId, pid} = this.props;\r\n\t\t\tconst params = {\r\n\t\t\t\ttext: this.state.value,\r\n\t\t\t\tmainId: selestedId,\r\n\t\t\t\tpid: pid==null?id:pid,\r\n\t\t\t\tpUserId: userId\r\n\t\t\t}\r\n\t\t\taddComment(params, ()=>{\r\n               this.reset();\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t};\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\thandleClick = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: !this.state.visible\r\n\t\t});\r\n\t}\r\n\treset = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: '',\r\n\t\t\tvisible: false,\r\n\t\t});\r\n\t}\r\n\t// 删除\r\n\tonDel = () => {\r\n\t\tconst {delComment, id} = this.props;\r\n\t\tconst params = {\r\n\t\t\tid: id\r\n\t\t}\r\n\t\tdelComment(params, ()=>{\r\n\t\t\tthis.reset();\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tvalue,\r\n\t\t\tsubmitting,\r\n\t\t\tvisible\r\n\t\t} = this.state;\r\n\t\tconst {text, userName, createTime, children,pid, parentUserName} = this.props;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = userName==username;\r\n\t\treturn (<Comment\r\n\t\t\t\tclassName={pid==null?\"comment_normal\":\"comment_normal comment_active\"}\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t<span key=\"comment-nested-delete\" className=\"comment-nested\">\r\n\t\t\t\t\t\t{createTime==null?\"2020-08-04\":moment(createTime).format(\"YYYY-MM-DD HH:mm:ss\")}\r\n\t\t\t\t\t    <span className={isShow?\"comment-nested-delete\":\"hidden\"} onClick={this.onDel}>&nbsp;·&nbsp;删除</span>\r\n\t\t\t\t\t</span>,\r\n\t\t\t\t\t<span key=\"comment-nested-reply-to\" style={{color: \"#1890ff\"}} onClick={this.handleClick}>回复</span>]}\r\n\t\t\t\tauthor={<a>{userName}</a>}\r\n\t\t\t\tavatar={\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tsrc=\"./images/logo_new.png\"\r\n\t\t\t\t\t\talt=\"Han Solo\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tcontent={\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{parentUserName==null||parentUserName==\"\"?null:`回复${parentUserName}:`} {text}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{visible?<Editor\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\thandleClick={this.handleClick}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{children}\r\n\t\t\t</Comment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n@observer\r\nclass DigitalComment extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tcomments: [],\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: '',\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tif (!this.state.value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: true,\r\n\t\t});\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst params = {\r\n\t\t\t\ttext: this.state.value,\r\n\t\t\t\tmainId: this.store.selestedId,\r\n\t\t\t\tpid: null\r\n\t\t\t}\r\n\t\t\tthis.store.addComment(params).then((res)=>{\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"评论成功\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tsubmitting: false,\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新评论\r\n\t\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 1000);\r\n\t};\r\n\r\n\thandleChange = e => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value,\r\n\t\t});\r\n\t};\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tsubmitting: false,\r\n\t\t\tvalue: ''\r\n\t\t});\r\n\t}\r\n\r\n\t// 添加评论\r\n\taddComment = (params, callback) => {\r\n\t\t this.store.addComment(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"评论成功\");\r\n\t\t\t\t// 更新评论\r\n\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\tif(callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除评论\r\n\tdelComment = (params, callback) => {\r\n\t\tthis.store.delComment(params).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t// 更新评论\r\n\t\t\t\tthis.store.getCommentsByJournalId();\r\n\t\t\t\tif(callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trenderTreeNodes = data =>\r\n\t\tdata.map(item => {\r\n\t\t\tif (item.children) {\r\n\t\t\t\treturn (<ExampleComment key={item.id} {...item} addComment={this.addComment} delComment={this.delComment} selestedId={this.store.selestedId}>\r\n\t\t\t\t\t\t{this.renderTreeNodes(item.children)}\r\n\t\t\t\t\t</ExampleComment>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn <ExampleComment key={item.id} {...item} addComment={this.addComment} delComment={this.delComment} selestedId={this.store.selestedId}/>;\r\n\t\t});\r\n\r\n\t// 点赞\r\n\thandleZan = () =>{\r\n\t\tthis.store.addOrDelLike()\r\n\t\t.then((res)=>{\r\n\t\t\tif (res==true) {\r\n\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t// 更新点赞\r\n\t\t\t\tthis.store.getLikeUsersByJournalId();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { submitting, value } = this.state;\r\n\t\tconst {getLikeUsers, getComments, readUsers} = this.store;\r\n\t\tconst treeData = utils.formatList(mobx.toJS(getComments));\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst isLike = mobx.toJS(getLikeUsers).filter(item=>item.userName==username).length>0?true:false;\r\n\t\treturn (\r\n\t\t\t<div className=\"detail_form_bold\" style={{paddingLeft: '14px'}}>\r\n\t\t\t\t<div className=\"commentlist_title\" style={{textAlign: 'left'}}>\r\n\t\t\t\t\t<Tooltip title=\"点赞\">\r\n\t\t\t\t\t\t{isLike?<Icon theme=\"filled\" type=\"like\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" onClick={this.handleZan}/>:<Icon type=\"like\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" onClick={this.handleZan}/>}\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{mobx.toJS(getLikeUsers).length>0?mobx.toJS(getLikeUsers).map((item)=>item.userName).join(\"、\"):null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"commentlist_title\" style={{textAlign: 'left'}}>\r\n\t\t\t\t\t<Tooltip title=\"已读\">\r\n\t\t\t\t\t\t<Icon theme=\"filled\" type=\"eye\" style={{marginLeft: '0'}} className=\"commentlist_icon pointer mr20\" />\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t{mobx.toJS(readUsers).length>0?mobx.toJS(readUsers).map((item)=>item.userName).join(\"、\"):null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"commentlist\" className=\"detail_form_bold_title\" style={{textAlign: 'left'}}>评论</div>\r\n\t\t\t\t<Editor2\r\n\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\tonSubmit={this.handleSubmit}\r\n\t\t\t\t\tsubmitting={submitting}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t/>\r\n\t\t\t\t{this.renderTreeNodes(treeData)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DigitalComment;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DigitalComment.js","/*\r\n* 内容生成、邮件发送\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {message, Spin, Button,Modal, Checkbox, Row, Col} from 'antd';\r\nimport {inject, observer} from 'mobx-react'\r\nimport * as mobx from 'mobx';\r\nimport EditableTagEmail2 from \"@/components/digitalOrg/EditableTagEmail2\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport {downloadFile} from \"@/utils/download\";\r\n\r\n@inject('appStore')\r\n@observer\r\nclass CommonEmail2 extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\ttip: \"正在生成，请稍等...\",\r\n\t\t\tisLoading: false,\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户,\r\n\t\t\tvisible: false,\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [], // 抄送邮件\r\n\t\t\tccUserIds: [], // 抄送用户\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t}\r\n\r\n\t// 间隔3秒获取pdf地址\r\n\tgetReportUrl = (id) => {\r\n\t\tlet _this = this;\r\n\t\t_this.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\t\t_this.props.updateState(\"loading\", true);\r\n\t\tconst detailData = mobx.toJS(_this.props.detailData);\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst pdfName = journalMain.title;\r\n\r\n\t\t_this.timer22 = setInterval(() => {\r\n\t\t\t_this.store.getDownloadUrl(id).then((res) => {\r\n\t\t\t\tconst {url} = res;\r\n\t\t\t\tif (url !== null && url !== \"\") {\r\n\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.props.updateState(\"loading\", false);\r\n\t\t\t\t\tdownloadFile(url, pdfName);  // 直接下载pdf\r\n\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (res.code == 2) {\r\n\t\t\t\t\t\t_this.setState({\r\n\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_this.props.updateState(\"loading\", false);\r\n\t\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t}\r\n\r\n\t// 生成word\r\n\tcreatWord = (type) =>{\r\n\t\tconst {detailData} = this.props;\r\n\t\tconst param = mobx.toJS(detailData);\r\n\t\tif (type==1) {\r\n\t\t\tthis.store.wordDownload(param)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.store.pdfDownload(param)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 发送邮件\r\n\tsendReport = () => {\r\n\t\tlet _this = this;\r\n\t\tconst {emails, userIds, checks, ccEmails, ccUserIds} = _this.state;\r\n\t\tconst isemailUserIds = userIds == null ? [] : userIds;\r\n\t\tconst isemails = emails == null ? [] : emails;\r\n\t\t// 选择收件人\r\n\t\tif (isemailUserIds.length == 0 && isemails.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择邮件收件人\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst {detailData} = this.props;\r\n\t\tconst params = {\r\n\t\t\tjournal: mobx.toJS(detailData),\r\n\t\t\temails: emails,\r\n\t\t\tuserIds: userIds == null ? [] : userIds.map(item => item.userId),\r\n\t\t\tattType: checks.map(item=>typeof item ==\"string\"?Number(item):item),\r\n\t\t\tccEmails,\r\n\t\t\tccUserIds: ccUserIds == null ? [] : ccUserIds.map(item => item.userId),\r\n\t\t}\r\n\t\tthis.store.sendEmail(params)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res == true) {\r\n\t\t\t\t\tmessage.success(\"邮件发送成功\");\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tthis.setState({\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\tisLoading: false,\r\n\t\t\tvisible: false,\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [], // 抄送邮件\r\n\t\t\tccUserIds: [], // 抄送用户\r\n\t\t});\r\n\t}\r\n\r\n\thandleOpen = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: true\r\n\t\t});\r\n\t}\r\n\r\n\thandleOk = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (checkedValues) =>{\r\n\t\tthis.setState({\r\n\t\t\tchecks: checkedValues\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {tip, isLoading, emails, userIds, checks, ccEmails, ccUserIds} = this.state;\r\n\t\tconst options = [\r\n\t\t\t{ label: '附件Word', value: '0' },\r\n\t\t\t{ label: '附件PDF', value: '1' }\r\n\t\t];\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}><Button type=\"link\" onClick={isLoading?null:this.creatWord.bind(this, \"1\")}>点击生成并存储为Word文档</Button></li>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}><Button type=\"link\" onClick={isLoading?null:this.creatWord.bind(this, \"2\")}>点击生成并存储为PDF文档</Button></li>\r\n\t\t\t\t\t<li style={{\r\n\t\t\t\t\t\tlistStyle: 'none',\r\n\t\t\t\t\t\ttextAlign: 'left'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Button type=\"link\" onClick={isLoading?null:this.handleOpen}>点击发送邮件</Button>\r\n\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\tvalue={checks}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t{/*发送邮件*/}\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tmaskClosable={false}\r\n\t\t\t\t\twidth=\"600px\"\r\n\t\t\t\t\tzIndex={\"1066\"}\r\n\t\t\t\t\tvisible={this.state.visible}\r\n\t\t\t\t\tonCancel={this.reset}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t\t<span style={{marginRight:'5px'}}>\r\n\t\t\t\t\t\t\t\t收件人：\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\t\tdata={emails}\r\n\t\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'emails')}\r\n\t\t\t\t\t\t\t\ttitle={\"添加收件人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\tdata={userIds}\r\n\t\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'userIds')}\r\n\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\ttitle={\"添加收件人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={24} className=\"mt15\">\r\n\t\t\t\t\t\t\t<span style={{marginRight:'5px'}}>\r\n\t\t\t\t\t\t\t\t抄送人：\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\t\tdata={ccEmails}\r\n\t\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'ccEmails')}\r\n\t\t\t\t\t\t\t\ttitle={\"添加抄送人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\tdata={ccUserIds}\r\n\t\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'ccUserIds')}\r\n\t\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\t\ttitle={\"添加抄送人\"}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<div className=\"w tc mt15\">\r\n\t\t\t\t\t\t<Button type=\"primary\" onClick={this.sendReport}>点击发送邮件</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default CommonEmail2;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/CommonEmail2.js","/*\r\n* 详情表单\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport EditeMeeting from \"@/components/digitalOrg/EditeMeeting\";\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.store = this.props.store;\r\n    this.state = {\r\n      addAssignments: [],\r\n      newAddignments: [],\r\n      audioSrc:  \"\",\r\n      fileName: \"\",\r\n      isEdit: false,  // 默认详情态\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n      this.setState({\r\n        newAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n        addAssignments: [],\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.onRef(this);\r\n  }\r\n\r\n  // 同步\r\n  onAsync = (type, id, index) => {\r\n    this.props.onAsync(type, id, index);\r\n  }\r\n\r\n  // 删除字段\r\n  remove = (index) => {\r\n    let customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    customList.splice(index, 1);\r\n    this.setState({\r\n      addAssignments: Object.assign([], customList)\r\n    });\r\n  };\r\n\r\n  handleAdd = () => {\r\n    let customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    if (customList.some((item) => {\r\n      return item.name == \"\" || item.name == null;\r\n    })) {\r\n      message.warn(\"任务名是必填项\");\r\n      return false;\r\n    }\r\n    if (customList.some((item) => {\r\n      return item.userInformations.length == 0\r\n    })) {\r\n      message.warn(\"负责人是必填项\");\r\n      return false;\r\n    }\r\n    this.setState({\r\n      addAssignments: [...customList, {\r\n        \"name\": \"\",\r\n        \"userInformations\": [],\r\n      }]\r\n    });\r\n  }\r\n\r\n  updateState = (type, data) => {\r\n    this.setState({\r\n      [type]: Object.assign([], data)\r\n    });\r\n  }\r\n\r\n  // 人员选择更新\r\n  updatePerson = (index, userIds) => {\r\n    let fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    fields[index].userInformations = Object.assign([], userIds)\r\n    this.setState({\r\n      addAssignments: fields\r\n    });\r\n  }\r\n\r\n  onChange = (index, e) => {\r\n    let fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n    fields[index].name = e.target.value;\r\n    this.setState({\r\n      addAssignments: fields\r\n    });\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const {addAssignments} = this.state;\r\n    // 校验下一步\r\n    if (!addAssignments.some((item) => {\r\n      return (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n    })) {\r\n      if (addAssignments.some((item) => {\r\n        return item.name == \"\" || item.name == null;\r\n      })) {\r\n        message.warn(\"任务名是必填项\");\r\n        return false;\r\n      }\r\n      if (addAssignments.some((item) => {\r\n        return item.userInformations.length == 0\r\n      })) {\r\n        message.warn(\"负责人是必填项\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    const detail = addAssignments.filter((item)=>{\r\n      return !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n    }).map(item=>Object.assign(item, {type: 1}))\r\n\r\n    /*let {detailData} = this.props;\r\n\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t});\r\n*/\r\n    this.props.handleAddNew(detail);\r\n  }\r\n\r\n  // 取消\r\n  handleCalc = () => {\r\n    this.setState({\r\n      addAssignments: Object.assign([]),\r\n      audioSrc: \"\",\r\n      fileName: \"\"\r\n    });\r\n  }\r\n\r\n  clickChange = (e) => {\r\n    const {item} = e.item.props;\r\n    this.setState({\r\n      audioSrc: item.filePath,\r\n      fileName: item.fileName\r\n    });\r\n  }\r\n\r\n  // 切换编辑\r\n  hanndleChangeEdit = () => {\r\n    this.store.changeCanEdit()\r\n    .then((res)=>{\r\n      // 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n      if (res) {\r\n        const {userId, userName} = res;\r\n        const userid = localStorage.getItem(\"userid\");\r\n        if (userId==userid) {\r\n          this.setState({\r\n            isEdit: !this.state.isEdit\r\n          }, ()=>{\r\n            this.store.isEdit = this.state.isEdit;\r\n          });\r\n        } else {\r\n          Modal.warning({\r\n            title: userName+'正在编辑中'\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // 取消\r\n  handleCancle = () => {\r\n    this.setState({\r\n      isEdit: !this.state.isEdit\r\n    }, ()=>{\r\n      this.store.isEdit = this.state.isEdit;\r\n    });\r\n  }\r\n\r\n  onRef = (ref) => {\r\n    this.child = ref\r\n  }\r\n\r\n  appendAliyundata=(base64, audioKey) => {\r\n\t\tthis.store.appendToAliyunData({base64Data:base64, key:audioKey, position:this.store.aliyunAppendData.nextPosition})\r\n  }\r\n\r\n  reSetAliyundata = ()=>{\r\n\t\tthis.store.aliyunAppendData = {\r\n\t\t\tid:'',\r\n\t\t\tposition:0,\r\n\t\t\tnextPosition:0,\r\n\t\t\tkey:'',\r\n\t\t\tsuccess:0\r\n\t\t}\r\n\t}\r\n\r\n  render() {\r\n    const formItemLayoutWithOutLabel = {\r\n      wrapperCol: {\r\n        xs: {span: 24, offset: 0},\r\n        sm: {span: 20, offset: 0},\r\n      }\r\n    };\r\n    const formItemLayoutLabel = {\r\n      wrapperCol: {\r\n        xs: {span: 24, offset: 0},\r\n        sm: {span: 20, offset: 3},\r\n      }\r\n    };\r\n    let {detailData,visible} = this.props;\r\n    const journalMain = detailData.journalMain || {};\r\n    const journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n    const assignments = detailData.assignments || [];\r\n    const sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n    const atts = detailData.atts == null ? [] : detailData.atts;\r\n    const attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n      return Object.assign({}, {\r\n        uid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n        name: vitem.fileName,\r\n        status: 'done',\r\n        url: vitem.filePath,\r\n        fileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n        fileName:vitem.fileName,\r\n        filePath: vitem.filePath,\r\n        id: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n      })\r\n    })\r\n    const audio = detailData.audio==null?[]:detailData.audio;\r\n    const {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n    const {isEdit} = this.store;\r\n    const dropDown = (\r\n        <Dropdown\r\n            overlay={<Menu>\r\n              {audio.map((item,index)=>{\r\n                return <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n              })}\r\n            </Menu>}>\r\n          <a className=\"ant-dropdown-link\"\r\n             style={{position: \"absolute\", right: 0,top: 0 }}\r\n             onClick={e => e.preventDefault()}>\r\n            {audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n          </a>\r\n        </Dropdown>\r\n    );\r\n    const username = localStorage.getItem(\"username\");\r\n    // 当前行是否有修改权限\r\n    let isShow = journalMain.userName==username;\r\n\r\n    return (<div className=\"w pr\">\r\n          <div style={{\r\n            cursor: 'pointer',\r\n            position: 'absolute',\r\n            right: '0',\r\n            top: '0',\r\n            zIndex: '5'\r\n          }}>\r\n            {!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n          </div>\r\n          {/*详情态*/}\r\n          {!isEdit? <Form {...formItemLayoutWithOutLabel}>\r\n            <Form.Item colon={false} className=\"detail_form_bold\">\r\n              <div className=\"detail_form pr\">\r\n                <p className=\"form_title\">{journalMain.title}\r\n                  <span style={{\r\n                    display: 'inline-block',\r\n                    maxWidth: '500px',\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    paddingLeft: '10px'\r\n                  }}>\r\n                                {journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n                                  return <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n                                })}\r\n                            </span>\r\n                </p>\r\n                <p className=\"form_name\">\r\n                  {journalMain.userName}\r\n                  <span className=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n                  <CommentList\r\n                      store={this.store}\r\n                      detailData={detailData}\r\n                      scrollToAnchor={this.props.scrollToAnchor}\r\n                  />\r\n                </p>\r\n                {audio.length>0&&dropDown}\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  right: 0,\r\n                  top: '30px'\r\n                }}>\r\n                  {audioSrc?<div><ReactAudioPlayer\r\n                      src={audioSrc||\"\"}\r\n                      controls\r\n                  /></div>:null}\r\n                </div>\r\n              </div>\r\n            </Form.Item>\r\n            <Form.Item label=\"\"\r\n                       colon={false}\r\n                       className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议主题</span><span className=\"form_nextname\">{sub.title}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议日期</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议时长</span><span className=\"form_nextname\">{sub.hours}小时</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议地点</span><span className=\"form_nextname\">{sub.place}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\"\r\n                       colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">参会人员</span><span className=\"form_nextname\">{sub.people}</span>\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议目标</span>\r\n            </Form.Item>\r\n            <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.target}}></div>\r\n            <Form.Item label=\"\"\r\n                       colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议纪要</span>\r\n            </Form.Item>\r\n            <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">会议结论</span>\r\n            </Form.Item>\r\n            <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.conclusion}}></div>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n              <span className=\"detail_form_bold_title\">下一步行动</span>\r\n            </Form.Item>\r\n            <Form.Item className=\"detail_form_bold\">\r\n              {assignments.map((item, index) => {\r\n                return <div>\r\n                                <span\r\n                                    className=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n                                  return vitem.userName\r\n                                }).join('、')}\r\n                                  {item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n                                      <Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n                                              type=\"link\"\r\n                                              onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n                                </span>\r\n                </div>\r\n              })}\r\n            </Form.Item>\r\n            <Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n              <span className=\"detail_form_bold_title\">附件</span>\r\n            </Form.Item>\r\n            <div style={{paddingLeft:'14px'}}>\r\n              <MyUpload\r\n                  disabled={true}\r\n                  fileList={attachments == null ? [] : attachments}\r\n              />\r\n            </div>\r\n            {/*追加任务, 第一没有权限，第二有权限*/}\r\n            {!this.props.hasJournal?\r\n                <Form.Item label=\"\"\r\n                           colon={false}\r\n                           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n                  <span className=\"detail_form_bold_title\">追加任务</span>\r\n                  {newAddignments !== undefined && newAddignments.map((item, index) => {\r\n                    return <div>\r\n                                        <span\r\n                                            className=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n                                          return vitem.userName\r\n                                        }).join('、')}\r\n                                          {item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n                                              <Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n                                                      type=\"link\"\r\n                                                      onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n                                        </span>\r\n                    </div>\r\n                  })}\r\n                </Form.Item>:<Form.Item  label=\"\"\r\n                                         colon={false}\r\n                                         className=\"detail_form_bold\">\r\n                  <span className=\"detail_form_bold_title\">追加任务</span>\r\n                  {newAddignments !== undefined && newAddignments.map((item, index) => {\r\n                    return <div>\r\n                                        <span\r\n                                            className=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n                                          return vitem.userName\r\n                                        }).join('、')}\r\n                                          {item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n                                              <Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n                                                      type=\"link\"\r\n                                                      onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n                                        </span>\r\n                    </div>\r\n                  })}\r\n                </Form.Item>}\r\n            {!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n              <Col span={12} className=\"tc\">\r\n                <div>任务名</div>\r\n              </Col>\r\n              <Col span={12} className=\"tc\">\r\n                <div>负责人</div>\r\n              </Col>\r\n            </Row>}\r\n            {addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n              return <Row key={`subname+${vindex}`}\r\n                          style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n                <Col span={12} className=\"pr\">\r\n                  <Form.Item\r\n                      label={\" \"}\r\n                      colon={false}\r\n                      labelCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 6},\r\n                      }}\r\n                      wrapperCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 16}\r\n                      }}\r\n                  >\r\n                    <Input value={vitem.name == null ? \"\" : vitem.name}\r\n                           placeholder=\"请输入\"\r\n                           onChange={this.onChange.bind(this, vindex)}/>\r\n                    <Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n                      <Button\r\n                          shape=\"circle\"\r\n                          className=\"dynamic-delete-button\"\r\n                          size=\"small\"\r\n                          icon=\"minus\"\r\n                          type=\"default\"/>\r\n                    </Popconfirm>\r\n                  </Form.Item>\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Form.Item\r\n                      label={\" \"}\r\n                      colon={false}\r\n                      labelCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 6}\r\n                      }}\r\n                      wrapperCol={{\r\n                        xs: {span: 24},\r\n                        sm: {span: 16}\r\n                      }}\r\n                  >\r\n                    <PersonAddIcon\r\n                        data={vitem.userInformations == null ? [] : vitem.userInformations}\r\n                        updatePerson={this.updatePerson.bind(this, vindex)}\r\n                    />\r\n                  </Form.Item>\r\n                </Col>\r\n              </Row>\r\n            })}\r\n            {!this.props.hasJournal ? null :\r\n                <div>\r\n                  <Form.Item {...formItemLayoutLabel}>\r\n                    <Icon onClick={this.handleAdd}\r\n                          style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n                          type=\"plus-circle\"/>\r\n                  </Form.Item>\r\n                  <Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n                    <Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n                      保存\r\n                    </Button>\r\n                    <Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n                      <Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n                        取消\r\n                      </Button>\r\n                    </Popconfirm>\r\n                  </Form.Item>\r\n                </div>}\r\n          </Form>:<EditeMeeting\r\n              onRef={this.onRef}\r\n              store={this.store}\r\n              detailData={detailData}\r\n              onCancle={this.handleCancle}\r\n              pathname={this.props.pathname}\r\n              handleDraftRoute={this.props.handleDraftRoute}\r\n              handleRoute={this.props.handleRoute}\r\n              getTable={this.props.getTable}\r\n              appendAliyundata={this.appendAliyundata}\r\n              reSetAliyundata = {this.reSetAliyundata}\r\n          />}\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DetailForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailForm.js","/*\r\n* 详情表单 月思想\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormNew extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">反思主题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">反思时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">现象与案例</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.cases}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">反思与改进</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.introspection}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务, 第一没有权限，第二有权限*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"monthlySharing\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormNew;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormMonthlySharing.js","/*\r\n* 详情表单 月思想\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormNews extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">新闻标题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">发生时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">正文内容</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"news\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormNews;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormNews.js","/*\r\n* 详情表单\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormReplay extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData, visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">复盘主题</span>\t<span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">复盘时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">复盘参与人</span><span className=\"form_nextname\">{sub.people}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">回顾目标</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.target}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">评估结果</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.assessmentResult}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">分析原因</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.analyzeReason}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结规律</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.summarizeLaw}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"replay\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormReplay;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormReplay.js","/*\r\n* 详情表单 月思想\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormSummary extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结主题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">总结内容</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"summary\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormSummary;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormSummary.js","/*\r\n* 详情表单\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormVisit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData, visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n\t\tconst formTailLayout = {\r\n\t\t\twrapperCol: { span: 22, offset: 2 },\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访时间</span><span className=\"form_nextname\">{moment(sub.time).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">交流时长</span><span className=\"form_nextname\">{sub.hours}小时</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">企业名称</span>\t<span className=\"form_nextname\">{sub.company}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">项目名称</span><span className=\"form_nextname\">{sub.project}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">项目地址</span><span className=\"form_nextname\">{sub.address}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">我方人员</span><span className=\"form_nextname\">{sub.ourPeople}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">对方人员</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Row className=\"mb5\" style={{paddingLeft:'14px'}}>\r\n\t\t\t\t\t<div style={{width:'180px', fontWeight: '600'}} className=\"fl tc\">客户姓名</div>\r\n\t\t\t\t\t<div style={{width:'180px', fontWeight: '600'}} className=\"fl tc\">职务</div>\r\n\t\t\t\t\t<div style={{width:'180px', fontWeight: '600'}} className=\"fl tc\">联系方式</div>\r\n\t\t\t\t</Row>\r\n\t\t\t\t{sub.visitPeoples&&sub.visitPeoples.map((item, index) => {\r\n\t\t\t\t\treturn <Row key={index} style={{paddingLeft:'14px'}}>\r\n\t\t\t\t\t\t<div style={{width:'180px'}} className=\"fl tc\">{item.name}</div>\r\n\t\t\t\t\t\t<div style={{width:'180px'}} className=\"fl tc\">{item.position}</div>\r\n\t\t\t\t\t\t<div style={{width:'180px'}} className=\"fl tc\">{item.phone}</div>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访目的</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.purpose}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访流程</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.process}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">拜访纪要</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.content}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">现场照片</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">对外承诺</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.promise}}></div>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold mt15\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"visit\"\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormVisit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormVisit.js","/*\r\n* 详情表单 智建美住周报\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormWeekReport extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst canEdit = detailData.canEdit==1?true:false;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = canEdit;\r\n\t\tlet isJeks = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n        let oldTime = moment(\"2021-01-24\").valueOf(); //要求是 2021年1月24日以前，老数据不变\r\n        let isOld = sub.beginTime!=undefined&&(sub.beginTime>oldTime);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t\t\t\tuserId={journalMain.userId}\r\n\t\t\t\t\t\t\t\ttemType=\"weekreport\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">周报标题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">时间范围</span><span className=\"form_nextname\">{moment(sub.beginTime).format(\"YYYY年MM月DD日\")} 至 {moment(sub.endTime).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">本周要闻</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.weekContent}}></div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t详细内容\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t一、年度重点工作检视\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t1、企业经营和现金流达标\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailBusiness}}></div>\r\n               <div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t2、建立以江阴工厂为中心的生产运营体系\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailFactory}}></div>\r\n\t\t\t\t<div className=\"edit_form_bold_week\">\r\n\t\t\t\t\t3、初步建成数字化平台\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailDigital}}></div>\r\n                <div className=\"edit_form_bold_week\">\r\n                    4、建筑产品和技术研发\r\n                </div>\r\n                <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.detailProducts}}></div>\r\n                {\r\n                    isOld?<div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            5、公司治理\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.corporateGovernance}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            二、月度重点工作看板\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.monthlyWorkBoard}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            三、各部门工作执行情况看板\r\n                        </div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            1、综合管理中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentZhglzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            2、国内营销中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentGnyxzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            3、创新营销中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentCxyxzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            4、项目管理中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentXmglzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            5、产品研发中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentCpyfzx2021}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            6、生产制造中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentSczzzx2021}}></div>\r\n                    </div>: <div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            二、项目清单看板\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.projectBoard}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            三、月度重点工作看板\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.monthlyWorkBoard}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            四、各部门工作执行情况看板\r\n                        </div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            1、产品研发中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentProduct}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            2、解决方案中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentSolution}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            3、市场营销中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentMarket}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            4、战略发展中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentStrategic}}></div>\r\n                        <div className=\"edit_form_bold_week\">\r\n                            5、运作支持中心\r\n                        </div>\r\n                        <div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.departmentSupport}}></div>\r\n                    </div>}\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"weekreport\"\r\n\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormWeekReport;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormWeekReport.js","/*\r\n* 编辑表单\r\n* 2020-07-21\r\n* dangw@bocspace.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Input, Icon, Row, Col, Button, DatePicker, message, Popconfirm, InputNumber, Spin, Checkbox} from 'antd';\r\nimport moment from 'moment';\r\nimport BraftEditor from 'braft-editor';\r\nimport 'braft-editor/dist/index.css';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport EditableTagGroup from \"@/components/digitalOrg/EditableTagGroup\";\r\nimport {showText} from \"@/utils/utils\";\r\nimport * as  mobx from 'mobx';\r\nimport {Base64} from 'js-base64';\r\nimport MyUpload from \"@/components/common/MyUploadNew\";\r\n//import EditableTagEmail from \"@/components/digitalOrg/EditableTagEmail\";\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {downloadFile} from 'utils/download';\r\n// import Audio from './Audio';\r\nimport AudioRecorder from './AudioRecorder';\r\nimport emitter from \"@/utils/events\";\r\nconst {TextArea} = Input;\r\nimport { ContentUtils } from 'braft-utils';\r\nimport MyUploadOne from \"@/components/common/MyUploadOne\";\r\nimport EditableTagEmail2 from \"@/components/digitalOrg/EditableTagEmail2\";\r\nimport ReactKindeditor from \"@/components/common/ReactKindeditor\";\r\n\r\n\r\n@inject('appStore')\r\n@observer\r\nclass EditeMeeting extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tassignments: [],\r\n\t\t\ttags: [],\r\n\t\t\ttitle: \"\",\r\n\t\t\ttime: moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tattachments: [],\r\n\t\t\tpeople: \"\",\r\n\t\t\ttarget: \"\",\r\n\t\t\tcontent: \"\",\r\n\t\t\tconclusion: \"\",\r\n\t\t\tplace: \"\",\r\n\t\t\thours: \"\",\r\n\t\t\tisLoading: false,\r\n\t\t\ttip: \"正在生成，请稍等...\",\r\n\t\t\tloading: false,\r\n\t\t\tdetailData: {},\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\taudio: [], // 录音\r\n\t\t\taudioStatus: \"\", // 录音状态\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [],\r\n\t\t\tccUserIds: [],\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {detailData} = nextProps;\r\n\t\tif (JSON.stringify(detailData) != JSON.stringify(this.props.detailData)) {\r\n\r\n\t\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\r\n\t\t\tconst assignments = detailData.assignments == null ? [] : detailData.assignments;\r\n\t\t\tconst journalMain = detailData.journalMain || {};\r\n\t\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\t\tconst audio = detailData.audio == null ? [] : detailData.audio;\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tdetailData: detailData,\r\n\t\t\t\ttitle: sub.title,\r\n\t\t\t\ttime: sub.time==null||sub.time==0?moment().format(\"YYYY-MM-DD\"):moment(sub.time).format(\"YYYY-MM-DD\"),\r\n\t\t\t\tpeople: sub.people,\r\n\t\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion,\r\n\t\t\t\tplace: sub.place,\r\n\t\t\t\thours: sub.hours,\r\n\t\t\t\tassignments: assignments,\r\n\t\t\t\ttags: journalMain.tags==null?[]:journalMain.tags.map(item=>item.name),\r\n\t\t\t\tattachments: atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tuid: vitem.id==null||vitem.id==\"\"?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\t})\r\n\t\t\t\t}),\r\n\t\t\t\temails: [], // 邮件\r\n\t\t\t\tuserIds:[], // 用户\r\n\t\t\t\taudio: audio,\r\n\t\t\t\tchecks: [],\r\n\t\t\t\tccEmails: [],\r\n\t\t\t\tccUserIds: [],\r\n\t\t\t}, ()=>{\r\n\t\t\t\t// 表单\r\n\t\t\t\tthis.props.form.setFieldsValue({\r\n\t\t\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet _this = this;\r\n\t\tlet {pathname, detailData} = _this.props;\r\n\t\t// 初始化数据\r\n\t\tif (Object.keys(detailData).length>0) {\r\n\t\t\t_this.init(detailData);\r\n\t\t}\r\n\t\t_this.props.onRef(this);\r\n\t\tif (pathname&&pathname.includes(\"/digital/draft\")&&_this.store.draftId!=\"\") {\r\n\t\t\t// 定时器\r\n\t\t\t_this.timer = setInterval(() => {\r\n\t\t\t\t// 心跳接口 30s跳动一个\r\n\t\t\t\t_this.saveAuto(0);\r\n\t\t\t}, 30000);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount () {\r\n\t\t// 页面离开时清楚定时器\r\n\t\tthis.timer&&clearInterval(this.timer);\r\n\t\tthis.timer = null;\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\thandleChange = (type, e) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: e.target.value\r\n\t\t});\r\n\t}\r\n\r\n\thandleNumChange = (type, e) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: e\r\n\t\t});\r\n\t}\r\n\r\n\tonDateChange = (date, dateString) => {\r\n\t\tthis.setState({\r\n\t\t\ttime: dateString\r\n\t\t});\r\n\t}\r\n\r\n\thandleBChange = (type, editorState) => {\r\n\t\tthis.setState({[type]: editorState});\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\tassignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tassignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\tassignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.assignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\tassignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\t// 附件\r\n\thandleAttment = (type, params) => {\r\n\t\t// 处理附件\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\tfileId: item.fileId,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tid: item.id,\r\n\t\t\t\tuid: item.uid,\r\n\t\t\t\tname: item.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: item.filePath,\r\n\t\t\t})\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], arr)\r\n\t\t});\r\n\t}\r\n\r\n\t// 自动保存\r\n\tsaveAuto = (type) => {\r\n\t\tconst {assignments, tags, title, time, attachments, people, target, content, conclusion, place, hours, audio, audioStatus} = this.state;\r\n\t\tif (type==1) {  // 保存草稿\r\n\t\t\t// 附件上传中提示\r\n\t\t\tif (this.props.appStore.journal==true) {\r\n\t\t\t\tmessage.warn(\"请等待图片/附件上传完成\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 录音提示校验\r\n\t\t\tif (audioStatus==\"recording\") {\r\n\t\t\t\tmessage.warn(\"当前正在录音中，请先结束录音\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\tlet journalSub = {\r\n\t\t\ttitle,\r\n\t\t\ttime: numTime,\r\n\t\t\tpeople,\r\n\t\t\tplace,\r\n\t\t\thours,\r\n\t\t\ttarget: target,\r\n\t\t\tcontent: content,\r\n\t\t\tconclusion: conclusion\r\n\t\t};\r\n\r\n\t\t// 保存参数\r\n\t\tconst params = {\r\n\t\t\tid: this.store.draftId,\r\n\t\t\tjournalMain: {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\ttitle: newTime + \"-会议纪要-\" + title,\r\n\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\ttype: temList.type\r\n\t\t\t},\r\n\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t}),\r\n\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\tfileId: item.fileId,\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\tid: item.id\r\n\t\t\t})),\r\n\t\t\taudio: audio\r\n\t\t}\r\n\r\n\t\tthis.store.saveJournalByType({\r\n\t\t\tjournal: params,\r\n\t\t\tsaveType: type\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res) {\r\n\t\t\t\tthis.store.draftId = res.id;\r\n\t\t\t}\r\n\t\t\tif (res&&type==1) {\r\n\t\t\t\tmessage.success(\"草稿保存成功\");\r\n\t\t\t\t// 清空数据\r\n\t\t\t\tthis.reset();\r\n\r\n\t\t\t\tconst {pathname} = this.props;\r\n\t\t\t\tif (pathname == \"/digital/draft\") {  // 当前页是草稿\r\n\t\t\t\t\temitter.emit(\"draft\", \"3\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 草稿保存成功，跳转到草稿\r\n\t\t\t\t\tif (this.props.handleDraftRoute) {\r\n\t\t\t\t\t\tthis.props.handleDraftRoute();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 手动保存草稿\r\n\tsaveDraft = () => {\r\n\t\tthis.saveAuto(1);\r\n\t}\r\n\r\n\t// 提交发布\r\n\thandleSubmit = () => {\r\n\t\tconst {assignments, tags, attachments, audio,target, content, conclusion, audioStatus} = this.state;\r\n\t\t// 附件上传中提示\r\n\t\tif (this.props.appStore.journal==true) {\r\n\t\t\tmessage.warn(\"请等待图片/附件上传完成\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 录音提示校验\r\n\t\tif (audioStatus==\"recording\") {\r\n\t\t\tmessage.warn(\"当前正在录音中，请先结束录音\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 录音正在上传\r\n\t\tif (this.props.appStore.journalAudio==true) {\r\n\t\t\tmessage.warn(\"录音正在上传中, 请等待上传完成\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\t// 校验标签\r\n\t\tif (Array.isArray(tags) && tags.length == 0) {\r\n\t\t\tmessage.warn(\"标签是必输项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验会议目标、会议纪要、会议结论\r\n\t\tif (target==\"\") {\r\n\t\t\tmessage.warn(\"会议目标是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (content==\"\") {\r\n\t\t\tmessage.warn(\"会议纪要是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (conclusion==\"\") {\r\n\t\t\tmessage.warn(\"会议结论是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验下一步\r\n\t\tif (!assignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null)&&(item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { form } = this.props;\r\n\t\t// 获取并检查表单数据\r\n\t\tform.validateFields((err, values) => {\r\n\t\t\tif (err) return;\r\n\t\t\tif (!err) {\r\n\t\t\t\tconst {title, time, people, place,hours} = values;\r\n\r\n\t\t\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\t\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\t\t\tlet journalSub = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttime: numTime,\r\n\t\t\t\t\tpeople,\r\n\t\t\t\t\tplace,\r\n\t\t\t\t\thours,\r\n\t\t\t\t\ttarget: target,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tconclusion: conclusion\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 保存参数\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: this.store.draftId,\r\n\t\t\t\t\tjournalMain: {\r\n\t\t\t\t\t\tid: \"\",\r\n\t\t\t\t\t\ttitle: newTime + `-${temList.name}-` + title,\r\n\t\t\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\t\t\ttype: temList.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t})),\r\n\t\t\t\t\taudio: audio\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({ loading: true });\r\n\t\t\t\tthis.store.saveJournalByType({\r\n\t\t\t\t\tjournal: params,\r\n\t\t\t\t\tsaveType: 2\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tmessage.success(\"发布成功\");\r\n\t\t\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t\t\t\t// 清空数据\r\n\t\t\t\t\t\tthis.reset();\r\n\r\n\t\t\t\t\t\tconst {pathname} = this.props;\r\n\t\t\t\t\t\tif (pathname == \"/digital/draft\") {  // 当前页是草稿\r\n\t\t\t\t\t\t\tif (this.props.handleRoute) {\r\n\t\t\t\t\t\t\t\tthis.props.handleRoute();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 详情页切换编辑\r\n\t\t\t\t\t\t\tif (this.props.getTable) {\r\n\t\t\t\t\t\t\t\tthis.props.getTable();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.props.onCancle) {\r\n\t\t\t\t\t\t\t\tthis.props.onCancle();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tonClose = () => {\r\n\t\tif (this.store.draftId != \"\"&&this.store.draftId != null) {  // 返回按钮\r\n\t\t\tthis.store.cancelJournal()\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"操作成功\");\r\n\t\t\t\t\tthis.props.form.resetFields();\r\n\t\t\t\t\tlet detailData = JSON.parse(JSON.stringify(this.state.detailData));\r\n\t\t\t\t\t// 清楚录音状态\r\n\t\t\t\t\t//this.child.reset();\r\n\t\t\t\t\tthis.init(detailData);\r\n\t\t\t\t\t// 详情页切换编辑\r\n\t\t\t\t\tif (this.props.onCancle) {\r\n\t\t\t\t\t\tthis.props.onCancle();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.store.draftId = \"\"; // 草稿id\r\n\t\tthis.setState({\r\n\t\t\tassignments: [],\r\n\t\t\ttags: [],\r\n\t\t\ttitle: \"\",\r\n\t\t\ttime: moment().format(\"YYYY-MM-DD\"),\r\n\t\t\tattachments: [],\r\n\t\t\tpeople:\"\",\r\n\t\t\ttarget: \"\",\r\n\t\t\tcontent: \"\",\r\n\t\t\tconclusion: \"\",\r\n\t\t\tplace:\"\",\r\n\t\t\thours:\"\",\r\n\t\t\taudio: [],\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\tisLoading: false,\r\n\t\t\taudioStatus: \"\",\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [],\r\n\t\t\tccUserIds: [],\r\n\t\t});\r\n\t}\r\n\r\n\t// 间隔3秒获取pdf地址\r\n\tgetReportUrl = (id) => {\r\n\t\tlet _this = this;\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t});\r\n\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tconst { title, time} = this.state;\r\n\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\tconst pdfName = newTime + `-${temList.name}-` + title;\r\n\r\n\t\t_this.timer22 = setInterval(() => {\r\n\t\t\t_this.store.getDownloadUrl(id).then((res) => {\r\n\t\t\t\tconst {url} = res;\r\n\t\t\t\tif (url !== null && url !== \"\") {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdownloadFile(url, pdfName);  // 直接下载pdf\r\n\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (res.code==2) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tclearInterval(_this.timer22);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 3000);\r\n\t}\r\n\r\n\t// 生成word\r\n\tcreatWord = (type) =>{\r\n\t\tconst {assignments, tags, attachments, audio} = this.state;\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\t// 校验标签\r\n\t\tif (Array.isArray(tags) && tags.length == 0) {\r\n\t\t\tmessage.warn(\"标签是必输项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验下一步\r\n\t\tif (!assignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null)&&(item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { form } = this.props;\r\n\t\t// 获取并检查表单数据\r\n\t\tform.validateFields((err, values) => {\r\n\t\t\tif (err) return;\r\n\t\t\tif (!err) {\r\n\t\t\t\tconst {title, time, people, target, content, conclusion, place,hours} = values;\r\n\t\t\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\t\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\t\t\tlet journalSub = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttime: numTime,\r\n\t\t\t\t\tpeople,\r\n\t\t\t\t\tplace,\r\n\t\t\t\t\thours,\r\n\t\t\t\t\ttarget: target,\r\n\t\t\t\t\tcontent: content,\r\n\t\t\t\t\tconclusion: conclusion\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 保存参数\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\tid: this.store.draftId,\r\n\t\t\t\t\tjournalMain: {\r\n\t\t\t\t\t\tid: \"\",\r\n\t\t\t\t\t\ttitle: newTime + `-${temList.name}-` + title,\r\n\t\t\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\t\t\ttype: temList.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t})),\r\n\t\t\t\t\taudio\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (type==1) {\r\n\t\t\t\t\tthis.store.wordDownload(param)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.store.pdfDownload(param)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tthis.getReportUrl(res);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 发送邮件\r\n\tsendReport = () => {\r\n\t\tlet _this = this;\r\n\t\tconst {emails, userIds, audio, checks, ccEmails, ccUserIds} = _this.state;\r\n\t\tconst isemailUserIds = userIds == null ? [] : userIds;\r\n\t\tconst isemails = emails == null ? [] : emails;\r\n\t\t// 选择收件人\r\n\t\tif (isemailUserIds.length == 0 && isemails.length == 0) {\r\n\t\t\tmessage.warn(\"请先选择邮件收件人\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst {assignments, tags, attachments} = this.state;\r\n\t\tconst temList = mobx.toJS(this.store.temList);\r\n\t\tlet attcs = JSON.parse(JSON.stringify(attachments));\r\n\r\n\t\t// 校验标签\r\n\t\tif (Array.isArray(tags) && tags.length == 0) {\r\n\t\t\tmessage.warn(\"标签是必输项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// 校验下一步\r\n\t\tif (!assignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null)&&(item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (assignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { form } = this.props;\r\n\t\t// 获取并检查表单数据\r\n\t\tform.validateFields((err, values) => {\r\n\t\t\tif (err) return;\r\n\t\t\tif (!err) {\r\n\t\t\t\tconst {title, time, people, place,hours} = values;\r\n\t\t\t\tconst {target, content, conclusion} = this.state;\r\n\t\t\t\tconst numTime = moment(time).valueOf(); // 时间搓\r\n\t\t\t\tconst newTime = moment(numTime).format(\"YYYYMMDD\");\r\n\t\t\t\tlet journalSub = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\ttime: numTime,\r\n\t\t\t\t\tpeople,\r\n\t\t\t\t\tplace,\r\n\t\t\t\t\thours,\r\n\t\t\t\t\ttarget: target.toHTML(),\r\n\t\t\t\t\tcontent: content.toHTML(),\r\n\t\t\t\t\tconclusion: conclusion.toHTML()\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 保存参数\r\n\t\t\t\tconst param = {\r\n\t\t\t\t\tid: this.store.draftId,\r\n\t\t\t\t\tjournalMain: {\r\n\t\t\t\t\t\tid: \"\",\r\n\t\t\t\t\t\ttitle: newTime + `-${temList.name}-` + title,\r\n\t\t\t\t\t\tuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tuserName: localStorage.getItem('username'),\r\n\t\t\t\t\t\ttags: tags.map(item => Object.assign({}, {id: \"\", name: item})),\r\n\t\t\t\t\t\ttype: temList.type\r\n\t\t\t\t\t},\r\n\t\t\t\t\tjournalSub: Base64.encode(JSON.stringify(journalSub)),\r\n\t\t\t\t\tassignments: assignments.filter((item)=>{\r\n\t\t\t\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tatts: attcs == null ? [] : attcs.map(item => Object.assign({\r\n\t\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t})),\r\n\t\t\t\t\taudio\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tjournal: param,\r\n\t\t\t\t\temails: emails,\r\n\t\t\t\t\tuserIds: userIds == null ? [] : userIds.map(item => item.userId),\r\n\t\t\t\t\tattType: checks.map(item=>typeof item ==\"string\"?Number(item):item),\r\n\t\t\t\t\tccEmails,\r\n\t\t\t\t\tccUserIds: ccUserIds == null ? [] : ccUserIds.map(item => item.userId)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.store.sendEmail(params)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tif (res == true) {\r\n\t\t\t\t\t\t\tmessage.success(\"邮件发送成功\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinit = (detailData) => {\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\r\n\t\tconst assignments = detailData.assignments == null ? [] : detailData.assignments;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst audio = detailData.audio == null ? [] : detailData.audio;\r\n\r\n\t\tthis.setState({\r\n\t\t\tdetailData: detailData,\r\n\t\t\ttitle: sub.title,\r\n\t\t\ttime: sub.time==null||sub.time==0?moment().format(\"YYYY-MM-DD\"):moment(sub.time).format(\"YYYY-MM-DD\"),\r\n\t\t\tpeople: sub.people,\r\n\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion,\r\n\t\t\tplace: sub.place,\r\n\t\t\thours: sub.hours,\r\n\t\t\tassignments: assignments,\r\n\t\t\ttags: journalMain.tags==null?[]:journalMain.tags.map(item=>item.name),\r\n\t\t\tattachments: atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: vitem.id==null||vitem.id==\"\"?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\t})\r\n\t\t\t}),\r\n\t\t\temails: [], // 邮件\r\n\t\t\tuserIds:[], // 用户\r\n\t\t\taudio: audio,\r\n\t\t\taudioStatus: \"\",\r\n\t\t\tchecks: [],\r\n\t\t\tccEmails: [],\r\n\t\t\tccUserIds: [],\r\n\t\t}, ()=>{\r\n\t\t\t// 表单\r\n\t\t\tthis.props.form.setFieldsValue({\r\n\t\t\t\ttarget: sub.target==null||sub.target==\"\"?\"\":sub.target,\r\n\t\t\t\tcontent: sub.content==null||sub.content==\"\"?\"\":sub.content,\r\n\t\t\t\tconclusion: sub.conclusion==null||sub.conclusion==\"\"?\"\":sub.conclusion,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tupdateAudioStaus = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: data\r\n\t\t});\r\n\t}\r\n\r\n\tonRefAudio = (ref) => {\r\n\t\tthis.audio = ref\r\n\t}\r\n\r\n\tsaveAttachment = (type, params) => {\r\n\t\tlet arr = [];\r\n\t\tparams.length && params.map((item) => {\r\n\t\t\tarr.push({\r\n\t\t\t\ttype: 'IMAGE',\r\n\t\t\t\turl: item.filePath,\r\n\t\t\t})\r\n\t\t});\r\n\t\tlet newArray = ContentUtils.insertMedias(this.state[type], arr);\r\n\t\tthis.setState({\r\n\t\t\t[type]: newArray\r\n\t\t}, ()=> {\r\n\t\t\tthis.props.form.setFieldsValue({\r\n\t\t\t\t[type]: newArray\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonChangeAttc = (checkedValues) =>{\r\n\t\tthis.setState({\r\n\t\t\tchecks: checkedValues\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\trender() {\r\n\t\tconst {assignments, tags, title, time, attachments, conclusion, content, target, hours, people, place, loading, emails, userIds, audio, checks,ccEmails, ccUserIds} = this.state;\r\n\t\tconst {tagList, ossData} = this.store;\r\n\t\tconst excludeControls = [\r\n\t\t\t'undo', 'redo', 'separator',\r\n\t\t\t'font-size', 'line-height', 'letter-spacing', 'separator',\r\n\t\t\t'text-color', 'underline', 'strike-through', 'bold', 'separator',\r\n\t\t\t'remove-styles', 'separator', 'text-indent', 'text-align', 'separator', 'hr', 'separator',\r\n\t\t\t'clear'\r\n\t\t];\r\n\t\tconst disabledDate = (current) => {\r\n\t\t\treturn current > moment();\r\n\t\t}\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst imageControls = [\r\n\t\t\t'align-left', // 设置图片居左\r\n\t\t\t'align-center', // 设置图片居中\r\n\t\t\t'align-right', // 设置图片居右\r\n\t\t\t'size',\r\n\t\t\t'remove'\r\n\t\t]\r\n\t\tconst options = [\r\n\t\t\t{ label: 'Word文档作为附件', value: '0' },\r\n\t\t\t{ label: 'PDF文档作为附件', value: '1' }\r\n\t\t];\r\n\t\treturn (\r\n\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t<Form.Item wrapperCol={{\r\n\t\t\t\t\t\t\t\txs: {span: 24, },\r\n\t\t\t\t\t\t\t\tsm: {span: 24},\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">\r\n\t\t\t\t\t\t\t{(title==\"\"||title==null)||(time==\"\"||time==null)?null: moment(time).format(\"YYYYMMDD\") + \"-会议纪要-\" + title}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">\r\n\t\t\t\t\t\t\t{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<AudioRecorder\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\t\twidth: '300px',\r\n\t\t\t\t\t\t\t\theight: '300px',\r\n\t\t\t\t\t\t\t\tzIndex: 3,\r\n\t\t\t\t\t\t\t\ttextAlign: 'right'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t\t\taudio={audio}\r\n\t\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t\t\tupdateAudioStaus={this.updateAudioStaus}\r\n\t\t\t\t\t\t\tonRef={this.onRefAudio}\r\n\t\t\t\t\t\t\tappendAliyundata={this.props.appendAliyundata}\r\n\t\t\t\t\t\t\treSetAliyundata = {this.props.reSetAliyundata}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<EditableTagGroup\r\n\t\t\t\t\t\ttagList={mobx.toJS(tagList)}\r\n\t\t\t\t\t\ttags={tags}\r\n\t\t\t\t\t\tupdateState={this.updateState}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议主题\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('title', {\r\n\t\t\t\t\t\tinitialValue: title || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<Input\r\n\t\t\t\t\t\tmaxLength={15}\r\n\t\t\t\t\t          placeholder=\"请输入（不超过15字）\"\r\n\t\t\t\t\t          onChange={this.handleChange.bind(this, 'title')}/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议日期\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('time', {\r\n\t\t\t\t\t\t\tinitialValue: moment(time) || '',\r\n\t\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)(\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdisabledDate={disabledDate}\r\n\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\tonChange={this.onDateChange}/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议时长\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('hours', {\r\n\t\t\t\t\t\tinitialValue: hours || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<InputNumber\r\n\t\t\t\t\t\tonChange={this.handleNumChange.bind(this, 'hours')}\r\n\t\t\t\t\t\tplaceholder=\"请输入数字\"\r\n\t\t\t\t\t\tstyle={{width: '177px'}}/>)}\r\n\t\t\t\t\t<span className=\"ml5\">小时</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议地点\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('place', {\r\n\t\t\t\t\t\tinitialValue: place || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<TextArea onChange={this.handleChange.bind(this, 'place')} autoSize={{minRows: 1}}\r\n\t\t\t\t\t             placeholder=\"请输入\"/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"参会人员\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('people', {\r\n\t\t\t\t\t\tinitialValue: people || '',\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(<TextArea onChange={this.handleChange.bind(this, 'people')} autoSize={{minRows: 1}}\r\n\t\t\t\t\t             placeholder=\"请输入\"/>)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label={<span><span style={{\r\n\t\t\t\t\tfontWeight: \"700\",\r\n\t\t\t\t\tmarginRight: \"4px\",\r\n\t\t\t\t\tcolor: \"#f5222d\",\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\tfontFamily: \"SimSun, sans-serif\"\r\n\t\t\t\t}}>*</span>会议目标</span>} colon={false} className=\"edit_form_bold\" style={{marginBottom: '3px'}}></Form.Item>\r\n\t\t\t\t<ReactKindeditor\r\n\t\t\t\t\tvalue={target}\r\n\t\t\t\t\tonChange={this.handleBChange.bind(this, 'target')}\r\n\t\t\t\t\tid=\"target\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Item label={<span><span style={{\r\n\t\t\t\t\tfontWeight: \"700\",\r\n\t\t\t\t\tmarginRight: \"4px\",\r\n\t\t\t\t\tcolor: \"#f5222d\",\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\tfontFamily: \"SimSun, sans-serif\"\r\n\t\t\t\t}}>*</span>会议纪要</span>} colon={false} className=\"edit_form_bold\" style={{marginBottom: '3px'}}></Form.Item>\r\n\t\t\t\t<ReactKindeditor\r\n\t\t\t\t\tvalue={content}\r\n\t\t\t\t\tonChange={this.handleBChange.bind(this, 'content')}\r\n\t\t\t\t\tid=\"content\"\r\n\t\t\t\t/>\r\n\t\t\t\t<Form.Item label={<span><span style={{\r\n\t\t\t\t\tfontWeight: \"700\",\r\n\t\t\t\t\tmarginRight: \"4px\",\r\n\t\t\t\t\tcolor: \"#f5222d\",\r\n\t\t\t\t\tfontSize: \"14px\",\r\n\t\t\t\t\tfontFamily: \"SimSun, sans-serif\"\r\n\t\t\t\t}}>*</span>会议结论</span>} colon={false} className=\"edit_form_bold\" style={{marginBottom: '3px'}}></Form.Item>\r\n\t\t\t\t<ReactKindeditor\r\n\t\t\t\t\tvalue={conclusion}\r\n\t\t\t\t\tonChange={this.handleBChange.bind(this, 'conclusion')}\r\n\t\t\t\t\tid=\"conclusion\"\r\n\t\t\t\t/>\r\n\t\t\t\t{/*<Form.Item label=\"会议目标\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('target', {\r\n\t\t\t\t\t\tinitialValue: target,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<BraftEditor\r\n\t\t\t\t\t\t\tfontSizes={[\r\n\t\t\t\t\t\t\t\t12, 14, 16, 18, 20, 24,\r\n\t\t\t\t\t\t\t\t28, 30, 32, 36, 40, 48,\r\n\t\t\t\t\t\t\t\t56, 64\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tonChange={this.handleBChange.bind(this, 'target')}\r\n\t\t\t\t\t\t\tclassName=\"my-editor\"\r\n\t\t\t\t\t\t\tcontrols={excludeControls}\r\n\t\t\t\t\t\t\tcontentStyle={{\r\n\t\t\t\t\t\t\t\tminHeight: 150,\r\n\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\toverflowY: 'scroll',\r\n\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\textendControls={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkey: 'antd-uploader',\r\n\t\t\t\t\t\t\t\t\ttype: 'component',\r\n\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t<MyUploadOne\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment.bind(this, \"target\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\timageControls={imageControls}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议纪要\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('content', {\r\n\t\t\t\t\t\tinitialValue: content,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<BraftEditor\r\n\t\t\t\t\t\t\tfontSizes={[\r\n\t\t\t\t\t\t\t\t12, 14, 16, 18, 20, 24,\r\n\t\t\t\t\t\t\t\t28, 30, 32, 36, 40, 48,\r\n\t\t\t\t\t\t\t\t56, 64\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tvalue={content}\r\n\t\t\t\t\t\t\tonChange={this.handleBChange.bind(this, 'content')}\r\n\t\t\t\t\t\t\tclassName=\"my-editor\"\r\n\t\t\t\t\t\t\tcontrols={excludeControls}\r\n\t\t\t\t\t\t\tcontentStyle={{\r\n\t\t\t\t\t\t\t\tminHeight: 150,\r\n\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\toverflowY: 'scroll',\r\n\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\textendControls={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkey: 'antd-uploader',\r\n\t\t\t\t\t\t\t\t\ttype: 'component',\r\n\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t<MyUploadOne\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment.bind(this, \"content\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\timageControls={imageControls}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"会议结论\" className=\"edit_form_bold\">\r\n\t\t\t\t\t{getFieldDecorator('conclusion', {\r\n\t\t\t\t\t\tinitialValue: conclusion,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '该项是必填',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<BraftEditor\r\n\t\t\t\t\t\t\tfontSizes={[\r\n\t\t\t\t\t\t\t\t12, 14, 16, 18, 20, 24,\r\n\t\t\t\t\t\t\t\t28, 30, 32, 36, 40, 48,\r\n\t\t\t\t\t\t\t\t56, 64\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tonChange={this.handleBChange.bind(this, 'conclusion')}\r\n\t\t\t\t\t\t\tvalue={conclusion}\r\n\t\t\t\t\t\t\tclassName=\"my-editor\"\r\n\t\t\t\t\t\t\tcontrols={excludeControls}\r\n\t\t\t\t\t\t\tcontentStyle={{\r\n\t\t\t\t\t\t\t\tminHeight: 150,\r\n\t\t\t\t\t\t\t\tmaxHeight: 400,\r\n\t\t\t\t\t\t\t\toverflowY: 'scroll',\r\n\t\t\t\t\t\t\t\theight: 'auto',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\textendControls={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tkey: 'antd-uploader',\r\n\t\t\t\t\t\t\t\t\ttype: 'component',\r\n\t\t\t\t\t\t\t\t\tcomponent: (\r\n\t\t\t\t\t\t\t\t\t\t<MyUploadOne\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={this.saveAttachment.bind(this, \"conclusion\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\timageControls={imageControls}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>*/}\r\n\t\t\t\t<Form.Item label=\"下一步行动\" colon={false} className=\"edit_form_bold\"></Form.Item>\r\n\t\t\t\t<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t{assignments!==undefined&&assignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"附件\" className=\"edit_form_bold\">\r\n\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\tsaveAttachment={this.handleAttment.bind(this, 'attachments')}\r\n\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\t\tlistType=\"picture-card\"\r\n\t\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t\t\tjournalType=\"journal\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"内容生成\" className=\"edit_form_bold\">\r\n\t\t\t\t\t<Spin tip={this.state.tip} spinning={this.state.isLoading} delay={100}>\r\n\t\t\t\t\t\t<Button type=\"link\" onClick={this.creatWord.bind(this, \"1\")}>点击生成并存储为Word文档</Button>\r\n\t\t\t\t\t\t<Button className=\"ml20\" type=\"link\" onClick={this.creatWord.bind(this, \"2\")}>点击生成并存储为PDF文档</Button>\r\n\t\t\t\t\t</Spin>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"内容发送\" className=\"edit_form_bold clearfix\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{position: 'relative', top: '4px'}}\r\n\t\t\t\t\t\tclassName=\"fl\" type=\"link\" onClick={this.sendReport}>点击发送邮件</Button>\r\n\t\t\t\t\t<div className=\"fl\" style={{width:'275px'}}>\r\n\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\tclassName=\"attc_checks\"\r\n\t\t\t\t\t\t\tvalue={checks}\r\n\t\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t\tonChange={this.onChangeAttc}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<div className=\"fl mr25 ml15\">\r\n\t\t\t\t\t\t<span>收件人：</span>\r\n\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\ttitle=\"添加收件人地址\"\r\n\t\t\t\t\t\t\tdata={emails}\r\n\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'emails')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"fl\" style={{minWidth:'80px'}}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={userIds}\r\n\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'userIds')}\r\n\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\ttitle=\"添加收件人\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t\t<div className=\"fl mr25 ml15\">\r\n\t\t\t\t\t\t<span>抄送人：</span>\r\n\t\t\t\t\t\t<EditableTagEmail2\r\n\t\t\t\t\t\t\ttitle=\"添加抄送人地址\"\r\n\t\t\t\t\t\t\tdata={ccEmails}\r\n\t\t\t\t\t\t\tupdateState={this.updateState.bind(this, 'ccEmails')}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"fl\" style={{minWidth:'80px'}}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={ccUserIds}\r\n\t\t\t\t\t\t\tupdatePerson={this.updateState.bind(this, 'ccUserIds')}\r\n\t\t\t\t\t\t\tdisabled={false}\r\n\t\t\t\t\t\t\ttitle=\"添加抄送人\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\tsm: {span: 24}\r\n\t\t\t\t\t}}\r\n                    className=\"clearfix tr mt20 pl20 pr20 fixed_bottom\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: this.props.appStore.collapsed?\"calc(100% - 470px)\":\" calc(100% - 590px)\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Button className=\"fl\"\r\n\t\t\t\t\t        shape=\"round\"\r\n\t\t\t\t\t        style={{\r\n\t\t\t\t\t        \tposition: 'relative',\r\n\t\t\t\t\t\t        top: '4px'\r\n\t\t\t\t\t        }}\r\n\t\t\t\t\t        type=\"primary\"\r\n\t\t\t\t\t        onClick={this.saveDraft}>\r\n\t\t\t\t\t\t保存草稿\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消本次编辑吗?\" onConfirm={() => this.onClose()}>\r\n\t\t\t\t\t\t<Button shape=\"round\" style={{marginRight: 8}}>\r\n\t\t\t\t\t\t\t返回\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<Button shape=\"round\"\r\n\t\t\t\t\t        loading={loading}\r\n\t\t\t\t\t        onClick={this.handleSubmit}\r\n\t\t\t\t\t        type=\"primary\">\r\n\t\t\t\t\t\t提交发布\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst editForm = Form.create({})(EditeMeeting);\r\nexport default editForm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/EditeMeeting.js","/*\r\n* 共享编辑\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Icon, Input, Col, Row, Modal, Avatar, message, Button, Empty} from 'antd';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport * as _ from 'lodash'\r\n\r\nconst colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae', '#F08080', '#EEE685', '#9400D3', '#D1EEEE', '#90EE90']; // 十个颜色\r\n\r\n@inject('UserStore')\r\n@observer\r\nclass PersonEdit extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\ttext: '',\r\n\t\t\tvisible: false,\r\n\t\t\toldSelect: this.props.data, // 已选择的人员,\r\n\t\t\tdefaultData: [], // 默认数据\r\n\t\t\tdata: [], // 已选择标记的数据\r\n\t\t\tfilterData: [], // 筛选数据\r\n\t\t}\r\n\t\tthis.getData = this.getData.bind(this);\r\n\t\tthis.handleClickDebounce = _.debounce(this.getData, 500, {'maxWait': 1000});\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tthis.setState({\r\n\t\t\toldSelect: nextProps.data\r\n\t\t}, () => {\r\n\t\t\tthis.init();\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst params = \"\";\r\n\t\t// 未选的全部用户\r\n\t\tthis.props.UserStore.getRole(params).then((res) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdefaultData: res.body.map((item) => Object.assign(item, {selected: false})),\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.init();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// 初始化\r\n\tinit = () => {\r\n\t\tlet defaultDatas = JSON.parse(JSON.stringify(this.state.defaultData));\r\n\t\t//  将已选定的用户做标记\r\n\t\tlet arr = defaultDatas.map((item) => {\r\n\t\t\tlet obj = {}\r\n\t\t\tif ([...this.state.oldSelect].some(v => v === item.id)) {\r\n\t\t\t\tobj = Object.assign(item, {selected: true})\r\n\t\t\t} else {\r\n\t\t\t\tobj = Object.assign(item, {selected: false})\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], arr)\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.handleClickDebounce.cancel();\r\n\t}\r\n\r\n\t// 提交\r\n\thandleOk = () => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst users = dataArray.filter((res) => {\r\n\t\t\treturn res.selected == true\r\n\t\t}).map((item, index) => {\r\n\t\t\treturn item.id;\r\n\t\t});\r\n\r\n\t\t// 保存\r\n\t\tthis.store.saveSharedEditing(users).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\t\t\t\tthis.handleCancel();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// 取消\r\n\thandleCancel = () => {\r\n\t\tthis.setState({\r\n\t\t\tvisible: false,\r\n\t\t\ttext: \"\",\r\n\t\t\tdata: Object.assign([], this.state.defaultData),\r\n\t\t\toldSelect: this.props.data\r\n\t\t});\r\n\t\tthis.props.onClose();\r\n\t};\r\n\r\n\t// 点击列表选中\r\n\thandClick = (param) => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selected: true}))\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], dataArray)\r\n\t\t})\r\n\t}\r\n\r\n\t// 点击列表删除\r\n\thandClickDel = (param) => {\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(this.state.data));\r\n\t\tconst dindex = dataArray.findIndex((item) => {\r\n\t\t\treturn item.id == param.id\r\n\t\t})\r\n\t\tdataArray.splice(dindex, 1, Object.assign(param, {selected: false}))\r\n\t\tthis.setState({\r\n\t\t\tdata: Object.assign([], dataArray)\r\n\t\t})\r\n\t}\r\n\r\n\t// 模糊搜索\r\n\tonChange = (e) => {\r\n\t\tthis.setState({\r\n\t\t\ttext: _.trim(e.target.value)\r\n\t\t});\r\n\t\tthis.handleClickDebounce()\r\n\t}\r\n\r\n\tgetData() {\r\n\t\tconst {text, data} = this.state;\r\n\t\tlet dataArray = JSON.parse(JSON.stringify(data));\r\n\t\tlet filterData = dataArray.filter(item => (item.realname).indexOf(text) > -1 || (item.phone).indexOf(text) > -1)\r\n\t\tthis.setState({\r\n\t\t\tfilterData: filterData\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {data, oldSelect, filterData, text, defaultData} = this.state;\r\n\t\tconst {disabled, title, visible} = this.props;\r\n\t\tlet isFilter = text == \"\" || text == null;\r\n\t\tconst activeData = isFilter ? data : filterData;  // 当前数据\r\n\t\treturn (<Modal\r\n\t\t\t\tzIndex=\"1099\"\r\n\t\t\t\tmaskClosable={false}\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tokText={'提交'}\r\n\t\t\t\ttitle={title||\"添加负责人\"}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonOk={this.handleOk}\r\n\t\t\t\tonCancel={this.handleCancel}\r\n\t\t\t>\r\n\t\t\t\t<Row type=\"flex\" justify=\"space-between\" className=\"\">\r\n\t\t\t\t\t<Col span={12} className='pr20'>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tvalue={text}\r\n\t\t\t\t\t\t\tplaceholder=\"输入姓名/手机号\"\r\n\t\t\t\t\t\t\tsuffix={<Icon type=\"search\"/>}\r\n\t\t\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Scrollbars\r\n\t\t\t\t\t\t\tautoHide\r\n\t\t\t\t\t\t\tautoHideTimeout={1000}\r\n\t\t\t\t\t\t\tautoHideDuration={200}\r\n\t\t\t\t\t\t\tautoHeight\r\n\t\t\t\t\t\t\tautoHeightMin={0}\r\n\t\t\t\t\t\t\tautoHeightMax={350}\r\n\t\t\t\t\t\t\tthumbMinSize={30}\r\n\t\t\t\t\t\t\tuniversal={true}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ul className=\"userlist_ul\">\r\n\t\t\t\t\t\t\t\t{activeData.length > 0 && activeData.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\treturn <li\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"pr\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={this.handClick.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_name\">{item.realname}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_station\">{item.station}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"ul_email\">{item.email}</div>\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop: '10px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tright: '15px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'rgba(75,164,190,1)'\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={item.selected ? \"active\" : \"hidden\"} type=\"check\"/>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</Scrollbars>\r\n\t\t\t\t\t\t{activeData.length == 0 ?\r\n\t\t\t\t\t\t\t<Empty\r\n\t\t\t\t\t\t\t\timage=\"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original\"\r\n\t\t\t\t\t\t\t\timageStyle={{\r\n\t\t\t\t\t\t\t\t\theight: 60,\r\n\t\t\t\t\t\t\t\t\tmarginTop: \"30px\"\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdescription={\r\n\t\t\t\t\t\t\t\t\t\"暂无匹配\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</Empty>\r\n\t\t\t\t\t\t\t: null}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tl\" style={{\r\n\t\t\t\t\t\tminHeight: '350px',\r\n\t\t\t\t\t\tborderLeft: '1px solid #e6e6e6'\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<p className=\"pl20\">已选成员({data && data.filter((res) => {\r\n\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t}).length})</p>\r\n\t\t\t\t\t\t<ul className=\"userlist_ul_del\">\r\n\t\t\t\t\t\t\t{data.filter((res) => {\r\n\t\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t\t}).length > 0 && data.filter((res) => {\r\n\t\t\t\t\t\t\t\treturn res.selected == true\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn <li\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\tclassName=\"pr\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.handClickDel.bind(this, item)}>\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'inlineBlock',\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: colorList[index % 10],\r\n\t\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\r\n\t\t\t\t\t\t\t\t\t\t}} size=\"small\">\r\n\t\t\t\t\t\t\t\t\t\t{item.realname.slice(0, 1)}\r\n\t\t\t\t\t\t\t\t\t</Avatar> {/*颜色随机取值*/}\r\n\t\t\t\t\t\t\t\t\t<span className=\"ul_name\">{item.realname}</span>\r\n\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\ttop: '13px',\r\n\t\t\t\t\t\t\t\t\t\t\tright: '15px',\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: '16px',\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: 'rgba(184,80,74,1)',\r\n\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"userlist_ul_icon\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"close\"/>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nexport default PersonEdit;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/PersonEdit.js","/*\r\n* 详情表单 工厂周报\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Form, Button, message, Input, Icon, Row, Col, Tag, Popconfirm, Typography, Menu, Dropdown, Modal} from 'antd';\r\nimport {showText} from '@/utils/utils';\r\nimport moment from 'moment';\r\nimport {Base64} from 'js-base64';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport ReactAudioPlayer from 'react-audio-player';\r\nimport CommentList from \"@/components/digitalOrg/CommentList\";\r\nimport EditeVisit from \"@/components/digitalOrg/EditeVisit\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\nconst {Text} = Typography;\r\n\r\n@observer\r\nclass DetailFormFactoryreport extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\taddAssignments: [],\r\n\t\t\tnewAddignments: [],\r\n\t\t\taudioSrc:  \"\",\r\n\t\t\tfileName: \"\",\r\n\t\t\tisEdit: false,  // 默认详情态\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.detailData) != JSON.stringify(this.props.detailData)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tnewAddignments: nextProps.detailData.addAssignments == null ? [] : nextProps.detailData.addAssignments,\r\n\t\t\t\taddAssignments: [],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 同步\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.props.onAsync(type, id, index);\r\n\t}\r\n\r\n\t// 删除字段\r\n\tremove = (index) => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tcustomList.splice(index, 1);\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([], customList)\r\n\t\t});\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (customList.some((item) => {\r\n\t\t\treturn item.userInformations.length == 0\r\n\t\t})) {\r\n\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: [...customList, {\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"userInformations\": []\r\n\t\t\t}]\r\n\t\t});\r\n\t}\r\n\r\n\tupdateState = (type, data) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], data)\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (index, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].userInformations = Object.assign([], userIds)\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (index, e) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.addAssignments));\r\n\t\tfields[index].name = e.target.value;\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: fields\r\n\t\t});\r\n\t}\r\n\r\n\thandleSubmit = () => {\r\n\t\tconst {addAssignments} = this.state;\r\n\t\t// 校验下一步\r\n\t\tif (!addAssignments.some((item) => {\r\n\t\t\treturn (item.name == \"\" || item.name == null) && (item.userInformations.length == 0)\r\n\t\t})) {\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.name == null;\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"任务名是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (addAssignments.some((item) => {\r\n\t\t\t\treturn item.userInformations.length == 0\r\n\t\t\t})) {\r\n\t\t\t\tmessage.warn(\"负责人是必填项\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*let {detailData} = this.props;\r\n\t\tlet detail = JSON.parse(JSON.stringify(detailData));\r\n\t\tdetail.addAssignments = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t});*/\r\n\r\n\t\tconst detail = addAssignments.filter((item)=>{\r\n\t\t\treturn !((item.name == \"\" || item.name == null)&&(item.userInformations.length == 0))\r\n\t\t}).map(item=>Object.assign(item, {type: 1}))\r\n\t\tthis.props.handleAddNew(detail);\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCalc = () => {\r\n\t\tthis.setState({\r\n\t\t\taddAssignments: Object.assign([]),\r\n\t\t\taudioSrc: \"\",\r\n\t\t\tfileName: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tclickChange = (e) => {\r\n\t\tconst {item} = e.item.props;\r\n\t\tthis.setState({\r\n\t\t\taudioSrc: item.filePath,\r\n\t\t\tfileName: item.fileName\r\n\t\t});\r\n\t}\r\n\r\n\t// 切换编辑\r\n\thanndleChangeEdit = () => {\r\n\t\tthis.store.changeCanEdit()\r\n\t\t.then((res)=>{\r\n\t\t\t// 判断当前的权限, 是当前人员继续编辑，存在编辑时给出提示\r\n\t\t\tif (res) {\r\n\t\t\t\tconst {userId, userName} = res;\r\n\t\t\t\tconst userid = localStorage.getItem(\"userid\");\r\n\t\t\t\tif (userId==userid) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisEdit: !this.state.isEdit\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: userName+'正在编辑中'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 取消\r\n\thandleCancle = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t}, ()=>{\r\n\t\t\tthis.store.isEdit = this.state.isEdit;\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 3},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 20},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayoutWithOutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 0},\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst formItemLayoutLabel = {\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24, offset: 0},\r\n\t\t\t\tsm: {span: 20, offset: 3},\r\n\t\t\t}\r\n\t\t};\r\n\t\tlet {detailData,visible} = this.props;\r\n\t\tconst journalMain = detailData.journalMain || {};\r\n\t\tconst journalSub = Base64.decode(detailData.journalSub == undefined ? \"\" : detailData.journalSub) || {};\r\n\t\tconst assignments = detailData.assignments || [];\r\n\t\tconst sub = typeof journalSub == \"string\" ? JSON.parse(journalSub) : {};\r\n\t\tconst atts = detailData.atts == null ? [] : detailData.atts;\r\n\t\tconst attachments = atts==null?[]:atts.map((vitem, vindex) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id==null?\"!\" + uuidv4():vitem.id,\r\n\t\t\t})\r\n\t\t})\r\n\t\tconst audio = detailData.audio==null?[]:detailData.audio;\r\n\t\tconst canEdit = detailData.canEdit==1?true:false;\r\n\t\tconst {addAssignments, newAddignments, audioSrc, fileName} = this.state;\r\n\t\tconst {isEdit} = this.store;\r\n\t\tconst username = localStorage.getItem(\"username\");\r\n\t\t// 当前行是否有修改权限\r\n\t\tlet isShow = canEdit;\r\n\t\tlet isJeks = journalMain.userName==username;\r\n\t\tconst dropDown = (\r\n\t\t\t<Dropdown\r\n\t\t\t\toverlay={<Menu>\r\n\t\t\t\t{audio.map((item,index)=>{\r\n\t\t\t\t\treturn <Menu.Item key={index} onClick={this.clickChange} item={item}>{item.fileName}</Menu.Item>\r\n\t\t\t\t})}\r\n\t\t\t</Menu>}>\r\n\t\t\t\t<a className=\"ant-dropdown-link\"\r\n\t\t\t\t   style={{position: \"absolute\", right: 0,top: 0 }}\r\n\t\t\t\t   onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t{audio.length>0? fileName||audio[0].fileName : null}<Icon type=\"down\" />\r\n\t\t\t\t</a>\r\n\t\t\t</Dropdown>\r\n\t\t);\r\n        let oldTime = moment(\"2021-01-24\").valueOf(); //要求是 2021年1月24日以前，老数据不变\r\n        let isOld = sub.beginTime!=undefined&&(sub.beginTime>oldTime);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"w pr\">\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tright: '0',\r\n\t\t\t\t\ttop: '0',\r\n\t\t\t\t\tzIndex: '5'\r\n\t\t\t\t}}>\r\n\t\t\t\t\t{!isEdit&&isShow?<Button className={visible==true?\"hidden\":\"\"} type=\"link\" onClick={this.hanndleChangeEdit}>编辑</Button>:null}\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*详情态*/}\r\n\t\t\t\t{!isEdit?\r\n\t\t\t<Form {...formItemLayoutWithOutLabel}>\r\n\t\t\t\t<Form.Item colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<div className=\"detail_form pr\">\r\n\t\t\t\t\t\t<p className=\"form_title\">{journalMain.title}\r\n\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tmaxWidth: '500px',\r\n\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tpaddingLeft: '10px'\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{journalMain.tags == null ? null : journalMain.tags.map((item) => {\r\n\t\t\t\t\t\t\t\treturn <Tag color=\"gold\" className=\"ml5\">{item.name}</Tag>\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p className=\"form_name\">{journalMain.userName}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_time\">{showText(moment(journalMain.createTime).format(\"YYYY-MM-DD HH:mm\"), moment(journalMain.createTime).format(\"HH:mm\"))}</span>\r\n\t\t\t\t\t\t\t<CommentList\r\n\t\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\t\tscrollToAnchor={this.props.scrollToAnchor}\r\n\t\t\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t\t\t\tuserId={journalMain.userId}\r\n\t\t\t\t\t\t\t\ttemType=\"weekreport\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t{audio.length>0&&dropDown}\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t\ttop: '30px'\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{audioSrc?<ReactAudioPlayer\r\n\t\t\t\t\t\t\t\tsrc={audioSrc||\"\"}\r\n\t\t\t\t\t\t\t\tcontrols\r\n\t\t\t\t\t\t\t/>:null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false}\r\n\t\t\t\t           className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">周报标题</span><span className=\"form_nextname\">{sub.title}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">时间范围</span><span className=\"form_nextname\">{moment(sub.beginTime).format(\"YYYY年MM月DD日\")} 至 {moment(sub.endTime).format(\"YYYY年MM月DD日\")}</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">一、本周重点工作</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.weekContent}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">二、工厂建设</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.factoryBuild}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">三、 产线建设</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.productionLine}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">四、产品及技术</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.productsTechnologies}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">五、运营支持</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.operationalSupport}}></div>\r\n\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t           colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">六、各版块工作看板</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html: sub.board}}></div>\r\n\r\n\r\n\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">下一步行动</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item className=\"detail_form_bold\">\r\n\t\t\t\t\t{assignments.map((item, index) => {\r\n\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"assignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item label=\"\" colon={false} className=\"detail_form_bold mt15\">\r\n\t\t\t\t\t<span className=\"detail_form_bold_title\">附件</span>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<div style={{paddingLeft:'14px'}}>\r\n\t\t\t\t<MyUpload\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tfileList={attachments == null ? [] : attachments}\r\n\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*追加任务*/}\r\n\t\t\t\t{!this.props.hasJournal?\r\n\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t           colon={false}\r\n\t\t\t\t\t           className={newAddignments!==undefined&&newAddignments.length==0?\"hidden\":\"detail_form_bold\"}>\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>:<Form.Item  label=\"\"\r\n\t\t\t\t\t                         colon={false}\r\n\t\t\t\t\t                         className=\"detail_form_bold\">\r\n\t\t\t\t\t\t<span className=\"detail_form_bold_title\">追加任务</span>\r\n\t\t\t\t\t\t{newAddignments !== undefined && newAddignments.map((item, index) => {\r\n\t\t\t\t\t\t\treturn <div>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form_nextname\">{index + 1} - {item.name} {item.userInformations == null || item.userInformations.length == 0 ? null : \" -- \" + item.userInformations.map((vitem) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn vitem.userName\r\n\t\t\t\t\t\t\t\t\t\t}).join('、')}\r\n\t\t\t\t\t\t\t\t\t\t\t{item.isSync == 1 ? <Text type=\"warning\" className=\"ml15\">已同步</Text> :\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className={!this.props.hasJournal || item.isSync == 1 ? \"hidden\" : \"ml15\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t        type=\"link\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t        onClick={this.onAsync.bind(this, \"addAssignments\", item.id, index)}>同步到公司任务清单</Button>}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Form.Item>}\r\n\t\t\t\t{!this.props.hasJournal ? null :<Row className=\"mb10\">\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>任务名</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={12} className=\"tc\">\r\n\t\t\t\t\t\t<div>负责人</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>}\r\n\t\t\t\t{addAssignments !== undefined && addAssignments.map((vitem, vindex) => {\r\n\t\t\t\t\treturn <Row key={`subname+${vindex}`}\r\n\t\t\t\t\t            style={{paddingTop: '10px', borderBottom: \"1px dashed #E6E6E6\"}}>\r\n\t\t\t\t\t\t<Col span={12} className=\"pr\">\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input value={vitem.name == null ? \"\" : vitem.name}\r\n\t\t\t\t\t\t\t\t       placeholder=\"请输入\"\r\n\t\t\t\t\t\t\t\t       onChange={this.onChange.bind(this, vindex)}/>\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.remove(vindex)}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tshape=\"circle\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"dynamic-delete-button\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\ticon=\"minus\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"default\"/>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col span={12}>\r\n\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\tlabel={\" \"}\r\n\t\t\t\t\t\t\t\tcolon={false}\r\n\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 6}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\tsm: {span: 16}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\tdata={vitem.userInformations == null ? [] : vitem.userInformations}\r\n\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, vindex)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t})}\r\n\t\t\t\t\t\t{!this.props.hasJournal ? null :\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel}>\r\n\t\t\t\t\t\t\t<Icon onClick={this.handleAdd}\r\n\t\t\t\t\t\t\t      style={{cursor: 'pointer', margin: '10px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t\t\t      type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item {...formItemLayoutLabel} className={addAssignments !== undefined && addAssignments.length==0?\"hidden\":\"tr\"}>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleSubmit} type=\"primary\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Popconfirm placement=\"top\" title=\"确定要取消吗?\" onConfirm={() => this.handleCalc()}>\r\n\t\t\t\t\t\t\t\t<Button className=\"ml15\" type=\"default\" shape=\"round\">\r\n\t\t\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>}\r\n\t\t\t</Form>:<EditeVisit\r\n\t\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\tdetailData={detailData}\r\n\t\t\t\t\t\tonCancle={this.handleCancle}\r\n\t\t\t\t\t\tpathname={this.props.pathname}\r\n\t\t\t\t\t\thandleDraftRoute={this.props.handleDraftRoute}\r\n\t\t\t\t\t\thandleRoute={this.props.handleRoute}\r\n\t\t\t\t\t\tgetTable={this.props.getTable}\r\n\t\t\t\t\t\ttemType=\"factoryreport\"\r\n\t\t\t\t\t\tisWeekShow={isJeks}\r\n\t\t\t\t\t/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailFormFactoryreport;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailFormFactoryreport.js","/*\r\n* 详情弹框\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Drawer, message} from 'antd';\r\nimport {inject, observer} from 'mobx-react'\r\nimport * as mobx from 'mobx';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nimport DetailForm from './DetailForm';\r\nimport DetailFormMonthlySharing from './DetailFormMonthlySharing';\r\nimport DetailFormVisit from './DetailFormVisit';\r\nimport DetailFormSummary from './DetailFormSummary';\r\nimport DetailFormReplay from './DetailFormReplay';\r\nimport DetailFormNews from './DetailFormNews';\r\nimport DetailFormWeekReport from './DetailFormWeekReport';\r\nimport DigitalComment from \"@/components/digitalOrg/DigitalComment\";\r\n\r\nimport 'braft-editor/dist/index.css';\r\n\r\n@withRouter\r\n@observer\r\nclass DetailModal extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.store.syncAssignment(id).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"同步成功\");\r\n\t\t\t\t// 前端同步数据\r\n\t\t\t\tlet detailData = JSON.parse(JSON.stringify(this.store.detailData));\r\n\t\t\t\tlet assignments = detailData[type];\r\n\t\t\t\tassignments[index].isSync = 1; // 同步成功\r\n\t\t\t\tthis.store.detailData = Object.assign(detailData, {\r\n\t\t\t\t\t[type]: assignments\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存追加任务\r\n\thandleAddNew = (detail) =>{\r\n\t\tthis.store.saveAssignments(detail).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\t\t\t\t// 重查\r\n\t\t\t\tthis.store.getJournalById(this.store.selestedId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.store.detailData = Object.assign({}, res);\r\n\t\t\t\t\tthis.child.handleCalc();\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tconst {onClose} = this.props;\r\n\t\tonClose();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {visible} = this.props;\r\n\t\tconst {detailData, hasJournal, temList} = this.store;\r\n\t\tconst temType = mobx.toJS(temList).type;\r\n\t\treturn (\r\n\t\t\t<Drawer\r\n\t\t\t\twidth={\"70%\"}\r\n\t\t\t\ttitle=\"详情\"\r\n\t\t\t\tplacement=\"right\"\r\n\t\t\t\tclosable={true}\r\n\t\t\t\tonClose={this.reset}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t>\r\n\t\t\t\t{temType===\"meeting\"?<DetailForm\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"monthlySharing\"?<DetailFormMonthlySharing\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"visit\"?<DetailFormVisit\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"summary\"?<DetailFormSummary\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"replay\"?<DetailFormReplay\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"news\"?<DetailFormNews\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"weekreport\"?<DetailFormWeekReport\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t<DigitalComment\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t/>\r\n\t\t\t</Drawer>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailModal;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailModal.js","/*\r\n* 详情弹框\r\n* dangw\r\n* */\r\nimport React from 'react';\r\nimport {Drawer, message} from 'antd';\r\nimport {inject, observer} from 'mobx-react'\r\nimport * as mobx from 'mobx';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nimport DetailForm from './DetailForm';\r\nimport DetailFormMonthlySharing from './DetailFormMonthlySharing';\r\nimport DetailFormVisit from './DetailFormVisit';\r\nimport DetailFormSummary from './DetailFormSummary';\r\nimport DetailFormReplay from './DetailFormReplay';\r\nimport DetailFormNews from './DetailFormNews';\r\nimport DetailFormWeekReport from './DetailFormWeekReport';\r\nimport DetailFormFactoryreport from './DetailFormFactoryreport';\r\nimport DigitalComment from \"@/components/digitalOrg/DigitalComment\";\r\n\r\nimport 'braft-editor/dist/index.css';\r\n\r\n@withRouter\r\n@observer\r\nclass DetailOfficeModal extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\r\n\t}\r\n\r\n\tonAsync = (type, id, index) => {\r\n\t\tthis.store.syncAssignment(id).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"同步成功\");\r\n\t\t\t\t// 前端同步数据\r\n\t\t\t\tlet detailData = JSON.parse(JSON.stringify(this.store.detailData));\r\n\t\t\t\tlet assignments = detailData[type];\r\n\t\t\t\tassignments[index].isSync = 1; // 同步成功\r\n\t\t\t\tthis.store.detailData = Object.assign(detailData, {\r\n\t\t\t\t\t[type]: assignments\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 保存追加任务\r\n\thandleAddNew = (detail) =>{\r\n\t\tthis.store.saveAssignments(detail).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\");\r\n\t\t\t\t// 重查\r\n\t\t\t\tthis.store.getJournalById(this.store.selestedId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.store.detailData = Object.assign({}, res);\r\n\t\t\t\t\tthis.child.handleCalc();\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref\r\n\t}\r\n\r\n\treset = () => {\r\n\t\tconst {onClose} = this.props;\r\n\t\tonClose();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {visible} = this.props;\r\n\t\tconst {detailData, hasJournal, temList} = this.store;\r\n\t\tconst temType = mobx.toJS(temList).type;\r\n\t\treturn (\r\n\t\t\t<Drawer\r\n\t\t\t\twidth={\"70%\"}\r\n\t\t\t\ttitle=\"详情\"\r\n\t\t\t\tplacement=\"right\"\r\n\t\t\t\tclosable={true}\r\n\t\t\t\tonClose={this.reset}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t>\r\n\t\t\t\t{temType===\"meeting\"?<DetailForm\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"monthlySharing\"?<DetailFormMonthlySharing\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"visit\"?<DetailFormVisit\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"summary\"?<DetailFormSummary\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"replay\"?<DetailFormReplay\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"news\"?<DetailFormNews\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"weekreport\"?<DetailFormWeekReport\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{temType===\"factoryreport\"?<DetailFormFactoryreport\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tdetailData={mobx.toJS(detailData)}\r\n\t\t\t\t\thasJournal={hasJournal}\r\n\t\t\t\t\tonAsync={this.onAsync}\r\n\t\t\t\t\thandleAddNew={this.handleAddNew}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t<DigitalComment\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t/>\r\n\t\t\t</Drawer>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailOfficeModal;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/digitalOrg/DetailOfficeModal.js"],"sourceRoot":""}