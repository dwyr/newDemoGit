{"version":3,"sources":["webpack:///./src/components/delivery/DailyShare.js","webpack:///./src/components/common/MyUpload.js?ee17**********","webpack:///./src/components/delivery/EditableTable.js?da31","webpack:///./src/components/delivery/EditableTableTomorrowMaterial.js?4ba4"],"names":["mobx","dateFormat","DailyView","withRouter","observer","props","getProjectDetail","id","store","then","res","projectDetail","getDailyById","dailyDetail","Object","assign","getProgressStateInfo","state","info","showDailyDocumnet","dailyDocuments","toJS","length","map","item","index","fileUrl","name","getWeatherIconUrl","weather","iconUrl","handleSelectedDaily","setState","currentItem","getDailyListPage","dailyParmas","projectId","dailyList","body","pageIndex","pageSize","totalCount","editDaily","dailyPageState","delDaily","resolveNoArriveMaterials","result","noArriveMaterials","filter","showName","join","DeliveryStore","nextProps","nextContext","search","location","projectid","url","parse","query","dailyid","undefined","title","progressState","showModal","width","height","windPower","createUserName","createTime","format","paddingLeft","__html","overallDescription","material","contents","tomorrowContents","display","workersCount","materialInfluence","tomorrowWeather","tomorrowWindPower","tomorrowPlanArriveMaterial","paddingBottom","assistance","summary","contentRemarks","React","Component","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","uid","UploadToOss","Promise","resolve","reject","multipartUpload","data","catch","error","MyUpload","getDocumentUrl","Config","journal","journalSchemas","handleChange","status","fileList","oldFileList","JSON","stringify","newFileList","originFileObj","host","fileId","fileName","filePath","array","saveAttachment","changeSrc","obj","beforeUpload","accept","acceptDefault","type","split","includes","message","warn","isLt2M","size","loading","journalType","reader","FileReader","readAsDataURL","onloadend","handlePreview","test","previewImage","previewVisible","isAssetTypeAnImage","ext","indexOf","toLowerCase","getExt","lastIndexOf","substr","imageArray","src","alt","downloadUrl","visible","activeIndex","findIndex","handleCancel","isImage","downloadImage","onDownload","x","XMLHttpRequest","open","responseType","onload","e","response","send","cancel","appStore","ossData","securityToken","bpm","getSts","bpmSchemas","str","multiple","disabled","onChange","listType","onPreview","showUploadList","showDownloadIcon","uploadButton","position","top","right","fontSize","color","minHeight","bind","backgroundSize","maxHeight","toolbars","key","concat","render","onClick","activeImage","utils","Option","Select","EditableContext","createContext","EditableRow","form","EditableFormRow","Form","create","EditableCell","editing","userIds","detailWorks","toggleEdit","input","focus","save","record","handleSave","validateFields","values","currentTarget","onBlur","handlePositionChange","value","getProductCategoryList","handleProductCategoryChange","getProductDetailList","handleProductDetailChange","selectedDetailItem","Array","isArray","productDetailId","planBeginTime","planEndTime","productDetail","palnProgress","actualProgress","handleNumberActualProgressSave","handleNumberPalnProgressSave","handleDateTime","date","valueOf","renderOption","renderOption2","onFocus","getDetailWorkByPostionId","renderCell","children","dataIndex","handleDelete","positionList","dailyDate","tableType","margin","getFieldDecorator","rules","required","initialValue","float","node","editable","restProps","EditableTable","getPositionList","hash","window","getDailyObjList","selectedItem","productCategoryList","getDailyContentDetailList","getDailyMaterialList","dailyMaterialList","dataSource","saveData","handleAdd","primaryData","count","newData","row","splice","saveExpandedRows","_this","keys","push","expandedKeys","handleView","subTaskDis","onCalac","isEdit","treeData","updateTreeData","activeObj","subtask","clearState","onRow","subTasks","treeType","subNumber","param","params","positionId","dateTime","subtasks","activeSub","productDetailList","components","cell","columnEle","align","text","lineHeight","columns","col","onCell","getDailyTomorrowMaterial","tomorrowProgress","handleNumberTomorrowProgressSave","EditableTableTomorrowMaterial","productCategoryId"],"mappings":"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","file":"js/39-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n*交付管理-日报查看\r\n*qiufh@bocspace.cn\r\n*/\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport moment from 'moment';\r\nimport * as mobx from 'mobx';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {Upload, DatePicker, Row, Col, Form, Card, Switch, List, Input, InputNumber, Checkbox, message, Radio, Button, Icon, Spin, Modal, Popconfirm} from 'antd';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport EditableTable from './EditableTable';\r\nimport EditableTableTomorrowMaterial from './EditableTableTomorrowMaterial';\r\nimport MyUpload from \"@/components/common/MyUpload\";\r\nimport url from \"url\";\r\nconst dateFormat = 'YYYY-MM-DD HH:mm:ss';\r\n\r\n@inject('DeliveryStore')\r\n@withRouter\r\n@observer\r\nexport default class DailyView extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.store = this.props.DeliveryStore;\r\n\t\tthis.state = {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet search = this.props.location.search;\r\n\t\tconst projectid = url.parse(search, true).query.projectid;\r\n\t\tconst dailyid = url.parse(search, true).query.dailyid;\r\n\t\tif(projectid!==undefined&&dailyid!==undefined){\r\n\t\t\tthis.getProjectDetail(projectid);\r\n\t\t\tthis.getDailyById(dailyid);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetProjectDetail = (id)=>{\r\n\t\tthis.store.getProjectDetail({'id':id}).then((res)=>{\r\n\t\t\tthis.store.projectDetail = res\r\n\t\t})\r\n\t}\r\n\r\n\tgetDailyById = (id) =>{\r\n\t\tthis.store.getDailyById({\"id\":id}).then((res)=>{\r\n\t\t\tthis.store.dailyDetail = Object.assign({},res);\r\n\t\t})\r\n\t}\r\n\r\n\tgetProgressStateInfo=(state)=>{\r\n\t\tlet info = \"\";\r\n\t\tif(state===0){\r\n\t\t\tinfo = \"正常\"\r\n\t\t}\r\n\t\tif(state===1){\r\n\t\t\tinfo = \"提前\"\r\n\t\t}\r\n\t\tif(state===2){\r\n\t\t\tinfo = \"延迟\"\r\n\t\t}\r\n\t\treturn info;\r\n\t}\r\n\r\n\tshowDailyDocumnet=()=>{\r\n\t\tconst { projectDetail, dailyDetail } = this.store;\r\n\t\tlet dailyDocuments = [];\r\n\t\tif(mobx.toJS(dailyDetail).dailyDocuments!==null&&mobx.toJS(dailyDetail).dailyDocuments.length>0){\r\n\t\t\tdailyDocuments = mobx.toJS(dailyDetail).dailyDocuments.map((item, index)=>{\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\"fileId\":null,\r\n\t\t\t\t\t\"fileName\":item.fileUrl,\r\n\t\t\t\t\t\"filePath\":item.fileUrl,\r\n\t\t\t\t\t\"id\":\"\",\r\n\t\t\t\t\t\"name\":item.name,\r\n\t\t\t\t\t\"status\":\"done\",\r\n\t\t\t\t\t\"uid\":uuidv4(),\r\n\t\t\t\t\t\"url\":item.fileUrl\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn dailyDocuments\r\n\r\n\t}\r\n\r\n\tgetWeatherIconUrl=(weather)=>{\r\n\t\tlet iconUrl = \"./images/delivery/weather/clearday.png\";\r\n\t\tif(weather===\"晴\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/clearday.png\";\r\n\t\t}\r\n\t\tif(weather===\"多云\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/cloud.png\";\r\n\t\t}\r\n\t\tif(weather===\"阴\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/overcast.png\";\r\n\t\t}\r\n\t\tif(weather===\"雨\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/rain.png\";\r\n\t\t}\r\n\t\tif(weather===\"雪\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/snow.png\";\r\n\t\t}\r\n\t\tif(weather===\"大风\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/wind.png\";\r\n\t\t}\r\n\t\tif(weather===\"龙卷风\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/tornado.png\";\r\n\t\t}\r\n\t\tif(weather===\"雾霾\"){\r\n\t\t\ticonUrl = \"./images/delivery/weather/haze.png\";\r\n\t\t}\r\n\t\treturn iconUrl;\r\n\r\n\t}\r\n\r\n\thandleSelectedDaily=(item,index)=>{\r\n\t\tthis.setState({currentItem:index})\r\n\t\tthis.store.getDailyById({\"id\":item.id}).then((res)=>{\r\n\t\t\tthis.store.dailyDetail = Object.assign({},res);\r\n\t\t})\r\n\t}\r\n\r\n\tgetDailyListPage=()=>{\r\n\t\tconst { projectDetail } = this.store;\r\n\t\tthis.store.dailyParmas.projectId = mobx.toJS(projectDetail).id;\r\n\t\tthis.store.getDailyListPage().then((res)=>{\r\n\t\t\tthis.store.dailyList = Object.assign([], res.body);\r\n\t\t\tthis.store.dailyParmas.pageIndex = res.pageIndex;\r\n\t\t\tthis.store.dailyParmas.pageSize = res.pageSize;\r\n\t\t\tthis.store.dailyParmas.totalCount = res.totalCount;\r\n\t\t\tif(res.body.length>0){\r\n\t\t\t\tthis.handleSelectedDaily(res.body[0],0)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\teditDaily=()=>{\r\n\t\tthis.store.dailyPageState = 2; //进入日报编辑状态\r\n\t}\r\n\r\n\tdelDaily=()=>{\r\n\t\tconst { dailyDetail } = this.store;\r\n\t\tthis.store.delDaily({\"id\":dailyDetail.id}).then((res)=>{\r\n\t\t\tthis.getDailyListPage();\r\n\t\t})\r\n\t}\r\n\r\n\tresolveNoArriveMaterials=(dailyDetail)=>{\r\n\t\tlet result;\r\n\t\tif(dailyDetail.noArriveMaterials===null){\r\n\t\t\tresult = \"无\";\r\n\t\t}else if(mobx.toJS(dailyDetail).noArriveMaterials.filter((item)=>{return item===null}).length===mobx.toJS(dailyDetail).noArriveMaterials.length){\r\n\t\t\tresult = \"无\";\r\n\t\t}else{\r\n\t\t\tresult = mobx.toJS(dailyDetail).noArriveMaterials.map((item)=>{return item.showName}).join(\", \")\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\r\n\r\n\r\n\trender() {\r\n\t\tconst { } = this.state;\r\n\t\tconst { projectDetail, dailyDetail } = this.store;\r\n\r\n\t\treturn (\r\n\t\t\t<div >\r\n\t\t\t\t<div className=\"daily_view_head\">\r\n\t\t\t\t\t<div className=\"title_info\">\r\n\t\t\t\t\t\t<div className=\"daily_view_title\">{`${projectDetail.name}-${dailyDetail.title}`}</div>\r\n\t\t\t\t\t\t<div className=\"daily_view_progress\">施工进度 <span className=\"color_status\">{this.getProgressStateInfo(dailyDetail.progressState)}</span></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"buttons_zone\">\r\n\t\t\t\t\t\t<Button className=\"title\" type=\"link\" onClick={this.showModal} ><img src=\"./images/delivery/u389.png\"  style={{width:'20px', height:'20px'}} />分享</Button>\r\n\t\t\t\t\t\t<span className=\"gap\"> </span>\r\n\t\t\t\t\t\t<Button className=\"title\" type=\"link\" onClick={this.editDaily}><img src=\"./images/delivery/u1479.png\"  style={{width:'16px', height:'16px'}} />编辑</Button>\r\n\t\t\t\t\t\t<span className=\"gap\"> </span>\r\n\t\t\t\t\t\t<Popconfirm title=\"确定删除?\" onConfirm={this.delDaily}>\r\n\t\t\t\t\t\t\t<Button className=\"title\"  type=\"link\" ><img src=\"./images/delivery/u1480.png\" style={{width:'16px', height:'16px'}} />删除</Button>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"weather_author\">\r\n\t\t\t\t\t<img src={this.getWeatherIconUrl(dailyDetail.weather)} style={{width:'27px', height:'27px'}} />\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t<div className=\"weather\">\r\n\t\t\t\t\t\t\t{`${dailyDetail.weather}，${dailyDetail.windPower}`}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"author\">\r\n\t\t\t\t\t\t\t{dailyDetail.createUserName===null?'':dailyDetail.createUserName} {dailyDetail.createTime!==0?moment(dailyDetail.createTime).format(dateFormat):''}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"overall_desc\">\r\n\t\t\t\t\t<div className=\"label_info\">整体描述</div>\r\n\t\t\t\t\t<div className=\"desc_info\">\r\n\t\t\t\t\t\t{/*<p>*/}\r\n\t\t\t\t\t\t{/*\t{dailyDetail.overallDescription}*/}\r\n\t\t\t\t\t\t{/*</p>*/}\r\n\t\t\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html:dailyDetail.overallDescription}}></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">进场材料</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t{dailyDetail.material}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">今日施工内容</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<EditableTable\r\n\t\t\t\t\t\t\tid={'id'}\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdataSource={dailyDetail.contents}\r\n\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\ttableType={'today'}\r\n\t\t\t\t\t\t\tpid={''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">明日施工计划</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<EditableTable\r\n\t\t\t\t\t\t\tid={'id'}\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdataSource={dailyDetail.tomorrowContents}\r\n\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\ttableType={'tomorrow'}\r\n\t\t\t\t\t\t\tpid={''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{display:'flex'}}>\r\n\t\t\t\t\t<div className=\"daily_view_item\" >\r\n\t\t\t\t\t\t<div className=\"daily_view_label\">今日工人数量</div>\r\n\t\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t\t{dailyDetail.workersCount}人\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"daily_view_item\" >\r\n\t\t\t\t\t\t<div className=\"daily_view_label\">未按计划进场材料</div>\r\n\t\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t\t{this.resolveNoArriveMaterials(dailyDetail)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"daily_view_item\" >\r\n\t\t\t\t\t\t<div className=\"daily_view_label\">是否影响施工进度</div>\r\n\t\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t\t{dailyDetail.materialInfluence}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">现场照片</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\t\t\tlistType=\"picture-card\"\r\n\t\t\t\t\t\t\tfileList={this.showDailyDocumnet()}\r\n\t\t\t\t\t\t\tjournalType=\"journal\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">明日天气</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<div className=\"weather_info\">\r\n\t\t\t\t\t\t\t<img  src={this.getWeatherIconUrl(dailyDetail.tomorrowWeather)}  style={{width:'27px', height:'27px'}} />\r\n\t\t\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t\t\t<div className=\"weather\">\r\n\t\t\t\t\t\t\t\t\t{`${dailyDetail.tomorrowWeather}，${dailyDetail.tomorrowWindPower}`}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">明日进场材料</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<EditableTableTomorrowMaterial\r\n\t\t\t\t\t\t\tid={'id'}\r\n\t\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\t\tdataSource={dailyDetail.tomorrowPlanArriveMaterial}\r\n\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\tpid={''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">风险与协助</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\" style={{paddingBottom:'40px'}}>\r\n\t\t\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html:dailyDetail.assistance}}></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">施工总结</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t{/*<p>*/}\r\n\t\t\t\t\t\t{/*\t{dailyDetail.summary}*/}\r\n\t\t\t\t\t\t{/*</p>*/}\r\n\t\t\t\t\t\t<div className=\"deaft_content_detail\" style={{paddingLeft: '14px'}} dangerouslySetInnerHTML={{__html:dailyDetail.summary}}></div>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">备注</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<p>{dailyDetail.contentRemarks}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"split-line\"></div>\r\n\t\t\t\t{/* <div className=\"daily_view_item\">\r\n\t\t\t\t\t<div className=\"daily_view_label\">备注信息</div>\r\n\t\t\t\t\t<div className=\"daily_view_content\">\r\n\t\t\t\t\t\t<p>{dailyDetail.tomorrowPlanRemarks}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/delivery/DailyShare.js","/*\r\n* 大文件上传组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message, Modal} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\nimport Viewer from 'react-viewer';\r\nimport Config from '@/config';\r\nimport {requestPost} from \"@/utils/api\";\r\nimport journalSchemas from \"@/utils/Schemas/journal\";\r\nimport {downloadFile, download} from \"@/utils/download\";\r\nimport bpmSchemas from \"@/utils/Schemas/bpm\";\r\nimport {inject, observer} from 'mobx-react';\r\n\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\n@inject('appStore')\r\n@observer\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.appStore;\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '', // oss的key_id\r\n\t\t\t\taccess_key_secret: '', // oss的secret\r\n\t\t\t\tstsToken: '',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t\tpreviewVisible: false,\r\n\t\t\tpreviewImage: '',\r\n\t\t\tname: \"\",\r\n\t\t\tfilePath: \"\",\r\n\t\t\tvisible: false,\r\n\t\t\timageArray: [], // 图片预览\r\n\t\t\tactiveIndex: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.journalType) {\r\n\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t}\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList.map((file)=>{\r\n\t\t\t\t\tif (/\\.(doc|docx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/word_default.png'\r\n\t\t\t\t\t} else if (/\\.(xls|xlsx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/exel_default.png'\r\n\t\t\t\t\t} else if (/\\.(pdf)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/pdf.svg'\r\n\t\t\t\t\t} else if (/\\.(zip|rar)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/zip_default.png'\r\n\t\t\t\t\t} else if (/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\t\t\t\tfile.url = './images/ppt.png'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet url = file.url;\r\n\t\t\t\t\t\tif (url.includes(\"oss-cn-beijing.aliyuncs.com\")) {  // 判断图片时oss上传的\r\n\t\t\t\t\t\t\tif (url.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\t\t\t\turl = url.split(\"?\")[0];\r\n\t\t\t\t\t\t\t\tfile.url = url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfile.url = file.url + '?x-oss-process=image/resize,w_500,limit_0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfile.url = file.url\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn file;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 阿里云上传参数\r\n\t\trequestPost('getSts', Config.bpm.getSts, bpmSchemas.bpm.getSts, {})\r\n\t\t.then((res)=>{\r\n\t\t\tlet str = typeof res ==\"string\"?JSON.parse(res):res;\r\n\t\t\tif (str) {\r\n\t\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\t\taccess_key_id: str.accessKeyId,\r\n\t\t\t\t\t\taccess_key_secret: str.accessKeySecret,\r\n\t\t\t\t\t\tstsToken: str.securityToken\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetDocumentUrl = (url) => {\r\n\t\treturn requestPost('getDocumentUrl', Config.journal.getDocumentUrl, journalSchemas.journal.getDocumentUrl, {url: url})\r\n\t}\r\n\r\n\t// 只用做删除操作\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\",\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\t/*let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet _this = this;\r\n\t\t\t_this.setState({\r\n\t\t\t\tloading: true\r\n\t\t\t});\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t_this.props.saveAttachment(array);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t});\r\n\t\t\t}, 3000);*/\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\t/*let id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\t// this.props.delNode(id);\r\n\t\t\t}*/\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tthis.props.saveAttachment(array);\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新url\r\n\tchangeSrc = (res, file) => {\r\n\t\tconst {fileList, host} = this.state;\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList));\r\n\r\n\t\tconst url = host + uploadPath('path', file);\r\n\t\tlet obj = Object.assign({}, {\r\n\t\t\tuid: file.uid,\r\n\t\t\tname: file.name,\r\n\t\t\tstatus: \"done\",\r\n\t\t\turl: url,\r\n\t\t\tfileId: null,\r\n\t\t\tfileName: file.name,\r\n\t\t\tfilePath: url,\r\n\t\t\tid: \"\",\r\n\t\t});\r\n\t\tlet newFileList = [obj];\r\n\r\n\t\t// 处理附件\r\n\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\tthis.props.saveAttachment(array);\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst {accept} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tif (accept==undefined) {  // 没有传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\t//console.log(accept, file.type, type, 'accept')\r\n\t\t\tif (!acceptDefault.includes(type)) {\r\n                //message.warn(\"格式不对\");\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t} else {   // 外部传参数\r\n\t\t\tconst type = file.type.split(\"/\")[1];\r\n\t\t\tif (!accept.includes(type)) {\r\n\t\t\t\tmessage.warn(\"格式不对, 只允许上传图片\");\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = true; // 记录一次\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\t// 处理地址\r\n\t\t\t\tconst {res} = data;\r\n\t\t\t\tif (res.status&&res.status==200) {  // 单个文件上传成功\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.changeSrc(res, file);\r\n\t\t\t\t}\r\n\t\t\t}).catch((error)=>{\r\n\t\t\t\t\tmessage.error(\"文件上传失败\");\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t}, ()=>{\r\n\t\t\t\t\t\tif (this.props.journalType) {\r\n\t\t\t\t\t\t\tthis.store.journal = false; // 记录一次\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\thandlePreview = async file => {\r\n\t\t// 文档\r\n\t\tif (/\\.(doc|docx)$/.test(file.name)||/\\.(xls|xlsx)$/.test(file.name)||/\\.(pdf)$/.test(file.name)||/\\.(zip|rar)$/.test(file.name)||/\\.(ppt|pptx)$/.test(file.name)) {\r\n\t\t\tthis.getDocumentUrl(file.filePath).then((res)=>{\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: res,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}  else {  // 图片、音频\r\n\t\t\t// 文件类型判断\r\n\t\t\tfunction isAssetTypeAnImage(ext) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t'png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'psd', 'svg', 'tiff'].\r\n\t\t\t\tindexOf(ext.toLowerCase()) !== -1;\r\n\t\t\t}\r\n\r\n\t\t\t//获取后缀\r\n\t\t\tfunction getExt(filePath) {\r\n\t\t\t\t// 去掉url的问号\r\n\t\t\t\tif (filePath.indexOf(\"?\") !=-1) {\r\n\t\t\t\t\tfilePath = filePath.split(\"?\")[0];\r\n\t\t\t\t}\r\n\t\t\t\t//获取最后一个.的位置\r\n\t\t\t\tlet index= filePath.lastIndexOf(\".\");\r\n\t\t\t\t//获取后缀\r\n\t\t\t\tlet ext = filePath.substr(index+1);\r\n\t\t\t\treturn ext;\r\n\t\t\t}\r\n\r\n\t\t\tif (isAssetTypeAnImage(getExt(file.filePath))) {  // 判断是图片\r\n\t\t\t\tconst fileList = JSON.parse(JSON.stringify(this.state.fileList));\r\n\t\t\t\tlet imageArray;\r\n\t\t\t\timageArray = fileList.filter((item)=>isAssetTypeAnImage(getExt(item.filePath))).map((item)=>{\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\tsrc: item.filePath,\r\n\t\t\t\t\t\talt: item.name,\r\n\t\t\t\t\t\tdownloadUrl: item.filePath\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tvisible: true,\r\n\t\t\t\t\timageArray: Object.assign([], imageArray),\r\n\t\t\t\t\tactiveIndex: imageArray.findIndex((item)=>item.src==file.filePath)\r\n\t\t\t\t});\r\n\t\t\t} else {   // 音频\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tpreviewImage: file.filePath,\r\n\t\t\t\t\tpreviewVisible: true,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tfilePath: file.filePath\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleCancel = (type) => this.setState({[type]: false});\r\n\r\n\t// 手动下载\r\n\tdownloadUrl = () => {\r\n\t\tconst {filePath, name} = this.state;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览下载\r\n\tonDownload = (file) => {\r\n\t\tconst {filePath, name} = file;\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\t\tif (isImage) {\r\n\t\t\tdownloadFile(filePath, name);  // 直接下载pdf\r\n\t\t} else {\r\n\t\t\tthis.downloadImage(filePath, name);\r\n\t\t}\r\n\t}\r\n\r\n\t// 直接下载\r\n\tdownloadImage = (filePath, name) => {\r\n        //获取最后一个.的位置\r\n\t\tvar index= filePath.lastIndexOf(\".\");\r\n\t\t//获取后缀\r\n\t\tvar ext = filePath.substr(index+1);\r\n\r\n\t\t// 直接下载图片\r\n\t\tvar x=new XMLHttpRequest();\r\n\t\tx.open(\"GET\", filePath, true);\r\n\t\tx.responseType = 'blob';\r\n\t\tx.onload=function(e){download(x.response, name, \"image/\"+ext);}\r\n\t\tx.send();\r\n\t}\r\n\r\n\t// 取消上传\r\n\tcancel =  () =>{\r\n\t\tthis.setState({\r\n\t\t\tloading: false,\r\n\t\t}, ()=>{\r\n\t\t\tif (this.props.journalType) {\r\n\t\t\t\tthis.store.journal = false; // 清楚记录\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {previewVisible, previewImage, fileList , name, loading, visible, imageArray, activeIndex} = this.state;\r\n\t\tconst {multiple, disabled,accept, length} = this.props;\r\n\t\tconst acceptDefault = \".jpg,.jpeg,.gif,.png,.bmp,.doc,.docx,.xlsx,.xls,.pdf,.ppt,.pptx\";  // 默认值限制格式\r\n\t\tconst props = {\r\n\t\t\taccept: accept==undefined?acceptDefault:accept,\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tdisabled: disabled,\r\n\t\t\tlistType: \"picture-card\",\r\n\t\t\tonPreview: this.handlePreview,\r\n\t\t\tonDownload: this.onDownload,\r\n\t\t\tshowUploadList: {\r\n\t\t\t\tshowDownloadIcon: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst uploadButton = (\r\n\t\t\t<div className=\"pr\">\r\n\t\t\t\t<Icon type={loading?\"loading\":\"plus\"} />\r\n\t\t\t\t{loading?<div className=\"ant-upload-text\">上传中</div>:null}\r\n\t\t\t\t{loading?<Icon type=\"stop\"\r\n\t\t\t\t               title=\"取消上传\"\r\n\t\t\t\t               style={{\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\ttop: '-39px',\r\n\t\t\t\t\tright: '-22px',\r\n\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\tcolor: '#1890ff'\r\n\t\t\t\t}} onClick={this.cancel}/>:null}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tconst isImage = (/\\.(doc|docx)$/.test(name)||/\\.(xls|xlsx)$/.test(name)||/\\.(pdf)$/.test(name)||/\\.(zip|rar)$/.test(name))||(/\\.(ppt|pptx)$/.test(name));\r\n\r\n\t    return (\r\n\t\t\t<div className=\"affairs_upload\">\r\n\t\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t\t{disabled||length>=\"1\"?null:uploadButton}\r\n\t\t\t\t</Upload>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={<div>{name}\r\n\t\t\t\t\t\t<a href=\"javascript:;\" onClick={this.downloadUrl}>下载</a>\r\n\t\t\t\t\t</div>}\r\n\t\t\t\t\twidth=\"50%\"\r\n\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\tvisible={previewVisible}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tonCancel={this.handleCancel.bind(this, 'previewVisible')}>\r\n\t\t\t\t\t{isImage?<iframe\r\n\t\t\t\t\t\tsrc={previewImage}\r\n\t\t\t\t\t\twidth='100%'\r\n\t\t\t\t\t\theight='100%'\r\n\t\t\t\t\t\tstyle={{minHeight: '450px'}}\r\n\t\t\t\t\t\tframeBorder='1'>\r\n\t\t\t\t\t</iframe>:<img style={{ backgroundSize: 'conver',width: '100%', maxHeight: '400px' }} src={previewImage} alt=\"\" />}\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<Viewer\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonClose={this.handleCancel.bind(this, 'visible')}\r\n\t\t\t\t\timages={imageArray}\r\n\t\t\t\t\tactiveIndex={activeIndex}\r\n\t\t\t\t\tdownloadable={true}\r\n\t\t\t\t\tcustomToolbar={(toolbars) => {\r\n\t\t\t\t\t\treturn toolbars.filter(item=>item.key!==\"download\").concat([\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tkey: \"download\",\r\n\t\t\t\t\t\t\t\trender: (<div><i className=\"react-viewer-icon react-viewer-icon-download\"></i></div>),\r\n\t\t\t\t\t\t\t\tonClick: (activeImage) => {\r\n\t\t\t\t\t\t\t\t\tconst {src, alt} = activeImage;\r\n\t\t\t\t\t\t\t\t\tthis.downloadImage(src, alt);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/MyUpload.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tAutoComplete,\r\n\tTable,\r\n\tInput,\r\n\tSelect,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tmessage,\r\n\tInputNumber,\r\n\tnotification,\r\n\tPopover\r\n} from 'antd';\r\nimport moment from 'moment';\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport url from 'url';\r\nimport _ from 'lodash';\r\n\r\nconst { Option } = Select;\r\nconst dateFormat = 'YYYY-MM-DD';\r\n\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t\tdetailWorks: [], // 施工任务数据\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\r\n\thandlePositionChange = (value)=>{\r\n\t\tconst {record} = this.props;\r\n\t\tthis.props.getProductCategoryList(record, value);\r\n\t}\r\n\r\n\thandleProductCategoryChange = (value)=>{\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.props.getProductDetailList(value, record)\r\n\t}\r\n\r\n\thandleProductDetailChange=(value) =>{\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tconst {detailWorks} = this.state;\r\n\t\tconst selectedDetailItem = Array.isArray(detailWorks)?detailWorks.filter(item => item.productDetailId===value):[]\r\n\r\n\t\tif(selectedDetailItem.length>0){\r\n\t\t\thandleSave(Object.assign(record,{\"planBeginTime\":selectedDetailItem[0].planBeginTime, \"planEndTime\":selectedDetailItem[0].planEndTime, \"productDetail\":selectedDetailItem[0].productDetail, \"productDetailId\":selectedDetailItem[0].productDetailId, \"palnProgress\": selectedDetailItem[0].palnProgress, \"actualProgress\":selectedDetailItem[0].actualProgress}));\r\n\t\t}else{\r\n\t\t\thandleSave(Object.assign(record,{\"planBeginTime\":0, \"planEndTime\":0, \"productDetail\":value, \"productDetailId\":\"\", \"palnProgress\": 0, \"actualProgress\": 0}));\r\n\t\t}\r\n\t}\r\n\r\n\thandleNumberActualProgressSave = e => {\r\n\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\thandleSave(Object.assign(record, {\"actualProgress\":values.actualProgress}))\r\n\t\t});\r\n\t};\r\n\r\n\thandleNumberPalnProgressSave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\thandleSave(Object.assign(record, {\"palnProgress\":values.palnProgress}))\r\n\t\t});\r\n\t};\r\n\r\n\thandleDateTime=(date)=>{\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\thandleSave(Object.assign(record, {\"actualBeginTime\":date.valueOf()}))\r\n\t}\r\n\r\n\trenderOption=(item)=>{\r\n\t\treturn(\r\n\t\t\t<Option key={item.id} text={item.name}>{item.name}</Option>\r\n\t\t)\r\n\t}\r\n\r\n\trenderOption2=(item)=>{\r\n\t\treturn(\r\n\t\t\t<Option key={item.productDetailId} text={item.productDetailId}>{item.productDetail}</Option>\r\n\t\t)\r\n\t}\r\n\r\n\tonFocus = () => {\r\n\t\tconst {record, getDetailWorkByPostionId} = this.props;\r\n\t\tgetDetailWorkByPostionId(record[\"positionId\"]).then((res)=>{\r\n\t\t\tthis.setState({\r\n\t\t\t\tdetailWorks: Array.isArray(res)?res:[]\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title,  handleDelete, positionList, dailyDate, tableType} = this.props;\r\n\t\tconst {editing, detailWorks} = this.state;\r\n\t\tif (dataIndex == 'position') {  // 部位\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: tableType===\"today\"?true:false,\r\n\t\t\t\t\t\t\tmessage: `楼栋是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record['positionId'] == null ? undefined : record['positionId']===''?record['position']:record['positionId'],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: '30px',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tdataSource={positionList.map(this.renderOption)}\r\n\t\t\t\t\t\t\t\tplaceholder={'选择或输入'}\r\n\t\t\t\t\t\t\t\tstyle={{ width: \"140px\" }}\r\n\t\t\t\t\t\t\t\tonChange={this.handlePositionChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'productCategory'  ) { // 相同列\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: tableType===\"today\"?true:false,\r\n\t\t\t\t\t\t\tmessage: `产品类别是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record['productCategoryId'] == null ? undefined : record['productCategoryId'] == \"\"?record['productCategory']:record['productCategoryId'],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\tdataSource={Array.isArray(record['productCategoryList'])?record['productCategoryList'].map(this.renderOption):[]}\r\n\t\t\t\t\t\t\tplaceholder={'选择或输入'}\r\n\t\t\t\t\t\t\tstyle={{ width: \"140px\" }}\r\n\t\t\t\t\t\t\tonChange={this.handleProductCategoryChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'productDetail') { // 施工任务\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: tableType===\"today\"?true:false,\r\n\t\t\t\t\t\t\tmessage: `施工任务是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record['productDetail'],\r\n\t\t\t\t\t\t//initialValue: record['productDetailId'] == null ? undefined : record['productDetailId'] == \"\"?record['productDetail']:record['productDetailId'],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\tvalue={record['productDetail']}\r\n\t\t\t\t\t\t\t\tdisabled={record[\"position\"]==\"\"||record[\"position\"]==null?true:false}\r\n\t\t\t\t\t\t\t\tonFocus={this.onFocus}\r\n\t\t\t\t\t\t\t\t//dataSource={Array.isArray(record['productDetailList'])?record['productDetailList'].map(this.renderOption2):[]}\r\n\t\t\t\t\t\t\t\tdataSource={Array.isArray(detailWorks)?detailWorks.map(this.renderOption2):[] }\r\n\t\t\t\t\t\t\t\tplaceholder={'选择或输入'}\r\n\t\t\t\t\t\t\t\tstyle={{ width: \"140px\" }}\r\n\t\t\t\t\t\t\t\tonChange={this.handleProductDetailChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}else if ( dataIndex == 'planBeginTime'  || dataIndex == 'planEndTime' ) { // 相同列\r\n\t\t\treturn editing && false ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":moment(record[dataIndex]).format(dateFormat)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}else if ( dataIndex == 'actualBeginTime') { // 相同列\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: tableType===\"today\"?true:false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? moment() : moment(record[dataIndex]),\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tstyle={{width:'122px'}}\r\n\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\tonChange={this.handleDateTime}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex] == null || record[dataIndex] == 0 ? dailyDate : moment(record[dataIndex]).format(dateFormat)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}else if ( dataIndex == 'actualProgress') { // 实际完成比例\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: tableType===\"today\"?true:false,\r\n\t\t\t\t\t\t\tmessage: `实际完成进度是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div style={{display: \"inline-block\"}}>\r\n\t\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.handleNumberActualProgressSave}\r\n\t\t\t\t\t\t\t\tonBlur={this.handleNumberActualProgressSave}\r\n\t\t\t\t\t\t\t\tvalue={record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)} %\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if ( dataIndex == 'palnProgress') { // 计划完成比例\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div style={{display: \"inline-block\"}}>\r\n\t\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.handleNumberPalnProgressSave}\r\n\t\t\t\t\t\t\t\tonBlur={this.handleNumberPalnProgressSave}\r\n\t\t\t\t\t\t\t\tvalue={record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)} %\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"position\": \"\",\r\n\t\t\t\t\"positionId\": \"\",\r\n\t\t\t\t\"productCategory\": \"\",\r\n\t\t\t\t\"productDetail\": \"\",\r\n\t\t\t\t\"specifications\": \"\",\r\n\t\t\t\t\"unit\": \"\",\r\n\t\t\t\t\"palnProgress\": 0,\r\n\t\t\t\t\"actualProgress\": 0,\r\n\t\t\t\t\"type\": this.props.tableType==='today'?1:0,\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"position\": \"\",\r\n\t\t\t\t\t\"positionId\": \"\",\r\n\t\t\t\t\t\"productCategory\": \"\",\r\n\t\t\t\t\t\"productDetail\": \"\",\r\n\t\t\t\t\t\"specifications\": \"\",\r\n\t\t\t\t\t\"unit\": \"\",\r\n\t\t\t\t\t\"palnProgress\": 0,\r\n\t\t\t\t\t\"actualProgress\": 0,\r\n\t\t\t\t\t\"type\": this.props.tableType==='today'?1:0,\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource ===undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource ===undefined ||  this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"position\": \"\",\r\n\t\t\t\t\"positionId\": \"\",\r\n\t\t\t\t\"productCategory\": \"\",\r\n\t\t\t\t\"productDetail\": \"\",\r\n\t\t\t\t\"specifications\": \"\",\r\n\t\t\t\t\"unit\": \"\",\r\n\t\t\t\t\"palnProgress\": 0,\r\n\t\t\t\t\"actualProgress\": 0,\r\n\t\t\t\t\"type\": this.props.tableType==='today'?1:0,\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\t\tthis.getPositionList();\r\n\t}\r\n\r\n\tcomponentWillUnMount() {\r\n\r\n\t}\r\n\r\n\tgetPositionList = ()=>{\r\n\t\tlet hash = window.location.hash;\r\n\t\tconst projectId = hash.split(\"projectId=\")[1];\r\n\t\tif(projectId===undefined) {\r\n\t\t\treturn\r\n\t\t}else{\r\n\t\t\tthis.store.getDailyObjList({\r\n\t\t\t\t\"dailyId\":projectId,\r\n\t\t\t\t\"type\":0\r\n\t\t\t}).then((res)=>{\r\n\t\t\t\tthis.store.positionList = res;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tgetProductCategoryList = (record, value)=>{\r\n\t\tconst { positionList } = this.store;\r\n\t\tconst selectedItem = positionList.filter(item => item.id===value)\r\n\t\tif(selectedItem.length>0){\r\n\t\t\tthis.store.getDailyObjList({\r\n\t\t\t\t\"dailyId\":value,\r\n\t\t\t\t\"type\":1\r\n\t\t\t}).then((res)=>{\r\n\t\t\t\tthis.store.productCategoryList = res;\r\n\t\t\t\tif (record[\"positionId\"]==selectedItem[0].id) {\r\n\t\t\t\t\tthis.handleSave(Object.assign(record,{\"position\":selectedItem[0].name,\"positionId\":selectedItem[0].id, \"productCategoryList\":res}));\r\n\t\t\t\t} else {  // 切换清空\r\n\t\t\t\t\tthis.handleSave(Object.assign(record,{\"position\":selectedItem[0].name,\"positionId\":selectedItem[0].id, \"productCategoryList\":res,\r\n\t\t\t\t\t\tproductDetail: \"\", planBeginTime: null, planEndTime: null, palnProgress: 0, actualProgress: 0\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.handleSave(Object.assign(record,{\"position\":value,\"positionId\":\"\", \"productCategoryList\":[]}));\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tgetProductDetailList = (value, record)=>{\r\n\t\tconst {projectDetail } = this.store;\r\n\t\tthis.store.getDailyContentDetailList({\r\n\t\t\t\"dailyId\":value,\r\n\t\t\t\"type\":record['type']===1?0:1 //record 中的type 1 表示今日，这的type0，表示今日，1是明日...\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res.length>0){\r\n\t\t\t\tconst selectedItem = record['productCategoryList'].filter(item => item.id===value)\r\n\t\t\t\tthis.handleSave(Object.assign(record,{\"productCategory\":selectedItem[0].name, \"productCategoryId\":selectedItem[0].id, \"productDetailList\":res}));\r\n\t\t\t\tif(record['type']===1){\r\n\t\t\t\t\tthis.store.getDailyMaterialList({\"dailyId\":projectDetail.id,\"dcs\":res}).then((res)=>{\r\n\t\t\t\t\t\tthis.store.dailyMaterialList = res;\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.handleSave(Object.assign(record,{\"productCategory\":value, \"productCategoryId\":\"\", \"productDetailList\":[]}));\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tconst dataSource = [...this.state.dataSource];\r\n\t\tthis.setState({\r\n\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t});\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\t// const newData = Object.assign(primaryData, {key: count, id:\"!\"+uuidv4()});\r\n\t\tconst newData = Object.assign(primaryData, {key: count});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({\r\n\t\t\texpandedKeys: keys\r\n\t\t}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// 取消保存\r\n\tonCalac = (key) => {\r\n\t\tthis.saveExpandedRows(key);\r\n\t\tthis.store.isEdit = false;\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n\t\tthis.subtask.clearState();\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({})\r\n\t\t});\r\n\t}\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新施工任务数据\r\n\tgetDetailWorkByPostionId = (param) => {\r\n\t  const {dailyDate} = this.props;\r\n      const params = {\r\n\t\t  positionId: param,\r\n\t\t  dateTime: dailyDate==null||dailyDate==\"\"?0:moment(dailyDate).valueOf()\r\n\t  }\r\n\t return this.store.getDetailWorkByPostionId(params);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource, expandedKeys} = this.state;\r\n\t\tconst {disabled, tableType, dailyDate} = this.props;\r\n\t\tconst { positionList, productCategoryList, productDetailList } = this.store;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tlet columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: (<span><span>楼栋</span><span style={tableType===\"today\"?{color:\"red\"}:{display:\"none\"}}>*</span></span>),\r\n\t\t\t\tdataIndex: 'position',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\t/*render: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}*/\r\n\t\t\t},\r\n\t\t\t/*{\r\n\t\t\t\ttitle: (<span><span>产品类别</span><span style={tableType===\"today\"?{color:\"red\"}:{display:\"none\"}}>*</span></span>),\r\n\t\t\t\tdataIndex: 'productCategory',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t},*/\r\n\t\t\t{\r\n\t\t\t\ttitle: (<span><span>施工任务</span><span style={tableType===\"today\"?{color:\"red\"}:{display:\"none\"}}>*</span></span>),\r\n\t\t\t\tdataIndex: 'productDetail',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '计划开始时间',\r\n\t\t\t\tdataIndex: 'planBeginTime',\r\n\t\t\t\twidth: '130px',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text===null || text===0|| text===\"0\"?\"\":moment(text).format(dateFormat)}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '计划完成时间',\r\n\t\t\t\tdataIndex: 'planEndTime',\r\n\t\t\t\twidth: '130px',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t>{text===null || text===0|| text===\"0\"?\"\":moment(text).format(dateFormat)}</div>\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t];\r\n\t\tif(tableType==='today'){\r\n\t\t\tcolumnEle = columnEle.concat([\r\n\t\t  /*  {\r\n\t\t\t\ttitle: '实际开始时间',\r\n\t\t\t\tdataIndex: 'actualBeginTime',\r\n\t\t\t\twidth: '130px',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text===null || text===0|| text===\"0\"?\"\":moment(text).format(dateFormat)}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},*/\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '计划完成进度',\r\n\t\t\t\t\tdataIndex: 'palnProgress',\r\n\t\t\t\t\twidth: '160px',\r\n\t\t\t\t\teditable: !disabled,\r\n\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t\t{text}%\r\n\t\t\t\t\t\t</div>);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: (<span><span>实际完成进度</span><span style={tableType===\"today\"?{color:\"red\"}:{display:\"none\"}}>*</span></span>),\r\n\t\t\t\tdataIndex: 'actualProgress',\r\n\t\t\t\twidth: '160px',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text}%\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t}])\r\n\t\t}\r\n\t\tif(tableType==='tomorrow'){\r\n\r\n\t\t\tcolumnEle = columnEle.concat([\r\n\t\t\t{\r\n\t\t\t\ttitle: '计划施工完成进度',\r\n\t\t\t\tdataIndex: 'palnProgress',\r\n\t\t\t\twidth: '160px',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text}%\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t}])\r\n\t\t}\r\n\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t\tgetProductCategoryList:this.getProductCategoryList,\r\n\t\t\t\t\tgetProductDetailList:this.getProductDetailList,\r\n\t\t\t\t\tgetDetailWorkByPostionId: this.getDetailWorkByPostionId,\r\n\t\t\t\t\tpositionList:positionList,\r\n\t\t\t\t\tproductCategoryList:productCategoryList,\r\n\t\t\t\t\tproductDetailList:productDetailList,\r\n\t\t\t\t\tdailyDate:dailyDate,\r\n\t\t\t\t\ttableType:tableType,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '15px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/delivery/EditableTable.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tAutoComplete,\r\n\tTable,\r\n\tInput,\r\n\tSelect,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tmessage,\r\n\tInputNumber,\r\n\tnotification,\r\n\tPopover\r\n} from 'antd';\r\nimport moment from 'moment';\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport url from 'url';\r\n\r\nconst { Option } = Select;\r\nconst dateFormat = 'YYYY-MM-DD';\r\n\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\r\n\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\r\n\thandlePositionChange = (value)=>{\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.props.getProductCategoryList(record, value)\r\n\t}\r\n\r\n\thandleProductCategoryChange = (value)=>{\r\n\t\tconst {record, handleSave} = this.props;\r\n        this.props.getDailyTomorrowMaterial(value, record)\r\n\t}\r\n\r\n\thandleProductDetailChange=(value) =>{\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tconst selectedDetailItem = record['productDetailList'].filter(item => item.productDetailId===value)\r\n\t\tif(selectedDetailItem.length>0){\r\n\t\t\thandleSave(Object.assign(record,{\r\n\t\t\t\t\"planBeginTime\":selectedDetailItem[0].planBeginTime,\r\n\t\t\t\t\"planEndTime\":selectedDetailItem[0].planEndTime,\r\n\t\t\t\t\"productDetail\":selectedDetailItem[0].productDetail,\r\n\t\t\t\t\"productDetailId\":selectedDetailItem[0].productDetailId,\r\n\t\t\t\t\"showName\":selectedDetailItem[0].showName,\r\n\t\t\t\t\"tomorrowProgress\":selectedDetailItem[0].tomorrowProgress,\r\n\t\t\t}));\r\n\t\t}else{\r\n\t\t\thandleSave(Object.assign(record,{\r\n\t\t\t\t\"planBeginTime\":0,\r\n\t\t\t\t\"planEndTime\":0,\r\n\t\t\t\t\"productDetail\":\"\",\r\n\t\t\t\t\"productDetailId\":\"\",\r\n\t\t\t\t\"showName\":value,\r\n\t\t\t\t\"tomorrowProgress\":0,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleNumberTomorrowProgressSave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\thandleSave(Object.assign(record, {\"tomorrowProgress\":values.tomorrowProgress}))\r\n\t\t});\r\n\t};\r\n\r\n\trenderOption=(item)=>{\r\n\t\treturn(\r\n\t\t\t<Option key={item.id} text={item.name}>{item.name}</Option>\r\n\t\t)\r\n\t}\r\n\r\n\trenderOption2=(item,index)=>{\r\n\t\treturn(\r\n\t\t\t<Option key={item.showName} text={item.showName}>{item.showName}</Option>\r\n\t\t)\r\n\t}\r\n\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title,  handleDelete, positionList} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'position') {  // 部位\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record['positionId'] == null ? undefined : record['positionId'],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: '30px',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#f17e7e',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tdataSource={positionList.map(this.renderOption)}\r\n\t\t\t\t\t\t\t\tplaceholder={'请选择'}\r\n\t\t\t\t\t\t\t\tstyle={{ width: \"140px\" }}\r\n\t\t\t\t\t\t\t\tonChange={this.handlePositionChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '30px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '15px',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'productCategory'  ) { // 相同列\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record['productCategoryId'] == null ? undefined : record['productCategoryId'] == \"\"?record['productCategory']:record['productCategoryId'],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\tdataSource={Array.isArray(record['productCategoryList'])?record['productCategoryList'].map(this.renderOption):[]}\r\n\t\t\t\t\t\t\tplaceholder={'请选择'}\r\n\t\t\t\t\t\t\tstyle={{ width: \"140px\" }}\r\n\t\t\t\t\t\t\tonChange={this.handleProductCategoryChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}else if (dataIndex == 'productDetail') { // 相同列\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record['productDetailId'] == null ? undefined : record['productDetailId'] == \"\"?record['showName']:record['productDetailId'],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\tdataSource={Array.isArray(record['productDetailList'])?record['productDetailList'].map(this.renderOption2):[]}\r\n\t\t\t\t\t\t\tplaceholder={'请选择'}\r\n\t\t\t\t\t\t\tstyle={{ width: \"140px\" }}\r\n\t\t\t\t\t\t\tonChange={this.handleProductDetailChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if  ( dataIndex == 'planBeginTime'  || dataIndex == 'planEndTime' ) { // 相同列\r\n\t\t\treturn editing && false ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":moment(record[dataIndex]).format(dateFormat)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}  else if ( dataIndex == 'tomorrowProgress') { // 计划完成比例\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.handleNumberTomorrowProgressSave}\r\n\t\t\t\t\t\t\tonBlur={this.handleNumberTomorrowProgressSave}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}%\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn editing ? (<Form.Item className=\"tfc\">\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? 0 : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTableTomorrowMaterial extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"dailyId\": \"\",\r\n\t\t\t\t\"projectId\":\"\",\r\n\t\t\t\t\"materialId\":\"\",\r\n\t\t\t\t\"position\": \"\",\r\n\t\t\t\t\"productCategory\": \"\",\r\n\t\t\t\t\"productDetail\": \"\",\r\n\t\t\t\t\"planBeginTime\": 0,\r\n\t\t\t\t\"planEndTime\": 0,\r\n\t\t\t\t\"tomorrowProgress\": 0,\r\n\t\t\t\t\"name\":\"\",\r\n\t\t\t\t\"showName\":\"\",\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"dailyId\": \"\",\r\n\t\t\t\t\t\"projectId\":\"\",\r\n\t\t\t\t\t\"materialId\":\"\",\r\n\t\t\t\t\t\"position\": \"\",\r\n\t\t\t\t\t\"productCategory\": \"\",\r\n\t\t\t\t\t\"productDetail\": \"\",\r\n\t\t\t\t\t\"planBeginTime\": 0,\r\n\t\t\t\t\t\"planEndTime\": 0,\r\n\t\t\t\t\t\"tomorrowProgress\": 0,\r\n\t\t\t\t\t\"name\":\"\",\r\n\t\t\t\t\t\"showName\":\"\",\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource ===undefined || this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource ===undefined ||  this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"dailyId\": \"\",\r\n\t\t\t\t\"projectId\":\"\",\r\n\t\t\t\t\"materialId\":\"\",\r\n\t\t\t\t\"position\": \"\",\r\n\t\t\t\t\"productCategory\": \"\",\r\n\t\t\t\t\"productDetail\": \"\",\r\n\t\t\t\t\"planBeginTime\": 0,\r\n\t\t\t\t\"planEndTime\": 0,\r\n\t\t\t\t\"tomorrowProgress\": 0,\r\n\t\t\t\t\"name\":\"\",\r\n\t\t\t\t\"showName\":\"\",\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\t\tthis.getPositionList();\r\n\t}\r\n\r\n\tcomponentWillUnMount() {\r\n\r\n\t}\r\n\r\n\tgetPositionList = ()=>{\r\n\t\tlet hash = window.location.hash;\r\n\t\tconst projectId = hash.split(\"projectId=\")[1];\r\n\t\tif(projectId===undefined) {\r\n\t\t\treturn\r\n\t\t}else{\r\n\t\t\tthis.store.getDailyObjList({\r\n\t\t\t\t\"dailyId\":projectId,\r\n\t\t\t\t\"type\":0\r\n\t\t\t}).then((res)=>{\r\n\t\t\t\tthis.store.positionList = res;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetProductCategoryList = (record, value)=>{\r\n\t\tconst { positionList } = this.store;\r\n\t\tconst selectedItem = positionList.filter(item => item.id===value)\r\n\t\tif(selectedItem.length>0){\r\n\t\t\tthis.store.getDailyObjList({\r\n\t\t\t\t\"dailyId\":value,\r\n\t\t\t\t\"type\":1\r\n\t\t\t}).then((res)=>{\r\n\t\t\t\tthis.store.productCategoryList = res;\r\n\t\t\t\tthis.handleSave(Object.assign(record,{\"position\":selectedItem[0].name,\"positionId\":selectedItem[0].id, \"productCategoryList\":res}));\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.handleSave(Object.assign(record,{\"position\":value,\"positionId\":\"\", \"productCategoryList\":[]}));\r\n\t\t}\r\n\t}\r\n\r\n\tgetProductDetailList = (productCategoryId, record)=>{\r\n\t\tthis.store.getDailyContentDetailList({\r\n\t\t\t\"dailyId\":productCategoryId,\r\n\t\t\t\"type\":record['type']===1?0:1 //record 中的type 1 表示今日，这的type0，表示今日，1是明日...\r\n\t\t}).then((res)=>{\r\n\t\t\tthis.store.productDetailList = res;\r\n\t\t})\r\n\t}\r\n\r\n\tgetDailyTomorrowMaterial = (value, record)=>{\r\n\t\tthis.store.getDailyTomorrowMaterial({\r\n\t\t\t\"categoryId\":value\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res.length>0){\r\n\t\t\t\tconst selectedItem = record['productCategoryList'].filter(item => item.id===value)\r\n\t\t\t\tthis.handleSave(Object.assign(record,{\"productCategory\":selectedItem[0].name, \"productCategoryId\":selectedItem[0].id, \"productDetailList\":res}));\r\n\t\t\t}else{\r\n\t\t\t\tthis.handleSave(Object.assign(record,{\"productCategory\":value, \"productCategoryId\":\"\", \"productDetailList\":[]}));\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tconst dataSource = [...this.state.dataSource];\r\n\t\tthis.setState({\r\n\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t});\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\t// const newData = Object.assign(primaryData, {key: count, id:\"!\"+uuidv4()});\r\n\t\tconst newData = Object.assign(primaryData, {key: count});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({\r\n\t\t\texpandedKeys: keys\r\n\t\t}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource, expandedKeys} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst { positionList} = this.store;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tlet columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '部位',\r\n\t\t\t\tdataIndex: 'position',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\teditable: !disabled ,\r\n\t\t\t\t/*render: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '产品类别',\r\n\t\t\t\tdataIndex: 'productCategory',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\t/*render: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}*/\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '产品明细',\r\n\t\t\t\tdataIndex: 'productDetail',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled ,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{record['showName']!==null?record['showName']:''}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '计划发车时间',\r\n\t\t\t\tdataIndex: 'planBeginTime',\r\n\t\t\t\twidth: '130px',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text===null || text===0|| text===\"0\"?\"\":moment(text).format(dateFormat)}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '计划到货时间',\r\n\t\t\t\tdataIndex: 'planEndTime',\r\n\t\t\t\twidth: '130px',\r\n\t\t\t\teditable: !disabled ,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t>{text===null || text===0|| text===\"0\"?\"\":moment(text).format(dateFormat)}</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '明日计划进展',\r\n\t\t\t\tdataIndex: 'tomorrowProgress',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled ,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t{text}%\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t\tgetProductCategoryList:this.getProductCategoryList,\r\n\t\t\t\t\tgetProductDetailList:this.getProductDetailList,\r\n\t\t\t\t\tgetDailyTomorrowMaterial:this.getDailyTomorrowMaterial,\r\n\t\t\t\t\tpositionList:mobx.toJS(positionList),\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '15px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTableTomorrowMaterial;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/delivery/EditableTableTomorrowMaterial.js"],"sourceRoot":""}