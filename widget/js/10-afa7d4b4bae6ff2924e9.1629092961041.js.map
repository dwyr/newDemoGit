{"version":3,"sources":["webpack:///./src/containers/exhibition/Index.js","webpack:///./src/components/worktile/MyUpload.js?a69f*","webpack:///./src/components/worktile/TaskSplite.js?f171*","webpack:///./src/components/common/AsyncSelectMuti.js?7752*","webpack:///./src/components/worktile/EditableTable.js","webpack:///./src/components/product/EditableTable2.js?99b8*","webpack:///./src/components/worktile/ItemInfoNew.js","webpack:///./src/components/labor/Delivery.js","webpack:///./src/components/labor/EditableTable.js","webpack:///./src/components/labor/PayUpload.js","webpack:///./src/components/labor/ProgressList.js","webpack:///./src/components/labor/WortileCommon.js","webpack:///./src/components/labor/Appraisal.js","webpack:///./src/components/labor/Office.js","webpack:///./src/components/labor/ProjectDesign.js","webpack:///./src/components/labor/ProposalAttc.js","webpack:///./src/components/labor/StepInfo.js"],"names":["mobx","utils","pgState","Index","observer","props","getTree","param","temId","store","then","mes","treeData","Object","assign","itemObj","children","filter","item","treeType","stageName","type","pgData","payObj","proDesign","commonData","projectName","name","getStageTree","oldStageId","id","currentStageId","getStageList","getReportDaysList","JSON","parse","stringify","obj","countObj","map","v","comStates","comCount","search","location","url","query","pid","stageid","isEdit","undefined","emitter","emit","scrollToAnchor","onRef","ref","child","onAppRef","appRef","onOfficeRef","officeRef","anchorName","anchorElement","document","getElementById","scrollIntoView","block","err","saveProject","params","res","message","success","onChangeVis","projectId","closeReason","state","error","saveAttachment","saveAttachments","updateTreeData","delNode","updateCount","count","setState","saveNodes","saveStage","updateTree","projectinfo","ExhibitionStore","payCount","pgCount","psCount","autorun","console","log","getcommonData","getproDesign","getFnDesign","getPgDesign","projectid","temName","getSts","pgObj","zhObj","isDesignEdit","listData","ossData","isShow","margin","toJS","length","index","React","Component","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","format","uid","UploadToOss","Promise","resolve","reject","multipartUpload","data","catch","MyUpload","handleChange","info","status","fileList","oldFileList","newFileList","originFileObj","host","fileId","fileName","filePath","array","arr","push","beforeUpload","isJPG","isLt2M","size","onloadend","loading","nextProps","securityToken","multiple","onChange","listType","className","disabled","fontSize","color","EditableContext","createContext","EditableRow","form","EditableFormRow","Form","create","openNotificationWithIcon","notification","description","placement","EditableCell","editing","userIds","toggleEdit","input","focus","save","record","handleSave","validateFields","values","e","currentTarget","saveTime","Number","totalHours","saveDate","date","dateString","hasOwnProperty","valueOf","saveDate2","onBlur","handleSelChange","val","userId","value","userName","updatePerson","users","disabledStartDate","startValue","endTime","disabledEndDate","endValue","beginTime","renderCell","dataIndex","title","personData","handleDelete","getFieldDecorator","rules","required","initialValue","minHeight","node","numberTostring","minWidth","width","float","editable","restProps","TaskSplite","clearState","dataSource","key","startsWith","handleSaveSubTask","handleAdd","addRecord","newData","row","alreadyHours","findIndex","splice","newRow","collapseOnClick","_this","collapseOnChange","nextContext","onTaskRef","prevProps","prevState","components","body","cell","columnEle","align","render","text","join","columns","col","onCell","textAlign","marginTop","Option","Select","AsyncSelectMuti","handleFocus","variables","fetch","method","headers","response","json","dataMapFunc","itemKey","itemValue","placeholder","style","options","propTypes","PropTypes","object","string","func","runonlyonce","subNumber","EditableTable","getKeyByShowRow","saveExpandedRows","handleView","saveData","getMyTaskCount","primaryData","keys","indexOf","expandedKeys","subTaskDis","handleApart","activeObj","activeSub","saveSubTaskRecord","subtasks","delNodeByPid","isSub","masters","warn","isLarge","saveSubTasks","subtask","newSubTasks","forEach","onCalac","onPackup","defaultSource","rearSource","Modal","confirm","okText","cancelText","onOk","onCancel","onRow","subTasks","eventE1","addListener","removeListener","isChaijie","bind","height","lineHeight","delayType","position","left","top","transform","content","fontWeight","remark","maxWidth","paddingLeft","actionName","marginLeft","expandedRowRender","rate","EditableTable2","getRecord","attachments","eventE2","taskhaveattt","attcObj","vitem","TextArea","Input","TabPane","Tabs","fields","hidden","onCanlc","resetFields","handleSubmit","preventDefault","projectType","productType","toString","formItemLayout","labelCol","xs","span","md","sm","wrapperCol","formItemLayout2","lg","temID","xl","customer","Schemas","bpm","getProductTypeList","Config","address","builtArea","totalCost","builtType","constructionUnit","constructionQualification","partyaUnit","unitQualification","milepost","declarationAwards","awardGrade","buySoftware","usageSituation","background","temporaryDecision","temporaryManagerDesire","temporaryRequirement","temporaryBudgetStandard","temporaryTotalAcceptability","temporaryTotalRange","temporaryBudget","temporaryPriceDesire","temporaryEstimatePrice","temporaryManagersNumber","temporaryWorkersNumber","temporaryBudgetEvaluation","temporaryBeginTime","temporaryEndTime","Delivery","currentTree","validateFieldsAndScroll","saveData2","taskdata","currentTaskC","stepChildren","taskcIndex","onPanelChange","isLoading","setTimeout","getProjectByWsProjectId","window","open","showConfirm","onVisibleChange","calendarVis","disabledDate","current","endOf","currentData","dateCellRender","reportDays","includes","icon","defaultTree","attc","currentDataSource","verticalAlign","border","borderRadius","widthDESIGN","uuid","handleChangeMenu","rowId","fileType","payOutput","handleLinkTo","rowUrl","linkUrl","link","linkId","linkType","linkName","getTaskattEditUrl","handleLinkDown","linkArray","split","download","eventE3","temOutput","paddingRight","attcArray","Array","isArray","onlineArray","isNew","cursor","padding","display","onlineObj","fileUrl","temArray","temObj","temChildren","x","PayUpload","ProgressList","showModal","visible","handleOk","closeProject","target","backgroundColor","finishTime","minRows","maxRows","WortileCommon","isEndime","currentSource","isChange","isMasters","isExp","Appraisal","checkedValues","updateMaster","jbzl","srzl","fzzl","attcObj2","attachments2","plainOptions","xmgs","xmys","xmbj","cgrq","ztmd","jszq","sjzd","scyq","zxyq","dgyq","sgclyq","jbtsdln","zhhsddyy","gsxyalalck","offset","bcsm","Office","glry","lwry","glRY","lwRY","cqwd","bghjdssd","jbtedln","jzmgsxym","jbdfts","bimxxhsdyq","gmxqdg","dlqk","rksd","zwhj","gsxyalalcg","checkChange","checked","onNameChange","Coptions","attcObj3","attachments3","ljjcsj","ProjectDesign","proDesignData","proDesignStageData","updatedeCount","deCount","addStage","delStage","changeStage","stepObj1","stepObj2","stepObj3","stepObj4","stepObj5","stepName","withoutStoreProps","stageList","menu","indexs","CustomizedForm","onFieldsChange","changedFields","mapPropsToFields","supplierPrice","createFormField","customerPrice","upload","onValuesChange","_","onSave","proposalLabel","supplierLabel","marginRight","customerLabel","ProposalAttc","handleFormChange","proposalObj","saveProposal","save2","formtype","labelObj","editStatus","StepInfo","saveStep","proposalData","currentProposal","proposalIndex","option","attcIndex"],"mappings":";;;;;;;;;;;;;;kBAAA;;;;;;AAIA;;;;AACA;;AACA;;AACA;;;;AACA;;IAAaA,I;;AACb;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAYC,K;;AACZ;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;AACA,IAAMC,UAAU,EAAC,GAAG,OAAJ,EAAa,GAAG,OAAhB,EAAhB,C,CAA2C;;IAIrCC,K,WAFL,uBAAO,iBAAP,C,oBACAC,mB;;;AAEA,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4GACZA,KADY;;AAAA,QAyfnBC,OAzfmB,GAyfT,UAACC,KAAD,EAAW;AAAA,OACbC,KADa,GACJ,MAAKC,KADD,CACbD,KADa;;AAEpB,SAAKC,KAAL,CAAWH,OAAX,CAAmBC,KAAnB,EAA0BG,IAA1B,CAA+B,UAACC,GAAD,EAAS;AACvC,UAAKF,KAAL,CAAWG,QAAX,GAAsBC,OAAOC,MAAP,CAAc,EAAd,EAAkBH,GAAlB,CAAtB,CADuC,CACO;AAC9C;AACA,QAAII,UAAUF,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,KAApB,EAAoF,CAApF,CAAzB,CAAd;AACA,QAAMC,OAAOnB,QAAQM,KAAR,CAAb;AACA;AACA,QAAIc,SAAST,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,KAApB,EAAoF,CAApF,CAAzB,CAAb;AACA;AACA,UAAKX,KAAL,CAAWc,MAAX,GAAoBV,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,KAApB,EAAoF,CAApF,CAAzB,CAApB;AACA;AACA,QAAII,YAAYX,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,KAApB,EAAoF,CAApF,CAAzB,CAAhB;AACA;AACA,UAAKX,KAAL,CAAWgB,UAAX,GAAwBZ,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,KAAmB,MAA/C,IAAyDF,KAAKE,SAAL,KAAmB,MAA5E,IAAsFF,KAAKE,SAAL,KAAmB,MAAzG,IAAmHF,KAAKE,SAAL,KAAmB,MAAhJ;AAAA,KAApB,CAAzB,CAAxB;AACA,UAAKX,KAAL,CAAWM,OAAX,GAAqBF,OAAOC,MAAP,CAAc,EAAd,EAAkBC,OAAlB,CAArB;AACA,UAAKN,KAAL,CAAWiB,WAAX,GAAyBX,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AAC1D,YAAOA,KAAKC,QAAL,IAAiB,aAAxB;AACA,KAFwB,EAEtB,CAFsB,EAEnBQ,IAFN;AAGA;AACA,UAAKlB,KAAL,CAAWmB,YAAX;AACA;AACA,UAAKnB,KAAL,CAAWe,SAAX,GAAuBA,SAAvB;AACA,UAAKf,KAAL,CAAWoB,UAAX,GAAwBL,UAAUM,EAAlC;AACA,UAAKrB,KAAL,CAAWsB,cAAX,GAA4BP,UAAUM,EAAtC;AACA;AACA,UAAKrB,KAAL,CAAWuB,YAAX;AACA,UAAKvB,KAAL,CAAWwB,iBAAX;AACA;AACA,QAAIR,aAAaS,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,MAAK3B,KAAL,CAAWgB,UAA1B,CAAX,CAAjB;AACA,QAAIY,MAAM,EAAV;AACA,QAAIC,WAAW,EAAf;AACAb,eAAWc,GAAX,CAAe,UAACC,CAAD,EAAO;AACrBH,SAAIG,EAAEV,EAAN,IAAY,IAAZ;AACAQ,cAASE,EAAEV,EAAX,IAAiB,CAAjB;AACA,KAHD;AAIA,UAAKrB,KAAL,CAAWgC,SAAX,GAAuB5B,OAAOC,MAAP,CAAc,EAAd,EAAkBuB,GAAlB,CAAvB;AACA,UAAK5B,KAAL,CAAWiC,QAAX,GAAsB7B,OAAOC,MAAP,CAAc,EAAd,EAAkBwB,QAAlB,CAAtB;AACA,UAAK7B,KAAL,CAAWY,IAAX,IAAmBR,OAAOC,MAAP,CAAc,EAAd,EAAkBQ,MAAlB,CAAnB;;AAEA;AACA,QAAIqB,SAAS,MAAKtC,KAAL,CAAWuC,QAAX,CAAoBD,MAAjC;;AAvCuC,2BAwCJE,cAAIV,KAAJ,CAAUQ,MAAV,EAAkB,IAAlB,EAAwBG,KAxCpB;AAAA,QAwChChB,EAxCgC,oBAwChCA,EAxCgC;AAAA,QAwC5BiB,GAxC4B,oBAwC5BA,GAxC4B;AAAA,QAwCvBC,OAxCuB,oBAwCvBA,OAxCuB;AAAA,QAwCdC,MAxCc,oBAwCdA,MAxCc;;AAyCvC,QAAGF,OAAKG,SAAL,IAAgBpB,MAAIoB,SAApB,IAA+BH,OAAK,IAAvC,EAA4C;AAC3CI,sBAAQC,IAAR,CAAa,cAAb,EAA8B,EAAC,OAAML,GAAP,EAAY,MAAKjB,EAAjB,EAAqB,UAASmB,MAA9B,EAA9B;AACA,KAFD,MAEM,IAAInB,OAAKoB,SAAT,EAAoB;AAAG;AAC5B,WAAKG,cAAL,CAAoBvB,EAApB;AACA,KAFK,MAEA,IAAGkB,YAAUE,SAAb,EAAuB;AAC5B;AACA;AACD,IAhDD;AAiDA,GA5iBkB;;AAAA,QA8iBnBI,KA9iBmB,GA8iBX,UAACC,GAAD,EAAS;AAChB,SAAKC,KAAL,GAAaD,GAAb;AACA,GAhjBkB;;AAAA,QAkjBnBE,QAljBmB,GAkjBR,UAACF,GAAD,EAAS;AACnB,SAAKG,MAAL,GAAcH,GAAd;AACA,GApjBkB;;AAAA,QAsjBnBI,WAtjBmB,GAsjBL,UAACJ,GAAD,EAAS;AACtB,SAAKK,SAAL,GAAiBL,GAAjB;AACA,GAxjBkB;;AAAA,QA2jBnBF,cA3jBmB,GA2jBF,UAACQ,UAAD,EAAgB;AAChC,OAAIA,UAAJ,EAAgB;AACf,QAAI;AACH,SAAIC,gBAAgBC,SAASC,cAAT,CAAwBH,UAAxB,CAApB;AACA,SAAIC,aAAJ,EAAmB;AAClBA,oBAAcG,cAAd,CAA6B,EAACC,OAAO,QAAR,EAA7B;AACA;AACD,KALD,CAKE,OAAOC,GAAP,EAAY,CACb;AACD;AACD,GArkBkB;;AAAA,QAwkBnBC,WAxkBmB,GAwkBL,UAACC,MAAD,EAAY;AACzB,SAAK5D,KAAL,CAAW2D,WAAX,CAAuBC,MAAvB,EACC3D,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,QAAIA,IAAIxC,EAAJ,KAAW,IAAf,EAAqB;AACpByC,mBAAQC,OAAR,CAAgB,MAAhB;AACA,WAAKhB,KAAL,CAAWiB,WAAX;AACA,WAAKhE,KAAL,CAAWiE,SAAX,GAAuBJ,IAAIxC,EAA3B;AACA,WAAKrB,KAAL,CAAWkE,WAAX,GAAyBL,IAAIK,WAA7B;AACA,WAAKlE,KAAL,CAAWiB,WAAX,GAAyB4C,IAAI3C,IAA7B;AACA,WAAKlB,KAAL,CAAWmE,KAAX,GAAmBN,IAAIM,KAAvB;AANoB,SAObpE,KAPa,GAOL,MAAKC,KAPA,CAObD,KAPa;;AAQpB,WAAKC,KAAL,CAAWH,OAAX,CAAmBgE,IAAIxC,EAAvB,EAA2BpB,IAA3B,CAAgC,UAACC,GAAD,EAAS;AACxC,YAAKF,KAAL,CAAWG,QAAX,GAAsBC,OAAOC,MAAP,CAAc,EAAd,EAAkBH,GAAlB,CAAtB,CADwC,CACM;AAC9C;AACA,UAAII,UAAUF,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,OAApB,EAAoF,CAApF,CAAzB,CAAd;AACA;AACA,YAAKX,KAAL,CAAWP,QAAQM,KAAR,CAAX,IAA6BK,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,OAApB,EAAoF,CAApF,CAAzB,CAA7B;AACA;AACA,YAAKX,KAAL,CAAWc,MAAX,GAAoBV,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,OAApB,EAAoF,CAApF,CAAzB,CAApB;AACA;AACA,UAAII,YAAYX,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,OAApB,EAAoF,CAApF,CAAzB,CAAhB;AACA;AACA,YAAKX,KAAL,CAAWgB,UAAX,GAAwBZ,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,KAAmB,MAA/C,IAAyDF,KAAKE,SAAL,KAAmB,MAA5E,IAAsFF,KAAKE,SAAL,KAAmB,MAAzG,IAAmHF,KAAKE,SAAL,KAAmB,MAAhJ;AAAA,OAApB,CAAzB,CAAxB;AACA,YAAKX,KAAL,CAAWM,OAAX,GAAqBF,OAAOC,MAAP,CAAc,EAAd,EAAkBC,OAAlB,CAArB;AACA,YAAKN,KAAL,CAAWiB,WAAX,GAAyBX,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AAC1D,cAAOA,KAAKC,QAAL,IAAiB,aAAxB;AACA,OAFwB,EAEtB,CAFsB,EAEnBQ,IAFN;AAGA;AACA,YAAKlB,KAAL,CAAWmB,YAAX;AACA;AACA,YAAKnB,KAAL,CAAWe,SAAX,GAAuBA,SAAvB;AACA,YAAKf,KAAL,CAAWoB,UAAX,GAAwBL,UAAUM,EAAlC;AACA,YAAKrB,KAAL,CAAWsB,cAAX,GAA4BP,UAAUM,EAAtC;AACA;AACA,YAAKrB,KAAL,CAAWuB,YAAX;AACA,YAAKvB,KAAL,CAAWwB,iBAAX;AACA;AACA,UAAIR,aAAaS,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,MAAK3B,KAAL,CAAWgB,UAA1B,CAAX,CAAjB;AACA,UAAIY,MAAM,EAAV;AACA,UAAIC,WAAW,EAAf;AACAb,iBAAWc,GAAX,CAAe,UAACC,CAAD,EAAO;AACrBH,WAAIG,EAAEV,EAAN,IAAY,IAAZ;AACAQ,gBAASE,EAAEV,EAAX,IAAiB,CAAjB;AACA,OAHD;AAIA,YAAKrB,KAAL,CAAWgC,SAAX,GAAuB5B,OAAOC,MAAP,CAAc,EAAd,EAAkBuB,GAAlB,CAAvB;AACA,YAAK5B,KAAL,CAAWiC,QAAX,GAAsB7B,OAAOC,MAAP,CAAc,EAAd,EAAkBwB,QAAlB,CAAtB;AACA,MAnCD;AAoCA,KA5CD,MA4CO;AACNiC,mBAAQM,KAAR,CAAc,MAAd;AACA;AACD,IAjDD;AAkDA,GA3nBkB;;AAAA,QA8nBnBC,cA9nBmB,GA8nBF,UAACT,MAAD,EAAY;AAC5B,SAAK5D,KAAL,CAAWsE,eAAX,CAA2BV,MAA3B,EACC3D,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,QAAIA,GAAJ,EAAS;AACRC,mBAAQC,OAAR,CAAgB,QAAhB;AACA;AACA,SAAI5D,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,MAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,gBAA/B,EAAiD0D,GAAjD,CAAtB;AACA,KALD,MAKO;AACNC,mBAAQM,KAAR,CAAc,QAAd;AACA;AACD,IAVD;AAWA,GA1oBkB;;AAAA,QA6oBnBI,OA7oBmB,GA6oBT,UAAC1E,KAAD,EAAW;AACpB,SAAKE,KAAL,CAAWwE,OAAX,CAAmB1E,KAAnB,EACCG,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,QAAIA,GAAJ,EAAS;AACRC,mBAAQC,OAAR,CAAgB,QAAhB;AACA,KAFD,MAEO;AACND,mBAAQM,KAAR,CAAc,QAAd;AACA;AACD,IAPD;AAQA,GAtpBkB;;AAAA,QAypBnBK,WAzpBmB,GAypBL,UAAC7D,IAAD,EAAO8D,KAAP,EAAiB;AAC9B,SAAKC,QAAL,qBACE/D,IADF,EACS8D,KADT;AAGA,GA7pBkB;;AAAA,QAgqBnBE,SAhqBmB,GAgqBP,UAAChB,MAAD,EAAY;AACvB,SAAK5D,KAAL,CAAW4E,SAAX,CAAqBhB,MAArB,EAA6B3D,IAA7B,CAAkC,UAAC4D,GAAD,EAAS;AAC1C,QAAIA,GAAJ,EAAS;AACRC,mBAAQC,OAAR,CAAgB,MAAhB;AACA;AACA,SAAI5D,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,MAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC0D,GAAzC,CAAtB;AACA;AACA,WAAK7D,KAAL,CAAWmB,YAAX;AACA;AACA;AACA,KATD,MASO;AACN2C,mBAAQM,KAAR,CAAc,MAAd;AACA;AACD,IAbD;AAcA,GA/qBkB;;AAAA,QAkrBnBS,SAlrBmB,GAkrBP,UAACjB,MAAD,EAAY;AACvB,OAAIA,UAAUA,OAAOK,SAAP,IAAoB,IAAlC,EAAwC,MAAKjE,KAAL,CAAWiE,SAAX,GAAuBL,OAAO,WAAP,CAAvB;AACxC,SAAK5D,KAAL,CAAW6E,SAAX,CAAqBjB,MAArB,EAA6B3D,IAA7B,CAAkC,UAAC4D,GAAD,EAAS;AAC1C,QAAIA,GAAJ,EAAS;AACRC,mBAAQC,OAAR,CAAgB,QAAhB;AACA;AACA,WAAK/D,KAAL,CAAWmB,YAAX;AACA,KAJD,MAIO;AACN2C,mBAAQM,KAAR,CAAc,QAAd;AACA;AACD,IARD;AASA,GA7rBkB;;AAAA,QAgsBnBU,UAhsBmB,GAgsBN,YAAM;AAClB,OAAMb,YAAY,MAAKjE,KAAL,CAAWiE,SAA7B;AACA,SAAKjE,KAAL,CAAWH,OAAX,CAAmBoE,SAAnB,EAA8BhE,IAA9B,CAAmC,UAACC,GAAD,EAAS;AAC3C,UAAKF,KAAL,CAAWG,QAAX,GAAsBC,OAAOC,MAAP,CAAc,EAAd,EAAkBH,GAAlB,CAAtB,CAD2C,CACG;AAC9C;AACA,QAAII,UAAUF,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,KAApB,EAAoF,CAApF,CAAzB,CAAd;AACA;AACA,UAAKX,KAAL,CAAWgB,UAAX,GAAwBZ,OAAOC,MAAP,CAAc,EAAd,EAAkBH,OAAOA,IAAIK,QAAJ,CAAaC,MAAb,CAAoB,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,KAAmB,MAA/C,IAAyDF,KAAKE,SAAL,KAAmB,MAAtF;AAAA,KAApB,CAAzB,CAAxB;AACA;AACA,QAAIK,aAAaS,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,MAAK3B,KAAL,CAAWgB,UAA1B,CAAX,CAAjB;AACA,QAAIY,MAAM,EAAV;AACA,QAAIC,WAAW,EAAf;AACAb,eAAWc,GAAX,CAAe,UAACC,CAAD,EAAO;AACrBH,SAAIG,EAAEV,EAAN,IAAY,IAAZ;AACAQ,cAASE,EAAEV,EAAX,IAAiB,CAAjB;AACA,KAHD;AAIA,UAAKrB,KAAL,CAAWM,OAAX,GAAqBF,OAAOC,MAAP,CAAc,EAAd,EAAkBC,OAAlB,CAArB;AACA,UAAKN,KAAL,CAAWgC,SAAX,GAAuB5B,OAAOC,MAAP,CAAc,EAAd,EAAkBuB,GAAlB,CAAvB;AACA,UAAK5B,KAAL,CAAWiC,QAAX,GAAsB7B,OAAOC,MAAP,CAAc,EAAd,EAAkBwB,QAAlB,CAAtB;AACA,QAAIkD,cAAczE,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AACnD,YAAOA,KAAKC,QAAL,IAAiB,aAAxB;AACA,KAFiB,EAEf,CAFe,CAAlB;AAGA,UAAKV,KAAL,CAAWiB,WAAX,GAAyB8D,YAAY,MAAZ,CAAzB;AACA,UAAK/E,KAAL,CAAWmE,KAAX,GAAmBY,YAAY,OAAZ,CAAnB;AACA,UAAK/E,KAAL,CAAWkE,WAAX,GAAyBa,YAAY,aAAZ,CAAzB;AACA;AACA,UAAK/E,KAAL,CAAWmB,YAAX;AACA,IAzBD;AA0BA,GA5tBkB;;AAElB,QAAKnB,KAAL,GAAa,MAAKJ,KAAL,CAAWoF,eAAxB;AACA,QAAKb,KAAL,GAAa;AACZO,UAAO,CADK,EACF;AACVO,aAAU,CAFE,EAEC;AACbC,YAAS,CAHG,EAGC;AACbC,YAAS,CAJG,CAIA;AAJA,GAAb;AAMA5F,OAAK6F,OAAL,CAAa,YAAM;AAClB,OAAMxE,OAAOnB,QAAQ,MAAKO,KAAL,CAAWD,KAAnB,CAAb;AACAsF,WAAQC,GAAR,CAAY1E,IAAZ,EAAkB,MAAlB;AACA,SAAKZ,KAAL,CAAWgB,UAAX,GAAwB,MAAKhB,KAAL,CAAWuF,aAAnC;AACA,SAAKvF,KAAL,CAAWc,MAAX,GAAoB,MAAKd,KAAL,CAAWwF,YAA/B;AACA,SAAKxF,KAAL,CAAWe,SAAX,GAAuB,MAAKf,KAAL,CAAWyF,WAAlC;AACA,SAAKzF,KAAL,CAAWY,IAAX,IAAmB,MAAKZ,KAAL,CAAW0F,WAA9B;AACA,GAPD;AATkB;AAiBlB;;;;uCAEoB,CAEpB;;;sCAEmB;AACnB,OAAIxD,SAAS,KAAKtC,KAAL,CAAWuC,QAAX,CAAoBD,MAAjC;;AADmB,2BAEmCE,cAAIV,KAAJ,CAAUQ,MAAV,EAAkB,IAAlB,EAAwBG,KAF3D;AAAA,OAEZsD,SAFY,qBAEZA,SAFY;AAAA,OAED5F,KAFC,qBAEDA,KAFC;AAAA,OAEM6F,OAFN,qBAEMA,OAFN;AAAA,OAEevE,EAFf,qBAEeA,EAFf;AAAA,OAEmBiB,GAFnB,qBAEmBA,GAFnB;AAAA,OAEwBC,OAFxB,qBAEwBA,OAFxB;;AAGnB,QAAKvC,KAAL,CAAWD,KAAX,GAAmBA,KAAnB;AACA,QAAKC,KAAL,CAAW4F,OAAX,GAAqBA,OAArB;AACA;AACA,QAAK5F,KAAL,CAAW6F,MAAX;AACA,OAAIF,aAAa,IAAb,IAAqBA,aAAalD,SAAtC,EAAiD;AAAE;AAClD,SAAKzC,KAAL,CAAWiE,SAAX,GAAuB0B,SAAvB;AACA,SAAK3F,KAAL,CAAW8F,KAAX,GAAoB1F,OAAOC,MAAP,CAAc,EAAd,EAAiB,EAAI;AACxC,WAAM,EAD8B;AAEpC,YAAO,EAF6B;AAGpC,kBAAa,EAHuB;AAIpC,iBAAY,OAJwB;AAKpC,gBAAW,IALyB;AAMpC,iBAAY,CAAC;AACZ,YAAM,EADM;AAEZ,aAAO,EAFK;AAGZ,mBAAa,EAHD;AAIZ,kBAAY,QAJA;AAKZ,iBAAW,IALC;AAMZ,kBAAY,CAAC;AACZ,aAAM,EADM;AAEZ,cAAO,EAFK;AAGZ,oBAAa,EAHD;AAIZ,mBAAY,MAJA;AAKZ,kBAAW,IALC;AAMZ,mBAAY,IANA;AAOZ,eAAQ,SAPI;AAQZ,eAAQ;AARI,OAAD,EAUX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,aAPT;AAQC,eAAQ;AART,OAVW,CANA;AA2BZ,cAAQ;AACP,eAAQ,IADD;AAEP,eAAQ,IAFD;AAGP,eAAQ,IAHD;AAIP,eAAQ,IAJD;AAKP,eAAQ,IALD;AAMP,eAAQ;AAND,OA3BI;AAmCZ,cAAQ;AACP,eAAQ,IADD;AAEP,eAAQ,IAFD;AAGP,eAAQ,IAHD;AAIP,eAAQ,IAJD;AAKP,iBAAU,IALH;AAMP,kBAAW,IANJ;AAOP,mBAAY;AAPL,OAnCI;AA4CZ,cAAQ;AACP,qBAAc,IADP;AAEP,eAAQ;AAFD;AA5CI,MAAD,CANwB;AAuDpC,kBAAa;AAvDuB,KAAjB,CAApB;AAyDA,SAAKL,KAAL,CAAW+F,KAAX,GAAoB3F,OAAOC,MAAP,CAAc,EAAd,EAAiB,EAAI;AACxC,WAAM,EAD8B;AAEpC,YAAO,EAF6B;AAGpC,kBAAa,EAHuB;AAIpC,iBAAY,OAJwB;AAKpC,gBAAW,IALyB;AAMpC,iBAAY,CACX;AACC,YAAM,EADP;AAEC,aAAO,EAFR;AAGC,mBAAa,EAHd;AAIC,kBAAY,QAJb;AAKC,iBAAW,IALZ;AAMC,kBAAY,CACX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,SAPT;AAQC,eAAQ;AART,OADW,EAWX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,QAPT;AAQC,eAAQ;AART,OAXW,EAqBX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,aAPT;AAQC,eAAQ;AART,OArBW,CANb;AAsCC,cAAQ;AACP,eAAQ,CACP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QADO,EAKP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QALO,EASP;AACC,gBAAQ,WADT;AAEC,kBAAU;AAFX,QATO,EAaP;AACC,gBAAQ,IADT;AAEC,kBAAU;AAFX,QAbO,EAiBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAjBO,EAqBP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QArBO,EAyBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAzBO,EA6BP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QA7BO,CADD;AAmCP,eAAQ,CACP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QADO,EAKP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QALO,EASP;AACC,gBAAQ,IADT;AAEC,kBAAU;AAFX,QATO,EAaP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAbO,EAiBP;AACC,gBAAQ,IADT;AAEC,kBAAU;AAFX,QAjBO,EAqBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QArBO,EAyBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAzBO,EA6BP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QA7BO,CAnCD;AAqEP,eAAQ;AArED,OAtCT;AA6GC,cAAQ;AACP,mBAAY,IADL;AAEP,mBAAY,IAFL;AAGP,kBAAW,IAHJ;AAIP,mBAAY,IAJL;AAKP,iBAAU,IALH;AAMP,qBAAc,IANP;AAOP,iBAAU;AAPH,OA7GT;AAsHC,cAAQ;AACP,eAAQ,IADD;AAEP,eAAQ,IAFD;AAGP,eAAQ,IAHD;AAIP,iBAAU,CAJH;AAKP,qBAAc;AALP;AAtHT,MADW,CANwB;AAsIpC,kBAAa;AAtIuB,KAAjB,CAApB;AAwIA,SAAKR,OAAL,CAAa8F,SAAb;AACA,SAAKhB,QAAL,CAAc;AACbD,YAAO,CADM;AAEbO,eAAU,CAFG;AAGbC,cAAS,CAHI,EAGA;AACbC,cAAS,CAJI,CAID;AAJC,KAAd;AAMA,IA1MD,MA0MO;AAAG;AACT,SAAKnF,KAAL,CAAWiE,SAAX,GAAuB,EAAvB;AACA,SAAKjE,KAAL,CAAWiB,WAAX,GAAyB,EAAzB;AACA;AACA,SAAKjB,KAAL,CAAWmB,YAAX;AACA;AACA,QAAIH,aAAaS,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,KAAK3B,KAAL,CAAWgB,UAA1B,CAAX,CAAjB;AACA,QAAIY,MAAM,EAAV;AACA,QAAIC,WAAW,EAAf;AACAb,eAAWc,GAAX,CAAe,UAACC,CAAD,EAAO;AACrBH,SAAIG,EAAEV,EAAN,IAAY,IAAZ;AACAQ,cAASE,EAAEV,EAAX,IAAiB,CAAjB;AACA,KAHD;AAIA,SAAKrB,KAAL,CAAWgC,SAAX,GAAuB5B,OAAOC,MAAP,CAAc,EAAd,EAAkBuB,GAAlB,CAAvB;AACA,SAAK5B,KAAL,CAAWiC,QAAX,GAAsB7B,OAAOC,MAAP,CAAc,EAAd,EAAkBwB,QAAlB,CAAtB;AACA,SAAK7B,KAAL,CAAWgG,YAAX,GAAwB,IAAxB;AACA,SAAKhG,KAAL,CAAWM,OAAX,GAAqBF,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACtC,WAAM,EADgC;AAEtC,YAAO,EAF+B;AAGtC,kBAAa,EAHyB;AAItC,iBAAY,OAJ0B;AAKtC,gBAAW,IAL2B;AAMtC,iBAAY,CACX;AACC,YAAM,EADP;AAEC,aAAO,EAFR;AAGC,mBAAa,EAHd;AAIC,cAAQ,EAJT;AAKC,cAAQ,EALT;AAMC,iBAAW,EANZ;AAOC,kBAAY,EAPb;AAQC,qBAAe,EARhB;AASC,iBAAW,EATZ;AAUC,qBAAe,EAVhB;AAWC,kBAAY,EAXb;AAYC,mBAAa,EAZd;AAaC,mBAAa,EAbd;AAcC,mBAAa,EAdd;AAeC,mBAAa,IAfd;AAgBC,iBAAW,IAhBZ;AAiBC,0BAAoB,EAjBrB;AAkBC,mCAA6B,EAlB9B;AAmBC,oBAAc,EAnBf;AAoBC,2BAAqB,EApBtB;AAqBC,2BAAqB,EArBtB;AAsBC,oBAAc,EAtBf;AAuBC,qBAAe,EAvBhB;AAwBC,wBAAkB,EAxBnB;AAyBC,oBAAc,EAzBf;AA0BC,2BAAqB,EA1BtB;AA2BC,gCAA0B,EA3B3B;AA4BC,8BAAwB,EA5BzB;AA6BC,iCAA2B,EA7B5B;AA8BC,qCAA+B,EA9BhC;AA+BC,6BAAuB,EA/BxB;AAgCC,yBAAmB,EAhCpB;AAiCC,8BAAwB,EAjCzB;AAkCC,gCAA0B,EAlC3B;AAmCC,iCAA2B,EAnC5B;AAoCC,gCAA0B,EApC3B;AAqCC,4BAAsB,IArCvB;AAsCC,0BAAoB,IAtCrB;AAuCC,mCAA6B,EAvC9B;AAwCC,kBAAY;AAxCb,MADW,EA2CX;AACC,YAAM,EADP;AAEC,aAAO,EAFR;AAGC,mBAAa,EAHd;AAIC,kBAAY,MAJb;AAKC,iBAAW,IALZ;AAMC,kBAAY,IANb;AAOC,cAAQ;AAPT,MA3CW,CAN0B;AA2DtC,kBAAa;AA3DyB,KAAlB,CAArB;AA6DA,SAAKL,KAAL,CAAW8F,KAAX,GAAoB1F,OAAOC,MAAP,CAAc,EAAd,EAAiB,EAAI;AACxC,WAAM,EAD8B;AAEpC,YAAO,EAF6B;AAGpC,kBAAa,EAHuB;AAIpC,iBAAY,OAJwB;AAKpC,gBAAW,IALyB;AAMpC,iBAAY,CAAC;AACZ,YAAM,EADM;AAEZ,aAAO,EAFK;AAGZ,mBAAa,EAHD;AAIZ,kBAAY,QAJA;AAKZ,iBAAW,IALC;AAMZ,kBAAY,CAAC;AACZ,aAAM,EADM;AAEZ,cAAO,EAFK;AAGZ,oBAAa,EAHD;AAIZ,mBAAY,MAJA;AAKZ,kBAAW,IALC;AAMZ,mBAAY,IANA;AAOZ,eAAQ,SAPI;AAQZ,eAAQ;AARI,OAAD,EAUX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,aAPT;AAQC,eAAQ;AART,OAVW,CANA;AA2BZ,cAAQ;AACP,eAAQ,IADD;AAEP,eAAQ,IAFD;AAGP,eAAQ,IAHD;AAIP,eAAQ,IAJD;AAKP,eAAQ,IALD;AAMP,eAAQ;AAND,OA3BI;AAmCZ,cAAQ;AACP,eAAQ,IADD;AAEP,eAAQ,IAFD;AAGP,eAAQ,IAHD;AAIP,eAAQ,IAJD;AAKP,iBAAU,IALH;AAMP,kBAAW,IANJ;AAOP,mBAAY;AAPL,OAnCI;AA4CZ,cAAQ;AACP,qBAAc,IADP;AAEP,eAAQ;AAFD;AA5CI,MAAD,CANwB;AAuDpC,kBAAa;AAvDuB,KAAjB,CAApB;AAyDA,SAAKL,KAAL,CAAW+F,KAAX,GAAoB3F,OAAOC,MAAP,CAAc,EAAd,EAAiB,EAAI;AACxC,WAAM,EAD8B;AAEpC,YAAO,EAF6B;AAGpC,kBAAa,EAHuB;AAIpC,iBAAY,OAJwB;AAKpC,gBAAW,IALyB;AAMpC,iBAAY,CACX;AACC,YAAM,EADP;AAEC,aAAO,EAFR;AAGC,mBAAa,EAHd;AAIC,kBAAY,QAJb;AAKC,iBAAW,IALZ;AAMC,kBAAY,CACX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,SAPT;AAQC,eAAQ;AART,OADW,EAWX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,QAPT;AAQC,eAAQ;AART,OAXW,EAqBX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,EAHd;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,aAPT;AAQC,eAAQ;AART,OArBW,CANb;AAsCC,cAAQ;AACP,eAAQ,CACP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QADO,EAKP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QALO,EASP;AACC,gBAAQ,WADT;AAEC,kBAAU;AAFX,QATO,EAaP;AACC,gBAAQ,IADT;AAEC,kBAAU;AAFX,QAbO,EAiBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAjBO,EAqBP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QArBO,EAyBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAzBO,EA6BP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QA7BO,CADD;AAmCP,eAAQ,CACP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QADO,EAKP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QALO,EASP;AACC,gBAAQ,IADT;AAEC,kBAAU;AAFX,QATO,EAaP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAbO,EAiBP;AACC,gBAAQ,IADT;AAEC,kBAAU;AAFX,QAjBO,EAqBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QArBO,EAyBP;AACC,gBAAQ,KADT;AAEC,kBAAU;AAFX,QAzBO,EA6BP;AACC,gBAAQ,MADT;AAEC,kBAAU;AAFX,QA7BO,CAnCD;AAqEP,eAAQ;AArED,OAtCT;AA6GC,cAAQ;AACP,mBAAY,IADL;AAEP,mBAAY,IAFL;AAGP,kBAAW,IAHJ;AAIP,mBAAY,IAJL;AAKP,iBAAU,IALH;AAMP,qBAAc,IANP;AAOP,iBAAU;AAPH,OA7GT;AAsHC,cAAQ;AACP,eAAQ,IADD;AAEP,eAAQ,IAFD;AAGP,eAAQ,IAHD;AAIP,iBAAU,CAJH;AAKP,qBAAc;AALP;AAtHT,MADW,CANwB;AAsIpC,kBAAa;AAtIuB,KAAjB,CAApB;AAwIA;AACD;;AAmED;;;AAaA;;;AAsDA;;;AAeA;;;AAYA;;;AAOA;;;AAkBA;;;AAcA;;;;2BA+BS;AAAA;;AAAA,gBACuI,KAAKL,KAD5I;AAAA,OACDiE,SADC,UACDA,SADC;AAAA,OACUhD,WADV,UACUA,WADV;AAAA,OACuBgF,QADvB,UACuBA,QADvB;AAAA,OACiC3F,OADjC,UACiCA,OADjC;AAAA,OAC0C4F,OAD1C,UAC0CA,OAD1C;AAAA,OACmDpF,MADnD,UACmDA,MADnD;AAAA,OAC2DgF,KAD3D,UAC2DA,KAD3D;AAAA,OACkEC,KADlE,UACkEA,KADlE;AAAA,OACyE/E,UADzE,UACyEA,UADzE;AAAA,OACqFgB,SADrF,UACqFA,SADrF;AAAA,OACgGC,QADhG,UACgGA,QADhG;AAAA,OAC0GlB,SAD1G,UAC0GA,SAD1G;AAAA,OACqHhB,KADrH,UACqHA,KADrH;AAAA,OAC4H6F,OAD5H,UAC4HA,OAD5H;AAAA,gBAEoC,KAAKzB,KAFzC;AAAA,OAEDO,KAFC,UAEDA,KAFC;AAAA,OAEMO,QAFN,UAEMA,QAFN;AAAA,OAEgBC,OAFhB,UAEgBA,OAFhB;AAAA,OAEyBC,OAFzB,UAEyBA,OAFzB;;AAGR,OAAIgB,SAASlC,aAAa,IAAb,IAAqBA,aAAa,EAAlC,GAAuC,IAAvC,GAA8C,KAA3D;AACA,UACC;AAAA;AAAA;AACC;AAAA;AAAA,OAAK,WAAU,YAAf;AACC;AAAC,sBAAD;AAAA,QAAY,WAAU,GAAtB,EAA0B,OAAO,EAACmC,QAAQ,GAAT,EAAjC;AACC;AAAC,uBAAD,CAAY,IAAZ;AAAA,SAAiB,MAAM,oBAAvB;AAAA;AAAA,OADD;AAEC;AAAC,uBAAD,CAAY,IAAZ;AAAA;AAAkBnF,sBAAa2E;AAA/B;AAFD;AADD,KADD;AAQC,kCAAC,sBAAD;AACC,eAAUrG,KAAK8G,IAAL,CAAUJ,QAAV,CADX;AAEC,YAAO,KAAKjG,KAFb;AAGC,aAAQmG,MAHT;AAIC,qBAAgB,KAAKvD,cAJtB;AAKC,iBAAY,KAAKkC;AALlB,MARD;AAgBC,kCAAC,qBAAD;AACC,cAASvF,KAAK8G,IAAL,CAAU/F,OAAV,CADV;AAEC,kBAAa,KAAKqD,WAFnB;AAGC,gBAAWM,SAHZ;AAIC,kBAAalE,KAJd;AAKC,YAAO,KAAK8C,KALb;AAMC,YAAO,KAAK7C,KAAL,CAAWmE,KANnB;AAOC,qBAAgB,KAAKE,cAPtB;AAQC,cAAS,KAAKG,OARf;AASC,cAASjF,KAAK8G,IAAL,CAAUH,OAAV,CATV;AAUC,aAAQ,IAVT;AAWC,YAAOxB,KAXR;AAYC,kBAAa,KAAKD;AAZnB,MAhBD;AA+BE1E,aAAO,CAAP,GAAS,8BAAC,mBAAD;AACT,aAAQoG,MADC;AAET,eAAU,KAAKnD,QAFN;AAGT,YAAO,KAAKhD,KAHH;AAIT,qBAAgB,KAAKqE,cAJZ;AAKT,cAAS,KAAKG,OALL;AAMT,cAASjF,KAAK8G,IAAL,CAAUH,OAAV,CANA;AAOT,YAAOhB,OAPE;AAQT,kBAAa,KAAKT,WART;AAST,cAASlF,KAAK8G,IAAL,CAAUP,KAAV,CATA;AAUT,gBAAW,KAAKlB,SAVP;AAWT,eAAU;AAXD,MAAT,GAYE,IA3CJ;AA6CE7E,aAAO,CAAP,GAAS,8BAAC,gBAAD;AACT,aAAQoG,MADC;AAET,kBAAa,KAAKjD,WAFT;AAGT,YAAO,KAAKlD,KAHH;AAIT,qBAAgB,KAAKqE,cAJZ;AAKT,cAAS,KAAKG,OALL;AAMT,cAASjF,KAAK8G,IAAL,CAAUH,OAAV,CANA;AAOT,YAAOhB,OAPE;AAQT,kBAAa,KAAKT,WART;AAST,cAASlF,KAAK8G,IAAL,CAAUN,KAAV,CATA;AAUT,gBAAW,KAAKnB,SAVP;AAWT,eAAU;AAXD,MAAT,GAYE,IAzDJ;AA2DC,kCAAC,uBAAD;AACC,aAAQuB,MADT;AAEC,gBAAW5G,KAAK8G,IAAL,CAAUtF,SAAV,CAFZ;AAGC,gBAAW,KAAK6D,SAHjB;AAIC,gBAAW,KAAKC,SAJjB;AAKC,YAAO,KAAK7E,KALb;AAMC,qBAAgB,KAAKqE,cANtB;AAOC,cAAS,KAAKG,OAPf;AAQC,cAASjF,KAAK8G,IAAL,CAAUH,OAAV,CARV;AASC,YAAOf,OATR;AAUC,kBAAa,KAAKV;AAVnB,MA3DD;AAwEElF,SAAK8G,IAAL,CAAUrF,UAAV,EAAsBsF,MAAtB,GAA6B,CAA7B,IAAgC/G,KAAK8G,IAAL,CAAUrF,UAAV,EAAsBR,MAAtB,CAA6B,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,KAAmB,MAAzD;AAAA,KAA7B,EAA8FmB,GAA9F,CAAkG,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACnJ,YAAQ,8BAAC,uBAAD;AACP,UAAI9F,KAAKY,EADF;AAEP,gBAAU,WAAWkF,QAAQ,CAAnB,CAFH;AAGP,aAAO,OAAKvG,KAHL;AAIP,gBAAUS,IAJH;AAKP,iBAAW,OAAKmE,SALT;AAMP,sBAAgB,OAAKP,cANd;AAOP,eAAS,OAAKG,OAPP;AAQP,gBAAUjF,KAAK8G,IAAL,CAAUrE,SAAV,EAAqBvB,KAAKY,EAA1B,CARH;AASP,WAAK9B,KAAK8G,IAAL,CAAUH,OAAV,CATE;AAUP,cAAQC,MAVD;AAWP,aAAO5G,KAAK8G,IAAL,CAAUpE,QAAV,EAAoBxB,KAAKY,EAAzB;AAXA,OAAR;AAaA,KAdgC,CAxElC;AAwFC,kCAAC,kBAAD;AACC,YAAO,KAAKrB,KADb;AAEC,eAAUT,KAAK8G,IAAL,CAAUvF,MAAV,CAFX;AAGC,YAAOmE,QAHR;AAIC,kBAAa,KAAKR,WAJnB;AAKC,qBAAgB,KAAKJ,cALtB;AAMC,cAAS,KAAKG,OANf;AAOC,cAASjF,KAAK8G,IAAL,CAAUH,OAAV,CAPV;AAQC,eAAU,IARX;AASC,aAAQC,MATT;AAUC,gBAAW,KAAKvB;AAVjB,MAxFD;AAqGErF,SAAK8G,IAAL,CAAUrF,UAAV,EAAsBsF,MAAtB,GAA+B,CAA/B,IAAoC/G,KAAK8G,IAAL,CAAUrF,UAAV,EAAsBR,MAAtB,CAA6B,UAACC,IAAD;AAAA,YAAUA,KAAKC,QAAL,IAAiB,OAAjB,IAA4BD,KAAKE,SAAL,IAAkB,MAAxD;AAAA,KAA7B,EAA6FmB,GAA7F,CAAiG,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACtJ,YAAQ,8BAAC,uBAAD;AACP,UAAI9F,KAAKY,EADF;AAEP,gBAAU,WAAWkF,QAAQ,CAAnB,CAFH;AAGP,aAAO,OAAKvG,KAHL;AAIP,gBAAUS,IAJH;AAKP,iBAAW,OAAKmE,SALT;AAMP,sBAAgB,OAAKP,cANd;AAOP,eAAS,OAAKG,OAPP;AAQP,gBAAUjF,KAAK8G,IAAL,CAAUrE,SAAV,EAAqBvB,KAAKY,EAA1B,CARH;AASP,WAAK9B,KAAK8G,IAAL,CAAUH,OAAV,CATE;AAUP,cAAQC,MAVD;AAWP,aAAO5G,KAAK8G,IAAL,CAAUpE,QAAV,EAAoBxB,KAAKY,EAAzB;AAXA,OAAR;AAaA,KAdoC;AArGtC,IADD;AAuHA;;;;EA11BkBmF,gBAAMC,S;kBA81BX/G,K;;;;;;;;;;;;;;;;;;ACj3Bf;;;;AACA;;AACA;;;;AACA;;;;;;;;;;;;+eANA;;;;;AAQA,SAASgH,SAAT,CAAmBC,GAAnB,EAAwBC,QAAxB,EAAkC;AACjC,KAAMC,SAAS,IAAIC,UAAJ,EAAf;AACAD,QAAOE,gBAAP,CAAwB,MAAxB,EAAgC;AAAA,SAAMH,SAASC,OAAOG,MAAhB,CAAN;AAAA,EAAhC;AACAH,QAAOI,aAAP,CAAqBN,GAArB;AACA;;AAED,IAAMO,SAAS,SAATA,MAAS,CAACC,IAAD,EAAU;AAAA,KACjBC,KADiB,GACRD,KAAKhD,KADG,CACjBiD,KADiB;AAExB;;AACA,QAAO,IAAIC,gBAAJ,CAAQ;AACdC,eAAaF,MAAMG,aADL;AAEdC,mBAAiBJ,MAAMK,iBAFT;AAGdC,YAAUN,MAAMM,QAHF;AAIdC,UAAQP,MAAMO,MAJA,EAIQ;AACtBC,UAAQR,MAAMQ,MALA,EAKO;AACrBC,YAAUT,MAAMU;AANF,EAAR,CAAP;AAQA,CAXD;;AAaA,IAAMC,aAAa,SAAbA,UAAa,CAACC,IAAD,EAAOC,IAAP,EAAgB;AAClC;AACA,QAAU,wBAASC,MAAT,CAAgB,UAAhB,CAAV,SAAyCD,KAAKE,GAA9C,SAAqDF,KAAK/G,IAA1D;AACA,CAHD;;AAKA,IAAMkH,cAAc,SAAdA,WAAc,CAACjB,IAAD,EAAOa,IAAP,EAAaC,IAAb,EAAsB;AACzC,KAAM7F,MAAM2F,WAAWC,IAAX,EAAiBC,IAAjB,CAAZ;AACA,QAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCrB,SAAOC,IAAP,EAAaqB,eAAb,CAA6BpG,GAA7B,EAAkC6F,IAAlC,EAAwChI,IAAxC,CAA6C,gBAAQ;AACpDqI,WAAQG,IAAR,EADoD,CACrC;AACf,GAFD,EAEGC,KAFH,CAES,iBAAS;AACjBH,UAAOnE,KAAP;AACA,GAJD;AAKA,EANM,CAAP;AAOA,CATD;;IAWMuE,Q;;;AACL,mBAAY/I,KAAZ,EAAmB;AAAA;;AAAA,kHACZA,KADY;;AAAA,QAsDnBgJ,YAtDmB,GAsDJ,UAACC,IAAD,EAAU;AACxB,OAAMC,SAASD,KAAKZ,IAAL,CAAUa,MAAzB;;AAEA;AACA,OAAIC,wCAAeF,KAAKE,QAApB,EAAJ;AACA,OAAIC,cAAcvH,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeoH,QAAf,CAAX,EAAqCvI,MAArC,CAA4C,UAACyH,IAAD,EAAU;AACvE,WAAOA,KAAKa,MAAL,IAAeb,KAAKa,MAAL,KAAgB,MAAtC;AACA,IAFiB,CAAlB,CALwB,CAOnB;AACL,OAAIG,cAAcxH,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeoH,QAAf,CAAX,CAAlB;AACAE,iBAAcA,YAAYzI,MAAZ,CAAmB,UAACyH,IAAD,EAAU;AAC1C,QAAIA,KAAKa,MAAL,IAAeb,KAAKa,MAAL,KAAgB,MAAnC,EAA2C;AAC1C,YAAO,KAAP;AACA;AACD,WAAO,IAAP;AACA,IALa,CAAd;AAMAG,iBAAcA,YAAYnH,GAAZ,CAAgB,gBAAQ;AACrC,QAAImG,KAAKiB,aAAT,EAAwB;AACvB,SAAM9G,MAAM,MAAK+B,KAAL,CAAWgF,IAAX,GAAkBpB,WAAW,MAAX,EAAmBE,IAAnB,CAA9B;AACA,YAAO7H,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,WAAKF,KAAKE,GADc;AAExBjH,YAAM+G,KAAK/G,IAFa;AAGxB4H,cAAQ,MAHgB;AAIxB1G,WAAKA,GAJmB;AAKxBgH,cAAQ,IALgB;AAMxBC,gBAAUpB,KAAK/G,IANS;AAOxBoI,gBAAUlH,GAPc;AAQxBf,UAAI;AARoB,MAAlB,CAAP;AAUA;AACD,WAAO4G,IAAP;AACA,IAfa,CAAd;AAgBA,OAAIa,UAAUrG,SAAd,EAAyB;AACxB;AACA,QAAI8G,QAAQ9H,KAAKC,KAAL,CAAWD,KAAKE,SAAL,8BAAmBqH,WAAnB,sBAAmCC,WAAnC,GAAX,CAAZ;AACA,QAAIO,MAAM,EAAV;AACAD,UAAMjD,MAAN,IAAgBiD,MAAMzH,GAAN,CAAU,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC1CiD,SAAIC,IAAJ,CAAS;AACRL,cAAQ3I,KAAK2I,MADL;AAERC,gBAAU5I,KAAK4I,QAFP;AAGRC,gBAAU7I,KAAK6I,QAHP;AAIRhH,WAAK,MAAK1C,KAAL,CAAW0C,GAJR;AAKR2B,iBAAW,MAAKrE,KAAL,CAAWqE,SALd;AAMR5C,UAAIZ,KAAKY;AAND,MAAT;AAQA,KATe,CAAhB;AAUA,UAAKzB,KAAL,CAAWyE,cAAX,CAA0BmF,GAA1B;AACA,IAfD,MAeO,IAAIV,WAAW,SAAf,EAA0B;AAAI;AACpC,QAAIzH,KAAKwH,KAAKZ,IAAL,CAAU5G,EAAnB;AACA,QAAIA,OAAO,EAAP,IAAaA,OAAO,IAAxB,EAA8B;AAAE;AAC/B,WAAKzB,KAAL,CAAW4E,OAAX,CAAmBnD,EAAnB;AACA;AACD;AACD,SAAKsD,QAAL,CAAc;AACboE,2CAAcC,WAAd,sBAA8BC,WAA9B;AADa,IAAd;AAGA,GA7GkB;;AAAA,QA+GnBS,YA/GmB,GA+GJ,UAACzB,IAAD,EAAU;AACxB,OAAM0B,QAAQ1B,KAAKrH,IAAL,KAAc,YAA5B;AACA,OAAI,KAAJ,EAAW;AACVkD,kBAAQM,KAAR,CAAc,+BAAd;AACA;AACD,OAAMwF,SAAS3B,KAAK4B,IAAL,GAAY,IAAZ,GAAmB,IAAnB,GAA0B,IAAzC;AACA,OAAI,CAACD,MAAL,EAAa;AACZ9F,kBAAQM,KAAR,CAAc,8BAAd;AACA;AACD,OAAIyC,SAAS,IAAIC,UAAJ,EAAb;AACAD,UAAOI,aAAP,CAAqBgB,IAArB;AACApB,UAAOiD,SAAP,GAAmB,YAAM;AACxB;AACA1B,uBAAkB,aAAlB,EAAiCH,IAAjC,EACChI,IADD,CACM,gBAAQ;AACb,YAAOwI,IAAP;AACA,KAHD;AAIA,IAND;AAOA,UAAO,KAAP,CAlBwB,CAkBV;AACd,GAlIkB;;AAElB,QAAKtE,KAAL,GAAa;AACZ4E,aAAU,MAAKnJ,KAAL,CAAWmJ,QADT;AAEZgB,YAAS,KAFG;AAGZ3C,UAAO;AACNG,mBAAe,EADT,EACY;AAClBE,uBAAmB,EAFb,EAEgB;AACtBC,cAAU,EAHJ,EAGO;AACbC,YAAQ,gBAJF,EAIoB;AAC1BC,YAAQ,OALF,EAKW;AACjBE,kBAAc,6BANR,CAMwC;AANxC,IAHK;AAWZqB,SAAM,4CAXM,CAWwC;AAXxC,GAAb;AAFkB;AAelB;;;;4CAEyBa,S,EAAW;AACpC,OAAIvI,KAAKE,SAAL,CAAeqI,UAAUjB,QAAzB,KAAsCtH,KAAKE,SAAL,CAAe,KAAK/B,KAAL,CAAWmJ,QAA1B,CAA1C,EAA+E;AAC9E,SAAKpE,QAAL,CAAc;AACboE,eAAUiB,UAAUjB;AADP,KAAd;AAGA;AACD,OAAItH,KAAKE,SAAL,CAAeqI,UAAU9D,OAAzB,KAAqCzE,KAAKE,SAAL,CAAe,KAAK/B,KAAL,CAAWsG,OAA1B,CAAzC,EAA6E;AAC5E,QAAIkB,QAAQ3F,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,KAAKwC,KAAL,CAAWiD,KAA1B,CAAX,CAAZ;AACA,SAAKzC,QAAL,CAAc;AACbyC,YAAOhH,OAAOC,MAAP,CAAc+G,KAAd,EAAqB;AAC3BG,qBAAeyC,UAAU9D,OAAV,CAAkBoB,WADN,EACmB;AAC9CG,yBAAmBuC,UAAU9D,OAAV,CAAkBsB,eAFV,EAE2B;AACtDE,gBAAUsC,UAAU9D,OAAV,CAAkB+D;AAHD,MAArB;AADM,KAAd;AAOA;AACD;;;sCAEmB;AACnB,OAAI,KAAKrK,KAAL,CAAWmJ,QAAf,EAAyB;AACxB,SAAKpE,QAAL,CAAc;AACboE,eAAU,KAAKnJ,KAAL,CAAWmJ;AADR,KAAd;AAGA;AACD,OAAI,KAAKnJ,KAAL,CAAWsG,OAAf,EAAwB;AACvB,QAAIkB,QAAQ3F,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,KAAKwC,KAAL,CAAWiD,KAA1B,CAAX,CAAZ;AACA,SAAKzC,QAAL,CAAc;AACbyC,YAAOhH,OAAOC,MAAP,CAAc+G,KAAd,EAAqB;AAC3BG,qBAAe,KAAK3H,KAAL,CAAWsG,OAAX,CAAmBoB,WADP,EACoB;AAC/CG,yBAAmB,KAAK7H,KAAL,CAAWsG,OAAX,CAAmBsB,eAFX,EAE4B;AACvDE,gBAAU,KAAK9H,KAAL,CAAWsG,OAAX,CAAmB+D;AAHF,MAArB;AADM,KAAd;AAOA;AAED;;;2BAgFQ;AAAA,OACDlB,QADC,GACW,KAAK5E,KADhB,CACD4E,QADC;;AAER,OAAMnJ,QAAQ;AACbsB,UAAM,MADO;AAEbgJ,cAAU,KAAKtK,KAAL,CAAWsK,QAAX,IAAuBzH,SAAvB,GAAmC,IAAnC,GAA0C,KAAK7C,KAAL,CAAWsK,QAFlD;AAGbC,cAAU,KAAKvB,YAHF;AAIbc,kBAAc,KAAKA,YAJN;AAKbU,cAAU,MALG;AAMbC,eAAW,oBANE;AAObC,cAAU,KAAK1K,KAAL,CAAW0K;AAPR,IAAd;AASA,UACC;AAAC,gBAAD;AAAA,iBAAY1K,KAAZ,IAAmB,UAAUmJ,QAA7B;AACEA,aAASzC,MAAT,IAAmB,CAAnB,IAAwB,KAAK1G,KAAL,CAAWsK,QAAX,IAAuB,KAA/C,GAAuD,IAAvD,GACA,8BAAC,UAAD,IAAM,OAAO,EAACK,UAAU,MAAX,EAAmBC,OAAO,SAA1B,EAAb,EAAmD,MAAK,cAAxD;AAFF,IADD;AAMA;;;;EAtJqBhE,gBAAMC,S;;kBAyJdkC,Q;;;;;;;;;;;;;;;;;;;;AChMf;;;;AACA;;AACA;;IAAYpJ,I;;AACZ;;AAeA;;IAAYC,K;;AACZ;;AACA;;;;AACA;;;;;;;;;;;;;;;;6NAzBA;;;;;;AA2BA,IAAMiL,kBAAkBjE,gBAAMkE,aAAN,EAAxB;AACA,IAAMC,cAAc,SAAdA,WAAc;AAAA,KAAEC,IAAF,QAAEA,IAAF;AAAA,KAAQrE,KAAR,QAAQA,KAAR;AAAA,KAAkB3G,KAAlB;;AAAA,QACnB;AAAC,iBAAD,CAAiB,QAAjB;AAAA,IAA0B,OAAOgL,IAAjC;AACC,sCAAQhL,KAAR;AADD,EADmB;AAAA,CAApB;AAKA,IAAMiL,kBAAkBC,WAAKC,MAAL,GAAcJ,WAAd,CAAxB;AACA,IAAMK,2BAA2B,SAA3BA,wBAA2B,OAAQ;AACxCC,oBAAarK,IAAb,EAAmB;AAClBkD,WAAS,cADS;AAElBoH,eACC,cAHiB;AAIlBC,aAAW;AAJO,EAAnB;AAMA,CAPD;;AASA;;IACMC,Y;;;;;;;;;;;;;;qMACLjH,K,GAAQ;AACPkH,YAAS,IADF,EACO;AACdC,YAAS;AAFF,G,SAIRC,U,GAAa,YAAM;AAClB,OAAMF,UAAU,CAAC,OAAKlH,KAAL,CAAWkH,OAA5B;AACA,UAAK1G,QAAL,CAAc,EAAC0G,gBAAD,EAAd,EAAyB,YAAM;AAC9B,QAAIA,OAAJ,EAAa;AACZ,YAAKG,KAAL,CAAWC,KAAX;AACA;AACD,IAJD;AAKA,G,SACDC,I,GAAO,aAAK;AAAA,sBACkB,OAAK9L,KADvB;AAAA,OACJ+L,MADI,gBACJA,MADI;AAAA,OACIC,UADJ,gBACIA,UADJ;;AAEX,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAI1H,SAASA,MAAM2H,EAAEC,aAAF,CAAgB3K,EAAtB,CAAb,EAAwC;AACvC;AACA;AACD,WAAOyK,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IARD;AASA,G,SAEDG,Q,GAAW,UAACF,CAAD,EAAO;AAAA,uBACY,OAAKnM,KADjB;AAAA,OACV+L,MADU,iBACVA,MADU;AAAA,OACFC,UADE,iBACFA,UADE;;AAEjB,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAI1H,SAASA,MAAM2H,EAAEC,aAAF,CAAgB3K,EAAtB,CAAb,EAAwC;AACvC;AACA;AACD,QAAI0K,MAAI,IAAJ,IAAUA,MAAI,EAAlB,EAAsB;AAClB,SAAIG,OAAOH,CAAP,IAAUG,OAAOJ,OAAOK,UAAd,CAAd,EAAyC;AAC3CnB,+BAAyB,SAAzB;AACA,aAAO,KAAP;AACA;AACD;AACD,WAAOc,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAdD;AAeA,G,SAEDM,Q,GAAW,UAACC,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACH,OAAK1M,KADF;AAAA,OACzB+L,MADyB,iBACzBA,MADyB;AAAA,OACjBC,UADiB,iBACjBA,UADiB;;AAEhC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,WAAtB,CAAJ,EAAwC;AACvCT,YAAO,WAAP,IAAsB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAAtB;AACA;AACD,WAAOV,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDW,S,GAAY,UAACJ,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACJ,OAAK1M,KADD;AAAA,OAC1B+L,MAD0B,iBAC1BA,MAD0B;AAAA,OAClBC,UADkB,iBAClBA,UADkB;;AAEjC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,SAAtB,CAAJ,EAAsC;AACrCT,YAAO,SAAP,IAAoB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAApB;AACA;AACD,WAAOV,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDY,M,GAAS,YAAM;AACd;AACA,G,SACDC,e,GAAkB,UAACC,GAAD,EAAMb,CAAN,EAAY;AAAA,uBACA,OAAKnM,KADL;AAAA,OACtB+L,MADsB,iBACtBA,MADsB;AAAA,OACdC,UADc,iBACdA,UADc;;AAE7B,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAIS,EAAEzF,MAAN,EAAc;AACbgF,cAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAU;AACzB,YAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AACA,KAFS,CAAV;AAGA,IAJD,MAIO;AACN+K,cAAU,EAAV;AACA;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAeD,MAAf,EAA0BlD,IAA1B;AACA,G,SAEDuE,Y,GAAe,UAACC,KAAD,EAAW;AAAA,uBACI,OAAKrN,KADT;AAAA,OAClB+L,MADkB,iBAClBA,MADkB;AAAA,OACVC,UADU,iBACVA,UADU;;AAEzB,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAI2B,MAAM3G,MAAV,EAAkB;AACjBgF,cAAU2B,KAAV;AACA,IAFD,MAEO;AACN3B,cAAU,EAAV;AACA;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAeD,MAAf,EAA0BlD,IAA1B;AACA,G,SAEDyE,iB,GAAoB,sBAAc;AAAA,OAC1BvB,MAD0B,GAChB,OAAK/L,KADW,CAC1B+L,MAD0B;;AAEjC,OAAI,CAACwB,UAAD,IAAe,CAACxB,OAAOyB,OAA3B,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,WAAWX,OAAX,KAAuBb,OAAOyB,OAAP,CAAeZ,OAAf,EAA9B;AACA,G,SAGDa,e,GAAkB,oBAAY;AAAA,OACtB1B,MADsB,GACZ,OAAK/L,KADO,CACtB+L,MADsB;;AAE7B,OAAI,CAAC2B,QAAD,IAAa,CAAC3B,OAAO4B,SAAzB,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,SAASd,OAAT,MAAsBb,OAAO4B,SAAP,CAAiBf,OAAjB,EAA7B;AACA,G,SAEDgB,U,GAAa,gBAAQ;AACpB,UAAK5C,IAAL,GAAYA,IAAZ;AADoB,uBAEmD,OAAKhL,KAFxD;AAAA,OAEbW,QAFa,iBAEbA,QAFa;AAAA,OAEHkN,SAFG,iBAEHA,SAFG;AAAA,OAEQ9B,MAFR,iBAEQA,MAFR;AAAA,OAEgB+B,KAFhB,iBAEgBA,KAFhB;AAAA,OAEuBC,UAFvB,iBAEuBA,UAFvB;AAAA,OAEmCC,YAFnC,iBAEmCA,YAFnC;AAAA,OAGbvC,OAHa,GAGF,OAAKlH,KAHH,CAGbkH,OAHa;;AAIpB,OAAIoC,aAAa,SAAjB,EAA4B;AAAG;AAC9B,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA4B,CAAzD,GAA6D,EAA7D,GAAkEqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAA2B,CAA3B,IAAgCqF,OAAO8B,SAAP,EAAkB3L,GAAlB,CAAsB,UAACrB,IAAD,EAAU;AAC/I,cAAOA,KAAKoM,MAAZ;AACA,OAF+G;AAP9E,MAAlC,EAWA;AAAA;AAAA,QAAK,WAAU,GAAf;AACC,oCAAC,mBAAD;AACC,aAAMlB,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA4B,CAAzD,GAA6D,EAA7D,GAAkEqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAA2B,CAA3B,IAAgCqF,OAAO8B,SAAP,CADzG;AAEC,qBAAc,OAAKT,YAFpB;AAGC,iBAAU,CAAC3B;AAHZ;AADD,MAXA;AADgB,KAAX,GAoBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAAC4C,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C;AAHC;AAKdhL;AALc,KApBjB;AA4BA,IA7BD,MA6BO,IAAIkN,aAAa,MAAjB,EAAyB;AAAG;AAClC,WAAOpC,UACN;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACEwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP;AALoB,MAAlC,EAOA,8BAAC,WAAD;AACC,oBAAc9B,OAAO8B,SAAP,CADf;AAEC,iBAAU,GAFX;AAGC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA,OAHN;AAIC,oBAAc,OAAKxC,IAJpB;AAKC,cAAQ,OAAKA;AALd,OAPA;AADF,KADM,GAmBN;AAAA;AAAA;AACC,iBAAU,0BADX;AAEC,aAAO,EAACuC,WAAW,MAAZ,EAFR;AAGC,eAAS,OAAK1C;AAHf;AAKEhL;AALF,KAnBD;AA2BA,IA5BM,MA4BA,IAAIkN,aAAa,cAAjB,EAAiC;AAAG;AAC1C,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,iBAAD;AACC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA;AACL;AAFD,QAGC,UAAU,OAAKjC,QAHhB;AAIC,cAAQ,OAAKA;AAJd,OAPA;AADe,KAAX,GAgBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACgC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL,aALE;AAAA;AAAA,KAhBL;AAwBA,IAzBM,MAyBA,IAAIkN,aAAa,WAAjB,EAA8B;AAAE;AACtC;AACA,QAAMU,iBAAiBxC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAlF;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,cAAP,EAAuB,YAAvB;AAPvC,MAAlC,EASA;AAAA;AAAA,QAAK,WAAU,YAAf,EAA4B,OAAO,EAACC,UAAU,OAAX,EAAnC;AACC;AAAC,uBAAD;AAAA,SAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,gBAAMR,aAAajC,MAAb,CAAN;AAAA,SAAvC;AACC,qCAAC,UAAD;AACC,eAAO;AACN0C,gBAAO,MADD;AAEN7D,gBAAO,SAFD;AAGND,mBAAU,MAHJ;AAIN+D,gBAAO;AAJD,SADR;AAOC,cAAK,cAPN;AADD,OADD;AAWC,oCAAC,gBAAD;AACC,qBAAc3C,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,cAAP,EAAuB,YAAvB,CAD1E;AAEC,cAAO;AACNE,eAAO,mBADD;AAENC,eAAO,OAFD;AAGNF,kBAAU;AAHJ,QAFR;AAOC,eAAO,YAPR;AAQC,YAAK;AAAA,eAAS,OAAK5C,KAAL,GAAa0C,IAAtB;AAAA,QARN;AASC,iBAAU,OAAK9B;AACf;AAVD,SAWC,cAAc,OAAKc;AAXpB;AAXD,MATA;AADgB,KAAX,GAoCU;AAAA;AAAA,OAAK,WAAU,YAAf;AACf;AAAC,sBAAD;AAAA,QAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,eAAMU,aAAajC,MAAb,CAAN;AAAA,QAAvC;AACC,oCAAC,UAAD;AACC,cAAO;AACN0C,eAAO,MADD;AAEN7D,eAAO,SAFD;AAGND,kBAAU,MAHJ;AAIN+D,eAAO;AAJD,QADR;AAOC,aAAK,cAPN;AADD,MADe;AAWf;AAAA;AAAA;AACC,kBAAU,0BADX;AAEC,cAAO;AACND,eAAO,mBADD;AAENC,eAAO,OAFD;AAGNL,mBAAW;AAHL,QAFR;AAOC,gBAAS,OAAK1C;AAPf;AASEhL;AATF;AAXe,KApCjB;AA4DA,IA/DM,MA+DA,IAAIkN,aAAa,SAAjB,EAA4B;AAAE;AACpC;AACA,QAAMU,kBAAiBxC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAlF;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,eAAP,EAAuB,YAAvB;AAPvC,MAAlC,EASA,8BAAC,gBAAD;AACC,aAAO,EAACC,UAAU,OAAX,EADR;AAEC,oBAAczC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,eAAP,EAAuB,YAAvB,CAF1E;AAGC,cAAO,YAHR;AAIC,WAAK;AAAA,cAAS,OAAK3C,KAAL,GAAa0C,IAAtB;AAAA,OAJN;AAKC,gBAAU,OAAKzB;AACf;AAND,QAOC,cAAc,OAAKY;AAPpB,OATA;AADgB,KAAX,GAoBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAACY,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C;AAHC;AAKdhL;AALc,KApBjB;AA4BA,IA/BM,MA+BA,IAAIkN,aAAa,YAAjB,EAA+B;AAAG;AACxC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,iBAAD;AACC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA,OADN;AAEC,oBAAc,OAAKxC,IAFpB;AAGC,cAAQ,OAAKA;AAHd,OAPA;AADe,KAAX,GAeF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL,aALE;AAAA;AAAA,KAfL;AAuBA,IAxBM,MAwBA;AAAG;AACT,WAAO8K,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,WAAD;AACC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA,OADN;AAEC,oBAAc,OAAKxC,IAFpB;AAGC,cAAQ,OAAKA,IAHd;AAIC,mBAAY;AAJb,OAPA;AADe,KAAX,GAgBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL;AALE,KAhBL;AAwBA;AACD,G;;AAhUD;;AAmBA;;AAwCA;;AAaA;;;AASA;;;;;2BAiPS;AAAA,gBAWJ,KAAKX,KAXD;AAAA,OAEP2O,QAFO,UAEPA,QAFO;AAAA,OAGPd,SAHO,UAGPA,SAHO;AAAA,OAIPC,KAJO,UAIPA,KAJO;AAAA,OAKP/B,MALO,UAKPA,MALO;AAAA,OAMPpF,KANO,UAMPA,KANO;AAAA,OAOPqF,UAPO,UAOPA,UAPO;AAAA,OAQPrL,QARO,UAQPA,QARO;AAAA,OASPoN,UATO,UASPA,UATO;AAAA,OAUJa,SAVI;;AAYR,UACC;AAAA;AAAQA,aAAR;AACED,eACA;AAAC,oBAAD,CAAiB,QAAjB;AAAA;AAA2B,UAAKf;AAAhC,KADA,GAGAjN;AAJF,IADD;AASA;;;;EAhXyBiG,gBAAMC,S;;AAoXjC;;;;;IAIMgI,U,OADL9O,mB;;;AAEA,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA,uHACZA,KADY;;AAAA,SAyCnB8O,UAzCmB,GAyCN,YAAM;AAClB,UAAK/J,QAAL,CAAc;AACbgK,gBAAY;AADC,IAAd;AAGA,GA7CkB;;AAAA,SAgDnBf,YAhDmB,GAgDJ,UAACjC,MAAD,EAAY;AAAA,OACnBtK,EADmB,GACRsK,MADQ,CACnBtK,EADmB;AAAA,OACfuN,GADe,GACRjD,MADQ,CACfiD,GADe;;AAE1B,OAAIvN,OAAO,EAAP,IAAaA,OAAO,IAApB,IAA4B,CAACA,GAAGwN,UAAH,CAAc,GAAd,CAAjC,EAAqD;AAAE;AACtD,WAAK7O,KAAL,CAAWwE,OAAX,CAAmBnD,EAAnB,EAAuBpB,IAAvB,CAA4B,UAAC4D,GAAD,EAAS;AACpC,SAAIA,GAAJ,EAAS;AACRC,oBAAQC,OAAR,CAAgB,MAAhB;AACA;AACA,aAAKnE,KAAL,CAAWkF,UAAX;AACA,UAAM6J,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,aAAKhK,QAAL,CAAc;AACbgK,mBAAYA,WAAWnO,MAAX,CAAkB;AAAA,eAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,QAAlB;AADC,OAAd,EAEG,YAAM;AACR,cAAKhP,KAAL,CAAWkP,iBAAX,CAA6B,OAAK3K,KAAL,CAAWwK,UAAxC;AACA;AACA,WAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,cAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACA,OAPD;AAQA,MAbD,MAaO;AACN7H,oBAAQM,KAAR,CAAc,MAAd;AACA;AACD,KAjBD;AAkBA,IAnBD,MAmBO;AAAE;AACR,QAAMuK,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,WAAKhK,QAAL,CAAc;AACbgK,iBAAYA,WAAWnO,MAAX,CAAkB;AAAA,aAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,MAAlB;AADC,KAAd,EAEG,YAAM;AACR,YAAKhP,KAAL,CAAWkP,iBAAX,CAA6B,OAAK3K,KAAL,CAAWwK,UAAxC;AACA;AACA,SAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,YAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACA,KAPD;AAQA;AACD,GAhFkB;;AAAA,SAkFnBoD,SAlFmB,GAkFP,YAAM;AAAA,sBACW,OAAK5K,KADhB;AAAA,OACVO,KADU,gBACVA,KADU;AAAA,OACHiK,UADG,gBACHA,UADG;AAAA,OAEVK,SAFU,GAEG,OAAKpP,KAFR,CAEVoP,SAFU;;AAGjB,OAAMC,UAAU7O,OAAOC,MAAP,CAAc2O,SAAd,EAAyB,EAAC,OAAOtK,KAAR,EAAerD,IAAI,MAAM,eAAzB,EAAzB,CAAhB;AACA,UAAKsD,QAAL,CAAc;AACbgK,6CAAgBA,UAAhB,IAA4BM,OAA5B,EADa;AAEbvK,WAAOA,QAAQ;AAFF,IAAd,EAGG,YAAM;AACR,WAAK9E,KAAL,CAAWkP,iBAAX,CAA6B,OAAK3K,KAAL,CAAWwK,UAAxC;AACA;AACA,QAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsC8O,OAAtC,CAAtB;AACA;AACA,IATD;AAUA,GAhGkB;;AAAA,SAkGnBrD,UAlGmB,GAkGN,eAAO;AACnB;AACA,OAAIM,OAAOgD,IAAIC,YAAX,IAAyBjD,OAAOgD,IAAI/C,UAAX,CAA7B,EAAqD;AACpD;AACA,WAAO,KAAP;AACA;AACD,OAAM8C,uCAAc,OAAK9K,KAAL,CAAWwK,UAAzB,EAAN;AACA,OAAMpI,QAAQ0I,QAAQG,SAAR,CAAkB;AAAA,WAAQF,IAAIN,GAAJ,KAAYnO,KAAKmO,GAAzB;AAAA,IAAlB,CAAd;AACA,OAAMnO,OAAOwO,QAAQ1I,KAAR,CAAb;AACA0I,WAAQI,MAAR,CAAe9I,KAAf,EAAsB,CAAtB,eACI9F,IADJ,EAEIyO,GAFJ;AAIA,UAAKvK,QAAL,CAAc,EAACgK,YAAYM,OAAb,EAAd,EAAqC,YAAM;AAC1C,WAAKrP,KAAL,CAAWkP,iBAAX,CAA6B,OAAK3K,KAAL,CAAWwK,UAAxC;AACA,QAAIW,SAAS7N,KAAKC,KAAL,CAAWD,KAAKE,SAAL,cAAmBuN,GAAnB,EAAX,CAAb;AACA;AACA,QAAI/O,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyCmP,MAAzC,CAAtB;AACA,IAND;AAOA,GAtHkB;;AAAA,SAwHnBC,eAxHmB,GAwHD,YAAM;AACvB,OAAIC,cAAJ;AACAA,SAAM5P,KAAN,CAAY6P,gBAAZ;AACA,GA3HkB;;AAElB,SAAKzP,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZwK,eAAY,EADA,EACK;AACjBjK,UAAO;AAFK,GAAb;AAHkB;AAOlB;;;;4CAEyBsF,S,EAAW0F,W,EAAa;AAAA;;AACjD;;;AAGA,OAAIjO,KAAKE,SAAL,CAAeqI,UAAU2E,UAAzB,KAAwClN,KAAKE,SAAL,CAAe,KAAK/B,KAAL,CAAW+O,UAA1B,CAA5C,EAAmF;AAClF,SAAKhK,QAAL,CAAc;AACbgK,iBAAY3E,UAAU2E,UAAV,IAAwB,IAAxB,IAAgC3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA+B,CAA/D,GAAmE,EAAnE,GAAwE0D,UAAU2E,UAAV,CAAqB7M,GAArB,CAAyB,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC7H,aAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAAC,OAAO8F,KAAR,EAApB,CAAP;AACA,MAFmF,CADvE;AAIb7B,YAAOsF,UAAU2E,UAAV,KAAyB,IAAzB,IAAiC3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA+B,CAAhE,GAAoE,CAApE,GAAwE0D,UAAU2E,UAAV,CAAqBrI;AAJvF,KAAd,EAKG,YAAM;AACR0D,eAAU8E,iBAAV,CAA4B,OAAK3K,KAAL,CAAWwK,UAAvC;AACA,KAPD;AAQA;AACD;;;sCAEmB;AAAA;;AACnB,QAAKhK,QAAL,CAAc;AACbgK,gBAAY,KAAK/O,KAAL,CAAW+O,UAAX,IAAyB,IAAzB,IAAiC,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAAgC,CAAjE,GAAqE,EAArE,GAA0E,KAAK1G,KAAL,CAAW+O,UAAX,CAAsB7M,GAAtB,CAA0B,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAChI,YAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAAC,OAAO8F,KAAR,EAApB,CAAP;AACA,KAFqF,CADzE;AAIb7B,WAAO,KAAK9E,KAAL,CAAW+O,UAAX,KAA0B,IAA1B,IAAkC,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAAgC,CAAlE,GAAsE,CAAtE,GAA0E,KAAK1G,KAAL,CAAW+O,UAAX,CAAsBrI;AAJ1F,IAAd,EAKG,YAAM;AACR,WAAK1G,KAAL,CAAWkP,iBAAX,CAA6B,OAAK3K,KAAL,CAAWwK,UAAxC;AACA,IAPD;AAQA,QAAK/O,KAAL,CAAW+P,SAAX,CAAqB,IAArB;AACA;;;qCAEkBC,S,EAAWC,S,EAAW,CAExC;;AAQD;;;;2BA8ES;AAAA;;AAAA,OACDlB,UADC,GACa,KAAKxK,KADlB,CACDwK,UADC;AAAA,OAEDrE,QAFC,GAEW,KAAK1K,KAFhB,CAED0K,QAFC;;AAGR,OAAMwF,aAAa;AAClBC,UAAM;AACLb,UAAKrE,eADA;AAELmF,WAAM5E;AAFD;AADY,IAAnB;AAMA,OAAM6E,YAAY,CACjB;AACCvC,WAAO,MADR;AAECD,eAAW,WAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAJZ;AAKC4F,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAU;AACjB,YAAOA,QAAQ,IAAR,IAAgBA,QAAQ,CAAxB,GAA4B,EAA5B,GAAiC,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB,CAAxC;AACA;AARF,IADiB,EAWjB;AACCwF,WAAO,MADR;AAECD,eAAW,SAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAJZ;AAKC4F,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAU;AACjB,YAAOA,QAAQ,IAAR,IAAgBA,QAAQ,CAAxB,GAA4B,EAA5B,GAAiC,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB,CAAxC;AACA;AARF,IAXiB,EAqBjB;AACCwF,WAAO,MADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAIC6B,WAAO,QAJR;AAKC3B,cAAU,CAACjE,QALZ;AAMC6F,YAAQ,gBAACC,IAAD;AAAA,YAAY;AAAA;AAAA;AAAOA;AAAP,MAAZ;AAAA;AANT,IArBiB,EA6BjB;AACC1C,WAAO,KADR;AAECD,eAAW,SAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAJZ;AAKC4F,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAU;AACjB,YAAOA,QAAQ,IAAR,GAAe,EAAf,GAAoBA,KAAKtO,GAAL,CAAS;AAAA,aAAQrB,KAAKsM,QAAb;AAAA,MAAT,EAAgCsD,IAAhC,CAAqC,GAArC,CAA3B;AACA;AARF,IA7BiB,EAuCjB;AACC3C,WAAO,MADR;AAECD,eAAW,YAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAJZ;AAKC4F,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD;AAAA,YAAW;AAAA;AAAA;AAAOA,UAAP;AAAA;AAAA,MAAX;AAAA;AANT,IAvCiB,EA+CjB;AACC1C,WAAO,MADR;AAECD,eAAW,cAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAJZ;AAKC4F,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP;AAAA,YAAmB;AAAA;AAAA,QAAM,IAAIA,OAAOtK,EAAjB;AAAsB+O,UAAtB;AAAA;AAAA,MAAnB;AAAA;AANT,IA/CiB,EAuDjB;AACC1C,WAAO,IADR;AAECD,eAAW,QAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAJZ;AAKC4F,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD;AAAA,YAAW;AAAA;AAAA;AAAOA;AAAP,MAAX;AAAA;AANT,IAvDiB,CAAlB;AAgEA,OAAME,UAAUL,UAAUnO,GAAV,CAAc,eAAO;AACpC,QAAI,CAACyO,IAAIhC,QAAT,EAAmB;AAClB,YAAOgC,GAAP;AACA;AACD,wBACIA,GADJ;AAECC,aAAQ;AAAA,aAAW;AAClB7E,qBADkB;AAElB4C,iBAAUgC,IAAIhC,QAFI;AAGlBd,kBAAW8C,IAAI9C,SAHG;AAIlBC,cAAO6C,IAAI7C,KAJO;AAKlBC,mBAAYpO,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CALM;AAMlB/B,mBAAY,OAAKA,UANC;AAOlBgC,qBAAc,OAAKA;AAPD,OAAX;AAAA;AAFT;AAYA,IAhBe,CAAhB;AAiBA,UACC;AAAC,cAAD;AAAA,MAAM,cAAN,EAAe,OAAO,EAACS,OAAO,MAAR,EAAtB;AACC,kCAAC,WAAD;AACC,iBAAYyB,UADb;AAEC,mBAAc;AAAA,aAAM,cAAN;AAAA,MAFf;AAGC,gBAAU,WAHX;AAIC,eAAU,KAJX;AAKC,iBAAYnB,UALb;AAMC,cAAS2B,OANV;AAOC,iBAAY,KAPb;AAQC,WAAM,QARP;AASC,aAAQ;AAAA,aAAOpB,IAAI7N,EAAX;AAAA;AATT,MADD;AAYC,kCAAC,UAAD,IAAM,WAAWiJ,WAAW,QAAX,GAAsB,EAAvC,EAA2C,SAAS,KAAKyE,SAAzD;AACM,YAAO,EAAC3I,QAAQ,QAAT,EAAmBoE,OAAO,SAA1B,EAAqCD,UAAU,MAA/C,EADb,EACqE,MAAK,aAD1E,GAZD;AAcC;AAAC,cAAD;AAAA;AACC;AAAC,eAAD;AAAA,QAAK,MAAM,EAAX,EAAe,OAAO,EAACkG,WAAW,OAAZ,EAAqBC,WAAW,MAAhC,EAAtB;AACC,oCAAC,UAAD,IAAM,SAAS,KAAKnB,eAApB;AACM,cAAM,cADZ;AAEM,aAAK,cAFX;AAGM,kBAAU,SAHhB;AAIM,cAAO,EAAC/E,OAAO,SAAR,EAJb;AAKM,eAAQ,CAAC,EALf;AADD;AADD;AAdD,IADD;AA2BA;;;;EAnPuBhE,gBAAMC,S;;kBAsPhBgI,U;;;;;;;;;;;;;;;;;ACzoBf;;;;AACA;;AACA;;;;;;;;;;;AAlBA;;;;;;;;;;;;;;;;;;AAoBA,IAAMkC,SAASC,aAAOD,MAAtB;;IAEqBE,e;;;AACnB,2BAAYjR,KAAZ,EAAmB;AAAA;;AAAA,kIACXA,KADW;;AAAA,UAwBnBgJ,YAxBmB,GAwBJ,UAACgE,GAAD,EAAMb,CAAN,EAAY;AAAA,UACpB5B,QADoB,GACR,MAAKvK,KADG,CACpBuK,QADoB;;AAEzB,UAAIA,QAAJ,EAAc;AACZA,iBAASyC,GAAT,EAAcb,CAAd;AACD;AACF,KA7BkB;;AAAA,UA+BnB+E,WA/BmB,GA+BL,YAAM;AAAA,wBACoB,MAAKlR,KADzB;AAAA,UACXgB,IADW,eACXA,IADW;AAAA,UACNmQ,SADM,eACNA,SADM;AAAA,UACI1O,KADJ,eACIA,KADJ;AAAA,UACUD,GADV,eACUA,GADV;AAAA,UACc2N,IADd,eACcA,IADd;;AAElBiB,YAAM5O,GAAN,EAAW;AACT6O,gBAAQ,MADC;AAETC,iBAAS;AACP,0BAAgB,kBADT;AAEP,oBAAU;AAFH,SAFA;AAMTnB,cAAMtO,KAAKE,SAAL,CAAe;AACnBU,iBAAOA,KADY;AAEnB0O,qBAAWA;AAFQ,SAAf;AANG,OAAX,EAWC9Q,IAXD,CAWM;AAAA,eAAYkR,SAASC,IAAT,EAAZ;AAAA,OAXN,EAYCnR,IAZD,CAYM,gBAAQ;AACZ,YAAImR,KAAK3I,IAAL,KAAY,IAAZ,IAAkB2I,KAAK3I,IAAL,CAAU7H,IAAV,MAAkB,IAAxC,EAA8C;AAAE;AAC9C,cAAI6H,aAAJ;AACA,cAAIsH,SAAOtN,SAAX,EAAsB;AACpBgG,mBAAO2I,KAAK3I,IAAL,CAAU7H,IAAV,EAAgB,MAAhB,CAAP;AACD,WAFD,MAEO;AACL6H,mBAAO2I,KAAK3I,IAAL,CAAU7H,IAAV,CAAP;AACD;AACD,cAAI,MAAKhB,KAAL,CAAWyR,WAAf,EAA4B;AAC1B5I,mBAAOA,KAAK3G,GAAL,CAAS;AAAA,qBAAQ,MAAKlC,KAAL,CAAWyR,WAAX,CAAuB5Q,IAAvB,CAAR;AAAA,aAAT,CAAP;AACD;AACD,gBAAKkE,QAAL,CAAc;AACZ8D;AADY,WAAd;AAGD,SAbD,MAaO;AACL,gBAAK9D,QAAL,CAAc;AACZ8D,kBAAM;AADM,WAAd;AAGD;AACF,OA/BD;AAgCD,KAjEkB;;AAEjB,UAAKtE,KAAL,GAAa;AACXsE,YAAM,EADK;AAEXqE,aAAOlN,MAAMkN,KAAN,IAAe;AAFX,KAAb;AAFiB;AAMlB;;;;8CAEyB9C,S,EAAW;AACnC,UAAI,WAAWA,SAAX,IAAwB,KAAKpK,KAAL,CAAWkN,KAAX,KAAqB9C,UAAU8C,KAA3D,EAAkE;AAChE,aAAKnI,QAAL,CAAc;AACZmI,iBAAO9C,UAAU8C;AADL,SAAd;AAGD;AACF;;;wCAEmB;AAClB,UAAI,CAAC,KAAKlN,KAAL,CAAWwC,GAAhB,EAAqB;AACnB;AACD;AACD;AACA,WAAK0O,WAAL;AACD;;;6BA6CQ;AAAA,UACArI,IADA,GACQ,KAAKtE,KADb,CACAsE,IADA;AAAA,mBAE+D,KAAK7I,KAFpE;AAAA,UAEAkN,KAFA,UAEAA,KAFA;AAAA,UAEMwE,OAFN,UAEMA,OAFN;AAAA,UAEcC,SAFd,UAEcA,SAFd;AAAA,UAEwBC,WAFxB,UAEwBA,WAFxB;AAAA,UAEoCC,KAFpC,UAEoCA,KAFpC;AAAA,UAE0CnH,QAF1C,UAE0CA,QAF1C;AAAA,UAEmDxH,GAFnD,UAEmDA,GAFnD;AAAA,UAEuD4J,MAFvD,UAEuDA,MAFvD;;AAGP,UAAMgF,UAAUjJ,KAAKnC,MAAL,IAAamC,KAAK3G,GAAL,CAAS,UAACrB,IAAD,EAAO8F,KAAP;AAAA,eAAgB;AAAC,gBAAD;AAAA,YAAQ,KAAKA,KAAb,EAAoB,OAAO9F,KAAK6Q,OAAL,CAA3B,EAA0C,KAAK7Q,IAA/C;AAAsDA,eAAK8Q,SAAL;AAAtD,SAAhB;AAAA,OAAT,CAA7B;;AAEA,aACE;AAAC,oBAAD;AAAA;AACE,gBAAK,UADP;AAEE,uBAAaC,eAAa,KAF5B;AAGE,iBAAOC,KAHT;AAIE,iBAAO3E,KAJT;AAKE,oBAAU,KAAKlE,YALjB;AAME,mBAAS,KAAKkI,WANhB;AAOE,kBAAQpE,MAPV;AAQE,oBAAUpC,QARZ;AASE,eAAKxH;AATP;AAWG4O;AAXH,OADF;AAeD;;;;EAxF0ClL,gBAAMC,S;;kBAA9BoK,e;;;AA2FrBA,gBAAgBc,SAAhB,GAA4B;AAC1BF,SAAOG,oBAAUC,MADS;AAE1BL,eAAaI,oBAAUE,MAFG;AAG1BhF,SAAO8E,oBAAUE,MAHS;AAI1B1P,OAAKwP,oBAAUE,MAJW;AAK1BT,eAAaO,oBAAUG,IALG;AAM1B5H,YAAUyH,oBAAUG;AANM,CAA5B,C;;;;;;;;;;;;;;;;;;;;AC/GA;;;;AACA;;AACA;;AAcA;;;;AACA;;;;AACA;;;;AACA;;IAAaxS,I;;AACb;;IAAYC,K;;AACZ;;AACA;;;;;;;;;;;;;;;;;;6NAzBA;;;;;AA2BA,IAAIwS,cAAc,KAAlB;IACOrB,M,GAAUC,Y,CAAVD,M;;AACP,IAAMlG,kBAAkBjE,gBAAMkE,aAAN,EAAxB;AACA,IAAMC,cAAc,SAAdA,WAAc;AAAA,KAAEC,IAAF,QAAEA,IAAF;AAAA,KAAQrE,KAAR,QAAQA,KAAR;AAAA,KAAkB3G,KAAlB;;AAAA,QACnB;AAAC,iBAAD,CAAiB,QAAjB;AAAA,IAA0B,OAAOgL,IAAjC;AACC,sCAAQhL,KAAR;AADD,EADmB;AAAA,CAApB;AAKA,IAAMiL,kBAAkBC,WAAKC,MAAL,GAAcJ,WAAd,CAAxB;;AAEA;;IACMS,Y;;;;;;;;;;;;;;qMACLjH,K,GAAQ;AACPkH,YAAS,IADF,EACQ;AACfC,YAAS;AAFF,G,SAIRC,U,GAAa,YAAM;AAClB,OAAMF,UAAU,CAAC,OAAKlH,KAAL,CAAWkH,OAA5B;AACA,UAAK1G,QAAL,CAAc,EAAC0G,gBAAD,EAAd,EAAyB,YAAM;AAC9B,QAAIA,OAAJ,EAAa;AACZ,YAAKG,KAAL,CAAWC,KAAX;AACA;AACD,IAJD;AAKA,G,SACDC,I,GAAO,aAAK;AAAA,sBACkB,OAAK9L,KADvB;AAAA,OACJ+L,MADI,gBACJA,MADI;AAAA,OACIC,UADJ,gBACIA,UADJ;;AAEX,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAI1H,SAASA,MAAM2H,EAAEC,aAAF,CAAgB3K,EAAtB,CAAb,EAAwC;AACvC;AACA;AACD;AACA,WAAOyK,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IATD;AAUA,G,SAEDM,Q,GAAW,UAACC,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACH,OAAK1M,KADF;AAAA,OACzB+L,MADyB,iBACzBA,MADyB;AAAA,OACjBC,UADiB,iBACjBA,UADiB;;AAEhC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,WAAtB,CAAJ,EAAwC;AACvCT,YAAO,WAAP,IAAsB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAAtB;AACA;AACD,WAAOV,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDW,S,GAAY,UAACJ,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACJ,OAAK1M,KADD;AAAA,OAC1B+L,MAD0B,iBAC1BA,MAD0B;AAAA,OAClBC,UADkB,iBAClBA,UADkB;;AAEjC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,SAAtB,CAAJ,EAAsC;AACrCT,YAAO,SAAP,IAAoB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAApB;AACA;AACD,WAAOV,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDa,e,GAAkB,UAACC,GAAD,EAAMb,CAAN,EAAY;AAAA,uBACA,OAAKnM,KADL;AAAA,OACtB+L,MADsB,iBACtBA,MADsB;AAAA,OACdC,UADc,iBACdA,UADc;;AAE7B,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAIS,EAAEzF,MAAN,EAAc;AACbgF,cAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAU;AACzB,YAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AACA,KAFS,CAAV;AAGA,IAJD,MAIO;AACN+K,cAAU,EAAV;AACA;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAeD,MAAf,EAA0BlD,IAA1B;AACA,G,SAGDuE,Y,GAAe,UAACC,KAAD,EAAW;AAAA,uBACI,OAAKrN,KADT;AAAA,OAClB+L,MADkB,iBAClBA,MADkB;AAAA,OACVC,UADU,iBACVA,UADU;;AAEzB,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAI2B,MAAM3G,MAAV,EAAkB;AACjBgF,cAAU2B,KAAV;AACA,IAFD,MAEO;AACN3B,cAAU,EAAV;AACA;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAeD,MAAf,EAA0BlD,IAA1B;AACA,G,SACDiE,M,GAAS,YAAM,CAEd;AADA;;AAED;WACAQ,iB,GAAoB,sBAAc;AAAA,OAC1BvB,MAD0B,GAChB,OAAK/L,KADW,CAC1B+L,MAD0B;;AAEjC,OAAI,CAACwB,UAAD,IAAe,CAACxB,OAAOyB,OAA3B,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,WAAWX,OAAX,KAAuBb,OAAOyB,OAAP,CAAeZ,OAAf,EAA9B;AACA,G,SAEDa,e,GAAkB,oBAAY;AAAA,OACtB1B,MADsB,GACZ,OAAK/L,KADO,CACtB+L,MADsB;;AAE7B,OAAI,CAAC2B,QAAD,IAAa,CAAC3B,OAAO4B,SAAzB,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,SAASd,OAAT,MAAsBb,OAAO4B,SAAP,CAAiBf,OAAjB,EAA7B;AACA,G,SACDgB,U,GAAa,gBAAQ;AACpB,UAAK5C,IAAL,GAAYA,IAAZ;AADoB,uBAEmD,OAAKhL,KAFxD;AAAA,OAEbW,QAFa,iBAEbA,QAFa;AAAA,OAEHkN,SAFG,iBAEHA,SAFG;AAAA,OAEQ9B,MAFR,iBAEQA,MAFR;AAAA,OAEgB+B,KAFhB,iBAEgBA,KAFhB;AAAA,OAEuBC,UAFvB,iBAEuBA,UAFvB;AAAA,OAEmCC,YAFnC,iBAEmCA,YAFnC;AAAA,OAGbvC,OAHa,GAGF,OAAKlH,KAHH,CAGbkH,OAHa;;AAIpB,OAAIoC,aAAa,MAAjB,EAAyB;AAAG;AAC3B,WAAOpC,UACN;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACEwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,IADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP;AALoB,MAAlC,EAOA;AAAA;AAAA,QAAK,WAAU,YAAf;AACC;AAAC,uBAAD;AAAA,SAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,gBAAMG,aAAajC,MAAb,CAAN;AAAA,SAAvC;AACC,qCAAC,UAAD;AACC,eAAO;AACN0C,gBAAO,MADD;AAEN7D,gBAAO,SAFD;AAGND,mBAAU,MAHJ;AAIN+D,gBAAO;AAJD,SADR;AAOC,cAAK,cAPN;AADD,OADD;AAWC,oCAAC,WAAD;AACC,cAAO;AACNA,eAAO,OADD;AAEND,eAAO;AAFD,QADR;AAKC,qBAAc1C,OAAO8B,SAAP,CALf;AAMC,YAAK;AAAA,eAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA;AACL;AAPD,SAQC,cAAc,OAAKxC,IARpB;AASC,eAAQ,OAAKA;AATd;AAXD,MAPA;AADF,KADM,GAmCN;AAAA;AAAA,OAAK,WAAU,YAAf;AACC;AAAC,sBAAD;AAAA,QAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,eAAMkC,aAAajC,MAAb,CAAN;AAAA,QAAvC;AACC,oCAAC,UAAD;AACC,cAAO;AACN0C,eAAO,MADD;AAEN7D,eAAO,SAFD;AAGND,kBAAU,MAHJ;AAIN+D,eAAO;AAJD,QADR;AAOC,aAAK,cAPN;AADD,MADD;AAWC;AAAA;AAAA;AACC,kBAAU,0BADX;AAEC,cAAO;AACNA,eAAO,OADD;AAEND,eAAO,mBAFD;AAGNJ,mBAAW;AAHL,QAFR;AAOC,gBAAS,OAAK1C;AAPf;AASEhL;AATF;AAXD,KAnCD;AA2DA,IA5DD,MA4DO,IAAIkN,aAAa,SAAjB,EAA4B;AAAG;AACrC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB,EAA+B,WAAU,GAAzC;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA4B,CAAzD,GAA6D,EAA7D,GAAkEqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAA2B,CAA3B,IAAgCqF,OAAO8B,SAAP,EAAkB3L,GAAlB,CAAsB,UAACrB,IAAD,EAAU;AAC/I,cAAOA,KAAKoM,MAAZ;AACA,OAF+G;AAP9E,MAAlC,EAWA;AAAA;AAAA,QAAK,WAAU,GAAf,EAAmB,KAAK;AAAA,eAAS,OAAKrB,KAAL,GAAa0C,IAAtB;AAAA,QAAxB;AACC,oCAAC,mBAAD;AACC,aAAMvC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA4B,CAAzD,GAA6D,EAA7D,GAAkEqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAA2B,CAA3B,IAAgCqF,OAAO8B,SAAP,CADzG;AAEC,qBAAc,OAAKT,YAFpB;AAGC,iBAAU,CAAC3B;AAHZ;AADD,MAXA;AADgB,KAAX,GAoBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAAC4C,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C,UAHC;AAIdhL;AAJc,KApBjB;AA2BA,IA5BM,MA4BA,IAAIkN,aAAa,WAAjB,EAA8B;AAAE;AACtC;AACA,QAAMU,iBAAiBxC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAlF;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,cAAP,EAAuB,YAAvB;AAPvC,MAAlC,EASA,8BAAC,gBAAD;AACC,cAAO,YADR;AAEC,WAAK;AAAA,cAAS,OAAK3C,KAAL,GAAa0C,IAAtB;AAAA,OAFN;AAGC,gBAAU,OAAK9B;AACf;AAJD,QAKC,cAAc,OAAKc;AALpB,OATA;AADgB,KAAX,GAkBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAACe,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C;AAHC;AAKdhL;AALc,KAlBjB;AA0BA,IA7BM,MA6BA,IAAIkN,aAAa,SAAjB,EAA4B;AAAE;AACpC;AACA,QAAMU,kBAAiBxC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAlF;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,eAAP,EAAuB,YAAvB;AAPvC,MAAlC,EASA,8BAAC,gBAAD;AACC,cAAO,YADR;AAEC,WAAK;AAAA,cAAS,OAAK3C,KAAL,GAAa0C,IAAtB;AAAA,OAFN;AAGC,gBAAU,OAAKzB;AACf;AAJD,QAKC,cAAc,OAAKY;AALpB,OATA;AADgB,KAAX,GAkBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAACY,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C;AAHC;AAKdhL;AALc,KAlBjB;AA0BA,IA7BM,MA6BA,IAAIkN,aAAa,QAAjB,EAA2B;AAAG;AACpC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,WAAD;AACC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA,OADN;AAEC,oBAAc,OAAKxC,IAFpB;AAGC,cAAQ,OAAKA,IAHd;AAIC,mBAAY;AAJb,OAPA;AADe,KAAX,GAgBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFI,YAAO8B,SAAP,KAAmB,EAAnB,IAAuB9B,OAAO8B,SAAP,KAAmB,IAA1C,GAA+C,IAA/C,GAAoD9B,OAAO8B,SAAP;AALlD,KAhBL;AAwBA,IAzBM,MAyBA;AAAG;AACT,QAAMwE,YAAYtG,OAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,CAAgB+F,MAAhB,IAA0B,CAArD,GAAyD,CAAzD,GAA6DqF,OAAOpL,QAAP,CAAgB+F,MAA/F;AACA,QAAM9D,SAASyP,YAAY,CAAZ,GAAgB,IAAhB,GAAuB,KAAtC;AACA,WAAO5G,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,iBAAD;AACC,gBAAUjL,MADX;AAEC,WAAK,CAFN;AAGC,WAAK,GAHN;AAIC,WAAK;AAAA,cAAS,OAAKgJ,KAAL,GAAa0C,IAAtB;AAAA,OAJN;AAKC,oBAAc,OAAKxC,IALpB;AAMC,cAAQ,OAAKA;AANd,OAPA;AADe,KAAX,GAkBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL,aALE;AAAA;AAAA,KAlBL;AA0BA;AACD,G;;AAnRD;;;AAsCA;;AAwBA;;;;;2BAuNS;AAAA,gBAWJ,KAAKX,KAXD;AAAA,OAEP2O,QAFO,UAEPA,QAFO;AAAA,OAGPd,SAHO,UAGPA,SAHO;AAAA,OAIPC,KAJO,UAIPA,KAJO;AAAA,OAKP/B,MALO,UAKPA,MALO;AAAA,OAMPpF,KANO,UAMPA,KANO;AAAA,OAOPqF,UAPO,UAOPA,UAPO;AAAA,OAQPrL,QARO,UAQPA,QARO;AAAA,OASPoN,UATO,UASPA,UATO;AAAA,OAUJa,SAVI;;AAYR,UACC;AAAA;AAAQA,aAAR;AACED,eACA;AAAC,oBAAD,CAAiB,QAAjB;AAAA;AAA2B,UAAKf;AAAhC,KADA,GAGAjN;AAJF,IADD;AASA;;;;EApUyBiG,gBAAMC,S;;AAuUjC;;;;;IAIMyL,a,OADLvS,mB;;;AAEA,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,6HACZA,KADY;;AAAA,SA+FnBuS,eA/FmB,GA+FD,UAACvD,GAAD,EAAMvN,EAAN,EAAUmB,MAAV,EAAqB;AACtC;AACA,OAAIA,UAAU,CAAd,EAAiB;AAChB,WAAK4P,gBAAL,CAAsBxD,GAAtB;AACA,IAFD,MAEO;AACN,WAAKyD,UAAL,CAAgBzD,GAAhB;AACA;AACD,UAAKhM,cAAL,CAAoBvB,EAApB;AACA,GAvGkB;;AAAA,SA0GnBuB,cA1GmB,GA0GF,UAACQ,UAAD,EAAgB;AAChC,OAAIA,UAAJ,EAAgB;AACf,QAAI;AACH,SAAIC,gBAAgBC,SAASC,cAAT,CAAwBH,UAAxB,CAApB;AACA,SAAIC,aAAJ,EAAmB;AAClBA,oBAAcG,cAAd,CAA6B,EAACC,OAAO,QAAR,EAA7B;AACA;AACD,KALD,CAKE,OAAOC,GAAP,EAAY;AACb2B,aAAQC,GAAR,CAAY,wBAAwB5B,GAApC;AACA;AACD;AACD,GArHkB;;AAAA,SAwHnBkK,YAxHmB,GAwHJ,UAACjC,MAAD,EAAY;AAAA,OACnBtK,EADmB,GACRsK,MADQ,CACnBtK,EADmB;AAAA,OACfuN,GADe,GACRjD,MADQ,CACfiD,GADe;;AAE1B,OAAIvN,OAAO,EAAP,IAAaA,OAAO,IAApB,IAA4B,CAACA,GAAGwN,UAAH,CAAc,GAAd,CAAjC,EAAqD;AAAE;AACtD,WAAK7O,KAAL,CAAWwE,OAAX,CAAmBnD,EAAnB,EAAuBpB,IAAvB,CAA4B,UAAC4D,GAAD,EAAS;AACpC,SAAIA,GAAJ,EAAS;AACRC,oBAAQC,OAAR,CAAgB,MAAhB;AACA,UAAM4K,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,aAAKhK,QAAL,CAAc;AACbgK,mBAAYA,WAAWnO,MAAX,CAAkB;AAAA,eAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,QAAlB;AADC,OAAd,EAEG,YAAM;AACR,cAAKhP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA;AACA,WAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,cAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACA,OAPD;AAQA;AACA,aAAK3L,KAAL,CAAWmB,YAAX;AACA;AACA,aAAKnB,KAAL,CAAWuS,cAAX;AACA,MAfD,MAeO;AACNzO,oBAAQM,KAAR,CAAc,MAAd;AACA;AACD,KAnBD;AAoBA,IArBD,MAqBO;AAAE;AACR,QAAMuK,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,WAAKhK,QAAL,CAAc;AACbgK,iBAAYA,WAAWnO,MAAX,CAAkB;AAAA,aAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,MAAlB;AADC,KAAd,EAEG,YAAM;AACR,YAAKhP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B,EAA2CC,GAA3C;AACA;AACA,SAAIzO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,YAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACA,KAPD;AAQA;AACD,GA1JkB;;AAAA,SA6JnBoD,SA7JmB,GA6JP,YAAM;AAAA,sBACwB,OAAK5K,KAD7B;AAAA,OACVwK,UADU,gBACVA,UADU;AAAA,OACE6D,WADF,gBACEA,WADF;AAAA,OACe9N,KADf,gBACeA,KADf;;AAEjB,OAAMuK,UAAU7O,OAAOC,MAAP,CAAcmS,WAAd,EAA2B,EAAC5D,KAAKlK,KAAN,EAAarD,IAAI,MAAM,eAAvB,EAA3B,CAAhB;AACA,UAAKsD,QAAL,CAAc;AACbgK,6CAAgBA,UAAhB,IAA4BM,OAA5B,EADa;AAEbvK,WAAOA,QAAQ;AAFF,IAAd,EAGG,YAAM;AACR,WAAK9E,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA;AACA,QAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsC8O,OAAtC,CAAtB;AACA,IARD;AASA,GAzKkB;;AAAA,SA4KnBrD,UA5KmB,GA4KN,eAAO;AACnB,OAAMqD,uCAAc,OAAK9K,KAAL,CAAWwK,UAAzB,EAAN;AACA,OAAMpI,QAAQ0I,QAAQG,SAAR,CAAkB;AAAA,WAAQF,IAAIN,GAAJ,KAAYnO,KAAKmO,GAAzB;AAAA,IAAlB,CAAd;AACA,OAAMnO,OAAOwO,QAAQ1I,KAAR,CAAb;AACA0I,WAAQI,MAAR,CAAe9I,KAAf,EAAsB,CAAtB,eACI9F,IADJ,EAEIyO,GAFJ;AAIA,UAAKvK,QAAL,CAAc,EAACgK,YAAYM,OAAb,EAAd,EAAqC,YAAM;AAC1C;AACA,WAAKrP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA,QAAIW,SAAS7N,KAAKC,KAAL,CAAWD,KAAKE,SAAL,cAAmBuN,GAAnB,EAAX,CAAb;AACA;AACA,QAAI/O,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyCmP,MAAzC,CAAtB;AACA,IAPD;AAQA,GA5LkB;;AAAA,SA+LnB8C,gBA/LmB,GA+LA,UAACxD,GAAD,EAAS;AAC3B,OAAIY,cAAJ;AAD2B,OAEpBiD,IAFoB,GAEZjD,MAAMrL,KAFM,CAEpBsO,IAFoB;;AAG3B,OAAIA,KAAKC,OAAL,CAAa9D,GAAb,KAAqB,CAAzB,EAA4B;AAC3B6D,SAAKpD,MAAL,CAAYoD,KAAKC,OAAL,CAAa9D,GAAb,CAAZ,EAA+B,CAA/B;AACA,IAFD,MAEO;AACN6D,SAAKhJ,IAAL,CAAUmF,GAAV;AACA;AACDY,SAAM7K,QAAN,CAAe;AACdgO,kBAAcF;AADA,IAAf,EAEG,YAAM;AACR,QAAI7Q,0BAAQ4N,MAAM5P,KAAN,CAAYyB,EAApB,EAAyBoR,IAAzB,CAAJ;AACA,QAAIE,eAAelR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAY2S,YAA3B,CAAX,CAAnB;AACAnD,UAAMxP,KAAN,CAAY2S,YAAZ,GAA2BvS,OAAOC,MAAP,CAAcsS,YAAd,EAA4B/Q,GAA5B,CAA3B;AACA,IAND;AAOA,GA9MkB;;AAAA,SAiNnByQ,UAjNmB,GAiNN,UAAC1G,MAAD,EAAY;AACxB,UAAKhH,QAAL,CAAc;AACbiO,gBAAY,IADC,CACK;AADL,IAAd,EAEG,YAAM;AACR,WAAKR,gBAAL,CAAsBzG,MAAtB;AACA,IAJD;AAKA,GAvNkB;;AAAA,SA0NnBkH,WA1NmB,GA0NL,UAAClH,MAAD,EAAY;AACzB;AACA;AACA;AACA;AACA;AACA,UAAKhH,QAAL,CAAc;AACbmO,eAAW1S,OAAOC,MAAP,CAAc,EAAd,EAAkBsL,MAAlB,CADE;AAEboH,eAAW3S,OAAOC,MAAP,CAAc,EAAd,EAAkBsL,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAxD,CAFE;AAGbqS,gBAAY,KAHC,CAGM;AAHN,IAAd,EAIG,YAAM;AACR,WAAKR,gBAAL,CAAsBzG,OAAOtK,EAA7B;AACA,IAND;AAOA,GAvOkB;;AAAA,SA0OnB2R,iBA1OmB,GA0OC,UAAC3R,EAAD,EAAQ;AAC3B;AACA,OAAIiF,SAAS,OAAKnC,KAAL,CAAW8O,QAAX,CAAoB3M,MAAjC;AACA,OAAIA,UAAU,CAAd,EAAiB;AAChB,WAAKtG,KAAL,CAAWkT,YAAX,CAAwB,EAAC5Q,KAAKjB,EAAN,EAAxB,EACCpB,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,SAAIA,GAAJ,EAAS;AACR;AACA,aAAKjE,KAAL,CAAWkF,UAAX;AACA;AACA,aAAK9E,KAAL,CAAWmB,YAAX;AACA;AACA,aAAKnB,KAAL,CAAWuS,cAAX;AACAzO,oBAAQC,OAAR,CAAgB,MAAhB;AACA,aAAKqO,gBAAL,CAAsB/Q,EAAtB;AACA,MATD,MASO;AACNyC,oBAAQM,KAAR,CAAc,MAAd;AACA;AACD,KAdD;AAeA,IAhBD,MAgBO;AACN;AACA,QAAM6O,WAAWxR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAW8O,QAA1B,CAAX,CAAjB;AACA,QAAME,QAAQF,SAASzS,MAAT,CAAgB,UAACC,IAAD,EAAU;AACvC,YAAOA,KAAKS,IAAL,IAAa,EAAb,IAAmBT,KAAK2S,OAAL,IAAgB,IAAnC,IAA2C3S,KAAK2S,OAAL,CAAa9M,MAAb,IAAuB,CAAzE;AACA,KAFa,CAAd;AAGA,QAAI6M,MAAM7M,MAAN,GAAe,CAAnB,EAAsB;AAAG;AACxBxC,mBAAQuP,IAAR,CAAa,cAAb;AACA,YAAO,KAAP;AACA;AACD,QAAMC,UAAUL,SAASzS,MAAT,CAAgB,UAACC,IAAD,EAAU;AACzC,YAAOyL,OAAOzL,KAAK0O,YAAZ,IAA4BjD,OAAOzL,KAAK0L,UAAZ,CAAnC;AACA,KAFe,CAAhB;AAGA,QAAImH,QAAQhN,MAAR,GAAiB,CAArB,EAAwB;AAAG;AAC1BxC,mBAAQuP,IAAR,CAAa,cAAb;AACA,YAAO,KAAP;AACA;;AAED;AACA,QAAIhS,GAAGwN,UAAH,CAAc,GAAd,CAAJ,EAAwB;AACvB,YAAKuD,gBAAL,CAAsB/Q,EAAtB;AACA,KAFD,MAEO;AACN;AACA,YAAKrB,KAAL,CAAWuT,YAAX,CAAwB,OAAKpP,KAAL,CAAW8O,QAAnC,EACChT,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,UAAIA,OAAOA,IAAIyC,MAAJ,GAAa,CAAxB,EAA2B;AAC1BxC,qBAAQC,OAAR,CAAgB,MAAhB;AACA,cAAKyP,OAAL,CAAa9E,UAAb;AACA;AACA,WAAIvO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,cAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,gBAA/B,EAAiD0D,GAAjD,CAAtB;AACA;AACA,cAAK7D,KAAL,CAAWmB,YAAX;AACA,cAAKiR,gBAAL,CAAsB/Q,EAAtB;AACA,OATD,MASO;AACNyC,qBAAQM,KAAR,CAAc,MAAd;AACA;AACD,MAdD;AAeA;AACD;AACD,GArSkB;;AAAA,SAwSnB0K,iBAxSmB,GAwSC,UAACmE,QAAD,EAAc;AACjC,OAAIQ,cAAc,EAAlB;AACAR,YAASS,OAAT,CAAiB,gBAAQ;AAAA,QACnB9E,GADmB,GACMnO,IADN,CACnBmO,GADmB;AAAA,QACdrO,QADc,GACME,IADN,CACdF,QADc;AAAA,QACDqB,GADC,4BACMnB,IADN;;AAExBgT,gBAAYhK,IAAZ,CAAiB7H,GAAjB;AACA,IAHD;AAIA,UAAK+C,QAAL,CAAc,EAACsO,UAAUQ,WAAX,EAAd;AACA,GA/SkB;;AAAA,SAkTnBE,OAlTmB,GAkTT,UAAC/E,GAAD,EAAS;AAClB,UAAKwD,gBAAL,CAAsBxD,GAAtB;AACA,UAAK5O,KAAL,CAAWwC,MAAX,GAAoB,KAApB;AACA;AACA,OAAIrC,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC,OAAKgE,KAAL,CAAW2O,SAApD,CAAtB;AACA,UAAKU,OAAL,CAAa9E,UAAb;AACA,UAAK/J,QAAL,CAAc;AACbmO,eAAW1S,OAAOC,MAAP,CAAc,EAAd;AADE,IAAd;AAGA,GA5TkB;;AAAA,SA+TnBuT,QA/TmB,GA+TR,UAACjI,MAAD,EAAY;AACtB,OAAI6D,cAAJ;AACA,OAAMqE,gBAAgBrE,MAAMrL,KAAN,CAAY4O,SAAZ,CAAsBjR,GAAtB,CAA0B,gBAAQ;AACvD,WAAO;AACN,aAAQrB,KAAKS,IADP;AAEN,gBAAWT,KAAK2S,OAFV;AAGN,mBAAc3S,KAAK0L,UAHb;AAIN,qBAAgB1L,KAAK0O;AAJf,KAAP;AAMA,IAPqB,CAAtB,CAFsB,CASjB;AACL,OAAM2E,aAAatE,MAAMrL,KAAN,CAAY8O,QAAZ,CAAqBnR,GAArB,CAAyB,gBAAQ;AACnD,WAAO;AACN,aAAQrB,KAAKS,IADP;AAEN,gBAAWT,KAAK2S,OAFV;AAGN,mBAAc3S,KAAK0L,UAHb;AAIN,qBAAgB1L,KAAK0O;AAJf,KAAP;AAMA,IAPkB,CAAnB,CAVsB,CAiBjB;AACL;AACA,OAAI1N,KAAKE,SAAL,CAAekS,aAAf,KAAiCpS,KAAKE,SAAL,CAAemS,UAAf,CAArC,EAAiE;AAChE;AACAtE,UAAMmE,OAAN,CAAchI,OAAOtK,EAArB;AACA,IAHD,MAGO;AACN0S,gBAAMC,OAAN,CAAc;AACbtG,YAAO,YADM;AAEbuG,aAAQ,IAFK;AAGbC,iBAAY,KAHC;AAIbC,SAJa,kBAIN;AACN3E,YAAMwD,iBAAN,CAAwBrH,OAAOtK,EAA/B;AACA,MANY;AAOb+S,aAPa,sBAOF;AACV5E,YAAMmE,OAAN,CAAchI,OAAOtK,EAArB;AACA;AATY,KAAd;AAWA;AACD,GAlWkB;;AAAA,SAoWnBsO,SApWmB,GAoWP,UAAC7M,GAAD,EAAS;AACpB,UAAK0Q,OAAL,GAAe1Q,GAAf;AACA,GAtWkB;;AAAA,SAyWnBuR,KAzWmB,GAyWX,UAAC1I,MAAD,EAAY;AAAA,OACZrB,QADY,GACA,OAAK1K,KADL,CACZ0K,QADY;;AAEnB,OAAIgK,WAAW3I,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC9E,WAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,IAF6C,CAA9C;AAGA,OAAMuR,YAAYqC,YAAY,IAAZ,IAAoBA,SAAShO,MAAT,IAAmB,CAAvC,GAA2C,CAA3C,GAA+CgO,SAAShO,MAA1E;AACA,OAAIgE,YAAY2H,YAAY,CAA5B,EAA+B;AAAG;AACjC,WAAKI,UAAL,CAAgB1G,OAAOtK,EAAvB;AACA;AACD,GAlXkB;;AAElB,SAAKrB,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZwK,eAAY,EADA,EACK;AACjBjK,UAAO,CAFK,EAEK;AACjB8N,gBAAa;AACZ,UAAM,EADM;AAEZ,WAAO,EAFK;AAGZ,iBAAa,EAHD;AAIZ,gBAAY,MAJA;AAKZ,eAAW,EALC;AAMZ,gBAAY,IANA;AAOZ,YAAQ,EAPI;AAQZ,YAAQ,CARI;AASZ,iBAAa,IATD;AAUZ,iBAAa,IAVD;AAWZ,eAAW,IAXC;AAYZ,cAAU,CAZE;AAaZ,cAAU;AAbE,IAHD,EAiBT;AACHG,iBAAc,EAlBF,EAkBM;AAClBF,SAAM,EAnBM,EAmBF;AACVQ,aAAU,EApBE;AAqBZH,cAAW,EArBC,EAqBG;AACfC,cAAW,EAtBC,EAsBG;AACfH,eAAY,KAvBA,CAuBO;AAvBP,GAAb;AAHkB;AA4BlB;;;;4CAEyB5I,S,EAAW0F,W,EAAa;AACjD,OAAI1F,UAAU2E,UAAV,IAAwB,KAAK/O,KAAL,CAAW+O,UAAvC,EAAmD;AAClD,SAAKhK,QAAL,CAAc;AACbgK,iBAAY3E,UAAU2E,UAAV,IAAwB,IAAxB,IAAgC3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA+B,CAA/D,GAAmE,EAAnE,GAAwE0D,UAAU2E,UAAV,CAAqB7M,GAArB,CAAyB,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC7H,aAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAACmO,KAAKrI,KAAN,EAApB,CAAP;AACA,MAFmF,CADvE;AAIb7B,YAAOsF,UAAU2E,UAAV,IAAwB,IAAxB,IAAgC3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA+B,CAA/D,GAAmE,CAAnE,GAAuE0D,UAAU2E,UAAV,CAAqBrI,MAJtF;AAKbkM,kBAAapS,OAAOC,MAAP,CAAc,EAAd,EAAkB;AAC9B,YAAM,EADwB;AAE9B,aAAO2J,UAAU1H,GAFa;AAG9B,mBAAa0H,UAAU/F,SAHO;AAI9B,kBAAY,MAJkB;AAK9B,iBAAW,EALmB;AAM9B,kBAAY,IANkB;AAO9B,cAAQ,EAPsB;AAQ9B,cAAQ,CARsB;AAS9B,mBAAa,IATiB;AAU9B,mBAAa,IAViB;AAW9B,iBAAW,IAXmB;AAY9B,gBAAU,CAZoB;AAa9B,gBAAU;AAboB,MAAlB,CALA,CAmBV;AAnBU,KAAd;AAqBA;AACD;;;sCAEmB;AAAA;;AACnB,QAAKU,QAAL,CAAc;AACbgK,gBAAY,KAAK/O,KAAL,CAAW+O,UAAX,IAAyB,IAAzB,IAAiC,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAAgC,CAAjE,GAAqE,EAArE,GAA0E,KAAK1G,KAAL,CAAW+O,UAAX,CAAsB7M,GAAtB,CAA0B,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAChI,YAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAAC,OAAO8F,KAAR,EAApB,CAAP;AACA,KAFqF,CADzE;AAIb7B,WAAO,KAAK9E,KAAL,CAAW+O,UAAX,KAA0B,IAA1B,IAAkC,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAAgC,CAAlE,GAAsE,CAAtE,GAA0E,KAAK1G,KAAL,CAAW+O,UAAX,CAAsBrI,MAJ1F;AAKbkM,iBAAapS,OAAOC,MAAP,CAAc,EAAd,EAAkB;AAC9B,WAAM,EADwB;AAE9B,YAAO,KAAKT,KAAL,CAAW0C,GAFY;AAG9B,kBAAa,KAAK1C,KAAL,CAAWqE,SAHM;AAI9B,iBAAY,MAJkB;AAK9B,gBAAW,EALmB;AAM9B,iBAAY,IANkB;AAO9B,aAAQ,EAPsB;AAQ9B,aAAQ,CARsB;AAS9B,kBAAa,IATiB;AAU9B,kBAAa,IAViB;AAW9B,gBAAW,IAXmB;AAY9B,eAAU,CAZoB;AAa9B,eAAU;AAboB,KAAlB,CALA,EAmBT;AACJ0O,kBAAc,EApBD,EAoBK;AAClBF,UAAM,EArBO,EAqBH;AACVQ,cAAU;AAtBG,IAAd;AAwBA;;;;AAKA,QAAKsB,OAAL,GAAe7R,iBAAQ8R,WAAR,CAAoB,cAApB,EAAoC,UAAC5S,GAAD,EAAS;AAC3D,WAAKuQ,eAAL,CAAqBvQ,IAAIU,GAAzB,EAA8BV,IAAIU,GAAlC,EAAuCV,IAAIY,MAA3C;AACA,IAFc,CAAf;AAGA;;;yCAEsB;AACtBE,oBAAQ+R,cAAR,CAAuB,KAAKF,OAA5B;AACA;;AAYD;;;AAcA;;;AAqCA;;;AAeA;;;AAmBA;;;AAkBA;;;AASA;;;AAgBA;;;AA8DA;;;AAUA;;;AAaA;;;AA0CA;;;;2BAYS;AAAA;;AAAA,gBACuC,KAAKpQ,KAD5C;AAAA,OACDwK,UADC,UACDA,UADC;AAAA,OACWgE,YADX,UACWA,YADX;AAAA,OACyBC,UADzB,UACyBA,UADzB;AAAA,OAEDtI,QAFC,GAEW,KAAK1K,KAFhB,CAED0K,QAFC;;AAGR,OAAMoK,YAAY/B,aAAarM,MAAb,GAAsB,CAAxC;AACA,OAAMwJ,aAAa;AAClBC,UAAM;AACLb,UAAKrE,eADA;AAELmF,WAAM5E;AAFD;AADY,IAAnB;AAMA,OAAM6E,YAAY,CACjB;AACCvC,WAAO,IADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAIC6B,WAAO,QAJR;AAKC3B,cAAU,CAACjE,QAAD,IAAa,CAACoK,SALzB;AAMCvE,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAQ;AAAA;AAAA;AACP;AACA,gBAAOA,OAAOtK,EAFP;AAGP,gBAAS,OAAKgT,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAHF;AAIP,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAJA;AAKP,kBAAU,IALH;AAMP,oCAAC,UAAD,IAAM,WAAWlJ,OAAOmJ,SAAP,KAAqB,CAArB,IAA0BxK,QAA1B,GAAqC,EAArC,GAA0C,QAA3D;AACM,cAAO;AACNC,kBAAU,MADJ;AAENwK,kBAAU,UAFJ;AAGNC,cAAM,KAHA;AAINxK,eAAO,KAJD;AAKNyK,aAAK,KALC;AAMNC,mBAAW;AANL,QADb,EAQS,MAAK,oBARd,GANO;AAeN9E;AAfM,MAAR;AAiBA;AAxBF,IADiB,EA2BjB;AACC1C,WAAO,KADR;AAECD,eAAW,SAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAQ,IAAR,GAAe,EAAf,GAAoBA,KAAKtO,GAAL,CAAS;AAAA,cAAQrB,KAAKsM,QAAb;AAAA,OAAT,EAAgCsD,IAAhC,CAAqC,GAArC;AAFvD,MAAP;AAGA;AAVF,IA3BiB,EAuCjB;AACC3C,WAAO,MADR;AAECD,eAAW,WAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAQ,IAAR,IAAgBA,QAAQ,CAAxB,GAA4B,EAA5B,GAAiC,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAFpE,MAAP;AAGA;AAVF,IAvCiB,EAmDjB;AACCwF,WAAO,MADR;AAECD,eAAW,SAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAQ,IAAR,IAAgBA,QAAQ,CAAxB,GAA4B,EAA5B,GAAiC,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAFpE,MAAP;AAGA;AAVF,IAnDiB,EA+DjB;AACCwF,WAAO,MADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB;AACT;AAHM;AAILyE,UAJK;AAAA;AAAA,MAAP;AAKA;AAZF,IA/DiB,EA6EjB;AACC1C,WAAO,IADR;AAECD,eAAW,QAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAMwJ,UACL;AAAA;AAAA;AACE/E,cAAQ,IAAR,IAAgBA,QAAQ,EAAxB,GAA6B,IAA7B,GACA;AAAA;AAAA;AAAG;AAAA;AAAA,UAAM,OAAO,EAACgF,YAAY,KAAb,EAAoB5K,OAAO,MAA3B,EAAb;AAAA;AAAA,QAAH;AAAA;AAAgE4F;AAAhE,OAFF;AAGEzE,aAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,IAAmB,EAA9C,GAAmD,IAAnD,GAA0DoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC3F,cAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,OAF0D,EAExDoB,GAFwD,CAEpD,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACvB,cAAQ;AAAA;AAAA,UAAG,WAAW9F,KAAK4U,MAAL,IAAe,IAAf,IAAuB5U,KAAK4U,MAAL,IAAe,EAAtC,GAA2C,QAA3C,GAAsD,EAApE;AACG,cAAK,UAAU9O,KADlB;AACyB;AAAA;AAAA;AAChC,iBAAO,EAAC6O,YAAY,KAAb,EAAoB5K,OAAO,MAA3B,EADyB;AAAA;AACcjE,iBAAQ,CADtB;AAAA;AAAA,SADzB;AAAA;AAE2D9F,aAAK4U;AAFhE,QAAR;AAGA,OAN0D;AAH5D,MADD;AAaA,YACC;AAAA;AAAA;AACC,cAAO,EAAChH,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADR;AAEC,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB;AACT;AAHD;AAKC;AAAC,oBAAD;AAAA,SAAS,SAASwJ,OAAlB,EAA2B,SAAQ,OAAnC;AACC;AAAA;AAAA;AACC,gBAAO,EAACG,UAAU,OAAX,EADR;AAEC,oBAAU,QAFX;AAGElF,gBAAQ,IAAR,IAAgBA,QAAQ,EAAxB,GAA6B,IAA7B,GACA;AAAA;AAAA;AAAM;AAAA;AAAA,YAAM,OAAO,EAACgF,YAAY,KAAb,EAAoB5K,OAAO,MAA3B,EAAb;AAAA;AAAA,UAAN;AAAA;AAAmE4F;AAAnE,SAJF;AAKEzE,eAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,IAAmB,EAA9C,GAAmD,IAAnD,GAA0DoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC3F,gBAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,SAF0D,EAExDoB,GAFwD,CAEpD,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACvB,gBAAQ;AAAA;AAAA,YAAM,KAAK,UAAUA,KAArB;AACM,sBAAW9F,KAAK4U,MAAL,IAAe,IAAf,IAAuB5U,KAAK4U,MAAL,IAAe,EAAtC,GAA2C,QAA3C,GAAsD,EADvE;AAEkB;AAAA;AAAA,aAAM,OAAO,EAACE,aAAa,KAAd,EAAqBH,YAAY,KAAjC,EAAwC5K,OAAO,MAA/C,EAAb;AAAA;AACGjE,mBAAQ,CADX;AAAA;AAAA,WAFlB;AAAA;AAGyC9F,eAAK4U;AAH9C,UAAR;AAIA,SAP0D;AAL5D;AADD;AALD,MADD;AAwBA;AA5CF,IA7EiB,EA2HjB;AACC3H,WAAO,IADR;AAECD,eAAW,WAFZ;AAGCyC,WAAO,QAHR;AAICC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAI6J,aAAa,IAAjB;AACA,SAAI7C,aAAanS,MAAb,CAAoB,gBAAQ;AAC/B,aAAOC,QAAQkL,OAAOtK,EAAtB;AACA,MAFG,EAEDiF,MAFC,GAEQ,CAFR,IAEa,CAACsM,UAFlB,EAE8B;AAC7B,aAAQ;AAAA;AAAA;AACA;AAAA;AAAA,UAAG,SAAS,OAAKe,OAAL,CAAagB,IAAb,CAAkB,MAAlB,EAAwBhJ,OAAOtK,EAA/B,CAAZ;AAAA;AAAA,QADA;AAEH;AAAA;AAAA,UAAG,WAAU,MAAb,EAAoB,SAAS,OAAK2R,iBAAL,CAAuB2B,IAAvB,CAA4B,MAA5B,EAAkChJ,OAAOtK,EAAzC,CAA7B;AAAA;AAAA;AAFG,OAAR;AAIA,MAPD,MAOO;AACN;AACA,UAAIiT,WAAW3I,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC9E,cAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,OAF6C,CAA9C;AAGA,UAAMuR,YAAYqC,YAAY,IAAZ,IAAoBA,SAAShO,MAAT,IAAmB,CAAvC,GAA2C,CAA3C,GAA+CgO,SAAShO,MAA1E;AACA,UAAIgE,QAAJ,EAAc;AAAG;AAChB,WAAI2H,aAAa,CAAjB,EAAoB;AAAE;AACrB,eAAO;AAAA;AAAA,WAAG,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAZ;AAAA;AAAA,SAAP;AACA;AACA,QAHD,MAGO;AAAG;AACT,eAAQ;AAAA;AAAA;AACiB;AAAA;AAAA,YAAG,OAAM,cAAT,EAAc,SAAS,OAAK0G,UAAL,CAAgBsC,IAAhB,CAAqB,MAArB,EAA2BhJ,OAAOtK,EAAlC,CAAvB;AAA+D4Q;AAA/D,UADjB;AAEiB,uCAAC,UAAD,IAAM,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAf,EAAoD,WAAU,SAA9D;AACM,iBAAO,EAAC8J,YAAY,MAAb,EADb,EACmC,OAAM,cADzC,EAC8C,MAAK,MADnD;AAFjB,SAAR;AAKA;AACD,OAXD,MAWO;AAAG;AACT,cACC;AAAA;AAAA,UAAG,SAAS,OAAK5C,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAZ;AAAkDsG,qBAAa,CAAb,GAAiBuD,UAAjB,GAA8BvD;AAAhF,QADD;AAEA;AACD;AACD;AAnCF,IA3HiB,CAAlB;AAiKA,OAAM3B,UAAUL,UAAUnO,GAAV,CAAc,eAAO;AACpC,QAAI,CAACyO,IAAIhC,QAAT,EAAmB;AAClB,YAAOgC,GAAP;AACA;AACD,wBACIA,GADJ;AAECC,aAAQ;AAAA,aAAW;AAClB7E,qBADkB;AAElB4C,iBAAUgC,IAAIhC,QAFI;AAGlBd,kBAAW8C,IAAI9C,SAHG;AAIlBC,cAAO6C,IAAI7C,KAJO;AAKlBC,mBAAYpO,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CALM;AAMlB/B,mBAAY,OAAKA,UANC;AAOlBgC,qBAAc,OAAKA;AAPD,OAAX;AAAA;AAFT;AAYA,IAhBe,CAAhB;AAiBA,OAAM8H,oBAAoB,SAApBA,iBAAoB,CAAC/J,MAAD,EAAY;AACrC;AACA,QAAIqD,YAAY;AACf3N,SAAI,EADW;AAEfiB,UAAKqJ,OAAOtK,EAAP,IAAa,EAFH;AAGf4C,gBAAW0H,OAAO1H,SAAP,IAAoB,EAHhB;AAIfvD,eAAU,SAJK;AAKf0S,cAASzH,OAAOyH,OAAP,IAAkB,IAAlB,GAAyB,EAAzB,GAA8BzH,OAAOyH,OAL/B;AAMfjE,mBAAc,CANC;AAOfhD,iBAAY,CAPG;AAQfwJ,WAAM,CARS;AASfzU,WAAM,EATS;AAUfmU,aAAQ,EAVO;AAWf9H,gBAAW,IAXI;AAYfH,cAAS;AAZM,KAAhB;AAcA,WACC,8BAAC,oBAAD;AACC,YAAO,OAAKpN,KADb;AAEC,aAAQ2L,MAFT;AAGC,gBAAWqD,SAHZ;AAIC,iBAAYzP,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CAJb;AAKC,iBAAYhC,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC3E,aAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,MAF0C,CAL5C;AAQC,uBAAkB;AAAA,aAAMgU,aAAa,CAACpK,QAAd,GAAyB,OAAKsJ,QAAL,CAAcjI,MAAd,CAAzB,GAAiD,OAAKyG,gBAAL,CAAsBzG,OAAOtK,EAA7B,CAAvD;AAAA,MARnB;AASC,wBAAmB,OAAKyN,iBATzB;AAUC,eAAU8D;AACV;AAXD,OAYC,WAAW,OAAKjD;AAZjB,MADD;AAgBA,IAhCD;AAiCA,UACC;AAAA;AAAA;AACC,kCAAC,WAAD;AACC,iBAAYG,UADb;AAEC,mBAAc;AAAA,aAAM,cAAN;AAAA,MAFf;AAGC,gBAAU,wBAHX;AAIC,eAAU,KAJX;AAKC,iBAAYnB,UALb;AAMC,cAAS2B,OANV;AAOC,iBAAY,KAPb;AAQC,WAAM,QARP;AASC,uBAAkB,IATnB;AAUC,uBAAkB,KAVnB;AAWC,4BAAuB,CAAC,CAXzB;AAYC,sBAAiBqC,YAZlB;AAaC,wBAAmB+C,iBAbpB;AAcC,aAAQ;AAAA,aAAOxG,IAAI7N,EAAX;AAAA;AAdT,MADD;AAiBEiJ,eAAW,IAAX,GACA,8BAAC,UAAD,IAAM,SAAS,KAAKyE,SAApB,EAA+B,OAAO,EAAC3I,QAAQ,QAAT,EAAmBoE,OAAO,SAA1B,EAAqCD,UAAU,MAA/C,EAAtC;AACM,WAAK,aADX;AAlBF,IADD;AAuBA;;;;EAzmB0B/D,gBAAMC,S;;kBA4mBnByL,a;;;;;;;;;;;;;;;;;;;;AC19Bf;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAa3S,I;;AACb;;IAAYC,K;;AACZ;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;6NAbA;;;;;AAeA,IAAIwS,cAAa,KAAjB;IACQrB,M,GAAWC,Y,CAAXD,M;;AACR,IAAMlG,kBAAkBjE,gBAAMkE,aAAN,EAAxB;AACA,IAAMC,cAAc,SAAdA,WAAc;AAAA,KAAEC,IAAF,QAAEA,IAAF;AAAA,KAAQrE,KAAR,QAAQA,KAAR;AAAA,KAAkB3G,KAAlB;;AAAA,QACnB;AAAC,iBAAD,CAAiB,QAAjB;AAAA,IAA0B,OAAOgL,IAAjC;AACC,sCAAQhL,KAAR;AADD,EADmB;AAAA,CAApB;AAKA,IAAMiL,kBAAkBC,WAAKC,MAAL,GAAcJ,WAAd,CAAxB;;AAGA;;IACMS,Y;;;;;;;;;;;;;;qMACLjH,K,GAAQ;AACPkH,YAAS,IADF,EACQ;AACfC,YAAS;AAFF,G,SAIRC,U,GAAa,YAAM;AAClB,OAAMF,UAAU,CAAC,OAAKlH,KAAL,CAAWkH,OAA5B;AACA,UAAK1G,QAAL,CAAc,EAAC0G,gBAAD,EAAd,EAAyB,YAAM;AAC9B,QAAIA,OAAJ,EAAa;AACZ,YAAKG,KAAL,CAAWC,KAAX;AACA;AACD,IAJD;AAKA,G,SACDC,I,GAAO,aAAK;AAAA,sBACkB,OAAK9L,KADvB;AAAA,OACJ+L,MADI,gBACJA,MADI;AAAA,OACIC,UADJ,gBACIA,UADJ;;AAEX,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAI1H,SAASA,MAAM2H,EAAEC,aAAF,CAAgB3K,EAAtB,CAAb,EAAwC;AACvC;AACA;AACQ;AACT,WAAOyK,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACS,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACT,IATD;AAUA,G,SAEDM,Q,GAAW,UAACC,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACH,OAAK1M,KADF;AAAA,OACzB+L,MADyB,iBACzBA,MADyB;AAAA,OACjBC,UADiB,iBACjBA,UADiB;;AAEhC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,WAAtB,CAAJ,EAAwC;AACvCT,YAAO,WAAP,IAAuB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAAvB;AACA;AACD,WAAOV,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDW,S,GAAY,UAACJ,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACJ,OAAK1M,KADD;AAAA,OAC1B+L,MAD0B,iBAC1BA,MAD0B;AAAA,OAClBC,UADkB,iBAClBA,UADkB;;AAEjC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,SAAtB,CAAJ,EAAsC;AACrCT,YAAO,SAAP,IAAqB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAArB;AACA;AACD,WAAOV,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDa,e,GAAkB,UAACC,GAAD,EAAMb,CAAN,EAAY;AAAA,uBACG,OAAKnM,KADR;AAAA,OACpB+L,MADoB,iBACpBA,MADoB;AAAA,OACZC,UADY,iBACZA,UADY;;AAE5B,OAAInD,OAAO,EAAX;AACM,OAAI6C,gBAAJ;AACA,OAAIS,EAAEzF,MAAN,EAAc;AACXgF,cAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAQ;AAAC,YAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AAAiE,KAAhF,CAAV;AACF,IAFD,MAEO;AACJ+K,cAAW,EAAX;AACF;AACP7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAgBD,MAAhB,EAA2BlD,IAA3B;AACD,G,SAGEuE,Y,GAAe,UAACC,KAAD,EAAW;AAAA,uBACS,OAAKrN,KADd;AAAA,OACd+L,MADc,iBACdA,MADc;AAAA,OACNC,UADM,iBACNA,UADM;;AAEtB,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAI2B,MAAM3G,MAAV,EAAkB;AACdgF,cAAU2B,KAAV;AACH,IAFD,MAEO;AACH3B,cAAW,EAAX;AACH;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAgBD,MAAhB,EAA2BlD,IAA3B;AACH,G,SACJiE,M,GAAO,YAAI,CAEV;AADA;;AAED;WACAQ,iB,GAAoB,sBAAc;AAAA,OAC1BvB,MAD0B,GAChB,OAAK/L,KADW,CAC1B+L,MAD0B;;AAEjC,OAAI,CAACwB,UAAD,IAAe,CAACxB,OAAOyB,OAA3B,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,WAAWX,OAAX,KAAuBb,OAAOyB,OAAP,CAAeZ,OAAf,EAA9B;AACA,G,SAEDa,e,GAAkB,oBAAY;AAAA,OACtB1B,MADsB,GACZ,OAAK/L,KADO,CACtB+L,MADsB;;AAE7B,OAAI,CAAC2B,QAAD,IAAa,CAAC3B,OAAO4B,SAAzB,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,SAASd,OAAT,MAAsBb,OAAO4B,SAAP,CAAiBf,OAAjB,EAA7B;AACA,G,SACDgB,U,GAAa,gBAAQ;AACpB,UAAK5C,IAAL,GAAYA,IAAZ;AADoB,uBAEkD,OAAKhL,KAFvD;AAAA,OAEbW,QAFa,iBAEbA,QAFa;AAAA,OAEHkN,SAFG,iBAEHA,SAFG;AAAA,OAEQ9B,MAFR,iBAEQA,MAFR;AAAA,OAEgB+B,KAFhB,iBAEgBA,KAFhB;AAAA,OAEsBC,UAFtB,iBAEsBA,UAFtB;AAAA,OAEkCC,YAFlC,iBAEkCA,YAFlC;AAAA,OAGbvC,OAHa,GAGF,OAAKlH,KAHH,CAGbkH,OAHa;;AAIpB,OAAIoC,aAAa,MAAjB,EAAyB;AAAG;AAC3B,WAAOpC,UACN;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAAEjF,QAAQ,CAAV,EAAlB;AACEwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,IADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP;AALoB,MAAlC,EAOkB;AAAA;AAAA,QAAK,WAAU,YAAf;AACI;AAAC,uBAAD;AAAA,SAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,gBAAMG,aAAajC,MAAb,CAAN;AAAA,SAAvC;AACI,qCAAC,UAAD;AACI,eAAO;AACH0C,gBAAO,MADJ;AAEH7D,gBAAO,SAFJ;AAGHD,mBAAU,MAHP;AAIH+D,gBAAO;AAJJ,SADX;AAOI,cAAK,cAPT;AADJ,OADJ;AAWI,oCAAC,WAAD;AACI,cAAO;AACHA,eAAO,OADJ;AAEHD,eAAO;AAFJ,QADX;AAKI,qBAAc1C,OAAO8B,SAAP,CALlB;AAMI,YAAK;AAAA,eAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA;AACL;AAPJ,SAQI,cAAc,OAAKxC,IARvB;AASI,eAAQ,OAAKA;AATjB;AAXJ,MAPlB;AADF,KADM,GAmCN;AAAA;AAAA,OAAK,WAAU,YAAf;AACC;AAAC,sBAAD;AAAA,QAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,eAAMkC,aAAajC,MAAb,CAAN;AAAA,QAAvC;AACC,oCAAC,UAAD;AACC,cAAO;AACkB0C,eAAO,MADzB;AAEkB7D,eAAO,SAFzB;AAGkBD,kBAAU,MAH5B;AAIN+D,eAAO;AAJD,QADR;AAOC,aAAK,cAPN;AADD,MADD;AAWC;AAAA;AAAA;AACC,kBAAU,0BADX;AAEC,cAAO;AACNA,eAAO,OADD;AAEeD,eAAO,mBAFtB;AAGeJ,mBAAW,MAH1B,EAFR;AAMC,gBAAS,OAAK1C;AANf;AAQEhL;AARF;AAXD,KAnCD;AA0DA,IA3DD,MA2DO,IAAIkN,aAAa,SAAjB,EAA4B;AAAG;AACrC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB,EAA+B,WAAU,GAAzC;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA0B,CAAnD,GAAqD,EAArD,GAAwDqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAAyB,CAAzB,IAA4BqF,OAAO8B,SAAP,EAAkB3L,GAAlB,CAAsB,UAACrB,IAAD,EAAQ;AAAC,cAAOA,KAAKoM,MAAZ;AAAmB,OAAlD;AAPhE,MAAlC,EASA;AAAA;AAAA,QAAK,WAAU,GAAf,EAAmB,KAAK;AAAA,eAAS,OAAKrB,KAAL,GAAa0C,IAAtB;AAAA,QAAxB;AACmB,oCAAC,mBAAD;AACI,aAAMvC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA0B,CAAnD,GAAqD,EAArD,GAAwDqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAAyB,CAAzB,IAA4BqF,OAAO8B,SAAP,CAD9F;AAEI,qBAAc,OAAKT,YAFvB;AAGI,iBAAU,CAAC3B;AAHf;AADnB,MATA;AADgB,KAAX,GAkBQ;AAAA;AAAA;AACb,iBAAU,0BADG;AAEb,aAAO,EAAC4C,WAAW,MAAZ,EAFM;AAGb,eAAS,OAAK1C,UAHD;AAIGhL;AAJH,KAlBf;AAyBA,IA1BM,MA0BA,IAAIkN,aAAa,WAAjB,EAA8B;AAAE;AACtC;AACA,QAAMU,iBAAiBxC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,KAAmB,CAA5C,GAA8C,EAA9C,GAAiD,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAxE;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,KAAmB,CAA5C,GAA8C,EAA9C,GAAkD,sBAAOU,cAAP,EAAuB,YAAvB;AAP9B,MAAlC,EASA,8BAAC,gBAAD;AACC,cAAO,YADR;AAEC,WAAK;AAAA,cAAS,OAAK3C,KAAL,GAAa0C,IAAtB;AAAA,OAFN;AAGC,gBAAU,OAAK9B;AACf;AAJD,QAKC,cAAc,OAAKc;AALpB,OATA;AADgB,KAAX,GAkBS;AAAA;AAAA;AACd,iBAAU,0BADI;AAEd,aAAO,EAAEe,WAAW,MAAb,EAFO;AAGd,eAAS,OAAK1C;AAHA;AAKbhL;AALa,KAlBhB;AA0BA,IA7BM,MA6BA,IAAIkN,aAAa,SAAjB,EAA4B;AAAE;AAC3B;AACA,QAAMU,kBAAiBxC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,KAAmB,CAA5C,GAA8C,EAA9C,GAAiD,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAxE;AACT,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,KAAmB,CAA5C,GAA8C,EAA9C,GAAkD,sBAAOU,eAAP,EAAuB,YAAvB;AAP9B,MAAlC,EASA,8BAAC,gBAAD;AACC,cAAO,YADR;AAEC,WAAK;AAAA,cAAS,OAAK3C,KAAL,GAAa0C,IAAtB;AAAA,OAFN;AAGmB,gBAAU,OAAKzB;AACjC;AAJD,QAKC,cAAc,OAAKY;AALpB,OATA;AADgB,KAAX,GAkBS;AAAA;AAAA;AACd,iBAAU,0BADI;AAEd,aAAO,EAAEY,WAAW,MAAb,EAFO;AAGd,eAAS,OAAK1C;AAHA;AAKEhL;AALF,KAlBhB;AA0BA,IA7BM,MA6BA,IAAIkN,aAAa,MAAjB,EAAyB;AAAG;AAClC,QAAI6G,WAAW3I,OAAOpL,QAAP,IAAiB,IAAjB,IAAuBoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,YAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,KAAjE,CAAtC;AACA,QAAMuR,YAAYqC,YAAU,IAAV,IAAgBA,SAAShO,MAAT,IAAiB,CAAjC,GAAmC,CAAnC,GAAqCgO,SAAShO,MAAhE;AACS,QAAM9D,SAASyP,YAAU,CAAV,GAAY,IAAZ,GAAiB,KAAhC;AACA,WAAO5G,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAAEjF,QAAQ,CAAV,EAAlB;AACxBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAmB,IAAnB,IAAyB9B,OAAO8B,SAAP,KAAmB,CAA5C,GAA8C,EAA9C,GAAiD9B,OAAO8B,SAAP;AAL7B,MAAlC,EAOA,8BAAC,iBAAD;AACsB,gBAAUjL,MADhC;AAEsB,WAAK,CAF3B;AAGsB,WAAK,GAH3B;AAIC,WAAK;AAAA,cAAS,OAAKgJ,KAAL,GAAa0C,IAAtB;AAAA,OAJN;AAKC,oBAAc,OAAKxC,IALpB;AAMC,cAAQ,OAAKA;AANd,OAPA;AADwB,KAAX,GAkBZ;AAAA;AAAA;AACF,iBAAU,0BADR;AAEa,aAAO,EAACuC,WAAW,MAAZ,EAFpB;AAGF,eAAS,OAAK1C;AAHZ;AAKDhL,aALC;AAAA;AAAA,KAlBK;AA0BT,IA9BM,MA8BC,IAAIkN,aAAa,QAAjB,EAA2B;AAAG;AACrC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,WAAD;AACC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA,OADN;AAEC,oBAAc,OAAKxC,IAFpB;AAGC,cAAQ,OAAKA,IAHd;AAIC,mBAAY;AAJb,OAPA;AADe,KAAX,GAgBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL;AALE,KAhBL;AAwBA;AACD,G;;AA/QD;;;AAoCA;;AAwBA;;;;;2BAqNS;AAAA,gBAWJ,KAAKX,KAXD;AAAA,OAEP2O,QAFO,UAEPA,QAFO;AAAA,OAGPd,SAHO,UAGPA,SAHO;AAAA,OAIPC,KAJO,UAIPA,KAJO;AAAA,OAKP/B,MALO,UAKPA,MALO;AAAA,OAMPpF,KANO,UAMPA,KANO;AAAA,OAOPqF,UAPO,UAOPA,UAPO;AAAA,OAQPrL,QARO,UAQPA,QARO;AAAA,OASPoN,UATO,UASPA,UATO;AAAA,OAUJa,SAVI;;AAYR,UACC;AAAA;AAAQA,aAAR;AACED,eACe;AAAC,oBAAD,CAAiB,QAAjB;AAAA;AAA2B,UAAKf;AAAhC,KADf,GAGAjN;AAJF,IADD;AASA;;;;EAhUyBiG,gBAAMC,S;;AAmUjC;;;;;IAIMmP,c,OADLjW,mB;;;AAEA,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+HACZA,KADY;;AAAA,SAgGnBuS,eAhGmB,GAgGD,UAACvD,GAAD,EAAMvN,EAAN,EAAUmB,MAAV,EAAqB;AACtC;AACA,OAAIA,UAAU,CAAd,EAAiB;AAChB,WAAK4P,gBAAL,CAAsBxD,GAAtB;AACA,IAFD,MAEO;AACN,WAAKyD,UAAL,CAAgBzD,GAAhB;AACA;AACD,UAAKhM,cAAL,CAAoBvB,EAApB;AACA,GAxGkB;;AAAA,SA2GnBuB,cA3GmB,GA2GF,UAACQ,UAAD,EAAgB;AAChC,OAAIA,UAAJ,EAAgB;AACN,QAAI;AACA,SAAIC,gBAAgBC,SAASC,cAAT,CAAwBH,UAAxB,CAApB;AACH,SAAIC,aAAJ,EAAmB;AACfA,oBAAcG,cAAd,CAA6B,EAACC,OAAO,QAAR,EAA7B;AACA;AACJ,KALD,CAKE,OAAMC,GAAN,EAAW;AACT2B,aAAQC,GAAR,CAAY,wBAAsB5B,GAAlC;AACH;AACV;AACD,GAtHkB;;AAAA,SAyHnBkK,YAzHmB,GAyHJ,UAACjC,MAAD,EAAY;AAAA,OAChBtK,EADgB,GACLsK,MADK,CAChBtK,EADgB;AAAA,OACZuN,GADY,GACLjD,MADK,CACZiD,GADY;;AAEvB,OAAIvN,OAAK,EAAL,IAASA,OAAK,IAAd,IAAoB,CAACA,GAAGwN,UAAH,CAAc,GAAd,CAAzB,EAA6C;AAAE;AAC3C,WAAK7O,KAAL,CAAWwE,OAAX,CAAmBnD,EAAnB,EAAuBpB,IAAvB,CAA4B,UAAC4D,GAAD,EAAO;AAC5B,SAAIA,GAAJ,EAAS;AACLC,oBAAQC,OAAR,CAAgB,MAAhB;AACA,UAAM4K,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,aAAKhK,QAAL,CAAc;AACVgK,mBAAYA,WAAWnO,MAAX,CAAkB;AAAA,eAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,QAAlB;AADF,OAAd,EAEG,YAAI;AACH,cAAKhP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA;AACA,WAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,cAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACH,OAPD;AAQA;AACf,aAAK3L,KAAL,CAAWmB,YAAX;AACA;AACA,aAAKnB,KAAL,CAAWuS,cAAX;AACY,MAfD,MAeO;AACHzO,oBAAQM,KAAR,CAAc,MAAd;AACH;AACJ,KAnBJ;AAoBA,IArBJ,MAqBU;AAAE;AACL,QAAMuK,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,WAAKhK,QAAL,CAAc;AACVgK,iBAAYA,WAAWnO,MAAX,CAAkB;AAAA,aAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,MAAlB;AADF,KAAd,EAEG,YAAI;AACH,YAAKhP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B,EAA2CC,GAA3C;AACA;AACA,SAAIzO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,YAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACH,KAPD;AAQH;AACP,GA3JkB;;AAAA,SA8JnBoD,SA9JmB,GA8JP,YAAM;AAAA,sBACwB,OAAK5K,KAD7B;AAAA,OACVwK,UADU,gBACVA,UADU;AAAA,OACE6D,WADF,gBACEA,WADF;AAAA,OACe9N,KADf,gBACeA,KADf;;AAEX,OAAMuK,UAAU7O,OAAOC,MAAP,CAAcmS,WAAd,EAA2B,EAAC5D,KAAKlK,KAAN,EAAarD,IAAI,MAAI,eAArB,EAA3B,CAAhB;AACA;AACA,UAAKsD,QAAL,CAAc;AACVgK,6CAAgBA,UAAhB,IAA4BM,OAA5B,EADU;AAEVvK,WAAOA,QAAQ;AAFL,IAAd,EAGG,YAAI;AACH,WAAK9E,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA;AACA,QAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsC8O,OAAtC,CAAtB;AACH,IARD;AASN,GA3KkB;;AAAA,SA8KnBrD,UA9KmB,GA8KN,eAAO;AACb,OAAMqD,uCAAc,OAAK9K,KAAL,CAAWwK,UAAzB,EAAN;AACA,OAAMpI,QAAQ0I,QAAQG,SAAR,CAAkB;AAAA,WAAQF,IAAIN,GAAJ,KAAYnO,KAAKmO,GAAzB;AAAA,IAAlB,CAAd;AACA,OAAMnO,OAAOwO,QAAQ1I,KAAR,CAAb;AACN0I,WAAQI,MAAR,CAAe9I,KAAf,EAAsB,CAAtB,eACI9F,IADJ,EAEIyO,GAFJ;AAIA,UAAKvK,QAAL,CAAc,EAACgK,YAAYM,OAAb,EAAd,EAAqC,YAAI;AAC/B;AACA,WAAKrP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA,QAAIW,SAAS7N,KAAKC,KAAL,CAAWD,KAAKE,SAAL,cAAmBuN,GAAnB,EAAX,CAAb;AACA;AACA,QAAI/O,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyCmP,MAAzC,CAAtB;AACH,IAPP;AAQA,GA9LkB;;AAAA,SAiMnB8C,gBAjMmB,GAiMA,UAACxD,GAAD,EAAS;AACxB,OAAIY,cAAJ;AADwB,OAEpBiD,IAFoB,GAEZjD,MAAMrL,KAFM,CAEpBsO,IAFoB;;AAG3B,OAAIA,KAAKC,OAAL,CAAa9D,GAAb,KAAqB,CAAzB,EAA4B;AAC3B6D,SAAKpD,MAAL,CAAYoD,KAAKC,OAAL,CAAa9D,GAAb,CAAZ,EAA+B,CAA/B;AACA,IAFD,MAEO;AACN6D,SAAKhJ,IAAL,CAAUmF,GAAV;AACA;AACKY,SAAM7K,QAAN,CAAe,EAACgO,cAAcF,IAAf,EAAf,EAAoC,YAAI;AACrC,QAAI7Q,0BAAQ4N,MAAM5P,KAAN,CAAYyB,EAApB,EAAyBoR,IAAzB,CAAJ;AACA,QAAIE,eAAelR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAY2S,YAA3B,CAAX,CAAnB;AACAnD,UAAMxP,KAAN,CAAY2S,YAAZ,GAA2BvS,OAAOC,MAAP,CAAcsS,YAAd,EAA4B/Q,GAA5B,CAA3B;AACF,IAJD;AAKN,GA9MkB;;AAAA,SAiNnByQ,UAjNmB,GAiNN,UAAC1G,MAAD,EAAY;AACxB,UAAKhH,QAAL,CAAc;AACbiO,gBAAY,IADC,CACK;AADL,IAAd,EAEG,YAAI;AACN,WAAKR,gBAAL,CAAsBzG,MAAtB;AACA,IAJD;AAKA,GAvNkB;;AAAA,SA0NhBkH,WA1NgB,GA0NF,UAAClH,MAAD,EAAY;AACtB;AACF;AACA;AACE;AACA;AACA,UAAKhH,QAAL,CAAc;AACVmO,eAAW1S,OAAOC,MAAP,CAAc,EAAd,EAAkBsL,MAAlB,CADD;AAEVoH,eAAW3S,OAAOC,MAAP,CAAc,EAAd,EAAkBsL,OAAOpL,QAAP,IAAiB,IAAjB,GAAsB,EAAtB,GAAyBoL,OAAOpL,QAAlD,CAFD;AAGbqS,gBAAY,KAHC,CAGM;AAHN,IAAd,EAIG,YAAI;AACH,WAAKR,gBAAL,CAAsBzG,OAAOtK,EAA7B;AACH,IAND;AAOH,GAvOe;;AAAA,SA0OnB2R,iBA1OmB,GA0OC,UAAC3R,EAAD,EAAQ;AACxB;AACE,OAAIiF,SAAS,OAAKnC,KAAL,CAAW8O,QAAX,CAAoB3M,MAAjC;AACF,OAAIA,UAAQ,CAAZ,EAAe;AACT,WAAKtG,KAAL,CAAWkT,YAAX,CAAwB,EAAC5Q,KAAIjB,EAAL,EAAxB,EACKpB,IADL,CACU,UAAC4D,GAAD,EAAO;AACV,SAAIA,GAAJ,EAAS;AACL;AACA,aAAKjE,KAAL,CAAWkF,UAAX;AACA;AACf,aAAK9E,KAAL,CAAWmB,YAAX;AACA;AACA,aAAKnB,KAAL,CAAWuS,cAAX;AACezO,oBAAQC,OAAR,CAAgB,MAAhB;AACA,aAAKqO,gBAAL,CAAsB/Q,EAAtB;AACH,MATD,MASO;AACHyC,oBAAQM,KAAR,CAAc,MAAd;AACH;AACH,KAdL;AAeF,IAhBJ,MAgBU;AACJ;AACC,QAAM6O,WAAWxR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAW8O,QAA1B,CAAX,CAAjB;AACA,QAAME,QAAQF,SAASzS,MAAT,CAAgB,UAACC,IAAD,EAAQ;AAAC,YAAOA,KAAKS,IAAL,IAAW,EAAX,IAAeT,KAAK2S,OAAL,IAAc,IAA7B,IAAmC3S,KAAK2S,OAAL,CAAa9M,MAAb,IAAqB,CAA/D;AAAiE,KAA1F,CAAd;AACA,QAAI6M,MAAM7M,MAAN,GAAa,CAAjB,EAAoB;AAAG;AACnBxC,mBAAQuP,IAAR,CAAa,cAAb;AACA,YAAO,KAAP;AACH;AACP,QAAMC,UAAUL,SAASzS,MAAT,CAAgB,UAACC,IAAD,EAAQ;AAAC,YAAOyL,OAAOzL,KAAK0O,YAAZ,IAA0BjD,OAAOzL,KAAK0L,UAAZ,CAAjC;AAAyD,KAAlF,CAAhB;AACA,QAAImH,QAAQhN,MAAR,GAAe,CAAnB,EAAsB;AAAG;AACxBxC,mBAAQuP,IAAR,CAAa,cAAb;AACA,YAAO,KAAP;AACA;AACK;AACA,QAAIhS,GAAGwN,UAAH,CAAc,GAAd,CAAJ,EAAwB;AACpB,YAAKuD,gBAAL,CAAsB/Q,EAAtB;AACH,KAFD,MAEO;AACH;AACA,YAAKrB,KAAL,CAAWuT,YAAX,CAAwB,OAAKpP,KAAL,CAAW8O,QAAnC,EACKhT,IADL,CACU,UAAC4D,GAAD,EAAO;AACT,UAAIA,OAAKA,IAAIyC,MAAJ,GAAW,CAApB,EAAuB;AACnBxC,qBAAQC,OAAR,CAAgB,MAAhB;AACA,cAAKyP,OAAL,CAAa9E,UAAb;AACA;AACrB,WAAIvO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAIwL,SAASnM,MAAMqW,SAAN,CAAgB1V,QAAhB,EAA0BkB,EAA1B,CAAb;AACA;AACA,WAAIyU,cAAcnK,UAAQA,OAAOpL,QAAP,IAAiB,IAAzB,IAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,eAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,QAA9D,EAAgE,CAAhE,CAAjD;AACA,WAAGoV,WAAH,EAAe;AACdjS,YAAI4F,IAAJ,CAASqM,WAAT;AACA;AACoB,cAAK9V,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,gBAA/B,EAAiD0D,GAAjD,CAAtB;AACA;AACA,cAAK7D,KAAL,CAAWmB,YAAX;AACA,cAAKiR,gBAAL,CAAsB/Q,EAAtB;AACH,OAfD,MAeO;AACHyC,qBAAQM,KAAR,CAAc,MAAd;AACH;AACJ,MApBL;AAqBH;AACJ;AACP,GAtSkB;;AAAA,SAySnB0K,iBAzSmB,GAySC,UAACmE,QAAD,EAAc;AACjC,OAAIQ,cAAc,EAAlB;AACAR,YAASS,OAAT,CAAiB,gBAAM;AAAA,QACjB9E,GADiB,GACOnO,IADP,CACjBmO,GADiB;AAAA,QACbrO,QADa,GACOE,IADP,CACbF,QADa;AAAA,QACAqB,GADA,4BACOnB,IADP;;AAEtBgT,gBAAYhK,IAAZ,CAAiB7H,GAAjB;AACA,IAHD;AAIA,UAAK+C,QAAL,CAAc,EAACsO,UAASQ,WAAV,EAAd;AACA,GAhTkB;;AAAA,SAmThBE,OAnTgB,GAmTN,UAAC/E,GAAD,EAAQ;AACd,UAAKwD,gBAAL,CAAsBxD,GAAtB;AACA,UAAK5O,KAAL,CAAWwC,MAAX,GAAoB,KAApB;AACA;AACA,OAAIrC,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC,OAAKgE,KAAL,CAAW2O,SAApD,CAAtB;AACA,UAAKU,OAAL,CAAa9E,UAAb;AACA,UAAK/J,QAAL,CAAc;AACVmO,eAAW1S,OAAOC,MAAP,CAAc,EAAd;AADD,IAAd;AAGH,GA7Te;;AAAA,SAgUhBuT,QAhUgB,GAgUL,UAACjI,MAAD,EAAY;AACtB,OAAI6D,cAAJ;AACA,OAAMqE,gBAAgBrE,MAAMrL,KAAN,CAAY4O,SAAZ,CAAsBjR,GAAtB,CAA0B,gBAAM;AAClD,WAAO;AACA,aAAQrB,KAAKS,IADb;AAEA,gBAAWT,KAAK2S,OAFhB;AAGA,mBAAc3S,KAAK0L,UAHnB;AAIA,qBAAgB1L,KAAK0O;AAJrB,KAAP;AAMA,IAPkB,CAAtB,CAFsB,CASd;AACL,OAAM2E,aAAatE,MAAMrL,KAAN,CAAY8O,QAAZ,CAAqBnR,GAArB,CAAyB,gBAAM;AAC9C,WAAO;AACH,aAAQrB,KAAKS,IADV;AAEH,gBAAWT,KAAK2S,OAFb;AAGH,mBAAc3S,KAAK0L,UAHhB;AAIH,qBAAgB1L,KAAK0O;AAJlB,KAAP;AAMH,IAPkB,CAAnB,CAVmB,CAiBd;AACN;AACC;AACA,OAAI1N,KAAKE,SAAL,CAAekS,aAAf,KAA+BpS,KAAKE,SAAL,CAAemS,UAAf,CAAnC,EAA+D;AAC3D;AACAtE,UAAMmE,OAAN,CAAchI,OAAOtK,EAArB;AACH,IAHD,MAGO;AACH0S,gBAAMC,OAAN,CAAc;AACVtG,YAAO,YADG;AAEVuG,aAAQ,IAFE;AAGVC,iBAAY,KAHF;AAIVC,SAJU,kBAIH;AACH3E,YAAMwD,iBAAN,CAAwBrH,OAAOtK,EAA/B;AACH,MANS;AAOV+S,aAPU,sBAOC;AACP5E,YAAMmE,OAAN,CAAchI,OAAOtK,EAArB;AACH;AATS,KAAd;AAWH;AACJ,GApWe;;AAAA,SAsWhBsO,SAtWgB,GAsWJ,UAAC7M,GAAD,EAAS;AACjB,UAAK0Q,OAAL,GAAe1Q,GAAf;AACH,GAxWe;;AAAA,SA2WnBuR,KA3WmB,GA2WX,UAAC1I,MAAD,EAAY;AAAA,OACZrB,QADY,GACA,OAAK1K,KADL,CACZ0K,QADY;;AAEnB,OAAIgK,WAAW3I,OAAOpL,QAAP,IAAiB,IAAjB,GAAsB,EAAtB,GAAyBoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,WAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,IAAjE,CAAxC;AACA,OAAMuR,YAAYqC,YAAU,IAAV,IAAgBA,SAAShO,MAAT,IAAiB,CAAjC,GAAmC,CAAnC,GAAqCgO,SAAShO,MAAhE;AACA,OAAIgE,YAAU2H,YAAY,CAA1B,EAA6B;AAAG;AAC/B,WAAKI,UAAL,CAAgB1G,OAAOtK,EAAvB;AACA;AACD,GAlXkB;;AAElB,SAAKrB,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZwK,eAAY,EADA,EACK;AACRjK,UAAO,CAFJ,EAEc;AACjB8N,gBAAa;AACrB,UAAM,EADe;AAErB,WAAO,EAFc;AAGrB,iBAAa,EAHQ;AAIrB,gBAAY,MAJS;AAKrB,eAAW,EALU;AAMrB,gBAAY,IANS;AAOrB,YAAQ,EAPa;AAQrB,YAAQ,CARa;AASrB,iBAAa,IATQ;AAUZ,iBAAa,IAVD;AAWrB,eAAW,IAXU;AAYrB,cAAU,CAZW;AAaZ,cAAU;AAbE,IAHV,EAiBT;AACHG,iBAAc,EAlBF,EAkBM;AAClBF,SAAM,EAnBM,EAmBF;AACVQ,aAAS,EApBG;AAqBHH,cAAW,EArBR,EAqBY;AACfC,cAAW,EAtBR,EAsBY;AACxBH,eAAY,KAvBA,CAuBO;AAvBP,GAAb;AAHkB;AA4BlB;;;;4CAEyB5I,S,EAAW0F,W,EAAa;AACjD,OAAI1F,UAAU2E,UAAV,IAAsB,KAAK/O,KAAL,CAAW+O,UAArC,EAAiD;AAChD,SAAKhK,QAAL,CAAc;AACDgK,iBAAY3E,UAAU2E,UAAV,IAAsB,IAAtB,IAA4B3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA6B,CAAzD,GAA2D,EAA3D,GAA8D0D,UAAU2E,UAAV,CAAqB7M,GAArB,CAAyB,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AAC1G,aAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAACmO,KAAKrI,KAAN,EAApB,CAAP;AAAyC,MADyB,CADzE;AAGD7B,YAAOsF,UAAU2E,UAAV,IAAsB,IAAtB,IAA4B3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA6B,CAAzD,GAA2D,CAA3D,GAA6D0D,UAAU2E,UAAV,CAAqBrI,MAHxF;AAIDkM,kBAAapS,OAAOC,MAAP,CAAc,EAAd,EAAkB;AAC3B,YAAM,EADqB;AAE3B,aAAO2J,UAAU1H,GAFU;AAG3B,mBAAa0H,UAAU/F,SAHI;AAI3B,kBAAY,MAJe;AAK3B,iBAAW,EALgB;AAM3B,kBAAY,IANe;AAO3B,cAAQ,EAPmB;AAQ3B,cAAQ,CARmB;AAS3B,mBAAa,IATc;AAU9B,mBAAa,IAViB;AAW3B,iBAAW,IAXgB;AAY3B,gBAAU,CAZiB;AAa9B,gBAAU;AAboB,MAAlB,CAJZ,CAkBE;AAlBF,KAAd;AAoBA;AACD;;;sCAEmB;AAAA;;AACb,QAAKU,QAAL,CAAc;AACVgK,gBAAY,KAAK/O,KAAL,CAAW+O,UAAX,IAAuB,IAAvB,IAA6B,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAA8B,CAA3D,GAA6D,EAA7D,GAAgE,KAAK1G,KAAL,CAAW+O,UAAX,CAAsB7M,GAAtB,CAA0B,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AACjH,YAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAAC,OAAO8F,KAAR,EAApB,CAAP;AACH,KAF2E,CADlE;AAIV7B,WAAO,KAAK9E,KAAL,CAAW+O,UAAX,KAAwB,IAAxB,IAA8B,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAA8B,CAA5D,GAA8D,CAA9D,GAAgE,KAAK1G,KAAL,CAAW+O,UAAX,CAAsBrI,MAJnF;AAKVkM,iBAAapS,OAAOC,MAAP,CAAc,EAAd,EAAkB;AAC3B,WAAM,EADqB;AAE3B,YAAO,KAAKT,KAAL,CAAW0C,GAFS;AAG3B,kBAAa,KAAK1C,KAAL,CAAWqE,SAHG;AAI3B,iBAAY,MAJe;AAK3B,gBAAW,EALgB;AAM3B,iBAAY,IANe;AAO3B,aAAQ,EAPmB;AAQ3B,aAAQ,CARmB;AAS3B,kBAAa,IATc;AAU9B,kBAAa,IAViB;AAW3B,gBAAU,IAXiB;AAY3B,eAAU,CAZiB;AAa9B,eAAU;AAboB,KAAlB,CALH,EAmBN;AACJ0O,kBAAc,EApBJ,EAoBQ;AAClBF,UAAM,EArBI,EAqBA;AACVQ,cAAS;AAtBC,IAAd;AAwBN;;;;;;;AAOA,QAAK8C,OAAL,GAAerT,iBAAQ8R,WAAR,CAAoB,cAApB,EAAoC,UAAC5S,GAAD,EAAO;AACzD,WAAKuQ,eAAL,CAAqBvQ,IAAIU,GAAzB,EAA8BV,IAAIU,GAAlC,EAAuCV,IAAIY,MAA3C;AACA,IAFc,CAAf;AAGA;;;yCAEqB;AACrBE,oBAAQ+R,cAAR,CAAuB,KAAKsB,OAA5B;AACA;;AAYD;;;AAcA;;;AAqCA;;;AAgBA;;;AAmBA;;;AAgBA;;;AASA;;;AAgBA;;;AA+DA;;;AAUA;;;AAaG;;;AA2CH;;;;2BAUS;AAAA;;AAAA,gBACuC,KAAK5R,KAD5C;AAAA,OACDyO,UADC,UACDA,UADC;AAAA,OACWjE,UADX,UACWA,UADX;AAAA,OACuBgE,YADvB,UACuBA,YADvB;AAAA,OAEDrI,QAFC,GAEW,KAAK1K,KAFhB,CAED0K,QAFC;AAAA,OAGD0L,YAHC,GAGe,KAAKpW,KAHpB,CAGDoW,YAHC;;AAIR,OAAMtB,YAAY/B,aAAarM,MAAb,GAAoB,CAAtC;AACA,OAAMwJ,aAAa;AAClBC,UAAM;AACLb,UAAKrE,eADA;AAELmF,WAAM5E;AAFD;AADY,IAAnB;AAMA,OAAM6E,YAAY+F,eAClB,CACC;AACCtI,WAAO,IADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAIC6B,WAAO,QAJR;AAKa3B,cAAU,CAACjE,QAAD,IAAW,CAACoK,SALnC;AAMavE,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AAClC,YAAO;AAAA;AAAA;AACA;AACE,WAAIA,OAAOtK,EAFb;AAGK,gBAAS,OAAKgT,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAHd;AAIK,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAJZ;AAKK,kBAAU,IALf;AAMa,oCAAC,UAAD,IAAM,WAAWlJ,OAAOmJ,SAAP,KAAmB,CAAnB,IAAsBxK,QAAtB,GAA+B,EAA/B,GAAkC,QAAnD,EAA6D,OAAO,EAACC,UAAS,MAAV,EAAiBwK,UAAS,UAA1B,EAAsCC,MAAM,KAA5C,EAAmDxK,OAAO,KAA1D,EAAiEyK,KAAK,KAAtE,EAA6EC,WAAW,kBAAxF,EAApE,EAAiL,MAAK,oBAAtL,GANb;AAOc9E;AAPd,MAAP;AASS;AAhBd,IADD,EAmBC;AACC1C,WAAO,KADR;AAECD,eAAW,SAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAM,IAAN,GAAW,EAAX,GAAcA,KAAKtO,GAAL,CAAS;AAAA,cAAMrB,KAAKsM,QAAX;AAAA,OAAT,EAA8BsD,IAA9B,CAAmC,GAAnC;AAFjD,MAAP;AAGA;AAVF,IAnBD,EA+BC;AACC3C,WAAO,MADR;AAECD,eAAW,WAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAM,IAAN,IAAYA,QAAM,CAAlB,GAAoB,EAApB,GAAuB,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAF1D,MAAP;AAGA;AAVF,IA/BD,EA2CU;AACIwF,WAAO,MADX;AAEID,eAAW,SAFf;AAGIY,WAAO,KAHX;AAIIE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJ1B;AAKIxE,WAAO,QALX;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAM,IAAN,IAAYA,QAAM,CAAlB,GAAoB,EAApB,GAAuB,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAF1D,MAAP;AAGA;AAVF,IA3CV,EAuDC;AACCwF,WAAO,MADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAO,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AAAC,YAAO;AAAA;AAAA,QAAK,OAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAZ,EAAiE,SAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAA1E;AAA0GyE,UAA1G;AAAA;AAAA,MAAP;AAA8H;AANzJ,IAvDD,EA+DE;AACA1C,WAAO,MADP;AAEAD,eAAW,MAFX;AAGAY,WAAO,KAHP;AAIA6B,WAAO,QAJP;AAKYC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACrC,SAAIsK,UAAUtK,OAAOpL,QAAP,IAAiB,IAAjB,IAAuBoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,aAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,MAA9D,EAAgE,CAAhE,CAArC,CADqC,CACqE;AAC1G,SAAMoV,cAAcG,WAASA,QAAQ1V,QAAjB,IAA2B0V,QAAQ1V,QAAR,IAAkB,IAA7C,GAAkD0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AACrG,aAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,YAAK+N,MAAM7U,EADa;AAExBH,aAAMgV,MAAM7M,QAFY;AAGxBP,eAAQ,MAHgB;AAIxB1G,YAAK8T,MAAM5M,QAJa;AAKxBF,eAAQ8M,MAAM9M,MALU;AAMxBC,iBAAS6M,MAAM7M,QANS;AAOxBC,iBAAU4M,MAAM5M,QAPQ;AAQxBjI,WAAI6U,MAAM7U;AARc,OAAlB,CAAP;AAUA,MAXqE,CAAlD,GAWf,EAXL;AAYe,YACC;AAAA;AAAA,QAAK,WAAU,cAAf;AACE4U,iBAAS,KAAT,GACD,KADC,GACK,8BAAC,kBAAD;AACJ,uBAAgB,OAAKrW,KAAL,CAAWyE,cADvB;AAEJ,gBAAS,OAAKzE,KAAL,CAAW4E,OAFhB;AAGJ,iBAAUsR,WAHN;AAIJ,YAAKG,UAAQA,QAAQ5U,EAAhB,GAAmB,EAJpB;AAKJ,kBAAW4U,UAAQA,QAAQhS,SAAhB,GAA0B,EALjC;AAMJ,iBAAUqG,YAAUoK,SANhB;AAOJ,gBAAS,OAAK9U,KAAL,CAAWyH,GAPhB;AAQJ,iBAAU;AARN;AAFP,MADD;AAcf;AAjCD,IA/DF,EAkGC;AACCqG,WAAO,IADR;AAECD,eAAW,QAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAO,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACxB,SAAMwJ,UACL;AAAA;AAAA;AACE/E,cAAM,IAAN,IAAYA,QAAM,EAAlB,GAAqB,IAArB,GAA0B;AAAA;AAAA;AAAG;AAAA;AAAA,UAAM,OAAO,EAACgF,YAAW,KAAZ,EAAkB5K,OAAO,MAAzB,EAAb;AAAA;AAAA,QAAH;AAAA;AAA8D4F;AAA9D,OAD5B;AAEEzE,aAAOpL,QAAP,IAAiB,IAAjB,IAAuBoL,OAAOpL,QAAP,IAAiB,EAAxC,GAA2C,IAA3C,GAAgDoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,cAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,OAAjE,EAAmEoB,GAAnE,CAAuE,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AACtI,cAAQ;AAAA;AAAA,UAAG,WAAW9F,KAAK4U,MAAL,IAAa,IAAb,IAAmB5U,KAAK4U,MAAL,IAAa,EAAhC,GAAmC,QAAnC,GAA4C,EAA1D,EAA8D,KAAK,UAAQ9O,KAA3E;AAAkF;AAAA;AAAA,WAAM,OAAO,EAAC6O,YAAW,KAAZ,EAAkB5K,OAAO,MAAzB,EAAb;AAAA;AAAkDjE,iBAAM,CAAxD;AAAA;AAAA,SAAlF;AAAA;AAAsJ9F,aAAK4U;AAA3J,QAAR;AACA,OAFgD;AAFlD,MADD;AAQA,YACC;AAAA;AAAA;AACC,cAAO,EAAChH,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADR;AAEC,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB;AAFV;AAIC;AAAC,oBAAD;AAAA,SAAS,SAASwJ,OAAlB,EAA2B,SAAQ,OAAnC;AACC;AAAA;AAAA;AACC,gBAAO,EAACG,UAAU,OAAX,EADR;AAEC,oBAAU,QAFX;AAGElF,gBAAM,IAAN,IAAYA,QAAM,EAAlB,GAAqB,IAArB,GAA0B;AAAA;AAAA;AAAM;AAAA;AAAA,YAAM,OAAO,EAACgF,YAAW,KAAZ,EAAkB5K,OAAO,MAAzB,EAAb;AAAA;AAAA,UAAN;AAAA;AAAiE4F;AAAjE,SAH5B;AAIEzE,eAAOpL,QAAP,IAAiB,IAAjB,IAAuBoL,OAAOpL,QAAP,IAAiB,EAAxC,GAA2C,IAA3C,GAAgDoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,gBAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,SAAjE,EAAmEoB,GAAnE,CAAuE,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AACtI,gBAAQ;AAAA;AAAA,YAAM,KAAK,UAAQA,KAAnB,EAA0B,WAAW9F,KAAK4U,MAAL,IAAa,IAAb,IAAmB5U,KAAK4U,MAAL,IAAa,EAAhC,GAAmC,QAAnC,GAA4C,EAAjF;AACkB;AAAA;AAAA,aAAM,OAAO,EAACE,aAAa,KAAd,EAAoBH,YAAW,KAA/B,EAAqC5K,OAAO,MAA5C,EAAb;AAAA;AACGjE,mBAAM,CADT;AAAA;AAAA,WADlB;AAAA;AAEuC9F,eAAK4U;AAF5C,UAAR;AAGA,SAJgD;AAJlD;AADD;AAJD,MADD;AAkBE;AAjCJ,IAlGD,EAqIC;AACC3H,WAAO,IADR;AAECD,eAAW,WAFZ;AAGCyC,WAAO,QAHR;AAICC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAI6J,aAAa,IAAjB;AACA,SAAI7C,aAAanS,MAAb,CAAoB,gBAAQ;AAAC,aAAOC,QAAQkL,OAAOtK,EAAtB;AAAyB,MAAtD,EAAwDiF,MAAxD,GAA+D,CAA/D,IAAkE,CAACsM,UAAvE,EAAmF;AAClF,aAAQ;AAAA;AAAA;AACA;AAAA;AAAA,UAAG,SAAS,OAAKe,OAAL,CAAagB,IAAb,CAAkB,MAAlB,EAAwBhJ,OAAOtK,EAA/B,CAAZ;AAAA;AAAA,QADA;AAEH;AAAA;AAAA,UAAG,WAAU,MAAb,EAAoB,SAAS,OAAK2R,iBAAL,CAAuB2B,IAAvB,CAA4B,MAA5B,EAAkChJ,OAAOtK,EAAzC,CAA7B;AAAA;AAAA;AAFG,OAAR;AAIA,MALD,MAMQ;AACP;AACA,UAAIiT,WAAW3I,OAAOpL,QAAP,IAAiB,IAAjB,GAAsB,EAAtB,GAAyBoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,cAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,OAAjE,CAAxC;AACkB,UAAMuR,YAAYqC,YAAU,IAAV,IAAgBA,SAAShO,MAAT,IAAiB,CAAjC,GAAmC,CAAnC,GAAqCgO,SAAShO,MAAhE;AACA,UAAIgE,QAAJ,EAAc;AAAG;AAChB,WAAI2H,aAAW,CAAf,EAAkB;AAAE;AACnB,eAAO;AAAA;AAAA,WAAG,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAZ;AAAA;AAAA,SAAP;AACA;AACA,QAHD,MAGO;AAAG;AACT,eAAQ;AAAA;AAAA;AACD;AAAA;AAAA,YAAG,OAAM,cAAT,EAAc,SAAS,OAAK0G,UAAL,CAAgBsC,IAAhB,CAAqB,MAArB,EAA2BhJ,OAAOtK,EAAlC,CAAvB;AAA+D4Q;AAA/D,UADC;AAED,uCAAC,UAAD,IAAM,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAf,EAAoD,WAAU,SAA9D,EAAwE,OAAO,EAAC8J,YAAW,MAAZ,EAA/E,EAAoG,OAAM,cAA1G,EAA+G,MAAK,MAApH;AAFC,SAAR;AAIA;AACD,OAVD,MAUO;AAAG;AACN,cAAQ;AAAA;AAAA,UAAI,SAAS,OAAK5C,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAb;AAAmDsG,qBAAW,CAAX,GAAauD,UAAb,GAAwBvD;AAA3E,QAAR;AACH;AACnB;AACD;AA9BF,IArID,CADkB,GAsKhB,CACD;AACCvE,WAAO,IADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAIC6B,WAAO,QAJR;AAKa3B,cAAU,CAACjE,QAAD,IAAW,CAACoK,SALnC;AAMavE,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AAClC,YAAO;AAAA;AAAA;AACE,WAAIA,OAAOtK;AACX;AAFF,SAGK,SAAS,OAAKgT,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAHd;AAIK,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAJZ;AAKK,kBAAU,IALf;AAMa,oCAAC,UAAD,IAAM,WAAWlJ,OAAOmJ,SAAP,KAAmB,CAAnB,IAAsBxK,QAAtB,GAA+B,EAA/B,GAAkC,QAAnD,EAA6D,OAAO,EAACC,UAAS,MAAV,EAAiBwK,UAAS,UAA1B,EAAsCC,MAAM,KAA5C,EAAmDxK,OAAO,KAA1D,EAAiEyK,KAAK,KAAtE,EAA6EC,WAAW,kBAAxF,EAApE,EAAiL,MAAK,oBAAtL,GANb;AAOc9E;AAPd,MAAP;AASS;AAhBd,IADC,EAmBD;AACC1C,WAAO,KADR;AAECD,eAAW,SAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA,QAAK,OAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAZ,EAAiE,SAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAA1E;AAA0GyE,cAAM,IAAN,GAAW,EAAX,GAAcA,KAAKtO,GAAL,CAAS;AAAA,cAAMrB,KAAKsM,QAAX;AAAA,OAAT,EAA8BsD,IAA9B,CAAmC,GAAnC;AAAxH,MAAP;AACA;AARF,IAnBC,EA6BD;AACC3C,WAAO,MADR;AAECD,eAAW,WAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA,QAAK,OAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAZ,EAAiE,SAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAA1E;AAA0GyE,cAAM,IAAN,IAAYA,QAAM,CAAlB,GAAoB,EAApB,GAAuB,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAAjI,MAAP;AACA;AARF,IA7BC,EAuCQ;AACIwF,WAAO,MADX;AAEID,eAAW,SAFf;AAGIY,WAAO,KAHX;AAIIE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJ1B;AAKIxE,WAAO,QALX;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA,QAAK,OAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAZ,EAAiE,SAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAA1E;AAA0GyE,cAAM,IAAN,IAAYA,QAAM,CAAlB,GAAoB,EAApB,GAAuB,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAAjI,MAAP;AACA;AARF,IAvCR,EAiDD;AACCwF,WAAO,MADR;AAECD,eAAW,MAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAO,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AAAC,YAAO;AAAA;AAAA,QAAK,OAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAZ,EAAiE,SAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAA1E;AAA0GyE,UAA1G;AAAA;AAAA,MAAP;AAA8H;AANzJ,IAjDC,EAyDA;AACC1C,WAAO,IADR;AAECD,eAAW,QAFZ;AAGCY,WAAO,KAHR;AAICE,cAAU,CAACjE,QAAD,IAAW,CAACoK,SAJvB;AAKCxE,WAAO,QALR;AAMCC,YAAO,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACxB,SAAMwJ,UACL;AAAA;AAAA;AACE/E,cAAM,IAAN,IAAYA,QAAM,EAAlB,GAAqB,IAArB,GAA0B;AAAA;AAAA;AAAG;AAAA;AAAA,UAAM,OAAO,EAACgF,YAAW,KAAZ,EAAkB5K,OAAO,MAAzB,EAAb;AAAA;AAAA,QAAH;AAAA;AAA8D4F;AAA9D,OAD5B;AAEEzE,aAAOpL,QAAP,IAAiB,IAAjB,IAAuBoL,OAAOpL,QAAP,IAAiB,EAAxC,GAA2C,IAA3C,GAAgDoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,cAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,OAAjE,EAAmEoB,GAAnE,CAAuE,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AACtI,cAAQ;AAAA;AAAA,UAAG,WAAW9F,KAAK4U,MAAL,IAAa,IAAb,IAAmB5U,KAAK4U,MAAL,IAAa,EAAhC,GAAmC,QAAnC,GAA4C,EAA1D,EAA8D,KAAK,UAAQ9O,KAA3E;AAAkF;AAAA;AAAA,WAAM,OAAO,EAAC6O,YAAW,KAAZ,EAAkB5K,OAAO,MAAzB,EAAb;AAAA;AAAkDjE,iBAAM,CAAxD;AAAA;AAAA,SAAlF;AAAA;AAAsJ9F,aAAK4U;AAA3J,QAAR;AACA,OAFgD;AAFlD,MADD;AAQA,YACC;AAAA;AAAA;AACC,cAAO,EAAChH,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADR;AAEC,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFV;AAGC;AAAC,oBAAD;AAAA,SAAS,SAASwJ,OAAlB,EAA2B,SAAQ,OAAnC;AACC;AAAA;AAAA;AACC,gBAAO,EAACG,UAAU,OAAX,EADR;AAEC,oBAAU,QAFX;AAGElF,gBAAM,IAAN,IAAYA,QAAM,EAAlB,GAAqB,IAArB,GAA0B;AAAA;AAAA;AAAM;AAAA;AAAA,YAAM,OAAO,EAACgF,YAAW,KAAZ,EAAkB5K,OAAO,MAAzB,EAAb;AAAA;AAAA,UAAN;AAAA;AAAiE4F;AAAjE,SAH5B;AAIEzE,eAAOpL,QAAP,IAAiB,IAAjB,IAAuBoL,OAAOpL,QAAP,IAAiB,EAAxC,GAA2C,IAA3C,GAAgDoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,gBAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,SAAjE,EAAmEoB,GAAnE,CAAuE,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AACtI,gBAAQ;AAAA;AAAA,YAAM,KAAK,UAAQA,KAAnB,EAA0B,WAAW9F,KAAK4U,MAAL,IAAa,IAAb,IAAmB5U,KAAK4U,MAAL,IAAa,EAAhC,GAAmC,QAAnC,GAA4C,EAAjF;AACiB;AAAA;AAAA,aAAM,OAAO,EAACE,aAAa,KAAd,EAAoBH,YAAW,KAA/B,EAAqC5K,OAAO,MAA5C,EAAb;AAAA;AACGjE,mBAAM,CADT;AAAA;AAAA,WADjB;AAAA;AAEsC9F,eAAK4U;AAF3C,UAAR;AAGA,SAJgD;AAJlD;AADD;AAHD,MADD;AAiBE;AAhCJ,IAzDA,EA2FD;AACC3H,WAAO,IADR;AAECD,eAAW,WAFZ;AAGCyC,WAAO,QAHR;AAICC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAI6J,aAAa,IAAjB;AACA,SAAI7C,aAAanS,MAAb,CAAoB,gBAAQ;AAAC,aAAOC,QAAQkL,OAAOtK,EAAtB;AAAyB,MAAtD,EAAwDiF,MAAxD,GAA+D,CAA/D,IAAkE,CAACsM,UAAvE,EAAmF;AAClF,aAAQ;AAAA;AAAA;AACA;AAAA;AAAA,UAAG,SAAS,OAAKe,OAAL,CAAagB,IAAb,CAAkB,MAAlB,EAAwBhJ,OAAOtK,EAA/B,CAAZ;AAAA;AAAA,QADA;AAEH;AAAA;AAAA,UAAG,WAAU,MAAb,EAAoB,SAAS,OAAK2R,iBAAL,CAAuB2B,IAAvB,CAA4B,MAA5B,EAAkChJ,OAAOtK,EAAzC,CAA7B;AAAA;AAAA;AAFG,OAAR;AAIA,MALD,MAMQ;AACP;AACA,UAAIiT,WAAW3I,OAAOpL,QAAP,IAAiB,IAAjB,GAAsB,EAAtB,GAAyBoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,cAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,OAAjE,CAAxC;AACkB,UAAMuR,YAAYqC,YAAU,IAAV,IAAgBA,SAAShO,MAAT,IAAiB,CAAjC,GAAmC,CAAnC,GAAqCgO,SAAShO,MAAhE;AACA,UAAIgE,QAAJ,EAAc;AAAG;AAChB,WAAI2H,aAAW,CAAf,EAAkB;AAAE;AACnB,eAAO;AAAA;AAAA,WAAG,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAZ;AAAA;AAAA,SAAP;AACA;AACA,QAHD,MAGO;AAAG;AACT,eAAQ;AAAA;AAAA;AACD;AAAA;AAAA,YAAG,OAAM,cAAT,EAAc,SAAS,OAAK0G,UAAL,CAAgBsC,IAAhB,CAAqB,MAArB,EAA2BhJ,OAAOtK,EAAlC,CAAvB;AAA+D4Q;AAA/D,UADC;AAED,uCAAC,UAAD,IAAM,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAf,EAAoD,WAAU,SAA9D,EAAwE,OAAO,EAAC8J,YAAW,MAAZ,EAA/E,EAAoG,OAAM,cAA1G,EAA+G,MAAK,MAApH;AAFC,SAAR;AAIA;AACD,OAVD,MAUO;AAAG;AACN,cAAQ;AAAA;AAAA,UAAI,SAAS,OAAK5C,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAb;AAAmDsG,qBAAW,CAAX,GAAauD,UAAb,GAAwBvD;AAA3E,QAAR;AACH;AACnB;AACD;AA9BF,IA3FC,CAtKF;AAkSA,OAAM3B,UAAUL,UAAUnO,GAAV,CAAc,eAAO;AACpC,QAAI,CAACyO,IAAIhC,QAAT,EAAmB;AAClB,YAAOgC,GAAP;AACA;AACD,wBACIA,GADJ;AAECC,aAAQ;AAAA,aAAW;AAClB7E,qBADkB;AAElB4C,iBAAUgC,IAAIhC,QAFI;AAGlBd,kBAAW8C,IAAI9C,SAHG;AAIlBC,cAAO6C,IAAI7C,KAJO;AAKlBC,mBAAYpO,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CALM;AAMlB/B,mBAAY,OAAKA,UANC;AAOHgC,qBAAc,OAAKA;AAPhB,OAAX;AAAA;AAFT;AAYA,IAhBe,CAAhB;AAiBA,OAAM8H,oBAAoB,SAApBA,iBAAoB,CAAC/J,MAAD,EAAY;AACrC;AACA,QAAIqD,YAAU;AACb3N,SAAI,EADS;AAEbiB,UAAKqJ,OAAOtK,EAAP,IAAW,EAFH;AAGb4C,gBAAW0H,OAAO1H,SAAP,IAAkB,EAHhB;AAIbvD,eAAU,SAJG;AAKb0S,cAASzH,OAAOyH,OAAP,IAAgB,IAAhB,GAAqB,EAArB,GAAwBzH,OAAOyH,OAL3B;AAMbjE,mBAAc,CAND;AAObhD,iBAAY,CAPC;AAQbwJ,WAAM,CARO;AASbzU,WAAM,EATO;AAUbmU,aAAQ,EAVK;AAWb9H,gBAAW,IAXE;AAYbH,cAAS;AAZI,KAAd;AAcA,WACC,8BAAC,oBAAD;AACgB,YAAO,OAAKpN,KAD5B;AAEC,aAAQ2L,MAFT;AAGgB,gBAAWqD,SAH3B;AAIC,iBAAYzP,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CAJb;AAKC,iBAAYhC,OAAOpL,QAAP,IAAiB,IAAjB,GAAsB,EAAtB,GAAyBoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAQ;AAAC,aAAOA,KAAKC,QAAL,KAAgB,SAAvB;AAAiC,MAAjE,CALtC;AAMC,uBAAkB;AAAA,aAAMgU,aAAW,CAACpK,QAAZ,GAAqB,OAAKsJ,QAAL,CAAcjI,MAAd,CAArB,GAA2C,OAAKyG,gBAAL,CAAsBzG,OAAOtK,EAA7B,CAAjD;AAAA,MANnB;AAOC,wBAAmB,OAAKyN,iBAPzB;AAQgB,eAAU8D,UAR1B;AASgB,SAAIjH,OAAOtK,EAT3B;AAUgB,gBAAW,OAAKsO;AAVhC,MADD;AAcA,IA9BD;AA+BA,UACC;AAAA;AAAA;AACC,kCAAC,WAAD;AACC,iBAAYG,UADb;AAEC,mBAAc;AAAA,aAAM,cAAN;AAAA,MAFf;AAGgB,gBAAU,wBAH1B;AAIC,eAAU,KAJX;AAKC,iBAAYnB,UALb;AAMC,cAAS2B,OANV;AAOC,iBAAY,KAPb;AAQC,WAAM,QARP;AASC,uBAAkB,IATnB;AAUC,uBAAkB,KAVnB;AAWC,4BAAuB,CAAC,CAXzB;AAYC,sBAAiBqC,YAZlB;AAaC,wBAAmB+C,iBAbpB;AAcC,aAAQ;AAAA,aAAOxG,IAAI7N,EAAX;AAAA;AAdT,MADD;AAiBciJ,eAAS,IAAT,GAAc,8BAAC,UAAD,IAAM,SAAS,KAAKyE,SAApB,EAA+B,OAAO,EAAC3I,QAAQ,QAAT,EAAmBoE,OAAO,SAA1B,EAAqCD,UAAU,MAA/C,EAAtC,EAA8F,MAAK,aAAnG;AAjB5B,IADD;AAqBA;;;;EAvuB2B/D,gBAAMC,S;;kBA0uBpBmP,c;;;;;;;;;;;;;;;;;;;kBC5kCf;;;;;;AAIA;;;;AACA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEOO,Q,GAAYC,W,CAAZD,Q;IACAE,O,GAAWC,U,CAAXD,O;IACA1F,M,GAAUC,Y,CAAVD,M;;AACP,IAAM/O,MAAM,EAAC,GAAG,CAAC,GAAD,CAAJ,EAAW,GAAG,CAAC,GAAD,CAAd,EAAqB,GAAG,CAAC,GAAD,CAAxB,EAAZ,C,CAA4C;;IAGvBlC,K,WADpBoL,WAAKC,MAAL,E;;;AAEA,gBAAYnL,KAAZ,EAAmB;AAAA;;AAAA,6GACZA,KADY;;AAAA,SAyEnBgH,QAzEmB,GAyER,UAACgI,GAAD,EAAS;AACnB,UAAKjK,QAAL,CAAc;AACbiK;AADa,IAAd;AAGA,GA7EkB;;AAAA,SAgFnB5B,YAhFmB,GAgFJ,UAAC1B,OAAD,EAAW;AACzB,OAAIiL,SAAS9U,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWoS,MAA1B,CAAX,CAAb;AACA,UAAK5R,QAAL,CAAc;AACb4R,YAAQnW,OAAOC,MAAP,CAAckW,MAAd,EAAsB;AAC7B,gBAAWjL;AADkB,KAAtB;AADK,IAAd;AAKA,GAvFkB;;AAAA,SA0FnBtH,WA1FmB,GA0FL,YAAM;AACnB,UAAKW,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS,MADP;AAEb9R,WAAOwH,OAAO,OAAK/H,KAAL,CAAWO,KAAlB,IAAyB;AAFnB,IAAd;AAIA,UAAK9E,KAAL,CAAW6E,WAAX,CAAuB,OAAvB,EAAgCyH,OAAO,OAAKtM,KAAL,CAAW8E,KAAlB,IAA2B,CAA3D;AACA,GAhGkB;;AAAA,SAmGnB+R,OAnGmB,GAmGT,YAAK;AACd,UAAK7W,KAAL,CAAWgL,IAAX,CAAgB8L,WAAhB;AACA,UAAK/R,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS,MADP;AAEb5H,SAAK;AAFQ,IAAd;AAIA,GAzGkB;;AAAA,SA4GnB+H,YA5GmB,GA4GJ,UAAC5K,CAAD,EAAO;AACrBA,KAAE6K,cAAF;AACA,OAAIpH,cAAJ;AAFqB,OAGd+G,MAHc,GAGJ/G,MAAMrL,KAHF,CAGdoS,MAHc;;AAIrB/G,SAAM5P,KAAN,CAAYgL,IAAZ,CAAiBiB,cAAjB,CAAgC,UAACnI,GAAD,EAAMoI,MAAN,EAAiB;AAChD,QAAI,CAACpI,GAAL,EAAU;AACT,YAAOoI,OAAOsH,OAAd;AACA,SAAMxP,SAASxD,OAAOC,MAAP,CAAckW,MAAd,EAAsBzK,MAAtB,EACZ;AACD,qBAAe,OAAKlM,KAAL,CAAWiX,WADzB;AAEC,qBAAe/K,OAAOgL,WAAP,CAAmBhV,GAAnB,CAAuB,UAACrB,IAAD;AAAA,cAASA,KAAKsW,QAAL,EAAT;AAAA,OAAvB,CAFhB;AAGD,mBAAcjL,OAAO,WAAP,KAAqB,IAArB,IAA2BA,OAAO,WAAP,KAAqB,EAAhD,GAAmD,CAAnD,GAAqD,sBAAOA,OAAO,WAAP,EAAoB5D,MAApB,CAA2B,YAA3B,CAAP,EAAiD,YAAjD,EAA+DsE,OAA/D,EAHlE;AAID,iBAAWV,OAAO,SAAP,KAAmB,IAAnB,IAAyBA,OAAO,SAAP,KAAmB,EAA5C,GAA+C,CAA/C,GAAiD,sBAAOA,OAAO,SAAP,EAAkB5D,MAAlB,CAAyB,YAAzB,CAAP,EAA+C,YAA/C,EAA6DsE,OAA7D,EAJ3D;AAKD,4BAAuBV,OAAO,oBAAP,KAA8B,IAA9B,IAAoCA,OAAO,oBAAP,KAA8B,EAAlE,GAAqE,CAArE,GAAuE,sBAAOA,OAAO,oBAAP,EAA6B5D,MAA7B,CAAoC,YAApC,CAAP,EAA0D,YAA1D,EAAwEsE,OAAxE,EAL7F;AAMD,0BAAqBV,OAAO,kBAAP,KAA4B,IAA5B,IAAkCA,OAAO,kBAAP,KAA4B,EAA9D,GAAiE,CAAjE,GAAmE,sBAAOA,OAAO,kBAAP,EAA2B5D,MAA3B,CAAkC,YAAlC,CAAP,EAAwD,YAAxD,EAAsEsE,OAAtE;AANvF,MADY,CAAf;AASA,SAAI5I,OAAOrD,QAAP,IAAiB,IAArB,EAA2B;AAC1B,aAAOqD,OAAOrD,QAAd;AACA;AACDiP,WAAM5P,KAAN,CAAY+D,WAAZ,CAAwBC,MAAxB;AACA;AACD,IAjBD;AAkBA,GAlIkB;;AAElB,SAAKO,KAAL,GAAa;AACHoS,WAAQ;AACP,UAAK,EADE;AAEP,WAAM,EAFC;AAGP,iBAAY,EAHL;AAIP,YAAO,EAJA;AAKP,YAAO,EALA;AAMP,eAAU,EANH;AAOP,gBAAW,EAPJ;AAQP,mBAAc,EARP;AASP,eAAU,EATH;AAUP,mBAAc,EAVP;AAWP,gBAAW,EAXJ;AAYP,iBAAY,EAZL;AAaP,iBAAY,EAbL;AAcP,iBAAY,EAdL;AAeP,iBAAa,IAfN;AAgBP,eAAW,IAhBJ;AAiBP,wBAAmB,EAjBZ;AAkBP,iCAA4B,EAlBrB;AAmBP,kBAAa,EAnBN;AAoBP,yBAAoB,EApBb;AAqBP,yBAAoB,EArBb;AAsBP,kBAAa,EAtBN;AAuBP,mBAAc,EAvBP;AAwBP,sBAAiB,EAxBV;AAyBP,kBAAa,EAzBN;AA0BP,yBAAoB,EA1Bb;AA2BP,8BAAyB,EA3BlB;AA4BP,4BAAuB,EA5BhB;AA6BP,+BAA0B,EA7BnB;AA8BP,mCAA8B,EA9BvB;AA+BP,2BAAsB,EA/Bf;AAgCP,uBAAkB,EAhCX;AAiCP,4BAAuB,EAjChB;AAkCP,8BAAyB,EAlClB;AAmCP,+BAA0B,EAnCnB;AAoCP,8BAAyB,EApClB;AAqCP,0BAAsB,IArCf;AAsCP,wBAAmB,IAtCZ;AAuCP,iCAA4B;AAvCrB,IADL,EAyCC;AACJC,WAAQ,IA1CL,EA0CY;AACxB9R,UAAO,CA3CK,EA2CC;AACbkK,QAAK,GA5CO,CA4CF;AA5CE,GAAb;AAFkB;AAgDlB;;;;4CAEyB5E,S,EAAU0F,W,EAAY;AAAA,OACxCpP,OADwC,GAC7B0J,SAD6B,CACxC1J,OADwC;;AAE/C,OAAIA,OAAJ,EAAa;AACZ,QAAImB,KAAKE,SAAL,CAAerB,OAAf,MAA0BmB,KAAKE,SAAL,CAAe,KAAK/B,KAAL,CAAWU,OAA1B,CAA9B,EAAkE;AACjE,UAAKqE,QAAL,CAAc;AACb4R,cAAQnW,OAAOC,MAAP,CAAc,EAAd,EAAkBC,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAQ;AAAE,cAAOA,KAAKC,QAAL,IAAe,aAAtB;AAAoC,OAAtE,EAAwE,CAAxE,CAAlB;AADK,MAAd;AAGA;AACD;AACD;;;sCAEmB;AAAA,gBACc,KAAKd,KADnB;AAAA,OACZU,OADY,UACZA,OADY;AAAA,OACHoE,KADG,UACHA,KADG;AAAA,OACI8R,MADJ,UACIA,MADJ;;AAEnB,QAAK7R,QAAL,CAAc;AACb4R,YAAQnW,OAAOC,MAAP,CAAc,EAAd,EAAkBC,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AAC3D,YAAOA,KAAKC,QAAL,IAAiB,aAAxB;AACA,KAFyB,EAEvB,CAFuB,CAAlB,CADK;AAIbgE,gBAJa;AAKb8R;AALa,IAAd;AAOA,QAAK5W,KAAL,CAAWiD,KAAX,CAAiB,IAAjB;AACA;;AAQD;;;AAUA;;;AASA;;;AASA;;;;2BAyBS;AAAA,gBACsB,KAAKsB,KAD3B;AAAA,OACDoS,MADC,UACDA,MADC;AAAA,OACOC,MADP,UACOA,MADP;AAAA,OACe5H,GADf,UACeA,GADf;AAAA,OAEDf,iBAFC,GAEoB,KAAKjO,KAAL,CAAWgL,IAF/B,CAEDiD,iBAFC;;AAGR,OAAMmJ,iBAAiB;AACtBC,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETC,SAAI,EAACD,MAAM,CAAP,EAFK;AAGTE,SAAI,EAACF,MAAM,EAAP;AAHK,KADY;AAMtBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXC,SAAI,EAACD,MAAM,EAAP,EAFO;AAGXE,SAAI,EAACF,MAAM,EAAP;AAHO;AANU,IAAvB;AAYA,OAAMI,kBAAkB;AACvBN,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,EAAP,EAFK;AAGTC,SAAI,EAACD,MAAM,EAAP,EAHK;AAITK,SAAI,EAACL,MAAM,EAAP;AAJK,KADa;AAOvBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP,EAFO;AAGXC,SAAI,EAACD,MAAM,EAAP,EAHO;AAIXK,SAAI,EAACL,MAAM,EAAP;AAJO;AAPW,IAAxB;AAfQ,iBA6BuE,KAAKvX,KA7B5E;AAAA,OA6BDU,OA7BC,WA6BDA,OA7BC;AAAA,OA6BQ6D,KA7BR,WA6BQA,KA7BR;AAAA,OA6Be+B,OA7Bf,WA6BeA,OA7Bf;AAAA,OA6BwB7B,cA7BxB,WA6BwBA,cA7BxB;AAAA,OA6BwCG,OA7BxC,WA6BwCA,OA7BxC;AAAA,OA6BiDE,KA7BjD,WA6BiDA,KA7BjD;AAAA,OA6BwDmS,WA7BxD,WA6BwDA,WA7BxD;;AA8BR,OAAIZ,UAAU3V,QAAQC,QAAR,IAAkB,IAAlB,IAAwBD,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAQ;AAAC,WAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,IAA/D,EAAiE,CAAjE,CAAtC,CA9BQ,CA8BoG;AAC5G,OAAMoV,cAAcG,QAAQ1V,QAAR,IAAkB,IAAlB,GAAuB0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AAC1E,WAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,UAAK+N,MAAM7U,EADa;AAExBH,WAAMgV,MAAM7M,QAFY;AAGxBP,aAAQ,MAHgB;AAIxB1G,UAAK8T,MAAM5M,QAJa;AAKxBF,aAAQ8M,MAAM9M,MALU;AAMxBC,eAAS6M,MAAM7M,QANS;AAOxBC,eAAU4M,MAAM5M,QAPQ;AAQxBjI,SAAI6U,MAAM7U;AARc,KAAlB,CAAP;AAUA,IAX0C,CAAvB,GAWf,EAXL;AAYA,OAAMoW,QAAQ,EAAd;AACA,UACC;AAAC,cAAD;AAAA,MAAM,cAAN,EAAe,WAAU,IAAzB,EAA8B,OAAO,EAACpJ,OAAO,MAAR,EAArC;AACC;AAAA;AAAA,OAAI,IAAI/N,QAAQe,EAAR,IAAY,QAApB,EAA8B,WAAU,mBAAxC;AAAA;AAAA,KADD;AAEC;AAAA;AAAA,OAAM,WAAU,uBAAhB;AACiBmV,cACG;AAAC,kBAAD;AAAA,QAAQ,WAAWrS,SAAO,CAAP,GAAS,QAAT,GAAkB,EAArC,EAAyC,MAAK,MAA9C,EAAqD,SAAS,KAAKH,WAAnE;AAAiFU,eAAO,CAAP,GAAS,IAAT,GAAc;AAA/F,MADH,GAEG;AAAA;AAAA;AACI;AAAA;AAAA,SAAM,SAAS,KAAK+R,OAApB,EAA6B,WAAU,MAAvC;AAAA;AAAA,OADJ;AAEI;AAAA;AAAA,SAAM,SAAS,KAAKE,YAApB;AAAA;AAAA;AAFJ;AAHpB,KAFD;AAUC;AAAC,eAAD;AAAA,OAAM,WAAWjS,SAAO,CAAP,GAAS,QAAT,GAAkB,WAAnC,EAAgD,WAAWkK,GAA3D,EAAgE,UAAU,KAAKhI,QAA/E;AACC;AAAC,aAAD;AAAA,QAAS,KAAI,sCAAb,EAAsB,KAAI,GAA1B;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0BoQ,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAO,GAAR,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOrV,IAAP,IAAa,EADD;AAE1B4M,kBAAO,CAAC,EAACC,UAAU,IAAX,EAAiBjK,SAAS,SAA1B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SADD;AAWC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,SAAlB,EAA6B;AAC7BG,yBAAcuI,OAAOnD,OAAP,IAAgB,IAAhB,GAAqB,EAArB,GAAwBmD,OAAOnD,OADhB;AAE7BtF,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,WAA7B,EAIA,8BAAC,uBAAD;AACC,iBAAMyS,OAAOnD,OAAP,IAAgB,IAAhB,GAAqB,EAArB,GAAwBmD,OAAOnD,OADtC;AAEC,yBAAc,KAAKpG,YAFpB;AAGC,qBAAUwJ,MAHX,GAJA;AADF;AADD,SAXD;AAwBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,UAAlB,EAA8B;AAC9BG,yBAAcuI,OAAOoB,QAAP,IAAiB,EADD;AAE9B7J,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFuB,WAA9B,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD;AAxBD,QADD;AAoCC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACU,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAO,GAAR,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT;AACC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,6BAAkB,aAAlB,EAAiC;AACjCG,0BAAc6I,eAAa,CAAb,IAAgBA,eAAa,CAA7B,GAA+BjV,IAAIiV,WAAJ,CAA/B,GAAiDN,OAAOO,WAAP,IAAoB,IAApB,GAAyB,EAAzB,GAA4BP,OAAOO,WADjE;AAEjChJ,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAF0B,YAAjC,EAIA,8BAAC,yBAAD;AACC,uBAAU,GADX;AAEC,kBAAK,oBAFN;AAGC,uBAAW,EAHZ;AAIC,mBAAO8T,cAAQC,GAAR,CAAYC,kBAJpB;AAKC,iBAAKC,iBAAOF,GAAP,CAAWC,kBALjB;AAMC,mBAAOjB,eAAa,CAAb,IAAgBA,eAAa,CAA7B,GAA+BjV,IAAIiV,WAAJ,CAA/B,GAAgDN,OAAOO,WAAP,IAAoB,IAApB,GAAyB,EAAzB,GAA4BP,OAAOO,WAN3F;AAOC,qBAAQ,IAPT;AAQC,uBAAU,UARX;AASC,sBAAUN,UAAQK,eAAa,CAArB,IAAwBA,eAAa;AAThD,aAJA;AADF;AADD,UADD;AAqBC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACEhJ,6BAAkB,SAAlB,EAA6B;AAC7BG,0BAAcuI,OAAOyB,OAAP,IAAgB,EADD;AAE7BlK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,YAA7B,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UArBD;AA+BC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAO;AAAA;AAAA;AAAA;AAAA,aAAlB,EAAyC,WAAU,GAAnD;AACE3I,6BAAkB,WAAlB,EAA+B;AAC/BG,0BAAcuI,OAAO0B,SAAP,IAAkB,EADD;AAE/BnK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFwB,YAA/B,EAIA,8BAAC,iBAAD,IAAa,aAAY,oBAAzB,EAA+B,UAAU0S,MAAzC,EAAiD,WAAU,GAA3D,GAJA;AADF;AADD,UA/BD;AAyCC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,kCAAjB,EAA4B,WAAU,GAAtC;AACE3I,6BAAkB,WAAlB,EAA+B;AAC/BG,0BAAcuI,OAAO2B,SAAP,IAAkB,EADD;AAE/BpK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,QAA3B,EAAD;AAFwB,YAA/B,EAIA,8BAAC,iBAAD,IAAa,aAAY,oBAAzB,EAA+B,UAAU0S,MAAzC,EAAiD,WAAU,GAA3D,GAJA;AADF;AADD;AAzCD,SADD;AAqDC;AAAC,kBAAD;AAAA,WAAK,IAAI,CAAT;AACC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,6BAAkB,aAAlB,EAAiC;AACjCG,0BAAcuI,OAAOrL,WAAP,IAAoB,EADD;AAEjC4C,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAF0B,YAAjC,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD;AADD;AArDD,QApCD;AAsGC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACU,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAO,GAAR,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,4BAAkB,WAAlB,EAA+B;AAC/BG,yBAAcuI,OAAO4B,SAAP,IAAkB,EADD;AAE/BrK,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFwB,WAA/B,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SADD;AAWC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,WAAlB,EAA+B;AAC/BG,yBAAcuI,OAAOhJ,SAAP,IAAkB,IAAlB,IAAwBgJ,OAAOhJ,SAAP,IAAkB,CAA1C,GAA4C,EAA5C,GAA+C,sBAAO,sBAAOgJ,OAAOhJ,SAAd,EAAyBrF,MAAzB,CAAgC,YAAhC,CAAP,EAAsD,YAAtD,CAD9B;AAE/B4F,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFwB,WAA/B,EAIA,8BAAC,gBAAD;AACC,sBAAU,GADX;AAEC,wBAAY,oBAFb;AAGC,mBAAO,YAHR;AAIC,qBAAU0S,MAJX,GAJA;AADF;AADD,SAXD;AAyBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,SAAlB,EAA6B;AAC7BG,yBAAcuI,OAAOnJ,OAAP,IAAgB,IAAhB,IAAsBmJ,OAAOnJ,OAAP,IAAgB,CAAtC,GAAwC,EAAxC,GAA2C,sBAAO,sBAAOmJ,OAAOnJ,OAAd,EAAuBlF,MAAvB,CAA8B,YAA9B,CAAP,EAAoD,YAApD,CAD5B;AAE7B4F,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,WAA7B,EAIA,8BAAC,gBAAD;AACC,mBAAO,YADR;AAEC,sBAAU,GAFX;AAGC,wBAAY,oBAHb;AAIC,qBAAU0S,MAJX,GAJA;AADF;AADD;AAzBD,QAtGD;AA8IC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACU,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAO,GAAR,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT;AACC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,6BAAkB,kBAAlB,EAAsC;AACtCG,0BAAcuI,OAAO6B,gBAAP,IAAyB,EADD;AAEtCtK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAF+B,YAAtC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UADD;AAWC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,6BAAkB,2BAAlB,EAA+C;AAC/CG,0BAAcuI,OAAO8B,yBAAP,IAAkC,EADD;AAE/CvK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFwC,YAA/C,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UAXD;AAqBC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,6BAAkB,YAAlB,EAAgC;AAChCG,0BAAcuI,OAAO+B,UAAP,IAAmB,EADD;AAEhCxK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFyB,YAAhC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UArBD;AA+BC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,6BAAkB,mBAAlB,EAAuC;AACvCG,0BAAcuI,OAAOgC,iBAAP,IAA0B,EADD;AAEvCzK,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFgC,YAAvC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD;AA/BD,SADD;AA2CC;AAAC,kBAAD;AAAA,WAAK,IAAI,CAAT;AACC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,gCAAjB,EAAyB,WAAU,GAAnC;AACE3I,6BAAkB,UAAlB,EAA8B;AAC9BG,0BAAcuI,OAAOiC,QAAP,IAAiB,EADD;AAE9B1K,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,UAA3B,EAAD;AAFuB,YAA9B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD;AADD;AA3CD,QA9ID;AAsMC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACU,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAO,GAAR,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT;AACC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,6BAAkB,mBAAlB,EAAuC;AACvCG,0BAAcuI,OAAOkC,iBAAP,IAA0B,EADD;AAEvC3K,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFgC,YAAvC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UADD;AAWC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,6BAAkB,YAAlB,EAAgC;AAChCG,0BAAcuI,OAAOmC,UAAP,IAAmB,EADD;AAEhC5K,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFyB,YAAhC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UAXD;AAqBC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,gCAAjB,EAA0B,WAAU,GAApC;AACE3I,6BAAkB,aAAlB,EAAiC;AACjCG,0BAAcuI,OAAOoC,WAAP,IAAoB,EADD;AAEjC7K,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,UAA3B,EAAD;AAF0B,YAAjC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,UArBD;AA+BC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,6BAAkB,gBAAlB,EAAoC;AACpCG,0BAAcuI,OAAOqC,cAAP,IAAuB,EADD;AAEpC9K,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAF6B,YAApC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD;AA/BD,SADD;AA2CC;AAAC,kBAAD;AAAA,WAAK,IAAI,CAAT;AACC;AAAC,mBAAD;AAAA,YAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,qBAAD,CAAM,IAAN;AAAA,aAAW,OAAM,4CAAjB,EAA2B,WAAU,GAArC;AACE3I,6BAAkB,YAAlB,EAAgC;AAChCG,0BAAcuI,OAAOsC,UAAP,IAAmB,EADD;AAEhC/K,mBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,YAA3B,EAAD;AAFyB,YAAhC,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD;AADD;AA3CD;AAtMD;AADD,MADD;AAkQC;AAAC,aAAD;AAAA,QAAS,KAAI,sCAAb,EAAsB,KAAI,GAA1B;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0Be,eAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACL,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAO,GAAR,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,4BAAkB,mBAAlB,EAAuC;AACvCG,yBAAcuI,OAAOuC,iBAAP,IAA0B,EADD;AAEvChL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFgC,WAAvC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SADD;AAWC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB,EAA0B,WAAU,GAApC;AACE3I,4BAAkB,wBAAlB,EAA4C;AAC5CG,yBAAcuI,OAAOwC,sBAAP,IAA+B,EADD;AAE5CjL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,WAA3B,EAAD;AAFqC,WAA5C,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SAXD;AAqBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,sBAAlB,EAA0C;AAC1CG,yBAAcuI,OAAOyC,oBAAP,IAA6B,EADD;AAE1ClL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmC,WAA1C,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SArBD;AA+BC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,yBAAlB,EAA6C;AAC7CG,yBAAcuI,OAAO0C,uBAAP,IAAgC,EADD;AAE7CnL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsC,WAA7C,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SA/BD;AAyCC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,kDAAjB,EAA4B,WAAU,GAAtC;AACE3I,4BAAkB,6BAAlB,EAAiD;AACjDG,yBAAcuI,OAAO2C,2BAAP,IAAoC,EADD;AAEjDpL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,aAA3B,EAAD;AAF0C,WAAjD,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SAzCD;AAmDC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,gCAAjB,EAAyB,WAAU,GAAnC;AACE3I,4BAAkB,qBAAlB,EAAyC;AACzCG,yBAAcuI,OAAO4C,mBAAP,IAA4B,EADD;AAEzCrL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,UAA3B,EAAD;AAFkC,WAAzC,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SAnDD;AA6DC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0DAAjB,EAA+B,WAAU,GAAzC;AACE3I,4BAAkB,iBAAlB,EAAqC;AACrCG,yBAAcuI,OAAO6C,eAAP,IAAwB,EADD;AAErCtL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,YAA3B,EAAD;AAF8B,WAArC,EAIA,8BAAC,iBAAD,IAAa,aAAY,oBAAzB,EAA+B,UAAU0S,MAAzC,EAAiD,WAAU,GAA3D,GAJA;AADF;AADD,SA7DD;AAuEC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,wDAAjB,EAA6B,WAAU,GAAvC;AACE3I,4BAAkB,sBAAlB,EAA0C;AAC1CG,yBAAcuI,OAAO8C,oBAAP,IAA6B,EADD;AAE1CvL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,cAA3B,EAAD;AAFmC,WAA1C,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SAvED;AAiFC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,wDAAjB,EAA6B,WAAU,GAAvC;AACE3I,4BAAkB,wBAAlB,EAA4C;AAC5CG,yBAAcuI,OAAO+C,sBAAP,IAA+B,EADD;AAE5CxL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,cAA3B,EAAD;AAFqC,WAA5C,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SAjFD;AA2FC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,8CAAjB,EAA6B,WAAU,GAAvC;AACE3I,4BAAkB,yBAAlB,EAA6C;AAC7CG,yBAAcuI,OAAOgD,uBAAP,IAAgC,EADD;AAE7CzL,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,WAA3B,EAAD;AAFsC,WAA7C,EAIA,8BAAC,iBAAD,IAAa,aAAY,oBAAzB,EAA+B,UAAU0S,MAAzC,EAAiD,WAAU,GAA3D,GAJA;AADF;AADD,SA3FD;AAqGC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,8CAAjB,EAA8B,WAAU,GAAxC;AACE3I,4BAAkB,wBAAlB,EAA4C;AAC5CG,yBAAcuI,OAAOiD,sBAAP,IAA+B,EADD;AAE5C1L,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,WAA3B,EAAD;AAFqC,WAA5C,EAIA,8BAAC,iBAAD,IAAa,aAAY,oBAAzB,EAA+B,UAAU0S,MAAzC,EAAiD,WAAU,GAA3D,GAJA;AADF;AADD,SArGD;AA+GC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB,EAA2B,WAAU,GAArC;AACE3I,4BAAkB,2BAAlB,EAA+C;AAC/CG,yBAAcuI,OAAOkD,yBAAP,IAAkC,EADD;AAE/C3L,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,WAA3B,EAAD;AAFwC,WAA/C,EAIA;AAAC,uBAAD;AAAA;AACC,yBAAY,oBADb;AAEC,sBAAU0S,MAFX;AAGC,uBAAU,GAHX;AAIC;AAAC,kBAAD;AAAA,cAAQ,OAAM,8GAAd,EAAmC,OAAM,8GAAzC;AAAA;AAAA,YAJD;AAKC;AAAC,kBAAD;AAAA,cAAQ,OAAM,oEAAd,EAA4B,OAAM,oEAAlC;AAAA;AAAA,YALD;AAMC;AAAC,kBAAD;AAAA,cAAQ,OAAM,8GAAd,EAAmC,OAAM,8GAAzC;AAAA;AAAA;AAND,WAJA;AADF;AADD,SA/GD;AAgIC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,4BAAkB,oBAAlB,EAAwC;AACxCG,yBAAcuI,OAAOmD,kBAAP,IAA2B,IAA3B,IAAiCnD,OAAOmD,kBAAP,IAA2B,CAA5D,GAA8D,EAA9D,GAAiE,sBAAO,sBAAOnD,OAAOmD,kBAAd,EAAkCxR,MAAlC,CAAyC,YAAzC,CAAP,EAA+D,YAA/D,CADvC;AAExC4F,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFiC,WAAxC,EAIA,8BAAC,gBAAD;AACC,sBAAU,GADX;AAEC,mBAAO,YAFR;AAGC,wBAAY,oBAHb;AAIC,qBAAU0S,MAJX,GAJA;AADF;AADD,SAhID;AA8IC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAyB,WAAU,GAAnC;AACE3I,4BAAkB,kBAAlB,EAAsC;AACtCG,yBAAcuI,OAAOoD,gBAAP,IAAyB,IAAzB,IAA+BpD,OAAOoD,gBAAP,IAAyB,CAAxD,GAA0D,EAA1D,GAA6D,sBAAO,sBAAOpD,OAAOoD,gBAAd,EAAgCzR,MAAhC,CAAuC,YAAvC,CAAP,EAA6D,YAA7D,CADrC;AAEtC4F,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAF+B,WAAtC,EAIA,8BAAC,gBAAD;AACC,sBAAU,GADX;AAEC,mBAAO,YAFR;AAGC,wBAAY,oBAHb;AAIC,qBAAU0S,MAJX,GAJA;AADF;AADD;AA9ID;AADD;AADD;AAlQD,KAVD;AA8aC;AAAA;AAAA,OAAK,WAAW9R,SAAO,CAAP,IAAWpE,QAAQe,EAAR,IAAY,IAAZ,IAAkBf,QAAQe,EAAR,IAAY,EAAzC,GAA6C,QAA7C,GAAsD,IAAtE;AACC,mCAAC,kBAAD;AACC,sBAAgBgD,cADjB;AAEC,eAASG,OAFV;AAGC,gBAAUsR,WAHX;AAIC,gBAAUU,MAJX;AAKC,WAAKP,QAAQ5U,EALd;AAMC,iBAAW4U,QAAQhS,SANpB;AAOC,eAASiC;AAPV,OADD;AAUC;AAAA;AAAA,QAAM,OAAO;AACZ6O,kBAAU,UADE;AAEZC,cAAM,MAFM;AAGZC,aAAK,KAHO;AAIZ1K,kBAAS,MAJG;AAKZC,eAAO;AALK,QAAb;AAAA;AAAA;AAVD;AA9aD,IADD;AAmcA;;;;EApnBiChE,gBAAMC,S;kBAApB/G,K;;;;;;;;;;;;;;;;;;;;kBCpBrB;;;;;;AAIA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;IAAYF,K;;AACZ;;;;AACA;;IAAaD,I;;;;;;;;;;;;;;IACLyU,O,GAAYD,W,CAAZC,O;IAGF4F,Q,WAFL9O,WAAKC,MAAL,E,oBACApL,mB;;;AAEA,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,mHACZA,KADY;;AAAA,SAkEnB+W,YAlEmB,GAkEJ,UAAC5K,CAAD,EAAO;AACrBA,KAAE6K,cAAF;AACA,OAAIpH,cAAJ;AAFqB,OAGdqK,WAHc,GAGCrK,MAAMrL,KAHP,CAGd0V,WAHc;;AAIrBrK,SAAM5P,KAAN,CAAYgL,IAAZ,CAAiBkP,uBAAjB,CAAyC,UAACpW,GAAD,EAAMoI,MAAN,EAAiB;AACzD,QAAI,CAACpI,GAAL,EAAU;AACT8L,WAAM5P,KAAN,CAAYgF,SAAZ,CAAsBiV,WAAtB;AACA,YAAKlV,QAAL,CAAc;AACb6R,cAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,MAAd;AAGA;AACD,IAPD;AAQA,GA9EkB;;AAAA,SAiFnBuD,SAjFmB,GAiFP,UAACC,QAAD,EAAWpL,GAAX,EAAmB;AAAA,OACvBiL,WADuB,GACR,OAAK1V,KADG,CACvB0V,WADuB;;AAE9B,OAAI5K,UAAU,EAAd;AACA+K,YAAStG,OAAT,CAAiB,gBAAQ;AAAA,QACnB9E,GADmB,GACMnO,IADN,CACnBmO,GADmB;AAAA,QACdrO,QADc,GACME,IADN,CACdF,QADc;AAAA,QACDqB,GADC,4BACMnB,IADN;;AAExBwO,YAAQxF,IAAR,CAAa7H,GAAb;AACA,IAHD;AAIA,OAAIqY,eAAeJ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B;AAAA,WAAQC,KAAKC,QAAL,KAAkB,OAA1B;AAAA,IAA5B,EAA+D,CAA/D,CAAnB;AACAuZ,kBAAe7Z,OAAOC,MAAP,CAAc4Z,YAAd,EAA4B,EAAC,YAAYD,QAAb,EAA5B,CAAf;AACA,OAAIE,eAAeL,YAAYtZ,QAA/B;AACA,OAAM4Z,aAAaD,aAAa9K,SAAb,CAAuB,gBAAQ;AACjD,WAAO3O,KAAKC,QAAL,KAAkB,OAAzB;AACA,IAFkB,CAAnB;AAGAwZ,gBAAaC,UAAb,IAA2BF,YAA3B;AACA,UAAKtV,QAAL,CAAc,EAACkV,aAAazZ,OAAOC,MAAP,CAAcwZ,WAAd,EAA2B,EAAC,YAAYK,YAAb,EAA3B,CAAd,EAAd;AACA,GAhGkB;;AAAA,SAmGnBlW,WAnGmB,GAmGL,YAAM;AACnB,UAAKW,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,IAAd;AAGA,UAAK5W,KAAL,CAAW6E,WAAX,CAAuB,UAAvB,EAAmCyH,OAAO,OAAKtM,KAAL,CAAW8E,KAAlB,IAA2B,CAA9D;AACA,GAxGkB;;AAAA,SA2GnB+R,OA3GmB,GA2GT,YAAM;AACf,UAAK7W,KAAL,CAAWgL,IAAX,CAAgB8L,WAAhB;AACA,UAAK/R,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,IAAd;AAGA,GAhHkB;;AAAA,SAmHnB4D,aAnHmB,GAmHH,YAAM;AACrB,UAAKzV,QAAL,CAAc;AACb0V,eAAW;AADE,IAAd,EAEE,YAAI;AACLC,eAAW,YAAI;AACD,YAAK3V,QAAL,CAAc;AACb0V,iBAAW;AADE,MAAd,EAEG,YAAI;AACN;AACA,aAAKra,KAAL,CAAWua,uBAAX,GAAqCta,IAArC,CAA0C,UAAC4D,GAAD,EAAO;AAAA,WACnC6J,KADmC,GACjB7J,GADiB,CACnC6J,KADmC;AAAA,WAC5BzJ,SAD4B,GACjBJ,GADiB,CAC5BI,SAD4B;;AAE1C,WAAIA,cAAY,IAAZ,IAAkBA,cAAY,EAAlC,EAAsC;AACrC,YAAI7B,MAAM,yDAAoD6B,SAApD,IAAgE,QAAhE,SAA4EyJ,KAA5E,CAAV;AACA8M,eAAOC,IAAP,CAAYrY,GAAZ,EAAiB,OAAjB;AACA,QAHD,MAGO;AACL,eAAKsY,WAAL;AACA,eAAO,KAAP;AACD;AACP,OATD;AAUA,MAdD;AAeb,KAhBD,EAgBG,IAhBH;AAiBA,IApBD;AAqBA,GAzIkB;;AAAA,SA2InBC,eA3ImB,GA2ID,YAAM;AACvB,UAAKhW,QAAL,CAAc;AACbiW,iBAAa,CAAC,OAAKzW,KAAL,CAAWyW;AADZ,IAAd;AAGA,GA/IkB;;AAAA,SAiJnBC,YAjJmB,GAiJJ,UAACC,OAAD,EAAa;AAC3B,UAAOA,WAAWA,UAAU,wBAASC,KAAT,CAAe,KAAf,CAA5B,CAD2B,CACyB;AACpD,GAnJkB;;AAAA,SAsJnB/N,YAtJmB,GAsJJ,UAAC1B,OAAD,EAAW;AAAA,OAClBuO,WADkB,GACH,OAAK1V,KADF,CAClB0V,WADkB;AAEzB;;AACA,OAAMmB,cAAc5a,OAAOC,MAAP,CAAc,EAAd,EAAkBwZ,WAAlB,EAA+B,EAACzG,SAAQ9H,OAAT,EAA/B,CAApB;AACA;AACA,OAAInL,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC6a,WAAzC,CAAtB;AACA,GA7JkB;;AAAA,SA+JnBC,cA/JmB,GA+JF,UAACnO,KAAD,EAAW;AAAA,OACpBoO,UADoB,GACR,OAAKlb,KADG,CACpBkb,UADoB;;AAE3B,OAAMtO,MAAM,sBAAOE,KAAP,EAAc5E,MAAd,CAAqB,YAArB,CAAZ;AACA,OAAM/B,SAAS5G,KAAK8G,IAAL,CAAU6U,UAAV,EAAsBC,QAAtB,CAA+BvO,GAA/B,CAAf;AACA,UACC;AACC,eAAWzG,SAAO,EAAP,GAAU,QADtB;AAEC,WAAO,EAAC4O,UAAU,UAAX,EAAuB,OAAO,MAA9B,EAFR;AAGC,YAAK,MAHN;AAIC,YAAO,MAJR;AAKC,SAAI,0BALL,EAKgC,KAAI,EALpC,GADD;AAQA,GA3KkB;;AAAA,SA6KnB2F,WA7KmB,GA6KL,YAAM;AACnB1G,WAAQ;AACP3J,eAAW,aADJ;AAEP;AACA+Q,UAAM,IAHC;AAIP1N,WAAO,cAJA;AAKPyH,aAAS,EALF;AAMPhB,QANO,kBAMA;AACN,SAAI/R,MAAM,6CAAV;AACAoY,YAAOC,IAAP,CAAYrY,GAAZ,EAAiB,OAAjB;AACA,KATM;AAUPgS,YAVO,sBAUI,CAEV,CAZM;;AAaPH,YAAQ,MAbD;AAcPC,gBAAY;AAdL,IAAR;AAgBA,GA9LkB;;AAElB,SAAKlU,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZqS,WAAQ,IADI,EACG;AACf7H,eAAY,EAFA,EAEM;AAClBkL,gBAAa,EAHD,EAGK;AACjBvX,QAAK,EAJO,EAIC;AACb2B,cAAW,EALC,EAKG;AACfoX,gBAAa,EAND,EAMK;AACjBT,gBAAa,KAPD;AAQZP,cAAW;AARC,GAAb;AAHkB;AAalB;;;;4CAEyBrQ,S,EAAW;AAAA;;AAAA,OAC7B7J,QAD6B,GACP6J,SADO,CAC7B7J,QAD6B;AAAA,OACnBmK,QADmB,GACPN,SADO,CACnBM,QADmB;;AAEpC,OAAI,QAAOnK,QAAP,yCAAOA,QAAP,MAAmB,QAAnB,IAA+BC,OAAOqS,IAAP,CAAYtS,QAAZ,EAAsBmG,MAAtB,KAAiC,CAAhE,IAAqEnG,aAAa,KAAKP,KAAL,CAAWO,QAAjG,EAA2G;AAC1G,QAAIA,SAASI,QAAT,KAAsB,IAA1B,EAAgC;AAAE;AACjC,UAAKoE,QAAL,CAAc;AACbgK,kBAAY;AADC,MAAd;AAGA,KAJD,MAIO;AAAG;AACT,SAAMA,aAAaxO,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,aAAUA,KAAKC,QAAL,IAAiB,OAA3B;AAAA,MAAzB,EAA6D,CAA7D,EAAgEH,QAAnF;AACA,UAAKoE,QAAL,CAAc;AACbgK,4BADa;AAEbkL,mBAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkBF,QAAlB,CAFA,EAE+B;AAC5CmC,WAAKnC,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAA3B;AAAA,OAAzB,EAA6D,CAA7D,EAAgEW,EAHxD;AAIb4C,iBAAW9D,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAA3B;AAAA,OAAzB,EAA6D,CAA7D,EAAgEuD;AAC3E;AALa,MAAd,EAMG,YAAM;AACR;AACA,UAAIqX,OAAOnb,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,MAA3B;AAAA,OAAzB,EAA4D,CAA5D,CAAX;AACA,UAAIN,OAAOqS,IAAP,CAAY,OAAKtO,KAAL,CAAWkX,WAAvB,EAAoC/U,MAApC,GAA6C,CAAjD,EAAoD;AACnD;AACA,WAAI+U,cAAc5Z,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWkX,WAA1B,CAAX,CAAlB;AACA,cAAK1W,QAAL,CAAc;AACb0W,qBAAa7b,MAAM+E,cAAN,CAAqB8W,WAArB,EAAkC,QAAlC,EAA4CC,IAA5C;AADA,QAAd;AAGA;AACD,MAhBD;AAiBA;AACD;AACD;;;sCAEmB;AAAA,gBACU,KAAK1b,KADf;AAAA,OACZO,QADY,UACZA,QADY;AAAA,OACFmK,QADE,UACFA,QADE;;AAEnB,OAAI,QAAOnK,QAAP,yCAAOA,QAAP,MAAmB,QAAnB,IAA+BC,OAAOqS,IAAP,CAAYtS,QAAZ,EAAsBmG,MAAtB,KAAiC,CAApE,EAAuE;AACtE,QAAInG,SAASI,QAAT,KAAsB,IAA1B,EAAgC;AAAE;AACjC,UAAKoE,QAAL,CAAc;AACbgK,kBAAY;AADC,MAAd;AAGA,KAJD,MAIO;AAAG;AACT,SAAMA,aAAaxO,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,aAAUA,KAAKC,QAAL,IAAiB,OAA3B;AAAA,MAAzB,EAA6D,CAA7D,EAAgEH,QAAnF;AACA,UAAKoE,QAAL,CAAc;AACbgK,4BADa;AAEbkL,mBAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkBF,QAAlB,CAFA;AAGbmC,WAAKnC,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAA3B;AAAA,OAAzB,EAA6D,CAA7D,EAAgEW,EAHxD;AAIb4C,iBAAW9D,SAASI,QAAT,CAAkBC,MAAlB,CAAyB,UAACC,IAAD;AAAA,cAAUA,KAAKC,QAAL,IAAiB,OAA3B;AAAA,OAAzB,EAA6D,CAA7D,EAAgEuD;AAC3E;AALa,MAAd;AAOA;AACD;AACD;;AAED;;;AAeA;;;AAkBA;;;AAQA;;;AAQA;;;AAmCA;;;;2BA2CS;AACR,OAAIuL,QAAQ,IAAZ;AADQ,OAED3B,iBAFC,GAEoB2B,MAAM5P,KAAN,CAAYgL,IAFhC,CAEDiD,iBAFC;AAAA,iBAGgB,KAAKjO,KAHrB;AAAA,OAGD8E,KAHC,WAGDA,KAHC;AAAA,OAGMyB,MAHN,WAGMA,MAHN;;AAIR,OAAM6Q,iBAAiB;AACtBC,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADY;AAKtBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP;AAFO;AALU,IAAvB;AAJQ,gBAcmB,KAAKnX,KAdxB;AAAA,OAcDmE,KAdC,UAcDA,KAdC;AAAA,OAcMF,SAdN,UAcMA,SAdN;AAAA,qBAemDuL,MAAMrL,KAfzD;AAAA,OAeDkW,SAfC,eAeDA,SAfC;AAAA,OAeUO,WAfV,eAeUA,WAfV;AAAA,OAeuBpE,MAfvB,eAeuBA,MAfvB;AAAA,OAe+BqD,WAf/B,eAe+BA,WAf/B;AAAA,OAe4CvX,GAf5C,eAe4CA,GAf5C;;AAgBR,OAAIiZ,oBAAoB1B,YAAYtZ,QAAZ,IAAwB,IAAxB,IAAgCsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,IAAoC,IAApE,GAA2EsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAAnG,GAA8G,EAAtI;;AAEA,UACC;AAAC,cAAD;AAAA,MAAM,cAAN,EAAe,OAAO,EAAC8N,OAAO,MAAR,EAAtB,EAAuC,WAAU,MAAjD;AACC;AAAC,eAAD;AAAA,OAAM,KAAK,aAAX,EAA0B,UAAUgM,SAApC,EAA+C,OAAO,IAAtD;AACA;AAAA;AAAA,QAAI,IAAIR,YAAYxY,EAApB,EAAwB,WAAU,mBAAlC;AAAA;AAAA;AADA,KADD;AAGC;AAAA;AAAA,OAAM,WAAU,uBAAhB;AACkBmV,cACA;AAAC,kBAAD;AAAA,QAAQ,UAAUrQ,MAAlB,EAA0B,WAAWhC,SAAS,CAAT,GAAa,QAAb,GAAwB,EAA7D,EAAiE,MAAK,MAAtE;AACQ,gBAAS,KAAKH,WADtB;AACoCU,eAAS,CAAT,GAAa,IAAb,GAAoB;AADxD,MADA,GAGA;AAAA;AAAA;AACC;AAAA;AAAA,SAAM,SAAS,KAAK+R,OAApB,EAA6B,WAAU,MAAvC;AAAA;AAAA,OADD;AAEC;AAAA;AAAA,SAAM,SAAS,KAAKE,YAApB;AAAA;AAAA;AAFD;AAJlB,KAHD;AAYC;AAAC,eAAD;AAAA,gBAAM,WAAWjS,SAAS,CAAT,GAAa,QAAb,GAAwB,UAAzC,EAAqD,QAAO,QAA5D,IAAyEsS,cAAzE;AACC;AAAC,eAAD;AAAA,QAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb;AACC;AAAC,gBAAD;AAAA,SAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,kBAAD,CAAM,IAAN;AAAA,UAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE7J,0BAAkB,SAAlB,EAA6B;AAC7BG,uBAAc6L,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAAZ,CAAoBtR,GAApB,CAAwB;AAAA,iBAAMrB,KAAKoM,MAAX;AAAA,UAAxB,CAD3B;AAE7BiB,gBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,SAA7B,EAIA,8BAAC,uBAAD;AACC,eAAM+V,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAD7D;AAEC,uBAAc,KAAKpG,YAFpB;AAGC,mBAAUwJ;AAHX,UAJA;AADF;AADD,OADD;AAeC;AAAC,gBAAD;AAAA,SAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AACC,eAAM,MADP;AAEC,gBAAO,MAFR;AAGC,eAAO,EAACgF,eAAe,QAAhB,EAHR;AAIC,aAAI,uBAJL,GADD;AAMC,kDAND;AAOC;AAAC,sBAAD;AAAA;AACC,kBAASZ,WADV;AAEC,0BAAiB,KAAKD,eAFvB;AAGC,kBAAS;AAAA;AAAA,YAAK,OAAO;AACpBtM,mBAAO,GADa;AAEpBwK,wBAAY,MAFQ;AAGpB4C,oBAAQ,mBAHY;AAIpBC,0BAAc;AAJM,YAAZ;AAMR,wCAAC,cAAD;AACC,yBAAc,KAAKb,YADpB;AAEC,2BAAgB,KAAKI,cAFtB;AAGC,uBAAY,KAHb;AAIC,qBAAU,KAAKb,aAJhB;AANQ,UAHV;AAeC;AAAA;AAAA,WAAG,WAAU,mBAAb,EAAiC,SAAS;AAAA,kBAAKrO,EAAE6K,cAAF,EAAL;AAAA,WAA1C;AAAA;AAAA;AAfD;AAPD;AAfD;AADD,KAZD;AA0DElS,aAAS,CAAT,GAAa,IAAb,GAAoB,8BAAC,uBAAD;AACpB,iBAAY6W,iBADQ;AAEpB,eAAU,KAAKxB,SAFK;AAGpB,gBAAW9V,SAHS;AAIpB,UAAK3B,GAJe;AAKpB,eAAUkU,MALU;AAMpB,YAAO,KAAKxW,KANQ;AAOpB,qBAAgB,KAAKJ,KAAL,CAAWyE,cAPP;AAQpB,cAAS,KAAKzE,KAAL,CAAW4E,OARA;AASpB,cAAS,KAAK5E,KAAL,CAAWsG;AATA;AA1DtB,IADD;AAwEA;;;;EA3RqBM,gBAAMC,S;kBA+RdmT,Q;;;;;;;;;;;;;;;;;;;;AC3Sf;;;;AACA;;AACA;;AAeA;;;;AACA;;;;AACA;;;;AACA;;IAAara,I;;AACb;;IAAYC,K;;AACZ;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;6NA3BA;;;;;AA6BA,IAAIwS,cAAc,KAAlB;IACOrB,M,GAAUC,Y,CAAVD,M;;AACP,IAAMlG,kBAAkBjE,gBAAMkE,aAAN,EAAxB;AACA,IAAMC,cAAc,SAAdA,WAAc;AAAA,KAAEC,IAAF,QAAEA,IAAF;AAAA,KAAQrE,KAAR,QAAQA,KAAR;AAAA,KAAkB3G,KAAlB;;AAAA,QACnB;AAAC,iBAAD,CAAiB,QAAjB;AAAA,IAA0B,OAAOgL,IAAjC;AACC,sCAAQhL,KAAR;AADD,EADmB;AAAA,CAApB;AAKA,IAAMiL,kBAAkBC,WAAKC,MAAL,GAAcJ,WAAd,CAAxB;AACA,IAAMgR,cAAc,EAAC,GAAG,KAAJ,EAAW,GAAG,KAAd,EAApB,C,CAA2C;;;AAG3C;;IACMvQ,Y;;;;;;;;;;;;;;qMACLjH,K,GAAQ;AACPkH,YAAS,IADF,EACQ;AACfC,YAAS;AAFF,G,SAIRC,U,GAAa,YAAM;AAClB,OAAMF,UAAU,CAAC,OAAKlH,KAAL,CAAWkH,OAA5B;AACA,UAAK1G,QAAL,CAAc,EAAC0G,gBAAD,EAAd,EAAyB,YAAM;AAC9B,QAAIA,OAAJ,EAAa;AACZ,YAAKG,KAAL,CAAWC,KAAX;AACA;AACD,IAJD;AAKA,G,SACDC,I,GAAO,aAAK;AAAA,sBACkB,OAAK9L,KADvB;AAAA,OACJ+L,MADI,gBACJA,MADI;AAAA,OACIC,UADJ,gBACIA,UADJ;;AAEX,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAI1H,SAASA,MAAM2H,EAAEC,aAAF,CAAgB3K,EAAtB,CAAb,EAAwC;AACvC;AACA;AACD;AACA,WAAOyK,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IATD;AAUA,G,SAEDM,Q,GAAW,UAACC,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACH,OAAK1M,KADF;AAAA,OACzB+L,MADyB,iBACzBA,MADyB;AAAA,OACjBC,UADiB,iBACjBA,UADiB;;AAEhC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,WAAtB,CAAJ,EAAwC;AACvCT,YAAO,WAAP,IAAsB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAAtB;AACA;AACD,WAAOV,OAAO,SAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDW,S,GAAY,UAACJ,IAAD,EAAOC,UAAP,EAAsB;AAAA,uBACJ,OAAK1M,KADD;AAAA,OAC1B+L,MAD0B,iBAC1BA,MAD0B;AAAA,OAClBC,UADkB,iBAClBA,UADkB;;AAEjC,UAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAACzH,KAAD,EAAQ0H,MAAR,EAAmB;AAC3C,QAAIA,OAAOS,cAAP,CAAsB,SAAtB,CAAJ,EAAsC;AACrCT,YAAO,SAAP,IAAoB,sBAAOQ,UAAP,EAAmB,YAAnB,EAAiCE,OAAjC,EAApB;AACA;AACD,WAAOV,OAAO,WAAP,CAAP;AACA,WAAOA,OAAO,SAAP,CAAP;AACAF,4BAAeD,MAAf,EAA0BG,MAA1B;AACA,IAPD;AAQA,G,SACDa,e,GAAkB,UAACC,GAAD,EAAMb,CAAN,EAAY;AAAA,uBACA,OAAKnM,KADL;AAAA,OACtB+L,MADsB,iBACtBA,MADsB;AAAA,OACdC,UADc,iBACdA,UADc;;AAE7B,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAIS,EAAEzF,MAAN,EAAc;AACbgF,cAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAU;AACzB,YAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AACA,KAFS,CAAV;AAGA,IAJD,MAIO;AACN+K,cAAU,EAAV;AACA;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAeD,MAAf,EAA0BlD,IAA1B;AACA,G,SAGDuE,Y,GAAe,UAACC,KAAD,EAAW;AAAA,uBACI,OAAKrN,KADT;AAAA,OAClB+L,MADkB,iBAClBA,MADkB;AAAA,OACVC,UADU,iBACVA,UADU;;AAEzB,OAAInD,OAAO,EAAX;AACA,OAAI6C,gBAAJ;AACA,OAAI2B,MAAM3G,MAAV,EAAkB;AACjBgF,cAAU2B,KAAV;AACA,IAFD,MAEO;AACN3B,cAAU,EAAV;AACA;AACD7C,QAAK,SAAL,IAAkB6C,OAAlB;AACAM,2BAAeD,MAAf,EAA0BlD,IAA1B;AACA,G,SACDiE,M,GAAS,YAAM,CAEd;AADA;;AAED;WACAQ,iB,GAAoB,sBAAc;AAAA,OAC1BvB,MAD0B,GAChB,OAAK/L,KADW,CAC1B+L,MAD0B;;AAEjC,OAAI,CAACwB,UAAD,IAAe,CAACxB,OAAOyB,OAA3B,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,WAAWX,OAAX,KAAuBb,OAAOyB,OAAP,CAAeZ,OAAf,EAA9B;AACA,G,SAEDa,e,GAAkB,oBAAY;AAAA,OACtB1B,MADsB,GACZ,OAAK/L,KADO,CACtB+L,MADsB;;AAE7B,OAAI,CAAC2B,QAAD,IAAa,CAAC3B,OAAO4B,SAAzB,EAAoC;AACnC,WAAO,KAAP;AACA;AACD,UAAOD,SAASd,OAAT,MAAsBb,OAAO4B,SAAP,CAAiBf,OAAjB,EAA7B;AACA,G,SACDgB,U,GAAa,gBAAQ;AACpB,UAAK5C,IAAL,GAAYA,IAAZ;AADoB,uBAEmD,OAAKhL,KAFxD;AAAA,OAEbW,QAFa,iBAEbA,QAFa;AAAA,OAEHkN,SAFG,iBAEHA,SAFG;AAAA,OAEQ9B,MAFR,iBAEQA,MAFR;AAAA,OAEgB+B,KAFhB,iBAEgBA,KAFhB;AAAA,OAEuBC,UAFvB,iBAEuBA,UAFvB;AAAA,OAEmCC,YAFnC,iBAEmCA,YAFnC;AAAA,OAGbvC,OAHa,GAGF,OAAKlH,KAHH,CAGbkH,OAHa;;AAIpB,OAAIoC,aAAa,MAAjB,EAAyB;AAAG;AAC3B,WAAOpC,UACN;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACEwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,IADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP;AALoB,MAAlC,EAOA;AAAA;AAAA,QAAK,WAAU,GAAf;AACC,oCAAC,WAAD;AACC,qBAAc9B,OAAO8B,SAAP,CADf;AAEC,YAAK;AAAA,eAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA;AACL;AAHD,SAIC,cAAc,OAAKxC,IAJpB;AAKC,eAAQ,OAAKA;AALd;AADD,MAPA;AADF,KADM,GAqBN;AAAA;AAAA;AACC,iBAAU,0BADX;AAEC,aAAO;AACN4C,cAAO,OADD;AAEND,cAAO,mBAFD;AAGNJ,kBAAW;AAHL,OAFR;AAOC,eAAS,OAAK1C;AAPf;AASEhL;AATF,KArBD;AAiCA,IAlCD,MAkCO,IAAIkN,aAAa,SAAjB,EAA4B;AAAG;AACrC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB,EAA+B,WAAU,GAAzC;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA4B,CAAzD,GAA6D,EAA7D,GAAkEqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAA2B,CAA3B,IAAgCqF,OAAO8B,SAAP,EAAkB3L,GAAlB,CAAsB,UAACrB,IAAD,EAAU;AAC/I,cAAOA,KAAKoM,MAAZ;AACA,OAF+G;AAP9E,MAAlC,EAWA;AAAA;AAAA,QAAK,WAAU,GAAf,EAAmB,KAAK;AAAA,eAAS,OAAKrB,KAAL,GAAa0C,IAAtB;AAAA,QAAxB;AACC,oCAAC,mBAAD;AACC,aAAMvC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,EAAkBnH,MAAlB,IAA4B,CAAzD,GAA6D,EAA7D,GAAkEqF,OAAO8B,SAAP,EAAkBnH,MAAlB,GAA2B,CAA3B,IAAgCqF,OAAO8B,SAAP,CADzG;AAEC,qBAAc,OAAKT,YAFpB;AAGC,iBAAU,CAAC3B;AAHZ;AADD,MAXA;AADgB,KAAX,GAoBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAAC4C,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C,UAHC;AAIdhL;AAJc,KApBjB;AA2BA,IA5BM,MA4BA,IAAIkN,aAAa,WAAjB,EAA8B;AAAE;AACtC;AACA,QAAMU,iBAAiBxC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAlF;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,cAAP,EAAuB,YAAvB;AAPvC,MAAlC,EASA,8BAAC,gBAAD;AACC,aAAO,EAACC,UAAU,OAAX,EADR;AAEC,cAAO,YAFR;AAGC,WAAK;AAAA,cAAS,OAAK5C,KAAL,GAAa0C,IAAtB;AAAA,OAHN;AAIC,gBAAU,OAAK9B;AACf;AALD,QAMC,cAAc,OAAKc;AANpB,OATA;AADgB,KAAX,GAmBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAACe,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C;AAHC;AAKdhL;AALc,KAnBjB;AA2BA,IA9BM,MA8BA,IAAIkN,aAAa,SAAjB,EAA4B;AAAE;AACpC;AACA,QAAMU,kBAAiBxC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAO9B,OAAO8B,SAAP,CAAP,EAA0BvF,MAA1B,CAAiC,YAAjC,CAAlF;AACA,WAAOmD,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AAChBwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CACN;AACCC,iBAAU,KADX;AAECjK,gBAAY4J,KAAZ;AAFD,OADM,CAD2B;AAOlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D,sBAAOU,eAAP,EAAuB,YAAvB;AAPvC,MAAlC,EASA,8BAAC,gBAAD;AACC,aAAO,EAACC,UAAU,OAAX,EADR;AAEC,cAAO,YAFR;AAGC,WAAK;AAAA,cAAS,OAAK5C,KAAL,GAAa0C,IAAtB;AAAA,OAHN;AAIC,gBAAU,OAAKzB;AACf;AALD,QAMC,cAAc,OAAKY;AANpB,OATA;AADgB,KAAX,GAmBU;AAAA;AAAA;AACf,iBAAU,0BADK;AAEf,aAAO,EAACY,WAAW,MAAZ,EAFQ;AAGf,eAAS,OAAK1C;AAHC;AAKdhL;AALc,KAnBjB;AA2BA,IA9BM,MA8BA,IAAIkN,aAAa,MAAjB,EAAyB;AAAG;AAClC,QAAI6G,WAAW3I,OAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC1E,YAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,KAFyC,CAA1C;AAGA,QAAMuR,YAAYqC,YAAY,IAAZ,IAAoBA,SAAShO,MAAT,IAAmB,CAAvC,GAA2C,CAA3C,GAA+CgO,SAAShO,MAA1E;AACA,QAAM9D,SAASyP,YAAY,CAAZ,GAAgB,IAAhB,GAAuB,KAAtC;AACA,WAAO5G,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,iBAAD;AACC,gBAAUjL,MADX;AAEC,WAAK,CAFN;AAGC,WAAK,GAHN;AAIC,WAAK;AAAA,cAAS,OAAKgJ,KAAL,GAAa0C,IAAtB;AAAA,OAJN;AAKC,oBAAc,OAAKxC,IALpB;AAMC,cAAQ,OAAKA;AANd,OAPA;AADe,KAAX,GAkBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL,aALE;AAAA;AAAA,KAlBL;AA0BA,IAhCM,MAgCA,IAAIkN,aAAa,QAAjB,EAA2B;AAAG;AACpC,WAAOpC,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,WAAD;AACC,WAAK;AAAA,cAAS,OAAKjC,KAAL,GAAa0C,IAAtB;AAAA,OADN;AAEC,oBAAc,OAAKxC,IAFpB;AAGC,cAAQ,OAAKA,IAHd;AAIC,mBAAY;AAJb,OAPA;AADe,KAAX,GAgBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL;AALE,KAhBL;AAwBA,IAzBM,MAyBA;AAAG;AACT,QAAM0R,aAAYtG,OAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,CAAgB+F,MAAhB,IAA0B,CAArD,GAAyD,CAAzD,GAA6DqF,OAAOpL,QAAP,CAAgB+F,MAA/F;AACA,QAAM9D,UAASyP,aAAY,CAAZ,GAAgB,IAAhB,GAAuB,KAAtC;AACA,WAAO5G,UAAW;AAAC,eAAD,CAAM,IAAN;AAAA,OAAW,OAAO,EAACjF,QAAQ,CAAT,EAAlB;AACfwE,UAAKiD,iBAAL,CAAuBJ,SAAvB,EAAkC;AAClCK,aAAO,CAAC;AACPC,iBAAU,KADH;AAEPjK,gBAAY4J,KAAZ;AAFO,OAAD,CAD2B;AAKlCM,oBAAcrC,OAAO8B,SAAP,KAAqB,IAArB,IAA6B9B,OAAO8B,SAAP,KAAqB,CAAlD,GAAsD,EAAtD,GAA2D9B,OAAO8B,SAAP;AALvC,MAAlC,EAOA,8BAAC,iBAAD;AACC,gBAAUjL,OADX;AAEC,WAAK,CAFN;AAGC,WAAK,GAHN;AAIC,WAAK;AAAA,cAAS,OAAKgJ,KAAL,GAAa0C,IAAtB;AAAA,OAJN;AAKC,oBAAc,OAAKxC,IALpB;AAMC,cAAQ,OAAKA;AANd,OAPA;AADe,KAAX,GAkBF;AAAA;AAAA;AACH,iBAAU,0BADP;AAEH,aAAO,EAACuC,WAAW,MAAZ,EAFJ;AAGH,eAAS,OAAK1C;AAHX;AAKFhL,aALE;AAAA;AAAA,KAlBL;AA0BA;AACD,G;;AA3RD;;;AAsCA;;AAwBA;;;;;2BA+NS;AAAA,gBAWJ,KAAKX,KAXD;AAAA,OAEP2O,QAFO,UAEPA,QAFO;AAAA,OAGPd,SAHO,UAGPA,SAHO;AAAA,OAIPC,KAJO,UAIPA,KAJO;AAAA,OAKP/B,MALO,UAKPA,MALO;AAAA,OAMPpF,KANO,UAMPA,KANO;AAAA,OAOPqF,UAPO,UAOPA,UAPO;AAAA,OAQPrL,QARO,UAQPA,QARO;AAAA,OASPoN,UATO,UASPA,UATO;AAAA,OAUJa,SAVI;;AAYR,UACC;AAAA;AAAQA,aAAR;AACED,eACA;AAAC,oBAAD,CAAiB,QAAjB;AAAA;AAA2B,UAAKf;AAAhC,KADA,GAGAjN;AAJF,IADD;AASA;;;;EA5UyBiG,gBAAMC,S;;AA+UjC;;;;;IAIMyL,a,OADLvS,mB;;;AAEA,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,6HACZA,KADY;;AAAA,SAyHnBuS,eAzHmB,GAyHD,UAACvD,GAAD,EAAMvN,EAAN,EAAUmB,MAAV,EAAqB;AACtC;AACA,OAAIA,UAAU,CAAd,EAAiB;AAChB,WAAK4P,gBAAL,CAAsBxD,GAAtB;AACA,IAFD,MAEO;AACN,WAAKyD,UAAL,CAAgBzD,GAAhB;AACA;AACD,UAAKhM,cAAL,CAAoBvB,EAApB;AACA,GAjIkB;;AAAA,SAoInBuB,cApImB,GAoIF,UAACQ,UAAD,EAAgB;AAChC,OAAIA,UAAJ,EAAgB;AACf,QAAI;AACH,SAAIC,gBAAgBC,SAASC,cAAT,CAAwBH,UAAxB,CAApB;AACA,SAAIC,aAAJ,EAAmB;AAClBA,oBAAcG,cAAd,CAA6B,EAACC,OAAO,QAAR,EAA7B;AACA;AACD,KALD,CAKE,OAAMC,GAAN,EAAW;AACZ2B,aAAQC,GAAR,CAAY,wBAAsB5B,GAAlC;AACA;AACD;AACD,GA/IkB;;AAAA,SAkJnBkK,YAlJmB,GAkJJ,UAACjC,MAAD,EAAY;AAAA,OACnBtK,EADmB,GACRsK,MADQ,CACnBtK,EADmB;AAAA,OACfuN,GADe,GACRjD,MADQ,CACfiD,GADe;;AAE1B,OAAIvN,OAAO,EAAP,IAAaA,OAAO,IAApB,IAA4B,CAACA,GAAGwN,UAAH,CAAc,GAAd,CAAjC,EAAqD;AAAE;AACtD,WAAK7O,KAAL,CAAWwE,OAAX,CAAmBnD,EAAnB,EAAuBpB,IAAvB,CAA4B,UAAC4D,GAAD,EAAS;AACpC,SAAIA,GAAJ,EAAS;AACRC,oBAAQC,OAAR,CAAgB,MAAhB;AACA,UAAM4K,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,aAAKhK,QAAL,CAAc;AACbgK,mBAAYA,WAAWnO,MAAX,CAAkB;AAAA,eAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,QAAlB;AADC,OAAd,EAEG,YAAM;AACR,cAAKhP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA;AACA,WAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,cAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACA,OAPD;AAQA;AACA,aAAK3L,KAAL,CAAWmB,YAAX;AACA;AACA,aAAKnB,KAAL,CAAWuS,cAAX;AACA,MAfD,MAeO;AACNzO,oBAAQM,KAAR,CAAc,MAAd;AACA;AACD,KAnBD;AAoBA,IArBD,MAqBO;AAAE;AACR,QAAMuK,0CAAiB,OAAKxK,KAAL,CAAWwK,UAA5B,EAAN;AACA,WAAKhK,QAAL,CAAc;AACbgK,iBAAYA,WAAWnO,MAAX,CAAkB;AAAA,aAAQC,KAAKmO,GAAL,KAAaA,GAArB;AAAA,MAAlB;AADC,KAAd,EAEG,YAAM;AACR,YAAKhP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B,EAA2CC,GAA3C;AACA;AACA,SAAIzO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,YAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsCwL,MAAtC,CAAtB;AACA,KAPD;AAQA;AACD,GApLkB;;AAAA,SAuLnBoD,SAvLmB,GAuLP,YAAM;AAAA,sBACwB,OAAK5K,KAD7B;AAAA,OACVwK,UADU,gBACVA,UADU;AAAA,OACE6D,WADF,gBACEA,WADF;AAAA,OACe9N,KADf,gBACeA,KADf;AAAA,sBAEQ,OAAK9E,KAFb;AAAA,OAEV0C,GAFU,gBAEVA,GAFU;AAAA,OAEL2B,SAFK,gBAELA,SAFK;AAGjB;;AACA,OAAI2X,OAAO,MAAM,eAAjB;AACA,OAAM3M,UAAU7O,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACjC,UAAMub,IAD2B;AAEjC,WAAOtZ,GAF0B;AAGjC,iBAAa2B,SAHoB;AAIjC,gBAAY,MAJqB;AAKjC,eAAW,EALsB;AAMjC,gBAAY,CACX;AACC,WAAM,MAAM,eADb;AAEC,YAAO2X,IAFR;AAGC,kBAAa3X,SAHd;AAIC,iBAAY,MAJb;AAKC,gBAAW,IALZ;AAMC,iBAAY,IANb;AAOC,aAAQ,IAPT;AAQC,aAAQ;AART,KADW,CANqB;AAiBjC,YAAQ,EAjByB;AAkBjC,YAAQ,CAlByB;AAmBjC,iBAAa,IAnBoB;AAoBjC,iBAAa,IApBoB;AAqBjC,eAAW,IArBsB;AAsBjC,cAAU,CAtBuB;AAuBjC,cAAU;AAvBuB,IAAlB,CAAhB;AAyBA;AACA,UAAKU,QAAL,CAAc;AACbgK,6CAAgBA,UAAhB,IAA4BM,OAA5B,EADa;AAEbvK,WAAOA,QAAQ;AAFF,IAAd,EAGG,YAAM;AACR,WAAK9E,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA;AACA,QAAIxO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,KAA/B,EAAsC8O,OAAtC,CAAtB;AACA,IARD;AASA,GA/NkB;;AAAA,SAkOnBrD,UAlOmB,GAkON,eAAO;AACnB,OAAMqD,uCAAc,OAAK9K,KAAL,CAAWwK,UAAzB,EAAN;AACA,OAAMpI,QAAQ0I,QAAQG,SAAR,CAAkB;AAAA,WAAQF,IAAIN,GAAJ,KAAYnO,KAAKmO,GAAzB;AAAA,IAAlB,CAAd;AACA,OAAMnO,OAAOwO,QAAQ1I,KAAR,CAAb;AACA0I,WAAQI,MAAR,CAAe9I,KAAf,EAAsB,CAAtB,eACI9F,IADJ,EAEIyO,GAFJ;AAIA,UAAKvK,QAAL,CAAc,EAACgK,YAAYM,OAAb,EAAd,EAAqC,YAAM;AAC1C;AACA,WAAKrP,KAAL,CAAW0S,QAAX,CAAoB,OAAKnO,KAAL,CAAWwK,UAA/B;AACA,QAAIW,SAAS7N,KAAKC,KAAL,CAAWD,KAAKE,SAAL,cAAmBuN,GAAnB,EAAX,CAAb;AACA;AACA,QAAI/O,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyCmP,MAAzC,CAAtB;AACA,IAPD;AAQA,GAlPkB;;AAAA,SAqPnB8C,gBArPmB,GAqPA,UAACxD,GAAD,EAAS;AAC3B,OAAIY,cAAJ;AAD2B,OAEpBiD,IAFoB,GAEZjD,MAAMrL,KAFM,CAEpBsO,IAFoB;;AAG3B,OAAIA,KAAKC,OAAL,CAAa9D,GAAb,KAAqB,CAAzB,EAA4B;AAC3B6D,SAAKpD,MAAL,CAAYoD,KAAKC,OAAL,CAAa9D,GAAb,CAAZ,EAA+B,CAA/B;AACA,IAFD,MAEO;AACN6D,SAAKhJ,IAAL,CAAUmF,GAAV;AACA;AACDY,SAAM7K,QAAN,CAAe,EAACgO,cAAcF,IAAf,EAAf,EAAqC,YAAM;AAC1C,QAAI7Q,0BAAQ4N,MAAM5P,KAAN,CAAYyB,EAApB,EAAyBoR,IAAzB,CAAJ;AACA,QAAIE,eAAelR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAY2S,YAA3B,CAAX,CAAnB;AACAnD,UAAMxP,KAAN,CAAY2S,YAAZ,GAA2BvS,OAAOC,MAAP,CAAcsS,YAAd,EAA4B/Q,GAA5B,CAA3B;AACA,IAJD;AAKA,GAlQkB;;AAAA,SAqQnByQ,UArQmB,GAqQN,UAAC1G,MAAD,EAAY;AACxB,UAAKhH,QAAL,CAAc;AACbiO,gBAAY,IADC,CACK;AADL,IAAd,EAEG,YAAM;AACR,WAAKR,gBAAL,CAAsBzG,MAAtB;AACA,IAJD;AAKA,GA3QkB;;AAAA,SA8QnBkH,WA9QmB,GA8QL,UAAClH,MAAD,EAAY;AACzB;AACA;AACA;AACA;AACA;AACA,UAAKhH,QAAL,CAAc;AACbmO,eAAW1S,OAAOC,MAAP,CAAc,EAAd,EAAkBsL,MAAlB,CADE;AAEboH,eAAW3S,OAAOC,MAAP,CAAc,EAAd,EAAkBsL,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAxD,CAFE;AAGbqS,gBAAY,KAHC,CAGM;AAHN,IAAd,EAIG,YAAM;AACR,WAAKR,gBAAL,CAAsBzG,OAAOtK,EAA7B;AACA,IAND;AAOA,GA3RkB;;AAAA,SA8RnB2R,iBA9RmB,GA8RC,UAAC3R,EAAD,EAAQ;AAC3B;AACA,OAAIiF,SAAS,OAAKnC,KAAL,CAAW8O,QAAX,CAAoB3M,MAAjC;AACA,OAAIA,UAAU,CAAd,EAAiB;AAChB,WAAKtG,KAAL,CAAWkT,YAAX,CAAwB,EAAC5Q,KAAKjB,EAAN,EAAxB,EACCpB,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,SAAIA,GAAJ,EAAS;AACR;AACA,aAAKjE,KAAL,CAAWkF,UAAX;AACA;AACA,aAAK9E,KAAL,CAAWmB,YAAX;AACA;AACA,aAAKnB,KAAL,CAAWuS,cAAX;AACAzO,oBAAQC,OAAR,CAAgB,MAAhB;AACA,aAAKqO,gBAAL,CAAsB/Q,EAAtB;AACA,MATD,MASO;AACNyC,oBAAQM,KAAR,CAAc,MAAd;AACA;AACD,KAdD;AAeA,IAhBD,MAgBO;AACN;AACA,QAAM6O,WAAWxR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAW8O,QAA1B,CAAX,CAAjB;AACA,QAAME,QAAQF,SAASzS,MAAT,CAAgB,UAACC,IAAD,EAAU;AACvC,YAAOA,KAAKS,IAAL,IAAa,EAAb,IAAmBT,KAAK2S,OAAL,IAAgB,IAAnC,IAA2C3S,KAAK2S,OAAL,CAAa9M,MAAb,IAAuB,CAAzE;AACA,KAFa,CAAd;AAGA,QAAI6M,MAAM7M,MAAN,GAAe,CAAnB,EAAsB;AAAG;AACxBxC,mBAAQuP,IAAR,CAAa,cAAb;AACA,YAAO,KAAP;AACA;AACD;AACA,QAAIhS,GAAGwN,UAAH,CAAc,GAAd,CAAJ,EAAwB;AACvB,YAAKuD,gBAAL,CAAsB/Q,EAAtB;AACA,KAFD,MAEO;AACN;AACA,YAAKrB,KAAL,CAAWuT,YAAX,CAAwB,OAAKpP,KAAL,CAAW8O,QAAnC,EACChT,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,UAAIA,OAAOA,IAAIyC,MAAJ,GAAa,CAAxB,EAA2B;AAC1BxC,qBAAQC,OAAR,CAAgB,MAAhB;AACA,cAAKyP,OAAL,CAAa9E,UAAb;AACA;AACA,WAAIvO,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,WAAIwL,SAASnM,MAAMqW,SAAN,CAAgB1V,QAAhB,EAA0BkB,EAA1B,CAAb;AACA;AACA,WAAIyU,cAAcnK,UAAUA,OAAOpL,QAAP,IAAmB,IAA7B,IAAqCoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AACvF,eAAOA,KAAKC,QAAL,KAAkB,MAAzB;AACA,QAFsD,EAEpD,CAFoD,CAAvD;AAGA,WAAIoV,WAAJ,EAAiB;AAChBjS,YAAI4F,IAAJ,CAASqM,WAAT;AACA;AACD,cAAK9V,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,gBAA/B,EAAiD0D,GAAjD,CAAtB;AACA;AACA,cAAK7D,KAAL,CAAWmB,YAAX;AACA,cAAKiR,gBAAL,CAAsB/Q,EAAtB;AACA,OAjBD,MAiBO;AACNyC,qBAAQM,KAAR,CAAc,MAAd;AACA;AACD,MAtBD;AAuBA;AACD;AACD,GAzVkB;;AAAA,SA4VnB0K,iBA5VmB,GA4VC,UAACmE,QAAD,EAAc;AACjC,OAAIQ,cAAc,EAAlB;AACAR,YAASS,OAAT,CAAiB,gBAAQ;AAAA,QACnB9E,GADmB,GACMnO,IADN,CACnBmO,GADmB;AAAA,QACdrO,QADc,GACME,IADN,CACdF,QADc;AAAA,QACDqB,GADC,4BACMnB,IADN;;AAExBgT,gBAAYhK,IAAZ,CAAiB7H,GAAjB;AACA,IAHD;AAIA,UAAK+C,QAAL,CAAc,EAACsO,UAAUQ,WAAX,EAAd;AACA,GAnWkB;;AAAA,SAsWnBE,OAtWmB,GAsWT,UAAC/E,GAAD,EAAS;AAClB,UAAKwD,gBAAL,CAAsBxD,GAAtB;AACA,UAAK5O,KAAL,CAAWwC,MAAX,GAAoB,KAApB;AACA;AACA,OAAIrC,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC,OAAKgE,KAAL,CAAW2O,SAApD,CAAtB;AACA,UAAKU,OAAL,CAAa9E,UAAb;AACA,UAAK/J,QAAL,CAAc;AACbmO,eAAW1S,OAAOC,MAAP,CAAc,EAAd;AADE,IAAd;AAGA,GAhXkB;;AAAA,SAmXnBuT,QAnXmB,GAmXR,UAACjI,MAAD,EAAY;AACtB,OAAI6D,cAAJ;AACA,OAAMqE,gBAAgBrE,MAAMrL,KAAN,CAAY4O,SAAZ,CAAsBjR,GAAtB,CAA0B,gBAAQ;AACvD,WAAO;AACN,aAAQrB,KAAKS,IADP;AAEN,gBAAWT,KAAK2S,OAFV;AAGN,mBAAc3S,KAAK0L,UAHb;AAIN,qBAAgB1L,KAAK0O;AAJf,KAAP;AAMA,IAPqB,CAAtB,CAFsB,CASjB;AACL,OAAM2E,aAAatE,MAAMrL,KAAN,CAAY8O,QAAZ,CAAqBnR,GAArB,CAAyB,gBAAQ;AACnD,WAAO;AACN,aAAQrB,KAAKS,IADP;AAEN,gBAAWT,KAAK2S,OAFV;AAGN,mBAAc3S,KAAK0L,UAHb;AAIN,qBAAgB1L,KAAK0O;AAJf,KAAP;AAMA,IAPkB,CAAnB,CAVsB,CAiBjB;AACL;AACA;AACA,OAAI1N,KAAKE,SAAL,CAAekS,aAAf,KAAiCpS,KAAKE,SAAL,CAAemS,UAAf,CAArC,EAAiE;AAChE;AACAtE,UAAMmE,OAAN,CAAchI,OAAOtK,EAArB;AACA,IAHD,MAGO;AACN0S,gBAAMC,OAAN,CAAc;AACbtG,YAAO,YADM;AAEbuG,aAAQ,IAFK;AAGbC,iBAAY,KAHC;AAIbC,SAJa,kBAIN;AACN3E,YAAMwD,iBAAN,CAAwBrH,OAAOtK,EAA/B;AACA,MANY;AAOb+S,aAPa,sBAOF;AACV5E,YAAMmE,OAAN,CAAchI,OAAOtK,EAArB;AACA;AATY,KAAd;AAWA;AACD,GAvZkB;;AAAA,SAyZnBsO,SAzZmB,GAyZP,UAAC7M,GAAD,EAAS;AACpB,UAAK0Q,OAAL,GAAe1Q,GAAf;AACA,GA3ZkB;;AAAA,SA8ZnBuR,KA9ZmB,GA8ZX,UAAC1I,MAAD,EAAY;AAAA,OACZrB,QADY,GACA,OAAK1K,KADL,CACZ0K,QADY;;AAEnB,OAAIgK,WAAW3I,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC9E,WAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,IAF6C,CAA9C;AAGA,OAAMuR,YAAYqC,YAAY,IAAZ,IAAoBA,SAAShO,MAAT,IAAmB,CAAvC,GAA2C,CAA3C,GAA+CgO,SAAShO,MAA1E;AACA,OAAIgE,YAAY2H,YAAY,CAA5B,EAA+B;AAAG;AACjC,WAAKI,UAAL,CAAgB1G,OAAOtK,EAAvB;AACA;AACD,GAvakB;;AAAA,SAyanBwa,gBAzamB,GAyaA,UAACjb,IAAD,EAAOH,IAAP,EAAaqb,KAAb,EAAuB;AAAA,OAClCza,EADkC,GACRZ,IADQ,CAClCY,EADkC;AAAA,OAC9B0a,QAD8B,GACRtb,IADQ,CAC9Bsb,QAD8B;AAAA,OACpBzS,QADoB,GACR7I,IADQ,CACpB6I,QADoB;AAEzC;;AACA,OAAI0S,YAAYva,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWY,IAAX,CAAf,CAAX,CAAhB;AACA,UAAKZ,KAAL,CAAWY,IAAX,IAAmBR,OAAOC,MAAP,CAAc2b,SAAd,sBACjBF,KADiB,EACTra,KAAKE,SAAL,CAAe;AACvB0H,cAAU5I,KAAK4I,QADQ;AAEvBC,cAAUA,QAFa;AAGvBjI,UAHuB;AAIvB0a;AAJuB,IAAf,CADS,EAAnB;AAQA,GArbkB;;AAAA,SAwbnBE,YAxbmB,GAwbJ,UAACC,MAAD,EAASta,GAAT,EAAcka,KAAd,EAAwB;AAAA,OAC/Bza,EAD+B,GACKO,GADL,CAC/BP,EAD+B;AAAA,OAC3B0a,QAD2B,GACKna,GADL,CAC3Bma,QAD2B;AAAA,OACjBzS,QADiB,GACK1H,GADL,CACjB0H,QADiB;AAAA,OACPD,QADO,GACKzH,GADL,CACPyH,QADO;;AAEtC,OAAI8S,OAAJ;AACA,OAAID,UAAUzZ,SAAV,IAAuByZ,UAAU,IAArC,EAA2C;AAC1C,QAAME,OAAO3a,KAAKC,KAAL,CAAWwa,MAAX,EAAmB5S,QAAhC;AACA,QAAM+S,SAAS5a,KAAKC,KAAL,CAAWwa,MAAX,EAAmB7a,EAAlC;AACA,QAAMib,WAAW7a,KAAKC,KAAL,CAAWwa,MAAX,EAAmBH,QAApC;AACA,QAAMQ,WAAW9a,KAAKC,KAAL,CAAWwa,MAAX,EAAmB7S,QAApC;AACA,QAAI+S,QAAQ,EAAR,IAAcA,QAAQ,IAA1B,EAAgC;AAC/B,SAAMxY,SAAS;AACdvC,UAAIgb,MADU;AAEdzb,YAAM0b;AAFQ,MAAf;AAIA,YAAKtc,KAAL,CAAWwc,iBAAX,CAA6B5Y,MAA7B,EACC3D,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,UAAIA,GAAJ,EAAS;AACRsY,iBAAUtY,GAAV;AACA2W,cAAOC,IAAP,CAAY0B,OAAZ,EAAqB,QAArB;AACA;AACD,MAND;AAOA,KAZD,MAYO;AACNA,eAAUC,IAAV;AACA5B,YAAOC,IAAP,CAAY0B,OAAZ,EAAqB,QAArB;AACA;AACQ;AACT,QAAIH,YAAYva,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWgc,SAA1B,CAAX,CAAhB;AACA,WAAKhc,KAAL,CAAWgc,SAAX,GAAuB5b,OAAOC,MAAP,CAAc2b,SAAd,sBACrBF,KADqB,EACbra,KAAKE,SAAL,CAAe;AACvB0H,eAAUkT,QADa;AAEvBjT,eAAU6S,OAFa;AAGvB9a,SAAIgb,MAHmB;AAIvBN,eAAUO;AAJa,KAAf,CADa,EAAvB;AAQA,IA/BD,MA+BO;AAAI;AACV,QAAIhT,YAAY,EAAZ,IAAkBA,YAAY,IAAlC,EAAwC;AACvC,SAAM1F,UAAS;AACdvC,UAAIA,EADU;AAEdT,YAAMmb;AAFQ,MAAf;AAIA,YAAK/b,KAAL,CAAWwc,iBAAX,CAA6B5Y,OAA7B,EACC3D,IADD,CACM,UAAC4D,GAAD,EAAS;AACd,UAAIA,GAAJ,EAAS;AACRsY,iBAAUtY,GAAV;AACA2W,cAAOC,IAAP,CAAY0B,OAAZ,EAAqB,QAArB;AACA;AACD,MAND;AAOA,KAZD,MAYO;AACNA,eAAU7S,QAAV;AACAkR,YAAOC,IAAP,CAAY0B,OAAZ,EAAqB,QAArB;AACA;AACD;AACA,QAAIH,aAAYva,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWgc,SAA1B,CAAX,CAAhB;AACA,WAAKhc,KAAL,CAAWgc,SAAX,GAAuB5b,OAAOC,MAAP,CAAc2b,UAAd,sBACrBF,KADqB,EACbra,KAAKE,SAAL,CAAe;AACvB0H,eAAUA,QADa;AAEvBC,eAAU6S,OAFa;AAGvB9a,SAAIA,EAHmB;AAIvB0a,eAAUA;AAJa,KAAf,CADa,EAAvB;AAQA;AACD,GAtfkB;;AAAA,SAyfnBU,cAzfmB,GAyfF,UAACP,MAAD,EAASta,GAAT,EAAcka,KAAd,EAAwB;AAAA,OACjCxS,QADiC,GACrB1H,GADqB,CACjC0H,QADiC;;AAExC,OAAI4S,UAAUzZ,SAAV,IAAuByZ,UAAU,IAArC,EAA2C;AAC1C,QAAME,OAAO3a,KAAKC,KAAL,CAAWwa,MAAX,EAAmB5S,QAAhC;AACA,QAAMoT,YAAYN,KAAKO,KAAL,CAAW,GAAX,CAAlB;AACAD,cAAUhJ,OAAV,CAAkB,gBAAQ;AACzB8G,YAAOC,IAAP,CAAYha,IAAZ,EAAkB,QAAlB;AACA,KAFD;AAGA,IAND,MAMO;AAAI;AACV,QAAMic,aAAYpT,SAASqT,KAAT,CAAe,GAAf,CAAlB;AACAD,eAAUhJ,OAAV,CAAkB,gBAAQ;AACzB8G,YAAOC,IAAP,CAAYha,IAAZ,EAAkB,QAAlB;AACA,KAFD;AAGA;AACD,GAvgBkB;;AAAA,SA0gBnBmc,QA1gBmB,GA0gBT,UAACtB,IAAD,EAAU;AACnB,OAAGA,KAAKhV,MAAL,GAAY,CAAf,EAAkB;AACjB,QAAMlE,MAAMkZ,KAAK,CAAL,EAAQhS,QAApB;AACAkR,WAAOC,IAAP,CAAYrY,GAAZ,EAAiB,QAAjB;AACA,IAHD,MAGO;AACN,WAAO,KAAP;AACA;AACD,GAjhBkB;;AAElB,SAAKpC,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZwK,eAAY,EADA,EACK;AACjBjK,UAAO,CAFK,EAEK;AACjB8N,gBAAa;AACZ,UAAM,EADM;AAEZ,WAAO,EAFK;AAGZ,iBAAa,EAHD;AAIZ,gBAAY,MAJA;AAKZ,eAAW,EALC;AAMZ,gBAAY,CACX;AACC,WAAM,EADP;AAEC,YAAO,EAFR;AAGC,kBAAa,EAHd;AAIC,iBAAY,MAJb;AAKC,gBAAW,IALZ;AAMC,iBAAY,IANb;AAOC,aAAQ,EAPT;AAQC,aAAQ;AART,KADW,CANA;AAiBZ,YAAQ,EAjBI;AAkBZ,YAAQ,CAlBI;AAmBZ,iBAAa,IAnBD;AAoBZ,iBAAa,IApBD;AAqBZ,eAAW,IArBC;AAsBZ,cAAU,CAtBE;AAuBZ,cAAU;AAvBE,IAHD,EA2BT;AACHG,iBAAc,EA5BF,EA4BM;AAClBF,SAAM,EA7BM,EA6BF;AACVQ,aAAU,EA9BE;AA+BZH,cAAW,EA/BC,EA+BG;AACfC,cAAW,EAhCC,EAgCG;AACfH,eAAY,KAjCA,CAiCO;AAjCP,GAAb;AAHkB;AAsClB;;;;4CAEyB5I,S,EAAW0F,W,EAAa;AACjD,OAAI1F,UAAU2E,UAAV,IAAwB,KAAK/O,KAAL,CAAW+O,UAAvC,EAAmD;AAClD,SAAKhK,QAAL,CAAc;AACbgK,iBAAY3E,UAAU2E,UAAV,IAAwB,IAAxB,IAAgC3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA+B,CAA/D,GAAmE,EAAnE,GAAwE0D,UAAU2E,UAAV,CAAqB7M,GAArB,CAAyB,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC7H,aAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAACmO,KAAKrI,QAAQ,CAAd,EAApB,CAAP;AACA,MAFmF,CADvE;AAIb7B,YAAOsF,UAAU2E,UAAV,IAAwB,IAAxB,IAAgC3E,UAAU2E,UAAV,CAAqBrI,MAArB,IAA+B,CAA/D,GAAmE,CAAnE,GAAuE0D,UAAU2E,UAAV,CAAqBrI,MAJtF;AAKbkM,kBAAapS,OAAOC,MAAP,CAAc,EAAd,EAAkB;AAC9B,YAAM,EADwB;AAE9B,aAAO2J,UAAU1H,GAFa;AAG9B,mBAAa0H,UAAU/F,SAHO;AAI9B,kBAAY,MAJkB;AAK9B,iBAAW,EALmB;AAM9B,kBAAY,CACX;AACC,aAAM,EADP;AAEC,cAAO,EAFR;AAGC,oBAAa,KAAKrE,KAAL,CAAWqE,SAHzB;AAIC,mBAAY,MAJb;AAKC,kBAAW,IALZ;AAMC,mBAAY,IANb;AAOC,eAAQ,EAPT;AAQC,eAAQ;AART,OADW,CANkB;AAiB9B,cAAQ,EAjBsB;AAkB9B,cAAQ,CAlBsB;AAmB9B,mBAAa,IAnBiB;AAoB9B,mBAAa,IApBiB;AAqB9B,iBAAW,IArBmB;AAsB9B,gBAAU,CAtBoB;AAuB9B,gBAAU;AAvBoB,MAAlB,CALA,CA6BV;AA7BU,KAAd;AA+BA;AACD;;;sCAEmB;AAAA;;AACnB,QAAKU,QAAL,CAAc;AACbgK,gBAAY,KAAK/O,KAAL,CAAW+O,UAAX,IAAyB,IAAzB,IAAiC,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAAgC,CAAjE,GAAqE,EAArE,GAA0E,KAAK1G,KAAL,CAAW+O,UAAX,CAAsB7M,GAAtB,CAA0B,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAChI,YAAOnG,OAAOC,MAAP,CAAcI,IAAd,EAAoB,EAAC,OAAO8F,QAAQ,CAAhB,EAApB,CAAP;AACA,KAFqF,CADzE;AAIb7B,WAAO,KAAK9E,KAAL,CAAW+O,UAAX,KAA0B,IAA1B,IAAkC,KAAK/O,KAAL,CAAW+O,UAAX,CAAsBrI,MAAtB,IAAgC,CAAlE,GAAsE,CAAtE,GAA0E,KAAK1G,KAAL,CAAW+O,UAAX,CAAsBrI,MAJ1F;AAKbkM,iBAAapS,OAAOC,MAAP,CAAc,EAAd,EAAkB;AAC9B,WAAM,EADwB;AAE9B,YAAO,KAAKT,KAAL,CAAW0C,GAFY;AAG9B,kBAAa,KAAK1C,KAAL,CAAWqE,SAHM;AAI9B,iBAAY,MAJkB;AAK9B,gBAAW,EALmB;AAM9B,iBAAY,CACX;AACC,YAAM,EADP;AAEC,aAAO,EAFR;AAGC,mBAAa,KAAKrE,KAAL,CAAWqE,SAHzB;AAIC,kBAAY,MAJb;AAKC,iBAAW,IALZ;AAMC,kBAAY,IANb;AAOC,cAAQ,EAPT;AAQC,cAAQ;AART,MADW,CANkB;AAiB9B,aAAQ,EAjBsB;AAkB9B,aAAQ,CAlBsB;AAmB9B,kBAAa,IAnBiB;AAoB9B,kBAAa,IApBiB;AAqB9B,gBAAW,IArBmB;AAsB9B,eAAU,CAtBoB;AAuB9B,eAAU;AAvBoB,KAAlB,CALA,EA6BT;AACJ0O,kBAAc,EA9BD,EA8BK;AAClBF,UAAM,EA/BO,EA+BH;AACVQ,cAAU;AAhCG,IAAd;;AAmCA,QAAK4J,OAAL,GAAena,iBAAQ8R,WAAR,CAAoB,cAApB,EAAoC,UAAC5S,GAAD,EAAO;AACzD,WAAKuQ,eAAL,CAAqBvQ,IAAIU,GAAzB,EAA8BV,IAAIU,GAAlC,EAAuCV,IAAIY,MAA3C;AACA,IAFc,CAAf;AAGA;;;yCAEqB;AACrBE,oBAAQ+R,cAAR,CAAuB,KAAKoI,OAA5B;AACA;;AAYD;;;AAcA;;;AAqCA;;;AA2CA;;;AAmBA;;;AAgBA;;;AASA;;;AAgBA;;;AA8DA;;;AAUA;;;AAaA;;;AA2CA;;;AA0BA;;;AAiEA;;;AAiBA;;;;2BAUS;AAAA;;AAAA,gBACuC,KAAK1Y,KAD5C;AAAA,OACDyO,UADC,UACDA,UADC;AAAA,OACWjE,UADX,UACWA,UADX;AAAA,OACuBgE,YADvB,UACuBA,YADvB;AAAA,OAED5S,KAFC,GAEQ,KAAKC,KAFb,CAEDD,KAFC;;AAGR,OAAIic,YAAYzc,KAAK8G,IAAL,CAAU,KAAKrG,KAAL,CAAWgc,SAArB,CAAhB;AACA,OAAIc,YAAYvd,KAAK8G,IAAL,CAAU,KAAKrG,KAAL,CAAW8c,SAArB,CAAhB;AAJQ,OAKDxS,QALC,GAKW,KAAK1K,KALhB,CAKD0K,QALC;AAAA,OAMD0L,YANC,GAMe,KAAKpW,KANpB,CAMDoW,YANC;;AAOR,OAAMtB,YAAY/B,aAAarM,MAAb,GAAsB,CAAxC;AACA,OAAMwJ,aAAa;AAClBC,UAAM;AACLb,UAAKrE,eADA;AAELmF,WAAM5E;AAFD;AADY,IAAnB;AAMA,OAAM6E,YAAY,CACjB;AACCvC,WAAO,IADR;AAECD,eAAW,KAFZ;AAGCyC,WAAO,QAHR;AAIC7B,WAAO,MAJR;AAKC8B,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YACC;AAAA;AAAA;AACC,cAAO,EAAC0C,OAAO,MAAR,EADR;AAEC,sCAA6B1C,OAAO1H,SAApC,YAAoD0H,OAAOtK,EAF5D;AAGC,gBAAS,OAAKgT,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAHV;AAIC,kBAAU,MAJX;AAKC;AAAC,uBAAD;AAAA,SAAY,OAAM,uCAAlB;AACC,qCAAC,UAAD;AACC,mBAAW,CAACrB,QAAD,IAAa,CAACoK,SAAd,GAA0B,EAA1B,GAA+B,QAD3C;AAEC,eAAO;AACNK,mBAAU,UADJ;AAENC,eAAM,GAFA;AAGNxK,gBAAO,SAHD;AAIND,mBAAU,MAJJ;AAKNwS,uBAAc;AALR,SAFR;AASC,cAAK,cATN;AADD,OALD;AAiBC;AAAA;AAAA;AAAO3M;AAAP;AAjBD,MADD;AAqBA;AA3BF,IADiB,EA8BjB;AACC1C,WAAO,IADR;AAECD,eAAW,MAFZ;AAGCY,WAAOsN,YAAY5b,KAAZ,CAHR;AAICmQ,WAAO,MAJR;AAKC3B,cAAU,CAACjE,QAAD,IAAa,CAACoK;AALzB,IA9BiB,EAqCjB;AACChH,WAAO,KADR;AAECD,eAAW,SAFZ;AAGCY,WAAOsN,YAAY5b,KAAZ,CAHR;AAICwO,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAQ,IAAR,GAAe,EAAf,GAAoBA,KAAKtO,GAAL,CAAS;AAAA,cAAQrB,KAAKsM,QAAb;AAAA,OAAT,EAAgCsD,IAAhC,CAAqC,GAArC;AAFvD,MAAP;AAGA;AAVF,IArCiB,EAiDjB;AACC3C,WAAO,MADR;AAECD,eAAW,WAFZ;AAGC;AACAY,WAAO,GAJR;AAKCE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SALzB;AAMCxE,WAAO,QANR;AAOCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAQ,IAAR,IAAgBA,QAAQ,CAAxB,GAA4B,EAA5B,GAAiC,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAFpE,MAAP;AAGA;AAXF,IAjDiB,EA8DjB;AACCwF,WAAO,MADR;AAECD,eAAW,SAFZ;AAGC;AACAY,WAAO,GAJR;AAKCE,cAAU,CAACjE,QAAD,IAAa,CAACoK,SALzB;AAMCxE,WAAO,QANR;AAOCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA;AACN,cAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADD;AAEN,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFH;AAEmCyE,cAAQ,IAAR,IAAgBA,QAAQ,CAAxB,GAA4B,EAA5B,GAAiC,sBAAOA,IAAP,EAAalI,MAAb,CAAoB,YAApB;AAFpE,MAAP;AAGA;AAXF,IA9DiB,EA2EjB;AACCwF,WAAO,MADR;AAECD,eAAW,MAFZ;AAGCY,WAAOsN,YAAY5b,KAAZ,CAHR;AAICwO,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,YAAO;AAAA;AAAA,QAAM,OAAO,EAAC0C,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAb,EAAkE,SAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAA3E;AACK,WAAIA,OAAOtK,EADhB;AACqB+O,UADrB;AAAA;AAAA,MAAP;AAEA;AATF,IA3EiB,EAsFjB;AACC1C,WAAO,MADR;AAECD,eAAW,MAFZ;AAGC;AACAY,WAAO,GAJR;AAKC6B,WAAO,MALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AAAA,SAClBpL,QADkB,GACNoL,MADM,CAClBpL,QADkB;;AAEzB,SAAIyc,YAAYzc,YAAY,IAAZ,IAAoB0c,MAAMC,OAAN,CAAc3c,QAAd,CAApB,IAA+CA,SAASC,MAAT,CAAgB,UAACC,IAAD,EAAU;AACxF,aAAOA,KAAKG,IAAL,IAAa,CAApB;AACA,MAF8D,CAA/D,CAFyB,CAIpB;AACL,SAAIuc,cAAc5c,YAAY,IAAZ,IAAoB0c,MAAMC,OAAN,CAAc3c,QAAd,CAApB,IAA+CA,SAASC,MAAT,CAAgB,UAACC,IAAD,EAAU;AAC1F,aAAOA,KAAKG,IAAL,IAAa,CAApB;AACA,MAFgE,CAAjE,CALyB,CAOpB;AACL,SAAIoc,UAAU1W,MAAV,GAAmB,CAAvB,EAA0B;AACzB,UAAI2P,UAAU+G,UAAU,CAAV,CAAd,CADyB,CACI;AAC7B,UAAMlH,cAAcG,WAAWA,QAAQ1V,QAAnB,IAA+B0V,QAAQ1V,QAAR,IAAoB,IAAnD,GAA0D0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AAC7G,cAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,aAAK+N,MAAM7U,EADa;AAExBH,cAAMgV,MAAM7M,QAFY;AAGxBP,gBAAQ,MAHgB;AAIxB1G,aAAK8T,MAAM5M,QAJa;AAKxBF,gBAAQ8M,MAAM9M,MALU;AAMxBC,kBAAU6M,MAAM7M,QANQ;AAOxBC,kBAAU4M,MAAM5M,QAPQ;AAQxBjI,YAAI6U,MAAM7U;AARc,QAAlB,CAAP;AAUA,OAX6E,CAA1D,GAWf,EAXL;AAYA,UAAI+b,QAAQnH,QAAQ5U,EAAR,CAAW8Z,QAAX,CAAoB,GAApB,CAAZ;AACA,aACC;AAAA;AAAA,SAAK,WAAU,yBAAf,EAA0C,OAAO,EAAC9M,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAjD;AACC;AAAA;AAAA;AACC,oBAAU,QADX;AAEC,gBAAOoB,QAAQ/U,IAFhB;AAGC,kBAAS,OAAK0b,QAAL,CAAcjI,IAAd,CAAmB,MAAnB,EAAyBmB,WAAzB,CAHV;AAIC,gBAAO;AACNtL,iBAAOsL,YAAYxP,MAAZ,GAAqB,CAArB,GAAyB,SAAzB,GAAqC,MADtC;AAEN+W,kBAAQvH,YAAYxP,MAAZ,GAAqB,CAArB,GAAyB,SAAzB,GAAqC,SAFvC;AAGNgX,mBAAS,OAHH;AAINhI,oBAAU,MAJJ;AAKNiI,mBAAQ,cALF;AAMN/B,yBAAe;AANT,UAJR;AAYEvF,gBAAQ/U;AAZV,QADD;AAeEoJ,mBAAWoK,SAAX,IAAsB0I,KAAtB,GAA4B,IAA5B,GACD,8BAAC,mBAAD;AACC,wBAAgB,OAAKxd,KAAL,CAAWyE,cAD5B;AAEC,iBAAS,OAAKzE,KAAL,CAAW4E,OAFrB;AAGC,kBAAUsR,WAHX;AAIC,aAAKG,UAAUA,QAAQ5U,EAAlB,GAAuB,EAJ7B;AAKC,mBAAW4U,UAAUA,QAAQhS,SAAlB,GAA8B,EAL1C;AAMC,kBAAUqG,YAAYoK,SANvB;AAOC,iBAAS,OAAK9U,KAAL,CAAWsG,OAPrB;AAQC,kBAAU;AARX;AAhBD,OADD;AA4BA,MA3CD,MA2CO,IAAIiX,YAAY7W,MAAZ,GAAqB,CAAzB,EAA4B;AAClC,UAAIkX,YAAYL,YAAY,CAAZ,CAAhB,CADkC,CACD;AADC,UAE3B5c,SAF2B,GAEfid,SAFe,CAE3Bjd,QAF2B;;AAGlC,UAAM2b,SAASF,UAAUrQ,OAAOtK,EAAjB,CAAf;AACA,UAAMoc,UAAUvB,WAAWzZ,SAAX,IAAwByZ,WAAW,IAAnC,GAA0Cza,KAAKC,KAAL,CAAWwa,MAAX,EAAmB5S,QAA7D,GAAwE/I,UAAS,CAAT,EAAY+I,QAApG;AACA,aACC;AAAA;AAAA,SAAM,OAAO,EAAC+E,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAb;AACqB;AAAC,sBAAD;AAAA,UAAU,SACT;AAAC,oBAAD;AAAA;AACEtU,oBAAS+F,MAAT,GAAkB,CAAlB,IAAuB/F,UAASuB,GAAT,CAAa,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACrD,kBAAQ;AAAC,sBAAD,CAAM,IAAN;AAAA;AACP,sBAAS,OAAKsV,gBAAL,CAAsBlH,IAAtB,CAA2B,MAA3B,EAAiC,WAAjC,EAA8ClU,IAA9C,EAAoDkL,OAAOtK,EAA3D,CADF;AAEP,kBAAK,UAAUkF,KAFR;AAGN9F,iBAAK4I,QAAL,IAAiB,IAAjB,GAAwB,IAAxB,GAA+B5I,KAAK4I;AAH9B,YAAR;AAKA,WANuB;AADzB,UADD;AAWI;AAAA;AAAA,WAAM,WAAW9I,UAAS+F,MAAT,IAAmB,CAAnB,GAAuB,QAAvB,GAAkC,mBAAnD;AACM,mBAAS;AAAA,kBAAKyF,EAAE6K,cAAF,EAAL;AAAA,WADf;AAEE,uCAAC,UAAD,IAAM,MAAK,YAAX;AAFF;AAXJ,QADrB;AAiBC;AAAA;AAAA;AACC,oBAAU,QADX;AAEC,kBAAStM,YAAWoK,SAAX,GAAqB,OAAKuH,YAAL,CAAkBtH,IAAlB,CAAuB,MAAvB,EAA6BuH,MAA7B,EAAqC3b,UAAS,CAAT,CAArC,EAAkDoL,OAAOtK,EAAzD,CAArB,GAAkF,IAF5F;AAGC,gBAAOd,UAAS+F,MAAT,GAAkB,CAAlB,GAAuB4V,WAAWzZ,SAAX,IAAwByZ,WAAW,IAAnC,GAA0Cza,KAAKC,KAAL,CAAWwa,MAAX,EAAmB7S,QAA7D,GAAwE9I,UAAS,CAAT,EAAY8I,QAA3G,GAAuH,IAH/H;AAIC,gBAAO;AACNmB,iBAAOiT,WAAW,IAAX,IAAmBA,WAAW,EAA9B,GAAmC,MAAnC,GAA4C,SAD7C;AAENH,mBAAS,OAFH;AAGNhI,oBAAU,MAHJ;AAINiI,mBAAQ,cAJF;AAKN/B,yBAAe,QALT;AAMN6B,kBAAQ;AANF,UAJR;AAYE9c,kBAAS+F,MAAT,GAAkB,CAAlB,GAAuB4V,WAAWzZ,SAAX,IAAwByZ,WAAW,IAAnC,GAA0Cza,KAAKC,KAAL,CAAWwa,MAAX,EAAmB7S,QAA7D,GAAwE9I,UAAS,CAAT,EAAY8I,QAA3G,GAAuH;AAZzH,QAjBD;AA+BEiB,mBAAWoK,SAAX,GAAqB,IAArB,GACM,8BAAC,UAAD,IAAM,MAAK,MAAX,EAAkB,OAAO,EAAClK,OAAO,SAAR,EAAzB;AACQ,iBAAS,OAAKyR,YAAL,CAAkBtH,IAAlB,CAAuB,MAAvB,EAA6BuH,MAA7B,EAAqC3b,UAAS,CAAT,CAArC,EAAkDoL,OAAOtK,EAAzD,CADjB;AAhCR,OADD;AAoCA,MAzCM,MAyCA;AACN,aAAO,IAAP;AACA;AACD;AArGF,IAtFiB,EA6LjB;AACCqM,WAAO,MADR;AAECD,eAAW,UAFZ;AAGCpD,eAAWtK,SAAS,CAAT,GAAa,QAAb,GAAwB,EAHpC;AAIC;AACAsO,WAAO,GALR;AAMC6B,WAAO,MANR;AAOCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAI5L,SAAS,CAAb,EAAgB;AAAE;AACjB,aAAO,IAAP;AACA,MAFD,MAEO;AAAA,UACCQ,QADD,GACuBoL,MADvB,CACCpL,QADD;AAAA,UACWG,QADX,GACuBiL,MADvB,CACWjL,QADX;;AAEN,UAAIA,YAAY,MAAhB,EAAwB;AACvB,WAAIgd,WAAWnd,YAAY,IAAZ,IAAoBA,YAAYkC,SAAhC,IAA6Cwa,MAAMC,OAAN,CAAc3c,QAAd,CAA7C,IAAwEA,SAASC,MAAT,CAAgB,UAACC,IAAD,EAAU;AAChH,eAAOA,KAAKG,IAAL,IAAa,CAApB;AACA,QAFsF,CAAvF,CADuB,CAGlB;AACL,WAAI8c,SAASpX,MAAT,IAAmB,CAAvB,EAA0B;AACzB,eAAQ;AAAA;AAAA,WAAK,WAAU,IAAf,EAAoB,OAAO,EAAC+H,OAAO,MAAR,EAA3B;AAAA;AAAA,SAAR;AACA,QAFD,MAEO;AACN,YAAIsP,SAASD,SAAS,CAAT,CAAb,CADM,CACqB;AAC3B,YAAME,cAAcD,OAAOpd,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+Bod,OAAOpd,QAA1D;AACA;AACA,YAAI2b,MAAJ;AACA,YAAIY,cAAcra,SAAlB,EAA6B;AAC5ByZ,kBAASY,UAAUnR,OAAOtK,EAAjB,CAAT;AACA;AACA;AACD,eACC;AAAA;AAAA,WAAK,OAAO,EAACgN,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EAAZ;AACmB;AAAC,wBAAD;AAAA,YAAU,SACT;AAAC,sBAAD;AAAA;AACE+I,wBAAYtX,MAAZ,GAAqB,CAArB,IAA0BsX,YAAY9b,GAAZ,CAAgB,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC3D,oBAAQ;AAAC,wBAAD,CAAM,IAAN;AAAA;AACP,wBAAS,OAAKsV,gBAAL,CAAsBlH,IAAtB,CAA2B,MAA3B,EAAiC,WAAjC,EAA8ClU,IAA9C,EAAoDkL,OAAOtK,EAA3D,CADF;AAEP,oBAAK,UAAUkF,KAFR;AAGN9F,mBAAK4I,QAAL,IAAiB,IAAjB,GAAwB,IAAxB,GAA+B5I,KAAK4I;AAH9B,cAAR;AAKA,aAN0B;AAD5B,YADD;AAWI;AAAA;AAAA,aAAM,WAAWuU,YAAYtX,MAAZ,IAAsB,CAAtB,GAA0B,QAA1B,GAAqC,mBAAtD;AACM,qBAAS;AAAA,oBAAKyF,EAAE6K,cAAF,EAAL;AAAA,aADf;AAEE,yCAAC,UAAD,IAAM,MAAK,YAAX;AAFF;AAXJ,UADnB;AAiBD;AAAA;AAAA;AACC,sBAAU,QADX;AAEC,kBAAOrW,SAAS+F,MAAT,GAAkB,CAAlB,GAAuB4V,WAAWzZ,SAAX,IAAwByZ,WAAW,IAAnC,GAA0Cza,KAAKC,KAAL,CAAWwa,MAAX,EAAmB7S,QAA7D,GAAwEuU,YAAY,CAAZ,EAAevU,QAA9G,GAA0H,IAFlI;AAGC,kBAAO;AACN;AACAiU,qBAAS,OAFH;AAGNhI,sBAAU,MAHJ;AAINiI,qBAAQ,cAJF;AAKN/B,2BAAe;AALT,YAHR;AAUEjb,mBAAS+F,MAAT,GAAkB,CAAlB,GAAuB4V,WAAWzZ,SAAX,IAAwByZ,WAAW,IAAnC,GAA0Cza,KAAKC,KAAL,CAAWwa,MAAX,EAAmB7S,QAA7D,GAAwEuU,YAAY,CAAZ,EAAevU,QAA9G,GAA0H;AAV5H,UAjBC;AA6BD,uCAAC,UAAD,IAAM,MAAK,uBAAX,EAAmC,OAAO,EAACmB,OAAO,SAAR,EAAmBD,UAAU,MAA7B,EAA1C;AACM,mBAAS,OAAKkS,cAAL,CAAoB9H,IAApB,CAAyB,MAAzB,EAA+BuH,MAA/B,EAAuC0B,YAAY,CAAZ,CAAvC,EAAuDjS,OAAOtK,EAA9D,CADf;AA7BC,SADD;AAiCA;AACD;AACD;AACD;AA/DF,IA7LiB,EA8PjB;AACCqM,WAAO,IADR;AAECD,eAAW,QAFZ;AAGCY,WAAOsN,YAAY5b,KAAZ,CAHR;AAICwO,cAAU,CAACjE,QAAD,IAAa,CAACoK,SAJzB;AAKCxE,WAAO,QALR;AAMCC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAMwJ,UACL;AAAA;AAAA;AACE/E,cAAQ,IAAR,IAAgBA,QAAQ,EAAxB,GAA6B,IAA7B,GACA;AAAA;AAAA;AAAG;AAAA;AAAA,UAAM,OAAO,EAACgF,YAAY,KAAb,EAAoB5K,OAAO,MAA3B,EAAb;AAAA;AAAA,QAAH;AAAA;AAAgE4F;AAAhE,OAFF;AAGEzE,aAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,IAAmB,EAA9C,GAAmD,IAAnD,GAA0DoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC3F,cAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,OAF0D,EAExDoB,GAFwD,CAEpD,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACvB,cAAQ;AAAA;AAAA,UAAG,WAAW9F,KAAK4U,MAAL,IAAe,IAAf,IAAuB5U,KAAK4U,MAAL,IAAe,EAAtC,GAA2C,QAA3C,GAAsD,EAApE;AACG,cAAK,UAAU9O,KADlB;AACyB;AAAA;AAAA;AAChC,iBAAO,EAAC6O,YAAY,KAAb,EAAoB5K,OAAO,MAA3B,EADyB;AAAA;AACcjE,iBAAQ,CADtB;AAAA;AAAA,SADzB;AAAA;AAE2D9F,aAAK4U;AAFhE,QAAR;AAGA,OAN0D;AAH5D,MADD;AAaA,YACC;AAAA;AAAA;AACC,cAAO,EAAChH,OAAO,MAAR,EAAgBuG,QAAQ,MAAxB,EAAgCC,YAAY,MAA5C,EADR;AAEC,gBAAS,OAAKR,KAAL,CAAWM,IAAX,CAAgB,MAAhB,EAAsBhJ,MAAtB,CAFV,EAEyC,IAAIA,OAAOtK,EAFpD;AAGC;AAAC,oBAAD;AAAA,SAAS,SAAS8T,OAAlB,EAA2B,SAAQ,OAAnC;AACC;AAAA;AAAA;AACC,gBAAO,EAACG,UAAU,OAAX,EADR;AAEC,oBAAU,QAFX;AAGElF,gBAAQ,IAAR,IAAgBA,QAAQ,EAAxB,GAA6B,IAA7B,GACA;AAAA;AAAA;AAAM;AAAA;AAAA,YAAM,OAAO,EAACgF,YAAY,KAAb,EAAoB5K,OAAO,MAA3B,EAAb;AAAA;AAAA,UAAN;AAAA;AAAmE4F;AAAnE,SAJF;AAKEzE,eAAOpL,QAAP,IAAmB,IAAnB,IAA2BoL,OAAOpL,QAAP,IAAmB,EAA9C,GAAmD,IAAnD,GAA0DoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC3F,gBAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,SAF0D,EAExDoB,GAFwD,CAEpD,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AACvB,gBAAQ;AAAA;AAAA,YAAM,KAAK,UAAUA,KAArB;AACM,sBAAW9F,KAAK4U,MAAL,IAAe,IAAf,IAAuB5U,KAAK4U,MAAL,IAAe,EAAtC,GAA2C,QAA3C,GAAsD,EADvE;AAEkB;AAAA;AAAA,aAAM,OAAO,EAACE,aAAa,KAAd,EAAqBH,YAAY,KAAjC,EAAwC5K,OAAO,MAA/C,EAAb;AAAA;AACGjE,mBAAQ,CADX;AAAA;AAAA,WAFlB;AAAA;AAGyC9F,eAAK4U;AAH9C,UAAR;AAIA,SAP0D;AAL5D;AADD;AAHD,MADD;AAsBA;AA1CF,IA9PiB,EA0SjB;AACC3H,WAAO,IADR;AAECD,eAAW,WAFZ;AAGCyC,WAAO,QAHR;AAICC,YAAQ,gBAACC,IAAD,EAAOzE,MAAP,EAAkB;AACzB,SAAI6J,aAAa,IAAjB;AACA,SAAI7C,aAAanS,MAAb,CAAoB,gBAAQ;AAC/B,aAAOC,QAAQkL,OAAOtK,EAAtB;AACA,MAFG,EAEDiF,MAFC,GAEQ,CAFR,IAEa,CAACsM,UAFlB,EAE8B;AAC7B,aAAQ;AAAA;AAAA;AACA;AAAA;AAAA,UAAG,SAAS,OAAKe,OAAL,CAAagB,IAAb,CAAkB,MAAlB,EAAwBhJ,OAAOtK,EAA/B,CAAZ;AAAA;AAAA,QADA;AAEH;AAAA;AAAA,UAAG,WAAU,MAAb,EAAoB,SAAS,OAAK2R,iBAAL,CAAuB2B,IAAvB,CAA4B,MAA5B,EAAkChJ,OAAOtK,EAAzC,CAA7B;AAAA;AAAA;AAFG,OAAR;AAIA,MAPD,MAOO;AACN;AACA,UAAIiT,WAAW3I,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC9E,cAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,OAF6C,CAA9C;AAGA,UAAMuR,YAAYqC,YAAY,IAAZ,IAAoBA,SAAShO,MAAT,IAAmB,CAAvC,GAA2C,CAA3C,GAA+CgO,SAAShO,MAA1E;AACA,UAAIgE,QAAJ,EAAc;AAAG;AAChB,WAAI2H,aAAa,CAAjB,EAAoB;AAAE;AACrB,eAAO;AAAA;AAAA,WAAG,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAZ;AAAA;AAAA,SAAP;AACA;AACA,QAHD,MAGO;AAAG;AACT,eAAQ;AAAA;AAAA;AACiB;AAAA;AAAA,YAAG,OAAM,cAAT,EAAc,SAAS,OAAK0G,UAAL,CAAgBsC,IAAhB,CAAqB,MAArB,EAA2BhJ,OAAOtK,EAAlC,CAAvB;AAA+D4Q;AAA/D,UADjB;AAEiB,uCAAC,UAAD,IAAM,SAAS,OAAKY,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAf,EAAoD,WAAU,SAA9D;AACM,iBAAO,EAAC8J,YAAY,MAAb,EADb,EACmC,OAAM,cADzC,EAC8C,MAAK,MADnD;AAFjB,SAAR;AAKA;AACD,OAXD,MAWO;AAAG;AACT,cACC;AAAA;AAAA,UAAG,SAAS,OAAK5C,WAAL,CAAiB8B,IAAjB,CAAsB,MAAtB,EAA4BhJ,MAA5B,CAAZ;AAAkDsG,qBAAa,CAAb,GAAiBuD,UAAjB,GAA8BvD;AAAhF,QADD;AAEA;AACD;AACD;AAnCF,IA1SiB,CAAlB;AAgVA,OAAM3B,UAAUL,UAAUnO,GAAV,CAAc,eAAO;AACpC,QAAI,CAACyO,IAAIhC,QAAT,EAAmB;AAClB,YAAOgC,GAAP;AACA;AACD,wBACIA,GADJ;AAECC,aAAQ;AAAA,aAAW;AAClB7E,qBADkB;AAElB4C,iBAAUgC,IAAIhC,QAFI;AAGlBd,kBAAW8C,IAAI9C,SAHG;AAIlBC,cAAO6C,IAAI7C,KAJO;AAKlBC,mBAAYpO,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CALM;AAMlB/B,mBAAY,OAAKA,UANC;AAOlBgC,qBAAc,OAAKA;AAPD,OAAX;AAAA;AAFT;AAYA,IAhBe,CAAhB;AAiBA,OAAM8H,oBAAoB,SAApBA,iBAAoB,CAAC/J,MAAD,EAAY;AACrC;AACA,QAAIqD,YAAY;AACf3N,SAAI,EADW;AAEfiB,UAAKqJ,OAAOtK,EAAP,IAAa,EAFH;AAGf4C,gBAAW0H,OAAO1H,SAAP,IAAoB,EAHhB;AAIfvD,eAAU,SAJK;AAKf0S,cAASzH,OAAOyH,OAAP,IAAkB,IAAlB,GAAyB,EAAzB,GAA8BzH,OAAOyH,OAL/B;AAMfjE,mBAAc,CANC;AAOfhD,iBAAY,CAPG;AAQfwJ,WAAM,CARS;AASfzU,WAAM,EATS;AAUfmU,aAAQ,EAVO;AAWf9H,gBAAW,IAXI;AAYfH,cAAS;AAZM,KAAhB;AAcA,WACC,8BAAC,oBAAD;AACC,YAAO,OAAKpN,KADb;AAEC,aAAQ2L,MAFT;AAGC,gBAAWqD,SAHZ;AAIC,iBAAYzP,KAAK8G,IAAL,CAAU,OAAKrG,KAAL,CAAW2N,UAArB,CAJb;AAKC,iBAAYhC,OAAOpL,QAAP,IAAmB,IAAnB,GAA0B,EAA1B,GAA+BoL,OAAOpL,QAAP,CAAgBC,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAC3E,aAAOA,KAAKC,QAAL,KAAkB,SAAzB;AACA,MAF0C,CAL5C;AAQC,uBAAkB;AAAA,aAAMgU,aAAa,CAACpK,QAAd,GAAyB,OAAKsJ,QAAL,CAAcjI,MAAd,CAAzB,GAAiD,OAAKyG,gBAAL,CAAsBzG,OAAOtK,EAA7B,CAAvD;AAAA,MARnB;AASC,wBAAmB,OAAKyN,iBATzB;AAUC,eAAU8D,UAVX;AAWC,SAAIjH,OAAOtK,EAXZ;AAYC,gBAAW,OAAKsO;AAZjB,MADD;AAgBA,IAhCD;AAiCA,UACC;AAAA;AAAA;AACC,kCAAC,WAAD;AACC,iBAAYG,UADb;AAEC,mBAAc;AAAA,aAAM,cAAN;AAAA,MAFf;AAGC,gBAAU,wBAHX;AAIC,eAAU,KAJX;AAKC,iBAAYnB,UALb;AAMC,cAAS2B,OANV;AAOC,iBAAY,KAPb;AAQC,WAAM,QARP;AASC,uBAAkB,IATnB;AAUC,uBAAkB,KAVnB;AAWC,4BAAuB,CAAC,CAXzB;AAYC,sBAAiBqC,YAZlB;AAaC,wBAAmB+C,iBAbpB;AAcC,aAAQ;AAAA,aAAOxG,IAAI7N,EAAX;AAAA,MAdT;AAeC,aAAQ,EAAEwc,GAAG,CAACvN,QAAQhK,MAAR,GAAe,CAAhB,IAAmB,GAAnB,GAAuB,GAA5B;AAfT,MADD;AAkBEgE,eAAW,IAAX,GACA,8BAAC,UAAD,IAAM,SAAS,KAAKyE,SAApB,EAA+B,OAAO,EAAC3I,QAAQ,QAAT,EAAmBoE,OAAO,SAA1B,EAAqCD,UAAU,MAA/C,EAAtC;AACM,WAAK,aADX;AAnBF,IADD;AAwBA;;;;EA57B0B/D,gBAAMC,S;;kBA+7BnByL,a;;;;;;;;;;;;;;;;;;ACzzCf;;;;AACA;;AACA;;;;AACA;;;;;;;;;;;;+eANA;;;;;AAQA,SAASxL,SAAT,CAAmBC,GAAnB,EAAwBC,QAAxB,EAAkC;AAC9B,QAAMC,SAAS,IAAIC,UAAJ,EAAf;AACAD,WAAOE,gBAAP,CAAwB,MAAxB,EAAgC;AAAA,eAAMH,SAASC,OAAOG,MAAhB,CAAN;AAAA,KAAhC;AACAH,WAAOI,aAAP,CAAqBN,GAArB;AACH;;AAED,IAAMO,SAAS,SAATA,MAAS,CAACC,IAAD,EAAU;AAAA,QACdC,KADc,GACLD,KAAKhD,KADA,CACdiD,KADc;AAErB;;AACA,WAAO,IAAIC,gBAAJ,CAAQ;AACbC,qBAAaF,MAAMG,aADN;AAEbC,yBAAiBJ,MAAMK,iBAFV;AAGbC,kBAAUN,MAAMM,QAHH;AAIbC,gBAAQP,MAAMO,MAJD,EAIS;AACtBC,gBAAQR,MAAMQ,MALD,EAKQ;AACrBC,kBAAUT,MAAMU;AANH,KAAR,CAAP;AAQH,CAXD;;AAaA,IAAMC,aAAa,SAAbA,UAAa,CAACC,IAAD,EAAOC,IAAP,EAAgB;AAC/B;AACA,WAAU,wBAASC,MAAT,CAAgB,UAAhB,CAAV,SAAyCD,KAAKE,GAA9C,SAAqDF,KAAK/G,IAA1D;AACH,CAHD;;AAKA,IAAMkH,cAAc,SAAdA,WAAc,CAACjB,IAAD,EAAOa,IAAP,EAAaC,IAAb,EAAsB;AACtC,QAAM7F,MAAM2F,WAAWC,IAAX,EAAiBC,IAAjB,CAAZ;AACA,WAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCrB,eAAOC,IAAP,EAAaqB,eAAb,CAA6BpG,GAA7B,EAAkC6F,IAAlC,EAAwChI,IAAxC,CAA6C,gBAAQ;AACnDqI,oBAAQG,IAAR,EADmD,CACpC;AAChB,SAFD,EAEGC,KAFH,CAES,iBAAS;AAChBH,mBAAOnE,KAAP;AACD,SAJD;AAKD,KANM,CAAP;AAOH,CATD;;IAWM0Z,S;;;AACF,uBAAYle,KAAZ,EAAmB;AAAA;;AAAA,0HACTA,KADS;;AAAA,cAsDnBgJ,YAtDmB,GAsDJ,UAACC,IAAD,EAAU;AACrB,gBAAMC,SAASD,KAAKZ,IAAL,CAAUa,MAAzB;;AAEA;AACA,gBAAIC,wCAAeF,KAAKE,QAApB,EAAJ;AACA,gBAAIC,cAAcvH,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeoH,QAAf,CAAX,EAAqCvI,MAArC,CAA4C,UAACyH,IAAD,EAAQ;AAAC,uBAAOA,KAAKa,MAAL,IAAab,KAAKa,MAAL,KAAgB,MAApC;AAA4C,aAAjG,CAAlB,CALqB,CAKkG;AACvH,gBAAIG,cAAcxH,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeoH,QAAf,CAAX,CAAlB;AACAE,0BAAcA,YAAYzI,MAAZ,CAAmB,UAACyH,IAAD,EAAU;AACvC,oBAAIA,KAAKa,MAAL,IAAab,KAAKa,MAAL,KAAgB,MAAjC,EAAyC;AACrC,2BAAO,KAAP;AACH;AACD,uBAAO,IAAP;AACH,aALa,CAAd;AAMAG,0BAAcA,YAAYnH,GAAZ,CAAgB,gBAAQ;AAClC,oBAAImG,KAAKiB,aAAT,EAAwB;AACpB,wBAAM9G,MAAM,MAAK+B,KAAL,CAAWgF,IAAX,GAAgBpB,WAAW,MAAX,EAAmBE,IAAnB,CAA5B;AACA,2BAAQ7H,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACtB8H,6BAAIF,KAAKE,GADa;AAEtBjH,8BAAK+G,KAAK/G,IAFY;AAGtB4H,gCAAO,MAHe;AAItB1G,6BAAIA,GAJkB;AAKtBgH,gCAAQ,IALc;AAMtBC,kCAAUpB,KAAK/G,IANO;AAOtBoI,kCAAUlH,GAPY;AAQtBf,4BAAI;AARkB,qBAAlB,CAAR;AAUH;AACD,uBAAO4G,IAAP;AACH,aAfa,CAAd;AAgBI,gBAAIa,UAAQrG,SAAZ,EAAuB;AAC1B;AACA;AACA,oBAAI8G,QAAQ9H,KAAKC,KAAL,CAAWD,KAAKE,SAAL,8BAAoBsH,WAApB,GAAX,CAAZ;AACA,oBAAIO,MAAM,EAAV;AACAD,sBAAMjD,MAAN,IAAgBiD,MAAMzH,GAAN,CAAU,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC1CiD,wBAAIC,IAAJ,CAAS;AACRL,gCAAQ3I,KAAK2I,MADL;AAERC,kCAAU5I,KAAK4I,QAFP;AAGRC,kCAAU7I,KAAK6I,QAHP;AAIRhH,6BAAK,MAAK1C,KAAL,CAAW0C,GAJR;AAKR2B,mCAAW,MAAKrE,KAAL,CAAWqE,SALd;AAMR5C,4BAAIZ,KAAKY;AAND,qBAAT;AAQA,iBATe,CAAhB;AAUA,sBAAKzB,KAAL,CAAWyE,cAAX,CAA0BmF,GAA1B;AACA,aAhBG,MAiBC,IAAIV,WAAW,SAAf,EAA0B;AAAI;AACjC,oBAAIzH,KAAKwH,KAAKZ,IAAL,CAAU5G,EAAnB;AACA,oBAAIA,OAAK,EAAL,IAASA,OAAK,IAAlB,EAAwB;AAAE;AACzB,0BAAKzB,KAAL,CAAW4E,OAAX,CAAmBnD,EAAnB;AACA;AACF;;AAEL,kBAAKsD,QAAL,CAAc;AACNoE,uDAAcC,WAAd,sBAA8BC,WAA9B;AADM,aAAd;AAGC,SA9GkB;;AAAA,cAgHnBS,YAhHmB,GAgHJ,UAACzB,IAAD,EAAU;AACrB,gBAAM0B,QAAQ1B,KAAKrH,IAAL,KAAc,YAA5B;AACA,gBAAI,KAAJ,EAAW;AACTkD,8BAAQM,KAAR,CAAc,+BAAd;AACD;AACD,gBAAMwF,SAAS3B,KAAK4B,IAAL,GAAY,IAAZ,GAAmB,IAAnB,GAA0B,IAAzC;AACA,gBAAI,CAACD,MAAL,EAAa;AACX9F,8BAAQM,KAAR,CAAc,8BAAd;AACD;AACD,gBAAIyC,SAAS,IAAIC,UAAJ,EAAb;AACAD,mBAAOI,aAAP,CAAqBgB,IAArB;AACApB,mBAAOiD,SAAP,GAAmB,YAAM;AACrB;AACA1B,mCAAkB,aAAlB,EAAiCH,IAAjC,EACKhI,IADL,CACU,gBAAQ;AAAC,2BAAOwI,IAAP;AAAa,iBADhC;AAEH,aAJD;AAKA,mBAAO,KAAP,CAhBqB,CAgBP;AACjB,SAjIkB;;AAEf,cAAKtE,KAAL,GAAa;AACT4E,sBAAU,MAAKnJ,KAAL,CAAWmJ,QADZ;AAETgB,qBAAS,KAFA;AAGT3C,mBAAO;AACHG,+BAAe,EADZ,EACe;AAClBE,mCAAmB,EAFhB,EAEmB;AACtBC,0BAAU,EAHP,EAGU;AACbC,wBAAQ,gBAJL,EAIuB;AAC1BC,wBAAQ,OALL,EAKc;AACjBE,8BAAc,6BANX,CAM2C;AAN3C,aAHE;AAWTqB,kBAAM,4CAXG,CAW2C;AAX3C,SAAb;AAFe;AAelB;;;;kDAEsBa,S,EAAW;AACjC,gBAAIvI,KAAKE,SAAL,CAAeqI,UAAUjB,QAAzB,KAAoCtH,KAAKE,SAAL,CAAe,KAAK/B,KAAL,CAAWmJ,QAA1B,CAAxC,EAA6E;AACvE,qBAAKpE,QAAL,CAAc;AACVoE,8BAAUiB,UAAUjB;AADV,iBAAd;AAGF;AACD,gBAAItH,KAAKE,SAAL,CAAeqI,UAAU9D,OAAzB,KAAmCzE,KAAKE,SAAL,CAAe,KAAK/B,KAAL,CAAWsG,OAA1B,CAAvC,EAA2E;AACvE,oBAAIkB,QAAQ3F,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,KAAKwC,KAAL,CAAWiD,KAA1B,CAAX,CAAZ;AACH,qBAAKzC,QAAL,CAAc;AACPyC,2BAAOhH,OAAOC,MAAP,CAAc+G,KAAd,EAAqB;AACxBG,uCAAeyC,UAAU9D,OAAV,CAAkBoB,WADT,EACsB;AAC9CG,2CAAmBuC,UAAU9D,OAAV,CAAkBsB,eAFb,EAE8B;AACtDE,kCAAUsC,UAAU9D,OAAV,CAAkB+D;AAHJ,qBAArB;AADA,iBAAd;AAOA;AACJ;;;4CAEmB;AAChB,gBAAI,KAAKrK,KAAL,CAAWmJ,QAAf,EAAyB;AACrB,qBAAKpE,QAAL,CAAc;AACVoE,8BAAU,KAAKnJ,KAAL,CAAWmJ;AADX,iBAAd;AAGH;AACF,gBAAI,KAAKnJ,KAAL,CAAWsG,OAAf,EAAwB;AACpB,oBAAIkB,QAAQ3F,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,KAAKwC,KAAL,CAAWiD,KAA1B,CAAX,CAAZ;AACA,qBAAKzC,QAAL,CAAc;AACVyC,2BAAOhH,OAAOC,MAAP,CAAc+G,KAAd,EAAqB;AACxBG,uCAAe,KAAK3H,KAAL,CAAWsG,OAAX,CAAmBoB,WADV,EACuB;AAC/CG,2CAAmB,KAAK7H,KAAL,CAAWsG,OAAX,CAAmBsB,eAFd,EAE+B;AACvDE,kCAAU,KAAK9H,KAAL,CAAWsG,OAAX,CAAmB+D;AAHL,qBAArB;AADG,iBAAd;AAOH;AAEH;;;iCA8EQ;AAAA,gBACElB,QADF,GACc,KAAK5E,KADnB,CACE4E,QADF;;AAEL,gBAAMnJ,QAAQ;AACVsB,sBAAM,MADI;AAEVgJ,0BAAU,KAAKtK,KAAL,CAAWsK,QAFX;AAGVC,0BAAU,KAAKvB,YAHL;AAIVc,8BAAc,KAAKA,YAJT;AAKVU,0BAAU,MALA;AAMVC,2BAAW,oBAND;AAOVC,0BAAU,KAAK1K,KAAL,CAAW0K;AAPX,aAAd;AASA,mBACI;AAAC,4BAAD;AAAA,6BAAY1K,KAAZ,IAAmB,UAAUmJ,QAA7B;AACI,8CAAC,UAAD,IAAM,OAAO,EAACwB,UAAU,MAAX,EAAmBC,OAAO,SAA1B,EAAb,EAAmD,MAAK,cAAxD;AADJ,aADJ;AAKN;;;;EAnJsBhE,gBAAMC,S;;kBAsJfqX,S;;;;;;;;;;;;;;;;;YCjMf;;;;;;AAIA;;;;AACA;;AACA;;AAEA;;IAAave,I;;AACb;;;;;;;;;;;;;;IAEQ4W,Q,GAAaC,W,CAAbD,Q;;;AAER,IAAMnL,2BAA2B,SAA3BA,wBAA2B,OAAQ;AACrCC,uBAAarK,IAAb,EAAmB;AACfkD,iBAAS,iBADM;AAEfoH,qBACI;AAHW,KAAnB;AAKH,CAND;;IAWqB6S,Y,OADpBpe,mB;;;AAEG,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACTA,KADS;;AAAA,cA6BnBoe,SA7BmB,GA6BP,YAAM;AACd,kBAAKrZ,QAAL,CAAc;AACVsZ,yBAAS;AADC,aAAd;AAGH,SAjCkB;;AAAA,cAmCnBC,QAnCmB,GAmCR,aAAK;AACZ,gBAAI,MAAK/Z,KAAL,CAAW2I,KAAX,IAAkB,EAAlB,IAAsB,MAAK3I,KAAL,CAAW2I,KAAX,IAAkB,IAA5C,EAAkD;AAC9ChJ,8BAAQuP,IAAR,CAAa,SAAb;AACA,uBAAO,KAAP;AACH;AACD,gBAAMzP,SAAS;AACXK,2BAAW,MAAKjE,KAAL,CAAWiE,SADX;AAEXmM,sBAAM,MAAKjM,KAAL,CAAW2I;AAFN,aAAf;AAIA,kBAAK9M,KAAL,CAAWme,YAAX,CAAwBva,MAAxB,EAAgC3D,IAAhC,CAAqC,UAAC4D,GAAD,EAAO;AACxC,oBAAIA,GAAJ,EAAS;AACLmH,6CAAyB,SAAzB;AACA,0BAAKoJ,QAAL;AACD;AACC,0BAAKpU,KAAL,CAAWmB,YAAX;AACH,iBALD,MAKO;AACH2C,kCAAQM,KAAR,CAAc,MAAd;AACH;AACJ,aATD;AAUH,SAtDkB;;AAAA,cAwDnBgQ,QAxDmB,GAwDR,YAAM;AACb,kBAAKzP,QAAL,CAAc;AACVsZ,yBAAS,KADC;AAEVnR,uBAAO;AAFG,aAAd;AAIH,SA7DkB;;AAAA,cA+DnB3C,QA/DmB,GA+DR,gBAA2B;AAAA,gBAAd2C,KAAc,QAAxBsR,MAAwB,CAAdtR,KAAc;;AAClC,kBAAKnI,QAAL,CAAc,EAAEmI,YAAF,EAAd;AACH,SAjEkB;;AAEf,cAAK9M,KAAL,GAAa,MAAKJ,KAAL,CAAWI,KAAxB;AACA,cAAKmE,KAAL,GAAa;AACT8Z,qBAAS,KADA;AAETnR,mBAAO;AAFE,SAAb;AAHe;AAOlB;;;;6CAEoB,CAEpB;;;4CAEmB,CAEnB;;AAED;;;;uCACelJ,M,EAAQ;AAAA,gBACZvC,EADY,GACDuC,MADC,CACZvC,EADY;AAAA,gBACRuN,GADQ,GACDhL,MADC,CACRgL,GADQ;AAAA,gBAEZhM,cAFY,GAEM,KAAKhD,KAFX,CAEZgD,cAFY;AAAA,gBAGZ7C,KAHY,GAGH,KAAKC,KAHF,CAGZD,KAHY;;AAInB,gBAAIA,SAAO0C,SAAX,EAAsB;AAAG;AACrBG,+BAAegM,GAAf;AACH,aAFD,MAEO;AACHhM,+BAAevB,EAAf;AACH;AACJ;;;iCAwCQ;AAAA;;AAAA,yBACsB,KAAKzB,KAD3B;AAAA,gBACEqG,QADF,UACEA,QADF;AAAA,gBACYE,MADZ,UACYA,MADZ;AAAA,yBAEwB,KAAKnG,KAF7B;AAAA,gBAEEmE,KAFF,UAEEA,KAFF;AAAA,gBAESD,WAFT,UAESA,WAFT;;AAGL,gBAAMiR,UACF;AAAA;AAAA;AACI;AAAA;AAAA;AAAIhR,6BAAO,CAAP,GAAS,iBAAT,GAA2BD;AAA/B;AADJ,aADJ;;AAMA,mBACI;AAAA;AAAA;AACI;AAAC,+BAAD;AAAA,sBAAO,WAAW,EAAlB;AACG;AAAA;AAAA,0BAAK,WAAU,YAAf;AACM,mCAAO,EAACma,iBAAiB,MAAlB;AACHpQ,2CAAW,MADR;AAEHqP,yCAAS,WAFN,EADb;AAIMrX,iCAASK,MAAT,GAAgB,CAAhB,GAAkBL,SAASnE,GAAT,CAAa,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC7C,mCACI;AAAA;AAAA;AACI,6CAAS,OAAK3D,cAAL,CAAoB+R,IAApB,CAAyB,MAAzB,EAA+BlU,IAA/B,CADb;AAEI,yCAAK8F,KAFT;AAGI,2CAAO;AACH8H,+CAAO,KADJ;AAEHC,+CAAO,MAFJ;AAGHiP,iDAAS,aAHN;AAIHxI,kDAAU;AAJP,qCAHX;AASKtU,qCAAKkV,IAAL,IAAW,GAAX,GACG,8BAAC,WAAD,IAAO,WAAU,+BAAjB,EAAiD,QAAO,YAAxD,GADH,GAEG,wCAAM,WAAU,wBAAhB,GAXR;AAYG,8DAAC,cAAD;AACK,+CAAU,mBADf;AAEK,2CAAO;AACH4H,iDAAS,aADN;AAEHhI,qDAAa;AAFV,qCAFZ;AAMK,0CAAK,OANV;AAOK,mDAAc,QAPnB;AAQK,6CAAS9U,KAAKkV,IAAL,IAAW,IAAX,GAAgB,CAAhB,GAAkBlV,KAAKkV,IARrC,GAZH;AAqBI;AAAA;AAAA,sCAAK,OAAO,EAAClF,WAAW,MAAZ,EAAoBsE,UAAU,UAA9B,EAA0CC,MAAM,OAAhD,EAAZ;AACI;AAAA;AAAA,0CAAG,WAAWvU,KAAKkV,IAAL,GAAU,CAAV,GAAY,+BAAZ,GAA4C,wBAA1D;AAAqFlV,6CAAKE;AAA1F,qCADJ;AAEI;AAAA;AAAA,0CAAG,WAAU,wBAAb;AACKF,6CAAK2S,OAAL,IAAc,IAAd,GAAmB,GAAnB,GAAuB3S,KAAK2S,OAAL,CAAatR,GAAb,CAAiB;AAAA,mDAAMrB,KAAKsM,QAAX;AAAA,yCAAjB,EAAsCsD,IAAtC,CAA2C,GAA3C,CAD5B;AAEK5P,6CAAKkV,IAAL,IAAW,GAAX,GAAe,8BAAC,UAAD,IAAM,MAAK,cAAX,EAA0B,OAAO,EAACJ,aAAa,KAAd,EAAqBhL,UAAU,MAA/B,EAAuCC,OAAO,SAA9C,EAAjC,GAAf,GAA4G;AAFjH,qCAFJ;AAMI;AAAA;AAAA,0CAAG,WAAU,wBAAb;AAAuC/J,6CAAK6d,UAAL,IAAiB,CAAjB,GAAoB7d,KAAKkV,IAAL,GAAU,CAAV,GAAY;AAAA;AAAA,8CAAG,OAAO,EAAC0H,QAAO,SAAR,EAAV;AAAA;AAAA,yCAAZ,GAAkD,IAAtE,GAA6E5c,KAAKkV,IAAL,IAAW,GAAX,GAAe,sBAAOlV,KAAK6d,UAAZ,EAAwBpW,MAAxB,CAA+B,kBAA/B,CAAf,GAAkE;AAAA;AAAA,8CAAG,OAAO,EAACmV,QAAO,SAAR,EAAV;AAAA;AAAA;AAAtL;AANJ;AArBJ,6BADJ;AA+BH,yBAhCkB,CAAlB,GAgCE,8BAAC,WAAD,IAAO,aAAa,KAApB,GApCR;AAqCI;AAAA;AAAA;AACI,uCAAO;AACHhP,2CAAO,IADJ;AAEHC,2CAAO,MAFJ;AAGHiP,6CAAS,aAHN;AAIHxI,8CAAU;AAJP,iCADX;AAOI,oEAAM,WAAU,wBAAhB,GAPJ;AAQI;AAAA;AAAA,kCAAK,OAAO,EAACtE,WAAW,MAAZ,EAAoBsE,UAAU,UAA9B,EAA0CC,MAAM,OAAhD,EAAyDC,KAAK,MAA9D,EAAZ;AACI;AAAA;AAAA,sCAAG,WAAW,wBAAd,EAAwC,OAAO,EAAC5G,OAAO,MAAR,EAA/C;AAAA;AAAA;AADJ;AARJ,yBArCJ;AAiDK,yBAAClI,MAAD,GAAQ;AAAC,wCAAD;AAAA;AACD,yCAAS,KAAK6X,SADb;AAED,2CAAW7Z,SAAO,CAAP,GAAS,eAAT,GAAyB,QAFnC;AAGD,sCAAK,SAHJ;AAID,uCAAM,OAJL;AAKD,2CALC;AAAA;AAAA,yBAAR,GAOa,IAxDlB;AAyDI;AAAC,yCAAD;AAAA,8BAAS,SAASgR,OAAlB;AACI;AAAC,4CAAD;AAAA,kCAAQ,WAAWhR,SAAO,CAAP,GAAS,IAAT,GAAc,QAAjC;AACQ,0CAAK,SADb;AAEQ,2CAAM,OAFd;AAAA;AAAA;AADJ,yBAzDJ;AA8DI;AAAC,yCAAD;AAAA,8BAAS,SAASgR,OAAlB;AACI;AAAC,4CAAD;AAAA,kCAAQ,WAAWhR,SAAO,CAAP,GAAS,sBAAT,GAAgC,QAAnD;AACQ,0CAAK,SADb;AAEQ,2CAAM,OAFd;AAAA;AAAA;AADJ;AA9DJ;AADH,iBADJ;AAwEI;AAAC,+BAAD;AAAA;AACI,+BAAM,0EADV;AAEI,iCAAS,KAAKA,KAAL,CAAW8Z,OAFxB;AAGI,8BAAM,KAAKC,QAHf;AAII,kCAAU,KAAK9J;AAJnB;AAMM,kDAAC,QAAD;AACI,+BAAO,KAAKjQ,KAAL,CAAW2I,KADtB;AAEI,kCAAU,KAAK3C,QAFnB;AAGI,qCAAY,gCAHhB;AAII,kCAAU,EAAEoU,SAAS,CAAX,EAAcC,SAAS,CAAvB;AAJd;AANN;AAxEJ,aADJ;AAwFH;;;;EArKqChY,gBAAMC,S;;kBAA3BsX,Y;;;;;;;;;;;;;;;;;;kBCxBrB;;;;;;AAIA;;;;AACA;;AACA;;AACA;;IAAaxe,I;;AAEb;;;;AACA;;;;AACA;;;;AACA;;IAAYC,K;;;;;;;;;;;;;;;;IAINif,a,WAFL3T,WAAKC,MAAL,E,oBACApL,mB;;;AAEA,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA,mIACZA,KADY;;AAAA,eAsEnB+M,eAtEmB,GAsED,UAACC,GAAD,EAAMb,CAAN,EAAY;AAC7B,gBAAIT,gBAAJ;AACA,gBAAIS,EAAEzF,MAAN,EAAc;AACbgF,0BAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAQ;AAAC,2BAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AAAiE,iBAAhF,CAAV;AACA,aAFD,MAEO;AACN+K,0BAAW,EAAX;AACA;AACD,mBAAK3G,QAAL,CAAc;AACb2G;AADa,aAAd;AAP6B,gBAUtBuO,WAVsB,GAUP,OAAK1V,KAVE,CAUtB0V,WAVsB;AAW7B;;AACM,gBAAMmB,cAAc5a,OAAOC,MAAP,CAAc,EAAd,EAAkBwZ,WAAlB,EAA+B,EAACzG,SAAQ9H,OAAT,EAA/B,CAApB;AACA,mBAAK3G,QAAL,CAAc;AACVkV,6BAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkBwZ,WAAlB,EAA+BmB,WAA/B;AADH,aAAd;AAGH,SAtFe;;AAAA,eAyFnBrE,YAzFmB,GAyFJ,UAAC5K,CAAD,EAAO;AACrBA,cAAE6K,cAAF;AACA,gBAAIpH,cAAJ;AAFqB,8BAGcA,MAAMrL,KAHpB;AAAA,gBAGd0V,WAHc,eAGdA,WAHc;AAAA,gBAGDwB,WAHC,eAGDA,WAHC;AAIrB;;AACA,gBAAIE,oBAAoB1B,YAAYtZ,QAAZ,IAAsB,IAAtB,IAA4BsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,IAAkC,IAA9D,GAAmEsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAA3F,GAAoG,EAA5H;AACA,gBAAM4S,QAAQoI,kBAAkB/a,MAAlB,CAAyB,UAACC,IAAD,EAAQ;AAAC,uBAAOA,KAAKS,IAAL,IAAW,EAAX,IAAeT,KAAKS,IAAL,IAAW,IAAjC;AAAsC,aAAxE,CAAd;AACA,gBAAIiS,MAAM7M,MAAN,GAAa,CAAjB,EAAoB;AAAG;AACtBxC,8BAAQuP,IAAR,CAAa,UAAb;AACA,uBAAO,KAAP;AACA;AACD,gBAAMqL,WAAWnD,kBAAkB/a,MAAlB,CAAyB,UAACC,IAAD,EAAQ;AAAC,uBAAOA,KAAK8M,SAAL,IAAgB,EAAhB,IAAoB9M,KAAK8M,SAAL,IAAgB,IAApC,KAA2C9M,KAAK2M,OAAL,IAAc,EAAd,IAAkB3M,KAAK2M,OAAL,IAAc,IAA3E,CAAP;AAAwF,aAA1H,CAAjB;AACA,gBAAIsR,SAASpY,MAAT,GAAgB,CAApB,EAAuB;AAAG;AACzBxC,8BAAQuP,IAAR,CAAa,UAAb;AACA,uBAAO,KAAP;AACA;AACD;AACM;AACA,gBAAIQ,gBAAcwH,YAAY9a,QAAZ,IAAsB,IAAtB,IAA4B8a,YAAY9a,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,IAAkC,IAA9D,GAAmE8a,YAAY9a,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,CAAiCuB,GAAjC,CAAqC,gBAAM;AAC5H,uBAAO;AACH,4BAAQrB,KAAKS,IADV;AAEH,+BAAWT,KAAK2S,OAFb;AAGH,iCAAa3S,KAAK8M,SAHf;AAIH,+BAAW9M,KAAK2M,OAJb;AAKH,4BAAQ3M,KAAKkV;AALV,iBAAP;AAOH,aARoF,CAAnE,GAQf,EARH;AASA,gBAAIgJ,gBAAgB9E,YAAYtZ,QAAZ,IAAsB,IAAtB,IAA4BsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,IAAkC,IAA9D,GAAmEsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,CAAiCuB,GAAjC,CAAqC,gBAAM;AAC9H,uBAAO;AACH,4BAAQrB,KAAKS,IADV;AAEH,+BAAWT,KAAK2S,OAFb;AAGN,iCAAa3S,KAAK8M,SAHZ;AAIN,+BAAW9M,KAAK2M,OAJV;AAKH,4BAAQ3M,KAAKkV;AALV,iBAAP;AAOH,aARsF,CAAnE,GAQjB,EARH;AASA,gBAAMiJ,WAAWnd,KAAKE,SAAL,CAAekS,aAAf,KAA+BpS,KAAKE,SAAL,CAAegd,aAAf,CAAhD,CApCe,CAoCgE;AAC/E,gBAAME,YAAYhF,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAAxE,CArCe,CAqCkE;AACjF,gBAAIyL,UAAUvY,MAAV,IAAkB,CAAlB,IAAqBsY,YAAU,KAAnC,EAA0C;AACtC9a,8BAAQuP,IAAR,CAAa,UAAb;AACA,uBAAO,KAAP;AACH;AACD7D,kBAAM5P,KAAN,CAAYgL,IAAZ,CAAiBkP,uBAAjB,CAAyC,UAACpW,GAAD,EAAMoI,MAAN,EAAiB;AACtD,oBAAI,CAACpI,GAAL,EAAU;AACN8L,0BAAM5P,KAAN,CAAYgF,SAAZ,CAAsBiV,WAAtB;AACA,wBAAI7X,YAAYP,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAYgC,SAA3B,CAAX,CAAhB;AACAwN,0BAAMxP,KAAN,CAAYgC,SAAZ,GAAwB5B,OAAOC,MAAP,CAAc2B,SAAd,sBAA2BwN,MAAM5P,KAAN,CAAYyB,EAAvC,EAA4C,IAA5C,EAAxB;AACH;AACJ,aAND;AAON,SA1IkB;;AAAA,eA6IhB0Y,SA7IgB,GA6IJ,UAACC,QAAD,EAAWpL,GAAX,EAAmB;AAAA,gBACpBiL,WADoB,GACL,OAAK1V,KADA,CACpB0V,WADoB;;AAE3B,gBAAI5K,UAAU,EAAd;AACA+K,qBAAStG,OAAT,CAAiB,gBAAM;AAAA,oBACd9E,GADc,GACWnO,IADX,CACdmO,GADc;AAAA,oBACTrO,QADS,GACWE,IADX,CACTF,QADS;AAAA,oBACIqB,GADJ,4BACWnB,IADX;;AAEnBwO,wBAAQxF,IAAR,CAAa7H,GAAb;AACH,aAHD;AAIA,gBAAIqY,eAAeJ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B;AAAA,uBAAOC,KAAKC,QAAL,KAAgB,OAAvB;AAAA,aAA5B,EAA4D,CAA5D,CAAnB;AACAuZ,2BAAe7Z,OAAOC,MAAP,CAAc4Z,YAAd,EAA2B,EAAC,YAAWD,QAAZ,EAA3B,CAAf;AACA,gBAAIE,eAAeL,YAAYtZ,QAA/B;AACA,gBAAM4Z,aAAaD,aAAa9K,SAAb,CAAuB,gBAAO;AAAC,uBAAO3O,KAAKC,QAAL,KAAgB,OAAvB;AAA+B,aAA9D,CAAnB;AACAwZ,yBAAaC,UAAb,IAA2BF,YAA3B;AACA,mBAAKtV,QAAL,CAAc,EAACkV,aAAYzZ,OAAOC,MAAP,CAAcwZ,WAAd,EAA2B,EAAC,YAAWK,YAAZ,EAA3B,CAAb,EAAd;AACH,SA1Je;;AAAA,eA6JhBlW,WA7JgB,GA6JF,YAAM;AACnB,gBAAIhC,YAAYP,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWgC,SAA1B,CAAX,CAAhB;AACG,mBAAKhC,KAAL,CAAWgC,SAAX,GAAuB5B,OAAOC,MAAP,CAAc2B,SAAd,sBAA2B,OAAKpC,KAAL,CAAWyB,EAAtC,EAA2C,KAA3C,EAAvB;AACH,gBAAIY,WAAWR,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWiC,QAA1B,CAAX,CAAf;AACA,mBAAKjC,KAAL,CAAWiC,QAAX,GAAsB7B,OAAOC,MAAP,CAAc4B,QAAd,sBAA0B,OAAKrC,KAAL,CAAWyB,EAArC,EAA0C6K,OAAO,OAAKtM,KAAL,CAAW8E,KAAlB,IAAyB,CAAnE,EAAtB;AACG;AACA,mBAAKC,QAAL,CAAc;AACV0W,6BAAajb,OAAOC,MAAP,CAAc,EAAd,EAAkB,OAAK8D,KAAL,CAAW0V,WAA7B;AADH,aAAd;AAGH,SAtKe;;AAAA,eAyKhBpD,OAzKgB,GAyKN,YAAK;AACX,mBAAK7W,KAAL,CAAWgL,IAAX,CAAgB8L,WAAhB;AACA,mBAAK1S,WAAL;AACA,gBAAIhC,YAAYP,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWgC,SAA1B,CAAX,CAAhB;AACA,mBAAKhC,KAAL,CAAWgC,SAAX,GAAuB5B,OAAOC,MAAP,CAAc2B,SAAd,sBAA2B,OAAKpC,KAAL,CAAWyB,EAAtC,EAA2C,IAA3C,EAAvB;AACA;AACA,gBAAIlB,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,mBAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC,OAAKgE,KAAL,CAAWkX,WAApD,CAAtB;AACH,SAjLe;;AAAA,eAoLhBrO,YApLgB,GAoLD,UAAC1B,OAAD,EAAW;AAAA,gBACfuO,WADe,GACA,OAAK1V,KADL,CACf0V,WADe;AAEzB;;AACG,gBAAMmB,cAAc5a,OAAOC,MAAP,CAAc,EAAd,EAAkBwZ,WAAlB,EAA+B,EAACzG,SAAQ9H,OAAT,EAA/B,CAApB;AACA;AACA,gBAAInL,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,mBAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC6a,WAAzC,CAAtB;AACH,SA3Le;;AAElB,eAAKhb,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,eAAKmE,KAAL,GAAa;AACZwK,wBAAY,EADA,EACM;AAClBrD,qBAAQ,EAFI;AAGHkL,oBAAQ,IAHL,EAGY;AACfqD,yBAAa,EAJV,EAIc;AACjBvX,iBAAK,EALF;AAMH2B,uBAAW,EANR;AAOHoX,yBAAa,EAPV,CAOc;AAPd,SAAb;AAHkB;AAYlB;;;;kDAEyBrR,S,EAAW;AAAA;;AAC9B;;;AAGA,gBAAIA,UAAU7J,QAAV,KAAqB,KAAKP,KAAL,CAAWO,QAApC,EAA8C;AAC1C;AACA,oBAAI6J,UAAU7J,QAAV,CAAmBI,QAAnB,KAA8B,IAAlC,EAAwC;AAAE;AACtC,yBAAKoE,QAAL,CAAc;AACVgK,oCAAY;AADF,qBAAd;AAGH,iBAJD,MAIO;AAAG;AACN,wBAAMA,aAAa3E,UAAU7J,QAAV,CAAmBI,QAAnB,CAA4BC,MAA5B,CAAmC,UAACC,IAAD;AAAA,+BAAQA,KAAKC,QAAL,IAAe,OAAvB;AAAA,qBAAnC,EAAmE,CAAnE,EAAsEH,QAAzF;AACA,yBAAKoE,QAAL,CAAc;AACVgK,8CADU;AAEVkL,qCAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkB2J,UAAU7J,QAA5B,CAFH,EAE4C;AACtDmC,6BAAK0H,UAAU7J,QAAV,CAAmBI,QAAnB,CAA4BC,MAA5B,CAAmC,UAACC,IAAD;AAAA,mCAAQA,KAAKC,QAAL,IAAe,OAAvB;AAAA,yBAAnC,EAAmE,CAAnE,EAAsEW,EAHjE;AAIV4C,mCAAW+F,UAAU7J,QAAV,CAAmBI,QAAnB,CAA4BC,MAA5B,CAAmC,UAACC,IAAD;AAAA,mCAAQA,KAAKC,QAAL,IAAe,OAAvB;AAAA,yBAAnC,EAAmE,CAAnE,EAAsEuD,SAJvE;AAKVuS,gCAAQxM,UAAUM;AALR,qBAAd,EAMG,YAAI;AACH;AACA,4BAAIgR,OAAOtR,UAAU7J,QAAV,CAAmBI,QAAnB,CAA4BC,MAA5B,CAAmC,UAACC,IAAD;AAAA,mCAAQA,KAAKC,QAAL,IAAe,MAAvB;AAAA,yBAAnC,EAAkE,CAAlE,CAAX;AACA,4BAAIN,OAAOqS,IAAP,CAAY,OAAKtO,KAAL,CAAWkX,WAAvB,EAAoC/U,MAApC,GAA2C,CAA/C,EAAkD;AAC9C;AACA,gCAAI+U,cAAc5Z,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWkX,WAA1B,CAAX,CAAlB;AACA,mCAAK1W,QAAL,CAAc;AACV0W,6CAAa7b,MAAM+E,cAAN,CAAqB8W,WAArB,EAAkC,QAAlC,EAA4CC,IAA5C;AADH,6BAAd;AAGH;AACJ,qBAhBD;AAiBH;AACJ;AACP;;;4CAEmB;AACb;;;AAGA,gBAAI,KAAK1b,KAAL,CAAWO,QAAf,EAAyB;AACrB;AACA,oBAAI,KAAKP,KAAL,CAAWO,QAAX,CAAoBI,QAApB,KAA+B,IAAnC,EAAyC;AAAE;AACvC,yBAAKoE,QAAL,CAAc;AACVgK,oCAAY;AADF,qBAAd;AAGH,iBAJD,MAIO;AAAG;AACN,wBAAMA,aAAa,KAAK/O,KAAL,CAAWO,QAAX,CAAoBI,QAApB,CAA6BC,MAA7B,CAAoC,UAACC,IAAD;AAAA,+BAAQA,KAAKC,QAAL,IAAe,OAAvB;AAAA,qBAApC,EAAoE,CAApE,EAAuEH,QAA1F;AACA,yBAAKoE,QAAL,CAAc;AACVgK,8CADU;AAEVkL,qCAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKT,KAAL,CAAWO,QAA7B,CAFH;AAGVmC,6BAAK,KAAK1C,KAAL,CAAWO,QAAX,CAAoBI,QAApB,CAA6BC,MAA7B,CAAoC,UAACC,IAAD;AAAA,mCAAQA,KAAKC,QAAL,IAAe,OAAvB;AAAA,yBAApC,EAAoE,CAApE,EAAuEW,EAHlE;AAIV4C,mCAAW,KAAKrE,KAAL,CAAWO,QAAX,CAAoBI,QAApB,CAA6BC,MAA7B,CAAoC,UAACC,IAAD;AAAA,mCAAQA,KAAKC,QAAL,IAAe,OAAvB;AAAA,yBAApC,EAAoE,CAApE,EAAuEuD,SAJxE;AAKVuS,gCAAQ,KAAK5W,KAAL,CAAW0K;AALT,qBAAd;AAOH;AACJ;AACP;;AAoBD;;;AAoDG;;;AAgBA;;;AAYA;;;AAWA;;;;iCAUM;AACR,gBAAIkF,QAAQ,IAAZ;AADQ,gBAED3B,iBAFC,GAEoB2B,MAAM5P,KAAN,CAAYgL,IAFhC,CAEDiD,iBAFC;;AAGR,gBAAMmJ,iBAAiB;AACtBC,0BAAU;AACTC,wBAAI,EAACC,MAAM,EAAP,EADK;AAETE,wBAAI,EAACF,MAAM,CAAP;AAFK,iBADY;AAKtBG,4BAAY;AACXJ,wBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,wBAAI,EAACF,MAAM,EAAP;AAFO;AALU,aAAvB;AAHQ,+BAawB3H,MAAMrL,KAb9B;AAAA,gBAaAqS,MAbA,gBAaAA,MAbA;AAAA,gBAaQqD,WAbR,gBAaQA,WAbR;AAAA,gBAcD1V,KAdC,GAcQqL,MAAMxP,KAdd,CAcDmE,KAdC;AAAA,yBAec,KAAKvE,KAfnB;AAAA,gBAeDuG,MAfC,UAeDA,MAfC;AAAA,gBAeOzB,KAfP,UAeOA,KAfP;;AAgBR,gBAAI6W,oBAAoB1B,YAAYtZ,QAAZ,IAAsB,IAAtB,IAA4BsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,IAAkC,IAA9D,GAAmEsZ,YAAYtZ,QAAZ,CAAqB,CAArB,EAAwBA,QAA3F,GAAoG,EAA5H;AACM,gBAAI0V,UAAU4D,YAAYtZ,QAAZ,IAAsB,IAAtB,IAA4BsZ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B,UAACC,IAAD,EAAQ;AAAC,uBAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,aAAnE,EAAqE,CAArE,CAA1C,CAjBE,CAiBkH;AACpH,gBAAMoV,cAAcG,QAAQ1V,QAAR,IAAkB,IAAlB,GAAuB0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AACvE,uBAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACrB8H,yBAAK+N,MAAM7U,EADU;AAErBH,0BAAMgV,MAAM7M,QAFS;AAGrBP,4BAAQ,MAHa;AAIrB1G,yBAAK8T,MAAM5M,QAJU;AAKrBF,4BAAQ8M,MAAM9M,MALO;AAMrBC,8BAAS6M,MAAM7M,QANM;AAOrBC,8BAAU4M,MAAM5M,QAPK;AAQrBjI,wBAAI6U,MAAM7U;AARW,iBAAlB,CAAP;AAUH,aAX0C,CAAvB,GAWf,EAXL;AAYA,gBAAIsR,eAAepT,KAAK8G,IAAL,CAAUmJ,MAAMxP,KAAN,CAAY2S,YAAtB,EAAoC,KAAK/S,KAAL,CAAWyB,EAA/C,MAAsDoB,SAAtD,GAAgElD,KAAK8G,IAAL,CAAUmJ,MAAMxP,KAAN,CAAY2S,YAAtB,EAAoC,KAAK/S,KAAL,CAAWyB,EAA/C,CAAhE,GAAmH,EAAtI;AACA,gBAAIyd,QAAQnM,aAAarM,MAAb,GAAoB,CAApB,GAAsB,IAAtB,GAA2B,KAAvC;AACA,mBACL;AAAC,0BAAD;AAAA,kBAAM,cAAN,EAAe,OAAO,EAAC+H,OAAO,MAAR,EAAtB,EAAuC,WAAU,MAAjD;AACC;AAAA;AAAA,sBAAI,IAAI,KAAKzO,KAAL,CAAWyB,EAAnB,EAAuB,WAAU,mBAAjC;AAAsDmO,0BAAM5P,KAAN,CAAYO,QAAZ,CAAqBQ;AAA3E,iBADD;AAEa;AAAA;AAAA,sBAAM,WAAU,uBAAhB;AACK6V,6BACA;AAAC,oCAAD;AAAA,0BAAQ,WAAWrS,SAAS,CAAT,GAAa,QAAb,GAAwB,EAA3C;AACQ,sCAAUgC,MADlB;AAEQ,kCAAK,MAFb;AAGQ,qCAAS,KAAKnC,WAHtB;AAGoCU,iCAAO,CAAP,GAAU,IAAV,GAAiB;AAHrD,qBADA,GAKA;AAAA;AAAA;AACC;AAAA;AAAA,8BAAM,SAAS,KAAK+R,OAApB,EAA6B,WAAU,MAAvC;AAAA;AAAA,yBADD;AAEC;AAAC,wCAAD;AAAA,8BAAQ,UAAUqI,KAAlB,EAAyB,MAAK,MAA9B,EAAqC,SAAS,KAAKnI,YAAnD;AAAA;AAAA;AAFD;AANL,iBAFb;AAaa;AAAC,8BAAD;AAAA,+BAAM,WAAWjS,SAAO,CAAP,GAAW,QAAX,GAAsB,UAAvC,EAAmD,QAAO,QAA1D,IAAuEsS,cAAvE;AACX;AAAC,iCAAD;AAAA,0BAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb;AACC;AAAC,qCAAD;AAAA,8BAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACsB;AAAC,0CAAD,CAAM,IAAN;AAAA,kCAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACK7J,kDAAkB,SAAlB,EAA6B;AAC1BG,kDAAc6L,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAAZ,CAAoBtR,GAApB,CAAwB;AAAA,+CAAMrB,KAAKoM,MAAX;AAAA,qCAAxB,CAD9B;AAE1BiB,2CAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,iCAA7B,EAIG,8BAAC,uBAAD;AACI,0CAAM+V,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OADhE;AAEI,kDAAc,KAAKpG,YAFvB;AAGI,8CAAUwJ;AAHd,kCAJH;AADL;AADtB;AADD;AADW,iBAbb;AAgCE9R,yBAAO,CAAP,GAAS,IAAT,GACW,8BAAC,uBAAD;AACI,wBAAI,KAAK9E,KAAL,CAAWyB,EADnB;AAEI,gCAAYka,iBAFhB;AAGI,8BAAU,KAAKxB,SAHnB;AAII,+BAAW,KAAK5V,KAAL,CAAWF,SAJ1B;AAKI,yBAAK,KAAKE,KAAL,CAAW7B,GALpB;AAMI,8BAAUkU,MANd;AAOI,2BAAO,KAAKxW;AAPhB,kBAjCb;AA0CE0E,yBAAO,CAAP,GAAS,IAAT,GACW;AAAA;AAAA,sBAAK,WAAW8R,SAAO,MAAP,GAAc,cAA9B;AACI,kDAAC,kBAAD;AACI,wCAAgB,KAAK5W,KAAL,CAAWyE,cAD/B;AAEI,iCAAS,KAAKzE,KAAL,CAAW4E,OAFxB;AAGI,kCAAUsR,WAHd;AAII,6BAAKG,QAAQ5U,EAJjB;AAKI,mCAAW4U,QAAQhS,SALvB;AAMI,kCAAUuS,MANd;AAOI,iCAAS,KAAK5W,KAAL,CAAWyH;AAPxB;AADJ;AA3Cb,aADK;AAyDN;;;;EAvR0Bb,gBAAMC,S;kBA2RnBgY,a;;;;;;;;;;;;;;;;;;;kBC3Sf;;;;;AAGA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;IAAYjf,K;;;;;;;;;;;;;;IAEL6W,O,GAAWC,U,CAAXD,O;IACAF,Q,GAAYC,W,CAAZD,Q;IAGc4I,S,WAFpBjU,WAAKC,MAAL,E,oBACApL,mB;;;AAEA,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA,qHACZA,KADY;;AAAA,SA8FnB+W,YA9FmB,GA8FJ,UAAC5K,CAAD,EAAO;AACrBA,KAAE6K,cAAF;AACA,OAAIpH,cAAJ;AAFqB,OAGdvL,SAHc,GAGDuL,MAAMxP,KAHL,CAGdiE,SAHc;;AAIrBuL,SAAM5P,KAAN,CAAYgL,IAAZ,CAAiBiB,cAAjB,CAAgC,UAACnI,GAAD,EAAMoI,MAAN,EAAiB;AAChD;AACA,QAAI,CAACpI,GAAL,EAAU;AACT,SAAImW,cAAcpY,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMrL,KAAN,CAAY0V,WAA3B,CAAX,CAAlB;AADS,SAEFtD,MAFE,GAEM/G,MAAMrL,KAFZ,CAEFoS,MAFE;;AAGT,SAAM3S,SAASxD,OAAOC,MAAP,CAAcwZ,WAAd,EAA2B;AACzC,mBAAa5V,SAD4B;AAEzC,cAAQ;AACP,eAAQ6H,OAAO,MAAP,CADD;AAEP,eAAQA,OAAO,MAAP,CAFD;AAGP,eAAQA,OAAO,MAAP,CAHD;AAIP,eAAQA,OAAO,MAAP,CAJD;AAKP,eAAQA,OAAO,MAAP,CALD;AAMP,eAAQA,OAAO,MAAP;AAND,OAFiC;AAUzC,cAAQ;AACP,eAAQA,OAAO,MAAP,CADD;AAEP,eAAQA,OAAO,MAAP,CAFD;AAGP,eAAQA,OAAO,MAAP,CAHD;AAIP,eAAQA,OAAO,MAAP,CAJD;AAKP,iBAAUA,OAAO,QAAP,CALH;AAMP,kBAAWA,OAAO,SAAP,CANJ;AAOP,mBAAYyK,OAAO,UAAP;AAPL,OAViC;AAmBzC,cAAQ;AACP,qBAAczK,OAAO,YAAP,CADP;AAEP,eAAQA,OAAO,MAAP;AAFD;AAnBiC,MAA3B,CAAf;AAwBA0D,WAAM5P,KAAN,CAAYgF,SAAZ,CAAsBhB,MAAtB;AACA4L,WAAM7K,QAAN,CAAe;AACd6R,cAAQ,CAAChH,MAAMrL,KAAN,CAAYqS,MADP;AAEd5H,WAAK;AAFS,MAAf;AAIA,KAhCD,MAgCO;AACN9K,mBAAQuP,IAAR,CAAa,cAAb;AACA,YAAO,KAAP;AACA;AACD,IAtCD;AAuCA,GAzIkB;;AAAA,SA4InBrG,YA5ImB,GA4IJ,UAACpM,IAAD,EAAO0K,OAAP,EAAmB;AACjC,OAAIiL,SAAS9U,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWoS,MAA1B,CAAX,CAAb;AACA,UAAK5R,QAAL,CAAc;AACb4R,YAAQnW,OAAOC,MAAP,CAAckW,MAAd,sBACN3V,IADM,EACC0K,OADD;AADK,IAAd;AAKA,GAnJkB;;AAAA,SAsJnBtH,WAtJmB,GAsJL,YAAM;AACnB,UAAKW,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,IAAd;AAGA,UAAK5W,KAAL,CAAW6E,WAAX,CAAuB,SAAvB,EAAkCyH,OAAO,OAAKtM,KAAL,CAAW8E,KAAlB,IAA2B,CAA7D;AACA,GA3JkB;;AAAA,SA8JnB+R,OA9JmB,GA8JT,YAAM;AACf,UAAK7W,KAAL,CAAWgL,IAAX,CAAgB8L,WAAhB;AACA,UAAK/R,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,IAAd;AAGA,GAnKkB;;AAAA,SAqKnB5P,QArKmB,GAqKR,UAACgI,GAAD,EAAS;AACnB,UAAKjK,QAAL,CAAc;AACbiK;AADa,IAAd;AAGA,GAzKkB;;AAAA,SA2KnBzE,QA3KmB,GA2KR,UAACvJ,IAAD,EAAOoe,aAAP,EAAyB;AACnC,OAAIzI,SAAS9U,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWoS,MAA1B,CAAX,CAAb;AACA,UAAK5R,QAAL,CAAc;AACb4R,YAAQnW,OAAOC,MAAP,CAAckW,MAAd,sBAAwB3V,IAAxB,EAA+Boe,aAA/B;AADK,IAAd;AAGA,GAhLkB;;AAAA,SAmLnBC,YAnLmB,GAmLL,UAAC3T,OAAD,EAAW;AAAA,OACjBuO,WADiB,GACF,OAAK1V,KADH,CACjB0V,WADiB;AAExB;;AACA,OAAMmB,cAAc5a,OAAOC,MAAP,CAAc,EAAd,EAAkBwZ,WAAlB,EAA+B,EAACzG,SAAQ9H,OAAT,EAA/B,CAApB;AACA;AACA,OAAInL,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC6a,WAAzC,CAAtB;AACA,GA1LkB;;AAElB,SAAKhb,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZoS,WAAQ;AACP,UAAM,EADC;AAEP,WAAO,EAFA;AAGP,YAAQ,IAHD;AAIP,YAAQ,IAJD;AAKP,YAAQ,IALD;AAMP,YAAQ,IAND;AAOP,YAAQ,IAPD;AAQP,YAAQ,IARD;AASP,YAAQ,IATD;AAUP,YAAQ,IAVD;AAWP,YAAQ,IAXD;AAYP,YAAQ,IAZD;AAaP,cAAU,IAbH;AAcP,eAAW,IAdJ;AAeP,gBAAY,IAfL;AAgBP,kBAAc,IAhBP;AAiBP,YAAQ;AAjBD,IADI;AAoBZC,WAAQ,IApBI,EAoBG;AACf5H,QAAK,GArBO;AAsBZiL,gBAAY;AAtBA,GAAb;AAHkB;AA2BlB;;;;4CAEyB7P,S,EAAW;AAAA,OAC7B1J,OAD6B,GAClB0J,SADkB,CAC7B1J,OAD6B;;AAEpC,OAAIF,OAAOqS,IAAP,CAAYnS,OAAZ,EAAqBgG,MAArB,GAA8B,CAAlC,EAAqC;AACpC,QAAIvB,cAAczE,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AACnD,YAAOA,KAAKC,QAAL,IAAiB,QAAxB;AACA,KAFiB,EAEf,CAFe,CAAlB,CADoC,CAG7B;AACP,SAAKiE,QAAL,CAAc;AACbkV,kBAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkB0E,WAAlB,CADA;AAEbwR,aAAQ;AACP,YAAMxR,YAAY1D,EADX;AAEP,aAAO0D,YAAYzC,GAFZ;AAGP,cAAQyC,YAAYma,IAAZ,CAAiB,MAAjB,CAHD;AAIP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CAJD;AAKP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CALD;AAMP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CAND;AAOP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CAPD;AAQP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CARD;AASP,cAAQna,YAAYoa,IAAZ,CAAiB,MAAjB,CATD;AAUP,cAAQpa,YAAYoa,IAAZ,CAAiB,MAAjB,CAVD;AAWP,cAAQpa,YAAYoa,IAAZ,CAAiB,MAAjB,CAXD;AAYP,cAAQpa,YAAYoa,IAAZ,CAAiB,MAAjB,CAZD;AAaP,gBAAUpa,YAAYoa,IAAZ,CAAiB,QAAjB,CAbH;AAcP,iBAAWpa,YAAYoa,IAAZ,CAAiB,SAAjB,CAdJ;AAeP,kBAAYpa,YAAYoa,IAAZ,CAAiB,UAAjB,CAfL;AAgBP,oBAAcpa,YAAYqa,IAAZ,CAAiB,YAAjB,CAhBP;AAiBP,cAAQra,YAAYqa,IAAZ,CAAiB,MAAjB;AAjBD;AAFK,KAAd;AAsBA;AACD;;;sCAEmB;AAAA,gBACS,KAAKxf,KADd;AAAA,OACZU,OADY,UACZA,OADY;AAAA,OACHgK,QADG,UACHA,QADG;;AAEnB,OAAIlK,OAAOqS,IAAP,CAAYnS,OAAZ,EAAqBgG,MAArB,GAA8B,CAAlC,EAAqC;AACpC,QAAIvB,cAAczE,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AACnD,YAAOA,KAAKC,QAAL,IAAiB,QAAxB;AACA,KAFiB,EAEf,CAFe,CAAlB,CADoC,CAG7B;AACP,SAAKiE,QAAL,CAAc;AACbkV,kBAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkB0E,WAAlB,CADA;AAEbwR,aAAQ;AACP,YAAMxR,YAAY1D,EADX;AAEP,aAAO0D,YAAYzC,GAFZ;AAGP,cAAQyC,YAAYma,IAAZ,CAAiB,MAAjB,CAHD;AAIP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CAJD;AAKP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CALD;AAMP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CAND;AAOP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CAPD;AAQP,cAAQna,YAAYma,IAAZ,CAAiB,MAAjB,CARD;AASP,cAAQna,YAAYoa,IAAZ,CAAiB,MAAjB,CATD;AAUP,cAAQpa,YAAYoa,IAAZ,CAAiB,MAAjB,CAVD;AAWP,cAAQpa,YAAYoa,IAAZ,CAAiB,MAAjB,CAXD;AAYP,cAAQpa,YAAYoa,IAAZ,CAAiB,MAAjB,CAZD;AAaP,gBAAUpa,YAAYoa,IAAZ,CAAiB,QAAjB,CAbH;AAcP,iBAAWpa,YAAYoa,IAAZ,CAAiB,SAAjB,CAdJ;AAeP,kBAAYpa,YAAYoa,IAAZ,CAAiB,UAAjB,CAfL;AAgBP,oBAAcpa,YAAYqa,IAAZ,CAAiB,YAAjB,CAhBP;AAiBP,cAAQra,YAAYqa,IAAZ,CAAiB,MAAjB;AAjBD,MAFK;AAqBb5I,aAAQlM;AArBK,KAAd;AAuBA;AACD,QAAK1K,KAAL,CAAWoD,QAAX,CAAoB,IAApB;AACA;;AAED;;;AA8CA;;;AAUA;;;AAQA;;;AAqBA;;;;2BAUS;AAAA,gBACmC,KAAKmB,KADxC;AAAA,OACDoS,MADC,UACDA,MADC;AAAA,OACOC,MADP,UACOA,MADP;AAAA,OACe5H,GADf,UACeA,GADf;AAAA,OACoBiL,WADpB,UACoBA,WADpB;AAAA,OAED1V,KAFC,GAEQ,KAAKnE,KAFb,CAEDmE,KAFC;AAAA,iBAG2D,KAAKvE,KAHhE;AAAA,OAGD8E,KAHC,WAGDA,KAHC;AAAA,OAGMyB,MAHN,WAGMA,MAHN;AAAA,OAGcD,OAHd,WAGcA,OAHd;AAAA,OAGuB7B,cAHvB,WAGuBA,cAHvB;AAAA,OAGuCG,OAHvC,WAGuCA,OAHvC;AAAA,OAGgDlE,OAHhD,WAGgDA,OAHhD;AAAA,OAIDuN,iBAJC,GAIoB,KAAKjO,KAAL,CAAWgL,IAJ/B,CAIDiD,iBAJC;;AAKR,OAAMmJ,iBAAiB;AACtBC,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADY;AAKtBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP;AAFO;AALU,IAAvB;AAUA,OAAMI,kBAAkB;AACvBN,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADa;AAKvBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP;AAFO;AALW,IAAxB;AAUA,OAAIlB,UAAU4D,YAAYtZ,QAAZ,IAAwB,IAAxB,IAAgCsZ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B,UAACC,IAAD,EAAU;AACnF,WAAOA,KAAKC,QAAL,KAAkB,MAAlB,IAA0BD,KAAKS,IAAL,IAAW,SAA5C;AACA,IAF6C,EAE3C,CAF2C,CAA9C,CAzBQ,CA2BA;AACR,OAAIme,WAAWxF,YAAYtZ,QAAZ,IAAwB,IAAxB,IAAgCsZ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B,UAACC,IAAD,EAAU;AACpF,WAAOA,KAAKC,QAAL,KAAkB,MAAlB,IAA0BD,KAAKS,IAAL,IAAW,aAA5C;AACA,IAF8C,EAE5C,CAF4C,CAA/C,CA5BQ,CA8BA;AACR,OAAM4U,cAAaG,QAAQ1V,QAAR,IAAoB,IAApB,GAA2B0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AAC7E,WAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,UAAK+N,MAAM7U,EADa;AAExBH,WAAMgV,MAAM7M,QAFY;AAGxBP,aAAQ,MAHgB;AAIxB1G,UAAK8T,MAAM5M,QAJa;AAKxBF,aAAQ8M,MAAM9M,MALU;AAMxBC,eAAU6M,MAAM7M,QANQ;AAOxBC,eAAU4M,MAAM5M,QAPQ;AAQxBjI,SAAI6U,MAAM7U;AARc,KAAlB,CAAP;AAUA,IAX6C,CAA3B,GAWd,EAXL;AAYA,OAAMie,eAAeD,SAAS9e,QAAT,IAAqB,IAArB,GAA4B8e,SAAS9e,QAAT,CAAkBuB,GAAlB,CAAsB,UAACoU,KAAD,EAAW;AACjF,WAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,UAAK+N,MAAM7U,EADa;AAExBH,WAAMgV,MAAM7M,QAFY;AAGxBP,aAAQ,MAHgB;AAIxB1G,UAAK8T,MAAM5M,QAJa;AAKxBF,aAAQ8M,MAAM9M,MALU;AAMxBC,eAAU6M,MAAM7M,QANQ;AAOxBC,eAAU4M,MAAM5M,QAPQ;AAQxBjI,SAAI6U,MAAM7U;AARc,KAAlB,CAAP;AAUA,IAXgD,CAA5B,GAWhB,EAXL;AAYA,OAAMke,eAAe,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,MAAlC,EAA0C,OAA1C,CAArB;AACA,UACC;AAAC,cAAD;AAAA,MAAM,cAAN,EAAe,WAAU,SAAzB,EAAmC,OAAO,EAAClR,OAAO,MAAR,EAA1C;AACC;AAAA;AAAA,OAAI,IAAI/N,QAAQe,EAAhB,EAAoB,WAAU,mBAA9B;AAAA;AAAA,KADD;AAEC;AAAA;AAAA,OAAM,WAAU,uBAAhB;AACkBmV,cACA;AAAC,kBAAD;AAAA,QAAQ,WAAWrS,SAAS,CAAT,GAAa,QAAb,GAAwB,EAA3C,EAA+C,MAAK,MAApD;AACQ,iBAAUgC,MADlB;AAEQ,gBAAS,KAAKnC,WAFtB;AAEoCU,eAAS,CAAT,GAAa,IAAb,GAAoB;AAFxD,MADA,GAIA;AAAA;AAAA;AACC;AAAA;AAAA,SAAM,SAAS,KAAK+R,OAApB,EAA6B,WAAU,MAAvC;AAAA;AAAA,OADD;AAEC;AAAA;AAAA,SAAM,SAAS,KAAKE,YAApB;AAAA;AAAA;AAFD;AALlB,KAFD;AAYC;AAAC,eAAD;AAAA,gBAAM,WAAWjS,SAAO,CAAP,GAAW,QAAX,GAAsB,UAAvC,EAAmD,QAAO,QAA1D,IAAuE6S,eAAvE;AACC;AAAC,eAAD;AAAA,QAAK,QAAQ,CAAC,EAACL,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb;AACC;AAAC,gBAAD;AAAA,SAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,kBAAD,CAAM,IAAN;AAAA,UAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE7J,0BAAkB,SAAlB,EAA6B;AAC7BG,uBAAc6L,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAAZ,CAAoBtR,GAApB,CAAwB;AAAA,iBAAMrB,KAAKoM,MAAX;AAAA,UAAxB,CAD3B;AAE7BiB,gBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,SAA7B,EAIA,8BAAC,uBAAD;AACC,eAAM+V,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAD7D;AAEC,uBAAc,KAAK6L,YAFpB;AAGC,mBAAUzI;AAHX,UAJA;AADF;AADD;AADD;AADD,KAZD;AA8BC;AAAC,eAAD;AAAA,OAAM,WAAW9R,SAAS,CAAT,GAAa,QAAb,GAAwB,WAAzC,EAAsD,WAAWkK,GAAjE,EAAsE,UAAU,KAAKhI,QAArF;AACC;AAAC,aAAD;AAAA,QAAS,KAAI,0BAAb,EAAoB,KAAI,GAAxB;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0BoQ,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAQ,GAAT,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEyH,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOiJ,IAAP,IAAe,EADH;AAE1B1R,kBAAO,CAAC,EAACC,UAAU,IAAX,EAAiBjK,SAAS,SAA1B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,WAAD,IAAO,aAAY,oBAAnB,EAAyB,UAAU0S,MAAnC,GAJA;AADF;AADD,SADD;AAWC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,wCAAjB,EAA4B,WAAU,GAAtC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOkJ,IAAP,IAAe,EADH;AAE1B3R,kBAAO,CAAC,EAACC,UAAU,IAAX,EAAiBjK,SAAS,SAA1B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,iBAAD,IAAa,aAAY,oBAAzB,EAA+B,UAAU0S,MAAzC,EAAiD,WAAU,GAA3D,GAJA;AADF;AADD,SAXD;AAqBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOmJ,IAAP,IAAe,EADH;AAE1B5R,kBAAO,CAAC,EAACC,UAAU,IAAX,EAAiBjK,SAAS,SAA1B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SArBD;AA+BC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOoJ,IAAP,IAAe,EADH;AAE1B7R,kBAAO,CAAC,EAACC,UAAU,IAAX,EAAiBjK,SAAS,SAA1B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SA/BD;AAyCC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOqJ,IAAP,IAAe,EADH;AAE1B9R,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAzCD;AAmDC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOsJ,IAAP,IAAe,EADH;AAE1B/R,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD;AAnDD;AADD;AADD,MADD;AAmEC;AAAC,aAAD;AAAA,QAAS,KAAI,0BAAb,EAAoB,KAAI,GAAxB;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0BQ,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAQ,GAAT,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,wCAAjB,EAA4B,WAAU,GAAtC;AACEyH,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOuJ,IAAP,IAAe,EADH;AAE1BhS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SADD;AAWC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOwJ,IAAP,IAAe,EADH;AAE1BjS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAXD;AAqBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOyJ,IAAP,IAAe,EADH;AAE1BlS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SArBD;AA+BC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAO0J,IAAP,IAAe,EADH;AAE1BnS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SA/BD;AAyCC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB,EAA0B,WAAU,GAApC;AACE3I,4BAAkB,QAAlB,EAA4B;AAC5BG,yBAAcuI,OAAO2J,MAAP,IAAiB,EADH;AAE5BpS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,WAA3B,EAAD;AAFqB,WAA5B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAzCD;AAmDC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,4CAAjB,EAA2B,WAAU,GAArC;AACE3I,4BAAkB,SAAlB,EAA6B;AAC7BG,yBAAcuI,OAAO4J,OAAP,IAAkB,EADH;AAE7BrS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,WAA7B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAnDD;AA6DC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,kDAAjB;AACW,qBAAU;AACTU,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUC,wCAAC,cAAD,CAAU,KAAV;AACC;AACA,sBAAWX,SAAO,cAAP,GAAsB,EAFlC;AAGC,qBAAUA,SAAO,IAAP,GAAY,KAAKrM,QAAL,CAAcwK,IAAd,CAAmB,IAAnB,EAAyB,UAAzB,CAHvB;AAIC,kBAAO4B,OAAO6J,QAAP,IAAiB,IAAjB,GAAsB,EAAtB,GAAyB7J,OAAO6J,QAJxC;AAKC,oBAASb,YALV;AAVD;AADD;AA7DD;AADD;AADD,MAnED;AAwJC;AAAC,aAAD;AAAA,QAAS,KAAI,0BAAb,EAAoB,KAAI,GAAxB;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0BvI,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAQ,GAAT,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,+DAAjB;AACW,qBAAU;AACT8Q,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUEtJ,4BAAkB,YAAlB,EAAgC;AAChCG,yBAAcuI,OAAO8J,UAAP,IAAqB,EADH;AAEhCvS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,KAA3B,EAAD;AAFyB,WAAhC,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AAVF;AADD,SADD;AAoBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,EAAjB;AACW,qBAAU;AACTU,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP,EAFO;AAGXmJ,oBAAQ;AAHG,YALvB;AAUW,sBAAU,GAVrB;AAWC;AAAA;AAAA,aAAK,WAAW,IAAhB;AACC,yCAAC,kBAAD;AACC,4BAAgBjc,cADjB;AAEC,qBAASG,OAFV;AAGC,sBAAU8a,YAHX;AAIC,sBAAU9I,MAJX;AAKC,iBAAK6I,SAAShe,EALf;AAMC,uBAAWge,SAASpb,SANrB;AAOC,qBAASiC;AAPV,aADD;AAUC;AAAA;AAAA,cAAM,OAAO;AACZ6O,wBAAU,UADE;AAEZC,oBAAM,MAFM;AAGZC,mBAAK,MAHO;AAIZ1K,wBAAU,MAJE;AAKZC,qBAAO;AALK,cAAb;AAAA;AAAA;AAVD;AAXD;AADD,SApBD;AAoDC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB;AACW,qBAAU;AACT0M,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUEtJ,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAOgK,IAAP,IAAe,EADH;AAE1BzS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,KAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AAVF;AADD;AApDD;AADD;AADD;AAxJD,KA9BD;AAmQC;AAAC,cAAD;AAAA,OAAK,WAAW5H,OAAO,GAAP,IAAYlK,SAAS,CAArB,GAAyB,QAAzB,GAAoC,EAApD;AACC;AAAC,eAAD;AAAA,QAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,iBAAD,CAAM,IAAN;AAAA,SAAW,OAAM,6BAAjB;AACW,kBAAU;AACTwS,aAAI,EAACC,MAAM,EAAP,EADK;AAETE,aAAI,EAACF,MAAM,CAAP;AAFK,SADrB;AAKW,oBAAY;AACXD,aAAI,EAACC,MAAM,EAAP,EADO;AAEXE,aAAI,EAACF,MAAM,EAAP;AAFO,SALvB;AASW,mBAAU,GATrB;AAUC,qCAAC,kBAAD;AACC,wBAAgB9S,cADjB;AAEC,iBAASG,OAFV;AAGC,kBAAUsR,WAHX;AAIC,kBAAUU,MAJX;AAKC,aAAKP,QAAQ5U,EALd;AAMC,mBAAW4U,QAAQhS,SANpB;AAOC,iBAASiC;AAPV;AAVD;AADD;AADD;AAnQD,IADD;AA8RA;;;;EAnhBqCM,gBAAMC,S;kBAAxBsY,S;;;;;;;;;;;;;;;;;;;kBCdrB;;;;;AAGA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAYvf,K;;;;;;;;;;;;;;IACL6W,O,GAAWC,U,CAAXD,O;IACAF,Q,GAAYC,W,CAAZD,Q;IAIcqK,M,WAFpB1V,WAAKC,MAAL,E,oBACApL,mB;;;AAEA,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+GACZA,KADY;;AAAA,SAyInB+W,YAzImB,GAyIJ,UAAC5K,CAAD,EAAO;AACrBA,KAAE6K,cAAF;AACA,OAAIpH,cAAJ;AAFqB,OAGdvL,SAHc,GAGDuL,MAAMxP,KAHL,CAGdiE,SAHc;;AAIrBuL,SAAM5P,KAAN,CAAYgL,IAAZ,CAAiBiB,cAAjB,CAAgC,UAACnI,GAAD,EAAMoI,MAAN,EAAiB;AAChD,QAAIyK,SAAS9U,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMrL,KAAN,CAAYoS,MAA3B,CAAX,CAAb;AACA,QAAIkK,OAAOhf,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMrL,KAAN,CAAYsc,IAA3B,CAAX,CAAX;AACA,QAAIC,OAAOjf,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMrL,KAAN,CAAYuc,IAA3B,CAAX,CAAX;AACA,QAAI,CAAChd,GAAL,EAAU;AACT,SAAImW,cAAcpY,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMrL,KAAN,CAAY0V,WAA3B,CAAX,CAAlB;AACA,SAAM8G,OAAOF,KAAK3e,GAAL,CAAS,gBAAQ;AAC7B,aAAO1B,OAAOC,MAAP,CAAc,EAAd,EAAkB,EAACa,MAAMT,KAAKS,IAAZ,EAAkB4K,QAAQrL,KAAKqL,MAA/B,EAAlB,CAAP;AACA,MAFY,CAAb;AAGA,SAAM8U,OAAOF,KAAK5e,GAAL,CAAS,gBAAQ;AAC7B,aAAO1B,OAAOC,MAAP,CAAc,EAAd,EAAkB,EAACa,MAAMT,KAAKS,IAAZ,EAAkB4K,QAAQrL,KAAKqL,MAA/B,EAAlB,CAAP;AACA,MAFY,CAAb;AAGA,SAAMlI,SAASxD,OAAOC,MAAP,CAAcwZ,WAAd,EAA2B;AACzC,mBAAa5V,SAD4B;AAEzC,cAAQ;AACP,eAAQ7D,OAAOC,MAAP,CAAc,EAAd,EAAkBsgB,IAAlB,CADD;AAEP,eAAQvgB,OAAOC,MAAP,CAAc,EAAd,EAAkBugB,IAAlB,CAFD;AAGP,eAAQrK,OAAOsK;AAHR,OAFiC;AAOzC,cAAQ;AACP,mBAAY/U,OAAOsU,QADZ;AAEP,mBAAYtU,OAAOgV,QAFZ;AAGP,kBAAWhV,OAAOiV,OAHX;AAIP,mBAAYjV,OAAOkV,QAJZ;AAKP,iBAAUlV,OAAOmV,MALV;AAMP,qBAAcnV,OAAOoV,UANd;AAOP,iBAAUpV,OAAOqV;AAPV,OAPiC;AAgBzC,cAAQ;AACP,eAAQrV,OAAOsV,IADR;AAEP,eAAQtV,OAAOuV,IAFR;AAGP,eAAQvV,OAAOwV,IAHR;AAIP,iBAAUxV,OAAO,QAAP,KAAoB,IAApB,IAA4BA,OAAO,QAAP,KAAoB,EAAhD,GAAqD,CAArD,GAAyD,sBAAOA,OAAO,QAAP,EAAiB5D,MAAjB,CAAwB,YAAxB,CAAP,EAA8C,YAA9C,EAA4DsE,OAA5D,EAJ5D;AAKP,qBAAcV,OAAOyV;AALd;AAhBiC,MAA3B,CAAf;AAwBA/R,WAAM5P,KAAN,CAAYgF,SAAZ,CAAsBhB,MAAtB;AACA4L,WAAM7K,QAAN,CAAe;AACd6R,cAAQ,CAAChH,MAAMrL,KAAN,CAAYqS,MADP;AAEd5H,WAAK;AAFS,MAAf;AAIA;AACD,IA1CD;AA2CA,GAxLkB;;AAAA,SA2LnB5B,YA3LmB,GA2LJ,UAACpM,IAAD,EAAO0K,OAAP,EAAmB;AACjC,OAAIiL,SAAS9U,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWoS,MAA1B,CAAX,CAAb;AACA,UAAK5R,QAAL,CAAc;AACb4R,YAAQnW,OAAOC,MAAP,CAAckW,MAAd,sBACN3V,IADM,EACC0K,OADD;AADK,IAAd;AAKA,GAlMkB;;AAAA,SAqMnBtH,WArMmB,GAqML,YAAM;AACnB,UAAKW,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,IAAd;AAGA,UAAK5W,KAAL,CAAW6E,WAAX,CAAuB,SAAvB,EAAkCyH,OAAO,OAAKtM,KAAL,CAAW8E,KAAlB,IAA2B,CAA7D;AACA,GA1MkB;;AAAA,SA6MnB+R,OA7MmB,GA6MT,YAAM;AACf,UAAK7W,KAAL,CAAWgL,IAAX,CAAgB8L,WAAhB;AACA,UAAK/R,QAAL,CAAc;AACb6R,YAAQ,CAAC,OAAKrS,KAAL,CAAWqS;AADP,IAAd;AAGA,GAlNkB;;AAAA,SAoNnB5P,QApNmB,GAoNR,UAACgI,GAAD,EAAS;AACnB,UAAKjK,QAAL,CAAc;AACbiK;AADa,IAAd;AAGA,GAxNkB;;AAAA,SA0NnB4S,WA1NmB,GA0NL,UAAC5gB,IAAD,EAAOM,IAAP,EAAa6K,CAAb,EAAmB;AAChC,OAAI0U,OAAOhf,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWvD,IAAX,CAAf,CAAX,CAAX;AACA,OAAM2F,QAAQka,KAAKrR,SAAL,CAAe,UAAC3O,IAAD;AAAA,WAAUA,KAAKS,IAAL,KAAcA,IAAxB;AAAA,IAAf,CAAd;AAFgC,OAGzBugB,OAHyB,GAGd1V,EAAEqS,MAHY,CAGzBqD,OAHyB;;AAIhChB,QAAKla,KAAL,EAAYkb,OAAZ,GAAsBA,OAAtB;AACA,OAAIA,WAAW,KAAf,EAAsB;AACrBhB,SAAKla,KAAL,EAAYuF,MAAZ,GAAqB1L,OAAOC,MAAP,CAAc,EAAd,CAArB;AACA;AACD,UAAKsE,QAAL,qBACE/D,IADF,EACSR,OAAOC,MAAP,CAAc,EAAd,EAAkBogB,IAAlB,CADT;AAGA,GArOkB;;AAAA,SAuOnBiB,YAvOmB,GAuOJ,UAAC9gB,IAAD,EAAOM,IAAP,EAAa8d,aAAb,EAA+B;AAC7C,OAAIyB,OAAOhf,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWvD,IAAX,CAAf,CAAX,CAAX;AACA,OAAM2F,QAAQka,KAAKrR,SAAL,CAAe,UAAC3O,IAAD;AAAA,WAAUA,KAAKS,IAAL,KAAcA,IAAxB;AAAA,IAAf,CAAd;AACAuf,QAAKla,KAAL,EAAYuF,MAAZ,GAAqB1L,OAAOC,MAAP,CAAc,EAAd,EAAkB2e,aAAlB,CAArB;AACA,UAAKra,QAAL,qBACE/D,IADF,EACSR,OAAOC,MAAP,CAAc,EAAd,EAAkBogB,IAAlB,CADT,GAEG,YAAM,CAER,CAJD;AAKA,GAhPkB;;AAAA,SAkPnBtW,QAlPmB,GAkPR,UAACvJ,IAAD,EAAOoe,aAAP,EAAyB;AACnC,OAAIzI,SAAS9U,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWoS,MAA1B,CAAX,CAAb;AACA,UAAK5R,QAAL,CAAc;AACb4R,YAAQnW,OAAOC,MAAP,CAAckW,MAAd,sBAAwB3V,IAAxB,EAA+Boe,aAA/B;AADK,IAAd;AAGA,GAvPkB;;AAAA,SA0PnBC,YA1PmB,GA0PL,UAAC3T,OAAD,EAAW;AAAA,OACjBuO,WADiB,GACF,OAAK1V,KADH,CACjB0V,WADiB;AAExB;;AACA,OAAMmB,cAAc5a,OAAOC,MAAP,CAAc,EAAd,EAAkBwZ,WAAlB,EAA+B,EAACzG,SAAQ9H,OAAT,EAA/B,CAApB;AACA;AACA,OAAInL,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC6a,WAAzC,CAAtB;AACA,GAjQkB;;AAElB,SAAKhb,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,SAAKmE,KAAL,GAAa;AACZsc,SAAM,CAAC,EAAC,QAAQ,MAAT,EAAiB,WAAW,KAA5B,EAAmC,UAAU,EAA7C,EAAD,EAAmD;AACxD,YAAQ,MADgD;AAExD,eAAW,KAF6C;AAGxD,cAAU;AAH8C,IAAnD,EAIH,EAAC,QAAQ,WAAT,EAAsB,WAAW,KAAjC,EAAwC,UAAU,EAAlD,EAJG,EAIoD;AACzD,YAAQ,IADiD;AAEzD,eAAW,KAF8C;AAGzD,cAAU;AAH+C,IAJpD,EAQH,EAAC,QAAQ,KAAT,EAAgB,WAAW,KAA3B,EAAkC,UAAU,EAA5C,EARG,EAQ8C;AACnD,YAAQ,MAD2C;AAEnD,eAAW,KAFwC;AAGnD,cAAU;AAHyC,IAR9C,EAYH,EAAC,QAAQ,KAAT,EAAgB,WAAW,KAA3B,EAAkC,UAAU,EAA5C,EAZG,EAY8C,EAAC,QAAQ,MAAT,EAAiB,WAAW,KAA5B,EAAmC,UAAU,EAA7C,EAZ9C,CADM;AAcZC,SAAM,CAAC,EAAC,QAAQ,MAAT,EAAiB,WAAW,KAA5B,EAAmC,UAAU,EAA7C,EAAD,EAAmD,EAAC,QAAQ,MAAT,EAAiB,WAAW,KAA5B,EAAmC,UAAU,EAA7C,EAAnD,EAAqG;AAC1G,YAAQ,IADkG,EAC5F,WAAW,KADiF;AAE1G,cAAU;AAFgG,IAArG,EAGH,EAAC,QAAQ,KAAT,EAAgB,WAAW,KAA3B,EAAkC,UAAU,EAA5C,EAHG,EAG8C,EAAC,QAAQ,IAAT,EAAe,WAAW,KAA1B,EAAiC,UAAU,EAA3C,EAH9C,EAG8F;AACnG,YAAQ,KAD2F,EACpF,WAAW,KADyE;AAEnG,cAAU;AAFyF,IAH9F,EAMH,EAAC,QAAQ,KAAT,EAAgB,WAAW,KAA3B,EAAkC,UAAU,EAA5C,EANG,EAM8C,EAAC,QAAQ,MAAT,EAAiB,WAAW,KAA5B,EAAmC,UAAU,EAA7C,EAN9C,CAdM;AAqBZnK,WAAQ;AACP,UAAM,EADC;AAEP,WAAO,EAFA;AAGP,YAAQ,EAHD;AAIP,gBAAY,IAJL;AAKP,gBAAY,IALL;AAMP,eAAW,IANJ;AAOP,gBAAY,IAPL;AAQP,cAAU,IARH;AASP,kBAAc,IATP;AAUP,cAAU,IAVH;AAWP,YAAQ,IAXD;AAYP,YAAQ,IAZD;AAaP,YAAQ,IAbD;AAcP,cAAU,CAdH;AAeP,kBAAc;AAfP,IArBI;AAsCZC,WAAQ,IAtCI,EAsCG;AACf5H,QAAK,GAvCO;AAwCZiL,gBAAa;AAxCD,GAAb;AAHkB;AA6ClB;;;;4CAEyB7P,S,EAAW;AAAA,OAC7B1J,OAD6B,GAClB0J,SADkB,CAC7B1J,OAD6B;;AAEpC,OAAIF,OAAOqS,IAAP,CAAYnS,OAAZ,EAAqBgG,MAArB,GAA8B,CAAlC,EAAqC;AACpC,QAAIvB,cAAczE,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AACnD,YAAOA,KAAKC,QAAL,IAAiB,QAAxB;AACA,KAFiB,EAEf,CAFe,CAAlB,CADoC,CAG7B;AACP,SAAKiE,QAAL,CAAc;AACbkV,kBAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkB0E,WAAlB,CADA;AAEbwR,aAAQ;AACP,YAAMxR,YAAY1D,EADX;AAEP,aAAO0D,YAAYzC,GAFZ;AAGP,cAAQyC,YAAYma,IAAZ,CAAiB,MAAjB,CAHD;AAIP,kBAAYna,YAAYoa,IAAZ,CAAiB,UAAjB,CAJL;AAKP,kBAAYpa,YAAYoa,IAAZ,CAAiB,UAAjB,CALL;AAMP,iBAAWpa,YAAYoa,IAAZ,CAAiB,SAAjB,CANJ;AAOP,kBAAYpa,YAAYoa,IAAZ,CAAiB,UAAjB,CAPL;AAQP,gBAAUpa,YAAYoa,IAAZ,CAAiB,QAAjB,CARH;AASP,oBAAcpa,YAAYoa,IAAZ,CAAiB,YAAjB,CATP;AAUP,gBAAUpa,YAAYoa,IAAZ,CAAiB,QAAjB,CAVH;AAWP,cAAQpa,YAAYqa,IAAZ,CAAiB,MAAjB,CAXD;AAYP,cAAQra,YAAYqa,IAAZ,CAAiB,MAAjB,CAZD;AAaP,cAAQra,YAAYqa,IAAZ,CAAiB,MAAjB,CAbD;AAcP,gBAAUra,YAAYqa,IAAZ,CAAiB,QAAjB,CAdH;AAeP,oBAAcra,YAAYqa,IAAZ,CAAiB,YAAjB;AAfP,MAFK;AAmBbqB,WAAM1b,YAAYma,IAAZ,CAAiB,MAAjB,EAAyBpd,GAAzB,CAA6B,UAACrB,IAAD,EAAU;AAC5C,aAAOL,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB,eAAQI,KAAKS,IADW;AAExB,iBAAUT,KAAKqL,MAAL,IAAe,IAAf,GAAsB,EAAtB,GAA2BrL,KAAKqL,MAFlB;AAGxB,kBAAWrL,KAAKqL,MAAL,IAAe,IAAf,IAAuBmR,MAAMC,OAAN,CAAczc,KAAKqL,MAAnB,CAAvB,IAAqDrL,KAAKqL,MAAL,CAAYxF,MAAZ,GAAqB,CAA1E,GAA8E,IAA9E,GAAqF;AAHxE,OAAlB,CAAP;AAKA,MANK,CAnBO;AA0Bboa,WAAM3b,YAAYma,IAAZ,CAAiB,MAAjB,EAAyBpd,GAAzB,CAA6B,UAACrB,IAAD,EAAU;AAC5C,aAAOL,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB,eAAQI,KAAKS,IADW;AAExB,iBAAUT,KAAKqL,MAAL,IAAe,IAAf,GAAsB,EAAtB,GAA2BrL,KAAKqL,MAFlB;AAGxB,kBAAWrL,KAAKqL,MAAL,IAAe,IAAf,IAAuBmR,MAAMC,OAAN,CAAczc,KAAKqL,MAAnB,CAAvB,IAAqDrL,KAAKqL,MAAL,CAAYxF,MAAZ,GAAqB,CAA1E,GAA8E,IAA9E,GAAqF;AAHxE,OAAlB,CAAP;AAKA,MANK;AA1BO,KAAd;AAkCA;AACD;;;sCAEmB;AAAA,gBACS,KAAK1G,KADd;AAAA,OACZU,OADY,UACZA,OADY;AAAA,OACHgK,QADG,UACHA,QADG;;AAEnB,OAAIlK,OAAOqS,IAAP,CAAYnS,OAAZ,EAAqBgG,MAArB,GAA8B,CAAlC,EAAqC;AACpC,QAAIvB,cAAczE,QAAQC,QAAR,CAAiBC,MAAjB,CAAwB,UAACC,IAAD,EAAU;AACnD,YAAOA,KAAKC,QAAL,IAAiB,QAAxB;AACA,KAFiB,EAEf,CAFe,CAAlB,CADoC,CAG7B;AACP;AACA,SAAKiE,QAAL,CAAc;AACbkV,kBAAazZ,OAAOC,MAAP,CAAc,EAAd,EAAkB0E,WAAlB,CADA;AAEbwR,aAAQ;AACP,YAAMxR,YAAY1D,EADX;AAEP,aAAO0D,YAAYzC,GAFZ;AAGP,cAAQyC,YAAYma,IAAZ,CAAiB,MAAjB,CAHD;AAIP,kBAAYna,YAAYoa,IAAZ,CAAiB,UAAjB,CAJL;AAKP,kBAAYpa,YAAYoa,IAAZ,CAAiB,UAAjB,CALL;AAMP,iBAAWpa,YAAYoa,IAAZ,CAAiB,SAAjB,CANJ;AAOP,kBAAYpa,YAAYoa,IAAZ,CAAiB,UAAjB,CAPL;AAQP,gBAAUpa,YAAYoa,IAAZ,CAAiB,QAAjB,CARH;AASP,oBAAcpa,YAAYoa,IAAZ,CAAiB,YAAjB,CATP;AAUP,gBAAUpa,YAAYoa,IAAZ,CAAiB,QAAjB,CAVH;AAWP,cAAQpa,YAAYqa,IAAZ,CAAiB,MAAjB,CAXD;AAYP,cAAQra,YAAYqa,IAAZ,CAAiB,MAAjB,CAZD;AAaP,cAAQra,YAAYqa,IAAZ,CAAiB,MAAjB,CAbD;AAcP,gBAAUra,YAAYqa,IAAZ,CAAiB,QAAjB,CAdH;AAeP,oBAAcra,YAAYqa,IAAZ,CAAiB,YAAjB;AAfP,MAFK;AAmBb5I,aAAQlM,QAnBK;AAoBbmW,WAAM1b,YAAYma,IAAZ,CAAiB,MAAjB,EAAyBpd,GAAzB,CAA6B,UAACrB,IAAD,EAAU;AAC5C,aAAOL,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB,eAAQI,KAAKS,IADW;AAExB,iBAAUT,KAAKqL,MAAL,IAAe,IAAf,GAAsB,EAAtB,GAA2BrL,KAAKqL,MAFlB;AAGxB,kBAAW;AAHa,OAAlB,CAAP;AAKA,MANK,CApBO;AA2Bb4U,WAAM3b,YAAYma,IAAZ,CAAiB,MAAjB,EAAyBpd,GAAzB,CAA6B,UAACrB,IAAD,EAAU;AAC5C,aAAOL,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB,eAAQI,KAAKS,IADW;AAExB,iBAAUT,KAAKqL,MAAL,IAAe,IAAf,GAAsB,EAAtB,GAA2BrL,KAAKqL,MAFlB;AAGxB,kBAAW;AAHa,OAAlB,CAAP;AAKA,MANK;AA3BO,KAAd;AAmCA;AACD,QAAKlM,KAAL,CAAWsD,WAAX,CAAuB,IAAvB;AACA;;AAED;;;AAkDA;;;AAUA;;;AAQA;;;AA6CA;;;;2BAUS;AAAA;;AAAA,gBAC+C,KAAKiB,KADpD;AAAA,OACDoS,MADC,UACDA,MADC;AAAA,OACOC,MADP,UACOA,MADP;AAAA,OACe5H,GADf,UACeA,GADf;AAAA,OACoB6R,IADpB,UACoBA,IADpB;AAAA,OAC0BC,IAD1B,UAC0BA,IAD1B;AAAA,OACgC7G,WADhC,UACgCA,WADhC;AAAA,OAED1V,KAFC,GAEQ,KAAKnE,KAFb,CAEDmE,KAFC;AAAA,iBAG2D,KAAKvE,KAHhE;AAAA,OAGD8E,KAHC,WAGDA,KAHC;AAAA,OAGMyB,MAHN,WAGMA,MAHN;AAAA,OAGcD,OAHd,WAGcA,OAHd;AAAA,OAGuB7B,cAHvB,WAGuBA,cAHvB;AAAA,OAGuCG,OAHvC,WAGuCA,OAHvC;AAAA,OAGgDlE,OAHhD,WAGgDA,OAHhD;AAAA,OAIDuN,iBAJC,GAIoB,KAAKjO,KAAL,CAAWgL,IAJ/B,CAIDiD,iBAJC;;AAKR,OAAMmJ,iBAAiB;AACtBC,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADY;AAKtBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP;AAFO;AALU,IAAvB;AAUA,OAAMI,kBAAkB;AACvBN,cAAU;AACTC,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADa;AAKvBG,gBAAY;AACXJ,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP;AAFO;AALW,IAAxB;AAUA,OAAMoI,eAAe,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAArB;AACA,OAAMoC,WAAW,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAjB;AACA,OAAI1L,UAAU4D,YAAYtZ,QAAZ,IAAwB,IAAxB,IAAgCsZ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B,UAACC,IAAD,EAAU;AACnF,WAAOA,KAAKC,QAAL,KAAkB,MAAlB,IAA4BD,KAAKS,IAAL,IAAa,SAAhD;AACA,IAF6C,EAE3C,CAF2C,CAA9C,CA3BQ,CA6BA;AACR,OAAIme,WAAWxF,YAAYtZ,QAAZ,IAAwB,IAAxB,IAAgCsZ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B,UAACC,IAAD,EAAU;AACpF,WAAOA,KAAKC,QAAL,KAAkB,MAAlB,IAA4BD,KAAKS,IAAL,IAAa,QAAhD;AACA,IAF8C,EAE5C,CAF4C,CAA/C,CA9BQ,CAgCA;AACR,OAAI0gB,WAAW/H,YAAYtZ,QAAZ,IAAwB,IAAxB,IAAgCsZ,YAAYtZ,QAAZ,CAAqBC,MAArB,CAA4B,UAACC,IAAD,EAAU;AACpF,WAAOA,KAAKC,QAAL,KAAkB,MAAlB,IAA4BD,KAAKS,IAAL,IAAa,aAAhD;AACA,IAF8C,EAE5C,CAF4C,CAA/C,CAjCQ,CAmCA;AACR,OAAM4U,cAAcG,QAAQ1V,QAAR,IAAoB,IAApB,GAA2B0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AAC9E,WAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,UAAK+N,MAAM7U,EADa;AAExBH,WAAMgV,MAAM7M,QAFY;AAGxBP,aAAQ,MAHgB;AAIxB1G,UAAK8T,MAAM5M,QAJa;AAKxBF,aAAQ8M,MAAM9M,MALU;AAMxBC,eAAU6M,MAAM7M,QANQ;AAOxBC,eAAU4M,MAAM5M,QAPQ;AAQxBjI,SAAI6U,MAAM7U;AARc,KAAlB,CAAP;AAUA,IAX8C,CAA3B,GAWf,EAXL;AAYA,OAAMie,eAAeD,SAAS9e,QAAT,IAAqB,IAArB,GAA4B8e,SAAS9e,QAAT,CAAkBuB,GAAlB,CAAsB,UAACoU,KAAD,EAAW;AACjF,WAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,UAAK+N,MAAM7U,EADa;AAExBH,WAAMgV,MAAM7M,QAFY;AAGxBP,aAAQ,MAHgB;AAIxB1G,UAAK8T,MAAM5M,QAJa;AAKxBF,aAAQ8M,MAAM9M,MALU;AAMxBC,eAAU6M,MAAM7M,QANQ;AAOxBC,eAAU4M,MAAM5M,QAPQ;AAQxBjI,SAAI6U,MAAM7U;AARc,KAAlB,CAAP;AAUA,IAXgD,CAA5B,GAWhB,EAXL;AAYA,OAAMwgB,eAAeD,SAASrhB,QAAT,IAAqB,IAArB,GAA4BqhB,SAASrhB,QAAT,CAAkBuB,GAAlB,CAAsB,UAACoU,KAAD,EAAW;AACjF,WAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACxB8H,UAAK+N,MAAM7U,EADa;AAExBH,WAAMgV,MAAM7M,QAFY;AAGxBP,aAAQ,MAHgB;AAIxB1G,UAAK8T,MAAM5M,QAJa;AAKxBF,aAAQ8M,MAAM9M,MALU;AAMxBC,eAAU6M,MAAM7M,QANQ;AAOxBC,eAAU4M,MAAM5M,QAPQ;AAQxBjI,SAAI6U,MAAM7U;AARc,KAAlB,CAAP;AAUA,IAXgD,CAA5B,GAWhB,EAXL;AAYA,UACC;AAAC,cAAD;AAAA,MAAM,cAAN,EAAe,WAAU,SAAzB,EAAmC,OAAO,EAACgN,OAAO,MAAR,EAA1C;AACC;AAAA;AAAA,OAAI,IAAI/N,QAAQe,EAAhB,EAAoB,WAAU,mBAA9B;AAAA;AAAA,KADD;AAEC;AAAA;AAAA,OAAM,WAAU,uBAAhB;AACkBmV,cACA;AAAC,kBAAD;AAAA,QAAQ,WAAWrS,SAAS,CAAT,GAAa,QAAb,GAAwB,EAA3C,EAA+C,MAAK,MAApD;AACQ,iBAAUgC,MADlB;AAEQ,gBAAS,KAAKnC,WAFtB;AAEoCU,eAAS,CAAT,GAAa,IAAb,GAAoB;AAFxD,MADA,GAIA;AAAA;AAAA;AACC;AAAA;AAAA,SAAM,SAAS,KAAK+R,OAApB,EAA6B,WAAU,MAAvC;AAAA;AAAA,OADD;AAEC;AAAA;AAAA,SAAM,SAAS,KAAKE,YAApB;AAAA;AAAA;AAFD;AALlB,KAFD;AAYC;AAAC,eAAD;AAAA,gBAAM,WAAWjS,SAAO,CAAP,GAAW,QAAX,GAAsB,UAAvC,EAAmD,QAAO,QAA1D,IAAuE6S,eAAvE;AACC;AAAC,eAAD;AAAA,QAAK,QAAQ,CAAC,EAACL,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb;AACC;AAAC,gBAAD;AAAA,SAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,kBAAD,CAAM,IAAN;AAAA,UAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE7J,0BAAkB,SAAlB,EAA6B;AAC7BG,uBAAc6L,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAAZ,CAAoBtR,GAApB,CAAwB;AAAA,iBAAMrB,KAAKoM,MAAX;AAAA,UAAxB,CAD3B;AAE7BiB,gBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,SAA7B,EAIA,8BAAC,uBAAD;AACC,eAAM+V,eAAaA,YAAYzG,OAAZ,IAAqB,IAAlC,GAAuC,EAAvC,GAA0CyG,YAAYzG,OAD7D;AAEC,uBAAc,KAAK6L,YAFpB;AAGC,mBAAUzI;AAHX,UAJA;AADF;AADD;AADD;AADD,KAZD;AA8BC;AAAC,eAAD;AAAA,OAAM,WAAW9R,SAAS,CAAT,GAAa,QAAb,GAAwB,WAAzC,EAAsD,WAAWkK,GAAjE,EAAsE,UAAU,KAAKhI,QAArF;AACC;AAAC,aAAD;AAAA,QAAS,KAAI,0BAAb,EAAoB,KAAI,GAAxB;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0BoQ,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAQ,GAAT,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC,uCAAC,UAAD,CAAM,IAAN;AACC,oBAAU;AACT8Q,eAAI,EAACC,MAAM,EAAP,EADK;AAETE,eAAI,EAACF,MAAM,CAAP;AAFK,WADX;AAKC,sBAAY;AACXD,eAAI,EAACC,MAAM,EAAP,EADO;AAEXE,eAAI,EAACF,MAAM,EAAP;AAFO,WALb;AASC,sBAAY,MATb;AAUC,iBAAM,0EAVP,EAUsB,WAAU,GAVhC;AADD,SADD;AAcC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB;AACW,qBAAU;AACTD,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUC;AAAA;AAAA;AACEsJ,gBAAKna,MAAL,GAAc,CAAd,IAAmBma,KAAK3e,GAAL,CAAS,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC7C,mBAAQ;AAAA;AAAA,eAAK,KAAK,SAASA,KAAnB,EAA0B,OAAO,EAACgP,aAAa,MAAd,EAAjC;AACP;AAAC,4BAAD;AAAA;AACC,0BAAWiB,SAAO,4BAAP,GAAoC,eADhD;AAEC,sBAAO,EAACnI,OAAO,OAAR,EAFR;AAGC,wBAAS5N,KAAKghB;AACd;AAJD,iBAKC,UAAUjL,SAAO,IAAP,GAAY,OAAKgL,WAAL,CAAiB7M,IAAjB,CAAsB,MAAtB,EAA4B,MAA5B,EAAoClU,KAAKS,IAAzC,CALvB;AAKwET,mBAAKS;AAL7E,cADO;AAOP,2CAAC,cAAD,CAAU,KAAV;AACC,yBAAWT,KAAKghB,OAAL,GAAgBjL,SAAO,cAAP,GAAsB,EAAtC,GAA4C,QADxD;AAEC,qBAAO/V,KAAKqL,MAFb;AAGC,wBAAU0K,SAAO,IAAP,GAAY,OAAKkL,YAAL,CAAkB/M,IAAlB,CAAuB,MAAvB,EAA6B,MAA7B,EAAqClU,KAAKS,IAA1C;AACtB;AAJD,gBAKC,SAASqe,YALV;AAPO,aAAR;AAcA,YAfmB;AADrB;AAVD;AADD,SAdD;AA6CC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB;AACW,qBAAU;AACTrI,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUEuJ,eAAKpa,MAAL,GAAc,CAAd,IAAmBoa,KAAK5e,GAAL,CAAS,UAACrB,IAAD,EAAO8F,KAAP,EAAiB;AAC7C,kBAAQ;AAAA;AAAA,cAAK,KAAK,SAASA,KAAnB,EAA0B,OAAO,EAACgP,aAAa,MAAd,EAAjC;AACP;AAAC,2BAAD;AAAA;AACC,yBAAWiB,SAAO,4BAAP,GAAoC,eADhD;AAEC,qBAAO,EAACnI,OAAO,MAAR,EAFR;AAGC,uBAAS5N,KAAKghB;AACd;AAJD,gBAKC,UAAUjL,SAAO,IAAP,GAAY,OAAKgL,WAAL,CAAiB7M,IAAjB,CAAsB,MAAtB,EAA4B,MAA5B,EAAoClU,KAAKS,IAAzC,CALvB;AAKwET,kBAAKS;AAL7E,aADO;AAOP,0CAAC,cAAD,CAAU,KAAV;AACC,wBAAWT,KAAKghB,OAAL,GAAgBjL,SAAO,cAAP,GAAsB,EAAtC,GAA4C,QADxD;AAEC,oBAAO/V,KAAKqL,MAFb;AAGC,uBAAU0K,SAAO,IAAP,GAAY,OAAKkL,YAAL,CAAkB/M,IAAlB,CAAuB,MAAvB,EAA6B,MAA7B,EAAqClU,KAAKS,IAA1C;AACtB;AAJD,eAKC,SAASqe,YALV;AAPO,YAAR;AAcA,WAfmB;AAVrB;AADD;AA7CD,QADD;AA4EC;AAAC,iBAAD;AAAA;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB;AACW,qBAAU;AACTrI,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUC,wCAAC,cAAD,CAAU,KAAV;AACC,sBAAWX,SAAO,cAAP,GAAsB,EADlC;AAEC,qBAAUA,SAAO,IAAP,GAAY,KAAKrM,QAAL,CAAcwK,IAAd,CAAmB,IAAnB,EAAyB,MAAzB;AACtB;AAHD,aAIC,OAAO4B,OAAOsK,IAJf;AAKC,oBAASc,QALV;AAVD;AADD;AADD;AA5ED;AADD,MADD;AAqGC;AAAC,aAAD;AAAA,QAAS,KAAI,0BAAb,EAAoB,KAAI,GAAxB;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0B3K,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAQ,GAAT,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,kDAAjB,EAA4B,WAAU,GAAtC;AACEyH,4BAAkB,UAAlB,EAA8B;AAC9BG,yBAAcuI,OAAO6J,QAAP,IAAmB,EADH;AAE9BtS,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFuB,WAA9B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SADD;AAWC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,kDAAjB,EAA4B,WAAU,GAAtC;AACE3I,4BAAkB,UAAlB,EAA8B;AAC9BG,yBAAcuI,OAAOuK,QAAP,IAAmB,EADH;AAE9BhT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFuB,WAA9B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAXD;AAqBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,4CAAjB,EAA2B,WAAU,GAArC;AACE3I,4BAAkB,SAAlB,EAA6B;AAC7BG,yBAAcuI,OAAOwK,OAAP,IAAkB,EADH;AAE7BjT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,WAA7B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SArBD;AA+BC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,kDAAjB,EAA4B,WAAU,GAAtC;AACE3I,4BAAkB,UAAlB,EAA8B;AAC9BG,yBAAcuI,OAAOyK,QAAP,IAAmB,EADH;AAE9BlT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFuB,WAA9B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SA/BD;AAyCC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB,EAA0B,WAAU,GAApC;AACE3I,4BAAkB,QAAlB,EAA4B;AAC5BG,yBAAcuI,OAAO0K,MAAP,IAAiB,EADH;AAE5BnT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,WAA3B,EAAD;AAFqB,WAA5B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAzCD;AAmDC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,+CAAjB,EAA8B,WAAU,GAAxC;AACE3I,4BAAkB,YAAlB,EAAgC;AAChCG,yBAAcuI,OAAO2K,UAAP,IAAqB,EADH;AAEhCpT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFyB,WAAhC,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAnDD;AA6DC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB,EAA0B,WAAU,GAApC;AACE3I,4BAAkB,QAAlB,EAA4B;AAC5BG,yBAAcuI,OAAO4K,MAAP,IAAiB,EADH;AAE5BrT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFqB,WAA5B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD;AA7DD;AADD;AADD,MArGD;AAiLC;AAAC,aAAD;AAAA,QAAS,KAAI,0BAAb,EAAoB,KAAI,GAAxB;AACC;AAAC,iBAAD;AAAA,kBAAM,QAAO,QAAb,IAA0BQ,cAA1B;AACC;AAAC,iBAAD;AAAA,UAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb,EAA4D,OAAO,EAACtR,QAAQ,GAAT,EAAnE;AACC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC,uCAAC,UAAD,CAAM,IAAN;AACC,oBAAU;AACT8Q,eAAI,EAACC,MAAM,EAAP,EADK;AAETE,eAAI,EAACF,MAAM,CAAP;AAFK,WADX;AAKC,sBAAY;AACXD,eAAI,EAACC,MAAM,EAAP,EADO;AAEXE,eAAI,EAACF,MAAM,EAAP;AAFO,WALb;AASC,iBAAM,kDATP,EASkB,WAAU,GAT5B;AADD,SADD;AAaC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,CAAzB,EAA4B,IAAI,CAAhC,EAAmC,IAAI,CAAvC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACEtJ,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAO6K,IAAP,IAAe,EADH;AAE1BtT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,KAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAbD;AAuBC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,CAAzB,EAA4B,IAAI,CAAhC,EAAmC,IAAI,CAAvC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAO8K,IAAP,IAAe,EADH;AAE1BvT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,KAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAvBD;AAiCC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,CAAzB,EAA4B,IAAI,CAAhC,EAAmC,IAAI,CAAvC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE3I,4BAAkB,MAAlB,EAA0B;AAC1BG,yBAAcuI,OAAO+K,IAAP,IAAe,EADH;AAE1BxT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,KAA3B,EAAD;AAFmB,WAA1B,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B,EAAqC,aAAY,oBAAjD,GAJA;AADF;AADD,SAjCD;AA2CC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,4CAAjB;AACW,qBAAU;AACTU,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUC,wCAAC,kBAAD;AACC,2BAAgB9S,cADjB;AAEC,oBAASG,OAFV;AAGC,qBAAUsR,WAHX;AAIC,qBAAUU,MAJX;AAKC,gBAAKP,QAAQ5U,EALd;AAMC,sBAAW4U,QAAQhS,SANpB;AAOC,oBAASiC;AAPV;AAVD;AADD,SA3CD;AAiEC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB;AACW,qBAAU;AACTgR,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUC,wCAAC,kBAAD;AACC,2BAAgB9S,cADjB;AAEC,oBAASG,OAFV;AAGC,qBAAU8a,YAHX;AAIC,qBAAU9I,MAJX;AAKC,gBAAK6I,SAAShe,EALf;AAMC,sBAAWge,SAASpb,SANrB;AAOC,oBAASiC;AAPV;AAVD;AADD,SAjED;AAuFC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,sCAAjB;AACW,qBAAU;AACTgR,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUEtJ,4BAAkB,QAAlB,EAA4B;AAC5BG,yBAAcuI,OAAOuL,MAAP,IAAiB,IAAjB,IAAyBvL,OAAOuL,MAAP,IAAiB,CAA1C,GAA8C,EAA9C,GAAmD,sBAAO,sBAAOvL,OAAOuL,MAAd,EAAsB5Z,MAAtB,CAA6B,YAA7B,CAAP,EAAmD,YAAnD,CADrC;AAE5B4F,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,YAA3B,EAAD;AAFqB,WAA5B,EAIA,8BAAC,gBAAD;AACC,wBAAY,oBADb;AAEC,mBAAO,YAFR;AAGC,qBAAU0S;AAHX,YAJA;AAVF;AADD,SAvFD;AA8GC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,+DAAjB;AACW,qBAAU;AACTU,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP;AAFO,YALvB;AASW,sBAAU,GATrB;AAUEtJ,4BAAkB,YAAlB,EAAgC;AAChCG,yBAAcuI,OAAOgL,UAAP,IAAqB,EADH;AAEhCzT,kBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,YAA3B,EAAD;AAFyB,WAAhC,EAIA,8BAAC,QAAD,IAAU,MAAM,CAAhB,EAAmB,UAAU0S,MAA7B;AACU,wBAAY,qMADtB,GAJA;AAVF;AADD,SA9GD;AAkIC;AAAC,kBAAD;AAAA,WAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,EAAzC;AACC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,OAAM,EAAjB;AACW,qBAAU;AACTU,gBAAI,EAACC,MAAM,EAAP,EADK;AAETE,gBAAI,EAACF,MAAM,CAAP;AAFK,YADrB;AAKW,uBAAY;AACXD,gBAAI,EAACC,MAAM,EAAP,EADO;AAEXE,gBAAI,EAACF,MAAM,EAAP,EAFO;AAGXmJ,oBAAQ;AAHG,YALvB;AAUW,sBAAU,GAVrB;AAWC;AAAA;AAAA,aAAK,WAAW,IAAhB;AACC,yCAAC,kBAAD;AACC,4BAAgBjc,cADjB;AAEC,qBAASG,OAFV;AAGC,sBAAUqd,YAHX;AAIC,sBAAUrL,MAJX;AAKC,iBAAKoL,SAASvgB,EALf;AAMC,uBAAWugB,SAAS3d,SANrB;AAOC,qBAASiC;AAPV,aADD;AAUC;AAAA;AAAA,cAAM,OAAO;AACZ6O,wBAAU,UADE;AAEZC,oBAAM,MAFM;AAGZC,mBAAK,MAHO;AAIZ1K,wBAAU,MAJE;AAKZC,qBAAO;AALK,cAAb;AAAA;AAAA;AAVD;AAXD;AADD;AAlID;AADD;AADD;AAjLD;AA9BD,IADD;AA0XA;;;;EAtsBkChE,gBAAMC,S;kBAArB+Z,M;;;;;;;;;;;;;;;;;;;kBCfrB;;;;;AAGA;;;;AACA;;AACA;;AAEA;;;;AACA;;IAAYhhB,K;;AACZ;;;;AACA;;IAAaD,I;;;;;;;;;;;;;;AACb,IAAMyL,2BAA2B,SAA3BA,wBAA2B,OAAQ;AACxCC,qBAAarK,IAAb,EAAmB;AAClBkD,aAAS,kBADS;AAElBoH,iBACC,EAHiB;AAIlBC,eAAW;AAJO,GAAnB;AAMA,CAPD;IAUqB4W,a,WAFpBjX,WAAKC,MAAL,E,oBACApL,mB;;;AAEA,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+HACZA,KADY;;AAAA,WAwDnB+M,eAxDmB,GAwDD,UAACC,GAAD,EAAMb,CAAN,EAAY;AAC7B,UAAIT,gBAAJ;AACA,UAAIS,EAAEzF,MAAN,EAAc;AACbgF,kBAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAU;AACzB,iBAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AACA,SAFS,CAAV;AAGA,OAJD,MAIO;AACN+K,kBAAU,EAAV;AACA;AACD,aAAK3G,QAAL,CAAc;AACb2G;AADa,OAAd;AAGA,aAAKtL,KAAL,CAAWe,SAAX,CAAqBqS,OAArB,GAA+BhT,OAAOC,MAAP,CAAc,EAAd,EAAkBiL,OAAlB,CAA/B;AACA,KArEkB;;AAAA,WAwEhB0B,YAxEgB,GAwED,UAAC1B,OAAD,EAAW;AAAA,UACf0W,aADe,GACE,OAAK7d,KADP,CACf6d,aADe;AAEtB;;AACA,UAAMhH,cAAc5a,OAAOC,MAAP,CAAc,EAAd,EAAkB2hB,aAAlB,EAAiC,EAAC5O,SAAQ9H,OAAT,EAAjC,CAApB;AACA;AACA,UAAInL,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,aAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC6a,WAAzC,CAAtB;AACH,aAAKhb,KAAL,CAAWe,SAAX,CAAqBqS,OAArB,GAA+BhT,OAAOC,MAAP,CAAc,EAAd,EAAkBiL,OAAlB,CAA/B;AACA,KAhFe;;AAAA,WAkFnBnB,QAlFmB,GAkFR,mBAAW;AACrB,aAAKxF,QAAL,CAAc,EAACmW,gBAAD,EAAd;AACA,KApFkB;;AAAA,WAuFnBnE,YAvFmB,GAuFJ,UAAC5K,CAAD,EAAO;AACfA,QAAE6K,cAAF;AADe,UAER7V,SAFQ,GAEK,OAAKnB,KAFV,CAERmB,SAFQ;;AAGf,UAAIqS,UAAUrS,UAAUqS,OAAV,IAAmB,IAAnB,GAAwB,EAAxB,GAA2BrS,UAAUqS,OAAnD;AACA,UAAIA,QAAQ9M,MAAR,IAAgB,CAApB,EAAuB;AACnBxC,sBAAQuP,IAAR,CAAa,UAAb;AACA,eAAO,KAAP;AACH;AACD,aAAKzT,KAAL,CAAWgL,IAAX,CAAgBkP,uBAAhB,CAAwC,UAACpW,GAAD,EAAMoI,MAAN,EAAiB;AACrD,YAAI,CAACpI,GAAL,EAAU;AAAA,cACCmB,SADD,GACc,OAAKjF,KADnB,CACCiF,SADD;AAEN;;AAFM,sCAGkC,OAAKV,KAAL,CAAW6d,aAH7C;AAAA,cAGDzhB,QAHC,yBAGDA,QAHC;AAAA,cAGY0hB,kBAHZ;;AAINpd,oBAAUod,kBAAV;AACA,iBAAKjiB,KAAL,CAAWgG,YAAX,GAA0B,IAA1B;AACH;AACJ,OARD;AASH,KAxGe;;AAAA,WA2GhBhC,WA3GgB,GA2GF,YAAM;AAChB,aAAKhE,KAAL,CAAWgG,YAAX,GAA0B,KAA1B;AACA,aAAKrB,QAAL,CAAc;AACV0W,qBAAajb,OAAOC,MAAP,CAAc,EAAd,EAAkB,OAAK8D,KAAL,CAAW6d,aAA7B;AADH,OAAd;AAGH,aAAKpiB,KAAL,CAAW6E,WAAX,CAAuB,SAAvB,EAAkCyH,OAAO,OAAKtM,KAAL,CAAW8E,KAAlB,IAA2B,CAA7D;AACA,KAjHe;;AAAA,WAoHhB+R,OApHgB,GAoHN,YAAK;AACX,aAAK7W,KAAL,CAAWgL,IAAX,CAAgB8L,WAAhB;AACA,aAAK1W,KAAL,CAAWgG,YAAX,GAA0B,IAA1B;AACA;AACA;AACA,UAAI7F,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,aAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC,OAAKgE,KAAL,CAAWkX,WAApD,CAAtB;AACH,KA3He;;AAAA,WA6HhB6G,aA7HgB,GA6HD,UAACthB,IAAD,EAAU;AAC3B,UAAIA,QAAM,IAAV,EAAgB;AACf,eAAK+D,QAAL,CAAc;AACbwd,mBAAS,OAAKhe,KAAL,CAAWge,OAAX,GAAmB;AADf,SAAd;AAGA,OAJD,MAIO;AACN,eAAKxd,QAAL,CAAc;AACbwd,mBAAS,OAAKhe,KAAL,CAAWge,OAAX,GAAmB;AADf,SAAd;AAGA;AACE,KAvIe;;AAAA,WA0InBC,QA1ImB,GA0IR,YAAM;AAChB,aAAKpiB,KAAL,CAAWoiB,QAAX,GAAsBniB,IAAtB,CAA2B,UAAC4D,GAAD,EAAO;AACjC,YAAIA,GAAJ,EAAS;AACR,cAAIzC,aAAaK,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWsB,cAA1B,CAAX,CAAjB,CADQ,CACiE;AACzE,iBAAKtB,KAAL,CAAWoB,UAAX,GAAwBA,UAAxB;AACA,iBAAKpB,KAAL,CAAWsB,cAAX,GAA4BuC,IAAIxC,EAAhC,CAHQ,CAG4B;AACpC,iBAAKrB,KAAL,CAAWuB,YAAX;AACY;AACA,cAAIpB,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,iBAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,aAA/B,EAA8C0D,GAA9C,CAAtB;AACZ;AACA,iBAAK7D,KAAL,CAAWmB,YAAX;AACA;AACD,OAZD;AAaA,KAxJkB;;AAAA,WA2JnBkhB,QA3JmB,GA2JR,UAACviB,KAAD,EAAW;AACrB,UAAI0P,cAAJ;AACAA,YAAMxP,KAAN,CAAYqiB,QAAZ,CAAqBviB,KAArB,EAA4BG,IAA5B,CAAiC,UAAC4D,GAAD,EAAO;AACvC,YAAIA,GAAJ,EAAS;AACRC,wBAAQC,OAAR,CAAgB,MAAhB;AACA,cAAI3C,aAAaK,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWsB,cAA1B,CAAX,CAAjB;AACAkO,gBAAMxP,KAAN,CAAYoB,UAAZ,GAAyBA,UAAzB;AACAoO,gBAAMxP,KAAN,CAAYsB,cAAZ,GAA6BuC,IAAIxC,EAAjC,CAJQ,CAI6B;AACzB;AACA,cAAIlB,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,iBAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,aAA/B,EAA8C0D,GAA9C,CAAtB;AACZ;AACA,iBAAK7D,KAAL,CAAWmB,YAAX;AACAqO,gBAAMxP,KAAN,CAAYuB,YAAZ;AACA;AACD,OAbD;AAcA,KA3KkB;;AAAA,WA8KnB+gB,WA9KmB,GA8KL,UAACxiB,KAAD,EAAU;AACvB,UAAI0P,cAAJ;AACM,UAAMpO,aAAaK,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAYsB,cAA3B,CAAX,CAAnB,CAFiB,CAE2D;AAC5E,UAAIF,cAAYtB,KAAhB,EAAuB;AACnBkL,iCAAyB,SAAzB;AACA,eAAO,KAAP;AACH;AACP,UAAIwE,MAAMxP,KAAN,CAAYgG,YAAZ,IAA0B,KAA9B,EAAqC;AAAE;AAC7B+N,oBAAMC,OAAN,CAAc;AACVtG,iBAAO,cADG;AAEVyH,mBAAS,cAFC;AAGVlB,kBAAO,IAHG;AAIVC,sBAAW,IAJD;AAKVC,cALU,kBAKH;AACH3E,kBAAMxP,KAAN,CAAYoB,UAAZ,GAAyBA,UAAzB;AACAoO,kBAAMxP,KAAN,CAAYsiB,WAAZ,CAAwBxiB,KAAxB,EAA+BG,IAA/B,CAAoC,UAAC4D,GAAD,EAAO;AACvC,kBAAGA,GAAH,EAAQ;AACJ2L,sBAAMxP,KAAN,CAAYsB,cAAZ,GAA6BuC,IAAIxC,EAAjC,CADI,CACiC;AACrCmO,sBAAMxP,KAAN,CAAYgG,YAAZ,GAA2B,IAA3B;AACA;AACA,oBAAI7F,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAYG,QAA3B,CAAX,CAAf;AACAqP,sBAAMxP,KAAN,CAAYG,QAAZ,GAAuBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,aAA/B,EAA8C0D,GAA9C,CAAvB;AACH;AACA2L,sBAAMxP,KAAN,CAAYmB,YAAZ;AACA;AACJ,aAVD;AAWH,WAlBS;AAmBViT,kBAnBU,sBAmBC,CAEV;AArBS,SAAd;AAuBH,OAxBP,MAwBa;AACH5E,cAAMxP,KAAN,CAAYoB,UAAZ,GAAyBA,UAAzB;AACAoO,cAAMxP,KAAN,CAAYsiB,WAAZ,CAAwBxiB,KAAxB,EAA+BG,IAA/B,CAAoC,UAAC4D,GAAD,EAAO;AACvC,cAAGA,GAAH,EAAQ;AACJ2L,kBAAMxP,KAAN,CAAYsB,cAAZ,GAA6BuC,IAAIxC,EAAjC,CADI,CACiC;AACrC;AACA,gBAAIlB,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe6N,MAAMxP,KAAN,CAAYG,QAA3B,CAAX,CAAf;AACAqP,kBAAMxP,KAAN,CAAYG,QAAZ,GAAuBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,aAA/B,EAA8C0D,GAA9C,CAAvB;AACH;AACA2L,kBAAMxP,KAAN,CAAYmB,YAAZ;AACA;AACJ,SATD;AAUH;AACP,KA1NkB;;AAElB,WAAKnB,KAAL,GAAY,OAAKJ,KAAL,CAAWI,KAAvB;AACA,WAAKmE,KAAL,GAAa;AACZmH,eAAS,EADG;AAEHwP,eAAS,CAFN;AAGHyH,gBAAS,EAHN,EAGU;AACbC,gBAAS,EAJN,EAIU;AACbC,gBAAS,EALN,EAKU;AACbC,gBAAS,EANN,EAMU;AACbC,gBAAS,EAPN,EAOU;AACbX,qBAAc,OAAKpiB,KAAL,CAAWmB,SARtB;AASHyV,cAAO,IATJ;AAUH6E,mBAAa,EAVV,EAUc;AAC1B8G,eAAS,CAXG,CAWA;AAXA,KAAb;AAHkB;AAgBlB;;;;8CAEyBnY,S,EAAW0F,W,EAAa;AACjD;;;AAGA,UAAI1F,UAAUjJ,SAAV,KAAsB,KAAKnB,KAAL,CAAWmB,SAArC,EAAgD;AACtC;AACA,aAAK4D,QAAL,CAAc,EAACqd,eAAchY,UAAUjJ,SAAzB,EAAd;AACA,YAAGX,OAAOqS,IAAP,CAAYzI,UAAUjJ,SAAtB,EAAiCuF,MAAjC,KAA0C,CAA1C,IAA6C,OAAO0D,UAAUjJ,SAAV,CAAoBR,QAA3B,KAAuC,WAAvF,EAAmG;AAC/F,eAAKoE,QAAL,CAAc;AACV4d,sBAAUniB,OAAOC,MAAP,CAAc,EAAd,EAAiB2J,UAAUjJ,SAAV,CAAoBR,QAApB,CAA6BC,MAA7B,CAAqC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAArC,EAAmE,CAAnE,CAAjB,CADA;AAEVJ,sBAAUpiB,OAAOC,MAAP,CAAc,EAAd,EAAiB2J,UAAUjJ,SAAV,CAAoBR,QAApB,CAA6BC,MAA7B,CAAqC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAArC,EAAmE,CAAnE,CAAjB,CAFA;AAGVH,sBAAUriB,OAAOC,MAAP,CAAc,EAAd,EAAiB2J,UAAUjJ,SAAV,CAAoBR,QAApB,CAA6BC,MAA7B,CAAqC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAArC,EAAmE,CAAnE,CAAjB,CAHA;AAIVF,sBAAUtiB,OAAOC,MAAP,CAAc,EAAd,EAAiB2J,UAAUjJ,SAAV,CAAoBR,QAApB,CAA6BC,MAA7B,CAAqC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAArC,EAAmE,CAAnE,CAAjB,CAJA;AAKVD,sBAAUviB,OAAOC,MAAP,CAAc,EAAd,EAAiB2J,UAAUjJ,SAAV,CAAoBR,QAApB,CAA6BC,MAA7B,CAAqC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAArC,EAAmE,CAAnE,CAAjB;AALA,WAAd;AAOH;AACV;AACE;;;wCAEmB;AACtB;;;AAGA,UAAI,KAAKhjB,KAAL,CAAWmB,SAAf,EAA0B;AAChB;AACA,aAAK4D,QAAL,CAAc,EAACqd,eAAc,KAAKpiB,KAAL,CAAWmB,SAA1B,EAAd;AACA,YAAGX,OAAOqS,IAAP,CAAY,KAAK7S,KAAL,CAAWmB,SAAvB,EAAkCuF,MAAlC,KAA2C,CAA3C,IAA8C,OAAO,KAAK1G,KAAL,CAAWmB,SAAX,CAAqBR,QAA5B,KAAwC,WAAzF,EAAqG;AACjG,eAAKoE,QAAL,CAAc;AACV4d,sBAAUniB,OAAOC,MAAP,CAAc,EAAd,EAAiB,KAAKT,KAAL,CAAWmB,SAAX,CAAqBR,QAArB,CAA8BC,MAA9B,CAAsC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAAtC,EAAoE,CAApE,CAAjB,CADA;AAEVJ,sBAAUpiB,OAAOC,MAAP,CAAc,EAAd,EAAiB,KAAKT,KAAL,CAAWmB,SAAX,CAAqBR,QAArB,CAA8BC,MAA9B,CAAsC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAAtC,EAAoE,CAApE,CAAjB,CAFA;AAGVH,sBAAUriB,OAAOC,MAAP,CAAc,EAAd,EAAiB,KAAKT,KAAL,CAAWmB,SAAX,CAAqBR,QAArB,CAA8BC,MAA9B,CAAsC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAAtC,EAAoE,CAApE,CAAjB,CAHA;AAIVF,sBAAUtiB,OAAOC,MAAP,CAAc,EAAd,EAAiB,KAAKT,KAAL,CAAWmB,SAAX,CAAqBR,QAArB,CAA8BC,MAA9B,CAAsC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAAtC,EAAoE,CAApE,CAAjB,CAJA;AAKVD,sBAAUviB,OAAOC,MAAP,CAAc,EAAd,EAAiB,KAAKT,KAAL,CAAWmB,SAAX,CAAqBR,QAArB,CAA8BC,MAA9B,CAAsC;AAAA,qBAAMC,KAAKmiB,QAAL,IAAe,MAArB;AAAA,aAAtC,EAAoE,CAApE,CAAjB;AALA,WAAd;AAOH;AACV;AACD;;AAiBE;;;AAeA;;;AAoBA;;;AASA;;;AAsBH;;;AAiBA;;;AAmBA;;;;6BA+CS;AAAA;;AACF,UAAIpT,QAAQ,IAAZ;AADE,wBAEkEA,MAAMrL,KAFxE;AAAA,UAEKge,OAFL,eAEKA,OAFL;AAAA,UAEcI,QAFd,eAEcA,QAFd;AAAA,UAEwBC,QAFxB,eAEwBA,QAFxB;AAAA,UAEkCC,QAFlC,eAEkCA,QAFlC;AAAA,UAE4CC,QAF5C,eAE4CA,QAF5C;AAAA,UAEsDC,QAFtD,eAEsDA,QAFtD;;AAAA,mBAGoE,KAAK/iB,KAHzE;AAAA,UAGKmB,SAHL,UAGKA,SAHL;AAAA,UAGgB6J,IAHhB,UAGgBA,IAHhB;AAAA,UAGsB5K,KAHtB,UAGsBA,KAHtB;AAAA,UAG8BmG,MAH9B,UAG8BA,MAH9B;AAAA,UAGsCzB,KAHtC,UAGsCA,KAHtC;AAAA,UAG+Cme,iBAH/C;;AAAA,UAIDhV,iBAJC,GAIoBjD,IAJpB,CAIDiD,iBAJC;;AAKR,UAAMmJ,iBAAiB;AACtBC,kBAAU;AACTC,cAAI,EAACC,MAAM,EAAP,EADK;AAETE,cAAI,EAACF,MAAM,CAAP;AAFK,SADY;AAKtBG,oBAAY;AACXJ,cAAI,EAACC,MAAM,EAAP,EADO;AAEXE,cAAI,EAACF,MAAM,EAAP;AAFO;AALU,OAAvB;AALQ,wBAeiD3H,MAAMxP,KAfvD;AAAA,UAeDgG,YAfC,eAeDA,YAfC;AAAA,UAea7B,KAfb,eAeaA,KAfb;AAAA,UAeoB2e,SAfpB,eAeoBA,SAfpB;AAAA,UAe+BxhB,cAf/B,eAe+BA,cAf/B;;AAgBR,UAAMyhB,OACL;AAAC,kBAAD;AAAA,UAAM,WAAW/c,eAAa,QAAb,GAAsB,cAAvC,EAAuD,OAAO,EAACqI,OAAM,OAAP,EAA9D;AAEE9O,aAAK8G,IAAL,CAAUyc,SAAV,EAAqBhhB,GAArB,CAAyB,UAACrB,IAAD,EAAO8F,KAAP,EAAe;AACrC,iBACC;AAAC,sBAAD,CAAM,IAAN;AAAA,cAAW,KAAKA,KAAhB,EAAuB,WAAW9F,KAAKY,EAAL,IAASC,cAAT,GAAwB,sCAAxB,GAA+D,gBAAjG;AACC;AAAA;AAAA,gBAAM,SAAS,OAAKghB,WAAL,CAAiB3N,IAAjB,CAAsB,MAAtB,EAA4BlU,KAAKY,EAAjC,CAAf;AAAsDZ,mBAAKE,SAA3D;AAAsEF,mBAAKuiB,MAAL,IAAa,CAAb,GAAeviB,KAAKuiB,MAApB,GAA2B;AAAjG,aADD;AAEEhd,2BAAa,IAAb,GAAkB;AAAC,8BAAD;AAAA,gBAAY,OAAM,uCAAlB,EAA4B,WAAW;AAAA,yBAAM,OAAKqc,QAAL,CAAc5hB,KAAKY,EAAnB,CAAN;AAAA,iBAAvC;AAClB,4CAAC,UAAD,IAAM,MAAK,OAAX,EAAmB,WAAWZ,KAAKuiB,MAAL,IAAa,CAAb,GAAe,iBAAf,GAAiC,QAA/D;AADkB;AAFpB,WADD;AAQF,SATD,CAFF;AAaEhd,uBAAa,IAAb,GAAkB,8BAAC,UAAD,CAAM,OAAN,OAbpB;AAcC;AAAC,oBAAD,CAAM,IAAN;AAAA,YAAW,WAAWA,eAAa,QAAb,GAAsB,EAA5C;AACC,wCAAC,UAAD,IAAM,SAAS,KAAKoc,QAApB,EAA8B,OAAO,EAAC7X,UAAS,MAAV,EAArC,EAAwD,MAAK,aAA7D,EAA2E,OAAM,sCAAjF;AADD;AAdD,OADD;AAoBA,aACC;AAAC,kBAAD;AAAA,UAAM,cAAN,EAAe,WAAU,MAAzB,EAAgC,OAAO,EAAC8D,OAAO,MAAR,EAAvC;AACE;AAAA;AAAA,YAAI,IAAItN,UAAUM,EAAlB,EAAsB,WAAU,mBAAhC;AACC;AAAC,0BAAD;AAAA,cAAU,SAAS0hB,IAAnB;AACA;AAAA;AAAA;AAAA;AACMhiB,wBAAUiiB,MAAV,IAAkB,CAAlB,GAAoBjiB,UAAUiiB,MAA9B,GAAqC,IAD3C;AACgD,4CAAC,UAAD,IAAM,WAAWhd,eAAa,QAAb,GAAsB,aAAvC,EAAuD,MAAK,YAA5D;AADhD;AADA;AADD,SADF;AAQa;AAAA;AAAA,YAAM,WAAU,uBAAhB;AACKA,yBACG;AAAC,wBAAD;AAAA,cAAQ,MAAK,MAAb;AACQ,yBAAW7B,SAAO,CAAP,GAAS,QAAT,GAAkB,EADrC;AAEQ,wBAAUgC,MAFlB;AAGQ,uBAAS,KAAKnC,WAHtB;AAGoCU,qBAAS,CAAT,GAAa,IAAb,GAAoB;AAHxD,WADH,GAKG;AAAA;AAAA;AACI;AAAA;AAAA,gBAAM,SAAS,KAAK+R,OAApB,EAA6B,WAAU,MAAvC;AAAA;AAAA,aADJ;AAED;AAAC,0BAAD;AAAA;AACC,0BAAU0L,UAAQ,CAAR,GAAU,IAAV,GAAe,KAD1B;AAEC,sBAAK,MAFN,EAEa,SAAS,KAAKxL,YAF3B;AAAA;AAAA;AAFC;AANR,SARb;AAsBC;AAAC,oBAAD;AAAA,qBAAM,WAAWjS,SAAS,CAAT,GAAa,QAAb,GAAwB,UAAzC,EAAqD,QAAO,QAA5D,IAAyEsS,cAAzE;AACC;AAAC,qBAAD;AAAA,cAAK,QAAQ,CAAC,EAACE,IAAI,EAAL,EAASG,IAAI,EAAb,EAAiBD,IAAI,EAArB,EAAyBI,IAAI,EAA7B,EAAiCE,IAAI,CAArC,EAAD,EAA0C,EAA1C,CAAb;AACC;AAAC,uBAAD;AAAA,gBAAK,IAAI,EAAT,EAAa,IAAI,EAAjB,EAAqB,IAAI,EAAzB,EAA6B,IAAI,EAAjC,EAAqC,IAAI,CAAzC;AACC;AAAC,0BAAD,CAAM,IAAN;AAAA,kBAAW,OAAM,0BAAjB,EAAwB,WAAU,GAAlC;AACE7J,kCAAkB,SAAlB,EAA6B;AACFG,gCAAcjN,UAAUqS,OAAV,IAAmB,IAAnB,GAAwB,EAAxB,GAA2BrS,UAAUqS,OAAV,CAAkBtR,GAAlB,CAAsB,UAACrB,IAAD;AAAA,2BAAQA,KAAKoM,MAAb;AAAA,mBAAtB,CADvC;AAE7BiB,yBAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,SAA3B,EAAD;AAFsB,iBAA7B,EAI2B,8BAAC,uBAAD;AACI,wBAAM/C,UAAUqS,OAAV,IAAmB,IAAnB,GAAwB,EAAxB,GAA2BrS,UAAUqS,OAD/C;AAEI,gCAAc,KAAKpG,YAFvB;AAGI,4BAAUhH;AAHd,kBAJ3B;AADF;AADD;AADD;AADD,SAtBD;AAwCa;AAAC,mBAAD;AAAA,YAAK,WAAWtB,SAAS,CAAT,GAAa,QAAb,GAAwB,WAAxC;AACI;AAAC,qBAAD;AAAA,cAAK,MAAM,EAAX;AACI,0CAAC,kBAAD;AACK,mBAAK,OADV;AAEK,qBAAO,KAAK1E,KAFjB;AAGK,oBAAMuiB,QAHX;AAIK,wBAAU;AAJf,eAKSM,iBALT;AAMK,wBAAU7c,YANf;AAOK,yBAAW,KAAKpG,KAAL,CAAWgF,SAP3B;AAQK,8BAAgB,KAAKhF,KAAL,CAAWyE,cARhC;AASK,uBAAS,KAAKzE,KAAL,CAAW4E,OATzB;AAUK,mBAAK,KAAK5E,KAAL,CAAWsG,OAVrB;AAWK,6BAAe,KAAKgc;AAXzB,eADJ;AAcI,0CAAC,kBAAD;AACK,mBAAK,OADV;AAEK,qBAAO,KAAKliB,KAFjB;AAGK,oBAAMwiB,QAHX;AAIK,wBAAU;AAJf,eAKSK,iBALT;AAMK,wBAAU7c,YANf;AAOK,yBAAW,KAAKpG,KAAL,CAAWgF,SAP3B;AAQK,8BAAgB,KAAKhF,KAAL,CAAWyE,cARhC;AASK,uBAAS,KAAKzE,KAAL,CAAW4E,OATzB;AAUK,mBAAK,KAAK5E,KAAL,CAAWsG,OAVrB;AAWK,6BAAe,KAAKgc;AAXzB,eAdJ;AA2BI,0CAAC,kBAAD;AACK,mBAAK,OADV;AAEK,qBAAO,KAAKliB,KAFjB;AAGK,oBAAMyiB,QAHX;AAIK,wBAAU;AAJf,eAKSI,iBALT;AAMK,wBAAU7c,YANf;AAOK,yBAAW,KAAKpG,KAAL,CAAWgF,SAP3B;AAQK,8BAAgB,KAAKhF,KAAL,CAAWyE,cARhC;AASK,uBAAS,KAAKzE,KAAL,CAAW4E,OATzB;AAUK,mBAAK,KAAK5E,KAAL,CAAWsG,OAVrB;AAWK,6BAAe,KAAKgc;AAXzB,eA3BJ;AAwCI,0CAAC,kBAAD;AACK,mBAAK,OADV;AAEK,qBAAO,KAAKliB,KAFjB;AAGK,oBAAM0iB,QAHX;AAIK,wBAAU;AAJf,eAKSG,iBALT;AAMK,wBAAU7c,YANf;AAOK,yBAAW,KAAKpG,KAAL,CAAWgF,SAP3B;AAQK,8BAAgB,KAAKhF,KAAL,CAAWyE,cARhC;AASK,uBAAS,KAAKzE,KAAL,CAAW4E,OATzB;AAUK,mBAAK,KAAK5E,KAAL,CAAWsG,OAVrB;AAWK,6BAAe,KAAKgc;AAXzB,eAxCJ;AAqDI,0CAAC,kBAAD;AACK,mBAAK,OADV;AAEK,qBAAO,KAAKliB,KAFjB;AAGK,oBAAM2iB,QAHX;AAIK,wBAAU;AAJf,eAKSE,iBALT;AAMK,wBAAU7c,YANf;AAOK,yBAAW,KAAKpG,KAAL,CAAWgF,SAP3B;AAQK,8BAAgB,KAAKhF,KAAL,CAAWyE,cARhC;AASK,uBAAS,KAAKzE,KAAL,CAAW4E,OATzB;AAUK,mBAAK,KAAK5E,KAAL,CAAWsG,OAVrB;AAWK,6BAAe,KAAKgc;AAXzB;AArDJ;AADJ;AAxCb,OADD;AAgHA;;;;EAjXyC1b,gBAAMC,S;kBAA5Bsb,a;;;;;;;;;;;;;;;;;;;;AClBrB;AACA;;;AAGA;AACA;AACA;;;AATA;;;;AACA;;AACA;;AAGA;;;;AAKA;;IAAYviB,K;;;;;;;;;;;;AAEZ,IAAMwX,iBAAiB;AACtBC,WAAU,EAACE,MAAM,EAAP,EADY;AAEtBG,aAAY,EAACH,MAAM,EAAP;AAFU,CAAvB;AAIA,IAAM8L,iBAAiBnY,WAAKC,MAAL,CAAY;AAClC7J,OAAM,cAD4B;AAElCgiB,eAFkC,0BAEnBtjB,KAFmB,EAEZujB,aAFY,EAEG;AACpCvjB,QAAMuK,QAAN,CAAegZ,aAAf;AACA,EAJiC;AAKlCC,iBALkC,4BAKjBxjB,KALiB,EAKV;AACvB,SAAO;AACNyjB,kBAAevY,WAAKwY,eAAL,cACX1jB,MAAMyjB,aADK;AAEdvW,WAAOlN,MAAMyjB,aAAN,CAAoBvW;AAFb,MADT;AAKNyW,kBAAezY,WAAKwY,eAAL,cACX1jB,MAAM2jB,aADK;AAEdzW,WAAOlN,MAAM2jB,aAAN,CAAoBzW;AAFb,MALT;AASN0W,WAAQ1Y,WAAKwY,eAAL,cACJ1jB,MAAM4jB,MADF;AAEP1W,WAAOlN,MAAM4jB,MAAN,CAAa1W;AAFb,MATF;AAaNsG,YAAStI,WAAKwY,eAAL,cACL1jB,MAAMwT,OADD;AAERtG,WAAOlN,MAAMwT,OAAN,CAActG;AAFb;AAbH,GAAP;AAkBA,EAxBiC;AAyBlC2W,eAzBkC,0BAyBnBC,CAzBmB,EAyBhB5X,MAzBgB,EAyBR;AACzB;AACA;AA3BiC,CAAZ,EA4BpB,iBAAS;AAAA,KACJ+B,iBADI,GACiBjO,MAAMgL,IADvB,CACJiD,iBADI;AAAA,KAEJ8V,MAFI,GAEqD/jB,KAFrD,CAEJ+jB,MAFI;AAAA,KAEIjX,MAFJ,GAEqD9M,KAFrD,CAEI8M,MAFJ;AAAA,KAEYuJ,OAFZ,GAEqDrW,KAFrD,CAEYqW,OAFZ;AAAA,KAEqB5R,cAFrB,GAEqDzE,KAFrD,CAEqByE,cAFrB;AAAA,KAEqCG,OAFrC,GAEqD5E,KAFrD,CAEqC4E,OAFrC;AAAA,KAE8C6C,GAF9C,GAEqDzH,KAFrD,CAE8CyH,GAF9C;AAGX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QACC;AAAC,YAAD;AAAA,eAAU2P,cAAV,IAA0B,QAAO,YAAjC;AAqBC;AAAC,aAAD,CAAM,IAAN;AAAA,KAAW,OAAOpX,MAAMgkB,aAAxB;AACW,cAAU;AACT1M,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADrB;AAKW,gBAAY;AACXD,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,EAAP;AAFO;AALvB;AAUC;AAAC,cAAD,CAAM,IAAN;AAAA;AACC,YAAO,EAAC9I,OAAO,OAAR,EADR;AAEC,gBAAU,WAFX;AAGC,YAAOzO,MAAMikB,aAHd;AAIEhW,sBAAkB,eAAlB,EAAmC;AACnCG,mBAAcpO,MAAMyjB,aAAN,CAAoBvW,KAApB,IAA2B,IAA3B,IAAiClN,MAAMyjB,aAAN,CAAoBvW,KAApB,IAA2B,CAA5D,GAA8D,EAA9D,GAAiElN,MAAMyjB,aAAN,CAAoBvW,KADhE;AAEnCgB,YAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,QAA3B,EAAD;AAF4B,KAAnC,EAIA;AAAA;AAAA,OAAM,WAAU,GAAhB;AACC;AAAC,mBAAD;AAAA;AACC,kBAAU,SADX;AAEC,gBAAS,CAAC,OAAD,CAFV;AAGC,cAAOlE,MAAMyjB,aAAN,CAAoBvW,KAApB,GAA0B,IAA1B,GAA+B,SAA/B,GAAyC,IAHjD;AAIqB,oCAAC,WAAD,IAAO,OAAO,EAACuB,OAAO,MAAR,EAAgByV,aAAa,KAA7B,EAAd;AACO,iBAAUlkB,MAAM4C,MADvB;AAEO,cAAO5C,MAAMyjB,aAAN,CAAoBvW,KAApB,IAA2B,IAA3B,IAAiClN,MAAMyjB,aAAN,CAAoBvW,KAApB,IAA2B,CAA5D,GAA8D,EAA9D,GAAiElN,MAAMyjB,aAAN,CAAoBvW,KAFnG,GAJrB;AAMgI;AAAA;AAAA;AAAA;AAAA;AANhI;AADD,KAJA;AAJF,IAVD;AA8BC;AAAC,cAAD,CAAM,IAAN;AAAA;AACC,YAAO,EAACuB,OAAO,OAAR,EADR;AAEC,gBAAU,WAFX;AAGC,YAAOzO,MAAMmkB,aAHd;AAIElW,sBAAkB,eAAlB,EAAmC;AACnCG,mBAAcpO,MAAM2jB,aAAN,CAAoBzW,KAApB,IAA2B,IAA3B,IAAiClN,MAAM2jB,aAAN,CAAoBzW,KAApB,IAA2B,CAA5D,GAA8D,EAA9D,GAAiElN,MAAM2jB,aAAN,CAAoBzW,KADhE;AAEnCgB,YAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,QAA3B,EAAD;AAF4B,KAAnC,EAIA;AAAA;AAAA,OAAM,WAAU,GAAhB;AACsB;AAAC,mBAAD;AAAA;AACC,kBAAU,SADX;AAEC,gBAAS,CAAC,OAAD,CAFV;AAGC,cAAOlE,MAAM2jB,aAAN,CAAoBzW,KAApB,GAA0B,IAA1B,GAA+B,SAA/B,GAAyC,IAHjD;AAIA,oCAAC,WAAD,IAAO,OAAO,EAACuB,OAAO,MAAR,EAAgByV,aAAa,KAA7B,EAAd;AACO,iBAAUlkB,MAAM4C,MADvB;AAEO,cAAO5C,MAAM2jB,aAAN,CAAoBzW,KAApB,IAA2B,IAA3B,IAAiClN,MAAM2jB,aAAN,CAAoBzW,KAApB,IAA2B,CAA5D,GAA8D,EAA9D,GAAiElN,MAAM2jB,aAAN,CAAoBzW,KAFnG,GAJA;AAM2G;AAAA;AAAA;AAAA;AAAA;AAN3G;AADtB,KAJA;AAJF;AA9BD,GArBD;AAwEC;AAAC,aAAD,CAAM,IAAN;AAAA,KAAW,OAAM,0BAAjB;AACW,cAAU;AACToK,SAAI,EAACC,MAAM,EAAP,EADK;AAETE,SAAI,EAACF,MAAM,CAAP;AAFK,KADrB;AAKW,gBAAY;AACXD,SAAI,EAACC,MAAM,EAAP,EADO;AAEXE,SAAI,EAACF,MAAM,CAAP;AAFO,KALvB;AASW,eAAU,GATrB;AAUEtJ,qBAAkB,WAAlB,EAA+B;AAC/BG,kBAAcpO,MAAMwT,OAAN,CAActG,KAAd,CAAoBxG,MAApB,GAA6B,CAA7B,GAAiC1G,MAAMwT,OAAN,CAActG,KAAd,CAAoBxG,MAApB,GAA6B,CAA7B,IAAkC1G,MAAMwT,OAAN,CAActG,KAAd,CAAoBhL,GAApB,CAAwB,UAACrB,IAAD,EAAU;AAClH,YAAOA,KAAKoM,MAAZ;AACA,KAFgF,CAAnE,GAET,EAH0B;AAI/BiB,WAAO,CAAC,EAACC,UAAU,KAAX,EAAkBjK,SAAS,QAA3B,EAAD;AAJwB,IAA/B,EAMA;AAAA;AAAA,MAAK,WAAU,GAAf;AACC,kCAAC,mBAAD;AACC,WAAMlE,MAAMwT,OAAN,CAActG,KAAd,CAAoBxG,MAApB,GAA6B,CAA7B,GAAiC1G,MAAMwT,OAAN,CAActG,KAAd,CAAoBxG,MAApB,GAA6B,CAA7B,IAAkC1G,MAAMwT,OAAN,CAActG,KAAjF,GAAyF,EADhG;AAEC,mBAAc6W,MAFf;AAGC,eAAU/jB,MAAM4C;AAHjB;AADD,IANA;AAVF;AAxED,EADD;AAqHA,CAjKsB,CAAvB;;IAoKqBwhB,Y,OADpBrkB,mB;;;AAEA,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACZA,KADY;;AAAA,QA4DnBoE,WA5DmB,GA4DL,YAAM;AACnB,SAAKW,QAAL,CAAc;AACbnC,YAAQ,CAAC,MAAK2B,KAAL,CAAW3B;AADP,IAAd;AAGA,GAhEkB;;AAAA,QAkEnByhB,gBAlEmB,GAkEA,yBAAiB;AACnC,SAAKtf,QAAL,CAAc;AAAA,QAAE4R,MAAF,QAAEA,MAAF;AAAA,WAAe;AAC5BA,0BAAYA,MAAZ,EAAuB4M,aAAvB;AAD4B,KAAf;AAAA,IAAd,EAEI,YAAM;AACT,QAAIe,cAAc,MAAK/f,KAAL,CAAWsE,IAAX,CAAgBjI,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAClD,YAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,KAFiB,EAEf,CAFe,CAAlB;AAGA,QAAIkD,SAASxD,OAAOC,MAAP,CAAc,EAAd,EAAkB6jB,WAAlB,EAA+B,EAAC,iBAAiB,MAAK/f,KAAL,CAAWoS,MAAX,CAAkB8M,aAAlB,CAAgCvW,KAAlD,EAA/B,EAAyF,EAAC,iBAAiB,MAAK3I,KAAL,CAAWoS,MAAX,CAAkBgN,aAAlB,CAAgCzW,KAAlD,EAAzF,CAAb;AACA,UAAKwF,QAAL,CAAc1O,MAAd;AACA;AACA,QAAIzD,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,MAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,UAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyCyD,MAAzC,CAAtB;AACA,IAXD;AAYA,GA/EkB;;AAAA,QAiFnB0O,QAjFmB,GAiFR,UAAC1O,MAAD,EAAY;AACtB,SAAKhE,KAAL,CAAWukB,YAAX,CAAwBvgB,MAAxB;AACA,GAnFkB;;AAAA,QAsFnBwgB,KAtFmB,GAsFX,UAACxX,GAAD,EAAMb,CAAN,EAAY;AACnB,OAAIT,gBAAJ;AACA,OAAIS,EAAEzF,MAAN,EAAc;AACbgF,cAAUS,EAAEjK,GAAF,CAAM,UAACrB,IAAD,EAAU;AACzB,YAAO,EAACoM,QAAQpM,KAAKb,KAAL,CAAWkN,KAApB,EAA2BC,UAAUtM,KAAKb,KAAL,CAAWW,QAAhD,EAAP;AACA,KAFS,CAAV;AAGA,IAJD,MAIO;AACN+K,cAAU,EAAV;AACA;AARkB,OASZ7C,IATY,GASJ,MAAKtE,KATD,CASZsE,IATY;;AAUnB,OAAIyb,cAAczb,KAAKjI,MAAL,CAAY,UAACC,IAAD,EAAU;AACvC,WAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,IAFiB,EAEf,CAFe,CAAlB;AAGA,OAAIkD,SAASxD,OAAOC,MAAP,CAAc,EAAd,EAAkB6jB,WAAlB,EAA+B,EAAC,WAAW5Y,OAAZ,EAA/B,CAAb;AACA,SAAK1L,KAAL,CAAWgF,SAAX,CAAqBhB,MAArB;AACA;AACA,GAtGkB;;AAAA,QAyGnB8H,IAzGmB,GAyGZ,UAACuB,KAAD,EAAW;AAAA,OACVxE,IADU,GACF,MAAKtE,KADH,CACVsE,IADU;;AAEjB,OAAIyb,cAAczb,KAAKjI,MAAL,CAAY,UAACC,IAAD,EAAU;AACvC,WAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,IAFiB,EAEf,CAFe,CAAlB;AAGA,OAAIkD,SAASxD,OAAOC,MAAP,CAAc,EAAd,EAAkB6jB,WAAlB,EAA+B,EAAC,WAAWjX,KAAZ,EAA/B,CAAb;AACA,SAAKrN,KAAL,CAAWgF,SAAX,CAAqBhB,MAArB;AACA,GAhHkB;;AAElB,QAAK5D,KAAL,GAAa,MAAKJ,KAAL,CAAWI,KAAxB;AACA,QAAKmE,KAAL,GAAa;AACZ3B,WAAQ,KADI;AAEZiG,SAAM,MAAK7I,KAAL,CAAW6I,IAFL;AAGZ8N,WAAQ;AACP8M,mBAAe;AACdvW,YAAO,MAAKlN,KAAL,CAAW6I,IAAX,CAAgBjI,MAAhB,CAAuB,UAACC,IAAD,EAAU;AACvC,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAFM,EAEJ,CAFI,EAED,eAFC,KAEmB;AAHZ,KADR;AAMP6iB,mBAAe;AACdzW,YAAO,MAAKlN,KAAL,CAAW6I,IAAX,CAAgBjI,MAAhB,CAAuB,UAACC,IAAD,EAAU;AACvC,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAFM,EAEJ,CAFI,EAED,eAFC,KAEmB;AAHZ,KANR;AAWP8iB,YAAQ;AACP1W,YAAO;AADA,KAXD;AAcPsG,aAAS;AACRtG,YAAO,MAAKlN,KAAL,CAAW6I,IAAX,CAAgBjI,MAAhB,CAAuB,UAACC,IAAD,EAAU;AACvC,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAFM,EAEJ,CAFI,EAED,SAFC,KAEa,IAFb,GAEoB,EAFpB,GAEyB,MAAKd,KAAL,CAAW6I,IAAX,CAAgBjI,MAAhB,CAAuB,UAACC,IAAD,EAAU;AAChE,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAF+B,EAE7B,CAF6B,EAE1B,SAF0B;AAHxB;AAdF;AAHI,GAAb;AAHkB;AA6BlB;;;;4CAEyBsJ,S,EAAW;AACpC,OAAIA,UAAUvB,IAAV,IAAkB,KAAK7I,KAAL,CAAW6I,IAAjC,EAAuC;AACtC,SAAK9D,QAAL,CAAc;AACb8D,WAAMuB,UAAUvB;AADH,KAAd;AAGA,QAAI7G,MAAM,EAAV;AACAA,QAAIyhB,aAAJ,GAAoB;AACnB,cAASrZ,UAAUvB,IAAV,CAAejI,MAAf,CAAsB,UAACC,IAAD,EAAU;AACxC,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAFQ,EAEN,CAFM,EAEH,eAFG;AADU,KAApB;AAKAkB,QAAI2hB,aAAJ,GAAoB;AACnB,cAASvZ,UAAUvB,IAAV,CAAejI,MAAf,CAAsB,UAACC,IAAD,EAAU;AACxC,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAFQ,EAEN,CAFM,EAEH,eAFG;AADU,KAApB;AAKAkB,QAAIwR,OAAJ,GAAc;AACb,cAASpJ,UAAUvB,IAAV,CAAejI,MAAf,CAAsB,UAACC,IAAD,EAAU;AACxC,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAFQ,EAEN,CAFM,EAEH,SAFG,KAEW,IAFX,GAEkB,EAFlB,GAEuBsJ,UAAUvB,IAAV,CAAejI,MAAf,CAAsB,UAACC,IAAD,EAAU;AAC/D,aAAOA,KAAKC,QAAL,KAAkB,UAAzB;AACA,MAF+B,EAE7B,CAF6B,EAE1B,SAF0B;AAHnB,KAAd;AAOA,SAAKiE,QAAL,CAAc;AAAA,SAAE4R,MAAF,SAAEA,MAAF;AAAA,YAAe;AAC5BA,2BAAYA,MAAZ,EAAuB3U,GAAvB;AAD4B,MAAf;AAAA,KAAd;AAGA;AACD;;AA2BD;;;AAmBA;;;;2BAUS;AAAA,gBAC0B,KAAKhC,KAD/B;AAAA,OACDgjB,QADC,UACDA,QADC;AAAA,OACStY,QADT,UACSA,QADT;AAAA,OACmBjD,GADnB,UACmBA,GADnB;AAAA,gBAEuB,KAAKlD,KAF5B;AAAA,OAEDsE,IAFC,UAEDA,IAFC;AAAA,OAEKjG,MAFL,UAEKA,MAFL;AAAA,OAEa+T,MAFb,UAEaA,MAFb;;;AAIR,OAAIqN,gBAAgB,EAApB;AACA,OAAIC,gBAAgB,EAApB;AACA,OAAIE,gBAAgB,EAApB;AACA,OAAIM,WAAW,EAAf;AACA,OAAIzB,aAAa,SAAjB,EAA4B;AAC3BgB,oBAAgB,MAAhB;AACAC,oBAAgB,OAAhB;AACAE,oBAAgB,MAAhB;AACAM,eAAW,UAAX;AACA;AACD,OAAIzB,aAAa,SAAjB,EAA4B;AAC3BgB,oBAAgB,MAAhB;AACAC,oBAAgB,OAAhB;AACAE,oBAAgB,MAAhB;AACAM,eAAW,SAAX;AACA;;AAED,OAAMC,WAAW;AAChB,qBAAiBV,aADD;AAEhB,qBAAiBC,aAFD;AAGhB,qBAAiBE;AAHD,IAAjB;;AAMA,OAAMQ,aAAa;AAClB,cAAUja;;AAGX;;AAJmB,IAAnB,CAMA,OACC;AAAA;AAAA,MAAK,WAAU,MAAf;AACC,kCAAC;AACA;AACA;AAFD,mBAGKiM,MAHL,EAIK+N,QAJL,EAKKC,UALL;AAMC,eAAU,KAAKN,gBANhB;AAOC,aAAQ,KAAKvY;AACb;AACA;AATD;AADD,IADD;AAeA;;;;EAnKwClF,gBAAMC,S;;kBAA3Bud,Y;;;;;;;;;;;;;;;;;;;ACpLrB;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAYxkB,K;;AACZ;;;;AACA;;IAAYD,I;;;;;;;;;;;;;;IAGSilB,Q,OADpB7kB,mB;;;AAEA,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,yHACNA,KADM;;AAAA,eA8BhB6kB,QA9BgB,GA8BN,YAAM;AAAE;AAAF,gBACN7f,SADM,GACO,OAAKhF,KADZ,CACNgF,SADM;AAAA,gBAEN6D,IAFM,GAEE,OAAKtE,KAFP,CAENsE,IAFM;AAGb;;AACA,gBAAI8S,oBAAoB9S,KAAKlI,QAAL,IAAe,IAAf,IAAqBkI,KAAKlI,QAAL,CAAc,CAAd,EAAiBA,QAAjB,IAA2B,IAAhD,GAAqDkI,KAAKlI,QAAL,CAAc,CAAd,EAAiBA,QAAtE,GAA+E,EAAvG;AACA,gBAAM4S,QAAQoI,kBAAkB/a,MAAlB,CAAyB,UAACC,IAAD,EAAQ;AAAC,uBAAOA,KAAKS,IAAL,IAAW,EAAX,IAAeT,KAAKS,IAAL,IAAW,IAAjC;AAAsC,aAAxE,CAAd;AACA,gBAAIiS,MAAM7M,MAAN,GAAa,CAAjB,EAAoB;AAAG;AACpBxC,8BAAQuP,IAAR,CAAa,UAAb;AACA,uBAAO,KAAP;AACF;AACA,gBAAMqL,WAAWnD,kBAAkB/a,MAAlB,CAAyB,UAACC,IAAD,EAAQ;AAAC,uBAAOA,KAAK8M,SAAL,IAAgB,EAAhB,IAAoB9M,KAAK8M,SAAL,IAAgB,IAApC,KAA2C9M,KAAK2M,OAAL,IAAc,EAAd,IAAkB3M,KAAK2M,OAAL,IAAc,IAA3E,CAAP;AAAwF,aAA1H,CAAjB;AACA,gBAAIsR,SAASpY,MAAT,GAAgB,CAApB,EAAuB;AAAG;AACtBxC,8BAAQuP,IAAR,CAAa,UAAb;AACA,uBAAO,KAAP;AACH;AACDzO,sBAAU6D,IAAV;AACD,mBAAKzE,WAAL;AACF,SA/Ce;;AAAA,eAkDhBsO,QAlDgB,GAkDL,UAAC0H,QAAD,EAAWpL,GAAX,EAAmB;AAAA,gBACnBnG,IADmB,GACX,OAAKtE,KADM,CACnBsE,IADmB;;AAE1B,gBAAIwG,UAAU,EAAd;AACA+K,qBAAStG,OAAT,CAAiB,gBAAM;AAAA,oBACd9E,GADc,GACWnO,IADX,CACdmO,GADc;AAAA,oBACTrO,QADS,GACWE,IADX,CACTF,QADS;AAAA,oBACIqB,GADJ,4BACWnB,IADX;;AAEnBwO,wBAAQxF,IAAR,CAAa7H,GAAb;AACH,aAHD;AAIA,gBAAIqY,eAAexR,KAAKlI,QAAL,CAAcC,MAAd,CAAqB;AAAA,uBAAOC,KAAKC,QAAL,KAAgB,OAAvB;AAAA,aAArB,EAAqD,CAArD,CAAnB;AACAuZ,2BAAe7Z,OAAOC,MAAP,CAAc4Z,YAAd,EAA2B,EAAC,YAAWD,QAAZ,EAA3B,CAAf;AACA,gBAAIE,eAAezR,KAAKlI,QAAxB;AACA,gBAAM4Z,aAAaD,aAAa9K,SAAb,CAAuB,gBAAO;AAAC,uBAAO3O,KAAKC,QAAL,KAAgB,OAAvB;AAA+B,aAA9D,CAAnB;AACAwZ,yBAAaC,UAAb,IAA2BF,YAA3B;AACA,mBAAKtV,QAAL,CAAc,EAAC8D,MAAKrI,OAAOC,MAAP,CAAcoI,IAAd,EAAoB,EAAC,YAAWyR,YAAZ,EAApB,CAAN,EAAd;AACH,SA/De;;AAAA,eAiEhBiK,YAjEgB,GAiEF,UAACO,YAAD,EAAkB;AAAA,gBACrBjc,IADqB,GACb,OAAKtE,KADQ,CACrBsE,IADqB;;AAE5B,gBAAIkc,kBAAkBlc,KAAKlI,QAAL,CAAcC,MAAd,CAAqB;AAAA,uBAAOC,KAAKC,QAAL,KAAgB,UAAvB;AAAA,aAArB,EAAwD,CAAxD,CAAtB;AACAikB,8BAAkBvkB,OAAOC,MAAP,CAAcskB,eAAd,EAA8BD,YAA9B,CAAlB;AACA,gBAAIxK,eAAezR,KAAKlI,QAAxB;AACA,gBAAMqkB,gBAAgB1K,aAAa9K,SAAb,CAAuB,gBAAO;AAAC,uBAAO3O,KAAKC,QAAL,KAAgB,UAAvB;AAAkC,aAAjE,CAAtB;AACAwZ,yBAAa0K,aAAb,IAA8BD,eAA9B;AACA,mBAAKhgB,QAAL,CAAc,EAAC8D,MAAKrI,OAAOC,MAAP,CAAcoI,IAAd,EAAoB,EAAC,YAAWyR,YAAZ,EAApB,CAAN,EAAd;AACH,SAzEe;;AAAA,eA2EhBlW,WA3EgB,GA2EF,YAAM;AAChB,mBAAKW,QAAL,CAAc;AACVnC,wBAAQ,CAAC,OAAK2B,KAAL,CAAW3B;AADV,aAAd,EAEG,YAAI;AACH;AACA,oBAAI,OAAK2B,KAAL,CAAW3B,MAAX,IAAmB,IAAvB,EAA6B;AACzB,2BAAKmC,QAAL,CAAc;AACV0W,qCAAajb,OAAOC,MAAP,CAAc,EAAd,EAAkB,OAAK8D,KAAL,CAAWsE,IAA7B;AADH,qBAAd,EAEG,YAAI;AACH;AACA,+BAAK7I,KAAL,CAAWsiB,aAAX,CAAyB,IAAzB;AACH,qBALD;AAMH,iBAPD,MAOO;AAAE;AACL;AACA,wBAAI/hB,WAAWsB,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAK3B,KAAL,CAAWG,QAA1B,CAAX,CAAf;AACA,2BAAKH,KAAL,CAAWG,QAAX,GAAsBX,MAAM+E,cAAN,CAAqBpE,QAArB,EAA+B,QAA/B,EAAyC,OAAKgE,KAAL,CAAWkX,WAApD,CAAtB;AACA;AACA,2BAAKzb,KAAL,CAAWsiB,aAAX,CAAyB,KAAzB;AACH;AACJ,aAlBD;AAmBH,SA/Fe;;AAEZ,eAAKliB,KAAL,GAAa,OAAKJ,KAAL,CAAWI,KAAxB;AACA,eAAKmE,KAAL,GAAa;AACT0gB,oBAAO,IADE;AAET/J,qBAAS,CAFA;AAGTtY,oBAAO,KAHE;AAITiG,kBAAK,OAAK7I,KAAL,CAAW6I,IAJP;AAKT4S,yBAAa,EALJ,CAKQ;AALR,SAAb;AAHY;AAUf;;;;kDAEyBrR,S,EAAW;AAAA;;AACjC,gBAAGA,UAAUvB,IAAV,IAAkB,KAAK7I,KAAL,CAAW6I,IAAhC,EAAsC;AACnC,qBAAK9D,QAAL,CAAc,EAAC8D,MAAKuB,UAAUvB,IAAhB,EAAd,EAAoC,YAAI;AACpC,wBAAIyR,eAAelQ,UAAUvB,IAAV,CAAelI,QAAf,IAAyB,IAAzB,IAAiC,OAAOyJ,UAAUvB,IAAV,CAAelI,QAAtB,KAAkC,WAAnE,GAAiFyJ,UAAUvB,IAAV,CAAelI,QAAhG,GAAyG,IAA5H;AACA;AACA,wBAAI+a,OAAOpB,aAAa1Z,MAAb,CAAoB,UAACC,IAAD,EAAQ;AAAC,+BAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,qBAA3D,EAA6D,CAA7D,CAAX;AACA,wBAAIN,OAAOqS,IAAP,CAAY,OAAKtO,KAAL,CAAWkX,WAAvB,EAAoC/U,MAApC,GAA2C,CAA3C,IAA8CgV,SAAO7Y,SAAzD,EAAoE;AAChE;AACA,4BAAI4Y,cAAc5Z,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAe,OAAKwC,KAAL,CAAWkX,WAA1B,CAAX,CAAlB;AACA,+BAAK1W,QAAL,CAAc;AACV0W,yCAAa7b,MAAM+E,cAAN,CAAqB8W,WAArB,EAAkC,QAAlC,EAA4CC,IAA5C;AADH,yBAAd;AAGH;AACJ,iBAXD;AAYF;AACJ;;AAED;;;AAoBA;;;;iCAgDS;AACL,gBAAI9L,QAAQ,IAAZ;AADK,8BAEmBA,MAAMrL,KAFzB;AAAA,gBAEGsE,IAFH,eAEGA,IAFH;AAAA,gBAESjG,MAFT,eAESA,MAFT;AAAA,8BAGoBgN,MAAM5P,KAH1B;AAAA,gBAGGgjB,QAHH,eAGGA,QAHH;AAAA,gBAGavb,GAHb,eAGaA,GAHb;;AAIL,gBAAIkU,oBAAoB9S,KAAKlI,QAAL,IAAe,IAAf,IAAqBkI,KAAKlI,QAAL,CAAc,CAAd,EAAiBA,QAAjB,IAA2B,IAAhD,GAAqDkI,KAAKlI,QAAL,CAAc,CAAd,EAAiBA,QAAtE,GAA+E,EAAvG;AACA,gBAAI2Z,eAAezR,KAAKlI,QAAL,IAAe,IAAf,IAAuB,OAAOkI,KAAKlI,QAAZ,KAAwB,WAA/C,GAA6DkI,KAAKlI,QAAlE,GAA2E,IAA9F;AACA,gBAAIqkB,gBAAgB,CAAC,CAArB;AACA,gBAAIE,YAAY,CAAC,CAAjB;AACA,gBAAG5K,gBAAc,IAAjB,EAAuB;AACnB0K,gCAAgB1K,aAAa9K,SAAb,CAAuB,UAAC3O,IAAD,EAAQ;AAAC,2BAAOA,KAAKC,QAAL,KAAgB,UAAvB;AAAkC,iBAAlE,CAAhB,CADmB,CACkE;AACrFokB,4BAAY5K,aAAa9K,SAAb,CAAuB,UAAC3O,IAAD,EAAQ;AAAC,2BAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,iBAA9D,CAAZ,CAFmB,CAE0D;AAChF;AACD,gBAAIuV,gBAAJ;AACA,gBAAIH,oBAAJ;AACA,gBAAI8M,YAAU,MAAV,IAAkBkC,aAAW,CAAC,CAAlC,EAAqC;AAAG;AACrC7O,0BAAUiE,aAAa1Z,MAAb,CAAoB,UAACC,IAAD,EAAQ;AAAC,2BAAOA,KAAKC,QAAL,KAAgB,MAAvB;AAA8B,iBAA3D,EAA6D,CAA7D,CAAV,CADkC,CACwC;AAC1EoV,8BAAcG,WAASA,QAAQ1V,QAAjB,IAA2B0V,QAAQ1V,QAAR,IAAkB,IAA7C,GAAkD0V,QAAQ1V,QAAR,CAAiBuB,GAAjB,CAAqB,UAACoU,KAAD,EAAW;AAC3F,2BAAO9V,OAAOC,MAAP,CAAc,EAAd,EAAkB;AACrB8H,6BAAK+N,MAAM7U,EADU;AAErBH,8BAAMgV,MAAM7M,QAFS;AAGrBP,gCAAQ,MAHa;AAIrB1G,6BAAK8T,MAAM5M,QAJU;AAKrBF,gCAAQ8M,MAAM9M,MALO;AAMrBC,kCAAS6M,MAAM7M,QANM;AAOrBC,kCAAU4M,MAAM5M,QAPK;AAQrBjI,4BAAI6U,MAAM7U;AARW,qBAAlB,CAAP;AAUH,iBAX8D,CAAlD,GAWR,EAXN;AAYF;AACD,gBAAIsR,eAAepT,KAAK8G,IAAL,CAAUmJ,MAAMxP,KAAN,CAAY2S,YAAtB,EAAoClK,KAAKpH,EAAzC,MAAgDoB,SAAhD,GAA0DlD,KAAK8G,IAAL,CAAUmJ,MAAMxP,KAAN,CAAY2S,YAAtB,EAAoClK,KAAKpH,EAAzC,CAA1D,GAAuG,EAA1H;AACA,gBAAIyd,QAAQnM,aAAarM,MAAb,GAAoB,CAApB,GAAsB,IAAtB,GAA2B,KAAvC;AACN,mBACU;AAAA;AAAA,kBAAK,WAAW,MAAhB;AACI;AAAA;AAAA,sBAAK,WAAW,MAAhB;AACI;AAAA;AAAA,0BAAM,WAAU,MAAhB;AAAwBsc,oCAAU,MAAV,GAAkB,8BAAC,UAAD,IAAM,MAAK,MAAX,EAAkB,WAAU,MAA5B,GAAlB,GAAwD,IAAhF;AAAsFA;AAAtF,qBADJ;AAEK,qBAACpgB,MAAD,GACD;AAAA;AAAA;AACI;AAAC,yCAAD;AAAA,8BAAS,WAAU,QAAnB,EAA4B,OAAO,IAAnC;AACI,0DAAC,UAAD;AACI,yCAASgN,MAAMxL,WADnB;AAEI,uCAAO,EAACuG,UAAS,MAAV,EAAkBuZ,aAAY,MAA9B,EAFX;AAGI,sCAAK,MAHT;AADJ;AADJ,qBADC,GAUD;AAAA;AAAA;AACI;AAAC,yCAAD;AAAA,8BAAS,WAAU,QAAnB,EAA4B,OAAO,IAAnC;AACI,0DAAC,UAAD;AACI,yCAAS,KAAK9f,WADlB;AAEI,uCAAO,EAACuG,UAAS,MAAV,EAAkBuZ,aAAY,MAA9B,EAFX;AAGI,sCAAK,cAHT;AADJ,yBADJ;AAOI;AAAC,yCAAD;AAAA,8BAAS,WAAU,QAAnB,EAA4B,OAAO,IAAnC;AACKhF,oCAAO,8BAAC,UAAD;AACJ,uCAAO,EAACvU,UAAS,MAAV,EAAkBC,OAAM,SAAxB,EADH;AAEJ,sCAAK,cAFD,GAAP,GAE2B,8BAAC,UAAD;AACxB,yCAASgF,MAAMiV,QADS;AAExB,uCAAO,EAACla,UAAS,MAAV,EAFiB;AAGxB,sCAAK,cAHmB;AAHhC;AAPJ;AAZJ,iBADJ;AA+BKqY,4BAAU,MAAV,GACD,8BAAC,uBAAD;AACI,wBAAIna,KAAKpH,EADb;AAEI,2BAAOmO,MAAMxP,KAFjB;AAGI,6BAASyI,KAAK2K,OAAL,IAAc,IAAd,GAAmB,EAAnB,GAAsB3K,KAAK2K,OAHxC;AAII,gCAAYmI,iBAJhB;AAKI,8BAAU/L,MAAM8C,QALpB;AAMI,8BAAU,CAAC9P,MANf;AAOI,+BAAWiG,KAAKxE,SAPpB;AAQI,yBAAKwE,KAAKlI,QAAL,IAAe,IAAf,GAAsBkI,KAAKlI,QAAL,CAAc,CAAd,EAAiB,IAAjB,CAAtB,GAA6C;AARtD,kBADC,GAWD,8BAAC,uBAAD;AACI,wBAAIkI,KAAKpH,EADb;AAEI,2BAAOmO,MAAMxP,KAFjB;AAGI,6BAASyI,KAAK2K,OAAL,IAAc,IAAd,GAAmB,EAAnB,GAAsB3K,KAAK2K,OAHxC;AAII,gCAAYmI,iBAJhB;AAKI,yBAAKlU,GALT;AAMI,kCAAc,IANlB;AAOI,8BAAUmI,MAAM8C,QAPpB;AAQI,8BAAU,CAAC9P,MARf;AASI,6BAAS,KAAK5C,KAAL,CAAW4E,OATxB;AAUI,oCAAgB,KAAK5E,KAAL,CAAWyE,cAV/B;AAWI,+BAAWoE,KAAKxE,SAXpB;AAYI,yBAAKwE,KAAKlI,QAAL,IAAe,IAAf,GAAsBkI,KAAKlI,QAAL,CAAc,CAAd,EAAiB,IAAjB,CAAtB,GAA6C;AAZtD,kBA1CJ;AAwDKqkB,iCAAe,CAAC,CAAhB,GACG,8BAAC,sBAAD;AACI,2BAAOpV,MAAMxP,KADjB;AAEI,8BAAY4iB,QAFhB;AAGI,8BAAU,CAACpgB,MAHf;AAII,kCAAe,KAAK2hB,YAJxB;AAKI,+BAAW,KAAKvkB,KAAL,CAAWgF,SAL1B;AAMI,oCAAgB,KAAKhF,KAAL,CAAWyE,cAN/B;AAOI,6BAAS,KAAKzE,KAAL,CAAW4E,OAPxB;AAQI,yBAAK6C,GART;AASI,0BAAM6S,aAAa1Z,MAAb,CAAoB,UAACC,IAAD,EAAQ;AAAC,+BAAOA,KAAKC,QAAL,KAAgB,UAAvB;AAAkC,qBAA/D;AATV,kBADH,GAWO,IAnEZ;AAoEKkiB,4BAAU,MAAV,IAAkBkC,aAAW,CAAC,CAA9B,GACG;AAAA;AAAA,sBAAK,WAAW,CAACtiB,MAAD,GAAQ,MAAR,GAAe,cAA/B;AACA,kDAAC,kBAAD;AACI,wCAAgB,KAAK5C,KAAL,CAAWyE,cAD/B;AAEI,iCAAS,KAAKzE,KAAL,CAAW4E,OAFxB;AAGI,kCAAUsR,WAHd;AAII,6BAAKG,UAAQA,QAAQ5U,EAAhB,GAAmB,EAJ5B;AAKI,mCAAW4U,UAAQA,QAAQhS,SAAhB,GAA0B,EALzC;AAMI,kCAAU,CAACzB,MANf;AAOI,iCAAS6E;AAPb;AADA,iBADH,GAUY;AA9EjB,aADV;AAkFA;;;;EAnNoCb,gBAAMC,S;;kBAAvB+d,Q","file":"js/10-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 项目看板 新建劳务仓流程、展厅、综合办公\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Breadcrumb, message} from 'antd';\r\nimport url from 'url';\r\nimport * as  mobx from 'mobx';\r\nimport ProgressList from '@/components/labor/ProgressList';\r\nimport Appraisal from '@/components/labor/Appraisal';\r\nimport Office from '@/components/labor/Office';\r\nimport Delivery from '@/components/labor/Delivery';\r\nimport WortileCommon from '@/components/labor/WortileCommon';\r\nimport * as utils from \"@/utils/utils\";\r\nimport ItemInfoNew from \"@/components/worktile/ItemInfoNew\";\r\nimport ProjectDesign from \"@/components/labor/ProjectDesign\";\r\nimport emitter from \"@/utils/events\";\r\nconst pgState = {4: 'pgObj', 5: 'zhObj'};  // 4 展厅 5 综合办公\r\n\r\n@inject('ExhibitionStore')\r\n@observer\r\nclass Index extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.ExhibitionStore;\r\n\t\tthis.state = {\r\n\t\t\tcount: 1, // 项目信息  1 创建、2 编辑初始化状态\r\n\t\t\tpayCount: 1, // 实施交付\r\n\t\t\tpgCount: 1,  // 项目评估\r\n\t\t\tpsCount: 1, // 方案设计\r\n\t\t};\r\n\t\tmobx.autorun(() => {\r\n\t\t\tconst type = pgState[this.store.temId];\r\n\t\t\tconsole.log(type, 'auto')\r\n\t\t\tthis.store.commonData = this.store.getcommonData;\r\n\t\t\tthis.store.payObj = this.store.getproDesign;\r\n\t\t\tthis.store.proDesign = this.store.getFnDesign;\r\n\t\t\tthis.store[type] = this.store.getPgDesign;\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet search = this.props.location.search;\r\n\t\tconst {projectid, temId, temName, id, pid, stageid} = url.parse(search, true).query;\r\n\t\tthis.store.temId = temId;\r\n\t\tthis.store.temName = temName;\r\n\t\t// 获取大文件上传sts\r\n\t\tthis.store.getSts();\r\n\t\tif (projectid != null && projectid != undefined) { // 详情、编辑态\r\n\t\t\tthis.store.projectId = projectid;\r\n\t\t\tthis.store.pgObj =  Object.assign({},{   // 展厅项目评估\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"stage\",\r\n\t\t\t\t\"masters\": null,\r\n\t\t\t\t\"children\": [{\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\"treeType\": \"normal\",\r\n\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\"children\": [{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": \"场地CAD图纸\",\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\"name\": \"公司心仪案例/案例参考\",\r\n\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t\"jbzl\": {\r\n\t\t\t\t\t\t\"xmgs\": null,\r\n\t\t\t\t\t\t\"xmys\": null,\r\n\t\t\t\t\t\t\"xmbj\": null,\r\n\t\t\t\t\t\t\"cgrq\": null,\r\n\t\t\t\t\t\t\"ztmd\": null,\r\n\t\t\t\t\t\t\"jszq\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"srzl\": {\r\n\t\t\t\t\t\t\"sjzd\": null,\r\n\t\t\t\t\t\t\"scyq\": null,\r\n\t\t\t\t\t\t\"zxyq\": null,\r\n\t\t\t\t\t\t\"dgyq\": null,\r\n\t\t\t\t\t\t\"sgclyq\": null,\r\n\t\t\t\t\t\t\"jbtsdln\": null,\r\n\t\t\t\t\t\t\"zhhsddyy\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"fzzl\": {\r\n\t\t\t\t\t\t\"gsxyalalck\": null,\r\n\t\t\t\t\t\t\"bcsm\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t}],\r\n\t\t\t\t\"stageName\": \"项目评估\",\r\n\t\t\t});\r\n\t\t\tthis.store.zhObj =  Object.assign({},{   //综合办公项目评估\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"stage\",\r\n\t\t\t\t\"masters\": null,\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"normal\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"name\": \"现场施工规划图\",\r\n\t\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"name\": \"房屋布置图纸\",\r\n\t\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"name\": \"公司心仪案例/案例参考\",\r\n\t\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"jbzl\": {\r\n\t\t\t\t\t\t\t\"glry\": [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"办公用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"宿舍用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"宿舍用房(含UB)\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"食堂\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"会议室\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"智慧展厅\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"试验室\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"辅助用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\"lwry\": [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"办公用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"宿舍用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"食堂\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"会议室\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"展厅\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"淋浴间\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"洗衣房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"辅助用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\"cqwd\": []\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"srzl\": {\r\n\t\t\t\t\t\t\t\"zhhsddyy\": null,\r\n\t\t\t\t\t\t\t\"bghjdssd\": null,\r\n\t\t\t\t\t\t\t\"jbtedln\": null,\r\n\t\t\t\t\t\t\t\"jzmgsxym\": null,\r\n\t\t\t\t\t\t\t\"jbdfts\": null,\r\n\t\t\t\t\t\t\t\"bimxxhsdyq\": null,\r\n\t\t\t\t\t\t\t\"gmxqdg\": null\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"fzzl\": {\r\n\t\t\t\t\t\t\t\"dlqk\": null,\r\n\t\t\t\t\t\t\t\"rksd\": null,\r\n\t\t\t\t\t\t\t\"zwhj\": null,\r\n\t\t\t\t\t\t\t\"ljjcsj\": 0,\r\n\t\t\t\t\t\t\t\"gsxyalalcg\": null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"stageName\": \"项目评估\",\r\n\t\t\t});\r\n\t\t\tthis.getTree(projectid);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcount: 2,\r\n\t\t\t\tpayCount: 2,\r\n\t\t\t\tpgCount: 2,  // 项目评估\r\n\t\t\t\tpsCount: 2, // 方案设计\r\n\t\t\t});\r\n\t\t} else {  // 新增态\r\n\t\t\tthis.store.projectId = \"\";\r\n\t\t\tthis.store.projectName = \"\";\r\n\t\t\t// 初始化获取步骤进度信息\r\n\t\t\tthis.store.getStageTree();\r\n\t\t\t// 维护状态公共组件\r\n\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\tlet obj = {};\r\n\t\t\tlet countObj = {};\r\n\t\t\tcommonData.map((v) => {\r\n\t\t\t\tobj[v.id] = true;\r\n\t\t\t\tcountObj[v.id] = 1;\r\n\t\t\t});\r\n\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\tthis.store.isDesignEdit=true;\r\n\t\t\tthis.store.itemObj = Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"stage\",\r\n\t\t\t\t\"masters\": null,\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"code\": \"\",\r\n\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\"masters\": [],\r\n\t\t\t\t\t\t\"customer\": \"\",\r\n\t\t\t\t\t\t\"productType\": [],\r\n\t\t\t\t\t\t\"address\": \"\",\r\n\t\t\t\t\t\t\"description\": \"\",\r\n\t\t\t\t\t\t\"milepost\": \"\",\r\n\t\t\t\t\t\t\"builtArea\": \"\",\r\n\t\t\t\t\t\t\"totalCost\": \"\",\r\n\t\t\t\t\t\t\"builtType\": \"\",\r\n\t\t\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\t\t\"constructionUnit\": \"\",\r\n\t\t\t\t\t\t\"constructionQualification\": \"\",\r\n\t\t\t\t\t\t\"partyaUnit\": \"\",\r\n\t\t\t\t\t\t\"unitQualification\": \"\",\r\n\t\t\t\t\t\t\"declarationAwards\": \"\",\r\n\t\t\t\t\t\t\"awardGrade\": \"\",\r\n\t\t\t\t\t\t\"buySoftware\": \"\",\r\n\t\t\t\t\t\t\"usageSituation\": \"\",\r\n\t\t\t\t\t\t\"background\": \"\",\r\n\t\t\t\t\t\t\"temporaryDecision\": \"\",\r\n\t\t\t\t\t\t\"temporaryManagerDesire\": \"\",\r\n\t\t\t\t\t\t\"temporaryRequirement\": \"\",\r\n\t\t\t\t\t\t\"temporaryBudgetStandard\": \"\",\r\n\t\t\t\t\t\t\"temporaryTotalAcceptability\": \"\",\r\n\t\t\t\t\t\t\"temporaryTotalRange\": \"\",\r\n\t\t\t\t\t\t\"temporaryBudget\": \"\",\r\n\t\t\t\t\t\t\"temporaryPriceDesire\": \"\",\r\n\t\t\t\t\t\t\"temporaryEstimatePrice\": \"\",\r\n\t\t\t\t\t\t\"temporaryManagersNumber\": \"\",\r\n\t\t\t\t\t\t\"temporaryWorkersNumber\": \"\",\r\n\t\t\t\t\t\t\"temporaryBeginTime\": null,\r\n\t\t\t\t\t\t\"temporaryEndTime\": null,\r\n\t\t\t\t\t\t\"temporaryBudgetEvaluation\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"projectinfo\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": null\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"stageName\": \"项目信息\",\r\n\t\t\t})\r\n\t\t\tthis.store.pgObj =  Object.assign({},{   // 展厅项目评估\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"stage\",\r\n\t\t\t\t\"masters\": null,\r\n\t\t\t\t\"children\": [{\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\"treeType\": \"normal\",\r\n\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\"children\": [{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": \"场地CAD图纸\",\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\"name\": \"公司心仪案例/案例参考\",\r\n\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t\"jbzl\": {\r\n\t\t\t\t\t\t\"xmgs\": null,\r\n\t\t\t\t\t\t\"xmys\": null,\r\n\t\t\t\t\t\t\"xmbj\": null,\r\n\t\t\t\t\t\t\"cgrq\": null,\r\n\t\t\t\t\t\t\"ztmd\": null,\r\n\t\t\t\t\t\t\"jszq\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"srzl\": {\r\n\t\t\t\t\t\t\"sjzd\": null,\r\n\t\t\t\t\t\t\"scyq\": null,\r\n\t\t\t\t\t\t\"zxyq\": null,\r\n\t\t\t\t\t\t\"dgyq\": null,\r\n\t\t\t\t\t\t\"sgclyq\": null,\r\n\t\t\t\t\t\t\"jbtsdln\": null,\r\n\t\t\t\t\t\t\"zhhsddyy\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"fzzl\": {\r\n\t\t\t\t\t\t\"gsxyalalck\": null,\r\n\t\t\t\t\t\t\"bcsm\": null\r\n\t\t\t\t\t},\r\n\t\t\t\t}],\r\n\t\t\t\t\"stageName\": \"项目评估\",\r\n\t\t\t});\r\n\t\t\tthis.store.zhObj =  Object.assign({},{   //综合办公项目评估\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"stage\",\r\n\t\t\t\t\"masters\": null,\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"normal\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"name\": \"现场施工规划图\",\r\n\t\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"name\": \"房屋布置图纸\",\r\n\t\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"name\": \"公司心仪案例/案例参考\",\r\n\t\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"jbzl\": {\r\n\t\t\t\t\t\t\t\"glry\": [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"办公用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"宿舍用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"宿舍用房(含UB)\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"食堂\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"会议室\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"智慧展厅\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"试验室\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"辅助用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\"lwry\": [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"办公用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"宿舍用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"食堂\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"会议室\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"展厅\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"淋浴间\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"洗衣房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\"name\": \"辅助用房\",\r\n\t\t\t\t\t\t\t\t\t\"values\": null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\"cqwd\": []\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"srzl\": {\r\n\t\t\t\t\t\t\t\"zhhsddyy\": null,\r\n\t\t\t\t\t\t\t\"bghjdssd\": null,\r\n\t\t\t\t\t\t\t\"jbtedln\": null,\r\n\t\t\t\t\t\t\t\"jzmgsxym\": null,\r\n\t\t\t\t\t\t\t\"jbdfts\": null,\r\n\t\t\t\t\t\t\t\"bimxxhsdyq\": null,\r\n\t\t\t\t\t\t\t\"gmxqdg\": null\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"fzzl\": {\r\n\t\t\t\t\t\t\t\"dlqk\": null,\r\n\t\t\t\t\t\t\t\"rksd\": null,\r\n\t\t\t\t\t\t\t\"zwhj\": null,\r\n\t\t\t\t\t\t\t\"ljjcsj\": 0,\r\n\t\t\t\t\t\t\t\"gsxyalalcg\": null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"stageName\": \"项目评估\",\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgetTree = (param) => {\r\n\t\tconst {temId} = this.store;\r\n\t\tthis.store.getTree(param).then((mes) => {\r\n\t\t\tthis.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t// 项目信息\r\n\t\t\tlet itemObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"项目信息\")[0]);\r\n\t\t\tconst type = pgState[temId];\r\n\t\t\t// 项目评估\r\n\t\t\tlet pgData = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"项目评估\")[0]);\r\n\t\t\t// 实施交付\r\n\t\t\tthis.store.payObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"实施交付\")[0]);\r\n\t\t\t// 方案设计\r\n\t\t\tlet proDesign = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"方案设计\")[0]);\r\n\t\t\t// 过滤项目信息数据\r\n\t\t\tthis.store.commonData = Object.assign([], mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName !== \"项目信息\" && item.stageName !== \"实施交付\" && item.stageName !== \"方案设计\" && item.stageName !== \"项目评估\"));\r\n\t\t\tthis.store.itemObj = Object.assign({}, itemObj);\r\n\t\t\tthis.store.projectName = itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t\t})[0].name;\r\n\t\t\t// 初始化获取步骤进度信息\r\n\t\t\tthis.store.getStageTree();\r\n\t\t\t// 方案设计statgeId\r\n\t\t\tthis.store.proDesign = proDesign;\r\n\t\t\tthis.store.oldStageId = proDesign.id;\r\n\t\t\tthis.store.currentStageId = proDesign.id;\r\n\t\t\t// 方案设计stage列表\r\n\t\t\tthis.store.getStageList();\r\n\t\t\tthis.store.getReportDaysList();\r\n\t\t\t// 维护状态公共组件\r\n\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\tlet obj = {};\r\n\t\t\tlet countObj = {};\r\n\t\t\tcommonData.map((v) => {\r\n\t\t\t\tobj[v.id] = true;\r\n\t\t\t\tcountObj[v.id] = 2;\r\n\t\t\t});\r\n\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\tthis.store[type] = Object.assign({}, pgData);\r\n\r\n\t\t\t//跳转定位\r\n\t\t\tlet search = this.props.location.search;\r\n\t\t\tconst {id, pid, stageid, isEdit} = url.parse(search, true).query;\r\n\t\t\tif(pid!=undefined&&id!=undefined&&pid!=null){\r\n\t\t\t\temitter.emit(\"handletaskid\",  {\"pid\":pid, \"id\":id, \"isEdit\":isEdit});\r\n\t\t\t}else if (id!==undefined) {  // 我的任务跳转定位\r\n\t\t\t\tthis.scrollToAnchor(id);\r\n\t\t\t}else if(stageid!==undefined){\r\n\t\t\t\t//this.scrollToAnchor(`items${parseInt(stageid)-1}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref;\r\n\t}\r\n\r\n\tonAppRef = (ref) => {\r\n\t\tthis.appRef = ref;\r\n\t}\r\n\r\n\tonOfficeRef = (ref) => {\r\n\t\tthis.officeRef = ref;\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 保存项目信息\r\n\tsaveProject = (params) => {\r\n\t\tthis.store.saveProject(params)\r\n\t\t.then((res) => {\r\n\t\t\tif (res.id !== null) {\r\n\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\tthis.child.onChangeVis();\r\n\t\t\t\tthis.store.projectId = res.id;\r\n\t\t\t\tthis.store.closeReason = res.closeReason;\r\n\t\t\t\tthis.store.projectName = res.name;\r\n\t\t\t\tthis.store.state = res.state;\r\n\t\t\t\tconst {temId} =this.store;\r\n\t\t\t\tthis.store.getTree(res.id).then((mes) => {\r\n\t\t\t\t\tthis.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t\t\t// 项目信息\r\n\t\t\t\t\tlet itemObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"项目信息\")[0]);\r\n\t\t\t\t\t// 项目评估\r\n\t\t\t\t\tthis.store[pgState[temId]] = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"项目评估\")[0]);\r\n\t\t\t\t\t// 实施交付\r\n\t\t\t\t\tthis.store.payObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"实施交付\")[0]);\r\n\t\t\t\t\t// 方案设计\r\n\t\t\t\t\tlet proDesign = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"方案设计\")[0]);\r\n\t\t\t\t\t// 过滤项目信息数据\r\n\t\t\t\t\tthis.store.commonData = Object.assign([], mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName !== \"项目信息\" && item.stageName !== \"实施交付\" && item.stageName !== \"方案设计\" && item.stageName !== \"项目评估\"));\r\n\t\t\t\t\tthis.store.itemObj = Object.assign({}, itemObj);\r\n\t\t\t\t\tthis.store.projectName = itemObj.children.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t\t\t\t})[0].name;\r\n\t\t\t\t\t// 初始化获取步骤进度信息\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t// 方案设计statgeId\r\n\t\t\t\t\tthis.store.proDesign = proDesign;\r\n\t\t\t\t\tthis.store.oldStageId = proDesign.id;\r\n\t\t\t\t\tthis.store.currentStageId = proDesign.id;\r\n\t\t\t\t\t// 方案设计stage列表\r\n\t\t\t\t\tthis.store.getStageList();\r\n\t\t\t\t\tthis.store.getReportDaysList();\r\n\t\t\t\t\t// 维护状态公共组件\r\n\t\t\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\tlet countObj = {};\r\n\t\t\t\t\tcommonData.map((v) => {\r\n\t\t\t\t\t\tobj[v.id] = true;\r\n\t\t\t\t\t\tcountObj[v.id] = 1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存附件\r\n\tsaveAttachment = (params) => {\r\n\t\tthis.store.saveAttachments(params)\r\n\t\t.then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"附件保存成功\")\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"附件保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除附件\r\n\tdelNode = (param) => {\r\n\t\tthis.store.delNode(param)\r\n\t\t.then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"附件删除成功\")\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"附件删除失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新子组件状态\r\n\tupdateCount = (type, count) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: count\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存节点\r\n\tsaveNodes = (params) => {\r\n\t\tthis.store.saveNodes(params).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", res);\r\n\t\t\t\t// 更新步骤\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t//更新我的任务数\r\n\t\t\t\t//this.store.getMyTaskCount();\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存阶段\r\n\tsaveStage = (params) => {\r\n\t\tif (params && params.projectId != null) this.store.projectId = params['projectId']\r\n\t\tthis.store.saveStage(params).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存阶段成功\")\r\n\t\t\t\t// 更新步骤\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存阶段失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新树\r\n\tupdateTree = () => {\r\n\t\tconst projectId = this.store.projectId;\r\n\t\tthis.store.getTree(projectId).then((mes) => {\r\n\t\t\tthis.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t// 项目信息 数据\r\n\t\t\tlet itemObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"订单信息\")[0]);\r\n\t\t\t//（招投标、合同签订、实施过程、交付验收、发票验收）数据\r\n\t\t\tthis.store.commonData = Object.assign([], mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName !== \"订单信息\" && item.stageName !== \"实施交付\"));\r\n\t\t\t// 维护状态公共组件\r\n\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\tlet obj = {};\r\n\t\t\tlet countObj = {};\r\n\t\t\tcommonData.map((v) => {\r\n\t\t\t\tobj[v.id] = true;\r\n\t\t\t\tcountObj[v.id] = 2;\r\n\t\t\t});\r\n\t\t\tthis.store.itemObj = Object.assign({}, itemObj);\r\n\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t\t})[0];\r\n\t\t\tthis.store.projectName = projectinfo[\"name\"];\r\n\t\t\tthis.store.state = projectinfo[\"state\"];\r\n\t\t\tthis.store.closeReason = projectinfo[\"closeReason\"];\r\n\t\t\t// 更新步骤\r\n\t\t\tthis.store.getStageTree();\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {projectId, projectName, listData, itemObj, ossData, payObj, pgObj, zhObj, commonData, comStates, comCount, proDesign, temId, temName} = this.store;\r\n\t\tconst {count, payCount, pgCount, psCount} = this.state;\r\n\t\tlet isShow = projectId == null || projectId == \"\" ? true : false;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"con_bottom\">\r\n\t\t\t\t\t<Breadcrumb separator=\">\" style={{margin: '0'}}>\r\n\t\t\t\t\t\t<Breadcrumb.Item href={\"#/bpm/progresslist\"}>项目看板</Breadcrumb.Item>\r\n\t\t\t\t\t\t<Breadcrumb.Item>{projectName||temName}</Breadcrumb.Item>\r\n\t\t\t\t\t</Breadcrumb>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*进度条*/}\r\n\t\t\t\t<ProgressList\r\n\t\t\t\t\tlistData={mobx.toJS(listData)}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\tupdateTree={this.updateTree}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*项目信息*/}\r\n\t\t\t\t<ItemInfoNew\r\n\t\t\t\t\titemObj={mobx.toJS(itemObj)}\r\n\t\t\t\t\tsaveProject={this.saveProject}\r\n\t\t\t\t\tprojectId={projectId}\r\n\t\t\t\t\tprojectType={temId}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tstate={this.store.state}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\thidden={true}\r\n\t\t\t\t\tcount={count}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*展厅项目评估*/}\r\n\t\t\t\t{temId==4?<Appraisal\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tonAppRef={this.onAppRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\tcount={pgCount}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t\titemObj={mobx.toJS(pgObj)}\r\n\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{/*综合办公项目评估*/}\r\n\t\t\t\t{temId==5?<Office\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tonOfficeRef={this.onOfficeRef}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\tcount={pgCount}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t\titemObj={mobx.toJS(zhObj)}\r\n\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t/>:null}\r\n\t\t\t\t{/*方案设计*/}\r\n\t\t\t\t<ProjectDesign\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tproDesign={mobx.toJS(proDesign)}\r\n\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\tsaveStage={this.saveStage}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\tcount={psCount}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*招投标、合同签订*/}\r\n\t\t\t\t{mobx.toJS(commonData).length>0&&mobx.toJS(commonData).filter((item) => item.treeType == \"stage\" && item.stageName !== \"开票收款\").map((item, index) => {\r\n\t\t\t\t\treturn (<WortileCommon\r\n\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\trowIndex={\"items\" + (index + 2)}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\ttreeData={item}\r\n\t\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\t\tdisabled={mobx.toJS(comStates)[item.id]}\r\n\t\t\t\t\t\toss={mobx.toJS(ossData)}\r\n\t\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\t\tcount={mobx.toJS(comCount)[item.id]}\r\n\t\t\t\t\t/>)\r\n\t\t\t\t})}\r\n\t\t\t\t{/*实施交付*/}\r\n\t\t\t\t<Delivery\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\ttreeData={mobx.toJS(payObj)}\r\n\t\t\t\t\tcount={payCount}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*发票收款*/}\r\n\t\t\t\t{mobx.toJS(commonData).length > 0 && mobx.toJS(commonData).filter((item) => item.treeType == \"stage\" && item.stageName == \"开票收款\").map((item, index) => {\r\n\t\t\t\t\treturn (<WortileCommon\r\n\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\trowIndex={\"items\" + (index + 2)}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\ttreeData={item}\r\n\t\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\t\tdisabled={mobx.toJS(comStates)[item.id]}\r\n\t\t\t\t\t\toss={mobx.toJS(ossData)}\r\n\t\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\t\tcount={mobx.toJS(comCount)[item.id]}\r\n\t\t\t\t\t/>)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default Index;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/exhibition/Index.js","/*\r\n* 附件组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\n\r\nfunction getBase64(img, callback) {\r\n\tconst reader = new FileReader();\r\n\treader.addEventListener('load', () => callback(reader.result));\r\n\treader.readAsDataURL(img);\r\n}\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n\t\t\t\taccess_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n\t\t\t\tstsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.props.ossData) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: this.props.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: this.props.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: this.props.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet arr = [];\r\n\t\t\tarray.length && array.map((item, index) => {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\tpid: this.props.pid,\r\n\t\t\t\t\tprojectId: this.props.projectId,\r\n\t\t\t\t\tid: item.id\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tthis.props.saveAttachment(arr);\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\tlet id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\tthis.props.delNode(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tfileList: [...oldFileList, ...newFileList]\r\n\t\t});\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\tif (!true) {\r\n\t\t\tmessage.error('You can only upload JPG file!');\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fileList} = this.state;\r\n\t\tconst props = {\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: this.props.multiple == undefined ? true : this.props.multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tlistType: 'text',\r\n\t\t\tclassName: 'upload-list-inline',\r\n\t\t\tdisabled: this.props.disabled,\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t{fileList.length >= 1 && this.props.multiple == false ? null :\r\n\t\t\t\t\t<Icon style={{fontSize: '25px', color: '#53B3E5'}} type=\"cloud-upload\"/>}\r\n\t\t\t</Upload>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/MyUpload.js","/*\r\n* 任务拆分组件\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport * as mobx from \"mobx\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tInputNumber,\r\n\tnotification,\r\n\tCard,\r\n\tPopconfirm,\r\n\tForm,\r\n\tIcon,\r\n\tRow,\r\n\tCol,\r\n\tSelect,\r\n\tmessage,\r\n\tDatePicker\r\n} from 'antd';\r\nimport * as utils from \"@/utils/utils\";\r\nimport {v4 as uuidv4} from \"uuid\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport moment from 'moment';\r\n\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\nconst openNotificationWithIcon = type => {\r\n\tnotification[type]({\r\n\t\tmessage: '已用工时不能大于预估工时',\r\n\t\tdescription:\r\n\t\t\t'若大于，请先调整预估工时',\r\n\t\tplacement: 'bottomRight'\r\n\t});\r\n};\r\n\r\n// 可编辑表格\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true,//false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t// 已用工时\r\n\tsaveTime = (e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e!==null&&e!==\"\") {\r\n\t\t\t    if (Number(e)>Number(values.totalHours)) {\r\n\t\t\t\t\topenNotificationWithIcon('warning');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\">\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'name') {  //子任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'alreadyHours') {  // 已用工时\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t//onPressEnter={this.save}\r\n\t\t\t\t\t\t\tonChange={this.saveTime}\r\n\t\t\t\t\t\t\tonBlur={this.saveTime}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}小时\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w clearfix\" style={{minWidth: '155px'}}>\r\n\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\tminWidth: '120px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '25px',\r\n\t\t\t\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tdefaultValue={record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'totalHours') {  // 总工时\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}小时\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n/*\r\n* 拆分子任务\r\n* */\r\n@observer\r\nclass TaskSplite extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 子任务的数据源\r\n\t\t\tcount: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\t/*\r\n\t\t* subtask 子任务 nextProps.dataSource\r\n\t\t* */\r\n\t\tif (JSON.stringify(nextProps.dataSource) != JSON.stringify(this.props.dataSource)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource === null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t}, () => {\r\n\t\t\t\tnextProps.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t});\r\n\t\tthis.props.onTaskRef(this)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\r\n\t}\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: []\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tconst {count, dataSource} = this.state;\r\n\t\tconst {addRecord} = this.props;\r\n\t\tconst newData = Object.assign(addRecord, {\"key\": count, id: \"!\" + uuidv4()});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t\t// console.log(this.state.dataSource, count, '新增')\r\n\t\t});\r\n\t};\r\n\r\n\thandleSave = row => {\r\n\t\t// 已用工时不能大于总工时\r\n\t\tif (Number(row.alreadyHours)>Number(row.totalHours)) {\r\n\t\t\t//openNotificationWithIcon('warning');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\tcollapseOnClick = () => {\r\n\t\tlet _this = this;\r\n\t\t_this.props.collapseOnChange();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务名称',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: 'center',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\trender: (text,) => (<span>{text}</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null ? \"\" : text.map(item => item.userName).join(\"、\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '预估工时',\r\n\t\t\t\tdataIndex: 'totalHours',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => (<span>{text}小时</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '已用工时',\r\n\t\t\t\tdataIndex: 'alreadyHours',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text, record) => (<span id={record.id}>{text}小时</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => (<span>{text}</span>)\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Card bordered style={{width: '100%'}}>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t<Icon className={disabled ? \"hidden\" : \"\"} onClick={this.handleAdd}\r\n\t\t\t\t      style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}} type=\"plus-circle\"/>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span={24} style={{textAlign: 'right', marginTop: '10px'}}>\r\n\t\t\t\t\t\t<Icon onClick={this.collapseOnClick}\r\n\t\t\t\t\t\t      title=\"收起\"\r\n\t\t\t\t\t\t      type=\"double-right\"\r\n\t\t\t\t\t\t      className=\"pointer\"\r\n\t\t\t\t\t\t      style={{color: '#808080'}}\r\n\t\t\t\t\t\t      rotate={-90}/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TaskSplite;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/TaskSplite.js","\n/*\n* 用途：多选组件参数说明\n* 作者：dangw@glodon.com\n*\n  placeholder: 占位符\n  type：Grapbql返回的数据type\n  variables：Grapbqls请求的参数变量\n  query：Grapbqls请求的参数变量\n  url：Grapbqls请求的参数变量\n  onChange：组件接受函数\n  value：组件接受值\n  itemKey: Select组件Option的参数key\n  itemValue: Select组件Option的参数value\n  body: Grapbqls返回值取值是否是含body\n*\n* */\nimport React from 'react';\nimport {Select} from 'antd';\nimport PropTypes from 'prop-types';\n\nconst Option = Select.Option;\n\nexport default class AsyncSelectMuti extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      value: props.value || [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if ('value' in nextProps && this.props.value !== nextProps.value) {\n      this.setState({\n        value: nextProps.value\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props.url) {\n      return;\n    }\n    //组件初始化\n    this.handleFocus();\n  }\n\n  handleChange = (val, e) => {\n    let {onChange} = this.props;\n    if (onChange) {\n      onChange(val, e);\n    }\n  }\n\n  handleFocus = () => {\n    const {type,variables,query,url,body}=this.props;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      },\n      body: JSON.stringify({\n        query: query,\n        variables: variables\n      })\n    })\n    .then(response => response.json())\n    .then(json => {\n      if (json.data!==null&&json.data[type]!==null) { // 容错\n        let data;\n        if (body!==undefined) {\n          data = json.data[type][\"body\"];\n        } else {\n          data = json.data[type];\n        }\n        if (this.props.dataMapFunc) {\n          data = data.map(item => this.props.dataMapFunc(item));\n        }\n        this.setState({\n          data\n        });\n      } else {\n        this.setState({\n          data: []\n        });\n      }\n    });\n  }\n\n  render() {\n    const {data} = this.state;\n    const {value,itemKey,itemValue,placeholder,style,disabled,ref,onBlur}=this.props;\n    const options = data.length&&data.map((item, index)=> <Option key={index} value={item[itemKey]} val={item}>{item[itemValue]}</Option>);\n\n    return (\n      <Select\n        mode=\"multiple\"\n        placeholder={placeholder||\"请选择\"}\n        style={style}\n        value={value}\n        onChange={this.handleChange}\n        onFocus={this.handleFocus}\n        onBlur={onBlur}\n        disabled={disabled}\n        ref={ref}\n      >\n        {options}\n      </Select>\n    );\n  }\n}\n\nAsyncSelectMuti.propTypes = {\n  style: PropTypes.object,\n  placeholder: PropTypes.string,\n  value: PropTypes.string,\n  url: PropTypes.string,\n  dataMapFunc: PropTypes.func,\n  onChange: PropTypes.func,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/AsyncSelectMuti.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tSelect,\r\n\tmessage,\r\n\tInputNumber,\r\n\tnotification,\r\n\tPopover\r\n} from 'antd';\r\nimport TaskSplite from './TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\n\r\nlet runonlyonce = false;\r\nconst {Option} = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\t//onChange={this.save}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 完成比例\r\n\t\t\tconst subNumber = record.children == null || record.children.length == 0 ? 0 : record.children.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": nextProps.pid,\r\n\t\t\t\t\t\"projectId\": nextProps.projectId,\r\n\t\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\t\"masters\": [],\r\n\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\t\"remark\": \"\"\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": this.props.pid,\r\n\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\t\t/*if(true){ // 暂时控制不住多次事件监听\r\n\t\t\trunonlyonce = true;\r\n\t\t\tconsole.log('计')\r\n\r\n\t\t}*/\r\n\t\tthis.eventE1 = emitter.addListener('handletaskid', (obj) => {\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount() {\r\n\t\temitter.removeListener(this.eventE1)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\" + err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\tconst newData = Object.assign(primaryData, {key: count, id: \"!\" + uuidv4()});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({\r\n\t\t\texpandedKeys: keys\r\n\t\t}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n\thandleApart = (record) => {\r\n\t\t// if (key==null||key==\"\") {\r\n\t\t//    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t\t//    return false;\r\n\t\t// }\r\n\t\t// 记录当前主任务没有改动的数据\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({}, record),\r\n\t\t\tactiveSub: Object.assign([], record.children == null ? [] : record.children),\r\n\t\t\tsubTaskDis: false, // 可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record.id);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t\t// 如果子任务为空，保存是调用新街口\r\n\t\tlet length = this.state.subtasks.length\r\n\t\tif (length == 0) {\r\n\t\t\tthis.store.delNodeByPid({pid: id})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 子任务名称和负责人必填\r\n\t\t\tconst subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n\t\t\tconst isSub = subtasks.filter((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.masters == null || item.masters.length == 0\r\n\t\t\t})\r\n\t\t\tif (isSub.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"请您填写任务名称和负责人\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst isLarge = subtasks.filter((item) => {\r\n\t\t\t\treturn Number(item.alreadyHours) > Number(item.totalHours)\r\n\t\t\t})\r\n\t\t\tif (isLarge.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"已用工时不能大于预估工时\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 判断是新增的主任务进行拆解的\r\n\t\t\tif (id.startsWith(\"!\")) {\r\n\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t} else {\r\n\t\t\t\t// 原有\r\n\t\t\t\tthis.store.saveSubTasks(this.state.subtasks)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res && res.length > 0) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t\tthis.subtask.clearState();\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks: newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n\tonCalac = (key) => {\r\n\t\tthis.saveExpandedRows(key);\r\n\t\tthis.store.isEdit = false;\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n\t\tthis.subtask.clearState();\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({})\r\n\t\t});\r\n\t}\r\n\r\n\t// 折叠收起\r\n\tonPackup = (record) => {\r\n\t\tlet _this = this;\r\n\t\tconst defaultSource = _this.state.activeSub.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours,\r\n\t\t\t}\r\n\t\t});  // 拆解前默认数据\r\n\t\tconst rearSource = _this.state.subtasks.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解后内容变动数据\r\n\t\t// 当前拆解数据内容变化，给提示是否保存\r\n\t\tif (JSON.stringify(defaultSource) == JSON.stringify(rearSource)) {\r\n\t\t\t// 内容没有变动，直接取消\r\n\t\t\t_this.onCalac(record.id);\r\n\t\t} else {\r\n\t\t\tModal.confirm({\r\n\t\t\t\ttitle: '是否对所更改内容保存',\r\n\t\t\t\tokText: '保存',\r\n\t\t\t\tcancelText: '不保存',\r\n\t\t\t\tonOk() {\r\n\t\t\t\t\t_this.saveSubTaskRecord(record.id);\r\n\t\t\t\t},\r\n\t\t\t\tonCancel() {\r\n\t\t\t\t\t_this.onCalac(record.id);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonTaskRef = (ref) => {\r\n\t\tthis.subtask = ref\r\n\t}\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource, expandedKeys, subTaskDis} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length > 0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\t// id={`/?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t<Icon className={record.delayType !== 0 && disabled ? \"\" : \"hidden\"}\r\n\t\t\t\t\t\t      style={{\r\n\t\t\t\t\t\t\t      fontSize: '18px',\r\n\t\t\t\t\t\t\t      position: 'absolute',\r\n\t\t\t\t\t\t\t      left: '5px',\r\n\t\t\t\t\t\t\t      color: 'red',\r\n\t\t\t\t\t\t\t      top: '50%',\r\n\t\t\t\t\t\t\t      transform: 'translateY(-50%)'\r\n\t\t\t\t\t\t      }} type=\"exclamation-circle\"/>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null ? \"\" : text.map(item => item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\t>{text}%</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t<p><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t           key={'task_' + index}><span\r\n\t\t\t\t\t\t\t\t\tstyle={{fontWeight: '700', color: '#333'}}>备注{index + 1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t\t\t<span><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_' + index}\r\n\t\t\t\t\t\t\t\t\t\t              className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px', fontWeight: '700', color: '#333'}}>\r\n\t\t                                  备注{index + 1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {\r\n\t\t\t\t\t\treturn item == record.id\r\n\t\t\t\t\t}).length > 0 && !subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\t\t\t\tif (disabled) {  // 详情态\r\n\t\t\t\t\t\t\tif (subNumber == 0) { // 子任务数等于0\r\n\t\t\t\t\t\t\t\treturn <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t\t\t\t\t\t\t//return <span>{subNumber}</span>\r\n\t\t\t\t\t\t\t} else {  // 子任务数大于0\r\n\t\t\t\t\t\t\t\treturn (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\"\r\n\t                                      style={{marginLeft: \"10px\"}} title=\"编辑\" type=\"edit\"/>\r\n                                </span>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {  // 编辑态\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<a onClick={this.handleApart.bind(this, record)}>{subNumber == 0 ? actionName : subNumber}</a>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord = {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id || \"\",\r\n\t\t\t\tprojectId: record.projectId || \"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters == null ? [] : record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\taddRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie && !disabled ? this.onPackup(record) : this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n\t\t\t\t\tdisabled={subTaskDis}\r\n\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\tonTaskRef={this.onTaskRef}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/EditableTable.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {Table, Input, DatePicker, Popconfirm, Form, Modal, Icon, Select, message, InputNumber,\tPopover} from 'antd';\r\nimport TaskSplite from '@/components/worktile/TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport MyUpload from \"@/components/worktile/MyUpload\";\r\n\r\nlet runonlyonce =false;\r\nconst { Option } = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n            //this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n            delete values[\"masters\"];\r\n            handleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] =  moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] =  moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\t const { record, handleSave } = this.props;\r\n\t\t let data = {}\r\n         let userIds;\r\n         if (e.length) {\r\n            userIds = e.map((item)=>{return {userId: item.props.value, userName: item.props.children}})\r\n         } else {\r\n            userIds  = []\r\n         }\r\n\t\t data[\"masters\"] = userIds;\r\n\t\t handleSave({ ...record, ...data });\r\n\t}\r\n\r\n\t//\r\n    updatePerson = (users) => {\r\n        const { record, handleSave } = this.props;\r\n        let data = {}\r\n        let userIds;\r\n        if (users.length) {\r\n            userIds = users\r\n        } else {\r\n            userIds  = []\r\n        }\r\n        data[\"masters\"] = userIds;\r\n        handleSave({ ...record, ...data });\r\n    }\r\n\tonBlur=()=>{\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title,personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{ margin: 0 }}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n                        <div className=\"w clearfix\">\r\n                            <Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n                                <Icon\r\n                                    style={{\r\n                                        width: '35px',\r\n                                        color: '#F17E7E',\r\n                                        fontSize: '25px',\r\n                                        float: 'left'\r\n                                    }}\r\n                                    type=\"minus-circle\"/>\r\n                            </Popconfirm>\r\n                            <Input\r\n                                style={{\r\n                                    float: 'right',\r\n                                    width: 'calc(100% - 35px)',\r\n                                }}\r\n                                defaultValue={record[dataIndex]}\r\n                                ref={node => (this.input = node)}\r\n                                //onChange={this.save}\r\n                                onPressEnter={this.save}\r\n                                onBlur={this.save}\r\n                            />\r\n                        </div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t): (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n                                width: '35px',\r\n                                color: '#F17E7E',\r\n                                fontSize: '22px',\r\n\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n                            width: 'calc(100% - 35px)',\r\n                            minHeight: '31px'}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex].length==0?[]:record[dataIndex].length>0&&record[dataIndex].map((item)=>{return item.userId}),\r\n\t\t\t\t}) (\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n                        <PersonAdd2\r\n                            data={record[dataIndex]==null||record[dataIndex].length==0?[]:record[dataIndex].length>0&&record[dataIndex]}\r\n                            updatePerson={this.updatePerson}\r\n                            disabled={!editing}\r\n                        />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>):(<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n                    {children}\r\n                    </div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex]==null||record[dataIndex]==0?\"\":moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex]==0?\"\": moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>): (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{ minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n            // 日期时间戳转换字符串\r\n            const numberTostring = record[dataIndex]==null||record[dataIndex]==0?\"\":moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex]==0?\"\": moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n                        onChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>): (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{ minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n                    {children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'rate') {  // 完成比例\r\n\t\t\tlet subTasks = record.children!=null&&record.children.filter((item)=>{return item.treeType==='subtask'})\r\n\t\t\tconst subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n            const isEdit = subNumber>0?true:false;\r\n            return editing ? (<Form.Item style={{ margin: 0 }}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex]==null||record[dataIndex]==0?\"\":record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n                            disabled={isEdit}\r\n                            min={0}\r\n                            max={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t): (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n                    style={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}  else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n                    <EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable2 extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n            count: 0,        // table的key\r\n            primaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t            \"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t            \"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks:[],\r\n            activeObj: {}, // 记录拆解前主任务数据\r\n            activeSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource!=this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n                dataSource: nextProps.dataSource==null||nextProps.dataSource.length==0?[]:nextProps.dataSource.map((item, index)=>{\r\n                        return Object.assign(item, {key: index})}),\r\n                count: nextProps.dataSource==null||nextProps.dataSource.length==0?0:nextProps.dataSource.length,\r\n                primaryData: Object.assign({}, {\r\n                    \"id\": \"\",\r\n                    \"pid\": nextProps.pid,\r\n                    \"projectId\": nextProps.projectId,\r\n                    \"treeType\": \"task\",\r\n                    \"masters\": [],\r\n                    \"children\": null,\r\n                    \"name\": \"\",\r\n                    \"rate\": 0,\r\n                    \"nodeCount\": null,\r\n\t                \"beginTime\": null,\r\n                    \"endTime\": null,\r\n                    \"orders\": 0,\r\n\t                \"remark\": \"\"\r\n                }) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        this.setState({\r\n            dataSource: this.props.dataSource==null||this.props.dataSource.length==0?[]:this.props.dataSource.map((item, index)=>{\r\n                return Object.assign(item, {\"key\": index})\r\n            }),\r\n            count: this.props.dataSource===null||this.props.dataSource.length==0?0:this.props.dataSource.length,\r\n            primaryData: Object.assign({}, {\r\n                \"id\": \"\",\r\n                \"pid\": this.props.pid,\r\n                \"projectId\": this.props.projectId,\r\n                \"treeType\": \"task\",\r\n                \"masters\": [],\r\n                \"children\": null,\r\n                \"name\": \"\",\r\n                \"rate\": 0,\r\n                \"nodeCount\": null,\r\n\t            \"beginTime\": null,\r\n                \"endTime\":null,\r\n                \"orders\": 0,\r\n\t            \"remark\": \"\"\r\n            }), // 新增任务数据\r\n            expandedKeys: [], // 折叠\r\n            keys: [], // 折叠\r\n            subtasks:[],\r\n\t\t});\r\n\t\t/*if(true){ // 暂时控制不住多次事件监听\r\n\t\t\trunonlyonce = true;\r\n\t\t\tthis.emitterEvent = emitter.addListener('handletaskid', (obj)=>{\r\n\t\t\t\tconsole.log('触发监听')\r\n\t\t\t\tthis.getKeyByShowRow(obj.pid, obj.id);\r\n\t\t   })\r\n\t\t}*/\r\n\t\tthis.eventE2 = emitter.addListener('handletaskid', (obj)=>{\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount(){\r\n\t\temitter.removeListener(this.eventE2)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n            try {\r\n                let anchorElement = document.getElementById(anchorName);\r\n\t            if (anchorElement) {\r\n\t                anchorElement.scrollIntoView({block: 'center'});\r\n                }\r\n            } catch(err) {\r\n                console.log(\"scrollToAnchorERR=>\"+err);\r\n            }\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t    const {id, key} = record;\r\n\t    if (id!==\"\"&&id!==null&&!id.startsWith(\"!\")) { // 删除原来已有的\r\n\t        this.store.delNode(id).then((res)=>{\r\n                if (res) {\r\n                    message.success(\"删除成功\");\r\n                    const dataSource = [...this.state.dataSource];\r\n                    this.setState({\r\n                        dataSource: dataSource.filter(item => item.key !== key)\r\n                    }, ()=>{\r\n                        this.props.saveData(this.state.dataSource);\r\n                        // 更新tree\r\n                        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                        this.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n                    });\r\n                    // 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n                } else {\r\n                    message.error(\"删除失败\")\r\n                }\r\n            });\r\n        } else { // 删除新增的\r\n            const dataSource = [...this.state.dataSource];\r\n            this.setState({\r\n                dataSource: dataSource.filter(item => item.key !== key)\r\n            }, ()=>{\r\n                this.props.saveData(this.state.dataSource, key);\r\n                // 更新tree\r\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                this.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n            });\r\n        }\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n        const newData = Object.assign(primaryData, {key: count, id: \"!\"+uuidv4()});\r\n        //console.log(newData, '新增')\r\n        this.setState({\r\n            dataSource: [...dataSource, newData],\r\n            count: count + 1,\r\n        }, ()=>{\r\n            this.props.saveData(this.state.dataSource);\r\n            // 更新tree\r\n            let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n            this.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n        });\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n        const newData = [...this.state.dataSource];\r\n        const index = newData.findIndex(item => row.key === item.key);\r\n        const item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, ()=>{\r\n            // 更新保存数据\r\n            this.props.saveData(this.state.dataSource);\r\n            let newRow = JSON.parse(JSON.stringify({...row}));\r\n            // 更新tree\r\n            let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n            this.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n        });\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t    let _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n        _this.setState({expandedKeys: keys},()=>{\r\n           let obj = {[_this.props.id]: keys};\r\n           let expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n           _this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n        });\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, ()=>{\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n    handleApart = (record) => {\r\n        // if (key==null||key==\"\") {\r\n\t     //    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t     //    return false;\r\n        // }\r\n        // 记录当前主任务没有改动的数据\r\n        this.setState({\r\n            activeObj: Object.assign({}, record),\r\n            activeSub: Object.assign([], record.children==null?[]:record.children),\r\n\t        subTaskDis: false, // 可编辑\r\n        }, ()=>{\r\n            this.saveExpandedRows(record.id);\r\n        });\r\n    }\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t    // 如果子任务为空，保存是调用新街口\r\n       let length = this.state.subtasks.length\r\n\t    if (length==0) {\r\n           this.store.delNodeByPid({pid:id})\r\n               .then((res)=>{\r\n                  if (res) {\r\n                      // 更新树\r\n                      this.props.updateTree();\r\n                      // 更新步骤\r\n\t\t\t\t\t  this.store.getStageTree();\r\n\t\t\t\t\t  //更新我的任务数\r\n\t\t\t\t\t  this.store.getMyTaskCount();\r\n                      message.success(\"保存成功\")\r\n                      this.saveExpandedRows(id);\r\n                  } else {\r\n                      message.error(\"保存失败\")\r\n                  }\r\n               });\r\n        } else {\r\n           // 子任务名称和负责人必填\r\n            const subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n            const isSub = subtasks.filter((item)=>{return item.name==\"\"||item.masters==null||item.masters.length==0})\r\n            if (isSub.length>0) {  // true\r\n                message.warn(\"请您填写任务名称和负责人\");\r\n                return false;\r\n            }\r\n\t\t    const isLarge = subtasks.filter((item)=>{return Number(item.alreadyHours)>Number(item.totalHours)})\r\n\t\t    if (isLarge.length>0) {  // true\r\n\t\t\t    message.warn(\"已用工时不能大于预估工时\");\r\n\t\t\t    return false;\r\n\t\t    }\r\n            // 判断是新增的主任务进行拆解的\r\n            if (id.startsWith(\"!\")) {\r\n                this.saveExpandedRows(id);\r\n            } else {\r\n                // 原有\r\n                this.store.saveSubTasks(this.state.subtasks)\r\n                    .then((res)=>{\r\n                        if (res&&res.length>0) {\r\n                            message.success(\"保存成功\")\r\n                            this.subtask.clearState();\r\n                            // 更新tree\r\n\t\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\t\tlet record = utils.getRecord(treeData, id);\r\n\t\t\t\t\t\t\t// 如果存在 attachments 更新的时候要添加附件集\r\n\t\t\t\t\t\t\tlet attachments = record&&record.children!=null&&record.children.filter((item)=>{return item.treeType==='attc'})[0];\r\n\t\t\t\t\t\t\tif(attachments){\r\n\t\t\t\t\t\t\t\tres.push(attachments);\r\n\t\t\t\t\t\t\t}\r\n                            this.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n                            // 更新步骤\r\n                            this.store.getStageTree();\r\n                            this.saveExpandedRows(id);\r\n                        } else {\r\n                            message.error(\"保存失败\")\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item=>{\r\n\t\t\tlet {key,children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks:newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n    onCalac = (key)=> {\r\n        this.saveExpandedRows(key);\r\n        this.store.isEdit = false;\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n        this.subtask.clearState();\r\n        this.setState({\r\n            activeObj: Object.assign({})\r\n        });\r\n    }\r\n\r\n    // 折叠收起\r\n    onPackup = (record) => {\r\n\t    let _this = this;\r\n\t    const defaultSource = _this.state.activeSub.map(item=>{\r\n\t        return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n                \"totalHours\": item.totalHours,\r\n                \"alreadyHours\": item.alreadyHours\r\n\t        }\r\n        });  // 拆解前默认数据\r\n        const rearSource = _this.state.subtasks.map(item=>{\r\n            return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n                \"totalHours\": item.totalHours,\r\n                \"alreadyHours\": item.alreadyHours\r\n            }\r\n        });  // 拆解后内容变动数据\r\n       // console.log(JSON.stringify(defaultSource), JSON.stringify(rearSource), '===比较', JSON.stringify(defaultSource)==JSON.stringify(rearSource))\r\n        // 当前拆解数据内容变化，给提示是否保存\r\n        if (JSON.stringify(defaultSource)==JSON.stringify(rearSource)) {\r\n            // 内容没有变动，直接取消\r\n            _this.onCalac(record.id);\r\n        } else {\r\n            Modal.confirm({\r\n                title: '是否对所更改内容保存',\r\n                okText: '保存',\r\n                cancelText: '不保存',\r\n                onOk() {\r\n                    _this.saveSubTaskRecord(record.id);\r\n                },\r\n                onCancel() {\r\n                    _this.onCalac(record.id);\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    onTaskRef = (ref) => {\r\n        this.subtask = ref\r\n    }\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})\r\n\t\tconst subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n\t\tif (disabled&&subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {subTaskDis, dataSource, expandedKeys} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst {taskhaveattt} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length>0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = taskhaveattt?\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\talign: \"center\",\r\n                editable: !disabled&&!isChaijie,\r\n                render: (text, record) => {\r\n\t\t\t\t    return(<div\r\n\t\t\t\t\t          //  id={`/workdetail?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t            id={record.id}\r\n\t\t\t\t                onClick={this.onRow.bind(this, record)}\r\n\t\t\t\t                style={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t                className=\"pr\">\r\n                            <Icon className={record.delayType!==0&&disabled?\"\":\"hidden\"} style={{fontSize:'18px',position:'absolute', left: '5px', color: 'red', top: '50%', transform: 'translateY(-50%)'}} type=\"exclamation-circle\" />\r\n                            {text}\r\n                           </div>);\r\n                }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text==null?\"\":text.map(item=>item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n            {\r\n                title: '截止日期',\r\n                dataIndex: 'endTime',\r\n                width: '12%',\r\n                editable: !disabled&&!isChaijie,\r\n                align: \"center\",\r\n\t            render: (text, record) => {\r\n\t\t            return <div\r\n\t\t\t            style={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t            onClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t            },\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender:(text, record) => {return <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text}%</div>}\r\n\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\ttitle: '对应产出',\r\n\t\t\t\tdataIndex: 'attc',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\talign: \"center\",\r\n                render: (text, record) => {\r\n\t\t\t\t\tlet attcObj = record.children!=null&&record.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\r\n\t\t\t\t\tconst attachments = attcObj&&attcObj.children&&attcObj.children!=null?attcObj.children.map((vitem) => {\r\n\t\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\tuid: vitem.id,\r\n\t\t\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\t\t\tid: vitem.id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}) : [];\r\n                    return (\r\n                    \t<div className=\"table_upload\">\r\n\t\t                    {attcObj==false?\r\n\t\t                    \"- -\":<MyUpload\r\n\t\t\t\t                    saveAttachment={this.props.saveAttachment}\r\n\t\t\t\t                    delNode={this.props.delNode}\r\n\t\t\t\t                    fileList={attachments}\r\n\t\t\t\t                    pid={attcObj?attcObj.id:\"\"}\r\n\t\t\t\t                    projectId={attcObj?attcObj.projectId:\"\"}\r\n\t\t\t\t                    disabled={disabled||isChaijie}\r\n\t\t\t\t                    ossData={this.props.oss}\r\n\t\t\t\t                    multiple={false}\r\n\t\t\t                    />}\r\n                    \t</div>)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '12%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender:(text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text==null||text==\"\"?null:<p><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"} key={'task_'+index}><span style={{fontWeight:'700',color: '#333'}}>备注{index+1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text==null||text==\"\"?null:<span><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_'+index} className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px',fontWeight:'700',color: '#333'}}>\r\n\t\t                                  备注{index+1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {return item == record.id}).length>0&&!subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t}\r\n\t\t\t\t    else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})\r\n                        const subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n                        if (disabled) {  // 详情态\r\n\t                        if (subNumber==0) { // 子任务数等于0\r\n\t\t                        return <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t                        //return <span>{subNumber}</span>\r\n\t                        } else {  // 子任务数大于0\r\n\t\t                        return (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\" style={{marginLeft:\"10px\"}} title=\"编辑\" type=\"edit\" />\r\n                                </span>)\r\n\t                        }\r\n                        } else {  // 编辑态\r\n                            return (<a  onClick={this.handleApart.bind(this, record)}>{subNumber==0?actionName:subNumber}</a>)\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t]:[\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n                editable: !disabled&&!isChaijie,\r\n                render: (text, record) => {\r\n\t\t\t\t    return(<div\r\n\t\t\t\t\t            id={record.id}\r\n\t\t\t\t\t            //id={`/workdetail?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t                onClick={this.onRow.bind(this, record)}\r\n\t\t\t\t                style={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t                className=\"pr\">\r\n                            <Icon className={record.delayType!==0&&disabled?\"\":\"hidden\"} style={{fontSize:'18px',position:'absolute', left: '5px', color: 'red', top: '50%', transform: 'translateY(-50%)'}} type=\"exclamation-circle\" />\r\n                            {text}\r\n                           </div>);\r\n                }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text==null?\"\":text.map(item=>item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n            {\r\n                title: '截止日期',\r\n                dataIndex: 'endTime',\r\n                width: '14%',\r\n                editable: !disabled&&!isChaijie,\r\n                align: \"center\",\r\n\t            render: (text, record) => {\r\n\t\t            return <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text==null||text==0?\"\":moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t            },\r\n            },\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender:(text, record) => {return <div style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}>{text}%</div>}\r\n\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '备注',\r\n\t\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\t\twidth: '14%',\r\n\t\t\t\t\teditable: !disabled&&!isChaijie,\r\n\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\trender:(text, record) => {\r\n\t\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t{text==null||text==\"\"?null:<p><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\t\treturn (<p className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"} key={'task_'+index}><span style={{fontWeight:'700',color: '#333'}}>备注{index+1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>\r\n\t\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t\t{text==null||text==\"\"?null:<span><span style={{fontWeight:'700',color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t\t{record.children==null||record.children==[]?null:record.children.filter((item)=>{return item.treeType==='subtask'}).map((item, index)=>{\r\n\t\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_'+index} className={item.remark==null||item.remark==\"\"?\"hidden\":\"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px',fontWeight:'700',color: '#333'}}>\r\n\t\t                                  备注{index+1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {return item == record.id}).length>0&&!subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t}\r\n\t\t\t\t    else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})\r\n                        const subNumber = subTasks==null||subTasks.length==0?0:subTasks.length\r\n                        if (disabled) {  // 详情态\r\n\t                        if (subNumber==0) { // 子任务数等于0\r\n\t\t                        return <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t                        //return <span>{subNumber}</span>\r\n\t                        } else {  // 子任务数大于0\r\n\t\t                        return (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\" style={{marginLeft:\"10px\"}} title=\"编辑\" type=\"edit\" />\r\n                                </span>)\r\n\t                        }\r\n                        } else {  // 编辑态\r\n                            return (<a  onClick={this.handleApart.bind(this, record)}>{subNumber==0?actionName:subNumber}</a>)\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n                    handleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord={\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id||\"\",\r\n\t\t\t\tprojectId: record.projectId||\"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters==null?[]:record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n                    store={this.store}\r\n\t\t\t\t\trecord={record}\r\n                    addRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children==null?[]:record.children.filter((item)=>{return item.treeType==='subtask'})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie&&!disabled?this.onPackup(record):this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n                    disabled={subTaskDis}\r\n                    id={record.id}\r\n                    onTaskRef={this.onTaskRef}\r\n                />\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n                    className=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n                {disabled?null:<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}} type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable2;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/product/EditableTable2.js","/*\r\n* 项目信息 新的模板\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {Input, Form, Row, Col, Card, Button, Tabs, InputNumber, DatePicker, Select} from 'antd';\r\nimport AsyncSelectMuti from \"@/components/common/AsyncSelectMuti\";\r\n\r\nimport Config from \"@/config\";\r\nimport Schemas from \"@/utils/Schemas/bpm\";\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport MyUpload from './MyUpload';\r\nimport moment from 'moment';\r\n\r\nconst {TextArea} = Input;\r\nconst {TabPane} = Tabs;\r\nconst {Option} = Select;\r\nconst obj = {2: [\"5\"], 4: [\"4\"], 5: [\"6\"]}; // 处理产品类型\r\n\r\n@Form.create()\r\nexport default class Index extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n            fields: {\r\n            \t\"id\":\"\",\r\n\t            \"pid\":\"\",\r\n\t            \"projectId\":\"\",\r\n\t            \"code\":\"\",\r\n\t            \"name\":\"\",\r\n\t            \"masters\":[],\r\n\t            \"customer\":\"\",\r\n\t            \"productType\":[],\r\n\t            \"address\":\"\",\r\n\t            \"description\":\"\",\r\n\t            \"milepost\":\"\",\r\n\t            \"builtArea\":\"\",\r\n\t            \"totalCost\":\"\",\r\n\t            \"builtType\":\"\",\r\n\t            \"beginTime\": null,\r\n\t            \"endTime\": null,\r\n\t            \"constructionUnit\":\"\",\r\n\t            \"constructionQualification\":\"\",\r\n\t            \"partyaUnit\":\"\",\r\n\t            \"unitQualification\":\"\",\r\n\t            \"declarationAwards\":\"\",\r\n\t            \"awardGrade\":\"\",\r\n\t            \"buySoftware\":\"\",\r\n\t            \"usageSituation\":\"\",\r\n\t            \"background\":\"\",\r\n\t            \"temporaryDecision\":\"\",\r\n\t            \"temporaryManagerDesire\":\"\",\r\n\t            \"temporaryRequirement\":\"\",\r\n\t            \"temporaryBudgetStandard\":\"\",\r\n\t            \"temporaryTotalAcceptability\":\"\",\r\n\t            \"temporaryTotalRange\":\"\",\r\n\t            \"temporaryBudget\":\"\",\r\n\t            \"temporaryPriceDesire\":\"\",\r\n\t            \"temporaryEstimatePrice\":\"\",\r\n\t            \"temporaryManagersNumber\":\"\",\r\n\t            \"temporaryWorkersNumber\":\"\",\r\n\t            \"temporaryBeginTime\": null,\r\n\t            \"temporaryEndTime\":null,\r\n\t            \"temporaryBudgetEvaluation\":\"\",\r\n            },  // 存储当前组件的数据\r\n            hidden: true,  // 面板是否折叠展开\r\n\t\t\tcount: 1,    // 记录创建还是编辑\r\n\t\t\tkey: \"1\", // 当前key\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps,nextContext){\r\n\t\tconst {itemObj} = nextProps;\r\n\t\tif (itemObj) {\r\n\t\t\tif (JSON.stringify(itemObj)!==JSON.stringify(this.props.itemObj)) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tfields: Object.assign({}, itemObj.children.filter((item)=>{ return item.treeType==\"projectinfo\"})[0]),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {itemObj, count, hidden} = this.props;\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign({}, itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t\t})[0]),\r\n\t\t\tcount,\r\n\t\t\thidden\r\n\t\t});\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\tcallback = (key) => {\r\n\t\tthis.setState({\r\n\t\t\tkey\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (userIds)=>{\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {\r\n\t\t\t\t\"masters\": userIds\r\n\t\t\t}),\r\n\t\t});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t\tcount: Number(this.state.count)+1\r\n\t\t});\r\n\t\tthis.props.updateCount('count', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = ()=> {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t\tkey: \"1\"\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {fields} = _this.state;\r\n\t\t_this.props.form.validateFields((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tdelete values.masters;\r\n\t\t\t\tconst params = Object.assign(fields, values,\r\n\t\t\t\t\t  {\r\n\t\t\t\t\t\t\"projectType\": this.props.projectType,\r\n\t\t\t\t\t  \t\"productType\": values.productType.map((item)=> item.toString()),\r\n\t\t\t\t\t\t\"beginTime\":  values['beginTime']==null||values['beginTime']==\"\"?0:moment(values['beginTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"endTime\": values['endTime']==null||values['endTime']==\"\"?0:moment(values['endTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"temporaryBeginTime\":  values['temporaryBeginTime']==null||values['temporaryBeginTime']==\"\"?0:moment(values['temporaryBeginTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"temporaryEndTime\":  values['temporaryEndTime']==null||values['temporaryEndTime']==\"\"?0:moment(values['temporaryEndTime'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t  });\r\n\t\t\t\tif (params.children==null) {\r\n\t\t\t\t\tdelete params.children;\r\n\t\t\t\t}\r\n\t\t\t\t_this.props.saveProject(params);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fields, hidden, key} = this.state;\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tmd: {span: 8},\r\n\t\t\t\tsm: {span: 10},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tmd: {span: 16},\r\n\t\t\t\tsm: {span: 14},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayout2 = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 12},\r\n\t\t\t\tmd: {span: 10},\r\n\t\t\t\tlg: {span: 10}\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 12},\r\n\t\t\t\tmd: {span: 14},\r\n\t\t\t\tlg: {span: 14}\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst {itemObj, state, ossData, saveAttachment, delNode, count, projectType} = this.props;\r\n\t\tlet attcObj = itemObj.children!=null&&itemObj.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\r\n\t\tconst attachments = attcObj.children!=null?attcObj.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName:vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\tconst temID = {}\r\n\t\treturn (\r\n\t\t\t<Card bordered className=\"pr\" style={{width: '100%'}}>\r\n\t\t\t\t<h3 id={itemObj.id||\"items0\"} className=\"kanban_title mb20\">项目信息</h3>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                    {hidden?\r\n                        <Button className={state==2?\"hidden\":\"\"} type=\"link\" onClick={this.onChangeVis}>{count==1?\"创建\":\"编辑\"}</Button>:\r\n                        <div>\r\n                            <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n                            <span onClick={this.handleSubmit}>保存</span>\r\n                        </div>}\r\n                </span>\r\n\t\t\t\t<Tabs className={count==1?\"hidden\":\"item_tabs\"} activeKey={key} onChange={this.callback}>\r\n\t\t\t\t\t<TabPane tab=\"主体项目信息\" key=\"1\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目名称\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('name', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.name||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入项目名称'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.masters==null?[]:fields.masters,\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入主负责人'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata={fields.masters==null?[]:fields.masters}\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"客户名称\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('customer', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.customer||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户名称'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xl={16}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"产品类型\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('productType', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: projectType==4||projectType==5?obj[projectType]:(fields.productType==null?[]:fields.productType),\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择产品类型'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AsyncSelectMuti\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"getProductTypeList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariables={{}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tquery={Schemas.bpm.getProductTypeList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl={Config.bpm.getProductTypeList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={projectType==4||projectType==5?obj[projectType]:fields.productType==null?[]:fields.productType}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titemKey=\"id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titemValue=\"typeName\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden||projectType==4||projectType==5}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目地点\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('address', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.address||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目地点'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label={<span>建筑面积(㎡)</span>}  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('builtArea', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.builtArea||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建筑面积'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"总造价(万元)\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('totalCost', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.totalCost||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入总造价'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={24}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目概况\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('description', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.description||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目概况'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"建筑类型\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('builtType', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.builtType||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建筑类型'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"开工日期\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('beginTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.beginTime==null||fields.beginTime==0?\"\":moment(moment(fields.beginTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择开工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"竣工日期\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('endTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.endTime==null||fields.endTime==0?\"\":moment(moment(fields.endTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择竣工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xl={16}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"施工单位\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('constructionUnit', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.constructionUnit||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入施工单位'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"施工资质\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('constructionQualification', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.constructionQualification||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入施工资质'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"甲方单位\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('partyaUnit', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.partyaUnit||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入甲方单位'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"甲方资质\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('unitQualification', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.unitQualification||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入甲方资质'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={24}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"关键里程碑\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('milepost', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.milepost||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入关键里程碑'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xl={16}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"申报奖项\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('declarationAwards', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.declarationAwards||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入申报奖项'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"奖项等级\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('awardGrade', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.awardGrade||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入奖项等级'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"已采购软件\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('buySoftware', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.buySoftware||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入已采购软件'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"使用情况\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('usageSituation', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.usageSituation||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入使用情况'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={24}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目背景及意义\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('background', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.background||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目背景及意义'}],\r\n\t\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\" />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane tab=\"临建项目信息\" key=\"2\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout2}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin:\"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"决策方式\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryDecision', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryDecision||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入决策方式'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目经理意愿\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryManagerDesire', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryManagerDesire||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目经理意愿'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"特殊要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryRequirement', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryRequirement||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入特殊要求'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"预算标准\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBudgetStandard', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBudgetStandard||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入预算标准'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"总承包形式接受度\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryTotalAcceptability', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryTotalAcceptability||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入总承包形式接受度'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"总承包范围\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryTotalRange', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryTotalRange||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入总承包范围'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"客户需求预算价(万元)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBudget', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBudget||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户需求预算价'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"客户对此价格意愿度\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryPriceDesire', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryPriceDesire||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户对此价格意愿度'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"预估客户可接受价格\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryEstimatePrice', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryEstimatePrice||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入预估客户可接受价格'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"管理人员数量(人)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryManagersNumber', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryManagersNumber||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入管理人员数量'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"劳务人员数量(人)\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryWorkersNumber', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryWorkersNumber||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入劳务人员数量'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"预算综合判断\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBudgetEvaluation', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBudgetEvaluation||\"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择预算综合判断'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option title=\"有付费能力，高度重视，强调差异化体现\" value=\"有付费能力，高度重视，强调差异化体现\">有付费能力，高度重视，强调差异化体现</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option title=\"追求普通标准，合适就好\" value=\"追求普通标准，合适就好\">追求普通标准，合适就好</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Option title=\"预算有限，临建功能刚需，其余尚可就好\" value=\"预算有限，临建功能刚需，其余尚可就好\">预算有限，临建功能刚需，其余尚可就好</Option>\r\n\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"开工日期\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryBeginTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryBeginTime==null||fields.temporaryBeginTime==0?\"\":moment(moment(fields.temporaryBeginTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择开工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"竣工日期\"  className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('temporaryEndTime', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.temporaryEndTime==null||fields.temporaryEndTime==0?\"\":moment(moment(fields.temporaryEndTime).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择竣工日期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t</Tabs>\r\n\t\t\t\t<div className={count==1||(itemObj.id==null||itemObj.id==\"\")?\"hidden\":\"pr\"}>\r\n\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\tpid={attcObj.id}\r\n\t\t\t\t\t\tprojectId={attcObj.projectId}\r\n\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\tleft: '35px',\r\n\t\t\t\t\t\ttop: '4px',\r\n\t\t\t\t\t\tfontSize:'12px',\r\n\t\t\t\t\t\tcolor: '#999'\r\n\t\t\t\t\t}}>请上传现场平面布置图（含临建区域范围）和拟建建筑效果图（设计理念）</span>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/ItemInfoNew.js","/*\r\n* 实施交付业务组件\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Card, Form, Row, Col, Button, Calendar, Dropdown, Spin, message, Modal} from 'antd';\r\nimport EditableTable from '@/components/labor/EditableTable';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as utils from \"@/utils/utils\";\r\nimport moment from 'moment';\r\nimport * as  mobx from 'mobx';\r\nconst { confirm } = Modal;\r\n@Form.create()\r\n@observer\r\nclass Delivery extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\thidden: true,  // 面板折叠展开\r\n\t\t\tdataSource: [],   // 任务的数据源\r\n\t\t\tcurrentTree: {}, // 存储当前组件树对象\r\n\t\t\tpid: '',     // 父节点id\r\n\t\t\tprojectId: \"\", // 项目id\r\n\t\t\tdefaultTree: {}, // 记录当前树的默认数据\r\n\t\t\tcalendarVis: false,\r\n\t\t\tisLoading: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {treeData, disabled} = nextProps;\r\n\t\tif (typeof treeData == 'object' && Object.keys(treeData).length !== 0 && treeData !== this.props.treeData) {\r\n\t\t\tif (treeData.children === null) { // 没有任务集合\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource: []\r\n\t\t\t\t});\r\n\t\t\t} else {  // 包含任务集合\r\n\t\t\t\tconst dataSource = treeData.children.filter((item) => item.treeType == \"taskc\")[0].children;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource,\r\n\t\t\t\t\tcurrentTree: Object.assign({}, treeData),   // 更新同步\r\n\t\t\t\t\tpid: treeData.children.filter((item) => item.treeType == \"taskc\")[0].id,\r\n\t\t\t\t\tprojectId: treeData.children.filter((item) => item.treeType == \"taskc\")[0].projectId,\r\n\t\t\t\t\t//hidden: disabled,\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// 更新记录当前树的附件数据\r\n\t\t\t\t\tlet attc = treeData.children.filter((item) => item.treeType == \"attc\")[0]\r\n\t\t\t\t\tif (Object.keys(this.state.defaultTree).length > 0) {\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tdefaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {treeData, disabled} = this.props;\r\n\t\tif (typeof treeData == 'object' && Object.keys(treeData).length !== 0) {\r\n\t\t\tif (treeData.children === null) { // 没有任务集合\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource: []\r\n\t\t\t\t});\r\n\t\t\t} else {  // 包含子任务集合\r\n\t\t\t\tconst dataSource = treeData.children.filter((item) => item.treeType == \"taskc\")[0].children;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource,\r\n\t\t\t\t\tcurrentTree: Object.assign({}, treeData),\r\n\t\t\t\t\tpid: treeData.children.filter((item) => item.treeType == \"taskc\")[0].id,\r\n\t\t\t\t\tprojectId: treeData.children.filter((item) => item.treeType == \"taskc\")[0].projectId,\r\n\t\t\t\t\t//hidden: disabled\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {currentTree} = _this.state;\r\n\t\t_this.props.form.validateFieldsAndScroll((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\t_this.props.saveNodes(currentTree);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\thidden: !this.state.hidden\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新该节点树 数据\r\n\tsaveData2 = (taskdata, key) => {\r\n\t\tconst {currentTree} = this.state;\r\n\t\tlet newData = [];\r\n\t\ttaskdata.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewData.push(obj);\r\n\t\t});\r\n\t\tlet currentTaskC = currentTree.children.filter(item => item.treeType === 'taskc')[0];\r\n\t\tcurrentTaskC = Object.assign(currentTaskC, {\"children\": taskdata})\r\n\t\tlet stepChildren = currentTree.children;\r\n\t\tconst taskcIndex = stepChildren.findIndex(item => {\r\n\t\t\treturn item.treeType === 'taskc'\r\n\t\t})\r\n\t\tstepChildren[taskcIndex] = currentTaskC;\r\n\t\tthis.setState({currentTree: Object.assign(currentTree, {\"children\": stepChildren})});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t});\r\n\t\tthis.props.updateCount('payCount', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden\r\n\t\t});\r\n\t}\r\n\r\n\t// 日历切换\r\n\tonPanelChange = () => {\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t},()=>{\r\n\t\t\tsetTimeout(()=>{\r\n                 this.setState({\r\n\t                 isLoading: false\r\n                 }, ()=>{\r\n\t                 // 跳转地址\r\n\t                 this.store.getProjectByWsProjectId().then((res)=>{\r\n                         const {title, projectId}=res;\r\n                         if (projectId!==null&&projectId!==\"\") {\r\n\t                         let url = 'https://www.bocspace.cn/eeop/#/xmgl?projectId='+`${projectId}`+'&name='+`${title}`;\r\n\t                         window.open(url, '_bank');\r\n                         } else {\r\n                           this.showConfirm();\r\n                           return false;\r\n                         }\r\n\t                 });\r\n                 })\r\n\t\t\t}, 1000);\r\n\t\t});\r\n\t}\r\n\r\n\tonVisibleChange = () => {\r\n\t\tthis.setState({\r\n\t\t\tcalendarVis: !this.state.calendarVis\r\n\t\t});\r\n\t}\r\n\r\n\tdisabledDate = (current) => {\r\n\t\treturn current && current > moment().endOf('day');  //当天之前的不可选，包括当天\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (userIds)=>{\r\n\t\tconst {currentTree} = this.state;\r\n\t\t// 更新当前树\r\n\t\tconst currentData = Object.assign({}, currentTree, {masters:userIds});\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n\t}\r\n\r\n\tdateCellRender = (value) => {\r\n\t\tconst {reportDays}=this.store;\r\n\t\tconst val = moment(value).format(\"YYYY-MM-DD\");\r\n\t\tconst isShow = mobx.toJS(reportDays).includes(val);\r\n\t\treturn (\r\n\t\t\t<img\r\n\t\t\t\tclassName={isShow?\"\":\"hidden\"}\r\n\t\t\t\tstyle={{position: 'relative', 'top': '-5px'}}\r\n\t\t\t\twith=\"16px\"\r\n\t\t\t\theight=\"16px\"\r\n\t\t\t\tsrc=\"./images/zhmy_succes.png\" alt=\"\"/>\r\n\t\t);\r\n\t}\r\n\r\n\tshowConfirm = () => {\r\n\t\tconfirm({\r\n\t\t\tclassName: \"tc modal_tc\",\r\n\t\t\t//iconType: 'exclamation-circle',\r\n\t\t\ticon: null,\r\n\t\t\ttitle: '请先在施工日志中关联项目',\r\n\t\t\tcontent: '',\r\n\t\t\tonOk() {\r\n\t\t\t\tlet url = 'https://www.bocspace.cn/eeop/#/construction';\r\n\t\t\t\twindow.open(url, '_bank');\r\n\t\t\t},\r\n\t\t\tonCancel() {\r\n\r\n\t\t\t},\r\n\t\t\tokText: '前往关联',\r\n\t\t\tcancelText: '关闭',\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet _this = this;\r\n\t\tconst {getFieldDecorator} = _this.props.form;\r\n\t\tconst {count, isShow} = this.props;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst {state, projectId} = this.store;\r\n\t\tconst {isLoading, calendarVis, hidden, currentTree, pid} = _this.state;\r\n\t\tlet currentDataSource = currentTree.children != null && currentTree.children[0].children != null ? currentTree.children[0].children : [];\r\n\r\n\t\treturn (\r\n\t\t\t<Card bordered style={{width: '100%'}} className=\"mt20\">\r\n\t\t\t\t<Spin tip={\"正在跳转，请稍等...\"} spinning={isLoading} delay={1000}>\r\n\t\t\t\t<h3 id={currentTree.id} className=\"kanban_title mb20\">实施交付</h3></Spin>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                     {hidden ?\r\n\t                     <Button disabled={isShow} className={state == 2 ? \"hidden\" : \"\"} type=\"link\"\r\n\t                             onClick={this.onChangeVis}>{count == 1 ? \"创建\" : \"编辑\"}</Button> :\r\n\t                     <div>\r\n\t\t                     <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                     <span onClick={this.handleSubmit}>保存</span>\r\n\t                     </div>}\r\n                </span>\r\n\t\t\t\t<Form className={count == 1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择主负责人'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\tdata={currentTree&&currentTree.masters==null?[]:currentTree.masters}\r\n\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\twidth='32px'\r\n\t\t\t\t\t\t\t\theight=\"32px\"\r\n\t\t\t\t\t\t\t\tstyle={{verticalAlign: 'middle'}}\r\n\t\t\t\t\t\t\t\tsrc='./images/delivery.png'/>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tvisible={calendarVis}\r\n\t\t\t\t\t\t\t\tonVisibleChange={this.onVisibleChange}\r\n\t\t\t\t\t\t\t\toverlay={<div style={{\r\n\t\t\t\t\t\t\t\t\twidth: 300,\r\n\t\t\t\t\t\t\t\t\tbackground: '#FFF',\r\n\t\t\t\t\t\t\t\t\tborder: '1px solid #d9d9d9',\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Calendar\r\n\t\t\t\t\t\t\t\t\t\tdisabledDate={this.disabledDate}\r\n\t\t\t\t\t\t\t\t\t\tdateCellRender={this.dateCellRender}\r\n\t\t\t\t\t\t\t\t\t\tfullscreen={false}\r\n\t\t\t\t\t\t\t\t\t\tonSelect={this.onPanelChange}/>\r\n\t\t\t\t\t\t\t\t</div>}>\r\n\t\t\t\t\t\t\t\t<a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t\t\t\t\t施工日志\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n\t\t\t\t{/*任务*/}\r\n\t\t\t\t{count == 1 ? null : <EditableTable\r\n\t\t\t\t\tdataSource={currentDataSource}\r\n\t\t\t\t\tsaveData={this.saveData2}\r\n\t\t\t\t\tprojectId={projectId}\r\n\t\t\t\t\tpid={pid}\r\n\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tsaveAttachment={this.props.saveAttachment}\r\n\t\t\t\t\tdelNode={this.props.delNode}\r\n\t\t\t\t\tossData={this.props.ossData}\r\n\t\t\t\t/>}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default Delivery;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/Delivery.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tSelect,\r\n\tmessage,\r\n\tInputNumber,\r\n\tDropdown,\r\n\tMenu,\r\n\tPopover\r\n} from 'antd';\r\nimport TaskSplite from '@/components/worktile/TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport PayUpload from \"@/components/labor/PayUpload\";\r\n\r\nlet runonlyonce = false;\r\nconst {Option} = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\nconst widthDESIGN = {2: '13%', 4: '10%'};  // 自定义表格宽度\r\n\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\t//onChange={this.save}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'rate') {  // 完成比例\r\n\t\t\tlet subTasks = record.children != null && record.children.filter((item) => {\r\n\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t})\r\n\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 完成比例\r\n\t\t\tconst subNumber = record.children == null || record.children.length == 0 ? 0 : record.children.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t}],\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index + 1})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": nextProps.pid,\r\n\t\t\t\t\t\"projectId\": nextProps.projectId,\r\n\t\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\t\"masters\": [],\r\n\t\t\t\t\t\"children\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\t\"remark\": \"\"\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index + 1})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": this.props.pid,\r\n\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t}],\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\r\n\t\tthis.eventE3 = emitter.addListener('handletaskid', (obj)=>{\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount(){\r\n\t\temitter.removeListener(this.eventE3)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\"+err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\tconst {pid, projectId} = this.props;\r\n\t\t//const newData = Object.assign(primaryData, {key: count, id: \"!\" + uuidv4()});\r\n\t\tlet uuid = \"!\" + uuidv4();\r\n\t\tconst newData = Object.assign({}, {\r\n\t\t\t\"id\": uuid,\r\n\t\t\t\"pid\": pid,\r\n\t\t\t\"projectId\": projectId,\r\n\t\t\t\"treeType\": \"task\",\r\n\t\t\t\"masters\": [],\r\n\t\t\t\"children\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"id\": \"!\" + uuidv4(),\r\n\t\t\t\t\t\"pid\": uuid,\r\n\t\t\t\t\t\"projectId\": projectId,\r\n\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\"name\": \"附件\",\r\n\t\t\t\t\t\"type\": 0\r\n\t\t\t\t}],\r\n\t\t\t\"name\": \"\",\r\n\t\t\t\"rate\": 0,\r\n\t\t\t\"nodeCount\": null,\r\n\t\t\t\"beginTime\": null,\r\n\t\t\t\"endTime\": null,\r\n\t\t\t\"orders\": 0,\r\n\t\t\t\"remark\": \"\"\r\n\t\t});\r\n\t\t//console.log(newData, '新增')\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({expandedKeys: keys}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n\thandleApart = (record) => {\r\n\t\t// if (key==null||key==\"\") {\r\n\t\t//    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t\t//    return false;\r\n\t\t// }\r\n\t\t// 记录当前主任务没有改动的数据\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({}, record),\r\n\t\t\tactiveSub: Object.assign([], record.children == null ? [] : record.children),\r\n\t\t\tsubTaskDis: false, // 可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record.id);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t\t// 如果子任务为空，保存是调用新街口\r\n\t\tlet length = this.state.subtasks.length\r\n\t\tif (length == 0) {\r\n\t\t\tthis.store.delNodeByPid({pid: id})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 子任务名称和负责人必填\r\n\t\t\tconst subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n\t\t\tconst isSub = subtasks.filter((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.masters == null || item.masters.length == 0\r\n\t\t\t})\r\n\t\t\tif (isSub.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"请您填写任务名称和负责人\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 判断是新增的主任务进行拆解的\r\n\t\t\tif (id.startsWith(\"!\")) {\r\n\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t} else {\r\n\t\t\t\t// 原有\r\n\t\t\t\tthis.store.saveSubTasks(this.state.subtasks)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res && res.length > 0) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t\tthis.subtask.clearState();\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tlet record = utils.getRecord(treeData, id);\r\n\t\t\t\t\t\t// 如果存在 attachments 更新的时候要添加附件集\r\n\t\t\t\t\t\tlet attachments = record && record.children != null && record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'attc'\r\n\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\tif (attachments) {\r\n\t\t\t\t\t\t\tres.push(attachments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks: newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n\tonCalac = (key) => {\r\n\t\tthis.saveExpandedRows(key);\r\n\t\tthis.store.isEdit = false;\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n\t\tthis.subtask.clearState();\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({})\r\n\t\t});\r\n\t}\r\n\r\n\t// 折叠收起\r\n\tonPackup = (record) => {\r\n\t\tlet _this = this;\r\n\t\tconst defaultSource = _this.state.activeSub.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解前默认数据\r\n\t\tconst rearSource = _this.state.subtasks.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解后内容变动数据\r\n\t\t// console.log(JSON.stringify(defaultSource), JSON.stringify(rearSource), '===比较', JSON.stringify(defaultSource)==JSON.stringify(rearSource))\r\n\t\t// 当前拆解数据内容变化，给提示是否保存\r\n\t\tif (JSON.stringify(defaultSource) == JSON.stringify(rearSource)) {\r\n\t\t\t// 内容没有变动，直接取消\r\n\t\t\t_this.onCalac(record.id);\r\n\t\t} else {\r\n\t\t\tModal.confirm({\r\n\t\t\t\ttitle: '是否对所更改内容保存',\r\n\t\t\t\tokText: '保存',\r\n\t\t\t\tcancelText: '不保存',\r\n\t\t\t\tonOk() {\r\n\t\t\t\t\t_this.saveSubTaskRecord(record.id);\r\n\t\t\t\t},\r\n\t\t\t\tonCancel() {\r\n\t\t\t\t\t_this.onCalac(record.id);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonTaskRef = (ref) => {\r\n\t\tthis.subtask = ref\r\n\t}\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\thandleChangeMenu = (type, item, rowId) => {\r\n\t\tconst {id, fileType, filePath} = item;\r\n\t\t// 本地存储\r\n\t\tlet payOutput = JSON.parse(JSON.stringify(this.store[type]));\r\n\t\tthis.store[type] = Object.assign(payOutput, {\r\n\t\t\t[rowId]: JSON.stringify({\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: filePath,\r\n\t\t\t\tid,\r\n\t\t\t\tfileType\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t// 在线编辑跳转\r\n\thandleLinkTo = (rowUrl, obj, rowId) => {\r\n\t\tconst {id, fileType, filePath, fileName} = obj;\r\n\t\tvar linkUrl;\r\n\t\tif (rowUrl != undefined && rowUrl != null) {\r\n\t\t\tconst link = JSON.parse(rowUrl).filePath;\r\n\t\t\tconst linkId = JSON.parse(rowUrl).id;\r\n\t\t\tconst linkType = JSON.parse(rowUrl).fileType;\r\n\t\t\tconst linkName = JSON.parse(rowUrl).fileName;\r\n\t\t\tif (link == \"\" || link == null) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: linkId,\r\n\t\t\t\t\ttype: linkType\r\n\t\t\t\t}\r\n\t\t\t\tthis.store.getTaskattEditUrl(params)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tlinkUrl = res;\r\n\t\t\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tlinkUrl = link;\r\n\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t}\r\n            // 维护本地数据\r\n\t\t\tlet payOutput = JSON.parse(JSON.stringify(this.store.payOutput));\r\n\t\t\tthis.store.payOutput = Object.assign(payOutput, {\r\n\t\t\t\t[rowId]: JSON.stringify({\r\n\t\t\t\t\tfileName: linkName,\r\n\t\t\t\t\tfilePath: linkUrl,\r\n\t\t\t\t\tid: linkId,\r\n\t\t\t\t\tfileType: linkType\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t} else {   // rowUr为空\r\n\t\t\tif (filePath == \"\" || filePath == null) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\ttype: fileType\r\n\t\t\t\t}\r\n\t\t\t\tthis.store.getTaskattEditUrl(params)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tlinkUrl = res;\r\n\t\t\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tlinkUrl = filePath;\r\n\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t}\r\n\t\t\t// 维护本地数据\r\n\t\t\tlet payOutput = JSON.parse(JSON.stringify(this.store.payOutput));\r\n\t\t\tthis.store.payOutput = Object.assign(payOutput, {\r\n\t\t\t\t[rowId]: JSON.stringify({\r\n\t\t\t\t\tfileName: fileName,\r\n\t\t\t\t\tfilePath: linkUrl,\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tfileType: fileType\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//模板下载\r\n\thandleLinkDown = (rowUrl, obj, rowId) => {\r\n\t\tconst {filePath} = obj;\r\n\t\tif (rowUrl != undefined && rowUrl != null) {\r\n\t\t\tconst link = JSON.parse(rowUrl).filePath;\r\n\t\t\tconst linkArray = link.split(\";\");\r\n\t\t\tlinkArray.forEach(item => {\r\n\t\t\t\twindow.open(item, '_blank');\r\n\t\t\t});\r\n\t\t} else {   // rowUr为空\r\n\t\t\tconst linkArray = filePath.split(\";\");\r\n\t\t\tlinkArray.forEach(item => {\r\n\t\t\t\twindow.open(item, '_blank');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览\r\n\tdownload =(attc) => {\r\n\t\tif(attc.length>0) {\r\n\t\t\tconst url = attc[0].filePath;\r\n\t\t\twindow.open(url, '_blank');\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {subTaskDis, dataSource, expandedKeys} = this.state;\r\n\t\tconst {temId} = this.store;\r\n\t\tlet payOutput = mobx.toJS(this.store.payOutput);\r\n\t\tlet temOutput = mobx.toJS(this.store.temOutput);\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst {taskhaveattt} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length > 0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '序号',\r\n\t\t\t\tdataIndex: 'key',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\twidth: '70px',\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '70px'}}\r\n\t\t\t\t\t\t\tid={`/workdetail?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t\tclassName=\"w pr\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\">\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tclassName={!disabled && !isChaijie ? \"\" : \"hidden\"}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\tleft: '0',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '18px',\r\n\t\t\t\t\t\t\t\t\t\tpaddingRight: '5px'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<span>{text}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null ? \"\" : text.map(item => item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px', }}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div  style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t            id={record.id}>{text}%</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '对应产出',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst {children} = record;\r\n\t\t\t\t\tlet attcArray = children != null && Array.isArray(children) && children.filter((item) => {\r\n\t\t\t\t\t\treturn item.type == 0\r\n\t\t\t\t\t});  // 正常附件\r\n\t\t\t\t\tlet onlineArray = children != null && Array.isArray(children) && children.filter((item) => {\r\n\t\t\t\t\t\treturn item.type == 1\r\n\t\t\t\t\t});  // 在线编辑\r\n\t\t\t\t\tif (attcArray.length > 0) {\r\n\t\t\t\t\t\tlet attcObj = attcArray[0];  //正常\r\n\t\t\t\t\t\tconst attachments = attcObj && attcObj.children && attcObj.children != null ? attcObj.children.map((vitem) => {\r\n\t\t\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\t\tuid: vitem.id,\r\n\t\t\t\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\t\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\t\t\t\tid: vitem.id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}) : [];\r\n\t\t\t\t\t\tlet isNew = attcObj.id.includes(\"!\");\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"table_upload pay_upload\"  style={{width: '100%', height: '46px', lineHeight: '46px'}}>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\"\r\n\t\t\t\t\t\t\t\t\ttitle={attcObj.name}\r\n\t\t\t\t\t\t\t\t\tonClick={this.download.bind(this, attachments)}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: attachments.length > 0 ? '#1890ff' : '#333',\r\n\t\t\t\t\t\t\t\t\t\tcursor: attachments.length > 0 ? 'pointer' : 'default',\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '80px',\r\n\t\t\t\t\t\t\t\t\t\tdisplay:'inline-block',\r\n\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{attcObj.name}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{disabled|| isChaijie||isNew?null:\r\n\t\t\t\t\t\t\t\t<PayUpload\r\n\t\t\t\t\t\t\t\t\tsaveAttachment={this.props.saveAttachment}\r\n\t\t\t\t\t\t\t\t\tdelNode={this.props.delNode}\r\n\t\t\t\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\t\t\t\tpid={attcObj ? attcObj.id : \"\"}\r\n\t\t\t\t\t\t\t\t\tprojectId={attcObj ? attcObj.projectId : \"\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={disabled || isChaijie}\r\n\t\t\t\t\t\t\t\t\tossData={this.props.ossData}\r\n\t\t\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t} else if (onlineArray.length > 0) {\r\n\t\t\t\t\t\tlet onlineObj = onlineArray[0];  //在线\r\n\t\t\t\t\t\tconst {children} = onlineObj;\r\n\t\t\t\t\t\tconst rowUrl = payOutput[record.id];\r\n\t\t\t\t\t\tconst fileUrl = rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).filePath : children[0].filePath;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div  style={{width: '100%', height: '46px', lineHeight: '46px'}}>\r\n                            <Dropdown overlay={\r\n\t                            <Menu>\r\n\t\t                            {children.length > 0 && children.map((item, index) => {\r\n\t\t\t                            return (<Menu.Item\r\n\t\t\t\t                            onClick={this.handleChangeMenu.bind(this, 'payOutput', item, record.id)}\r\n\t\t\t\t                            key={\"menu_\" + index}>\r\n\t\t\t\t                            {item.fileName == null ? \"--\" : item.fileName}\r\n\t\t\t                            </Menu.Item>)\r\n\t\t                            })}\r\n\t                            </Menu>\r\n                            }>\r\n                                <span className={children.length == 1 ? \"hidden\" : \"ant-dropdown-link\"}\r\n                                      onClick={e => e.preventDefault()}>\r\n                                  <Icon type=\"caret-down\"/>\r\n                                </span>\r\n                            </Dropdown>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\"\r\n\t\t\t\t\t\t\t\t\tonClick={disabled|| isChaijie?this.handleLinkTo.bind(this, rowUrl, children[0], record.id):null}\r\n\t\t\t\t\t\t\t\t\ttitle={children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : children[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: fileUrl == null || fileUrl == \"\" ? '#333' : '#1890ff',\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '80px',\r\n\t\t\t\t\t\t\t\t\t\tdisplay:'inline-block',\r\n\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : children[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{disabled|| isChaijie?null:\r\n         \t\t\t\t\t\t<Icon type=\"edit\" style={{color: \"#1890ff\"}}\r\n\t\t\t\t\t                  onClick={this.handleLinkTo.bind(this, rowUrl, children[0], record.id)}/>}\r\n                        </div>);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '模板下载',\r\n\t\t\t\tdataIndex: 'template',\r\n\t\t\t\tclassName: temId == 2 ? \"hidden\" : \"\",\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tif (temId == 2) { // 前端处理 - 劳务仓流程不渲染组件\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {children, treeType} = record;\r\n\t\t\t\t\t\tif (treeType == \"task\") {\r\n\t\t\t\t\t\t\tlet temArray = children != null && children != undefined && Array.isArray(children) && children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.type == 2\r\n\t\t\t\t\t\t\t});  // 模板\r\n\t\t\t\t\t\t\tif (temArray.length == 0) {\r\n\t\t\t\t\t\t\t\treturn (<div className=\"tc\" style={{width: '70px'}}> - - </div>)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet temObj = temArray[0];  // 模板\r\n\t\t\t\t\t\t\t\tconst temChildren = temObj.children == null ? [] : temObj.children;\r\n\t\t\t\t\t\t\t\t//var fileUrl;\r\n\t\t\t\t\t\t\t\tvar rowUrl;\r\n\t\t\t\t\t\t\t\tif (temOutput !== undefined) {\r\n\t\t\t\t\t\t\t\t\trowUrl = temOutput[record.id];\r\n\t\t\t\t\t\t\t\t\t//fileUrl = rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).filePath : children[0].filePath;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div style={{width: '100%', height: '46px', lineHeight: '46px'}}>\r\n                            <Dropdown overlay={\r\n\t                            <Menu>\r\n\t\t                            {temChildren.length > 0 && temChildren.map((item, index) => {\r\n\t\t\t                            return (<Menu.Item\r\n\t\t\t\t                            onClick={this.handleChangeMenu.bind(this, 'temOutput', item, record.id)}\r\n\t\t\t\t                            key={\"menu_\" + index}>\r\n\t\t\t\t                            {item.fileName == null ? \"--\" : item.fileName}\r\n\t\t\t                            </Menu.Item>)\r\n\t\t                            })}\r\n\t                            </Menu>\r\n                            }>\r\n                                <span className={temChildren.length == 1 ? \"hidden\" : \"ant-dropdown-link\"}\r\n                                      onClick={e => e.preventDefault()}>\r\n                                  <Icon type=\"caret-down\"/>\r\n                                </span>\r\n                            </Dropdown>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\"\r\n\t\t\t\t\t\t\t\t\ttitle={children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : temChildren[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t//color: fileUrl == undefined || fileUrl == null || fileUrl == \"\" ? '#333' : '#1890ff',\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '80px',\r\n\t\t\t\t\t\t\t\t\t\tdisplay:'inline-block',\r\n\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : temChildren[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<Icon type=\"vertical-align-bottom\" style={{color: \"#1890ff\", fontSize: '20px'}}\r\n\t\t\t\t\t\t\t\t      onClick={this.handleLinkDown.bind(this, rowUrl, temChildren[0], record.id)}/>\r\n                        </div>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t<p><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t           key={'task_' + index}><span\r\n\t\t\t\t\t\t\t\t\tstyle={{fontWeight: '700', color: '#333'}}>备注{index + 1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)} id={record.id}>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t\t\t<span><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_' + index}\r\n\t\t\t\t\t\t\t\t\t\t              className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px', fontWeight: '700', color: '#333'}}>\r\n\t\t                                  备注{index + 1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {\r\n\t\t\t\t\t\treturn item == record.id\r\n\t\t\t\t\t}).length > 0 && !subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\t\t\t\tif (disabled) {  // 详情态\r\n\t\t\t\t\t\t\tif (subNumber == 0) { // 子任务数等于0\r\n\t\t\t\t\t\t\t\treturn <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t\t\t\t\t\t\t//return <span>{subNumber}</span>\r\n\t\t\t\t\t\t\t} else {  // 子任务数大于0\r\n\t\t\t\t\t\t\t\treturn (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\"\r\n\t                                      style={{marginLeft: \"10px\"}} title=\"编辑\" type=\"edit\"/>\r\n                                </span>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {  // 编辑态\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<a onClick={this.handleApart.bind(this, record)}>{subNumber == 0 ? actionName : subNumber}</a>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t]\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord = {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id || \"\",\r\n\t\t\t\tprojectId: record.projectId || \"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters == null ? [] : record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\taddRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie && !disabled ? this.onPackup(record) : this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n\t\t\t\t\tdisabled={subTaskDis}\r\n\t\t\t\t\tid={record.id}\r\n\t\t\t\t\tonTaskRef={this.onTaskRef}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t\tscroll={{ x: (columns.length-2)*140+140 }}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/EditableTable.js","/*\r\n* 附件组件\r\n* */\r\nimport React from \"react\";\r\nimport { Upload, Icon, message } from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\n\r\nfunction getBase64(img, callback) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n}\r\n\r\nconst client = (self) => {\r\n    const {token} = self.state\r\n    // ali-oss v6.x版本的写法\r\n    return new oss({\r\n      accessKeyId: token.access_key_id,\r\n      accessKeySecret: token.access_key_secret,\r\n      stsToken: token.stsToken,\r\n      region: token.region, //\r\n      bucket: token.bucket,//\r\n      endpoint: token.OSS_ENDPOINT\r\n    });\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n    // 上传文件的路径，使用日期命名文件目录\r\n    return `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n    const url = uploadPath(path, file)\r\n    return new Promise((resolve, reject) => {\r\n      client(self).multipartUpload(url, file).then(data => {\r\n        resolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n}\r\n\r\nclass PayUpload extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            fileList: this.props.fileList,\r\n            loading: false,\r\n            token: {\r\n                access_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n                access_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n                stsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n                region: 'oss-cn-beijing', // oss的region\r\n                bucket: 'xinlj', // oss的bucket\r\n                OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n            },\r\n            host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n        };\r\n    }\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t    if (JSON.stringify(nextProps.fileList)!=JSON.stringify(this.props.fileList)) {\r\n           this.setState({\r\n               fileList: nextProps.fileList\r\n           });\r\n        }\r\n        if (JSON.stringify(nextProps.ossData)!=JSON.stringify(this.props.ossData)) {\r\n            let token = JSON.parse(JSON.stringify(this.state.token));\r\n\t        this.setState({\r\n                token: Object.assign(token, {\r\n                    access_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n                    access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n                    stsToken: nextProps.ossData.securityToken\r\n                })\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.fileList) {\r\n            this.setState({\r\n                fileList: this.props.fileList\r\n            });\r\n        }\r\n       if (this.props.ossData) {\r\n           let token = JSON.parse(JSON.stringify(this.state.token));\r\n           this.setState({\r\n               token: Object.assign(token, {\r\n                   access_key_id: this.props.ossData.accessKeyId, // oss的key_id\r\n                   access_key_secret: this.props.ossData.accessKeySecret, // oss的secret\r\n                   stsToken: this.props.ossData.securityToken\r\n               })\r\n           });\r\n       }\r\n\r\n    }\r\n\r\n    handleChange = (info) => {\r\n        const status = info.file.status;\r\n\r\n        // 记录新上传的\r\n        let fileList = [...info.fileList];\r\n        let oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file)=>{return file.status&&file.status === 'done';});  // 之前保存过的\r\n        let newFileList = JSON.parse(JSON.stringify(fileList));\r\n        newFileList = newFileList.filter((file) => {\r\n            if (file.status&&file.status === 'done') {\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        newFileList = newFileList.map(file => {\r\n            if (file.originFileObj) {\r\n                const url = this.state.host+uploadPath('path', file);\r\n                return  Object.assign({}, {\r\n                    uid:file.uid,\r\n                    name:file.name,\r\n                    status:\"done\",\r\n                    url:url,\r\n                    fileId: null,\r\n                    fileName: file.name,\r\n                    filePath: url,\r\n                    id: \"\"\r\n                })\r\n            }\r\n            return file;\r\n        });\r\n            if (status==undefined) {\r\n         // 处理附件\r\n         //let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n         let array = JSON.parse(JSON.stringify([ ...newFileList]))\r\n         let arr = [];\r\n         array.length && array.map((item, index) => {\r\n        \t arr.push({\r\n        \t\t fileId: item.fileId,\r\n        \t\t fileName: item.fileName,\r\n        \t\t filePath: item.filePath,\r\n        \t\t pid: this.props.pid,\r\n        \t\t projectId: this.props.projectId,\r\n        \t\t id: item.id\r\n        \t })\r\n         });\r\n         this.props.saveAttachment(arr);\r\n        }\r\n        else if (status === \"removed\") {   // 删除\r\n        \t let id = info.file.id;\r\n        \t if (id!==\"\"||id!==null) { // 删除已有的\r\n        \t\t this.props.delNode(id);\r\n        \t }\r\n        }\r\n\r\n    this.setState({\r\n            fileList: [...oldFileList, ...newFileList]\r\n        });\r\n    }\r\n\r\n    beforeUpload = (file) => {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        if (!true) {\r\n          message.error('You can only upload JPG file!');\r\n        }\r\n        const isLt2M = file.size / 1024 / 1024 < 2000;\r\n        if (!isLt2M) {\r\n          message.error('Image must smaller than 2MB!');\r\n        }\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onloadend = () => {\r\n            // 使用ossupload覆盖默认的上传方法\r\n            UploadToOss(this, '上传路径oss配置信息', file)\r\n                .then(data => {return data;});\r\n        }\r\n        return false; // 不调用默认的上传方法\r\n    }\r\n    render() {\r\n        const {fileList} = this.state;\r\n        const props = {\r\n            name: 'file',\r\n            multiple: this.props.multiple,\r\n            onChange: this.handleChange,\r\n            beforeUpload: this.beforeUpload,\r\n            listType: 'text',\r\n            className: 'upload-list-inline',\r\n            disabled: this.props.disabled,\r\n        };\r\n        return (\r\n            <Upload {...props} fileList={fileList}>\r\n                <Icon style={{fontSize: '25px', color: '#53B3E5'}} type=\"cloud-upload\"/>\r\n            </Upload>\r\n        );\r\n\t}\r\n}\r\n\r\nexport default PayUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/PayUpload.js","/*\r\n* 进度步骤条\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Row, Col, Popover, Icon, Empty, Breadcrumb, Progress, Badge, Affix, Form, message, Modal, Button, Input, notification} from 'antd';\r\n\r\nimport * as  mobx from 'mobx';\r\nimport moment from \"moment\";\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst openNotificationWithIcon = type => {\r\n    notification[type]({\r\n        message: '感谢所有人对此项目所付出的努力',\r\n        description:\r\n            '幸苦了，继续加油！',\r\n    });\r\n};\r\n\r\n\r\n\r\n@observer\r\nexport default class ProgressList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.store = this.props.store;\r\n        this.state = {\r\n            visible: false,\r\n            value: \"\"\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    // 定位\r\n    scrollToAnchor(params) {\r\n        const {id, key} = params;\r\n        const {scrollToAnchor} = this.props;\r\n        const {temId} = this.store;\r\n        if (temId==undefined) {  // 特殊处理项目、产品设计\r\n            scrollToAnchor(key);\r\n        } else {\r\n            scrollToAnchor(id);\r\n        }\r\n    }\r\n\r\n    showModal = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    handleOk = e => {\r\n        if (this.state.value==\"\"||this.state.value==null) {\r\n            message.warn(\"请填写关闭原因\")\r\n            return false;\r\n        }\r\n        const params = {\r\n            projectId: this.store.projectId,\r\n            text: this.state.value\r\n        }\r\n        this.store.closeProject(params).then((res)=>{\r\n            if (res) {\r\n                openNotificationWithIcon(\"success\");\r\n                this.onCancel();\r\n               // this.updateTree();\r\n                this.store.getStageTree();\r\n            } else {\r\n                message.error(\"关闭失败\")\r\n            }\r\n        });\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.setState({\r\n            visible: false,\r\n            value: \"\"\r\n        });\r\n    }\r\n\r\n    onChange = ({ target: { value } }) => {\r\n        this.setState({ value });\r\n    };\r\n\r\n    render() {\r\n        const {listData, isShow} = this.props;\r\n        const {state, closeReason} = this.store;\r\n        const content = (\r\n            <div>\r\n                <p>{state==1?\"圆满结束，感谢大家的所有付出！\":closeReason}</p>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div>\r\n                <Affix offsetTop={64}>\r\n                   <div className=\"w clearfix\"\r\n                         style={{backgroundColor: '#FFF',\r\n                             minHeight: '30px',\r\n                             padding: '40px 30px'}}>\r\n                        {listData.length>0?listData.map((item, index) => {\r\n                            return (\r\n                                <div\r\n                                    onClick={this.scrollToAnchor.bind(this, item)}\r\n                                    key={index}\r\n                                    style={{\r\n                                        width: '14%',\r\n                                        float: 'left',\r\n                                        display: 'inlineBlock',\r\n                                        position: 'relative'\r\n                                    }}>\r\n                                    {item.rate>=100?\r\n                                        <Badge className=\"worktile_progress_span_active\" status=\"processing\"/>:\r\n                                        <span className=\"worktile_progress_span\"/>}\r\n                                   <Progress\r\n                                        className=\"worktile_progress\"\r\n                                        style={{\r\n                                            display: 'inlineBlock',\r\n                                            paddingLeft: '9px'\r\n                                        }}\r\n                                        size=\"small\"\r\n                                        strokeLinecap=\"square\"\r\n                                        percent={item.rate==null?0:item.rate}/>\r\n                                    <div style={{textAlign: 'left', position: 'relative', left: '-20px'}}>\r\n                                        <p className={item.rate>0?\"worktile_progress_item_active\":\"worktile_progress_item\"}>{item.stageName}</p>\r\n                                        <p className=\"worktile_progress_name\">\r\n                                            {item.masters==null?\" \":item.masters.map(item=>item.userName).join(\"、\")}\r\n                                            {item.rate==100?<Icon type=\"check-circle\" style={{paddingLeft: '5px', fontSize: '16px', color: \"#108DE9\"}}/>:null}\r\n                                        </p>\r\n                                        <p className=\"worktile_progress_name\">{item.finishTime==0?(item.rate>0?<a style={{cursor:\"default\"}}>进行中</a>:null):(item.rate==100?moment(item.finishTime).format(\"YYYY-MM-DD HH:mm\"):<a style={{cursor:\"default\"}}>进行中</a>)}</p>\r\n                                    </div>\r\n                                </div>);\r\n                        }):<Empty description={false} />}\r\n                       <div\r\n                           style={{\r\n                               width: '2%',\r\n                               float: 'left',\r\n                               display: 'inlineBlock',\r\n                               position: 'relative'\r\n                           }}>\r\n                           <span className=\"worktile_progress_span\"/>\r\n                           <div style={{textAlign: 'left', position: 'relative', left: '-22px', top: '22px'}}>\r\n                               <p className={\"worktile_progress_item\"} style={{width: '80px'}}>全部完成</p>\r\n                           </div>\r\n                       </div>\r\n                       {!isShow?<Button\r\n                               onClick={this.showModal}\r\n                               className={state==0?\"fr btn_yellow\":\"hidden\"}\r\n                               type=\"primary\"\r\n                               shape=\"round\"\r\n                               ghost>\r\n                               关闭项目\r\n                           </Button>:null}\r\n                       <Popover content={content}>\r\n                           <Button className={state==1?\"fr\":\"hidden\"}\r\n                                   type=\"primary\"\r\n                                   shape=\"round\">正常结束</Button>\r\n                       </Popover>\r\n                       <Popover content={content}>\r\n                           <Button className={state==2?\"fr btn_yellow_active\":\"hidden\"}\r\n                                   type=\"primary\"\r\n                                   shape=\"round\">中途关闭</Button>\r\n                       </Popover>\r\n                    </div>\r\n                </Affix>\r\n                {/*关闭项目*/}\r\n                <Modal\r\n                    title=\"请填写项目中途关闭的原因\"\r\n                    visible={this.state.visible}\r\n                    onOk={this.handleOk}\r\n                    onCancel={this.onCancel}\r\n                >\r\n                      <TextArea\r\n                          value={this.state.value}\r\n                          onChange={this.onChange}\r\n                          placeholder=\"请填写原因\"\r\n                          autoSize={{ minRows: 3, maxRows: 5 }}\r\n                      />\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/ProgressList.js","/*\r\n* 通用树型结构渲染\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Card, Form, Row, Col, Button, message} from 'antd';\r\nimport * as  mobx from 'mobx';\r\n\r\nimport EditableTable from \"@/components/worktile/EditableTable\";\r\nimport MyUpload from \"@/components/worktile/MyUpload\";\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as utils from \"@/utils/utils\";\r\n\r\n@Form.create()\r\n@observer\r\nclass WortileCommon extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],   // 任务的数据源\r\n\t\t\tuserIds:[],\r\n            hidden: true,  // 面板折叠展开\r\n            currentTree: {}, // 存储当前组件树对象\r\n            pid: '',\r\n            projectId: \"\",\r\n            defaultTree: {}, // 记录当前树的默认数据\r\n        };\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n        /*\r\n        * 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\r\n        * */\r\n        if (nextProps.treeData!==this.props.treeData) {\r\n            /*根据该节点树型数控制改树结构*/\r\n            if (nextProps.treeData.children===null) { // 没有任务集合\r\n                this.setState({\r\n                    dataSource: []\r\n                });\r\n            } else {  // 包含任务集合\r\n                const dataSource = nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].children;\r\n                this.setState({\r\n                    dataSource,\r\n                    currentTree: Object.assign({}, nextProps.treeData),   // 更新同步\r\n                    pid: nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].id,\r\n                    projectId: nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].projectId,\r\n                    hidden: nextProps.disabled,\r\n                }, ()=>{\r\n                    // 更新记录当前树的附件数据\r\n                    let attc = nextProps.treeData.children.filter((item)=>item.treeType==\"attc\")[0]\r\n                    if (Object.keys(this.state.defaultTree).length>0) {\r\n                        // 更新tree\r\n                        let defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\r\n                        this.setState({\r\n                            defaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        /*\r\n        * 处理树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\r\n        * */\r\n        if (this.props.treeData) {\r\n            /*根据该节点树型数控制改树结构*/\r\n            if (this.props.treeData.children===null) { // 没有任务集合\r\n                this.setState({\r\n                    dataSource: []\r\n                });\r\n            } else {  // 包含子任务集合\r\n                const dataSource = this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].children;\r\n                this.setState({\r\n                    dataSource,\r\n                    currentTree: Object.assign({}, this.props.treeData),\r\n                    pid: this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].id,\r\n                    projectId: this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].projectId,\r\n                    hidden: this.props.disabled\r\n                })\r\n            }\r\n        }\r\n\t}\r\n\r\n\thandleSelChange = (val, e) => {\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item)=>{return {userId: item.props.value, userName: item.props.children}})\r\n\t\t} else {\r\n\t\t\tuserIds  = []\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tuserIds\r\n\t\t});\r\n\t\tconst {currentTree} = this.state;\r\n\t\t// 更新当前树\r\n        const currentData = Object.assign({}, currentTree, {masters:userIds});\r\n        this.setState({\r\n            currentTree: Object.assign({}, currentTree, currentData)\r\n        });\r\n    }\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {currentTree, defaultTree} = _this.state;\r\n\t\t// 校验1：任务名称必输 截至日期必输\r\n\t\tlet currentDataSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children:[];\r\n\t\tconst isSub = currentDataSource.filter((item)=>{return item.name==\"\"||item.name==null})\r\n\t\tif (isSub.length>0) {  // true\r\n\t\t\tmessage.warn(\"任务名称是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst isEndime = currentDataSource.filter((item)=>{return item.beginTime!=\"\"&&item.beginTime!=null&&(item.endTime==\"\"||item.endTime==null)})\r\n\t\tif (isEndime.length>0) {  // true\r\n\t\t\tmessage.warn(\"截至日期是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 校验2：主任务内容有没有变动，有则主负责人必输\r\n        // 记录之前的主任务数据\r\n        let defaultSource=defaultTree.children!=null&&defaultTree.children[0].children!=null?defaultTree.children[0].children.map(item=>{\r\n            return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n                \"beginTime\": item.beginTime,\r\n                \"endTime\": item.endTime,\r\n                \"rate\": item.rate\r\n            }\r\n        }):[];\r\n        let currentSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children.map(item=>{\r\n            return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n\t            \"beginTime\": item.beginTime,\r\n\t            \"endTime\": item.endTime,\r\n                \"rate\": item.rate\r\n            }\r\n        }):[];\r\n        const isChange = JSON.stringify(defaultSource)==JSON.stringify(currentSource); // 主任务是否变动\r\n        const isMasters = currentTree&&currentTree.masters==null?[]:currentTree.masters; //是否有主负责人\r\n        if (isMasters.length==0&&isChange==false) {\r\n            message.warn(\"主负责人是必填项\");\r\n            return false;\r\n        }\r\n        _this.props.form.validateFieldsAndScroll((err, values) => {\r\n            if (!err) {\r\n                _this.props.saveNodes(currentTree);\r\n                let comStates = JSON.parse(JSON.stringify(_this.store.comStates));\r\n                _this.store.comStates = Object.assign(comStates, {[_this.props.id]: true})\r\n            }\r\n        });\r\n\t}\r\n\r\n    // 更新该节点树 数据\r\n    saveData2 = (taskdata, key) => {\r\n        const {currentTree} = this.state;\r\n        let newData = [];\r\n        taskdata.forEach(item=>{\r\n            let {key, children, ...obj} = item;\r\n            newData.push(obj);\r\n        });\r\n        let currentTaskC = currentTree.children.filter(item=> item.treeType==='taskc')[0];\r\n        currentTaskC = Object.assign(currentTaskC,{\"children\":taskdata})\r\n        let stepChildren = currentTree.children;\r\n        const taskcIndex = stepChildren.findIndex(item=> {return item.treeType==='taskc'} )\r\n        stepChildren[taskcIndex] = currentTaskC;\r\n        this.setState({currentTree:Object.assign(currentTree, {\"children\":stepChildren})});\r\n    }\r\n\r\n    // 编辑\r\n    onChangeVis = () => {\r\n\t    let comStates = JSON.parse(JSON.stringify(this.store.comStates));\r\n        this.store.comStates = Object.assign(comStates, {[this.props.id]: false});\r\n\t    let comCount = JSON.parse(JSON.stringify(this.store.comCount));\r\n\t    this.store.comCount = Object.assign(comCount, {[this.props.id]: Number(this.props.count)+1});\r\n        // 点击编辑时记录当前树的默认数据\r\n        this.setState({\r\n            defaultTree: Object.assign({}, this.state.currentTree)\r\n        });\r\n    }\r\n\r\n    // 取消\r\n    onCanlc = ()=> {\r\n        this.props.form.resetFields();\r\n        this.onChangeVis();\r\n        let comStates = JSON.parse(JSON.stringify(this.store.comStates));\r\n        this.store.comStates = Object.assign(comStates, {[this.props.id]: true})\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\r\n    }\r\n\r\n    // 人员选择更新\r\n    updatePerson = (userIds)=>{\r\n        const {currentTree} = this.state;\r\n\t    // 更新当前树\r\n        const currentData = Object.assign({}, currentTree, {masters:userIds});\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n    }\r\n\r\n\trender() {\r\n\t\tlet _this = this;\r\n\t\tconst {getFieldDecorator} = _this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { hidden, currentTree } = _this.state;\r\n\t\tconst {state} = _this.store;\r\n\t\tconst {isShow, count}=this.props;\r\n\t\tlet currentDataSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children:[];\r\n        let attcObj = currentTree.children!=null&&currentTree.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\r\n        const attachments = attcObj.children!=null?attcObj.children.map((vitem) => {\r\n            return Object.assign({}, {\r\n                uid: vitem.id,\r\n                name: vitem.fileName,\r\n                status: 'done',\r\n                url: vitem.filePath,\r\n                fileId: vitem.fileId,\r\n                fileName:vitem.fileName,\r\n                filePath: vitem.filePath,\r\n                id: vitem.id\r\n            })\r\n        }) : [];\r\n        let expandedKeys = mobx.toJS(_this.store.expandedKeys)[this.props.id]!== undefined?mobx.toJS(_this.store.expandedKeys)[this.props.id]:[]\r\n        let isExp = expandedKeys.length>0?true:false;\r\n        return (\r\n\t\t\t<Card bordered style={{width: '100%'}} className=\"mt20\">\r\n\t\t\t\t<h3 id={this.props.id} className=\"kanban_title mb20\">{_this.props.treeData.stageName}</h3>\r\n                <span className=\"worktile_progress_add\">\r\n                    {hidden ?\r\n\t                    <Button className={state == 2 ? \"hidden\" : \"\"}\r\n\t                            disabled={isShow}\r\n\t                            type=\"link\"\r\n\t                            onClick={this.onChangeVis}>{count==1? \"创建\" : \"编辑\"}</Button> :\r\n\t                    <div>\r\n\t\t                    <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                    <Button disabled={isExp} type=\"link\" onClick={this.handleSubmit}>保存</Button>\r\n\t                    </div>}\r\n                </span>\r\n                <Form className={count==1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n                            <Form.Item label=\"主负责人\" className=\"w\">\r\n                                {getFieldDecorator('masters', {\r\n                                    initialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\r\n                                    rules: [{required: false, message: '请选择主负责人'}],\r\n                                })(\r\n                                    <PersonAddIcon\r\n                                        data={currentTree&&currentTree.masters==null?[]:currentTree.masters}\r\n                                        updatePerson={this.updatePerson}\r\n                                        disabled={hidden}\r\n                                    />\r\n                                )}\r\n                            </Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n                {/*任务*/}\r\n\t\t\t\t{count==1?null:\r\n                <EditableTable\r\n                    id={this.props.id}\r\n                    dataSource={currentDataSource}\r\n                    saveData={this.saveData2}\r\n                    projectId={this.state.projectId}\r\n                    pid={this.state.pid}\r\n                    disabled={hidden}\r\n                    store={this.store}\r\n                />}\r\n\t\t\t\t{count==1?null:\r\n                <div className={hidden?\"mt15\":\"myupload_pos\"}>\r\n                    <MyUpload\r\n                        saveAttachment={this.props.saveAttachment}\r\n                        delNode={this.props.delNode}\r\n                        fileList={attachments}\r\n                        pid={attcObj.id}\r\n                        projectId={attcObj.projectId}\r\n                        disabled={hidden}\r\n                        ossData={this.props.oss}\r\n                    />\r\n                </div>}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default WortileCommon;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/WortileCommon.js","/*\r\n* 展厅流程项目评估组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Input, InputNumber, Form, Row, Col, Card, Button, message, Checkbox, Tabs} from 'antd';\r\nimport MyUpload from '@/components/worktile/MyUpload';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as utils from \"@/utils/utils\";\r\n\r\nconst {TabPane} = Tabs;\r\nconst {TextArea} = Input;\r\n@Form.create()\r\n@observer\r\nexport default class Appraisal extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tfields: {\r\n\t\t\t\t\"id\": '',\r\n\t\t\t\t\"pid\": '',\r\n\t\t\t\t\"xmgs\": null,\r\n\t\t\t\t\"xmys\": null,\r\n\t\t\t\t\"xmbj\": null,\r\n\t\t\t\t\"cgrq\": null,\r\n\t\t\t\t\"ztmd\": null,\r\n\t\t\t\t\"jszq\": null,\r\n\t\t\t\t\"sjzd\": null,\r\n\t\t\t\t\"scyq\": null,\r\n\t\t\t\t\"zxyq\": null,\r\n\t\t\t\t\"dgyq\": null,\r\n\t\t\t\t\"sgclyq\": null,\r\n\t\t\t\t\"jbtsdln\": null,\r\n\t\t\t\t\"zhhsddyy\": null,\r\n\t\t\t\t\"gsxyalalck\": null,\r\n\t\t\t\t\"bcsm\": null\r\n\t\t\t},\r\n\t\t\thidden: true,  // 面板折叠展开\r\n\t\t\tkey: \"1\",\r\n\t\t\tcurrentTree:{}\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {itemObj} = nextProps;\r\n\t\tif (Object.keys(itemObj).length > 0) {\r\n\t\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"normal\"\r\n\t\t\t})[0]; // 字段\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentTree: Object.assign({}, projectinfo),\r\n\t\t\t\tfields: {\r\n\t\t\t\t\t\"id\": projectinfo.id,\r\n\t\t\t\t\t\"pid\": projectinfo.pid,\r\n\t\t\t\t\t\"xmgs\": projectinfo.jbzl[\"xmgs\"],\r\n\t\t\t\t\t\"xmys\": projectinfo.jbzl[\"xmys\"],\r\n\t\t\t\t\t\"xmbj\": projectinfo.jbzl[\"xmbj\"],\r\n\t\t\t\t\t\"cgrq\": projectinfo.jbzl[\"cgrq\"],\r\n\t\t\t\t\t\"ztmd\": projectinfo.jbzl[\"ztmd\"],\r\n\t\t\t\t\t\"jszq\": projectinfo.jbzl[\"jszq\"],\r\n\t\t\t\t\t\"sjzd\": projectinfo.srzl[\"sjzd\"],\r\n\t\t\t\t\t\"scyq\": projectinfo.srzl[\"scyq\"],\r\n\t\t\t\t\t\"zxyq\": projectinfo.srzl[\"zxyq\"],\r\n\t\t\t\t\t\"dgyq\": projectinfo.srzl[\"dgyq\"],\r\n\t\t\t\t\t\"sgclyq\": projectinfo.srzl[\"sgclyq\"],\r\n\t\t\t\t\t\"jbtsdln\": projectinfo.srzl[\"jbtsdln\"],\r\n\t\t\t\t\t\"zhhsddyy\": projectinfo.srzl[\"zhhsddyy\"],\r\n\t\t\t\t\t\"gsxyalalck\": projectinfo.fzzl[\"gsxyalalck\"],\r\n\t\t\t\t\t\"bcsm\": projectinfo.fzzl[\"bcsm\"],\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {itemObj, disabled} = this.props;\r\n\t\tif (Object.keys(itemObj).length > 0) {\r\n\t\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"normal\"\r\n\t\t\t})[0]; // 字段\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentTree: Object.assign({}, projectinfo),\r\n\t\t\t\tfields: {\r\n\t\t\t\t\t\"id\": projectinfo.id,\r\n\t\t\t\t\t\"pid\": projectinfo.pid,\r\n\t\t\t\t\t\"xmgs\": projectinfo.jbzl[\"xmgs\"],\r\n\t\t\t\t\t\"xmys\": projectinfo.jbzl[\"xmys\"],\r\n\t\t\t\t\t\"xmbj\": projectinfo.jbzl[\"xmbj\"],\r\n\t\t\t\t\t\"cgrq\": projectinfo.jbzl[\"cgrq\"],\r\n\t\t\t\t\t\"ztmd\": projectinfo.jbzl[\"ztmd\"],\r\n\t\t\t\t\t\"jszq\": projectinfo.jbzl[\"jszq\"],\r\n\t\t\t\t\t\"sjzd\": projectinfo.srzl[\"sjzd\"],\r\n\t\t\t\t\t\"scyq\": projectinfo.srzl[\"scyq\"],\r\n\t\t\t\t\t\"zxyq\": projectinfo.srzl[\"zxyq\"],\r\n\t\t\t\t\t\"dgyq\": projectinfo.srzl[\"dgyq\"],\r\n\t\t\t\t\t\"sgclyq\": projectinfo.srzl[\"sgclyq\"],\r\n\t\t\t\t\t\"jbtsdln\": projectinfo.srzl[\"jbtsdln\"],\r\n\t\t\t\t\t\"zhhsddyy\": projectinfo.srzl[\"zhhsddyy\"],\r\n\t\t\t\t\t\"gsxyalalck\": projectinfo.fzzl[\"gsxyalalck\"],\r\n\t\t\t\t\t\"bcsm\": projectinfo.fzzl[\"bcsm\"],\r\n\t\t\t\t},\r\n\t\t\t\thidden: disabled\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.props.onAppRef(this);\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {projectId} = _this.store;\r\n\t\t_this.props.form.validateFields((err, values) => {\r\n\t\t\t//console.log(values, err, '参数')\r\n\t\t\tif (!err) {\r\n\t\t\t\tlet currentTree = JSON.parse(JSON.stringify(_this.state.currentTree));\r\n\t\t\t\tconst {fields}=_this.state;\r\n\t\t\t\tconst params = Object.assign(currentTree, {\r\n\t\t\t\t\t\"projectId\": projectId,\r\n\t\t\t\t\t\"jbzl\": {\r\n\t\t\t\t\t\t\"xmgs\": values[\"xmgs\"],\r\n\t\t\t\t\t\t\"xmys\": values[\"xmys\"],\r\n\t\t\t\t\t\t\"xmbj\": values[\"xmbj\"],\r\n\t\t\t\t\t\t\"cgrq\": values[\"cgrq\"],\r\n\t\t\t\t\t\t\"ztmd\": values[\"ztmd\"],\r\n\t\t\t\t\t\t\"jszq\": values[\"jszq\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"srzl\": {\r\n\t\t\t\t\t\t\"sjzd\": values[\"sjzd\"],\r\n\t\t\t\t\t\t\"scyq\": values[\"scyq\"],\r\n\t\t\t\t\t\t\"zxyq\": values[\"zxyq\"],\r\n\t\t\t\t\t\t\"dgyq\": values[\"dgyq\"],\r\n\t\t\t\t\t\t\"sgclyq\": values[\"sgclyq\"],\r\n\t\t\t\t\t\t\"jbtsdln\": values[\"jbtsdln\"],\r\n\t\t\t\t\t\t\"zhhsddyy\": fields[\"zhhsddyy\"]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"fzzl\": {\r\n\t\t\t\t\t\t\"gsxyalalck\": values[\"gsxyalalck\"],\r\n\t\t\t\t\t\t\"bcsm\": values[\"bcsm\"],\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t_this.props.saveNodes(params);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\thidden: !_this.state.hidden,\r\n\t\t\t\t\tkey: '1'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmessage.warn(\"请填写基本资料中的必填项\")\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (type, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {\r\n\t\t\t\t[type]: userIds\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t});\r\n\t\tthis.props.updateCount('pgCount', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden\r\n\t\t});\r\n\t}\r\n\r\n\tcallback = (key) => {\r\n\t\tthis.setState({\r\n\t\t\tkey\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (type, checkedValues) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {[type]: checkedValues})\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdateMaster= (userIds)=>{\r\n\t\tconst {currentTree} = this.state;\r\n\t\t// 更新当前树\r\n\t\tconst currentData = Object.assign({}, currentTree, {masters:userIds});\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fields, hidden, key, currentTree} = this.state;\r\n\t\tconst {state} = this.store;\r\n\t\tconst {count, isShow, ossData, saveAttachment, delNode, itemObj} = this.props;\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 18},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayout2 = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tlet attcObj = currentTree.children != null && currentTree.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'attc'&&item.name==\"场地CAD图纸\"\r\n\t\t})[0];  // 场地CAD附件对象\r\n\t\tlet attcObj2 = currentTree.children != null && currentTree.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'attc'&&item.name==\"公司心仪案例/案例参考\"\r\n\t\t})[0];  // 案例附件对象\r\n\t\tconst attachments =attcObj.children != null ? attcObj.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\tconst attachments2 = attcObj2.children != null ? attcObj2.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\tconst plainOptions = ['智慧工地', 'BIM展示', '智慧劳务', '智慧物料', 'VR体验', '互动多媒体'];\r\n\t\treturn (\r\n\t\t\t<Card bordered className=\"pr mt20\" style={{width: '100%'}}>\r\n\t\t\t\t<h3 id={itemObj.id} className=\"kanban_title mb20\">项目评估</h3>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                     {hidden ?\r\n\t                     <Button className={state == 2 ? \"hidden\" : \"\"} type=\"link\"\r\n\t                             disabled={isShow}\r\n\t                             onClick={this.onChangeVis}>{count == 1 ? \"创建\" : \"编辑\"}</Button> :\r\n\t                     <div>\r\n\t\t                     <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                     <span onClick={this.handleSubmit}>保存</span>\r\n\t                     </div>}\r\n                </span>\r\n\t\t\t\t<Form className={count==1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout2}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择主负责人'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\tdata={currentTree&&currentTree.masters==null?[]:currentTree.masters}\r\n\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updateMaster}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n\t\t\t\t<Tabs className={count == 1 ? \"hidden\" : \"item_tabs\"} activeKey={key} onChange={this.callback}>\r\n\t\t\t\t\t<TabPane tab=\"基本资料\" key=\"1\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin: \"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目公司\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('xmgs', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.xmgs || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入项目公司'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目预算(万元)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('xmys', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.xmys || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入项目预算'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" disabled={hidden} className=\"w\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"项目背景\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('xmbj', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.xmbj || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入项目背景'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"参观人群\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('cgrq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.cgrq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入参观人群'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"展厅目的\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('ztmd', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.ztmd || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入展厅目的'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"建设周期\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('jszq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.jszq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建设周期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane tab=\"深入资料\" key=\"2\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin: \"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"设计重点(亮点)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('sjzd', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.sjzd || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入设计重点'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"色彩要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('scyq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.scyq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入色彩要求'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"造型要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('zxyq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.zxyq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目背景'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"灯光要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('dgyq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.dgyq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入参观人群'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"施工材料要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('sgclyq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.sgclyq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入施工材料要求'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"具备特色的理念\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('jbtsdln', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.jbtsdln || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建设周期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"智慧化手段的应用\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 3},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\t\t\t\t\t//disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={hidden?\"checkbox_dis\":\"\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={hidden?null:this.onChange.bind(this, 'zhhsddyy')}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={fields.zhhsddyy==null?[]:fields.zhhsddyy}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={plainOptions}/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane tab=\"辅助资料\" key=\"3\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin: \"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"公司心仪案例/案例参考\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('gsxyalalck', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.gsxyalalck || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t\t           offset: 3\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<div className={\"pr\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\t\t\t\t\t\t\tfileList={attachments2}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\tpid={attcObj2.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId={attcObj2.projectId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft: '35px',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop: '-5px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#999'\r\n\t\t\t\t\t\t\t\t\t\t\t}}>请上传参考案例附件</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"补充说明\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('bcsm', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.bcsm || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t</Tabs>\r\n\t\t\t\t<Row className={key == \"3\"||count == 1 ? \"hidden\" : \"\"}>\r\n\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t<Form.Item label=\"场地CAD图纸\"\r\n\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\tpid={attcObj.id}\r\n\t\t\t\t\t\t\t\tprojectId={attcObj.projectId}\r\n\t\t\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/Appraisal.js","/*\r\n* 综合办公流程项目评估组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Input, InputNumber, Form, Row, Col, Card, Button, Icon, Checkbox, Tabs, Radio, DatePicker} from 'antd';\r\nimport MyUpload from '@/components/worktile/MyUpload';\r\nimport moment from 'moment';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as utils from \"@/utils/utils\";\r\nconst {TabPane} = Tabs;\r\nconst {TextArea} = Input;\r\n\r\n@Form.create()\r\n@observer\r\nexport default class Office extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tglry: [{\"name\": \"办公用房\", \"checked\": false, \"values\": []}, {\r\n\t\t\t\t\"name\": \"宿舍用房\",\r\n\t\t\t\t\"checked\": false,\r\n\t\t\t\t\"values\": []\r\n\t\t\t}, {\"name\": \"宿舍用房(含UB)\", \"checked\": false, \"values\": []}, {\r\n\t\t\t\t\"name\": \"食堂\",\r\n\t\t\t\t\"checked\": false,\r\n\t\t\t\t\"values\": []\r\n\t\t\t}, {\"name\": \"会议室\", \"checked\": false, \"values\": []}, {\r\n\t\t\t\t\"name\": \"智慧展厅\",\r\n\t\t\t\t\"checked\": false,\r\n\t\t\t\t\"values\": []\r\n\t\t\t}, {\"name\": \"试验室\", \"checked\": false, \"values\": []}, {\"name\": \"辅助用房\", \"checked\": false, \"values\": []}],\r\n\t\t\tlwry: [{\"name\": \"办公用房\", \"checked\": false, \"values\": []}, {\"name\": \"宿舍用房\", \"checked\": false, \"values\": []}, {\r\n\t\t\t\t\"name\": \"食堂\", \"checked\": false,\r\n\t\t\t\t\"values\": []\r\n\t\t\t}, {\"name\": \"会议室\", \"checked\": false, \"values\": []}, {\"name\": \"展厅\", \"checked\": false, \"values\": []}, {\r\n\t\t\t\t\"name\": \"淋浴间\", \"checked\": false,\r\n\t\t\t\t\"values\": []\r\n\t\t\t}, {\"name\": \"洗衣房\", \"checked\": false, \"values\": []}, {\"name\": \"辅助用房\", \"checked\": false, \"values\": []}],\r\n\t\t\tfields: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"cqwd\": [],\r\n\t\t\t\t\"zhhsddyy\": null,\r\n\t\t\t\t\"bghjdssd\": null,\r\n\t\t\t\t\"jbtedln\": null,\r\n\t\t\t\t\"jzmgsxym\": null,\r\n\t\t\t\t\"jbdfts\": null,\r\n\t\t\t\t\"bimxxhsdyq\": null,\r\n\t\t\t\t\"gmxqdg\": null,\r\n\t\t\t\t\"dlqk\": null,\r\n\t\t\t\t\"rksd\": null,\r\n\t\t\t\t\"zwhj\": null,\r\n\t\t\t\t\"ljjcsj\": 0,\r\n\t\t\t\t\"gsxyalalcg\": null\r\n\t\t\t},\r\n\t\t\thidden: true,  // 面板折叠展开\r\n\t\t\tkey: \"1\",\r\n\t\t\tcurrentTree: {}\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {itemObj} = nextProps;\r\n\t\tif (Object.keys(itemObj).length > 0) {\r\n\t\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"normal\"\r\n\t\t\t})[0]; // 字段\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentTree: Object.assign({}, projectinfo),\r\n\t\t\t\tfields: {\r\n\t\t\t\t\t\"id\": projectinfo.id,\r\n\t\t\t\t\t\"pid\": projectinfo.pid,\r\n\t\t\t\t\t\"cqwd\": projectinfo.jbzl[\"cqwd\"],\r\n\t\t\t\t\t\"zhhsddyy\": projectinfo.srzl[\"zhhsddyy\"],\r\n\t\t\t\t\t\"bghjdssd\": projectinfo.srzl[\"bghjdssd\"],\r\n\t\t\t\t\t\"jbtedln\": projectinfo.srzl[\"jbtedln\"],\r\n\t\t\t\t\t\"jzmgsxym\": projectinfo.srzl[\"jzmgsxym\"],\r\n\t\t\t\t\t\"jbdfts\": projectinfo.srzl[\"jbdfts\"],\r\n\t\t\t\t\t\"bimxxhsdyq\": projectinfo.srzl[\"bimxxhsdyq\"],\r\n\t\t\t\t\t\"gmxqdg\": projectinfo.srzl[\"gmxqdg\"],\r\n\t\t\t\t\t\"dlqk\": projectinfo.fzzl[\"dlqk\"],\r\n\t\t\t\t\t\"rksd\": projectinfo.fzzl[\"rksd\"],\r\n\t\t\t\t\t\"zwhj\": projectinfo.fzzl[\"zwhj\"],\r\n\t\t\t\t\t\"ljjcsj\": projectinfo.fzzl[\"ljjcsj\"],\r\n\t\t\t\t\t\"gsxyalalcg\": projectinfo.fzzl[\"gsxyalalcg\"],\r\n\t\t\t\t},\r\n\t\t\t\tglry: projectinfo.jbzl[\"glry\"].map((item) => {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\t\t\"values\": item.values == null ? [] : item.values,\r\n\t\t\t\t\t\t\"checked\": item.values != null && Array.isArray(item.values) && item.values.length > 0 ? true : false\r\n\t\t\t\t\t})\r\n\t\t\t\t}),\r\n\t\t\t\tlwry: projectinfo.jbzl[\"lwry\"].map((item) => {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\t\t\"values\": item.values == null ? [] : item.values,\r\n\t\t\t\t\t\t\"checked\": item.values != null && Array.isArray(item.values) && item.values.length > 0 ? true : false\r\n\t\t\t\t\t})\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {itemObj, disabled} = this.props;\r\n\t\tif (Object.keys(itemObj).length > 0) {\r\n\t\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\t\treturn item.treeType == \"normal\"\r\n\t\t\t})[0]; // 字段\r\n\t\t\t//console.log(projectinfo, 'projectinfo')\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentTree: Object.assign({}, projectinfo),\r\n\t\t\t\tfields: {\r\n\t\t\t\t\t\"id\": projectinfo.id,\r\n\t\t\t\t\t\"pid\": projectinfo.pid,\r\n\t\t\t\t\t\"cqwd\": projectinfo.jbzl[\"cqwd\"],\r\n\t\t\t\t\t\"zhhsddyy\": projectinfo.srzl[\"zhhsddyy\"],\r\n\t\t\t\t\t\"bghjdssd\": projectinfo.srzl[\"bghjdssd\"],\r\n\t\t\t\t\t\"jbtedln\": projectinfo.srzl[\"jbtedln\"],\r\n\t\t\t\t\t\"jzmgsxym\": projectinfo.srzl[\"jzmgsxym\"],\r\n\t\t\t\t\t\"jbdfts\": projectinfo.srzl[\"jbdfts\"],\r\n\t\t\t\t\t\"bimxxhsdyq\": projectinfo.srzl[\"bimxxhsdyq\"],\r\n\t\t\t\t\t\"gmxqdg\": projectinfo.srzl[\"gmxqdg\"],\r\n\t\t\t\t\t\"dlqk\": projectinfo.fzzl[\"dlqk\"],\r\n\t\t\t\t\t\"rksd\": projectinfo.fzzl[\"rksd\"],\r\n\t\t\t\t\t\"zwhj\": projectinfo.fzzl[\"zwhj\"],\r\n\t\t\t\t\t\"ljjcsj\": projectinfo.fzzl[\"ljjcsj\"],\r\n\t\t\t\t\t\"gsxyalalcg\": projectinfo.fzzl[\"gsxyalalcg\"],\r\n\t\t\t\t},\r\n\t\t\t\thidden: disabled,\r\n\t\t\t\tglry: projectinfo.jbzl[\"glry\"].map((item) => {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\t\t\"values\": item.values == null ? [] : item.values,\r\n\t\t\t\t\t\t\"checked\": false\r\n\t\t\t\t\t})\r\n\t\t\t\t}),\r\n\t\t\t\tlwry: projectinfo.jbzl[\"lwry\"].map((item) => {\r\n\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\t\t\"values\": item.values == null ? [] : item.values,\r\n\t\t\t\t\t\t\"checked\": false\r\n\t\t\t\t\t})\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.props.onOfficeRef(this);\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {projectId} = _this.store;\r\n\t\t_this.props.form.validateFields((err, values) => {\r\n\t\t\tlet fields = JSON.parse(JSON.stringify(_this.state.fields));\r\n\t\t\tlet glry = JSON.parse(JSON.stringify(_this.state.glry));\r\n\t\t\tlet lwry = JSON.parse(JSON.stringify(_this.state.lwry));\r\n\t\t\tif (!err) {\r\n\t\t\t\tlet currentTree = JSON.parse(JSON.stringify(_this.state.currentTree));\r\n\t\t\t\tconst glRY = glry.map(item => {\r\n\t\t\t\t\treturn Object.assign({}, {name: item.name, values: item.values})\r\n\t\t\t\t})\r\n\t\t\t\tconst lwRY = lwry.map(item => {\r\n\t\t\t\t\treturn Object.assign({}, {name: item.name, values: item.values})\r\n\t\t\t\t})\r\n\t\t\t\tconst params = Object.assign(currentTree, {\r\n\t\t\t\t\t\"projectId\": projectId,\r\n\t\t\t\t\t\"jbzl\": {\r\n\t\t\t\t\t\t\"glry\": Object.assign([], glRY),\r\n\t\t\t\t\t\t\"lwry\": Object.assign([], lwRY),\r\n\t\t\t\t\t\t\"cqwd\": fields.cqwd\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"srzl\": {\r\n\t\t\t\t\t\t\"zhhsddyy\": values.zhhsddyy,\r\n\t\t\t\t\t\t\"bghjdssd\": values.bghjdssd,\r\n\t\t\t\t\t\t\"jbtedln\": values.jbtedln,\r\n\t\t\t\t\t\t\"jzmgsxym\": values.jzmgsxym,\r\n\t\t\t\t\t\t\"jbdfts\": values.jbdfts,\r\n\t\t\t\t\t\t\"bimxxhsdyq\": values.bimxxhsdyq,\r\n\t\t\t\t\t\t\"gmxqdg\": values.gmxqdg,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"fzzl\": {\r\n\t\t\t\t\t\t\"dlqk\": values.dlqk,\r\n\t\t\t\t\t\t\"rksd\": values.rksd,\r\n\t\t\t\t\t\t\"zwhj\": values.zwhj,\r\n\t\t\t\t\t\t\"ljjcsj\": values['ljjcsj'] == null || values['ljjcsj'] == \"\" ? 0 : moment(values['ljjcsj'].format('YYYY-MM-DD'), 'YYYY-MM-DD').valueOf(),\r\n\t\t\t\t\t\t\"gsxyalalcg\": values.gsxyalalcg,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t_this.props.saveNodes(params);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\thidden: !_this.state.hidden,\r\n\t\t\t\t\tkey: '1'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (type, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {\r\n\t\t\t\t[type]: userIds\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t});\r\n\t\tthis.props.updateCount('pgCount', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden\r\n\t\t});\r\n\t}\r\n\r\n\tcallback = (key) => {\r\n\t\tthis.setState({\r\n\t\t\tkey\r\n\t\t});\r\n\t}\r\n\r\n\tcheckChange = (type, name, e) => {\r\n\t\tlet glry = JSON.parse(JSON.stringify(this.state[type]));\r\n\t\tconst index = glry.findIndex((item) => item.name === name);\r\n\t\tconst {checked} = e.target;\r\n\t\tglry[index].checked = checked;\r\n\t\tif (checked == false) {\r\n\t\t\tglry[index].values = Object.assign([]);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], glry)\r\n\t\t});\r\n\t}\r\n\r\n\tonNameChange = (type, name, checkedValues) => {\r\n\t\tlet glry = JSON.parse(JSON.stringify(this.state[type]));\r\n\t\tconst index = glry.findIndex((item) => item.name === name);\r\n\t\tglry[index].values = Object.assign([], checkedValues);\r\n\t\tthis.setState({\r\n\t\t\t[type]: Object.assign([], glry)\r\n\t\t}, () => {\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tonChange = (type, checkedValues) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {[type]: checkedValues})\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdateMaster= (userIds)=>{\r\n\t\tconst {currentTree} = this.state;\r\n\t\t// 更新当前树\r\n\t\tconst currentData = Object.assign({}, currentTree, {masters:userIds});\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fields, hidden, key, glry, lwry, currentTree} = this.state;\r\n\t\tconst {state} = this.store;\r\n\t\tconst {count, isShow, ossData, saveAttachment, delNode, itemObj} = this.props;\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 7},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItemLayout2 = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst plainOptions = ['箱房', '板房', '型钢', '其他'];\r\n\t\tconst Coptions = ['大门', '围墙', '其他'];\r\n\t\tlet attcObj = currentTree.children != null && currentTree.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'attc' && item.name == \"现场施工规划图\"\r\n\t\t})[0];  // 现场施工规划图\r\n\t\tlet attcObj2 = currentTree.children != null && currentTree.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'attc' && item.name == \"房屋布置图纸\"\r\n\t\t})[0];  // 房屋布置图纸\r\n\t\tlet attcObj3 = currentTree.children != null && currentTree.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'attc' && item.name == \"公司心仪案例/案例参考\"\r\n\t\t})[0];  // 案例附件对象\r\n\t\tconst attachments = attcObj.children != null ? attcObj.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\tconst attachments2 = attcObj2.children != null ? attcObj2.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\tconst attachments3 = attcObj3.children != null ? attcObj3.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\treturn (\r\n\t\t\t<Card bordered className=\"pr mt20\" style={{width: '100%'}}>\r\n\t\t\t\t<h3 id={itemObj.id} className=\"kanban_title mb20\">项目评估</h3>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                     {hidden ?\r\n\t                     <Button className={state == 2 ? \"hidden\" : \"\"} type=\"link\"\r\n\t                             disabled={isShow}\r\n\t                             onClick={this.onChangeVis}>{count == 1 ? \"创建\" : \"编辑\"}</Button> :\r\n\t                     <div>\r\n\t\t                     <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                     <span onClick={this.handleSubmit}>保存</span>\r\n\t                     </div>}\r\n                </span>\r\n\t\t\t\t<Form className={count==1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout2}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择主负责人'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\tdata={currentTree&&currentTree.masters==null?[]:currentTree.masters}\r\n\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updateMaster}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n\t\t\t\t<Tabs className={count == 1 ? \"hidden\" : \"item_tabs\"} activeKey={key} onChange={this.callback}>\r\n\t\t\t\t\t<TabPane tab=\"基本资料\" key=\"1\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin: \"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t\tsm: {span: 6},\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t\tsm: {span: 12},\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tlabelAlign={\"left\"}\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"设计范围及箱式房使用范围\" className=\"w\"></Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"管理人员\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t{glry.length > 0 && glry.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (<div key={'glry' + index} style={{paddingLeft: '10px'}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={hidden?\"checkbox_dis lwry_checkbox\":\"lwry_checkbox\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: '118px'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={item.checked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={hidden?null:this.checkChange.bind(this, 'glry', item.name)}>{item.name}</Checkbox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={item.checked ? (hidden?\"checkbox_dis\":\"\") : \"hidden\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.values}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={hidden?null:this.onNameChange.bind(this, 'glry', item.name)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={plainOptions}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"劳务人员\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{lwry.length > 0 && lwry.map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (<div key={'lwry' + index} style={{paddingLeft: '10px'}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={hidden?\"checkbox_dis lwry_checkbox\":\"lwry_checkbox\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{width: '95px'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={item.checked}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={hidden?null:this.checkChange.bind(this, 'lwry', item.name)}>{item.name}</Checkbox>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={item.checked ? (hidden?\"checkbox_dis\":\"\") : \"hidden\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.values}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={hidden?null:this.onNameChange.bind(this, 'lwry', item.name)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toptions={plainOptions}/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"厂区围挡\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox.Group\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={hidden?\"checkbox_dis\":\"\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={hidden?null:this.onChange.bind(this, 'cqwd')}\r\n\t\t\t\t\t\t\t\t\t\t\t//disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={fields.cqwd}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={Coptions}/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane tab=\"深入资料\" key=\"2\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin: \"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"智慧化手段的应用\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('zhhsddyy', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.zhhsddyy || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入设计重点'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"办公环境的舒适度\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('bghjdssd', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.bghjdssd || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入色彩要求'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"具备特色的理念\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('jbtedln', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.jbtedln || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目背景'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"建筑美观赏心悦目\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('jzmgsxym', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.jzmgsxym || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入参观人群'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"具备地方特色\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('jbdfts', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.jbdfts || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入施工材料要求'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"BIM信息化手段要求\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('bimxxhsdyq', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.bimxxhsdyq || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建设周期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={12} lg={12} xl={12}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"观摩需求度高\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('gmxqdg', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.gmxqdg || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入建设周期'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t\t<TabPane tab=\"辅助资料\" key=\"3\">\r\n\t\t\t\t\t\t<Form layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]} style={{margin: \"0\"}}>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\t\tlabelCol={{\r\n\t\t\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t\tsm: {span: 3},\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t\txs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t\tsm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"项目周边情况说明\" className=\"w\"></Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={8} lg={8} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"道路情况\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('dlqk', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.dlqk || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={8} lg={8} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"入口设定\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('rksd', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.rksd || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={8} lg={8} xl={8}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"周围环境\" className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('zwhj', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.zwhj || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden} placeholder=\"请输入\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"现场施工规划图\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\tpid={attcObj.id}\r\n\t\t\t\t\t\t\t\t\t\t\tprojectId={attcObj.projectId}\r\n\t\t\t\t\t\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"房屋布置图纸\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\t\t\t\t\t\tfileList={attachments2}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\tpid={attcObj2.id}\r\n\t\t\t\t\t\t\t\t\t\t\tprojectId={attcObj2.projectId}\r\n\t\t\t\t\t\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"临建进场时间\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 16},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('ljjcsj', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.ljjcsj == null || fields.ljjcsj == 0 ? \"\" : moment(moment(fields.ljjcsj).format('YYYY-MM-DD'), \"YYYY-MM-DD\"),\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请上传场地CAD图纸'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"请选择\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"公司心仪案例/案例参考\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 4},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 16},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t{getFieldDecorator('gsxyalalcg', {\r\n\t\t\t\t\t\t\t\t\t\t\tinitialValue: fields.gsxyalalcg || \"\",\r\n\t\t\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请上传场地CAD图纸'}],\r\n\t\t\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t\t\t<TextArea rows={4} disabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t          placeholder=\"请输入参考点：如建筑（设计风格）/设计理念/布局形式/最终成果······\"/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col xs={24} sm={24} md={24} lg={24} xl={24}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"\"\r\n\t\t\t\t\t\t\t\t\t           labelCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 3},\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           wrapperCol={{\r\n\t\t\t\t\t\t\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t\t\t\t\t\t\t           sm: {span: 20},\r\n\t\t\t\t\t\t\t\t\t\t           offset: 2\r\n\t\t\t\t\t\t\t\t\t           }}\r\n\t\t\t\t\t\t\t\t\t           className=\"w\">\r\n\t\t\t\t\t\t\t\t\t\t<div className={\"pr\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\t\t\t\t\t\t\tfileList={attachments3}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\t\t\tpid={attcObj3.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId={attcObj3.projectId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft: '35px',\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop: '-5px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '12px',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#999'\r\n\t\t\t\t\t\t\t\t\t\t\t}}>请上传参考案例附件</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</TabPane>\r\n\t\t\t\t</Tabs>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/Office.js","/*\r\n* 方案设计组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Row, Col, Card, Button, message, Menu, Dropdown, Icon, Popconfirm, notification, Modal} from 'antd';\r\n\r\nimport StepInfo from \"./StepInfo\";\r\nimport * as utils from \"@/utils/utils\";\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as  mobx from 'mobx';\r\nconst openNotificationWithIcon = type => {\r\n\tnotification[type]({\r\n\t\tmessage: '当前已是该阶段，请选择其他的阶段',\r\n\t\tdescription:\r\n\t\t\t'',\r\n\t\tplacement: 'topLeft'\r\n\t});\r\n};\r\n@Form.create()\r\n@observer\r\nexport default class ProjectDesign extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store= this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tuserIds: [],\r\n            current: 0,\r\n            stepObj1:{}, //初步设计\r\n            stepObj2:{}, //汇报确定\r\n            stepObj3:{}, //关联任务\r\n            stepObj4:{}, //深化设计\r\n            stepObj5:{}, //图纸确认\r\n            proDesignData:this.props.proDesign,\r\n            hidden:true,\r\n            defaultTree: {}, // 默认数据\r\n\t\t\tdeCount: 0, // 记录保存状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\t/*\r\n\t\t* 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\r\n\t\t* */\r\n\t\tif (nextProps.proDesign!==this.props.proDesign) {\r\n            /*根据该节点树型数控制改树结构*/\r\n            this.setState({proDesignData:nextProps.proDesign});\r\n            if(Object.keys(nextProps.proDesign).length!==0&&typeof(nextProps.proDesign.children)!==\"undefined\"){\r\n                this.setState({\r\n                    stepObj1: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"初步设计\"))[0]),\r\n                    stepObj2: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"汇报确定\"))[0]),\r\n                    stepObj3: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"关联任务\"))[0]),\r\n                    stepObj4: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"深化设计\"))[0]),\r\n                    stepObj5: Object.assign({},nextProps.proDesign.children.filter((item=>item.stepName==\"图纸确认\"))[0]),\r\n                })\r\n            }\r\n\t\t}\r\n    }\r\n\r\n    componentDidMount() {\r\n\t\t/*\r\n\t\t* 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\r\n\t\t* */\r\n\t\tif (this.props.proDesign) {\r\n            /*根据该节点树型数控制改树结构*/\r\n            this.setState({proDesignData:this.props.proDesign});\r\n            if(Object.keys(this.props.proDesign).length!==0&&typeof(this.props.proDesign.children)!==\"undefined\"){\r\n                this.setState({\r\n                    stepObj1: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"初步设计\"))[0]),\r\n                    stepObj2: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"汇报确定\"))[0]),\r\n                    stepObj3: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"关联任务\"))[0]),\r\n                    stepObj4: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"深化设计\"))[0]),\r\n                    stepObj5: Object.assign({},this.props.proDesign.children.filter((item=>item.stepName==\"图纸确认\"))[0]),\r\n                })\r\n            }\r\n\t\t}\r\n\t}\r\n\r\n\thandleSelChange = (val, e) => {\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tuserIds\r\n\t\t});\r\n\t\tthis.store.proDesign.masters = Object.assign([], userIds);\r\n\t}\r\n\r\n    // 人员选择更新\r\n    updatePerson = (userIds)=>{\r\n        const {proDesignData} = this.state;\r\n        // 更新当前树\r\n        const currentData = Object.assign({}, proDesignData, {masters:userIds});\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n\t    this.store.proDesign.masters = Object.assign([], userIds);\r\n    }\r\n\r\n\tonChange = current => {\r\n\t\tthis.setState({current});\r\n\t};\r\n\r\n    // 保存\r\n\thandleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const {proDesign} = this.props;\r\n        let masters = proDesign.masters==null?[]:proDesign.masters;\r\n        if (masters.length==0) {\r\n            message.warn(\"主负责人是必填项\");\r\n            return false;\r\n        }\r\n        this.props.form.validateFieldsAndScroll((err, values) => {\r\n            if (!err) {\r\n                const {saveStage} = this.props;\r\n                // console.log(JSON.stringify(this.state.proDesignData))\r\n                let {children, ...proDesignStageData} = this.state.proDesignData;\r\n                saveStage(proDesignStageData);\r\n                this.store.isDesignEdit = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    // 编辑\r\n    onChangeVis = () => {\r\n        this.store.isDesignEdit = false;\r\n        this.setState({\r\n            defaultTree: Object.assign({}, this.state.proDesignData)\r\n        })\r\n\t    this.props.updateCount('psCount', Number(this.props.count) + 1)\r\n    }\r\n\r\n    // 取消\r\n    onCanlc = ()=> {\r\n        this.props.form.resetFields();\r\n        this.store.isDesignEdit = true;\r\n        // 清空数据\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\r\n    }\r\n\r\n    updatedeCount= (type) => {\r\n\t\tif (type==true) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdeCount: this.state.deCount+1\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdeCount: this.state.deCount-1\r\n\t\t\t});\r\n\t\t}\r\n    }\r\n\r\n\t// 新增\r\n\taddStage = () => {\r\n\t\tthis.store.addStage().then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tlet oldStageId = JSON.parse(JSON.stringify(this.store.currentStageId));  // old\r\n\t\t\t\tthis.store.oldStageId = oldStageId;\r\n\t\t\t\tthis.store.currentStageId = res.id; // new\r\n\t\t\t\tthis.store.getStageList();\r\n                // 更新tree\r\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\r\n\t\t\t\t// 初始化获取步骤进度信息\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除\r\n\tdelStage = (param) => {\r\n\t\tlet _this = this;\r\n\t\t_this.store.delStage(param).then((res)=>{\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\tlet oldStageId = JSON.parse(JSON.stringify(this.store.currentStageId));\r\n\t\t\t\t_this.store.oldStageId = oldStageId;\r\n\t\t\t\t_this.store.currentStageId = res.id; // new\r\n                // 更新tree\r\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\r\n\t\t\t\t// 初始化获取步骤进度信息\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t_this.store.getStageList();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 编辑\r\n\tchangeStage = (param)=> {\r\n\t\tlet _this = this;\r\n        const oldStageId = JSON.parse(JSON.stringify(_this.store.currentStageId));  // old\r\n        if (oldStageId==param) {\r\n            openNotificationWithIcon('warning');\r\n            return false;\r\n        }\r\n\t\tif (_this.store.isDesignEdit==false) { // 编辑中状态，增加提示信息，清空数据\r\n            Modal.confirm({\r\n                title: '您确定要切换方案设计吗?',\r\n                content: '未保存的数据,将会被清空',\r\n                okText:\"确定\",\r\n                cancelText:\"取消\",\r\n                onOk() {\r\n                    _this.store.oldStageId = oldStageId;\r\n                    _this.store.changeStage(param).then((res)=>{\r\n                        if(res) {\r\n                            _this.store.currentStageId = res.id; // new\r\n                            _this.store.isDesignEdit = true;\r\n                            // 更新tree\r\n                            let treeData = JSON.parse(JSON.stringify(_this.store.treeData));\r\n                            _this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\r\n\t                        // 初始化获取步骤进度信息\r\n\t                        _this.store.getStageTree();\r\n                        }\r\n                    });\r\n                },\r\n                onCancel() {\r\n\r\n                }\r\n            });\r\n        } else {\r\n            _this.store.oldStageId = oldStageId;\r\n            _this.store.changeStage(param).then((res)=>{\r\n                if(res) {\r\n                    _this.store.currentStageId = res.id; // new\r\n                    // 更新tree\r\n                    let treeData = JSON.parse(JSON.stringify(_this.store.treeData));\r\n                    _this.store.treeData = utils.updateTreeData(treeData, \"changeStage\", res);\r\n\t                // 初始化获取步骤进度信息\r\n\t                _this.store.getStageTree();\r\n                }\r\n            });\r\n        }\r\n\t}\r\n\r\n\trender() {\r\n        let _this = this;\r\n        const {deCount, stepObj1, stepObj2, stepObj3, stepObj4, stepObj5} = _this.state;\r\n        const {proDesign, form, store,  isShow, count,...withoutStoreProps} = this.props;\r\n\t\tconst {getFieldDecorator} = form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n        };\r\n\t\tconst {isDesignEdit, state, stageList, currentStageId} = _this.store;\r\n\t\tconst menu = (\r\n\t\t\t<Menu className={isDesignEdit?\"hidden\":\"tc work_menu\"} style={{width:'150px'}}>\r\n\t\t\t\t{\r\n\t\t\t\t\tmobx.toJS(stageList).map((item, index)=>{\r\n\t\t\t\t\t   return (\r\n\t\t\t\t\t\t   <Menu.Item key={index} className={item.id==currentStageId?\"work_menu_item work_menu_item_active\":\"work_menu_item\"}>\r\n\t\t\t\t\t\t\t   <span onClick={this.changeStage.bind(this, item.id)}>{item.stageName}{item.indexs>=2?item.indexs:null}</span>\r\n\t\t\t\t\t\t\t   {isDesignEdit?null:<Popconfirm title=\"确定要删除吗?\" onConfirm={() => this.delStage(item.id)}>\r\n\t\t\t\t\t\t\t\t   <Icon type=\"close\" className={item.indexs>=2?\"work_menu_close\":\"hidden\"}/>\r\n\t\t\t\t\t\t\t   </Popconfirm>}\r\n\t\t\t\t\t\t   </Menu.Item>\r\n\t\t\t\t\t   )\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t{isDesignEdit?null:<Menu.Divider />}\r\n\t\t\t\t<Menu.Item className={isDesignEdit?\"hidden\":\"\"}>\r\n\t\t\t\t\t<Icon onClick={this.addStage} style={{fontSize:'20px'}} type=\"plus-circle\" title=\"新增方案设计\"/>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t</Menu>\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<Card bordered className=\"mt20\" style={{width: '100%'}}>\r\n\t\t\t\t\t<h3 id={proDesign.id} className=\"kanban_title mb20\">\r\n\t\t\t\t\t\t<Dropdown overlay={menu}>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t方案设计{proDesign.indexs>=2?proDesign.indexs:null}<Icon className={isDesignEdit?\"hidden\":\"ml5 pointer\"}  type=\"caret-down\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</h3>\r\n                <span className=\"worktile_progress_add\">\r\n                    {isDesignEdit?\r\n                        <Button type=\"link\"\r\n                                className={state==2?\"hidden\":\"\"}\r\n                                disabled={isShow}\r\n                                onClick={this.onChangeVis}>{count == 1 ? \"创建\" : \"编辑\"}</Button>:\r\n                        <div>\r\n                            <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t                      <Button\r\n\t\t                      disabled={deCount>0?true:false}\r\n\t\t                      type=\"link\" onClick={this.handleSubmit}>保存</Button>\r\n                        </div>\r\n                    }\r\n                </span>\r\n\t\t\t\t<Form className={count == 1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n                                    initialValue: proDesign.masters==null?[]:proDesign.masters.map((item)=>item.userId),\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择主负责人'}],\r\n\t\t\t\t\t\t\t\t})(\r\n                                    <PersonAddIcon\r\n                                        data={proDesign.masters==null?[]:proDesign.masters}\r\n                                        updatePerson={this.updatePerson}\r\n                                        disabled={isDesignEdit}\r\n                                    />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n                <Row className={count == 1 ? \"hidden\" : \"mt30 mb30\"}>\r\n                    <Col span={24}>\r\n                        <StepInfo\r\n                             key={'step1'}\r\n                             store={this.store}\r\n                             data={stepObj1}\r\n                             stepName={'1. 初步设计'}\r\n                             {...withoutStoreProps}\r\n                             disabled={isDesignEdit}\r\n                             saveNodes={this.props.saveNodes}\r\n                             saveAttachment={this.props.saveAttachment}\r\n                             delNode={this.props.delNode}\r\n                             oss={this.props.ossData}\r\n                             updatedeCount={this.updatedeCount}\r\n                        />\r\n                        <StepInfo\r\n                             key={'step2'}\r\n                             store={this.store}\r\n                             data={stepObj2}\r\n                             stepName={'2. 汇报确定'}\r\n                             {...withoutStoreProps}\r\n                             disabled={isDesignEdit}\r\n                             saveNodes={this.props.saveNodes}\r\n                             saveAttachment={this.props.saveAttachment}\r\n                             delNode={this.props.delNode}\r\n                             oss={this.props.ossData}\r\n                             updatedeCount={this.updatedeCount}\r\n                        />\r\n                        <StepInfo\r\n                             key={'step3'}\r\n                             store={this.store}\r\n                             data={stepObj3}\r\n                             stepName={'关联任务'}\r\n                             {...withoutStoreProps}\r\n                             disabled={isDesignEdit}\r\n                             saveNodes={this.props.saveNodes}\r\n                             saveAttachment={this.props.saveAttachment}\r\n                             delNode={this.props.delNode}\r\n                             oss={this.props.ossData}\r\n                             updatedeCount={this.updatedeCount}\r\n                        />\r\n                        <StepInfo\r\n                             key={'step4'}\r\n                             store={this.store}\r\n                             data={stepObj4}\r\n                             stepName={'3. 深化设计'}\r\n                             {...withoutStoreProps}\r\n                             disabled={isDesignEdit}\r\n                             saveNodes={this.props.saveNodes}\r\n                             saveAttachment={this.props.saveAttachment}\r\n                             delNode={this.props.delNode}\r\n                             oss={this.props.ossData}\r\n                             updatedeCount={this.updatedeCount}\r\n                        />\r\n                        <StepInfo\r\n                             key={'step5'}\r\n                             store={this.store}\r\n                             data={stepObj5}\r\n                             stepName={'4. 图纸确认'}\r\n                             {...withoutStoreProps}\r\n                             disabled={isDesignEdit}\r\n                             saveNodes={this.props.saveNodes}\r\n                             saveAttachment={this.props.saveAttachment}\r\n                             delNode={this.props.delNode}\r\n                             oss={this.props.ossData}\r\n                             updatedeCount={this.updatedeCount}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/ProjectDesign.js","import React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Form, Tooltip, Input} from 'antd';\r\n//import moment from 'moment';\r\n//import MyUpload from \"@/components/worktile/MyUpload\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\n\r\n// import AsyncSelectMuti from \"@/components/common/AsyncSelectMuti\";\r\n// import authSchemas from \"@/utils/Schemas/authorization\";\r\n// import Config from \"@/config\";\r\nimport * as utils from \"@/utils/utils\";\r\n\r\nconst formItemLayout = {\r\n\tlabelCol: {span: 11},\r\n\twrapperCol: {span: 13},\r\n}\r\nconst CustomizedForm = Form.create({\r\n\tname: 'proposalattc',\r\n\tonFieldsChange(props, changedFields) {\r\n\t\tprops.onChange(changedFields);\r\n\t},\r\n\tmapPropsToFields(props) {\r\n\t\treturn {\r\n\t\t\tsupplierPrice: Form.createFormField({\r\n\t\t\t\t...props.supplierPrice,\r\n\t\t\t\tvalue: props.supplierPrice.value,\r\n\t\t\t}),\r\n\t\t\tcustomerPrice: Form.createFormField({\r\n\t\t\t\t...props.customerPrice,\r\n\t\t\t\tvalue: props.customerPrice.value,\r\n\t\t\t}),\r\n\t\t\tupload: Form.createFormField({\r\n\t\t\t\t...props.upload,\r\n\t\t\t\tvalue: props.upload.value,\r\n\t\t\t}),\r\n\t\t\tmasters: Form.createFormField({\r\n\t\t\t\t...props.masters,\r\n\t\t\t\tvalue: props.masters.value,\r\n\t\t\t}),\r\n\t\t}\r\n\t},\r\n\tonValuesChange(_, values) {\r\n\t\t// console.log(values);\r\n\t}\r\n})(props => {\r\n\tconst {getFieldDecorator} = props.form;\r\n\tconst {onSave, onBlur, attcObj, saveAttachment, delNode, oss} = props;\r\n\t// const attachments = attcObj.children!=null?attcObj.children.map((vitem, index) => {\r\n\t//     return Object.assign({}, {\r\n\t//         uid: vitem.id,\r\n\t//         name: vitem.fileName,\r\n\t//         status: 'done',\r\n\t//         url: vitem.filePath,\r\n\t//         fileId: vitem.fileId,\r\n\t//         fileName:vitem.fileName,\r\n\t//         filePath: vitem.filePath,\r\n\t//         id: vitem.id\r\n\t//     })\r\n\t// }) : [];\r\n\r\n\treturn (\r\n\t\t<Form {...formItemLayout} layout=\"horizontal\">\r\n\t\t\t{/* <Form.Item label=\"内容留存\"\r\n                       labelCol={{\r\n                           xs: { span: 24 },\r\n                           sm: { span: 2},\r\n                       }}\r\n                       wrapperCol={{\r\n                           xs: { span: 24 },\r\n                           sm: { span: 22 },\r\n                       }}\r\n            >\r\n               <MyUpload\r\n                    saveAttachment={saveAttachment}\r\n                    delNode={delNode}\r\n                    fileList={attachments}\r\n                    pid={attcObj.id}\r\n                    projectId={attcObj.projectId}\r\n                    disabled={props.isEdit}\r\n                    ossData={oss}\r\n               />\r\n            </Form.Item>*/}\r\n\t\t\t<Form.Item label={props.proposalLabel}\r\n\t\t\t           labelCol={{\r\n\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t           sm: {span: 2},\r\n\t\t\t           }}\r\n\t\t\t           wrapperCol={{\r\n\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t           sm: {span: 22},\r\n\t\t\t           }}\r\n\t\t\t>\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tstyle={{width: '250px'}}\r\n\t\t\t\t\tclassName=\"prop_attr\"\r\n\t\t\t\t\tlabel={props.supplierLabel}>\r\n\t\t\t\t\t{getFieldDecorator('supplierPrice', {\r\n\t\t\t\t\t\tinitialValue: props.supplierPrice.value==null||props.supplierPrice.value==0?\"\":props.supplierPrice.value,\r\n\t\t\t\t\t\trules: [{required: false, message: '字段不能为空'}],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<span className=\"w\">\r\n\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\tplacement=\"topLeft\"\r\n\t\t\t\t\t\t\t\ttrigger={['focus']}\r\n\t\t\t\t\t\t\t\ttitle={props.supplierPrice.value>1000?\"金额单位是万元\":null}>\r\n                            <Input style={{width: '60px', marginRight: '5px'}}\r\n                                   disabled={props.isEdit}\r\n                                   value={props.supplierPrice.value==null||props.supplierPrice.value==0?\"\":props.supplierPrice.value}/><span>万元</span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n                        </span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\tstyle={{width: '250px'}}\r\n\t\t\t\t\tclassName=\"prop_attr\"\r\n\t\t\t\t\tlabel={props.customerLabel}>\r\n\t\t\t\t\t{getFieldDecorator('customerPrice', {\r\n\t\t\t\t\t\tinitialValue: props.customerPrice.value==null||props.customerPrice.value==0?\"\":props.customerPrice.value,\r\n\t\t\t\t\t\trules: [{required: false, message: '字段不能为空'}],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<span className=\"w\">\r\n                            <Tooltip\r\n\t                            placement=\"topLeft\"\r\n\t                            trigger={['focus']}\r\n\t                            title={props.customerPrice.value>1000?\"金额单位是万元\":null}>\r\n                            <Input style={{width: '60px', marginRight: '5px'}}\r\n                                   disabled={props.isEdit}\r\n                                   value={props.customerPrice.value==null||props.customerPrice.value==0?\"\":props.customerPrice.value}/><span>万元</span>\r\n                            </Tooltip>\r\n                        </span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form.Item>\r\n\t\t\t<Form.Item label=\"报价同步\"\r\n\t\t\t           labelCol={{\r\n\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t           sm: {span: 2},\r\n\t\t\t           }}\r\n\t\t\t           wrapperCol={{\r\n\t\t\t\t           xs: {span: 24},\r\n\t\t\t\t           sm: {span: 6},\r\n\t\t\t           }}\r\n\t\t\t           className=\"w\">\r\n\t\t\t\t{getFieldDecorator('master999', {\r\n\t\t\t\t\tinitialValue: props.masters.value.length > 0 ? props.masters.value.length > 0 && props.masters.value.map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}) : [],\r\n\t\t\t\t\trules: [{required: false, message: '请选择同步人'}],\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\">\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={props.masters.value.length > 0 ? props.masters.value.length > 0 && props.masters.value : []}\r\n\t\t\t\t\t\t\tupdatePerson={onSave}\r\n\t\t\t\t\t\t\tdisabled={props.isEdit}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/*<AsyncSelectMuti\r\n                        className=\"w\"\r\n                        type=\"getUserInfoListByRoleCode\"\r\n                        variables={{\r\n                            appId: \"bocspace\",\r\n                            code: \"bocspace.group\",\r\n                            pageIndex: 1,\r\n                            pageSize: 10000,\r\n                        }}\r\n                        query={authSchemas.authorization.getUserInfoListByRoleCode}\r\n                        url={Config.authorization.getUserInfoListByRoleCode}\r\n                        onChange={onSave}\r\n                        itemKey=\"id\"\r\n                        itemValue=\"realname\"\r\n                        body=\"body\"\r\n                       disabled={props.isEdit}\r\n                    />*/}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>\r\n\t\t</Form>\r\n\t);\r\n});\r\n\r\n@observer\r\nexport default class ProposalAttc extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tisEdit: false,\r\n\t\t\tdata: this.props.data,\r\n\t\t\tfields: {\r\n\t\t\t\tsupplierPrice: {\r\n\t\t\t\t\tvalue: this.props.data.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t\t})[0]['supplierPrice'] || 0,\r\n\t\t\t\t},\r\n\t\t\t\tcustomerPrice: {\r\n\t\t\t\t\tvalue: this.props.data.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t\t})[0]['customerPrice'] || 0,\r\n\t\t\t\t},\r\n\t\t\t\tupload: {\r\n\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tmasters: {\r\n\t\t\t\t\tvalue: this.props.data.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t\t})[0]['masters'] == null ? [] : this.props.data.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t\t})[0]['masters']\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps.data != this.props.data) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdata: nextProps.data,\r\n\t\t\t})\r\n\t\t\tlet obj = {};\r\n\t\t\tobj.supplierPrice = {\r\n\t\t\t\t\"value\": nextProps.data.filter((item) => {\r\n\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t})[0]['supplierPrice'],\r\n\t\t\t}\r\n\t\t\tobj.customerPrice = {\r\n\t\t\t\t\"value\": nextProps.data.filter((item) => {\r\n\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t})[0]['customerPrice'],\r\n\t\t\t}\r\n\t\t\tobj.masters = {\r\n\t\t\t\t\"value\": nextProps.data.filter((item) => {\r\n\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t})[0]['masters'] == null ? [] : nextProps.data.filter((item) => {\r\n\t\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t\t})[0]['masters']\r\n\t\t\t}\r\n\t\t\tthis.setState(({fields}) => ({\r\n\t\t\t\tfields: {...fields, ...obj},\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\tisEdit: !this.state.isEdit\r\n\t\t});\r\n\t}\r\n\r\n\thandleFormChange = changedFields => {\r\n\t\tthis.setState(({fields}) => ({\r\n\t\t\tfields: {...fields, ...changedFields},\r\n\t\t}), () => {\r\n\t\t\tlet proposalObj = this.state.data.filter((item) => {\r\n\t\t\t\treturn item.treeType === 'proposal'\r\n\t\t\t})[0]\r\n\t\t\tlet params = Object.assign({}, proposalObj, {\"supplierPrice\": this.state.fields.supplierPrice.value}, {\"customerPrice\": this.state.fields.customerPrice.value})\r\n\t\t\tthis.saveData(params);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", params);\r\n\t\t});\r\n\t}\r\n\r\n\tsaveData = (params) => {\r\n\t\tthis.props.saveProposal(params);\r\n\t}\r\n\r\n\t// 报价同步\r\n\tsave2 = (val, e) => {\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tconst {data} = this.state;\r\n\t\tlet proposalObj = data.filter((item) => {\r\n\t\t\treturn item.treeType === 'proposal'\r\n\t\t})[0];\r\n\t\tlet params = Object.assign({}, proposalObj, {\"masters\": userIds});\r\n\t\tthis.props.saveNodes(params);\r\n\t\t// this.saveData(params)\r\n\t}\r\n\r\n\t//\r\n\tsave = (users) => {\r\n\t\tconst {data} = this.state;\r\n\t\tlet proposalObj = data.filter((item) => {\r\n\t\t\treturn item.treeType === 'proposal'\r\n\t\t})[0];\r\n\t\tlet params = Object.assign({}, proposalObj, {\"masters\": users});\r\n\t\tthis.props.saveNodes(params);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {stepName, disabled, oss} = this.props;\r\n\t\tconst {data, isEdit, fields} = this.state;\r\n\r\n\t\tlet proposalLabel = \"\";\r\n\t\tlet supplierLabel = \"\";\r\n\t\tlet customerLabel = \"\";\r\n\t\tlet formtype = \"\";\r\n\t\tif (stepName === \"2. 汇报确定\") {\r\n\t\t\tproposalLabel = \"初步报价\";\r\n\t\t\tsupplierLabel = \"供应商预估\";\r\n\t\t\tcustomerLabel = \"客户预估\";\r\n\t\t\tformtype = \"estimate\";\r\n\t\t}\r\n\t\tif (stepName === \"4. 图纸确认\") {\r\n\t\t\tproposalLabel = \"精确报价\";\r\n\t\t\tsupplierLabel = \"供应商报价\";\r\n\t\t\tcustomerLabel = \"客户报价\";\r\n\t\t\tformtype = \"precise\";\r\n\t\t}\r\n\r\n\t\tconst labelObj = {\r\n\t\t\t\"proposalLabel\": proposalLabel,\r\n\t\t\t\"supplierLabel\": supplierLabel,\r\n\t\t\t\"customerLabel\": customerLabel\r\n\t\t};\r\n\r\n\t\tconst editStatus = {\r\n\t\t\t\"isEdit\": disabled\r\n\t\t}\r\n\r\n\t\t// const attcObj = data.filter((item)=>{return item.treeType==='attc'})[0]; // 附件数据\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"mt15\">\r\n\t\t\t\t<CustomizedForm\r\n\t\t\t\t\t//oss={oss}\r\n\t\t\t\t\t//attcObj={attcObj}\r\n\t\t\t\t\t{...fields}\r\n\t\t\t\t\t{...labelObj}\r\n\t\t\t\t\t{...editStatus}\r\n\t\t\t\t\tonChange={this.handleFormChange}\r\n\t\t\t\t\tonSave={this.save}\r\n\t\t\t\t\t//delNode={this.props.delNode}\r\n\t\t\t\t\t//saveAttachment={this.props.saveAttachment}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/ProposalAttc.js","import React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Icon, message, Tooltip} from 'antd';\r\nimport EditableTable from \"@/components/worktile/EditableTable\";\r\nimport EditableTable2 from \"@/components/product/EditableTable2\";\r\nimport ProposalAttc from \"./ProposalAttc\";\r\nimport * as utils from \"@/utils/utils\";\r\nimport MyUpload from \"@/components/worktile/MyUpload\";\r\nimport * as mobx from \"mobx\";\r\n\r\n@observer\r\nexport default class StepInfo extends React.Component {\r\n\tconstructor(props) {\r\n        super(props);\r\n        this.store = this.props.store;\r\n        this.state = {\r\n            option:null,\r\n            current: 0,\r\n            isEdit:false,\r\n            data:this.props.data,\r\n            defaultTree: {}, // 记录默认数据\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if(nextProps.data != this.props.data) {\r\n           this.setState({data:nextProps.data},()=>{\r\n               let stepChildren = nextProps.data.children!=null || typeof(nextProps.data.children)!==\"undefined\" ? nextProps.data.children:null;\r\n               // 更新记录当前树的附件数据\r\n               let attc = stepChildren.filter((item)=>{return item.treeType==='attc'})[0]\r\n               if (Object.keys(this.state.defaultTree).length>0&&attc!==undefined) {\r\n                   // 更新tree\r\n                   let defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\r\n                   this.setState({\r\n                       defaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\r\n                   });\r\n               }\r\n           })\r\n        }\r\n    }\r\n\r\n    // 保存步骤\r\n    saveStep =() => { //这里调用saveNodes\r\n       const {saveNodes} = this.props;\r\n       const {data} = this.state;\r\n       // 校验1：任务名称必输\r\n       let currentDataSource = data.children!=null&&data.children[0].children!=null?data.children[0].children:[];\r\n       const isSub = currentDataSource.filter((item)=>{return item.name==\"\"||item.name==null})\r\n       if (isSub.length>0) {  // true\r\n          message.warn(\"任务名称是必填项\");\r\n          return false;\r\n       }\r\n        const isEndime = currentDataSource.filter((item)=>{return item.beginTime!=\"\"&&item.beginTime!=null&&(item.endTime==\"\"||item.endTime==null)})\r\n        if (isEndime.length>0) {  // true\r\n            message.warn(\"截至日期是必填项\");\r\n            return false;\r\n        }\r\n        saveNodes(data);\r\n       this.onChangeVis();\r\n    }\r\n\r\n    // 更新该节点树 数据\r\n    saveData = (taskdata, key) => {\r\n        const {data} = this.state;\r\n        let newData = [];\r\n        taskdata.forEach(item=>{\r\n            let {key, children, ...obj} = item;\r\n            newData.push(obj);\r\n        })\r\n        let currentTaskC = data.children.filter(item=> item.treeType==='taskc')[0];\r\n        currentTaskC = Object.assign(currentTaskC,{\"children\":taskdata})\r\n        let stepChildren = data.children;\r\n        const taskcIndex = stepChildren.findIndex(item=> {return item.treeType==='taskc'} )\r\n        stepChildren[taskcIndex] = currentTaskC;\r\n        this.setState({data:Object.assign(data, {\"children\":stepChildren})});\r\n    }\r\n\r\n    saveProposal =(proposalData) => {\r\n        const {data} = this.state;\r\n        let currentProposal = data.children.filter(item=> item.treeType==='proposal')[0];\r\n        currentProposal = Object.assign(currentProposal,proposalData);\r\n        let stepChildren = data.children;\r\n        const proposalIndex = stepChildren.findIndex(item=> {return item.treeType==='proposal'} )\r\n        stepChildren[proposalIndex] = currentProposal;\r\n        this.setState({data:Object.assign(data, {\"children\":stepChildren})});\r\n    }\r\n\r\n    onChangeVis = () => {\r\n        this.setState({\r\n            isEdit: !this.state.isEdit\r\n        }, ()=>{\r\n            // 点击编辑，记录当前树\r\n            if (this.state.isEdit==true) {\r\n                this.setState({\r\n                    defaultTree: Object.assign({}, this.state.data)\r\n                }, ()=>{\r\n                    // 同步大阶段的保存状态\r\n                    this.props.updatedeCount(true);\r\n                });\r\n            } else { // 取消\r\n                // 更新tree\r\n                let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n                this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\r\n                // 同步大阶段的保存状态\r\n                this.props.updatedeCount(false);\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let _this = this;\r\n        const { data, isEdit} = _this.state;\r\n        const  {stepName, oss} = _this.props;\r\n        let currentDataSource = data.children!=null&&data.children[0].children!=null?data.children[0].children:[];\r\n        let stepChildren = data.children!=null || typeof(data.children)!==\"undefined\" ? data.children:null;\r\n        let proposalIndex = -1;\r\n        let attcIndex = -1;\r\n        if(stepChildren!=null) {\r\n            proposalIndex = stepChildren.findIndex((item)=>{return item.treeType==='proposal'}); //是否有报价\r\n            attcIndex = stepChildren.findIndex((item)=>{return item.treeType==='attc'}); //是否有内容留存\r\n        }\r\n        let attcObj;\r\n        let attachments;\r\n        if (stepName==\"关联任务\"&&attcIndex!=-1) {  // 是否有关联任务\r\n           attcObj = stepChildren.filter((item)=>{return item.treeType==='attc'})[0];//附件对象\r\n           attachments = attcObj&&attcObj.children&&attcObj.children!=null?attcObj.children.map((vitem) => {\r\n                return Object.assign({}, {\r\n                    uid: vitem.id,\r\n                    name: vitem.fileName,\r\n                    status: 'done',\r\n                    url: vitem.filePath,\r\n                    fileId: vitem.fileId,\r\n                    fileName:vitem.fileName,\r\n                    filePath: vitem.filePath,\r\n                    id: vitem.id\r\n                })\r\n            }) : [];\r\n        }\r\n        let expandedKeys = mobx.toJS(_this.store.expandedKeys)[data.id]!== undefined?mobx.toJS(_this.store.expandedKeys)[data.id]:[]\r\n        let isExp = expandedKeys.length>0?true:false;\r\n\t\treturn (\r\n            <div className={\"mb15\"}>\r\n                <div className={\"mb15\"}>\r\n                    <span className=\"mr20\">{stepName==\"关联任务\"? <Icon type=\"link\" className=\"mr10\"/>: null}{stepName}</span>\r\n                    {!isEdit ?\r\n                    <span>\r\n                        <Tooltip placement=\"bottom\" title={\"编辑\"}>\r\n                            <Icon\r\n                                onClick={_this.onChangeVis}\r\n                                style={{fontSize:'20px', marginRight:'10px'}}\r\n                                type=\"form\" />\r\n                        </Tooltip>\r\n                    </span>\r\n                    :\r\n                    <span>\r\n                        <Tooltip placement=\"bottom\" title={\"取消\"}>\r\n                            <Icon\r\n                                onClick={this.onChangeVis}\r\n                                style={{fontSize:'20px', marginRight:'10px'}}\r\n                                type=\"close-circle\" />\r\n                        </Tooltip>\r\n                        <Tooltip placement=\"bottom\" title={\"保存\"}>\r\n                            {isExp? <Icon\r\n                                style={{fontSize:'20px', color:\"#e6e6e6\"}}\r\n                                type=\"check-circle\" />: <Icon\r\n                                onClick={_this.saveStep}\r\n                                style={{fontSize:'20px'}}\r\n                                type=\"check-circle\" />}\r\n                        </Tooltip>\r\n                    </span>\r\n                    }\r\n                </div>\r\n                {stepName==\"关联任务\"?\r\n                <EditableTable\r\n                    id={data.id}\r\n                    store={_this.store}\r\n                    masters={data.masters==null?[]:data.masters}\r\n                    dataSource={currentDataSource}\r\n                    saveData={_this.saveData}\r\n                    disabled={!isEdit}\r\n                    projectId={data.projectId}\r\n                    pid={data.children!=null ? data.children[0]['id']:''}\r\n                />:\r\n                <EditableTable2\r\n                    id={data.id}\r\n                    store={_this.store}\r\n                    masters={data.masters==null?[]:data.masters}\r\n                    dataSource={currentDataSource}\r\n                    oss={oss}\r\n                    taskhaveattt={true}\r\n                    saveData={_this.saveData}\r\n                    disabled={!isEdit}\r\n                    delNode={this.props.delNode}\r\n                    saveAttachment={this.props.saveAttachment}\r\n                    projectId={data.projectId}\r\n                    pid={data.children!=null ? data.children[0]['id']:''}\r\n                />}\r\n                {proposalIndex!=-1?\r\n                    <ProposalAttc\r\n                        store={_this.store}\r\n                        stepName = {stepName}\r\n                        disabled={!isEdit}\r\n                        saveProposal= {this.saveProposal}\r\n                        saveNodes={this.props.saveNodes}\r\n                        saveAttachment={this.props.saveAttachment}\r\n                        delNode={this.props.delNode}\r\n                        oss={oss}\r\n                        data={stepChildren.filter((item)=>{return item.treeType==='proposal'})}\r\n                    /> :null}\r\n                {stepName==\"关联任务\"&&attcIndex!=-1?\r\n                    <div className={!isEdit?\"mt15\":\"myupload_pos\"}>\r\n                    <MyUpload\r\n                        saveAttachment={this.props.saveAttachment}\r\n                        delNode={this.props.delNode}\r\n                        fileList={attachments}\r\n                        pid={attcObj?attcObj.id:\"\"}\r\n                        projectId={attcObj?attcObj.projectId:\"\"}\r\n                        disabled={!isEdit}\r\n                        ossData={oss}\r\n                    /></div>:null}\r\n            </div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/StepInfo.js"],"sourceRoot":""}