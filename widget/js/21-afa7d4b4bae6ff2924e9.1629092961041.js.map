{"version":3,"sources":["webpack:///./src/containers/labor/Index.js","webpack:///./src/components/worktile/MyUpload.js?a69f****","webpack:///./src/components/worktile/TaskSplite.js?f171****","webpack:///./src/components/worktile/EditableTable.js?01f4**","webpack:///./src/components/labor/Delivery.js?0748","webpack:///./src/components/labor/EditableTable.js?0027","webpack:///./src/components/labor/PayUpload.js?f3d0","webpack:///./src/components/labor/ProgressList.js?0163","webpack:///./src/components/labor/WortileCommon.js?dae3","webpack:///./src/components/labor/Ordercenter.js","webpack:///./~/react-simple-contenteditable/lib/index.js"],"names":["mobx","utils","Index","observer","props","onRef","ref","child","scrollToAnchor","anchorName","anchorElement","document","getElementById","scrollIntoView","block","err","saveProject","params","store","then","res","id","message","success","onChangeVis","projectId","closeReason","projectName","name","state","getTree","mes","treeData","Object","assign","itemObj","children","filter","item","treeType","stageName","commonData","JSON","parse","stringify","obj","countObj","map","v","comStates","comCount","getStageTree","getReportDaysList","error","saveAttachment","saveAttachments","updateTreeData","delNode","param","updateCount","type","count","setState","saveNodes","updateTree","projectinfo","LarorStore","payCount","autorun","getcommonData","payObj","getproDesign","search","location","url","query","projectid","temId","temName","pid","stageid","isEdit","getSts","undefined","emitter","emit","listData","ossData","isShow","margin","toJS","length","index","React","Component","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","client","self","token","oss","accessKeyId","access_key_id","accessKeySecret","access_key_secret","stsToken","region","bucket","endpoint","OSS_ENDPOINT","uploadPath","path","file","format","uid","UploadToOss","Promise","resolve","reject","multipartUpload","data","catch","MyUpload","handleChange","info","status","fileList","oldFileList","newFileList","originFileObj","host","fileId","fileName","filePath","array","arr","push","beforeUpload","isJPG","isLt2M","size","onloadend","loading","nextProps","securityToken","multiple","onChange","listType","className","disabled","fontSize","color","EditableContext","createContext","EditableRow","form","EditableFormRow","Form","create","openNotificationWithIcon","notification","description","placement","EditableCell","editing","userIds","toggleEdit","input","focus","save","record","handleSave","validateFields","values","e","currentTarget","saveTime","Number","totalHours","saveDate","date","dateString","hasOwnProperty","valueOf","saveDate2","onBlur","handleSelChange","val","userId","value","userName","updatePerson","users","disabledStartDate","startValue","endTime","disabledEndDate","endValue","beginTime","renderCell","dataIndex","title","personData","handleDelete","getFieldDecorator","rules","required","initialValue","minHeight","node","numberTostring","minWidth","width","float","editable","restProps","TaskSplite","clearState","dataSource","key","startsWith","handleSaveSubTask","handleAdd","addRecord","newData","row","alreadyHours","findIndex","splice","newRow","collapseOnClick","_this","collapseOnChange","nextContext","onTaskRef","prevProps","prevState","components","body","cell","columnEle","align","render","text","join","columns","col","onCell","textAlign","marginTop","runonlyonce","Option","Select","subNumber","EditableTable","getKeyByShowRow","saveExpandedRows","handleView","console","log","saveData","getMyTaskCount","primaryData","keys","indexOf","expandedKeys","subTaskDis","handleApart","activeObj","activeSub","saveSubTaskRecord","subtasks","delNodeByPid","isSub","masters","warn","isLarge","saveSubTasks","subtask","newSubTasks","forEach","onCalac","onPackup","defaultSource","rearSource","Modal","confirm","okText","cancelText","onOk","onCancel","onRow","subTasks","eventE1","addListener","removeListener","isChaijie","bind","height","lineHeight","delayType","position","left","top","transform","content","fontWeight","remark","maxWidth","paddingLeft","actionName","marginLeft","expandedRowRender","rate","Delivery","handleSubmit","preventDefault","currentTree","validateFieldsAndScroll","hidden","saveData2","taskdata","currentTaskC","stepChildren","taskcIndex","onCanlc","resetFields","onPanelChange","isLoading","setTimeout","getProjectByWsProjectId","window","open","showConfirm","onVisibleChange","calendarVis","disabledDate","current","endOf","currentData","dateCellRender","reportDays","includes","icon","defaultTree","attc","formItemLayout","labelCol","xs","span","sm","wrapperCol","currentDataSource","md","lg","xl","verticalAlign","background","border","borderRadius","widthDESIGN","uuid","getRecord","attachments","handleChangeMenu","rowId","fileType","payOutput","handleLinkTo","rowUrl","linkUrl","link","linkId","linkType","linkName","getTaskattEditUrl","handleLinkDown","linkArray","split","download","eventE3","temOutput","taskhaveattt","paddingRight","attcArray","Array","isArray","onlineArray","attcObj","vitem","isNew","cursor","padding","display","onlineObj","fileUrl","temArray","temObj","temChildren","x","PayUpload","TextArea","Input","ProgressList","showModal","visible","handleOk","closeProject","target","backgroundColor","finishTime","minRows","maxRows","WortileCommon","isEndime","currentSource","isChange","isMasters","isExp","Ordercenter","orderinfo","fields","project","order","customer","address","milepost","orderRemark","customerPhone","productNumber","notifications","priceProduct","priceDiscount","priceDeal","remove","k","add","changeNew","customList","list","update","updateTip","getFieldValue","jsonString","json","josn","formItems","productType"],"mappings":"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","file":"js/21-afa7d4b4bae6ff2924e9.1629092961041.js","sourcesContent":["/*\r\n* 项目看板 新建劳务仓流程、展厅、综合办公\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Breadcrumb, message} from 'antd';\r\nimport url from 'url';\r\nimport * as  mobx from 'mobx';\r\nimport ProgressList from '@/components/labor/ProgressList';\r\nimport Ordercenter from '@/components/labor/Ordercenter';\r\nimport Delivery from '@/components/labor/Delivery';\r\nimport WortileCommon from '@/components/labor/WortileCommon';\r\nimport * as utils from \"@/utils/utils\";\r\nimport emitter from \"@/utils/events\";\r\n\r\n@inject('LarorStore')\r\n@observer\r\nclass Index extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.LarorStore;\r\n\t\tthis.state = {\r\n\t\t\tcount: 1, // 1 创建、2 编辑初始化状态\r\n\t\t\tpayCount: 1, // 1 创建、2 编辑初始化状态\r\n\t\t};\r\n\t\tmobx.autorun(() => {\r\n\t\t\tthis.store.commonData = this.store.getcommonData;\r\n\t\t\tthis.store.payObj = this.store.getproDesign;\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet search = this.props.location.search;\r\n\t\tconst {projectid, temId, temName, id, pid, stageid, isEdit} = url.parse(search, true).query;\r\n\t\tthis.store.temId = temId;\r\n\t\tthis.store.temName = temName;\r\n\t\t// 获取大文件上传sts\r\n\t\tthis.store.getSts();\r\n\t\tif (projectid != null && projectid != undefined) { // 详情、编辑态\r\n\t\t\tthis.store.projectId = projectid;\r\n\t\t\tthis.store.getTree(projectid).then((mes) => {\r\n\t\t\t\tthis.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t\t// 更新项目信息\r\n\t\t\t\tlet itemObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"订单信息\")[0]);\r\n\t\t\t\t// 实施交付\r\n\t\t\t\tthis.store.payObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"实施交付\")[0]);\r\n\t\t\t\t// 过滤项目信息数据\r\n\t\t\t\tthis.store.commonData = Object.assign([], mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName !== \"订单信息\" && item.stageName !== \"实施交付\"));\r\n\t\t\t\t// 维护状态公共组件\r\n\t\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\t\tlet obj = {};\r\n\t\t\t\tlet countObj = {};\r\n\t\t\t\tcommonData.map((v) => {\r\n\t\t\t\t\tobj[v.id] = true;\r\n\t\t\t\t\tcountObj[v.id] = 2;\r\n\t\t\t\t});\r\n\t\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\t\tthis.store.itemObj = Object.assign({}, itemObj);\r\n\t\t\t\tthis.store.projectName = itemObj.children.filter((item) => {return item.treeType == \"projectinfo\"})[0].name;\r\n\t\t\t\t// 初始化获取步骤进度信息\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\tthis.store.getReportDaysList();\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcount: 2,\r\n\t\t\t\t\tpayCount: 2\r\n\t\t\t\t});\r\n\t\t\t\tif(pid!=undefined&&id!=undefined&&pid!=null){\r\n\t\t\t\t\temitter.emit(\"handletaskid\",  {\"pid\":pid, \"id\":id, \"isEdit\":isEdit});    // 展开子任务\r\n\t\t\t\t}else if (id!=undefined) {  // 我的任务跳转定位，不展开子任务\r\n\t\t\t\t\tthis.scrollToAnchor(id);\r\n\t\t\t\t}else if(stageid!==undefined){\r\n\t\t\t\t\t//this.scrollToAnchor(`items${parseInt(stageid)-1}`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {  // 新增态\r\n\t\t\tthis.store.projectId = \"\";\r\n\t\t\tthis.store.projectName = \"\";\r\n\t\t\t// 初始化获取步骤进度信息\r\n\t\t\tthis.store.getStageTree();\r\n\t\t\t// 维护状态公共组件\r\n\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\tlet obj = {};\r\n\t\t\tlet countObj = {};\r\n\t\t\tcommonData.map((v) => {\r\n\t\t\t\tobj[v.id] = true;\r\n\t\t\t\tcountObj[v.id] = 1;\r\n\t\t\t});\r\n\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\tthis.store.itemObj = Object.assign({},{\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"stage\",\r\n\t\t\t\t\"masters\": null,\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"projectinfo\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\t\t\"treeType\": \"orderinfo\",\r\n\t\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\t\"customerPhone\": null,\r\n\t\t\t\t\t\t\t\t\"productNumber\": null,\r\n\t\t\t\t\t\t\t\t\"priceProduct\": 0,\r\n\t\t\t\t\t\t\t\t\"priceDiscount\": \"\",\r\n\t\t\t\t\t\t\t\t\"priceDeal\": 0,\r\n\t\t\t\t\t\t\t\t\"orderRemark\": null,\r\n\t\t\t\t\t\t\t\t\"json\": null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"code\": null,\r\n\t\t\t\t\t\t\"name\": null,\r\n\t\t\t\t\t\t\"customer\": null,\r\n\t\t\t\t\t\t\"productType\": [\"5\"],\r\n\t\t\t\t\t\t\"address\": null,\r\n\t\t\t\t\t\t\"description\": null,\r\n\t\t\t\t\t\t\"milepost\": null,\r\n\t\t\t\t\t\t\"builtArea\": null,\r\n\t\t\t\t\t\t\"totalCost\": null,\r\n\t\t\t\t\t\t\"builtType\": null,\r\n\t\t\t\t\t\t\"beginTime\": 0,\r\n\t\t\t\t\t\t\"endTime\": 0,\r\n\t\t\t\t\t\t\"constructionUnit\": null,\r\n\t\t\t\t\t\t\"constructionQualification\": null,\r\n\t\t\t\t\t\t\"partyaUnit\": null,\r\n\t\t\t\t\t\t\"unitQualification\": null,\r\n\t\t\t\t\t\t\"declarationAwards\": null,\r\n\t\t\t\t\t\t\"awardGrade\": null,\r\n\t\t\t\t\t\t\"buySoftware\": null,\r\n\t\t\t\t\t\t\"usageSituation\": null,\r\n\t\t\t\t\t\t\"background\": null,\r\n\t\t\t\t\t\t\"temporaryDecision\": null,\r\n\t\t\t\t\t\t\"temporaryManagerDesire\": null,\r\n\t\t\t\t\t\t\"temporaryRequirement\": null,\r\n\t\t\t\t\t\t\"temporaryBudgetStandard\": null,\r\n\t\t\t\t\t\t\"temporaryTotalAcceptability\": null,\r\n\t\t\t\t\t\t\"temporaryTotalRange\": null,\r\n\t\t\t\t\t\t\"temporaryBudget\": null,\r\n\t\t\t\t\t\t\"temporaryPriceDesire\": null,\r\n\t\t\t\t\t\t\"temporaryEstimatePrice\": null,\r\n\t\t\t\t\t\t\"temporaryManagersNumber\": null,\r\n\t\t\t\t\t\t\"temporaryWorkersNumber\": null,\r\n\t\t\t\t\t\t\"temporaryBeginTime\": 0,\r\n\t\t\t\t\t\t\"temporaryEndTime\": 0,\r\n\t\t\t\t\t\t\"temporaryBudgetEvaluation\": null,\r\n\t\t\t\t\t\t\"template\": 2,\r\n\t\t\t\t\t\t\"currentTaskState\": 0,\r\n\t\t\t\t\t\t\"currentProgress\": 0,\r\n\t\t\t\t\t\t\"state\": 0,\r\n\t\t\t\t\t\t\"stageId\": null,\r\n\t\t\t\t\t\t\"closeReason\": \"\",\r\n\t\t\t\t\t\t\"projectType\": 2\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": null,\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"stageName\": \"订单信息\"\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tonRef = (ref) => {\r\n\t\tthis.child = ref;\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 保存项目信息\r\n\tsaveProject = (params) => {\r\n\t\tthis.store.saveProject(params)\r\n\t\t.then((res) => {\r\n\t\t\tif (res.id !== null) {\r\n\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\tthis.child.onChangeVis();\r\n\t\t\t\tthis.store.projectId = res.id;\r\n\t\t\t\tthis.store.closeReason = res.closeReason;\r\n\t\t\t\tthis.store.projectName = res.name;\r\n\t\t\t\tthis.store.state = res.state;\r\n\t\t\t\t// 保存成功，获取树数据\r\n\t\t\t\tthis.store.getTree(res.id).then((mes) => {\r\n\t\t\t\t\tthis.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t\t\t// 项目信息 数据\r\n\t\t\t\t\tthis.store.itemObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"订单信息\")[0]);\r\n\t\t\t\t\t//（招投标、合同签订、实施过程、交付验收、发票验收）数据\r\n\t\t\t\t\tthis.store.commonData = Object.assign([], mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName !== \"订单信息\" && item.stageName !== \"实施交付\"));\r\n\t\t\t\t\t// 维护状态公共组件\r\n\t\t\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\tlet countObj = {};\r\n\t\t\t\t\tcommonData.map((v) => {\r\n\t\t\t\t\t\tobj[v.id] = true;\r\n\t\t\t\t\t\tcountObj[v.id] = 1;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\tthis.store.getReportDaysList();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存附件\r\n\tsaveAttachment = (params) => {\r\n\t\tthis.store.saveAttachments(params)\r\n\t\t.then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"附件保存成功\")\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"附件保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除附件\r\n\tdelNode = (param) => {\r\n\t\tthis.store.delNode(param)\r\n\t\t.then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"附件删除成功\")\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"附件删除失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新子组件状态\r\n\tupdateCount = (type, count) => {\r\n\t\tthis.setState({\r\n\t\t\t[type]: count\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存节点\r\n\tsaveNodes = (params) => {\r\n\t\tthis.store.saveNodes(params).then((res) => {\r\n\t\t\tif (res) {\r\n\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", res);\r\n\t\t\t\t// 更新步骤\r\n\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t//更新我的任务数\r\n\t\t\t\t//this.store.getMyTaskCount();\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新树\r\n\tupdateTree = () => {\r\n\t\tconst projectId = this.store.projectId;\r\n\t\tthis.store.getTree(projectId).then((mes) => {\r\n\t\t\tthis.store.treeData = Object.assign({}, mes); // 前端维护的树\r\n\t\t\t// 项目信息 数据\r\n\t\t\tlet itemObj = Object.assign({}, mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName == \"订单信息\")[0]);\r\n\t\t\t//（招投标、合同签订、实施过程、交付验收、发票验收）数据\r\n\t\t\tthis.store.commonData = Object.assign([], mes && mes.children.filter((item) => item.treeType == \"stage\" && item.stageName !== \"订单信息\" && item.stageName !== \"实施交付\"));\r\n\t\t\t// 维护状态公共组件\r\n\t\t\tlet commonData = JSON.parse(JSON.stringify(this.store.commonData));\r\n\t\t\tlet obj = {};\r\n\t\t\tlet countObj = {};\r\n\t\t\tcommonData.map((v) => {\r\n\t\t\t\tobj[v.id] = true;\r\n\t\t\t\tcountObj[v.id] = 2;\r\n\t\t\t});\r\n\t\t\tthis.store.itemObj = Object.assign({}, itemObj);\r\n\t\t\tthis.store.comStates = Object.assign({}, obj);\r\n\t\t\tthis.store.comCount = Object.assign({}, countObj);\r\n\t\t\tlet projectinfo = itemObj.children.filter((item) => {return item.treeType == \"projectinfo\"})[0];\r\n\t\t\tthis.store.projectName = projectinfo[\"name\"];\r\n\t\t\tthis.store.state = projectinfo[\"state\"];\r\n\t\t\tthis.store.closeReason = projectinfo[\"closeReason\"];\r\n\t\t\t// 更新步骤\r\n\t\t\tthis.store.getStageTree();\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {projectId, projectName, listData, itemObj, ossData, payObj, commonData, comStates, comCount} = this.store;\r\n\t\tconst {count, payCount} = this.state;\r\n\t\tlet isShow = projectId == null || projectId == \"\" ? true : false;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"con_bottom\">\r\n\t\t\t\t\t<Breadcrumb separator=\">\" style={{margin: '0'}}>\r\n\t\t\t\t\t\t<Breadcrumb.Item href={\"#/bpm/progresslist\"}>项目看板</Breadcrumb.Item>\r\n\t\t\t\t\t\t<Breadcrumb.Item>{projectName || \"新增劳务仓流程\"}</Breadcrumb.Item>\r\n\t\t\t\t\t</Breadcrumb>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*进度条*/}\r\n\t\t\t\t<ProgressList\r\n\t\t\t\t\tlistData={mobx.toJS(listData)}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tscrollToAnchor={this.scrollToAnchor}\r\n\t\t\t\t\tupdateTree={this.updateTree}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*订单中心*/}\r\n\t\t\t\t<Ordercenter\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\titemObj={mobx.toJS(itemObj)}\r\n\t\t\t\t\tsaveProject={this.saveProject}\r\n\t\t\t\t\tonRef={this.onRef}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tcount={count}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*招投标、合同签订*/}\r\n\t\t\t\t{mobx.toJS(commonData).length > 0 && mobx.toJS(commonData).filter((item) => item.treeType == \"stage\" && item.stageName !== \"开票收款\").map((item, index) => {\r\n\t\t\t\t\treturn (<WortileCommon\r\n\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\trowIndex={\"items\" + (index + 2)}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\ttreeData={item}\r\n\t\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\t\tdisabled={mobx.toJS(comStates)[item.id]}\r\n\t\t\t\t\t\toss={mobx.toJS(ossData)}\r\n\t\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\t\tcount={mobx.toJS(comCount)[item.id]}\r\n\t\t\t\t\t/>)\r\n\t\t\t\t})}\r\n\t\t\t\t{/*实施交付*/}\r\n\t\t\t\t<Delivery\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\ttreeData={mobx.toJS(payObj)}\r\n\t\t\t\t\tcount={payCount}\r\n\t\t\t\t\tupdateCount={this.updateCount}\r\n\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\tossData={mobx.toJS(ossData)}\r\n\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t/>\r\n\t\t\t\t{/*发票收款*/}\r\n\t\t\t\t{mobx.toJS(commonData).length > 0 && mobx.toJS(commonData).filter((item) => item.treeType == \"stage\" && item.stageName == \"开票收款\").map((item, index) => {\r\n\t\t\t\t\treturn (<WortileCommon\r\n\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\trowIndex={\"items\" + (index + 2)}\r\n\t\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\t\ttreeData={item}\r\n\t\t\t\t\t\tsaveNodes={this.saveNodes}\r\n\t\t\t\t\t\tsaveAttachment={this.saveAttachment}\r\n\t\t\t\t\t\tdelNode={this.delNode}\r\n\t\t\t\t\t\tdisabled={mobx.toJS(comStates)[item.id]}\r\n\t\t\t\t\t\toss={mobx.toJS(ossData)}\r\n\t\t\t\t\t\tisShow={isShow}\r\n\t\t\t\t\t\tcount={mobx.toJS(comCount)[item.id]}\r\n\t\t\t\t\t/>)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default Index;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/labor/Index.js","/*\r\n* 附件组件\r\n* */\r\nimport React from \"react\";\r\nimport {Upload, Icon, message} from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\n\r\nfunction getBase64(img, callback) {\r\n\tconst reader = new FileReader();\r\n\treader.addEventListener('load', () => callback(reader.result));\r\n\treader.readAsDataURL(img);\r\n}\r\n\r\nconst client = (self) => {\r\n\tconst {token} = self.state\r\n\t// ali-oss v6.x版本的写法\r\n\treturn new oss({\r\n\t\taccessKeyId: token.access_key_id,\r\n\t\taccessKeySecret: token.access_key_secret,\r\n\t\tstsToken: token.stsToken,\r\n\t\tregion: token.region, //\r\n\t\tbucket: token.bucket,//\r\n\t\tendpoint: token.OSS_ENDPOINT\r\n\t});\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n\t// 上传文件的路径，使用日期命名文件目录\r\n\treturn `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n\tconst url = uploadPath(path, file)\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tclient(self).multipartUpload(url, file).then(data => {\r\n\t\t\tresolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n\t\t}).catch(error => {\r\n\t\t\treject(error)\r\n\t\t})\r\n\t})\r\n}\r\n\r\nclass MyUpload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfileList: this.props.fileList,\r\n\t\t\tloading: false,\r\n\t\t\ttoken: {\r\n\t\t\t\taccess_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n\t\t\t\taccess_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n\t\t\t\tstsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n\t\t\t\tregion: 'oss-cn-beijing', // oss的region\r\n\t\t\t\tbucket: 'xinlj', // oss的bucket\r\n\t\t\t\tOSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n\t\t\t},\r\n\t\t\thost: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (JSON.stringify(nextProps.fileList) != JSON.stringify(this.props.fileList)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: nextProps.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (JSON.stringify(nextProps.ossData) != JSON.stringify(this.props.ossData)) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: nextProps.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.fileList) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tfileList: this.props.fileList\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (this.props.ossData) {\r\n\t\t\tlet token = JSON.parse(JSON.stringify(this.state.token));\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: Object.assign(token, {\r\n\t\t\t\t\taccess_key_id: this.props.ossData.accessKeyId, // oss的key_id\r\n\t\t\t\t\taccess_key_secret: this.props.ossData.accessKeySecret, // oss的secret\r\n\t\t\t\t\tstsToken: this.props.ossData.securityToken\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\thandleChange = (info) => {\r\n\t\tconst status = info.file.status;\r\n\r\n\t\t// 记录新上传的\r\n\t\tlet fileList = [...info.fileList];\r\n\t\tlet oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file) => {\r\n\t\t\treturn file.status && file.status === 'done';\r\n\t\t});  // 之前保存过的\r\n\t\tlet newFileList = JSON.parse(JSON.stringify(fileList));\r\n\t\tnewFileList = newFileList.filter((file) => {\r\n\t\t\tif (file.status && file.status === 'done') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tnewFileList = newFileList.map(file => {\r\n\t\t\tif (file.originFileObj) {\r\n\t\t\t\tconst url = this.state.host + uploadPath('path', file);\r\n\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\tuid: file.uid,\r\n\t\t\t\t\tname: file.name,\r\n\t\t\t\t\tstatus: \"done\",\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tfileId: null,\r\n\t\t\t\t\tfileName: file.name,\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tid: \"\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn file;\r\n\t\t});\r\n\t\tif (status == undefined) {\r\n\t\t\t// 处理附件\r\n\t\t\tlet array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n\t\t\tlet arr = [];\r\n\t\t\tarray.length && array.map((item, index) => {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tfileId: item.fileId,\r\n\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\tfilePath: item.filePath,\r\n\t\t\t\t\tpid: this.props.pid,\r\n\t\t\t\t\tprojectId: this.props.projectId,\r\n\t\t\t\t\tid: item.id\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tthis.props.saveAttachment(arr);\r\n\t\t} else if (status === \"removed\") {   // 删除\r\n\t\t\tlet id = info.file.id;\r\n\t\t\tif (id !== \"\" || id !== null) { // 删除已有的\r\n\t\t\t\tthis.props.delNode(id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tfileList: [...oldFileList, ...newFileList]\r\n\t\t});\r\n\t}\r\n\r\n\tbeforeUpload = (file) => {\r\n\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\tif (!true) {\r\n\t\t\tmessage.error('You can only upload JPG file!');\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2000;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessage.error('Image must smaller than 2MB!');\r\n\t\t}\r\n\t\tlet reader = new FileReader();\r\n\t\treader.readAsDataURL(file);\r\n\t\treader.onloadend = () => {\r\n\t\t\t// 使用ossupload覆盖默认的上传方法\r\n\t\t\tUploadToOss(this, '上传路径oss配置信息', file)\r\n\t\t\t.then(data => {\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn false; // 不调用默认的上传方法\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fileList} = this.state;\r\n\t\tconst props = {\r\n\t\t\tname: 'file',\r\n\t\t\tmultiple: this.props.multiple == undefined ? true : this.props.multiple,\r\n\t\t\tonChange: this.handleChange,\r\n\t\t\tbeforeUpload: this.beforeUpload,\r\n\t\t\tlistType: 'text',\r\n\t\t\tclassName: 'upload-list-inline',\r\n\t\t\tdisabled: this.props.disabled,\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Upload {...props} fileList={fileList}>\r\n\t\t\t\t{fileList.length >= 1 && this.props.multiple == false ? null :\r\n\t\t\t\t\t<Icon style={{fontSize: '25px', color: '#53B3E5'}} type=\"cloud-upload\"/>}\r\n\t\t\t</Upload>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MyUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/MyUpload.js","/*\r\n* 任务拆分组件\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport * as mobx from \"mobx\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tInputNumber,\r\n\tnotification,\r\n\tCard,\r\n\tPopconfirm,\r\n\tForm,\r\n\tIcon,\r\n\tRow,\r\n\tCol,\r\n\tSelect,\r\n\tmessage,\r\n\tDatePicker\r\n} from 'antd';\r\nimport * as utils from \"@/utils/utils\";\r\nimport {v4 as uuidv4} from \"uuid\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport moment from 'moment';\r\n\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\nconst openNotificationWithIcon = type => {\r\n\tnotification[type]({\r\n\t\tmessage: '已用工时不能大于预估工时',\r\n\t\tdescription:\r\n\t\t\t'若大于，请先调整预估工时',\r\n\t\tplacement: 'bottomRight'\r\n\t});\r\n};\r\n\r\n// 可编辑表格\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true,//false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t// 已用工时\r\n\tsaveTime = (e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e!==null&&e!==\"\") {\r\n\t\t\t    if (Number(e)>Number(values.totalHours)) {\r\n\t\t\t\t\topenNotificationWithIcon('warning');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\">\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'name') {  //子任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\tclassName=\"w\"\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'alreadyHours') {  // 已用工时\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t//onPressEnter={this.save}\r\n\t\t\t\t\t\t\tonChange={this.saveTime}\r\n\t\t\t\t\t\t\tonBlur={this.saveTime}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}小时\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w clearfix\" style={{minWidth: '155px'}}>\r\n\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdefaultValue={record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\tminWidth: '120px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '25px',\r\n\t\t\t\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tdefaultValue={record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'totalHours') {  // 总工时\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}小时\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n/*\r\n* 拆分子任务\r\n* */\r\n@observer\r\nclass TaskSplite extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 子任务的数据源\r\n\t\t\tcount: 0,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\t/*\r\n\t\t* subtask 子任务 nextProps.dataSource\r\n\t\t* */\r\n\t\tif (JSON.stringify(nextProps.dataSource) != JSON.stringify(this.props.dataSource)) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource === null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t}, () => {\r\n\t\t\t\tnextProps.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t});\r\n\t\tthis.props.onTaskRef(this)\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\r\n\t}\r\n\r\n\tclearState = () => {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: []\r\n\t\t});\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\")\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\thandleAdd = () => {\r\n\t\tconst {count, dataSource} = this.state;\r\n\t\tconst {addRecord} = this.props;\r\n\t\tconst newData = Object.assign(addRecord, {\"key\": count, id: \"!\" + uuidv4()});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t\t// console.log(this.state.dataSource, count, '新增')\r\n\t\t});\r\n\t};\r\n\r\n\thandleSave = row => {\r\n\t\t// 已用工时不能大于总工时\r\n\t\tif (Number(row.alreadyHours)>Number(row.totalHours)) {\r\n\t\t\t//openNotificationWithIcon('warning');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\tthis.props.handleSaveSubTask(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\tcollapseOnClick = () => {\r\n\t\tlet _this = this;\r\n\t\t_this.props.collapseOnChange();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务名称',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: 'center',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\trender: (text,) => (<span>{text}</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => {\r\n\t\t\t\t\treturn text == null ? \"\" : text.map(item => item.userName).join(\"、\");\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '预估工时',\r\n\t\t\t\tdataIndex: 'totalHours',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => (<span>{text}小时</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '已用工时',\r\n\t\t\t\tdataIndex: 'alreadyHours',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text, record) => (<span id={record.id}>{text}小时</span>)\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled,\r\n\t\t\t\talign: 'center',\r\n\t\t\t\trender: (text) => (<span>{text}</span>)\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<Card bordered style={{width: '100%'}}>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t<Icon className={disabled ? \"hidden\" : \"\"} onClick={this.handleAdd}\r\n\t\t\t\t      style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}} type=\"plus-circle\"/>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span={24} style={{textAlign: 'right', marginTop: '10px'}}>\r\n\t\t\t\t\t\t<Icon onClick={this.collapseOnClick}\r\n\t\t\t\t\t\t      title=\"收起\"\r\n\t\t\t\t\t\t      type=\"double-right\"\r\n\t\t\t\t\t\t      className=\"pointer\"\r\n\t\t\t\t\t\t      style={{color: '#808080'}}\r\n\t\t\t\t\t\t      rotate={-90}/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TaskSplite;\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/TaskSplite.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tSelect,\r\n\tmessage,\r\n\tInputNumber,\r\n\tnotification,\r\n\tPopover\r\n} from 'antd';\r\nimport TaskSplite from './TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\n\r\nlet runonlyonce = false;\r\nconst {Option} = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '20px',\r\n\t\t\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\t//onChange={this.save}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"w clearfix\">\r\n\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\" onConfirm={() => handleDelete(record)}>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\twidth: '35px',\r\n\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\tfontSize: '22px',\r\n\t\t\t\t\t\t\t\tfloat: 'left'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{record[dataIndex]==\"\"||record[dataIndex]==null?\"--\":record[dataIndex]}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 完成比例\r\n\t\t\tconst subNumber = record.children == null || record.children.length == 0 ? 0 : record.children.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": nextProps.pid,\r\n\t\t\t\t\t\"projectId\": nextProps.projectId,\r\n\t\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\t\"masters\": [],\r\n\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\t\"remark\": \"\"\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": this.props.pid,\r\n\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": null,\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\t\t/*if(true){ // 暂时控制不住多次事件监听\r\n\t\t\trunonlyonce = true;\r\n\t\t\tconsole.log('计')\r\n\r\n\t\t}*/\r\n\t\tthis.eventE1 = emitter.addListener('handletaskid', (obj) => {\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount() {\r\n\t\temitter.removeListener(this.eventE1)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\" + err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\tconst newData = Object.assign(primaryData, {key: count, id: \"!\" + uuidv4()});\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({\r\n\t\t\texpandedKeys: keys\r\n\t\t}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n\thandleApart = (record) => {\r\n\t\t// if (key==null||key==\"\") {\r\n\t\t//    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t\t//    return false;\r\n\t\t// }\r\n\t\t// 记录当前主任务没有改动的数据\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({}, record),\r\n\t\t\tactiveSub: Object.assign([], record.children == null ? [] : record.children),\r\n\t\t\tsubTaskDis: false, // 可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record.id);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t\t// 如果子任务为空，保存是调用新街口\r\n\t\tlet length = this.state.subtasks.length\r\n\t\tif (length == 0) {\r\n\t\t\tthis.store.delNodeByPid({pid: id})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 子任务名称和负责人必填\r\n\t\t\tconst subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n\t\t\tconst isSub = subtasks.filter((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.masters == null || item.masters.length == 0\r\n\t\t\t})\r\n\t\t\tif (isSub.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"请您填写任务名称和负责人\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst isLarge = subtasks.filter((item) => {\r\n\t\t\t\treturn Number(item.alreadyHours) > Number(item.totalHours)\r\n\t\t\t})\r\n\t\t\tif (isLarge.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"已用工时不能大于预估工时\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// 判断是新增的主任务进行拆解的\r\n\t\t\tif (id.startsWith(\"!\")) {\r\n\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t} else {\r\n\t\t\t\t// 原有\r\n\t\t\t\tthis.store.saveSubTasks(this.state.subtasks)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res && res.length > 0) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t\tthis.subtask.clearState();\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks: newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n\tonCalac = (key) => {\r\n\t\tthis.saveExpandedRows(key);\r\n\t\tthis.store.isEdit = false;\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n\t\tthis.subtask.clearState();\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({})\r\n\t\t});\r\n\t}\r\n\r\n\t// 折叠收起\r\n\tonPackup = (record) => {\r\n\t\tlet _this = this;\r\n\t\tconst defaultSource = _this.state.activeSub.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours,\r\n\t\t\t}\r\n\t\t});  // 拆解前默认数据\r\n\t\tconst rearSource = _this.state.subtasks.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解后内容变动数据\r\n\t\t// 当前拆解数据内容变化，给提示是否保存\r\n\t\tif (JSON.stringify(defaultSource) == JSON.stringify(rearSource)) {\r\n\t\t\t// 内容没有变动，直接取消\r\n\t\t\t_this.onCalac(record.id);\r\n\t\t} else {\r\n\t\t\tModal.confirm({\r\n\t\t\t\ttitle: '是否对所更改内容保存',\r\n\t\t\t\tokText: '保存',\r\n\t\t\t\tcancelText: '不保存',\r\n\t\t\t\tonOk() {\r\n\t\t\t\t\t_this.saveSubTaskRecord(record.id);\r\n\t\t\t\t},\r\n\t\t\t\tonCancel() {\r\n\t\t\t\t\t_this.onCalac(record.id);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonTaskRef = (ref) => {\r\n\t\tthis.subtask = ref\r\n\t}\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {dataSource, expandedKeys, subTaskDis} = this.state;\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length > 0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (<div\r\n\t\t\t\t\t\t// id={`/?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t\tid={`${record.id}`}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tclassName=\"pr\">\r\n\t\t\t\t\t\t<Icon className={record.delayType !== 0 && disabled ? \"\" : \"hidden\"}\r\n\t\t\t\t\t\t      style={{\r\n\t\t\t\t\t\t\t      fontSize: '18px',\r\n\t\t\t\t\t\t\t      position: 'absolute',\r\n\t\t\t\t\t\t\t      left: '5px',\r\n\t\t\t\t\t\t\t      color: 'red',\r\n\t\t\t\t\t\t\t      top: '50%',\r\n\t\t\t\t\t\t\t      transform: 'translateY(-50%)'\r\n\t\t\t\t\t\t      }} type=\"exclamation-circle\"/>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</div>);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null ? \"\" : text.map(item => item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\t>{text}%</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: '14%',\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t<p><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t           key={'task_' + index}><span\r\n\t\t\t\t\t\t\t\t\tstyle={{fontWeight: '700', color: '#333'}}>备注{index + 1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t\t\t<span><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_' + index}\r\n\t\t\t\t\t\t\t\t\t\t              className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px', fontWeight: '700', color: '#333'}}>\r\n\t\t                                  备注{index + 1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {\r\n\t\t\t\t\t\treturn item == record.id\r\n\t\t\t\t\t}).length > 0 && !subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\t\t\t\tif (disabled) {  // 详情态\r\n\t\t\t\t\t\t\tif (subNumber == 0) { // 子任务数等于0\r\n\t\t\t\t\t\t\t\treturn <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t\t\t\t\t\t\t//return <span>{subNumber}</span>\r\n\t\t\t\t\t\t\t} else {  // 子任务数大于0\r\n\t\t\t\t\t\t\t\treturn (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\"\r\n\t                                      style={{marginLeft: \"10px\"}} title=\"编辑\" type=\"edit\"/>\r\n                                </span>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {  // 编辑态\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<a onClick={this.handleApart.bind(this, record)}>{subNumber == 0 ? actionName : subNumber}</a>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord = {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id || \"\",\r\n\t\t\t\tprojectId: record.projectId || \"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters == null ? [] : record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\taddRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie && !disabled ? this.onPackup(record) : this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n\t\t\t\t\tdisabled={subTaskDis}\r\n\t\t\t\t\t//id={record.id}\r\n\t\t\t\t\tonTaskRef={this.onTaskRef}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/worktile/EditableTable.js","/*\r\n* 实施交付业务组件\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Card, Form, Row, Col, Button, Calendar, Dropdown, Spin, message, Modal} from 'antd';\r\nimport EditableTable from '@/components/labor/EditableTable';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as utils from \"@/utils/utils\";\r\nimport moment from 'moment';\r\nimport * as  mobx from 'mobx';\r\nconst { confirm } = Modal;\r\n@Form.create()\r\n@observer\r\nclass Delivery extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\thidden: true,  // 面板折叠展开\r\n\t\t\tdataSource: [],   // 任务的数据源\r\n\t\t\tcurrentTree: {}, // 存储当前组件树对象\r\n\t\t\tpid: '',     // 父节点id\r\n\t\t\tprojectId: \"\", // 项目id\r\n\t\t\tdefaultTree: {}, // 记录当前树的默认数据\r\n\t\t\tcalendarVis: false,\r\n\t\t\tisLoading: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {treeData, disabled} = nextProps;\r\n\t\tif (typeof treeData == 'object' && Object.keys(treeData).length !== 0 && treeData !== this.props.treeData) {\r\n\t\t\tif (treeData.children === null) { // 没有任务集合\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource: []\r\n\t\t\t\t});\r\n\t\t\t} else {  // 包含任务集合\r\n\t\t\t\tconst dataSource = treeData.children.filter((item) => item.treeType == \"taskc\")[0].children;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource,\r\n\t\t\t\t\tcurrentTree: Object.assign({}, treeData),   // 更新同步\r\n\t\t\t\t\tpid: treeData.children.filter((item) => item.treeType == \"taskc\")[0].id,\r\n\t\t\t\t\tprojectId: treeData.children.filter((item) => item.treeType == \"taskc\")[0].projectId,\r\n\t\t\t\t\t//hidden: disabled,\r\n\t\t\t\t}, () => {\r\n\t\t\t\t\t// 更新记录当前树的附件数据\r\n\t\t\t\t\tlet attc = treeData.children.filter((item) => item.treeType == \"attc\")[0]\r\n\t\t\t\t\tif (Object.keys(this.state.defaultTree).length > 0) {\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tdefaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {treeData, disabled} = this.props;\r\n\t\tif (typeof treeData == 'object' && Object.keys(treeData).length !== 0) {\r\n\t\t\tif (treeData.children === null) { // 没有任务集合\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource: []\r\n\t\t\t\t});\r\n\t\t\t} else {  // 包含子任务集合\r\n\t\t\t\tconst dataSource = treeData.children.filter((item) => item.treeType == \"taskc\")[0].children;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tdataSource,\r\n\t\t\t\t\tcurrentTree: Object.assign({}, treeData),\r\n\t\t\t\t\tpid: treeData.children.filter((item) => item.treeType == \"taskc\")[0].id,\r\n\t\t\t\t\tprojectId: treeData.children.filter((item) => item.treeType == \"taskc\")[0].projectId,\r\n\t\t\t\t\t//hidden: disabled\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {currentTree} = _this.state;\r\n\t\t_this.props.form.validateFieldsAndScroll((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\t_this.props.saveNodes(currentTree);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\thidden: !this.state.hidden\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// 更新该节点树 数据\r\n\tsaveData2 = (taskdata, key) => {\r\n\t\tconst {currentTree} = this.state;\r\n\t\tlet newData = [];\r\n\t\ttaskdata.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewData.push(obj);\r\n\t\t});\r\n\t\tlet currentTaskC = currentTree.children.filter(item => item.treeType === 'taskc')[0];\r\n\t\tcurrentTaskC = Object.assign(currentTaskC, {\"children\": taskdata})\r\n\t\tlet stepChildren = currentTree.children;\r\n\t\tconst taskcIndex = stepChildren.findIndex(item => {\r\n\t\t\treturn item.treeType === 'taskc'\r\n\t\t})\r\n\t\tstepChildren[taskcIndex] = currentTaskC;\r\n\t\tthis.setState({currentTree: Object.assign(currentTree, {\"children\": stepChildren})});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t});\r\n\t\tthis.props.updateCount('payCount', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden\r\n\t\t});\r\n\t}\r\n\r\n\t// 日历切换\r\n\tonPanelChange = () => {\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true\r\n\t\t},()=>{\r\n\t\t\tsetTimeout(()=>{\r\n                 this.setState({\r\n\t                 isLoading: false\r\n                 }, ()=>{\r\n\t                 // 跳转地址\r\n\t                 this.store.getProjectByWsProjectId().then((res)=>{\r\n                         const {title, projectId}=res;\r\n                         if (projectId!==null&&projectId!==\"\") {\r\n\t                         let url = 'https://www.bocspace.cn/eeop/#/xmgl?projectId='+`${projectId}`+'&name='+`${title}`;\r\n\t                         window.open(url, '_bank');\r\n                         } else {\r\n                           this.showConfirm();\r\n                           return false;\r\n                         }\r\n\t                 });\r\n                 })\r\n\t\t\t}, 1000);\r\n\t\t});\r\n\t}\r\n\r\n\tonVisibleChange = () => {\r\n\t\tthis.setState({\r\n\t\t\tcalendarVis: !this.state.calendarVis\r\n\t\t});\r\n\t}\r\n\r\n\tdisabledDate = (current) => {\r\n\t\treturn current && current > moment().endOf('day');  //当天之前的不可选，包括当天\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (userIds)=>{\r\n\t\tconst {currentTree} = this.state;\r\n\t\t// 更新当前树\r\n\t\tconst currentData = Object.assign({}, currentTree, {masters:userIds});\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n\t}\r\n\r\n\tdateCellRender = (value) => {\r\n\t\tconst {reportDays}=this.store;\r\n\t\tconst val = moment(value).format(\"YYYY-MM-DD\");\r\n\t\tconst isShow = mobx.toJS(reportDays).includes(val);\r\n\t\treturn (\r\n\t\t\t<img\r\n\t\t\t\tclassName={isShow?\"\":\"hidden\"}\r\n\t\t\t\tstyle={{position: 'relative', 'top': '-5px'}}\r\n\t\t\t\twith=\"16px\"\r\n\t\t\t\theight=\"16px\"\r\n\t\t\t\tsrc=\"./images/zhmy_succes.png\" alt=\"\"/>\r\n\t\t);\r\n\t}\r\n\r\n\tshowConfirm = () => {\r\n\t\tconfirm({\r\n\t\t\tclassName: \"tc modal_tc\",\r\n\t\t\t//iconType: 'exclamation-circle',\r\n\t\t\ticon: null,\r\n\t\t\ttitle: '请先在施工日志中关联项目',\r\n\t\t\tcontent: '',\r\n\t\t\tonOk() {\r\n\t\t\t\tlet url = 'https://www.bocspace.cn/eeop/#/construction';\r\n\t\t\t\twindow.open(url, '_bank');\r\n\t\t\t},\r\n\t\t\tonCancel() {\r\n\r\n\t\t\t},\r\n\t\t\tokText: '前往关联',\r\n\t\t\tcancelText: '关闭',\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet _this = this;\r\n\t\tconst {getFieldDecorator} = _this.props.form;\r\n\t\tconst {count, isShow} = this.props;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst {state, projectId} = this.store;\r\n\t\tconst {isLoading, calendarVis, hidden, currentTree, pid} = _this.state;\r\n\t\tlet currentDataSource = currentTree.children != null && currentTree.children[0].children != null ? currentTree.children[0].children : [];\r\n\r\n\t\treturn (\r\n\t\t\t<Card bordered style={{width: '100%'}} className=\"mt20\">\r\n\t\t\t\t<Spin tip={\"正在跳转，请稍等...\"} spinning={isLoading} delay={1000}>\r\n\t\t\t\t<h3 id={currentTree.id} className=\"kanban_title mb20\">实施交付</h3></Spin>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                     {hidden ?\r\n\t                     <Button disabled={isShow} className={state == 2 ? \"hidden\" : \"\"} type=\"link\"\r\n\t                             onClick={this.onChangeVis}>{count == 1 ? \"创建\" : \"编辑\"}</Button> :\r\n\t                     <div>\r\n\t\t                     <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                     <span onClick={this.handleSubmit}>保存</span>\r\n\t                     </div>}\r\n                </span>\r\n\t\t\t\t<Form className={count == 1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择主负责人'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\tdata={currentTree&&currentTree.masters==null?[]:currentTree.masters}\r\n\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\twidth='32px'\r\n\t\t\t\t\t\t\t\theight=\"32px\"\r\n\t\t\t\t\t\t\t\tstyle={{verticalAlign: 'middle'}}\r\n\t\t\t\t\t\t\t\tsrc='./images/delivery.png'/>\r\n\t\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tvisible={calendarVis}\r\n\t\t\t\t\t\t\t\tonVisibleChange={this.onVisibleChange}\r\n\t\t\t\t\t\t\t\toverlay={<div style={{\r\n\t\t\t\t\t\t\t\t\twidth: 300,\r\n\t\t\t\t\t\t\t\t\tbackground: '#FFF',\r\n\t\t\t\t\t\t\t\t\tborder: '1px solid #d9d9d9',\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<Calendar\r\n\t\t\t\t\t\t\t\t\t\tdisabledDate={this.disabledDate}\r\n\t\t\t\t\t\t\t\t\t\tdateCellRender={this.dateCellRender}\r\n\t\t\t\t\t\t\t\t\t\tfullscreen={false}\r\n\t\t\t\t\t\t\t\t\t\tonSelect={this.onPanelChange}/>\r\n\t\t\t\t\t\t\t\t</div>}>\r\n\t\t\t\t\t\t\t\t<a className=\"ant-dropdown-link\" onClick={e => e.preventDefault()}>\r\n\t\t\t\t\t\t\t\t\t施工日志\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n\t\t\t\t{/*任务*/}\r\n\t\t\t\t{count == 1 ? null : <EditableTable\r\n\t\t\t\t\tdataSource={currentDataSource}\r\n\t\t\t\t\tsaveData={this.saveData2}\r\n\t\t\t\t\tprojectId={projectId}\r\n\t\t\t\t\tpid={pid}\r\n\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\tsaveAttachment={this.props.saveAttachment}\r\n\t\t\t\t\tdelNode={this.props.delNode}\r\n\t\t\t\t\tossData={this.props.ossData}\r\n\t\t\t\t/>}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default Delivery;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/Delivery.js","/*\r\n* Table组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from \"mobx-react\";\r\nimport {\r\n\tTable,\r\n\tInput,\r\n\tDatePicker,\r\n\tPopconfirm,\r\n\tForm,\r\n\tModal,\r\n\tIcon,\r\n\tSelect,\r\n\tmessage,\r\n\tInputNumber,\r\n\tDropdown,\r\n\tMenu,\r\n\tPopover\r\n} from 'antd';\r\nimport TaskSplite from '@/components/worktile/TaskSplite';\r\nimport moment from 'moment';\r\nimport emitter from \"@/utils/events\";\r\nimport * as  mobx from 'mobx';\r\nimport * as utils from '@/utils/utils';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport PayUpload from \"@/components/labor/PayUpload\";\r\n\r\nlet runonlyonce = false;\r\nconst {Option} = Select;\r\nconst EditableContext = React.createContext();\r\nconst EditableRow = ({form, index, ...props}) => (\r\n\t<EditableContext.Provider value={form}>\r\n\t\t<tr {...props} />\r\n\t</EditableContext.Provider>\r\n);\r\nconst EditableFormRow = Form.create()(EditableRow);\r\nconst widthDESIGN = {2: '13%', 4: '10%'};  // 自定义表格宽度\r\n\r\n\r\n/*自定义编辑组件*/\r\nclass EditableCell extends React.Component {\r\n\tstate = {\r\n\t\tediting: true, //false,\r\n\t\tuserIds: [],\r\n\t};\r\n\ttoggleEdit = () => {\r\n\t\tconst editing = !this.state.editing;\r\n\t\tthis.setState({editing}, () => {\r\n\t\t\tif (editing) {\r\n\t\t\t\tthis.input.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tsave = e => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (error && error[e.currentTarget.id]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//this.toggleEdit();\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t};\r\n\t//日期格式保存\r\n\tsaveDate = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('beginTime')) {\r\n\t\t\t\tvalues[\"beginTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"endTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\tsaveDate2 = (date, dateString) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tthis.form.validateFields((error, values) => {\r\n\t\t\tif (values.hasOwnProperty('endTime')) {\r\n\t\t\t\tvalues[\"endTime\"] = moment(dateString, 'YYYY-MM-DD').valueOf();\r\n\t\t\t}\r\n\t\t\tdelete values[\"beginTime\"];\r\n\t\t\tdelete values[\"masters\"];\r\n\t\t\thandleSave({...record, ...values});\r\n\t\t});\r\n\t}\r\n\thandleSelChange = (val, e) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item) => {\r\n\t\t\t\treturn {userId: item.props.value, userName: item.props.children}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\r\n\t//\r\n\tupdatePerson = (users) => {\r\n\t\tconst {record, handleSave} = this.props;\r\n\t\tlet data = {}\r\n\t\tlet userIds;\r\n\t\tif (users.length) {\r\n\t\t\tuserIds = users\r\n\t\t} else {\r\n\t\t\tuserIds = []\r\n\t\t}\r\n\t\tdata[\"masters\"] = userIds;\r\n\t\thandleSave({...record, ...data});\r\n\t}\r\n\tonBlur = () => {\r\n\t\t//this.toggleEdit();\r\n\t}\r\n\t//设置开始日期不能选择的时间\r\n\tdisabledStartDate = startValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!startValue || !record.endTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn startValue.valueOf() > record.endTime.valueOf()\r\n\t}\r\n\t//设置结束不能选择的时间\r\n\tdisabledEndDate = endValue => {\r\n\t\tconst {record} = this.props;\r\n\t\tif (!endValue || !record.beginTime) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn endValue.valueOf() <= record.beginTime.valueOf()\r\n\t}\r\n\trenderCell = form => {\r\n\t\tthis.form = form;\r\n\t\tconst {children, dataIndex, record, title, personData, handleDelete} = this.props;\r\n\t\tconst {editing} = this.state;\r\n\t\tif (dataIndex == 'name') {  // 任务\r\n\t\t\treturn editing ? (\r\n\t\t\t\t<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className=\"w\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tdefaultValue={record[dataIndex]}\r\n\t\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\t\t//onChange={this.save}\r\n\t\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfloat: 'right',\r\n\t\t\t\t\t\twidth: 'calc(100% - 35px)',\r\n\t\t\t\t\t\tminHeight: '31px'\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'masters') {  // 负责人\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}} className=\"w\">\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex].map((item) => {\r\n\t\t\t\t\t\treturn item.userId\r\n\t\t\t\t\t}),\r\n\t\t\t\t})(\r\n\t\t\t\t\t<div className=\"w\" ref={node => (this.input = node)}>\r\n\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\tdata={record[dataIndex] == null || record[dataIndex].length == 0 ? [] : record[dataIndex].length > 0 && record[dataIndex]}\r\n\t\t\t\t\t\t\tupdatePerson={this.updatePerson}\r\n\t\t\t\t\t\t\tdisabled={!editing}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'beginTime') { // 开始日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate}\r\n\t\t\t\t\t\t//设置开始日期\r\n\t\t\t\t\t\tdisabledDate={this.disabledStartDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'endTime') { // 截止日期\r\n\t\t\t// 日期时间戳转换字符串\r\n\t\t\tconst numberTostring = record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(record[dataIndex]).format('YYYY-MM-DD');\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\trules: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : moment(numberTostring, \"YYYY-MM-DD\")\r\n\t\t\t\t})(\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tstyle={{minWidth: '120px'}}\r\n\t\t\t\t\t\tformat=\"YYYY-MM-DD\"\r\n\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\tonChange={this.saveDate2}\r\n\t\t\t\t\t\t//设置结束不能选择的时间\r\n\t\t\t\t\t\tdisabledDate={this.disabledEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Form.Item>) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'rate') {  // 完成比例\r\n\t\t\tlet subTasks = record.children != null && record.children.filter((item) => {\r\n\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t})\r\n\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else if (dataIndex == 'remark') {  // 备注\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t\tplaceholder=\"请输入\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {  // 完成比例\r\n\t\t\tconst subNumber = record.children == null || record.children.length == 0 ? 0 : record.children.length\r\n\t\t\tconst isEdit = subNumber > 0 ? true : false;\r\n\t\t\treturn editing ? (<Form.Item style={{margin: 0}}>\r\n\t\t\t\t\t{form.getFieldDecorator(dataIndex, {\r\n\t\t\t\t\t\trules: [{\r\n\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\tmessage: `${title}是必输`,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\tinitialValue: record[dataIndex] == null || record[dataIndex] == 0 ? \"\" : record[dataIndex],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<InputNumber\r\n\t\t\t\t\t\t\tdisabled={isEdit}\r\n\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\tref={node => (this.input = node)}\r\n\t\t\t\t\t\t\tonPressEnter={this.save}\r\n\t\t\t\t\t\t\tonBlur={this.save}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Form.Item>\r\n\t\t\t) : (<div\r\n\t\t\t\t\tclassName=\"editable-cell-value-wrap\"\r\n\t\t\t\t\tstyle={{minHeight: '31px'}}\r\n\t\t\t\t\tonClick={this.toggleEdit}\r\n\t\t\t\t>\r\n\t\t\t\t\t{children}%\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\teditable,\r\n\t\t\tdataIndex,\r\n\t\t\ttitle,\r\n\t\t\trecord,\r\n\t\t\tindex,\r\n\t\t\thandleSave,\r\n\t\t\tchildren,\r\n\t\t\tpersonData,\r\n\t\t\t...restProps\r\n\t\t} = this.props;\r\n\t\treturn (\r\n\t\t\t<td {...restProps}>\r\n\t\t\t\t{editable ? (\r\n\t\t\t\t\t<EditableContext.Consumer>{this.renderCell}</EditableContext.Consumer>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tchildren\r\n\t\t\t\t)}\r\n\t\t\t</td>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\n* 编辑table\r\n* */\r\n@observer\r\nclass EditableTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],  // 任务数据源\r\n\t\t\tcount: 0,        // table的key\r\n\t\t\tprimaryData: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": \"\",\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t}],\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}, // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t\tactiveObj: {}, // 记录拆解前主任务数据\r\n\t\t\tactiveSub: [], // 记录拆解前子任务数据\r\n\t\t\tsubTaskDis: false, // 控制子任务的编辑状态\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps, nextContext) {\r\n\t\tif (nextProps.dataSource != this.props.dataSource) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? [] : nextProps.dataSource.map((item, index) => {\r\n\t\t\t\t\treturn Object.assign(item, {key: index + 1})\r\n\t\t\t\t}),\r\n\t\t\t\tcount: nextProps.dataSource == null || nextProps.dataSource.length == 0 ? 0 : nextProps.dataSource.length,\r\n\t\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\"pid\": nextProps.pid,\r\n\t\t\t\t\t\"projectId\": nextProps.projectId,\r\n\t\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\t\"masters\": [],\r\n\t\t\t\t\t\"children\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\t\"remark\": \"\"\r\n\t\t\t\t}) // 新增任务数据\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({\r\n\t\t\tdataSource: this.props.dataSource == null || this.props.dataSource.length == 0 ? [] : this.props.dataSource.map((item, index) => {\r\n\t\t\t\treturn Object.assign(item, {\"key\": index + 1})\r\n\t\t\t}),\r\n\t\t\tcount: this.props.dataSource === null || this.props.dataSource.length == 0 ? 0 : this.props.dataSource.length,\r\n\t\t\tprimaryData: Object.assign({}, {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": this.props.pid,\r\n\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\"treeType\": \"task\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\t\t\"projectId\": this.props.projectId,\r\n\t\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\t\t\"type\": 0\r\n\t\t\t\t\t}],\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"rate\": 0,\r\n\t\t\t\t\"nodeCount\": null,\r\n\t\t\t\t\"beginTime\": null,\r\n\t\t\t\t\"endTime\": null,\r\n\t\t\t\t\"orders\": 0,\r\n\t\t\t\t\"remark\": \"\"\r\n\t\t\t}), // 新增任务数据\r\n\t\t\texpandedKeys: [], // 折叠\r\n\t\t\tkeys: [], // 折叠\r\n\t\t\tsubtasks: [],\r\n\t\t});\r\n\r\n\t\tthis.eventE3 = emitter.addListener('handletaskid', (obj)=>{\r\n\t\t\tthis.getKeyByShowRow(obj.pid, obj.pid, obj.isEdit);\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillUnMount(){\r\n\t\temitter.removeListener(this.eventE3)\r\n\t}\r\n\r\n\tgetKeyByShowRow = (key, id, isEdit) => {\r\n\t\t// 填报2  查看1\r\n\t\tif (isEdit == 2) {\r\n\t\t\tthis.saveExpandedRows(key)\r\n\t\t} else {\r\n\t\t\tthis.handleView(key);\r\n\t\t}\r\n\t\tthis.scrollToAnchor(id);\r\n\t}\r\n\r\n\t// 锚点定位\r\n\tscrollToAnchor = (anchorName) => {\r\n\t\tif (anchorName) {\r\n\t\t\ttry {\r\n\t\t\t\tlet anchorElement = document.getElementById(anchorName);\r\n\t\t\t\tif (anchorElement) {\r\n\t\t\t\t\tanchorElement.scrollIntoView({block: 'center'});\r\n\t\t\t\t}\r\n\t\t\t} catch(err) {\r\n\t\t\t\tconsole.log(\"scrollToAnchorERR=>\"+err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 删除\r\n\thandleDelete = (record) => {\r\n\t\tconst {id, key} = record;\r\n\t\tif (id !== \"\" && id !== null && !id.startsWith(\"!\")) { // 删除原来已有的\r\n\t\t\tthis.store.delNode(id).then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tmessage.success(\"删除成功\");\r\n\t\t\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"删除失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else { // 删除新增的\r\n\t\t\tconst dataSource = [...this.state.dataSource];\r\n\t\t\tthis.setState({\r\n\t\t\t\tdataSource: dataSource.filter(item => item.key !== key)\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.props.saveData(this.state.dataSource, key);\r\n\t\t\t\t// 更新tree\r\n\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"del\", record);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 新增\r\n\thandleAdd = () => {\r\n\t\tconst {dataSource, primaryData, count} = this.state;\r\n\t\tconst {pid, projectId} = this.props;\r\n\t\t//const newData = Object.assign(primaryData, {key: count, id: \"!\" + uuidv4()});\r\n\t\tlet uuid = \"!\" + uuidv4();\r\n\t\tconst newData = Object.assign({}, {\r\n\t\t\t\"id\": uuid,\r\n\t\t\t\"pid\": pid,\r\n\t\t\t\"projectId\": projectId,\r\n\t\t\t\"treeType\": \"task\",\r\n\t\t\t\"masters\": [],\r\n\t\t\t\"children\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"id\": \"!\" + uuidv4(),\r\n\t\t\t\t\t\"pid\": uuid,\r\n\t\t\t\t\t\"projectId\": projectId,\r\n\t\t\t\t\t\"treeType\": \"attc\",\r\n\t\t\t\t\t\"masters\": null,\r\n\t\t\t\t\t\"children\": null,\r\n\t\t\t\t\t\"name\": \"附件\",\r\n\t\t\t\t\t\"type\": 0\r\n\t\t\t\t}],\r\n\t\t\t\"name\": \"\",\r\n\t\t\t\"rate\": 0,\r\n\t\t\t\"nodeCount\": null,\r\n\t\t\t\"beginTime\": null,\r\n\t\t\t\"endTime\": null,\r\n\t\t\t\"orders\": 0,\r\n\t\t\t\"remark\": \"\"\r\n\t\t});\r\n\t\t//console.log(newData, '新增')\r\n\t\tthis.setState({\r\n\t\t\tdataSource: [...dataSource, newData],\r\n\t\t\tcount: count + 1,\r\n\t\t}, () => {\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"add\", newData);\r\n\t\t});\r\n\t};\r\n\r\n\t// 保存\r\n\thandleSave = row => {\r\n\t\tconst newData = [...this.state.dataSource];\r\n\t\tconst index = newData.findIndex(item => row.key === item.key);\r\n\t\tconst item = newData[index];\r\n\t\tnewData.splice(index, 1, {\r\n\t\t\t...item,\r\n\t\t\t...row,\r\n\t\t});\r\n\t\tthis.setState({dataSource: newData}, () => {\r\n\t\t\t// 更新保存数据\r\n\t\t\tthis.props.saveData(this.state.dataSource);\r\n\t\t\tlet newRow = JSON.parse(JSON.stringify({...row}));\r\n\t\t\t// 更新tree\r\n\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", newRow);\r\n\t\t});\r\n\t};\r\n\r\n\t// 折叠效果\r\n\tsaveExpandedRows = (key) => {\r\n\t\tlet _this = this;\r\n\t\tconst {keys} = _this.state;\r\n\t\tif (keys.indexOf(key) >= 0) {\r\n\t\t\tkeys.splice(keys.indexOf(key), 1);\r\n\t\t} else {\r\n\t\t\tkeys.push(key);\r\n\t\t}\r\n\t\t_this.setState({expandedKeys: keys}, () => {\r\n\t\t\tlet obj = {[_this.props.id]: keys};\r\n\t\t\tlet expandedKeys = JSON.parse(JSON.stringify(_this.store.expandedKeys));\r\n\t\t\t_this.store.expandedKeys = Object.assign(expandedKeys, obj);\r\n\t\t});\r\n\t}\r\n\r\n\t// 查看\r\n\thandleView = (record) => {\r\n\t\tthis.setState({\r\n\t\t\tsubTaskDis: true, // 不可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record);\r\n\t\t});\r\n\t}\r\n\r\n\t// 拆解\r\n\thandleApart = (record) => {\r\n\t\t// if (key==null||key==\"\") {\r\n\t\t//    message.warn(\"请先保存主任务，主任务保存后才能拆解子任务\");\r\n\t\t//    return false;\r\n\t\t// }\r\n\t\t// 记录当前主任务没有改动的数据\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({}, record),\r\n\t\t\tactiveSub: Object.assign([], record.children == null ? [] : record.children),\r\n\t\t\tsubTaskDis: false, // 可编辑\r\n\t\t}, () => {\r\n\t\t\tthis.saveExpandedRows(record.id);\r\n\t\t});\r\n\t}\r\n\r\n\t// 保存子任务\r\n\tsaveSubTaskRecord = (id) => {\r\n\t\t// 如果子任务为空，保存是调用新街口\r\n\t\tlet length = this.state.subtasks.length\r\n\t\tif (length == 0) {\r\n\t\t\tthis.store.delNodeByPid({pid: id})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\t// 更新树\r\n\t\t\t\t\tthis.props.updateTree();\r\n\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t//更新我的任务数\r\n\t\t\t\t\tthis.store.getMyTaskCount();\r\n\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// 子任务名称和负责人必填\r\n\t\t\tconst subtasks = JSON.parse(JSON.stringify(this.state.subtasks));\r\n\t\t\tconst isSub = subtasks.filter((item) => {\r\n\t\t\t\treturn item.name == \"\" || item.masters == null || item.masters.length == 0\r\n\t\t\t})\r\n\t\t\tif (isSub.length > 0) {  // true\r\n\t\t\t\tmessage.warn(\"请您填写任务名称和负责人\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 判断是新增的主任务进行拆解的\r\n\t\t\tif (id.startsWith(\"!\")) {\r\n\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t} else {\r\n\t\t\t\t// 原有\r\n\t\t\t\tthis.store.saveSubTasks(this.state.subtasks)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res && res.length > 0) {\r\n\t\t\t\t\t\tmessage.success(\"保存成功\")\r\n\t\t\t\t\t\tthis.subtask.clearState();\r\n\t\t\t\t\t\t// 更新tree\r\n\t\t\t\t\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\t\t\t\t\tlet record = utils.getRecord(treeData, id);\r\n\t\t\t\t\t\t// 如果存在 attachments 更新的时候要添加附件集\r\n\t\t\t\t\t\tlet attachments = record && record.children != null && record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'attc'\r\n\t\t\t\t\t\t})[0];\r\n\t\t\t\t\t\tif (attachments) {\r\n\t\t\t\t\t\t\tres.push(attachments);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.store.treeData = utils.updateTreeData(treeData, \"updateChildren\", res);\r\n\t\t\t\t\t\t// 更新步骤\r\n\t\t\t\t\t\tthis.store.getStageTree();\r\n\t\t\t\t\t\tthis.saveExpandedRows(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessage.error(\"保存失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 更新子任务数据\r\n\thandleSaveSubTask = (subtasks) => {\r\n\t\tlet newSubTasks = [];\r\n\t\tsubtasks.forEach(item => {\r\n\t\t\tlet {key, children, ...obj} = item;\r\n\t\t\tnewSubTasks.push(obj)\r\n\t\t})\r\n\t\tthis.setState({subtasks: newSubTasks})\r\n\t}\r\n\r\n\t// 取消保存\r\n\tonCalac = (key) => {\r\n\t\tthis.saveExpandedRows(key);\r\n\t\tthis.store.isEdit = false;\r\n\t\t// 更新tree\r\n\t\tlet treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n\t\tthis.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.activeObj);\r\n\t\tthis.subtask.clearState();\r\n\t\tthis.setState({\r\n\t\t\tactiveObj: Object.assign({})\r\n\t\t});\r\n\t}\r\n\r\n\t// 折叠收起\r\n\tonPackup = (record) => {\r\n\t\tlet _this = this;\r\n\t\tconst defaultSource = _this.state.activeSub.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解前默认数据\r\n\t\tconst rearSource = _this.state.subtasks.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\t\"name\": item.name,\r\n\t\t\t\t\"masters\": item.masters,\r\n\t\t\t\t\"totalHours\": item.totalHours,\r\n\t\t\t\t\"alreadyHours\": item.alreadyHours\r\n\t\t\t}\r\n\t\t});  // 拆解后内容变动数据\r\n\t\t// console.log(JSON.stringify(defaultSource), JSON.stringify(rearSource), '===比较', JSON.stringify(defaultSource)==JSON.stringify(rearSource))\r\n\t\t// 当前拆解数据内容变化，给提示是否保存\r\n\t\tif (JSON.stringify(defaultSource) == JSON.stringify(rearSource)) {\r\n\t\t\t// 内容没有变动，直接取消\r\n\t\t\t_this.onCalac(record.id);\r\n\t\t} else {\r\n\t\t\tModal.confirm({\r\n\t\t\t\ttitle: '是否对所更改内容保存',\r\n\t\t\t\tokText: '保存',\r\n\t\t\t\tcancelText: '不保存',\r\n\t\t\t\tonOk() {\r\n\t\t\t\t\t_this.saveSubTaskRecord(record.id);\r\n\t\t\t\t},\r\n\t\t\t\tonCancel() {\r\n\t\t\t\t\t_this.onCalac(record.id);\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonTaskRef = (ref) => {\r\n\t\tthis.subtask = ref\r\n\t}\r\n\r\n\t// 点击\r\n\tonRow = (record) => {\r\n\t\tconst {disabled} = this.props;\r\n\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'subtask'\r\n\t\t})\r\n\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\tif (disabled && subNumber > 0) {  // 详情态\r\n\t\t\tthis.handleView(record.id)\r\n\t\t}\r\n\t}\r\n\r\n\thandleChangeMenu = (type, item, rowId) => {\r\n\t\tconst {id, fileType, filePath} = item;\r\n\t\t// 本地存储\r\n\t\tlet payOutput = JSON.parse(JSON.stringify(this.store[type]));\r\n\t\tthis.store[type] = Object.assign(payOutput, {\r\n\t\t\t[rowId]: JSON.stringify({\r\n\t\t\t\tfileName: item.fileName,\r\n\t\t\t\tfilePath: filePath,\r\n\t\t\t\tid,\r\n\t\t\t\tfileType\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t// 在线编辑跳转\r\n\thandleLinkTo = (rowUrl, obj, rowId) => {\r\n\t\tconst {id, fileType, filePath, fileName} = obj;\r\n\t\tvar linkUrl;\r\n\t\tif (rowUrl != undefined && rowUrl != null) {\r\n\t\t\tconst link = JSON.parse(rowUrl).filePath;\r\n\t\t\tconst linkId = JSON.parse(rowUrl).id;\r\n\t\t\tconst linkType = JSON.parse(rowUrl).fileType;\r\n\t\t\tconst linkName = JSON.parse(rowUrl).fileName;\r\n\t\t\tif (link == \"\" || link == null) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: linkId,\r\n\t\t\t\t\ttype: linkType\r\n\t\t\t\t}\r\n\t\t\t\tthis.store.getTaskattEditUrl(params)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tlinkUrl = res;\r\n\t\t\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tlinkUrl = link;\r\n\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t}\r\n            // 维护本地数据\r\n\t\t\tlet payOutput = JSON.parse(JSON.stringify(this.store.payOutput));\r\n\t\t\tthis.store.payOutput = Object.assign(payOutput, {\r\n\t\t\t\t[rowId]: JSON.stringify({\r\n\t\t\t\t\tfileName: linkName,\r\n\t\t\t\t\tfilePath: linkUrl,\r\n\t\t\t\t\tid: linkId,\r\n\t\t\t\t\tfileType: linkType\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t} else {   // rowUr为空\r\n\t\t\tif (filePath == \"\" || filePath == null) {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\ttype: fileType\r\n\t\t\t\t}\r\n\t\t\t\tthis.store.getTaskattEditUrl(params)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\tlinkUrl = res;\r\n\t\t\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tlinkUrl = filePath;\r\n\t\t\t\twindow.open(linkUrl, '_blank');\r\n\t\t\t}\r\n\t\t\t// 维护本地数据\r\n\t\t\tlet payOutput = JSON.parse(JSON.stringify(this.store.payOutput));\r\n\t\t\tthis.store.payOutput = Object.assign(payOutput, {\r\n\t\t\t\t[rowId]: JSON.stringify({\r\n\t\t\t\t\tfileName: fileName,\r\n\t\t\t\t\tfilePath: linkUrl,\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tfileType: fileType\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//模板下载\r\n\thandleLinkDown = (rowUrl, obj, rowId) => {\r\n\t\tconst {filePath} = obj;\r\n\t\tif (rowUrl != undefined && rowUrl != null) {\r\n\t\t\tconst link = JSON.parse(rowUrl).filePath;\r\n\t\t\tconst linkArray = link.split(\";\");\r\n\t\t\tlinkArray.forEach(item => {\r\n\t\t\t\twindow.open(item, '_blank');\r\n\t\t\t});\r\n\t\t} else {   // rowUr为空\r\n\t\t\tconst linkArray = filePath.split(\";\");\r\n\t\t\tlinkArray.forEach(item => {\r\n\t\t\t\twindow.open(item, '_blank');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// 预览\r\n\tdownload =(attc) => {\r\n\t\tif(attc.length>0) {\r\n\t\t\tconst url = attc[0].filePath;\r\n\t\t\twindow.open(url, '_blank');\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {subTaskDis, dataSource, expandedKeys} = this.state;\r\n\t\tconst {temId} = this.store;\r\n\t\tlet payOutput = mobx.toJS(this.store.payOutput);\r\n\t\tlet temOutput = mobx.toJS(this.store.temOutput);\r\n\t\tconst {disabled} = this.props;\r\n\t\tconst {taskhaveattt} = this.props;\r\n\t\tconst isChaijie = expandedKeys.length > 0;\r\n\t\tconst components = {\r\n\t\t\tbody: {\r\n\t\t\t\trow: EditableFormRow,\r\n\t\t\t\tcell: EditableCell,\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst columnEle = [\r\n\t\t\t{\r\n\t\t\t\ttitle: '序号',\r\n\t\t\t\tdataIndex: 'key',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\twidth: '70px',\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '70px'}}\r\n\t\t\t\t\t\t\tid={`/workdetail?projectid=${record.projectId}&id=${record.id}`}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t\t\tclassName=\"w pr\">\r\n\t\t\t\t\t\t\t<Popconfirm title=\"确定要删除吗?\">\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tclassName={!disabled && !isChaijie ? \"\" : \"hidden\"}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\t\t\t\t\tleft: '0',\r\n\t\t\t\t\t\t\t\t\t\tcolor: '#F17E7E',\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '18px',\r\n\t\t\t\t\t\t\t\t\t\tpaddingRight: '5px'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttype=\"minus-circle\"/>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t<span>{text}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '任务',\r\n\t\t\t\tdataIndex: 'name',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '负责人',\r\n\t\t\t\tdataIndex: 'masters',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null ? \"\" : text.map(item => item.userName).join(\"、\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '开始日期',\r\n\t\t\t\tdataIndex: 'beginTime',\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px', }}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '截止日期',\r\n\t\t\t\tdataIndex: 'endTime',\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div\r\n\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\tonClick={this.onRow.bind(this, record)}>{text == null || text == 0 ? \"\" : moment(text).format(\"YYYY-MM-DD\")}</div>;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '完成比例',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\treturn <div  style={{width: '100%', height: '46px', lineHeight: '46px'}} onClick={this.onRow.bind(this, record)}\r\n\t\t\t\t\t            id={record.id}>{text}%</div>\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '对应产出',\r\n\t\t\t\tdataIndex: 'rate',\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst {children} = record;\r\n\t\t\t\t\tlet attcArray = children != null && Array.isArray(children) && children.filter((item) => {\r\n\t\t\t\t\t\treturn item.type == 0\r\n\t\t\t\t\t});  // 正常附件\r\n\t\t\t\t\tlet onlineArray = children != null && Array.isArray(children) && children.filter((item) => {\r\n\t\t\t\t\t\treturn item.type == 1\r\n\t\t\t\t\t});  // 在线编辑\r\n\t\t\t\t\tif (attcArray.length > 0) {\r\n\t\t\t\t\t\tlet attcObj = attcArray[0];  //正常\r\n\t\t\t\t\t\tconst attachments = attcObj && attcObj.children && attcObj.children != null ? attcObj.children.map((vitem) => {\r\n\t\t\t\t\t\t\treturn Object.assign({}, {\r\n\t\t\t\t\t\t\t\tuid: vitem.id,\r\n\t\t\t\t\t\t\t\tname: vitem.fileName,\r\n\t\t\t\t\t\t\t\tstatus: 'done',\r\n\t\t\t\t\t\t\t\turl: vitem.filePath,\r\n\t\t\t\t\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\t\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\t\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\t\t\t\t\tid: vitem.id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}) : [];\r\n\t\t\t\t\t\tlet isNew = attcObj.id.includes(\"!\");\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"table_upload pay_upload\"  style={{width: '100%', height: '46px', lineHeight: '46px'}}>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\"\r\n\t\t\t\t\t\t\t\t\ttitle={attcObj.name}\r\n\t\t\t\t\t\t\t\t\tonClick={this.download.bind(this, attachments)}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: attachments.length > 0 ? '#1890ff' : '#333',\r\n\t\t\t\t\t\t\t\t\t\tcursor: attachments.length > 0 ? 'pointer' : 'default',\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '80px',\r\n\t\t\t\t\t\t\t\t\t\tdisplay:'inline-block',\r\n\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{attcObj.name}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{disabled|| isChaijie||isNew?null:\r\n\t\t\t\t\t\t\t\t<PayUpload\r\n\t\t\t\t\t\t\t\t\tsaveAttachment={this.props.saveAttachment}\r\n\t\t\t\t\t\t\t\t\tdelNode={this.props.delNode}\r\n\t\t\t\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\t\t\t\tpid={attcObj ? attcObj.id : \"\"}\r\n\t\t\t\t\t\t\t\t\tprojectId={attcObj ? attcObj.projectId : \"\"}\r\n\t\t\t\t\t\t\t\t\tdisabled={disabled || isChaijie}\r\n\t\t\t\t\t\t\t\t\tossData={this.props.ossData}\r\n\t\t\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t} else if (onlineArray.length > 0) {\r\n\t\t\t\t\t\tlet onlineObj = onlineArray[0];  //在线\r\n\t\t\t\t\t\tconst {children} = onlineObj;\r\n\t\t\t\t\t\tconst rowUrl = payOutput[record.id];\r\n\t\t\t\t\t\tconst fileUrl = rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).filePath : children[0].filePath;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div  style={{width: '100%', height: '46px', lineHeight: '46px'}}>\r\n                            <Dropdown overlay={\r\n\t                            <Menu>\r\n\t\t                            {children.length > 0 && children.map((item, index) => {\r\n\t\t\t                            return (<Menu.Item\r\n\t\t\t\t                            onClick={this.handleChangeMenu.bind(this, 'payOutput', item, record.id)}\r\n\t\t\t\t                            key={\"menu_\" + index}>\r\n\t\t\t\t                            {item.fileName == null ? \"--\" : item.fileName}\r\n\t\t\t                            </Menu.Item>)\r\n\t\t                            })}\r\n\t                            </Menu>\r\n                            }>\r\n                                <span className={children.length == 1 ? \"hidden\" : \"ant-dropdown-link\"}\r\n                                      onClick={e => e.preventDefault()}>\r\n                                  <Icon type=\"caret-down\"/>\r\n                                </span>\r\n                            </Dropdown>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\"\r\n\t\t\t\t\t\t\t\t\tonClick={disabled|| isChaijie?this.handleLinkTo.bind(this, rowUrl, children[0], record.id):null}\r\n\t\t\t\t\t\t\t\t\ttitle={children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : children[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: fileUrl == null || fileUrl == \"\" ? '#333' : '#1890ff',\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '80px',\r\n\t\t\t\t\t\t\t\t\t\tdisplay:'inline-block',\r\n\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tcursor: 'pointer'\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : children[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t{disabled|| isChaijie?null:\r\n         \t\t\t\t\t\t<Icon type=\"edit\" style={{color: \"#1890ff\"}}\r\n\t\t\t\t\t                  onClick={this.handleLinkTo.bind(this, rowUrl, children[0], record.id)}/>}\r\n                        </div>);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '模板下载',\r\n\t\t\t\tdataIndex: 'template',\r\n\t\t\t\tclassName: temId == 2 ? \"hidden\" : \"\",\r\n\t\t\t\t//width: widthDESIGN[temId],\r\n\t\t\t\twidth: 150,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tif (temId == 2) { // 前端处理 - 劳务仓流程不渲染组件\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {children, treeType} = record;\r\n\t\t\t\t\t\tif (treeType == \"task\") {\r\n\t\t\t\t\t\t\tlet temArray = children != null && children != undefined && Array.isArray(children) && children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.type == 2\r\n\t\t\t\t\t\t\t});  // 模板\r\n\t\t\t\t\t\t\tif (temArray.length == 0) {\r\n\t\t\t\t\t\t\t\treturn (<div className=\"tc\" style={{width: '70px'}}> - - </div>)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet temObj = temArray[0];  // 模板\r\n\t\t\t\t\t\t\t\tconst temChildren = temObj.children == null ? [] : temObj.children;\r\n\t\t\t\t\t\t\t\t//var fileUrl;\r\n\t\t\t\t\t\t\t\tvar rowUrl;\r\n\t\t\t\t\t\t\t\tif (temOutput !== undefined) {\r\n\t\t\t\t\t\t\t\t\trowUrl = temOutput[record.id];\r\n\t\t\t\t\t\t\t\t\t//fileUrl = rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).filePath : children[0].filePath;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div style={{width: '100%', height: '46px', lineHeight: '46px'}}>\r\n                            <Dropdown overlay={\r\n\t                            <Menu>\r\n\t\t                            {temChildren.length > 0 && temChildren.map((item, index) => {\r\n\t\t\t                            return (<Menu.Item\r\n\t\t\t\t                            onClick={this.handleChangeMenu.bind(this, 'temOutput', item, record.id)}\r\n\t\t\t\t                            key={\"menu_\" + index}>\r\n\t\t\t\t                            {item.fileName == null ? \"--\" : item.fileName}\r\n\t\t\t                            </Menu.Item>)\r\n\t\t                            })}\r\n\t                            </Menu>\r\n                            }>\r\n                                <span className={temChildren.length == 1 ? \"hidden\" : \"ant-dropdown-link\"}\r\n                                      onClick={e => e.preventDefault()}>\r\n                                  <Icon type=\"caret-down\"/>\r\n                                </span>\r\n                            </Dropdown>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\"\r\n\t\t\t\t\t\t\t\t\ttitle={children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : temChildren[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t//color: fileUrl == undefined || fileUrl == null || fileUrl == \"\" ? '#333' : '#1890ff',\r\n\t\t\t\t\t\t\t\t\t\tpadding: '0 5px',\r\n\t\t\t\t\t\t\t\t\t\tmaxWidth: '80px',\r\n\t\t\t\t\t\t\t\t\t\tdisplay:'inline-block',\r\n\t\t\t\t\t\t\t\t\t\tverticalAlign: 'middle'\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{children.length > 0 ? (rowUrl !== undefined && rowUrl !== null ? JSON.parse(rowUrl).fileName : temChildren[0].fileName) : null}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<Icon type=\"vertical-align-bottom\" style={{color: \"#1890ff\", fontSize: '20px'}}\r\n\t\t\t\t\t\t\t\t      onClick={this.handleLinkDown.bind(this, rowUrl, temChildren[0], record.id)}/>\r\n                        </div>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '备注',\r\n\t\t\t\tdataIndex: 'remark',\r\n\t\t\t\twidth: widthDESIGN[temId],\r\n\t\t\t\teditable: !disabled && !isChaijie,\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t<p><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</p>}\r\n\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\treturn (<p className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t\t           key={'task_' + index}><span\r\n\t\t\t\t\t\t\t\t\tstyle={{fontWeight: '700', color: '#333'}}>备注{index + 1}:</span> {item.remark}</p>)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{width: '100%', height: '46px', lineHeight: '46px'}}\r\n\t\t\t\t\t\t\tonClick={this.onRow.bind(this, record)} id={record.id}>\r\n\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tstyle={{maxWidth: '180px'}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"ellsis\">\r\n\t\t\t\t\t\t\t\t\t{text == null || text == \"\" ? null :\r\n\t\t\t\t\t\t\t\t\t\t<span><span style={{fontWeight: '700', color: '#333'}}>整体:</span> {text}</span>}\r\n\t\t\t\t\t\t\t\t\t{record.children == null || record.children == [] ? null : record.children.filter((item) => {\r\n\t\t\t\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t\t\t\t}).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (<span key={'task_' + index}\r\n\t\t\t\t\t\t\t\t\t\t              className={item.remark == null || item.remark == \"\" ? \"hidden\" : \"\"}>\r\n\t\t                                  <span style={{paddingLeft: '5px', fontWeight: '700', color: '#333'}}>\r\n\t\t                                  备注{index + 1}:</span> {item.remark}</span>)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: '排期',\r\n\t\t\t\tdataIndex: 'operation',\r\n\t\t\t\talign: \"center\",\r\n\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\tlet actionName = '拆解';\r\n\t\t\t\t\tif (expandedKeys.filter(item => {\r\n\t\t\t\t\t\treturn item == record.id\r\n\t\t\t\t\t}).length > 0 && !subTaskDis) {\r\n\t\t\t\t\t\treturn (<span>\r\n\t\t\t\t\t\t\t       <a onClick={this.onCalac.bind(this, record.id)}>取消</a>\r\n\t\t\t\t\t\t\t\t   <a className=\"ml15\" onClick={this.saveSubTaskRecord.bind(this, record.id)}>保存</a>\r\n\t\t\t\t\t\t       </span>)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 子任务数\r\n\t\t\t\t\t\tlet subTasks = record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconst subNumber = subTasks == null || subTasks.length == 0 ? 0 : subTasks.length\r\n\t\t\t\t\t\tif (disabled) {  // 详情态\r\n\t\t\t\t\t\t\tif (subNumber == 0) { // 子任务数等于0\r\n\t\t\t\t\t\t\t\treturn <a onClick={this.handleApart.bind(this, record)}>拆解</a>\r\n\t\t\t\t\t\t\t\t//return <span>{subNumber}</span>\r\n\t\t\t\t\t\t\t} else {  // 子任务数大于0\r\n\t\t\t\t\t\t\t\treturn (<span>\r\n\t                                <a title=\"查看\" onClick={this.handleView.bind(this, record.id)}>{subNumber}</a>\r\n\t                                <Icon onClick={this.handleApart.bind(this, record)} className=\"pointer\"\r\n\t                                      style={{marginLeft: \"10px\"}} title=\"编辑\" type=\"edit\"/>\r\n                                </span>)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {  // 编辑态\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<a onClick={this.handleApart.bind(this, record)}>{subNumber == 0 ? actionName : subNumber}</a>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t]\r\n\t\tconst columns = columnEle.map(col => {\r\n\t\t\tif (!col.editable) {\r\n\t\t\t\treturn col;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...col,\r\n\t\t\t\tonCell: record => ({\r\n\t\t\t\t\trecord,\r\n\t\t\t\t\teditable: col.editable,\r\n\t\t\t\t\tdataIndex: col.dataIndex,\r\n\t\t\t\t\ttitle: col.title,\r\n\t\t\t\t\tpersonData: mobx.toJS(this.store.personData),\r\n\t\t\t\t\thandleSave: this.handleSave,\r\n\t\t\t\t\thandleDelete: this.handleDelete,\r\n\t\t\t\t}),\r\n\t\t\t};\r\n\t\t});\r\n\t\tconst expandedRowRender = (record) => {\r\n\t\t\t// 新增子任务\r\n\t\t\tlet addRecord = {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tpid: record.id || \"\",\r\n\t\t\t\tprojectId: record.projectId || \"\",\r\n\t\t\t\ttreeType: \"subtask\",\r\n\t\t\t\tmasters: record.masters == null ? [] : record.masters,\r\n\t\t\t\talreadyHours: 0,\r\n\t\t\t\ttotalHours: 0,\r\n\t\t\t\trate: 0,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tremark: \"\",\r\n\t\t\t\tbeginTime: null,\r\n\t\t\t\tendTime: null\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<TaskSplite\r\n\t\t\t\t\tstore={this.store}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\taddRecord={addRecord}\r\n\t\t\t\t\tpersonData={mobx.toJS(this.store.personData)}\r\n\t\t\t\t\tdataSource={record.children == null ? [] : record.children.filter((item) => {\r\n\t\t\t\t\t\treturn item.treeType === 'subtask'\r\n\t\t\t\t\t})}\r\n\t\t\t\t\tcollapseOnChange={() => isChaijie && !disabled ? this.onPackup(record) : this.saveExpandedRows(record.id)}\r\n\t\t\t\t\thandleSaveSubTask={this.handleSaveSubTask}\r\n\t\t\t\t\tdisabled={subTaskDis}\r\n\t\t\t\t\tid={record.id}\r\n\t\t\t\t\tonTaskRef={this.onTaskRef}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcomponents={components}\r\n\t\t\t\t\trowClassName={() => 'editable-row'}\r\n\t\t\t\t\tclassName=\"expand_table bpm_table\"\r\n\t\t\t\t\tbordered={false}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tpagination={false}\r\n\t\t\t\t\tsize={\"middle\"}\r\n\t\t\t\t\texpandRowByClick={true}\r\n\t\t\t\t\texpandIconAsCell={false}\r\n\t\t\t\t\texpandIconColumnIndex={-1}\r\n\t\t\t\t\texpandedRowKeys={expandedKeys}\r\n\t\t\t\t\texpandedRowRender={expandedRowRender}\r\n\t\t\t\t\trowKey={row => row.id}\r\n\t\t\t\t\tscroll={{ x: (columns.length-2)*140+140 }}\r\n\t\t\t\t/>\r\n\t\t\t\t{disabled ? null :\r\n\t\t\t\t\t<Icon onClick={this.handleAdd} style={{margin: '16px 0', color: '#4BA4BE', fontSize: '22px'}}\r\n\t\t\t\t\t      type=\"plus-circle\"/>}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditableTable;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/EditableTable.js","/*\r\n* 附件组件\r\n* */\r\nimport React from \"react\";\r\nimport { Upload, Icon, message } from 'antd';\r\nimport oss from 'ali-oss';\r\nimport moment from 'moment';\r\n\r\nfunction getBase64(img, callback) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n}\r\n\r\nconst client = (self) => {\r\n    const {token} = self.state\r\n    // ali-oss v6.x版本的写法\r\n    return new oss({\r\n      accessKeyId: token.access_key_id,\r\n      accessKeySecret: token.access_key_secret,\r\n      stsToken: token.stsToken,\r\n      region: token.region, //\r\n      bucket: token.bucket,//\r\n      endpoint: token.OSS_ENDPOINT\r\n    });\r\n};\r\n\r\nconst uploadPath = (path, file) => {\r\n    // 上传文件的路径，使用日期命名文件目录\r\n    return `${moment().format('YYYYMMDD')}/${file.uid}/${file.name}`\r\n}\r\n\r\nconst UploadToOss = (self, path, file) => {\r\n    const url = uploadPath(path, file)\r\n    return new Promise((resolve, reject) => {\r\n      client(self).multipartUpload(url, file).then(data => {\r\n        resolve(data); //上传成功后返回的上传结果，?后面的都去掉就能正常访问了\r\n      }).catch(error => {\r\n        reject(error)\r\n      })\r\n    })\r\n}\r\n\r\nclass PayUpload extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            fileList: this.props.fileList,\r\n            loading: false,\r\n            token: {\r\n                access_key_id: '',//'STS.NUKFXpmcLY7gZeyDE7jMW6M5v', // oss的key_id\r\n                access_key_secret: '',//'5S1Ky3Beef6ZtXxTRPBMPvqV9ouTWkvMTmGhffJqeLK8', // oss的secret\r\n                stsToken: '',//'CAISgwN1q6Ft5B2yfSjIr5b+DeLEgLxt7vWMWEPIoEViZsJ72YielDz2IH1IfXdtBuAasvU3lGtZ6/8dlol1QJhdclfYdo176NFd/AKjYozO/cWx7K0Zjpa+X2OUDkZuMwFigKOrIunGc9KBNnpq/00amMlSHFfPdlihNoLzkPwDR98LXw6+QCNbDdNNXGVLo9MbMn2jBJTVNQXx0EbdCEd0ty12i2509cbaxdaHuD7fl0HCw/UJvOaBJYO/PeBmO41jdsqxwO1uf7Dd7TZU7BFGlsJxl7cWwSrbmdufDlJNgXCBKPGG3dBzCwV7a6MmYYImysLxjvploOfeup3qwhJWR4FvXj/YWZqrzbmEepqgPc1rcq3gaTafkIKfN5/xsWFfaHkAZgRRYIhjeD0iGR0qTjOdaI3foQCWPVn6FPTUifFvgcMkkG+Fp4TaewK9JJyCyjsdN5MGaEclCgUbx2SJcNVdLlAVLQ44V+rJHN0jN0ED8Pzy0grJTWh70mpHAjgJzUQydssagAGXmVE/ez8kLqCrzcFDMBg0c51Wv7sCHrBF1JJ1jhjZ39U8mUKpdznlIoOk5Jxav599Kdj4ZsNH8D4nshRzAZiZ1Qi5a+PsMWpet0mOIu/fntu5xezXssVECv68Pg8tos5Rf/Tcs1L8axm0WIxk2PFOtH59IPj8RhevwczGTOmCaQ\\u003d\\u003d',\r\n                region: 'oss-cn-beijing', // oss的region\r\n                bucket: 'xinlj', // oss的bucket\r\n                OSS_ENDPOINT: 'oss-cn-beijing.aliyuncs.com',  // 自己oss服务器的配置信息\r\n            },\r\n            host: 'https://xinlj.oss-cn-beijing.aliyuncs.com/', // 阿里云host\r\n        };\r\n    }\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t    if (JSON.stringify(nextProps.fileList)!=JSON.stringify(this.props.fileList)) {\r\n           this.setState({\r\n               fileList: nextProps.fileList\r\n           });\r\n        }\r\n        if (JSON.stringify(nextProps.ossData)!=JSON.stringify(this.props.ossData)) {\r\n            let token = JSON.parse(JSON.stringify(this.state.token));\r\n\t        this.setState({\r\n                token: Object.assign(token, {\r\n                    access_key_id: nextProps.ossData.accessKeyId, // oss的key_id\r\n                    access_key_secret: nextProps.ossData.accessKeySecret, // oss的secret\r\n                    stsToken: nextProps.ossData.securityToken\r\n                })\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.fileList) {\r\n            this.setState({\r\n                fileList: this.props.fileList\r\n            });\r\n        }\r\n       if (this.props.ossData) {\r\n           let token = JSON.parse(JSON.stringify(this.state.token));\r\n           this.setState({\r\n               token: Object.assign(token, {\r\n                   access_key_id: this.props.ossData.accessKeyId, // oss的key_id\r\n                   access_key_secret: this.props.ossData.accessKeySecret, // oss的secret\r\n                   stsToken: this.props.ossData.securityToken\r\n               })\r\n           });\r\n       }\r\n\r\n    }\r\n\r\n    handleChange = (info) => {\r\n        const status = info.file.status;\r\n\r\n        // 记录新上传的\r\n        let fileList = [...info.fileList];\r\n        let oldFileList = JSON.parse(JSON.stringify(fileList)).filter((file)=>{return file.status&&file.status === 'done';});  // 之前保存过的\r\n        let newFileList = JSON.parse(JSON.stringify(fileList));\r\n        newFileList = newFileList.filter((file) => {\r\n            if (file.status&&file.status === 'done') {\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        newFileList = newFileList.map(file => {\r\n            if (file.originFileObj) {\r\n                const url = this.state.host+uploadPath('path', file);\r\n                return  Object.assign({}, {\r\n                    uid:file.uid,\r\n                    name:file.name,\r\n                    status:\"done\",\r\n                    url:url,\r\n                    fileId: null,\r\n                    fileName: file.name,\r\n                    filePath: url,\r\n                    id: \"\"\r\n                })\r\n            }\r\n            return file;\r\n        });\r\n            if (status==undefined) {\r\n         // 处理附件\r\n         //let array = JSON.parse(JSON.stringify([...oldFileList, ...newFileList]))\r\n         let array = JSON.parse(JSON.stringify([ ...newFileList]))\r\n         let arr = [];\r\n         array.length && array.map((item, index) => {\r\n        \t arr.push({\r\n        \t\t fileId: item.fileId,\r\n        \t\t fileName: item.fileName,\r\n        \t\t filePath: item.filePath,\r\n        \t\t pid: this.props.pid,\r\n        \t\t projectId: this.props.projectId,\r\n        \t\t id: item.id\r\n        \t })\r\n         });\r\n         this.props.saveAttachment(arr);\r\n        }\r\n        else if (status === \"removed\") {   // 删除\r\n        \t let id = info.file.id;\r\n        \t if (id!==\"\"||id!==null) { // 删除已有的\r\n        \t\t this.props.delNode(id);\r\n        \t }\r\n        }\r\n\r\n    this.setState({\r\n            fileList: [...oldFileList, ...newFileList]\r\n        });\r\n    }\r\n\r\n    beforeUpload = (file) => {\r\n        const isJPG = file.type === 'image/jpeg';\r\n        if (!true) {\r\n          message.error('You can only upload JPG file!');\r\n        }\r\n        const isLt2M = file.size / 1024 / 1024 < 2000;\r\n        if (!isLt2M) {\r\n          message.error('Image must smaller than 2MB!');\r\n        }\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onloadend = () => {\r\n            // 使用ossupload覆盖默认的上传方法\r\n            UploadToOss(this, '上传路径oss配置信息', file)\r\n                .then(data => {return data;});\r\n        }\r\n        return false; // 不调用默认的上传方法\r\n    }\r\n    render() {\r\n        const {fileList} = this.state;\r\n        const props = {\r\n            name: 'file',\r\n            multiple: this.props.multiple,\r\n            onChange: this.handleChange,\r\n            beforeUpload: this.beforeUpload,\r\n            listType: 'text',\r\n            className: 'upload-list-inline',\r\n            disabled: this.props.disabled,\r\n        };\r\n        return (\r\n            <Upload {...props} fileList={fileList}>\r\n                <Icon style={{fontSize: '25px', color: '#53B3E5'}} type=\"cloud-upload\"/>\r\n            </Upload>\r\n        );\r\n\t}\r\n}\r\n\r\nexport default PayUpload;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/PayUpload.js","/*\r\n* 进度步骤条\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Row, Col, Popover, Icon, Empty, Breadcrumb, Progress, Badge, Affix, Form, message, Modal, Button, Input, notification} from 'antd';\r\n\r\nimport * as  mobx from 'mobx';\r\nimport moment from \"moment\";\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst openNotificationWithIcon = type => {\r\n    notification[type]({\r\n        message: '感谢所有人对此项目所付出的努力',\r\n        description:\r\n            '幸苦了，继续加油！',\r\n    });\r\n};\r\n\r\n\r\n\r\n@observer\r\nexport default class ProgressList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.store = this.props.store;\r\n        this.state = {\r\n            visible: false,\r\n            value: \"\"\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    // 定位\r\n    scrollToAnchor(params) {\r\n        const {id, key} = params;\r\n        const {scrollToAnchor} = this.props;\r\n        const {temId} = this.store;\r\n        if (temId==undefined) {  // 特殊处理项目、产品设计\r\n            scrollToAnchor(key);\r\n        } else {\r\n            scrollToAnchor(id);\r\n        }\r\n    }\r\n\r\n    showModal = () => {\r\n        this.setState({\r\n            visible: true,\r\n        });\r\n    };\r\n\r\n    handleOk = e => {\r\n        if (this.state.value==\"\"||this.state.value==null) {\r\n            message.warn(\"请填写关闭原因\")\r\n            return false;\r\n        }\r\n        const params = {\r\n            projectId: this.store.projectId,\r\n            text: this.state.value\r\n        }\r\n        this.store.closeProject(params).then((res)=>{\r\n            if (res) {\r\n                openNotificationWithIcon(\"success\");\r\n                this.onCancel();\r\n               // this.updateTree();\r\n                this.store.getStageTree();\r\n            } else {\r\n                message.error(\"关闭失败\")\r\n            }\r\n        });\r\n    };\r\n\r\n    onCancel = () => {\r\n        this.setState({\r\n            visible: false,\r\n            value: \"\"\r\n        });\r\n    }\r\n\r\n    onChange = ({ target: { value } }) => {\r\n        this.setState({ value });\r\n    };\r\n\r\n    render() {\r\n        const {listData, isShow} = this.props;\r\n        const {state, closeReason} = this.store;\r\n        const content = (\r\n            <div>\r\n                <p>{state==1?\"圆满结束，感谢大家的所有付出！\":closeReason}</p>\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div>\r\n                <Affix offsetTop={64}>\r\n                   <div className=\"w clearfix\"\r\n                         style={{backgroundColor: '#FFF',\r\n                             minHeight: '30px',\r\n                             padding: '40px 30px'}}>\r\n                        {listData.length>0?listData.map((item, index) => {\r\n                            return (\r\n                                <div\r\n                                    onClick={this.scrollToAnchor.bind(this, item)}\r\n                                    key={index}\r\n                                    style={{\r\n                                        width: '14%',\r\n                                        float: 'left',\r\n                                        display: 'inlineBlock',\r\n                                        position: 'relative'\r\n                                    }}>\r\n                                    {item.rate>=100?\r\n                                        <Badge className=\"worktile_progress_span_active\" status=\"processing\"/>:\r\n                                        <span className=\"worktile_progress_span\"/>}\r\n                                   <Progress\r\n                                        className=\"worktile_progress\"\r\n                                        style={{\r\n                                            display: 'inlineBlock',\r\n                                            paddingLeft: '9px'\r\n                                        }}\r\n                                        size=\"small\"\r\n                                        strokeLinecap=\"square\"\r\n                                        percent={item.rate==null?0:item.rate}/>\r\n                                    <div style={{textAlign: 'left', position: 'relative', left: '-20px'}}>\r\n                                        <p className={item.rate>0?\"worktile_progress_item_active\":\"worktile_progress_item\"}>{item.stageName}</p>\r\n                                        <p className=\"worktile_progress_name\">\r\n                                            {item.masters==null?\" \":item.masters.map(item=>item.userName).join(\"、\")}\r\n                                            {item.rate==100?<Icon type=\"check-circle\" style={{paddingLeft: '5px', fontSize: '16px', color: \"#108DE9\"}}/>:null}\r\n                                        </p>\r\n                                        <p className=\"worktile_progress_name\">{item.finishTime==0?(item.rate>0?<a style={{cursor:\"default\"}}>进行中</a>:null):(item.rate==100?moment(item.finishTime).format(\"YYYY-MM-DD HH:mm\"):<a style={{cursor:\"default\"}}>进行中</a>)}</p>\r\n                                    </div>\r\n                                </div>);\r\n                        }):<Empty description={false} />}\r\n                       <div\r\n                           style={{\r\n                               width: '2%',\r\n                               float: 'left',\r\n                               display: 'inlineBlock',\r\n                               position: 'relative'\r\n                           }}>\r\n                           <span className=\"worktile_progress_span\"/>\r\n                           <div style={{textAlign: 'left', position: 'relative', left: '-22px', top: '22px'}}>\r\n                               <p className={\"worktile_progress_item\"} style={{width: '80px'}}>全部完成</p>\r\n                           </div>\r\n                       </div>\r\n                       {!isShow?<Button\r\n                               onClick={this.showModal}\r\n                               className={state==0?\"fr btn_yellow\":\"hidden\"}\r\n                               type=\"primary\"\r\n                               shape=\"round\"\r\n                               ghost>\r\n                               关闭项目\r\n                           </Button>:null}\r\n                       <Popover content={content}>\r\n                           <Button className={state==1?\"fr\":\"hidden\"}\r\n                                   type=\"primary\"\r\n                                   shape=\"round\">正常结束</Button>\r\n                       </Popover>\r\n                       <Popover content={content}>\r\n                           <Button className={state==2?\"fr btn_yellow_active\":\"hidden\"}\r\n                                   type=\"primary\"\r\n                                   shape=\"round\">中途关闭</Button>\r\n                       </Popover>\r\n                    </div>\r\n                </Affix>\r\n                {/*关闭项目*/}\r\n                <Modal\r\n                    title=\"请填写项目中途关闭的原因\"\r\n                    visible={this.state.visible}\r\n                    onOk={this.handleOk}\r\n                    onCancel={this.onCancel}\r\n                >\r\n                      <TextArea\r\n                          value={this.state.value}\r\n                          onChange={this.onChange}\r\n                          placeholder=\"请填写原因\"\r\n                          autoSize={{ minRows: 3, maxRows: 5 }}\r\n                      />\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/ProgressList.js","/*\r\n* 通用树型结构渲染\r\n* dangw@glodon.com\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Card, Form, Row, Col, Button, message} from 'antd';\r\nimport * as  mobx from 'mobx';\r\n\r\nimport EditableTable from \"@/components/worktile/EditableTable\";\r\nimport MyUpload from \"@/components/worktile/MyUpload\";\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport * as utils from \"@/utils/utils\";\r\n\r\n@Form.create()\r\n@observer\r\nclass WortileCommon extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tdataSource: [],   // 任务的数据源\r\n\t\t\tuserIds:[],\r\n            hidden: true,  // 面板折叠展开\r\n            currentTree: {}, // 存储当前组件树对象\r\n            pid: '',\r\n            projectId: \"\",\r\n            defaultTree: {}, // 记录当前树的默认数据\r\n        };\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n        /*\r\n        * 处理更新树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\r\n        * */\r\n        if (nextProps.treeData!==this.props.treeData) {\r\n            /*根据该节点树型数控制改树结构*/\r\n            if (nextProps.treeData.children===null) { // 没有任务集合\r\n                this.setState({\r\n                    dataSource: []\r\n                });\r\n            } else {  // 包含任务集合\r\n                const dataSource = nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].children;\r\n                this.setState({\r\n                    dataSource,\r\n                    currentTree: Object.assign({}, nextProps.treeData),   // 更新同步\r\n                    pid: nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].id,\r\n                    projectId: nextProps.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].projectId,\r\n                    hidden: nextProps.disabled,\r\n                }, ()=>{\r\n                    // 更新记录当前树的附件数据\r\n                    let attc = nextProps.treeData.children.filter((item)=>item.treeType==\"attc\")[0]\r\n                    if (Object.keys(this.state.defaultTree).length>0) {\r\n                        // 更新tree\r\n                        let defaultTree = JSON.parse(JSON.stringify(this.state.defaultTree));\r\n                        this.setState({\r\n                            defaultTree: utils.updateTreeData(defaultTree, \"update\", attc)\r\n                        });\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        /*\r\n        * 处理树节点   taskc 任务：nextProps.data[\"children\"][0][\"children\"]\r\n        * */\r\n        if (this.props.treeData) {\r\n            /*根据该节点树型数控制改树结构*/\r\n            if (this.props.treeData.children===null) { // 没有任务集合\r\n                this.setState({\r\n                    dataSource: []\r\n                });\r\n            } else {  // 包含子任务集合\r\n                const dataSource = this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].children;\r\n                this.setState({\r\n                    dataSource,\r\n                    currentTree: Object.assign({}, this.props.treeData),\r\n                    pid: this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].id,\r\n                    projectId: this.props.treeData.children.filter((item)=>item.treeType==\"taskc\")[0].projectId,\r\n                    hidden: this.props.disabled\r\n                })\r\n            }\r\n        }\r\n\t}\r\n\r\n\thandleSelChange = (val, e) => {\r\n\t\tlet userIds;\r\n\t\tif (e.length) {\r\n\t\t\tuserIds = e.map((item)=>{return {userId: item.props.value, userName: item.props.children}})\r\n\t\t} else {\r\n\t\t\tuserIds  = []\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tuserIds\r\n\t\t});\r\n\t\tconst {currentTree} = this.state;\r\n\t\t// 更新当前树\r\n        const currentData = Object.assign({}, currentTree, {masters:userIds});\r\n        this.setState({\r\n            currentTree: Object.assign({}, currentTree, currentData)\r\n        });\r\n    }\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {currentTree, defaultTree} = _this.state;\r\n\t\t// 校验1：任务名称必输 截至日期必输\r\n\t\tlet currentDataSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children:[];\r\n\t\tconst isSub = currentDataSource.filter((item)=>{return item.name==\"\"||item.name==null})\r\n\t\tif (isSub.length>0) {  // true\r\n\t\t\tmessage.warn(\"任务名称是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst isEndime = currentDataSource.filter((item)=>{return item.beginTime!=\"\"&&item.beginTime!=null&&(item.endTime==\"\"||item.endTime==null)})\r\n\t\tif (isEndime.length>0) {  // true\r\n\t\t\tmessage.warn(\"截至日期是必填项\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 校验2：主任务内容有没有变动，有则主负责人必输\r\n        // 记录之前的主任务数据\r\n        let defaultSource=defaultTree.children!=null&&defaultTree.children[0].children!=null?defaultTree.children[0].children.map(item=>{\r\n            return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n                \"beginTime\": item.beginTime,\r\n                \"endTime\": item.endTime,\r\n                \"rate\": item.rate\r\n            }\r\n        }):[];\r\n        let currentSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children.map(item=>{\r\n            return {\r\n                \"name\": item.name,\r\n                \"masters\": item.masters,\r\n\t            \"beginTime\": item.beginTime,\r\n\t            \"endTime\": item.endTime,\r\n                \"rate\": item.rate\r\n            }\r\n        }):[];\r\n        const isChange = JSON.stringify(defaultSource)==JSON.stringify(currentSource); // 主任务是否变动\r\n        const isMasters = currentTree&&currentTree.masters==null?[]:currentTree.masters; //是否有主负责人\r\n        if (isMasters.length==0&&isChange==false) {\r\n            message.warn(\"主负责人是必填项\");\r\n            return false;\r\n        }\r\n        _this.props.form.validateFieldsAndScroll((err, values) => {\r\n            if (!err) {\r\n                _this.props.saveNodes(currentTree);\r\n                let comStates = JSON.parse(JSON.stringify(_this.store.comStates));\r\n                _this.store.comStates = Object.assign(comStates, {[_this.props.id]: true})\r\n            }\r\n        });\r\n\t}\r\n\r\n    // 更新该节点树 数据\r\n    saveData2 = (taskdata, key) => {\r\n        const {currentTree} = this.state;\r\n        let newData = [];\r\n        taskdata.forEach(item=>{\r\n            let {key, children, ...obj} = item;\r\n            newData.push(obj);\r\n        });\r\n        let currentTaskC = currentTree.children.filter(item=> item.treeType==='taskc')[0];\r\n        currentTaskC = Object.assign(currentTaskC,{\"children\":taskdata})\r\n        let stepChildren = currentTree.children;\r\n        const taskcIndex = stepChildren.findIndex(item=> {return item.treeType==='taskc'} )\r\n        stepChildren[taskcIndex] = currentTaskC;\r\n        this.setState({currentTree:Object.assign(currentTree, {\"children\":stepChildren})});\r\n    }\r\n\r\n    // 编辑\r\n    onChangeVis = () => {\r\n\t    let comStates = JSON.parse(JSON.stringify(this.store.comStates));\r\n        this.store.comStates = Object.assign(comStates, {[this.props.id]: false});\r\n\t    let comCount = JSON.parse(JSON.stringify(this.store.comCount));\r\n\t    this.store.comCount = Object.assign(comCount, {[this.props.id]: Number(this.props.count)+1});\r\n        // 点击编辑时记录当前树的默认数据\r\n        this.setState({\r\n            defaultTree: Object.assign({}, this.state.currentTree)\r\n        });\r\n    }\r\n\r\n    // 取消\r\n    onCanlc = ()=> {\r\n        this.props.form.resetFields();\r\n        this.onChangeVis();\r\n        let comStates = JSON.parse(JSON.stringify(this.store.comStates));\r\n        this.store.comStates = Object.assign(comStates, {[this.props.id]: true})\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", this.state.defaultTree);\r\n    }\r\n\r\n    // 人员选择更新\r\n    updatePerson = (userIds)=>{\r\n        const {currentTree} = this.state;\r\n\t    // 更新当前树\r\n        const currentData = Object.assign({}, currentTree, {masters:userIds});\r\n        // 更新tree\r\n        let treeData = JSON.parse(JSON.stringify(this.store.treeData));\r\n        this.store.treeData = utils.updateTreeData(treeData, \"update\", currentData);\r\n    }\r\n\r\n\trender() {\r\n\t\tlet _this = this;\r\n\t\tconst {getFieldDecorator} = _this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 6},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tsm: {span: 16},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst { hidden, currentTree } = _this.state;\r\n\t\tconst {state} = _this.store;\r\n\t\tconst {isShow, count}=this.props;\r\n\t\tlet currentDataSource = currentTree.children!=null&&currentTree.children[0].children!=null?currentTree.children[0].children:[];\r\n        let attcObj = currentTree.children!=null&&currentTree.children.filter((item)=>{return item.treeType==='attc'})[0];  //附件对象\r\n        const attachments = attcObj.children!=null?attcObj.children.map((vitem) => {\r\n            return Object.assign({}, {\r\n                uid: vitem.id,\r\n                name: vitem.fileName,\r\n                status: 'done',\r\n                url: vitem.filePath,\r\n                fileId: vitem.fileId,\r\n                fileName:vitem.fileName,\r\n                filePath: vitem.filePath,\r\n                id: vitem.id\r\n            })\r\n        }) : [];\r\n        let expandedKeys = mobx.toJS(_this.store.expandedKeys)[this.props.id]!== undefined?mobx.toJS(_this.store.expandedKeys)[this.props.id]:[]\r\n        let isExp = expandedKeys.length>0?true:false;\r\n        return (\r\n\t\t\t<Card bordered style={{width: '100%'}} className=\"mt20\">\r\n\t\t\t\t<h3 id={this.props.id} className=\"kanban_title mb20\">{_this.props.treeData.stageName}</h3>\r\n                <span className=\"worktile_progress_add\">\r\n                    {hidden ?\r\n\t                    <Button className={state == 2 ? \"hidden\" : \"\"}\r\n\t                            disabled={isShow}\r\n\t                            type=\"link\"\r\n\t                            onClick={this.onChangeVis}>{count==1? \"创建\" : \"编辑\"}</Button> :\r\n\t                    <div>\r\n\t\t                    <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                    <Button disabled={isExp} type=\"link\" onClick={this.handleSubmit}>保存</Button>\r\n\t                    </div>}\r\n                </span>\r\n                <Form className={count==1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n                            <Form.Item label=\"主负责人\" className=\"w\">\r\n                                {getFieldDecorator('masters', {\r\n                                    initialValue: currentTree&&currentTree.masters==null?[]:currentTree.masters.map(item=>item.userId),\r\n                                    rules: [{required: false, message: '请选择主负责人'}],\r\n                                })(\r\n                                    <PersonAddIcon\r\n                                        data={currentTree&&currentTree.masters==null?[]:currentTree.masters}\r\n                                        updatePerson={this.updatePerson}\r\n                                        disabled={hidden}\r\n                                    />\r\n                                )}\r\n                            </Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n                {/*任务*/}\r\n\t\t\t\t{count==1?null:\r\n                <EditableTable\r\n                    id={this.props.id}\r\n                    dataSource={currentDataSource}\r\n                    saveData={this.saveData2}\r\n                    projectId={this.state.projectId}\r\n                    pid={this.state.pid}\r\n                    disabled={hidden}\r\n                    store={this.store}\r\n                />}\r\n\t\t\t\t{count==1?null:\r\n                <div className={hidden?\"mt15\":\"myupload_pos\"}>\r\n                    <MyUpload\r\n                        saveAttachment={this.props.saveAttachment}\r\n                        delNode={this.props.delNode}\r\n                        fileList={attachments}\r\n                        pid={attcObj.id}\r\n                        projectId={attcObj.projectId}\r\n                        disabled={hidden}\r\n                        ossData={this.props.oss}\r\n                    />\r\n                </div>}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default WortileCommon;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/WortileCommon.js","/*\r\n* 订单信息组件\r\n* */\r\nimport React from 'react';\r\nimport {inject, observer} from 'mobx-react';\r\nimport {Input, InputNumber, Form, Row, Col, Card, Button, Icon, Tooltip, message} from 'antd';\r\nimport ContentEditable from 'react-simple-contenteditable';\r\nimport PersonAddIcon from \"@/components/worktile/PersonAddIcon\";\r\nimport PersonAdd2 from \"@/components/worktile/PersonAdd\";\r\nimport MyUpload from '@/components/worktile/MyUpload';\r\nimport {List} from 'immutable';\r\n\r\n@Form.create()\r\n@observer\r\nexport default class Ordercenter extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.store = this.props.store;\r\n\t\tthis.state = {\r\n\t\t\tfields: {\r\n\t\t\t\t\"id\": \"\",\r\n\t\t\t\t\"pid\": \"\",\r\n\t\t\t\t\"orderRemark\": \"\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"masters\": [],\r\n\t\t\t\t\"customer\": \"\",\r\n\t\t\t\t\"customerPhone\": \"\",\r\n\t\t\t\t\"productType\": [\"5\"],\r\n\t\t\t\t\"address\": \"\",\r\n\t\t\t\t\"productNumber\": \"\",\r\n\t\t\t\t\"milepost\": \"\",\r\n\t\t\t\t\"priceProduct\": 0,\r\n\t\t\t\t\"priceDiscount\": \"\",\r\n\t\t\t\t\"priceDeal\": 0,\r\n\t\t\t\t\"notifications\": [],\r\n\t\t\t\t\"json\": []\r\n\t\t\t},\r\n\t\t\thidden: true,  // 面板折叠展开\r\n\t\t\tkeys: [],\r\n\t\t\tprojectinfo: {}, // 记录保存参数\r\n\t\t\torderinfo: {}, // 记录保存参数\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst {itemObj} = nextProps;\r\n\t\tif (itemObj) {\r\n\t\t\tif (JSON.stringify(itemObj) !== JSON.stringify(this.props.itemObj)) {\r\n\t\t\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t\t\t})[0]; // 项目信息已有字段\r\n\t\t\t\tlet orderinfo = projectinfo.children.filter((item) => {\r\n\t\t\t\t\treturn item.treeType == \"orderinfo\"\r\n\t\t\t\t})[0];     // 订单信息字段\r\n\r\n\t\t\t\tlet jsonString = orderinfo.json; //新增字段数组处理\r\n\t\t\t\tconst josn = jsonString == null || (Array.isArray(jsonString) && jsonString.length == 0) ? [] : JSON.parse(jsonString);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tprojectinfo: Object.assign({}, projectinfo),\r\n\t\t\t\t\torderinfo: Object.assign({}, orderinfo),\r\n\t\t\t\t\tfields: {\r\n\t\t\t\t\t\t\"id\": orderinfo.id,\r\n\t\t\t\t\t\t\"pid\": orderinfo.pid,\r\n\t\t\t\t\t\t\"orderRemark\": orderinfo.orderRemark == null ? \"\" : orderinfo.orderRemark,\r\n\t\t\t\t\t\t\"name\": projectinfo.name == null ? \"\" : projectinfo.name,\r\n\t\t\t\t\t\t\"masters\": projectinfo.masters == null ? [] : projectinfo.masters,\r\n\t\t\t\t\t\t\"customer\": projectinfo.customer == null ? \"\" : projectinfo.customer,\r\n\t\t\t\t\t\t\"customerPhone\": orderinfo.customerPhone,\r\n\t\t\t\t\t\t\"productType\": [\"5\"],\r\n\t\t\t\t\t\t\"address\": projectinfo.address == null ? \"\" : projectinfo.address,\r\n\t\t\t\t\t\t\"productNumber\": orderinfo.productNumber,\r\n\t\t\t\t\t\t\"milepost\": projectinfo.milepost == null ? \"\" : projectinfo.milepost,\r\n\t\t\t\t\t\t\"priceProduct\": orderinfo.priceProduct == null ? 0 : orderinfo.priceProduct,\r\n\t\t\t\t\t\t\"priceDiscount\": orderinfo.priceDiscount == null ? \"\" : orderinfo.priceDiscount,\r\n\t\t\t\t\t\t\"priceDeal\": orderinfo.priceDeal == null ? 0 : orderinfo.priceDeal,\r\n\t\t\t\t\t\t\"notifications\": orderinfo.masters == null ? [] : orderinfo.masters,\r\n\t\t\t\t\t\t\"json\": []\r\n\t\t\t\t\t},\r\n\t\t\t\t\tkeys: Object.assign([], josn)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst {itemObj, disabled} = this.props;\r\n\t\tlet projectinfo = itemObj.children.filter((item) => {\r\n\t\t\treturn item.treeType == \"projectinfo\"\r\n\t\t})[0]; // 项目信息已有字段\r\n\t\tlet orderinfo = projectinfo.children.filter((item) => {\r\n\t\t\treturn item.treeType == \"orderinfo\"\r\n\t\t})[0];     // 订单信息字段\r\n\r\n\t\tlet jsonString = orderinfo.json; //新增字段数组处理\r\n\t\tconst josn = jsonString == null || (Array.isArray(jsonString) && jsonString.length == 0) ? [] : JSON.parse(jsonString);\r\n\t\tthis.setState({\r\n\t\t\tprojectinfo: Object.assign({}, projectinfo),\r\n\t\t\torderinfo: Object.assign({}, orderinfo),\r\n\t\t\tfields: {\r\n\t\t\t\t\"id\": orderinfo.id,\r\n\t\t\t\t\"pid\": orderinfo.pid,\r\n\t\t\t\t\"orderRemark\": orderinfo.orderRemark == null ? \"\" : orderinfo.orderRemark,\r\n\t\t\t\t\"name\": projectinfo.name == null ? \"\" : projectinfo.name,\r\n\t\t\t\t\"masters\": projectinfo.masters == null ? [] : projectinfo.masters,\r\n\t\t\t\t\"customer\": projectinfo.customer == null ? \"\" : projectinfo.customer,\r\n\t\t\t\t\"customerPhone\": orderinfo.customerPhone,\r\n\t\t\t\t\"productType\": [\"5\"],\r\n\t\t\t\t\"address\": projectinfo.address == null ? \"\" : projectinfo.address,\r\n\t\t\t\t\"productNumber\": orderinfo.productNumber,\r\n\t\t\t\t\"milepost\": projectinfo.milepost == null ? \"\" : projectinfo.milepost,\r\n\t\t\t\t\"priceProduct\": orderinfo.priceProduct == null ? 0 : orderinfo.priceProduct,\r\n\t\t\t\t\"priceDiscount\": orderinfo.priceDiscount == null ? \"\" : orderinfo.priceDiscount,\r\n\t\t\t\t\"priceDeal\": orderinfo.priceDeal == null ? 0 : orderinfo.priceDeal,\r\n\t\t\t\t\"notifications\": orderinfo.masters == null ? [] : orderinfo.masters,\r\n\t\t\t\t\"json\": []\r\n\t\t\t},\r\n\t\t\tkeys: Object.assign([], josn),\r\n\t\t\thidden: disabled\r\n\t\t});\r\n\t\tthis.props.onRef(this);\r\n\t}\r\n\r\n\t// 保存\r\n\thandleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet _this = this;\r\n\t\tconst {projectinfo, orderinfo, fields, keys} = _this.state;\r\n\t\tif (keys.filter((item)=>{ return item.key==\"\"||item.key==null}).length>0) {\r\n             message.warn(\"新增字段的名称不能为空\")\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst {projectId} = _this.store;\r\n\t\t_this.props.form.validateFields((err, values) => {\r\n\t\t\tif (!err) {\r\n\t\t\t\tlet project = JSON.parse(JSON.stringify(projectinfo));\r\n\t\t\t\tlet order = JSON.parse(JSON.stringify(orderinfo));\r\n\t\t\t\tdelete project.children;\r\n\t\t\t\tif (order.children == null) {\r\n\t\t\t\t\tdelete order.children;\r\n\t\t\t\t}\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tproject: Object.assign(project, {\r\n\t\t\t\t\t\t\"projectId\": projectId,\r\n\t\t\t\t\t\t\"name\": values.name,\r\n\t\t\t\t\t\t\"masters\": fields.masters,\r\n\t\t\t\t\t\t\"customer\": values.customer,\r\n\t\t\t\t\t\t\"address\": values.address,\r\n\t\t\t\t\t\t\"milepost\": values.milepost,\r\n\t\t\t\t\t}),\r\n\t\t\t\t\torderinfo: Object.assign(order, {\r\n\t\t\t\t\t\t\"projectId\": projectId,\r\n\t\t\t\t\t\t\"orderRemark\": values.orderRemark,\r\n\t\t\t\t\t\t\"customerPhone\": values.customerPhone,\r\n\t\t\t\t\t\t\"productNumber\": values.productNumber,\r\n\t\t\t\t\t\t\"masters\": fields.notifications,\r\n\t\t\t\t\t\t\"json\": JSON.stringify(keys),\r\n\t\t\t\t\t\t\"priceProduct\": values.priceProduct == \"\" || values.priceProduct == null ? 0 : Number(values.priceProduct),\r\n\t\t\t\t\t\t\"priceDiscount\": values.priceDiscount == \"\" || values.priceDiscount == null ? \"\" : values.priceDiscount,\r\n\t\t\t\t\t\t\"priceDeal\": values.priceDeal == \"\" || values.priceDeal == null ? 0 : Number(values.priceDeal)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t_this.props.saveProject(params);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tremove = k => {\r\n\t\tconst keys = JSON.parse(JSON.stringify(this.state.keys));\r\n\t\tkeys.splice(k, 1);\r\n\t\tthis.setState({\r\n\t\t\tkeys\r\n\t\t});\r\n\t};\r\n\r\n\t// 新增字段\r\n\tadd = () => {\r\n\t\tconst keys = JSON.parse(JSON.stringify(this.state.keys));\r\n\t\tkeys.push({key: \"新增字段\", value: \"\"})\r\n\t\tthis.setState({\r\n\t\t\tkeys\r\n\t\t});\r\n\t};\r\n\r\n\thandleChange(index, e, val) {\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.keys));\r\n\t\tcustomList[index].key = val;\r\n\t\tthis.setState({\r\n\t\t\tkeys: Object.assign([], customList)\r\n\t\t});\r\n\t}\r\n\r\n\tchangeNew = (index, e) => {\r\n\t\tconst {value} = e.target;\r\n\t\tlet customList = JSON.parse(JSON.stringify(this.state.keys));\r\n\t\tlet list = List(customList);\r\n\t\tlist.update(index, (val) => {\r\n\t\t\tval.value = value;\r\n\t\t\treturn val;\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tkeys: Object.assign([], list.toJS())\r\n\t\t});\r\n\t}\r\n\r\n\t// 人员选择更新\r\n\tupdatePerson = (type, userIds) => {\r\n\t\tlet fields = JSON.parse(JSON.stringify(this.state.fields));\r\n\t\tthis.setState({\r\n\t\t\tfields: Object.assign(fields, {\r\n\t\t\t\t[type]: userIds\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t// 编辑、创建\r\n\tonChangeVis = () => {\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden,\r\n\t\t});\r\n\t\tthis.props.updateCount('count', Number(this.props.count) + 1)\r\n\t}\r\n\r\n\t// 取消\r\n\tonCanlc = () => {\r\n\t\tthis.props.form.resetFields();\r\n\t\tthis.setState({\r\n\t\t\thidden: !this.state.hidden\r\n\t\t});\r\n\t}\r\n\r\n\tupdateTip = (type) => {\r\n\t\tconst val = this.props.form.getFieldValue('priceProduct')\r\n\t\tif (type==\"notifications\"&&(val==\"\"||val==null)) {  // 报价同步提示\r\n\t\t\t//message.warn(\"请先输入产品价格\");\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {fields, hidden, keys,} = this.state;\r\n\t\tconst {projectId, state} = this.store;\r\n\t\tconst {count, itemObj, ossData, saveAttachment, delNode} = this.props;\r\n\t\tconst {getFieldDecorator} = this.props.form;\r\n\t\tconst formItemLayout = {\r\n\t\t\tlabelCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tmd: {span: 8},\r\n\t\t\t\tsm: {span: 10},\r\n\t\t\t},\r\n\t\t\twrapperCol: {\r\n\t\t\t\txs: {span: 24},\r\n\t\t\t\tmd: {span: 16},\r\n\t\t\t\tsm: {span: 14},\r\n\t\t\t},\r\n\t\t};\r\n\t\tconst formItems = keys.map((k, index) => (\r\n\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8} key={'keys' + index}>\r\n\t\t\t\t<Form.Item\r\n\t\t\t\t\t{...formItemLayout}\r\n\t\t\t\t\tlabel={\r\n\t\t\t\t\t\thidden ? (k.key == null ? \"\" : k.key) : <ContentEditable\r\n\t\t\t\t\t\t\thtml={k.key == null ? \"\" : k.key}\r\n\t\t\t\t\t\t\tclassName=\"edite_div bd1\"\r\n\t\t\t\t\t\t\ttagName=\"h1\"\r\n\t\t\t\t\t\t\tonKeyPress={this.handleChange.bind(this, index)}\r\n\t\t\t\t\t\t\tonChange={this.handleChange.bind(this, index)}\r\n\t\t\t\t\t\t\tcontentEditable=\"plaintext-only\"\r\n\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t/>}\r\n\t\t\t\t\tclassName='w pr'\r\n\t\t\t\t>\r\n\t\t\t\t\t{getFieldDecorator('key' + index, {\r\n\t\t\t\t\t\t//initialValue: k.value,\r\n\t\t\t\t\t\trules: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: false,\r\n\t\t\t\t\t\t\t\tmessage: \"请输入\",\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})(\r\n\t\t\t\t\t\t<div className={hidden ? \"w dib\" : \"w90 dib\"}>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tplaceholder=\"\"\r\n\t\t\t\t\t\t\t\tvalue={k.value == null ? \"\" : k.value}\r\n\t\t\t\t\t\t\t\tonChange={this.changeNew.bind(this, index)}\r\n\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<Tooltip title=\"删除\">\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tclassName={hidden ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\tstyle={{marginLeft: '5px'}}\r\n\t\t\t\t\t\t\ttype=\"minus-circle-o\"\r\n\t\t\t\t\t\t\tonClick={() => this.remove(index)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Col>\r\n\t\t));\r\n\t\tlet isShow = projectId == null || projectId == \"\" ? true : false;\r\n\t\tlet attcObj = itemObj.children != null && itemObj.children.filter((item) => {\r\n\t\t\treturn item.treeType === 'attc'\r\n\t\t})[0];  //附件对象\r\n\t\tconst attachments = attcObj.children != null ? attcObj.children.map((vitem) => {\r\n\t\t\treturn Object.assign({}, {\r\n\t\t\t\tuid: vitem.id,\r\n\t\t\t\tname: vitem.fileName,\r\n\t\t\t\tstatus: 'done',\r\n\t\t\t\turl: vitem.filePath,\r\n\t\t\t\tfileId: vitem.fileId,\r\n\t\t\t\tfileName: vitem.fileName,\r\n\t\t\t\tfilePath: vitem.filePath,\r\n\t\t\t\tid: vitem.id\r\n\t\t\t})\r\n\t\t}) : [];\r\n\t\treturn (\r\n\t\t\t<Card bordered className=\"pr\" style={{width: '100%'}}>\r\n\t\t\t\t<h3 id={itemObj.id||\"items0\"} className=\"kanban_title mb20\">订单信息</h3>\r\n\t\t\t\t<span className=\"worktile_progress_add\">\r\n                     {hidden ?\r\n\t                     <Button className={state == 2 ? \"hidden\" : \"\"} type=\"link\"\r\n\t                             onClick={this.onChangeVis}>{count == 1 ? \"创建\" : \"编辑\"}</Button> :\r\n\t                     <div>\r\n\t\t                     <span onClick={this.onCanlc} className=\"mr10\">取消</span>\r\n\t\t                     <span onClick={this.handleSubmit}>保存</span>\r\n\t                     </div>}\r\n                </span>\r\n\t\t\t\t<Form className={count == 1 ? \"hidden\" : \"clearfix\"} layout=\"inline\" {...formItemLayout}>\r\n\t\t\t\t\t<Row gutter={[{xs: 24, sm: 24, md: 18, lg: 12, xl: 8}, 15]}>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"项目名称\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('name', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.name || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: true, message: '请输入项目名称'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"主负责人\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('masters', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.masters == null ? [] : fields.masters,\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入主负责人'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<PersonAddIcon\r\n\t\t\t\t\t\t\t\t\t\tdata={fields.masters == null ? [] : fields.masters}\r\n\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, 'masters')}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"项目地点\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('address', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.address || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入项目地点'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"客户名称\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('customer', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.customer || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户名称'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"客户电话\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('customerPhone', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.customerPhone || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入客户电话'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"关键里程碑\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('milepost', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.milepost || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入关键里程碑'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"产品类型\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('productType', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.productType || [],\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入产品类型'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<span>劳务仓</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"型号编码\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('productNumber', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.productNumber || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入型号编码'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"订单备注\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('orderRemark', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.orderRemark || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入订单备注'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"产品价格(万元)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('priceProduct', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.priceProduct || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入产品价格'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"价格折扣\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('priceDiscount', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.priceDiscount || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入价格折扣'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"最终价格(万元)\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('priceDeal', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.priceDeal || \"\",\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请输入最终价格'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<InputNumber placeholder=\"请输入\" className=\"w\" disabled={hidden}/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs={24} sm={24} md={18} lg={12} xl={8}>\r\n\t\t\t\t\t\t\t<Form.Item label=\"报价同步\" className=\"w\">\r\n\t\t\t\t\t\t\t\t{getFieldDecorator('notifications', {\r\n\t\t\t\t\t\t\t\t\tinitialValue: fields.notifications == null ? [] : fields.notifications,\r\n\t\t\t\t\t\t\t\t\trules: [{required: false, message: '请选择同步人员'}],\r\n\t\t\t\t\t\t\t\t})(\r\n\t\t\t\t\t\t\t\t\t<PersonAdd2\r\n\t\t\t\t\t\t\t\t\t\tdata={fields.notifications == null ? [] : fields.notifications}\r\n\t\t\t\t\t\t\t\t\t\tupdatePerson={this.updatePerson.bind(this, 'notifications')}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\t\tupdateTip={this.updateTip.bind(this, 'notifications')}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{formItems}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form>\r\n\t\t\t\t<Row className={count == 1 ? \"hidden\" : \"\"}>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Tooltip title=\"新增字段\">\r\n\t\t\t\t\t\t\t<Icon onClick={this.add}\r\n\t\t\t\t\t\t\t      className={hidden ? \"hidden\" : \"\"}\r\n\t\t\t\t\t\t\t      style={{margin: '0 20px', color: '#4BA4BE', fontSize: '22px'}} type=\"plus-circle\"/>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t{isShow ? null :\r\n\t\t\t\t\t\t\t<div className={hidden ? \"mt15\" : \"myupload_pos\"} style={{top: '-27px', left: '53px'}}>\r\n\t\t\t\t\t\t\t\t<MyUpload\r\n\t\t\t\t\t\t\t\t\tsaveAttachment={saveAttachment}\r\n\t\t\t\t\t\t\t\t\tdelNode={delNode}\r\n\t\t\t\t\t\t\t\t\tfileList={attachments}\r\n\t\t\t\t\t\t\t\t\tdisabled={hidden}\r\n\t\t\t\t\t\t\t\t\tpid={attcObj.id}\r\n\t\t\t\t\t\t\t\t\tprojectId={attcObj.projectId}\r\n\t\t\t\t\t\t\t\t\tossData={ossData}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/labor/Ordercenter.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ContentEditable = function (_Component) {\n  _inherits(ContentEditable, _Component);\n\n  function ContentEditable(props) {\n    _classCallCheck(this, ContentEditable);\n\n    var _this = _possibleConstructorReturn(this, (ContentEditable.__proto__ || Object.getPrototypeOf(ContentEditable)).call(this, props));\n\n    _this._onChange = _this._onChange.bind(_this);\n    _this._onPaste = _this._onPaste.bind(_this);\n    _this._onKeyPress = _this._onKeyPress.bind(_this);\n    return _this;\n  }\n\n  _createClass(ContentEditable, [{\n    key: '_onChange',\n    value: function _onChange(ev) {\n      var method = this.getInnerMethod();\n      var value = this.elem[method];\n\n      this.props.onChange(ev, value);\n    }\n  }, {\n    key: '_onPaste',\n    value: function _onPaste(ev) {\n      var _props = this.props,\n          onPaste = _props.onPaste,\n          contentEditable = _props.contentEditable;\n\n\n      if (contentEditable === 'plaintext-only') {\n        ev.preventDefault();\n        var text = ev.clipboardData.getData(\"text\");\n        document.execCommand('insertText', false, text);\n      }\n\n      if (onPaste) {\n        onPaste(ev);\n      }\n    }\n  }, {\n    key: '_onKeyPress',\n    value: function _onKeyPress(ev) {\n      var method = this.getInnerMethod();\n      var value = this.elem[method];\n\n      this.props.onKeyPress(ev, value);\n    }\n  }, {\n    key: 'getInnerMethod',\n    value: function getInnerMethod() {\n      return this.props.contentEditable === 'plaintext-only' ? 'innerText' : 'innerHTML';\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var method = this.getInnerMethod();\n      return nextProps.html !== this.elem[method];\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          tagName = _props2.tagName,\n          html = _props2.html,\n          contentEditable = _props2.contentEditable,\n          props = _objectWithoutProperties(_props2, ['tagName', 'html', 'contentEditable']);\n\n      var Element = tagName || \"div\";\n\n      return _react2.default.createElement(Element, _extends({}, props, {\n        ref: function ref(elem) {\n          _this2.elem = elem;\n        },\n        dangerouslySetInnerHTML: { __html: html },\n        contentEditable: contentEditable === 'false' ? false : true,\n        onInput: this._onChange,\n        onPaste: this._onPaste,\n        onKeyPress: this._onKeyPress\n      }));\n    }\n  }]);\n\n  return ContentEditable;\n}(_react.Component);\n\nexports.default = ContentEditable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-simple-contenteditable/lib/index.js\n// module id = 2235\n// module chunks = 21"],"sourceRoot":""}